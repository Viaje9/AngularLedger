var YL=Object.create;var ry=Object.defineProperty,ZL=Object.defineProperties,XL=Object.getOwnPropertyDescriptor,JL=Object.getOwnPropertyDescriptors,eV=Object.getOwnPropertyNames,kd=Object.getOwnPropertySymbols,LC=Object.getPrototypeOf,sy=Object.prototype.hasOwnProperty,VC=Object.prototype.propertyIsEnumerable,tV=Reflect.get;var FC=(t,e,n)=>e in t?ry(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I=(t,e)=>{for(var n in e||={})sy.call(e,n)&&FC(t,n,e[n]);if(kd)for(var n of kd(e))VC.call(e,n)&&FC(t,n,e[n]);return t},ye=(t,e)=>ZL(t,JL(e));var jC=(t,e)=>{var n={};for(var i in t)sy.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&kd)for(var i of kd(t))e.indexOf(i)<0&&VC.call(t,i)&&(n[i]=t[i]);return n};var X7=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var nV=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of eV(e))!sy.call(t,r)&&r!==n&&ry(t,r,{get:()=>e[r],enumerable:!(i=XL(e,r))||i.enumerable});return t};var J7=(t,e,n)=>(n=t!=null?YL(LC(t)):{},nV(e||!t||!t.__esModule?ry(n,"default",{value:t,enumerable:!0}):n,t));var qn=(t,e,n)=>tV(LC(t),n,e);var m=(t,e,n)=>new Promise((i,r)=>{var s=c=>{try{a(n.next(c))}catch(l){r(l)}},o=c=>{try{a(n.throw(c))}catch(l){r(l)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});function iV(t,e){return Object.is(t,e)}var ot=null,Fd=!1,Ld=1,xo=Symbol("SIGNAL");function ft(t){let e=ot;return ot=t,e}var oy={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function BC(t){if(Fd)throw new Error("");if(ot===null)return;ot.consumerOnSignalRead(t);let e=ot.nextProducerIndex++;if(Ro(ot),e<ot.producerNode.length&&ot.producerNode[e]!==t&&Dc(ot)){let n=ot.producerNode[e];Vd(n,ot.producerIndexOfThis[e])}ot.producerNode[e]!==t&&(ot.producerNode[e]=t,ot.producerIndexOfThis[e]=Dc(ot)?GC(t,ot,e):0),ot.producerLastReadVersion[e]=t.version}function rV(){Ld++}function sV(t){if(!(Dc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Ld)){if(!t.producerMustRecompute(t)&&!ay(t)){t.dirty=!1,t.lastCleanEpoch=Ld;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Ld}}function UC(t){if(t.liveConsumerNode===void 0)return;let e=Fd;Fd=!0;try{for(let n of t.liveConsumerNode)n.dirty||oV(n)}finally{Fd=e}}function $C(){return ot?.consumerAllowSignalWrites!==!1}function oV(t){t.dirty=!0,UC(t),t.consumerMarkedDirty?.(t)}function HC(t){return t&&(t.nextProducerIndex=0),ft(t)}function zC(t,e){if(ft(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Dc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Vd(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ay(t){Ro(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(sV(n),i!==n.version))return!0}return!1}function qC(t){if(Ro(t),Dc(t))for(let e=0;e<t.producerNode.length;e++)Vd(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function GC(t,e,n){if(WC(t),Ro(t),t.liveConsumerNode.length===0)for(let i=0;i<t.producerNode.length;i++)t.producerIndexOfThis[i]=GC(t.producerNode[i],t,i);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Vd(t,e){if(WC(t),Ro(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)Vd(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];Ro(r),r.producerIndexOfThis[i]=e}}function Dc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ro(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function WC(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function aV(){throw new Error}var KC=aV;function QC(){KC()}function YC(t){KC=t}var cV=null;function ZC(t){let e=Object.create(JC);e.value=t;let n=()=>(BC(e),e.value);return n[xo]=e,n}function cy(t,e){$C()||QC(),t.equal(t.value,e)||(t.value=e,lV(t))}function XC(t,e){$C()||QC(),cy(t,e(t.value))}var JC=ye(I({},oy),{equal:iV,value:void 0});function lV(t){t.version++,rV(),UC(t),cV?.()}function U(t){return typeof t=="function"}function Mo(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var jd=Mo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function as(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Se=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(U(i))try{i()}catch(s){e=s instanceof jd?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{eT(s)}catch(o){e=e??[],o instanceof jd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new jd(e)}}add(e){var n;if(e&&e!==this)if(this.closed)eT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&as(n,e)}remove(e){let{_finalizers:n}=this;n&&as(n,e),e instanceof t&&e._removeParent(this)}};Se.EMPTY=(()=>{let t=new Se;return t.closed=!0,t})();var ly=Se.EMPTY;function Bd(t){return t instanceof Se||t&&"closed"in t&&U(t.remove)&&U(t.add)&&U(t.unsubscribe)}function eT(t){U(t)?t():t.unsubscribe()}var Rn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var No={setTimeout(t,e,...n){let{delegate:i}=No;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=No;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ud(t){No.setTimeout(()=>{let{onUnhandledError:e}=Rn;if(e)e(t);else throw t})}function Ni(){}var tT=uy("C",void 0,void 0);function nT(t){return uy("E",void 0,t)}function iT(t){return uy("N",t,void 0)}function uy(t,e,n){return{kind:t,value:e,error:n}}var cs=null;function Po(t){if(Rn.useDeprecatedSynchronousErrorHandling){let e=!cs;if(e&&(cs={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=cs;if(cs=null,n)throw i}}else t()}function rT(t){Rn.useDeprecatedSynchronousErrorHandling&&cs&&(cs.errorThrown=!0,cs.error=t)}var ls=class extends Se{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Bd(e)&&e.add(this)):this.destination=hV}static create(e,n,i){return new Pi(e,n,i)}next(e){this.isStopped?hy(iT(e),this):this._next(e)}error(e){this.isStopped?hy(nT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hy(tT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},uV=Function.prototype.bind;function dy(t,e){return uV.call(t,e)}var fy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){$d(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){$d(i)}else $d(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){$d(n)}}},Pi=class extends ls{constructor(e,n,i){super();let r;if(U(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let s;this&&Rn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&dy(e.next,s),error:e.error&&dy(e.error,s),complete:e.complete&&dy(e.complete,s)}):r=e}this.destination=new fy(r)}};function $d(t){Rn.useDeprecatedSynchronousErrorHandling?rT(t):Ud(t)}function dV(t){throw t}function hy(t,e){let{onStoppedNotification:n}=Rn;n&&No.setTimeout(()=>n(t,e))}var hV={closed:!0,next:Ni,error:dV,complete:Ni};var Oo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nt(t){return t}function Hd(...t){return py(t)}function py(t){return t.length===0?Nt:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var W=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let s=pV(n)?n:new Pi(n,i,r);return Po(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=sT(i),new i((r,s)=>{let o=new Pi({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[Oo](){return this}pipe(...n){return py(n)(this)}toPromise(n){return n=sT(n),new n((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return t.create=e=>new t(e),t})();function sT(t){var e;return(e=t??Rn.Promise)!==null&&e!==void 0?e:Promise}function fV(t){return t&&U(t.next)&&U(t.error)&&U(t.complete)}function pV(t){return t&&t instanceof ls||fV(t)&&Bd(t)}function my(t){return U(t?.lift)}function Y(t){return e=>{if(my(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function X(t,e,n,i,r){return new gy(t,e,n,i,r)}var gy=class extends ls{constructor(e,n,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ko(){return Y((t,e)=>{let n=null;t._refCount++;let i=X(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,s=n;n=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var ir=class extends W{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,my(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Se;let n=this.getSubject();e.add(this.source.subscribe(X(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Se.EMPTY)}return e}refCount(){return ko()(this)}};var Fo={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame,{delegate:i}=Fo;i&&(e=i.requestAnimationFrame,n=i.cancelAnimationFrame);let r=e(s=>{n=void 0,t(s)});return new Se(()=>n?.(r))},requestAnimationFrame(...t){let{delegate:e}=Fo;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){let{delegate:e}=Fo;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};var oT=Mo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var q=(()=>{class t extends W{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new zd(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new oT}next(n){Po(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){Po(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Po(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:s}=this;return i||r?ly:(this.currentObservers=null,s.push(n),new Se(()=>{this.currentObservers=null,as(s,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:s}=this;i?n.error(r):s&&n.complete()}asObservable(){let n=new W;return n.source=this,n}}return t.create=(e,n)=>new zd(e,n),t})(),zd=class extends q{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:ly}};var Ke=class extends q{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Cc={now(){return(Cc.delegate||Date).now()},delegate:void 0};var us=class extends q{constructor(e=1/0,n=1/0,i=Cc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;n||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){let o=n.now(),a=0;for(let c=1;c<i.length&&i[c]<=o;c+=2)a=c;a&&i.splice(0,a+1)}}};var qd=class extends Se{constructor(e,n){super()}schedule(e,n=0){return this}};var Tc={setInterval(t,e,...n){let{delegate:i}=Tc;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Tc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var rr=class extends qd{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,i=0){return Tc.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Tc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,as(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Lo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};Lo.now=Cc.now;var sr=class extends Lo{constructor(e,n=Lo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var un=new sr(rr),yy=un;var Gd=class extends rr{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var Wd=class extends sr{};var _y=new Wd(Gd);var Kd=class extends rr{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return i!==null&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=Fo.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,i=0){var r;if(i!=null?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);let{actions:s}=e;n!=null&&((r=s[s.length-1])===null||r===void 0?void 0:r.id)!==n&&(Fo.cancelAnimationFrame(n),e._scheduled=void 0)}};var Qd=class extends sr{flush(e){this._active=!0;let n=this._scheduled;this._scheduled=void 0;let{actions:i}=this,r;e=e||i.shift();do if(r=e.execute(e.state,e.delay))break;while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}};var aT=new Qd(Kd);var Ut=new W(t=>t.complete());function Yd(t){return t&&U(t.schedule)}function vy(t){return t[t.length-1]}function Zd(t){return U(vy(t))?t.pop():void 0}function Gn(t){return Yd(vy(t))?t.pop():void 0}function cT(t,e){return typeof vy(t)=="number"?t.pop():e}function Xd(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function JZ(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function uT(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(d){o(d)}}function c(u){try{l(i.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):r(u.value).then(a,c)}l((i=i.apply(t,e||[])).next())})}function lT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ds(t){return this instanceof ds?(this.v=t,this):new ds(t)}function dT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(i[h](f))}catch(p){d(s[0][3],p)}}function c(h){h.value instanceof ds?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function hT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof lT=="function"?lT(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),r(a,c,o.done,o.value)})}}function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Vo=t=>t&&typeof t.length=="number"&&typeof t!="function";function Jd(t){return U(t?.then)}function eh(t){return U(t[Oo])}function th(t){return Symbol.asyncIterator&&U(t?.[Symbol.asyncIterator])}function nh(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function mV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ih=mV();function rh(t){return U(t?.[ih])}function sh(t){return dT(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield ds(n.read());if(r)return yield ds(void 0);yield yield ds(i)}}finally{n.releaseLock()}})}function oh(t){return U(t?.getReader)}function Ee(t){if(t instanceof W)return t;if(t!=null){if(eh(t))return gV(t);if(Vo(t))return yV(t);if(Jd(t))return _V(t);if(th(t))return fT(t);if(rh(t))return vV(t);if(oh(t))return wV(t)}throw nh(t)}function gV(t){return new W(e=>{let n=t[Oo]();if(U(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function yV(t){return new W(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function _V(t){return new W(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ud)})}function vV(t){return new W(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function fT(t){return new W(e=>{EV(t,e).catch(n=>e.error(n))})}function wV(t){return fT(sh(t))}function EV(t,e){var n,i,r,s;return uT(this,void 0,void 0,function*(){try{for(n=hT(t);i=yield n.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}e.complete()})}function $t(t,e,n,i=0,r=!1){let s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function or(t,e=0){return Y((n,i)=>{n.subscribe(X(i,r=>$t(i,t,()=>i.next(r),e),()=>$t(i,t,()=>i.complete(),e),r=>$t(i,t,()=>i.error(r),e)))})}function ar(t,e=0){return Y((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function pT(t,e){return Ee(t).pipe(ar(e),or(e))}function mT(t,e){return Ee(t).pipe(ar(e),or(e))}function gT(t,e){return new W(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function yT(t,e){return new W(n=>{let i;return $t(n,e,()=>{i=t[ih](),$t(n,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){n.error(o);return}s?n.complete():n.next(r)},0,!0)}),()=>U(i?.return)&&i.return()})}function ah(t,e){if(!t)throw new Error("Iterable cannot be null");return new W(n=>{$t(n,e,()=>{let i=t[Symbol.asyncIterator]();$t(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function _T(t,e){return ah(sh(t),e)}function vT(t,e){if(t!=null){if(eh(t))return pT(t,e);if(Vo(t))return gT(t,e);if(Jd(t))return mT(t,e);if(th(t))return ah(t,e);if(rh(t))return yT(t,e);if(oh(t))return _T(t,e)}throw nh(t)}function Pe(t,e){return e?vT(t,e):Ee(t)}function H(...t){let e=Gn(t);return Pe(t,e)}function jo(t,e){let n=U(t)?t:()=>t,i=r=>r.error(n());return new W(e?r=>e.schedule(i,0,r):i)}function ch(t){return!!t&&(t instanceof W||U(t.lift)&&U(t.subscribe))}var Oi=Mo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function wT(t){return t instanceof Date&&!isNaN(t)}function oe(t,e){return Y((n,i)=>{let r=0;n.subscribe(X(i,s=>{i.next(t.call(e,s,r++))}))})}var{isArray:IV}=Array;function bV(t,e){return IV(e)?t(...e):t(e)}function Bo(t){return oe(e=>bV(t,e))}var{isArray:DV}=Array,{getPrototypeOf:CV,prototype:TV,keys:SV}=Object;function lh(t){if(t.length===1){let e=t[0];if(DV(e))return{args:e,keys:null};if(AV(e)){let n=SV(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function AV(t){return t&&typeof t=="object"&&CV(t)===TV}function uh(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function hs(...t){let e=Gn(t),n=Zd(t),{args:i,keys:r}=lh(t);if(i.length===0)return Pe([],e);let s=new W(RV(i,e,r?o=>uh(r,o):Nt));return n?s.pipe(Bo(n)):s}function RV(t,e,n=Nt){return i=>{ET(e,()=>{let{length:r}=t,s=new Array(r),o=r,a=r;for(let c=0;c<r;c++)ET(e,()=>{let l=Pe(t[c],e),u=!1;l.subscribe(X(i,d=>{s[c]=d,u||(u=!0,a--),a||i.next(n(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function ET(t,e,n){t?$t(n,t,e):e()}function IT(t,e,n,i,r,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=g=>l<i?p(g):c.push(g),p=g=>{s&&e.next(g),l++;let v=!1;Ee(n(g,u++)).subscribe(X(e,E=>{r?.(E),s?f(E):e.next(E)},()=>{v=!0},void 0,()=>{if(v)try{for(l--;c.length&&l<i;){let E=c.shift();o?$t(e,o,()=>p(E)):p(E)}h()}catch(E){e.error(E)}}))};return t.subscribe(X(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Ve(t,e,n=1/0){return U(e)?Ve((i,r)=>oe((s,o)=>e(i,s,r,o))(Ee(t(i,r))),n):(typeof e=="number"&&(n=e),Y((i,r)=>IT(i,r,t,n)))}function cr(t=1/0){return Ve(Nt,t)}function bT(){return cr(1)}function Wn(...t){return bT()(Pe(t,Gn(t)))}function lr(t){return new W(e=>{Ee(t()).subscribe(e)})}function wy(...t){let e=Zd(t),{args:n,keys:i}=lh(t),r=new W(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;Ee(n[u]).subscribe(X(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(i?uh(i,a):a),s.complete())}))}});return e?r.pipe(Bo(e)):r}var xV=["addListener","removeListener"],MV=["addEventListener","removeEventListener"],NV=["on","off"];function Sc(t,e,n,i){if(U(n)&&(i=n,n=void 0),i)return Sc(t,e,n).pipe(Bo(i));let[r,s]=kV(t)?MV.map(o=>a=>t[o](e,a,n)):PV(t)?xV.map(DT(t,e)):OV(t)?NV.map(DT(t,e)):[];if(!r&&Vo(t))return Ve(o=>Sc(o,e,n))(Ee(t));if(!r)throw new TypeError("Invalid event target");return new W(o=>{let a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function DT(t,e){return n=>i=>t[n](e,i)}function PV(t){return U(t.addListener)&&U(t.removeListener)}function OV(t){return U(t.on)&&U(t.off)}function kV(t){return U(t.addEventListener)&&U(t.removeEventListener)}function Uo(t=0,e,n=yy){let i=-1;return e!=null&&(Yd(e)?n=e:i=e),new W(r=>{let s=wT(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function FV(t=0,e=un){return t<0&&(t=0),Uo(t,t,e)}function Ac(...t){let e=Gn(t),n=cT(t,1/0),i=t;return i.length?i.length===1?Ee(i[0]):cr(n)(Pe(i,e)):Ut}var LV=new W(Ni);function ke(t,e){return Y((n,i)=>{let r=0;n.subscribe(X(i,s=>t.call(e,s,r++)&&i.next(s)))})}function CT(t){return Y((e,n)=>{let i=!1,r=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;let l=r;r=null,n.next(l)}o&&n.complete()},c=()=>{s=null,o&&n.complete()};e.subscribe(X(n,l=>{i=!0,r=l,s||Ee(t(l)).subscribe(s=X(n,a,c))},()=>{o=!0,(!i||!s||s.closed)&&n.complete()}))})}function dh(t,e=un){return CT(()=>Uo(t,e))}function ur(t){return Y((e,n)=>{let i=null,r=!1,s;i=e.subscribe(X(n,void 0,void 0,o=>{s=Ee(t(o,ur(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(n))})}function TT(t,e,n,i,r){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(X(o,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}function fs(t,e){return U(e)?Ve(t,e,1):Ve(t,1)}function ST(t){return new W(e=>t.subscribe(e))}var VV={connector:()=>new q};function hh(t,e=VV){let{connector:n}=e;return Y((i,r)=>{let s=n();Ee(t(ST(s))).subscribe(r),r.add(i.subscribe(s))})}function fh(t,e=un){return Y((n,i)=>{let r=null,s=null,o=null,a=()=>{if(r){r.unsubscribe(),r=null;let l=s;s=null,i.next(l)}};function c(){let l=o+t,u=e.now();if(u<l){r=this.schedule(void 0,l-u),i.add(r);return}a()}n.subscribe(X(i,l=>{s=l,o=e.now(),r||(r=e.schedule(c,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function dr(t){return Y((e,n)=>{let i=!1;e.subscribe(X(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function Be(t){return t<=0?()=>Ut:Y((e,n)=>{let i=0;e.subscribe(X(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function AT(){return Y((t,e)=>{t.subscribe(X(e,Ni))})}function Rc(t){return oe(()=>t)}function Ey(t,e){return e?n=>Wn(e.pipe(Be(1),AT()),n.pipe(Ey(t))):Ve((n,i)=>Ee(t(n,i)).pipe(Be(1),Rc(n)))}function jV(t,e=un){let n=Uo(t,e);return Ey(()=>n)}function xc(t,e=Nt){return t=t??BV,Y((n,i)=>{let r,s=!0;n.subscribe(X(i,o=>{let a=e(o);(s||!t(r,a))&&(s=!1,r=a,i.next(o))}))})}function BV(t,e){return t===e}function ph(t=UV){return Y((e,n)=>{let i=!1;e.subscribe(X(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function UV(){return new Oi}function Mc(t){return Y((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Kn(t,e){let n=arguments.length>=2;return i=>i.pipe(t?ke((r,s)=>t(r,s,i)):Nt,Be(1),n?dr(e):ph(()=>new Oi))}function $o(t){return t<=0?()=>Ut:Y((e,n)=>{let i=[];e.subscribe(X(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function Iy(t,e){let n=arguments.length>=2;return i=>i.pipe(t?ke((r,s)=>t(r,s,i)):Nt,$o(1),n?dr(e):ph(()=>new Oi))}function RT(t,e){let n=U(t)?t:()=>t;return U(e)?hh(e,{connector:n}):i=>new ir(i,n)}function $V(t){return t?e=>hh(t)(e):e=>RT(new q)(e)}function mh(t,e){return Y(TT(t,e,arguments.length>=2,!0))}function xT(t={}){let{connector:e=()=>new q,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return s=>{let o,a,c,l=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=c=void 0,u=d=!1},p=()=>{let g=o;f(),g?.unsubscribe()};return Y((g,v)=>{l++,!d&&!u&&h();let E=c=c??e();v.add(()=>{l--,l===0&&!d&&!u&&(a=by(p,r))}),E.subscribe(v),!o&&l>0&&(o=new Pi({next:A=>E.next(A),error:A=>{d=!0,h(),a=by(f,n,A),E.error(A)},complete:()=>{u=!0,h(),a=by(f,i),E.complete()}}),Ee(g).subscribe(o))})(s)}}function by(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new Pi({next:()=>{i.unsubscribe(),t()}});return Ee(e(...n)).subscribe(i)}function MT(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,xT({connector:()=>new us(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Nc(t){return ke((e,n)=>t<=n)}function xn(...t){let e=Gn(t);return Y((n,i)=>{(e?Wn(t,n,e):Wn(t,n)).subscribe(i)})}function Qt(t,e){return Y((n,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();n.subscribe(X(i,c=>{r?.unsubscribe();let l=0,u=s++;Ee(t(c,u)).subscribe(r=X(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Qn(t){return Y((e,n)=>{Ee(t).subscribe(X(n,()=>n.complete(),Ni)),!n.closed&&e.subscribe(n)})}function Qe(t,e,n){let i=U(t)||e||n?{next:t,error:e,complete:n}:t;return i?Y((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(X(s,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),s.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),s.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),s.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):Nt}var yS="https://g.co/ng/security#xss",S=class extends Error{constructor(e,n){super($_(e,n)),this.code=e}};function $_(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function xe(t){for(let e in t)if(t[e]===xe)return e;throw Error("Could not find renamed property on target object.")}function HV(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ot(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ot).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Uy(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var zV=xe({__forward_ref__:xe});function hn(t){return t.__forward_ref__=hn,t.toString=function(){return Ot(this())},t}function Pt(t){return _S(t)?t():t}function _S(t){return typeof t=="function"&&t.hasOwnProperty(zV)&&t.__forward_ref__===hn}function vS(t){return t&&!!t.\u0275providers}var qV=xe({\u0275cmp:xe}),GV=xe({\u0275dir:xe}),WV=xe({\u0275pipe:xe}),KV=xe({\u0275mod:xe}),Ah=xe({\u0275fac:xe}),Pc=xe({__NG_ELEMENT_ID__:xe}),NT=xe({__NG_ENV_ID__:xe});function Gc(t){return typeof t=="string"?t:t==null?"":String(t)}function QV(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Gc(t)}function YV(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new S(-200,`Circular dependency in DI detected for ${t}${n}`)}function H_(t,e){throw new S(-201,!1)}function ZV(t,e){t==null&&XV(e,t,null,"!=")}function XV(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(i==null?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}function D(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ne(t){return{providers:t.providers||[],imports:t.imports||[]}}function Qh(t){return PT(t,ES)||PT(t,IS)}function wS(t){return Qh(t)!==null}function PT(t,e){return t.hasOwnProperty(e)?t[e]:null}function JV(t){let e=t&&(t[ES]||t[IS]);return e||null}function OT(t){return t&&(t.hasOwnProperty(kT)||t.hasOwnProperty(ej))?t[kT]:null}var ES=xe({\u0275prov:xe}),kT=xe({\u0275inj:xe}),IS=xe({ngInjectableDef:xe}),ej=xe({ngInjectorDef:xe}),he=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(he||{}),$y;function bS(){return $y}function Ht(t){let e=$y;return $y=t,e}function DS(t,e,n){let i=Qh(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&he.Optional)return null;if(e!==void 0)return e;H_(t,"Injector")}var et=globalThis;var x=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=D({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var tj={},Oc=tj,Hy="__NG_DI_FLAG__",Rh="ngTempTokenPath",nj="ngTokenPath",ij=/\n/gm,rj="\u0275",FT="__source",Wo;function sj(){return Wo}function hr(t){let e=Wo;return Wo=t,e}function oj(t,e=he.Default){if(Wo===void 0)throw new S(-203,!1);return Wo===null?DS(t,void 0,e):Wo.get(t,e&he.Optional?null:void 0,e)}function y(t,e=he.Default){return(bS()||oj)(Pt(t),e)}function C(t,e=he.Default){return y(t,Yh(e))}function Yh(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function zy(t){let e=[];for(let n=0;n<t.length;n++){let i=Pt(t[n]);if(Array.isArray(i)){if(i.length===0)throw new S(900,!1);let r,s=he.Default;for(let o=0;o<i.length;o++){let a=i[o],c=aj(a);typeof c=="number"?c===-1?r=a.token:s|=c:r=a}e.push(y(r,s))}else e.push(y(i))}return e}function CS(t,e){return t[Hy]=e,t.prototype[Hy]=e,t}function aj(t){return t[Hy]}function cj(t,e,n,i){let r=t[Rh];throw e[FT]&&r.unshift(e[FT]),t.message=lj(`
`+t.message,r,n,i),t[nj]=r,t[Rh]=null,t}function lj(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==rj?t.slice(2):t;let r=Ot(e);if(Array.isArray(e))r=e.map(Ot).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ot(a)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(ij,`
  `)}`}function Wc(t){return{toString:t}.toString()}var TS=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(TS||{}),Jn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Jn||{}),Qo={},zt=[],fe=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(fe||{});function SS(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}n=r+1}}function qy(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let s=n[i++],o=n[i++],a=n[i++];t.setAttribute(e,o,a,s)}else{let s=r,o=n[++i];uj(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),i++}}return i}function AS(t){return t===3||t===4||t===6}function uj(t){return t.charCodeAt(0)===64}function kc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?LT(t,n,r,null,e[++i]):LT(t,n,r,null,null))}}return t}function LT(t,e,n,i,r){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(t[s+1]=r);return}else if(i===t[s+1]){t[s+2]=r;return}}s++,i!==null&&s++,r!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),i!==null&&t.splice(s++,0,i),r!==null&&t.splice(s++,0,r)}var RS="ng-template";function dj(t,e,n){let i=0,r=!0;for(;i<t.length;){let s=t[i++];if(typeof s=="string"&&r){let o=t[i++];if(n&&s==="class"&&SS(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;i<t.length&&typeof(s=t[i++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(r=!1)}return!1}function xS(t){return t.type===4&&t.value!==RS}function hj(t,e,n){let i=t.type===4&&!n?RS:t.value;return e===i}function fj(t,e,n){let i=4,r=t.attrs||[],s=gj(r),o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Mn(i)&&!Mn(c))return!1;if(o&&Mn(c))continue;o=!1,i=c|i&1;continue}if(!o)if(i&4){if(i=2|i&1,c!==""&&!hj(t,c,n)||c===""&&e.length===1){if(Mn(i))return!1;o=!0}}else{let l=i&8?c:e[++a];if(i&8&&t.attrs!==null){if(!dj(t.attrs,l,n)){if(Mn(i))return!1;o=!0}continue}let u=i&8?"class":c,d=pj(u,r,xS(t),n);if(d===-1){if(Mn(i))return!1;o=!0;continue}if(l!==""){let h;d>s?h="":h=r[d+1].toLowerCase();let f=i&8?h:null;if(f&&SS(f,l,0)!==-1||i&2&&l!==h){if(Mn(i))return!1;o=!0}}}}return Mn(i)||o}function Mn(t){return(t&1)===0}function pj(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let s=!1;for(;r<e.length;){let o=e[r];if(o===t)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return yj(e,t)}function MS(t,e,n=!1){for(let i=0;i<e.length;i++)if(fj(t,e[i],n))return!0;return!1}function mj(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function gj(t){for(let e=0;e<t.length;e++){let n=t[e];if(AS(n))return e}return t.length}function yj(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function _j(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function VT(t,e){return t?":not("+e.trim()+")":e}function vj(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(i&2){let a=t[++n];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!Mn(o)&&(e+=VT(s,r),r=""),i=o,s=s||!Mn(i);n++}return r!==""&&(e+=VT(s,r)),e}function wj(t){return t.map(vj).join(",")}function Ej(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let s=t[i];if(typeof s=="string")r===2?s!==""&&e.push(s,t[++i]):r===8&&n.push(s);else{if(!Mn(r))break;r=s}i++}return{attrs:e,classes:n}}function si(t){return Wc(()=>{let e=LS(t),n=ye(I({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===TS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Jn.Emulated,styles:t.styles||zt,_:null,schemas:t.schemas||null,tView:null,id:""});VS(n);let i=t.dependencies;return n.directiveDefs=BT(i,!1),n.pipeDefs=BT(i,!0),n.id=Dj(n),n})}function Ij(t){return pr(t)||PS(t)}function bj(t){return t!==null}function ie(t){return Wc(()=>({type:t.type,bootstrap:t.bootstrap||zt,declarations:t.declarations||zt,imports:t.imports||zt,exports:t.exports||zt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function jT(t,e){if(t==null)return Qo;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],s,o,a=fe.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(n[s]=a!==fe.None?[i,a]:i,e[s]=o):n[s]=i}return n}function me(t){return Wc(()=>{let e=LS(t);return VS(e),e})}function NS(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function pr(t){return t[qV]||null}function PS(t){return t[GV]||null}function OS(t){return t[WV]||null}function kS(t){let e=pr(t)||PS(t)||OS(t);return e!==null?e.standalone:!1}function FS(t,e){let n=t[KV]||null;if(!n&&e===!0)throw new Error(`Type ${Ot(t)} does not have '\u0275mod' property.`);return n}function LS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Qo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||zt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jT(t.inputs,e),outputs:jT(t.outputs),debugInfo:null}}function VS(t){t.features?.forEach(e=>e(t))}function BT(t,e){if(!t)return null;let n=e?OS:Ij;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(bj)}function Dj(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var oi=0,te=1,J=2,pt=3,Pn=4,Xt=5,Yo=6,Fc=7,It=8,Zo=9,ei=10,$e=11,Lc=12,UT=13,ra=14,dn=15,Kc=16,Ho=17,Xn=18,Zh=19,jS=20,fr=21,Dy=22,ys=23,Dt=25,z_=1;var _s=7,xh=8,Xo=9,bt=10,q_=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(q_||{});function ms(t){return Array.isArray(t)&&typeof t[z_]=="object"}function Fi(t){return Array.isArray(t)&&t[z_]===!0}function G_(t){return(t.flags&4)!==0}function Xh(t){return t.componentOffset>-1}function Jh(t){return(t.flags&1)===1}function ki(t){return!!t.template}function Cj(t){return(t[J]&512)!==0}function vs(t,e){let n=t.hasOwnProperty(Ah);return n?t[Ah]:null}var Gy=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function BS(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function kt(){return US}function US(t){return t.type.prototype.ngOnChanges&&(t.setInput=Sj),Tj}kt.ngInherit=!0;function Tj(){let t=HS(this),e=t?.current;if(e){let n=t.previous;if(n===Qo)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function Sj(t,e,n,i,r){let s=this.declaredInputs[i],o=HS(t)||Aj(t,{previous:Qo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Gy(l&&l.currentValue,n,c===Qo),BS(t,e,r,n)}var $S="__ngSimpleChanges__";function HS(t){return t[$S]||null}function Aj(t,e){return t[$S]=e}var $T=null;var Yn=function(t,e,n){$T?.(t,e,n)},zS="svg",Rj="math",xj=!1;function Mj(){return xj}function ti(t){for(;Array.isArray(t);)t=t[oi];return t}function Nj(t){for(;Array.isArray(t);){if(typeof t[z_]=="object")return t;t=t[oi]}return null}function qS(t,e){return ti(e[t])}function fn(t,e){return ti(e[t.index])}function W_(t,e){return t.data[e]}function GS(t,e){return t[e]}function yr(t,e){let n=e[t];return ms(n)?n:n[oi]}function Pj(t){return(t[J]&4)===4}function K_(t){return(t[J]&128)===128}function Oj(t){return Fi(t[pt])}function Jo(t,e){return e==null?null:t[e]}function WS(t){t[Ho]=0}function kj(t){t[J]&1024||(t[J]|=1024,K_(t)&&Vc(t))}function Fj(t,e){for(;t>0;)e=e[ra],t--;return e}function KS(t){return t[J]&9216||t[ys]?.dirty}function Wy(t){KS(t)?Vc(t):t[J]&64&&(Mj()?(t[J]|=1024,Vc(t)):t[ei].changeDetectionScheduler?.notify())}function Vc(t){t[ei].changeDetectionScheduler?.notify();let e=jc(t);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!K_(e)));)e=jc(e)}function QS(t,e){if((t[J]&256)===256)throw new S(911,!1);t[fr]===null&&(t[fr]=[]),t[fr].push(e)}function Lj(t,e){if(t[fr]===null)return;let n=t[fr].indexOf(e);n!==-1&&t[fr].splice(n,1)}function jc(t){let e=t[pt];return Fi(e)?e[pt]:e}var ce={lFrame:rA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Vj(){return ce.lFrame.elementDepthCount}function jj(){ce.lFrame.elementDepthCount++}function Bj(){ce.lFrame.elementDepthCount--}function YS(){return ce.bindingsEnabled}function ZS(){return ce.skipHydrationRootTNode!==null}function Uj(t){return ce.skipHydrationRootTNode===t}function $j(){ce.skipHydrationRootTNode=null}function ue(){return ce.lFrame.lView}function He(){return ce.lFrame.tView}function Q_(t){return ce.lFrame.contextLView=t,t[It]}function Y_(t){return ce.lFrame.contextLView=null,t}function Ct(){let t=XS();for(;t!==null&&t.type===64;)t=t.parent;return t}function XS(){return ce.lFrame.currentTNode}function Hj(){let t=ce.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ts(t,e){let n=ce.lFrame;n.currentTNode=t,n.isParent=e}function Z_(){return ce.lFrame.isParent}function X_(){ce.lFrame.isParent=!1}function zj(){return ce.lFrame.contextLView}function JS(){let t=ce.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function qj(t){return ce.lFrame.bindingIndex=t}function Ss(){return ce.lFrame.bindingIndex++}function eA(t){let e=ce.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Gj(){return ce.lFrame.inI18n}function Wj(t,e){let n=ce.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ky(e)}function Kj(){return ce.lFrame.currentDirectiveIndex}function Ky(t){ce.lFrame.currentDirectiveIndex=t}function J_(t){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function tA(){return ce.lFrame.currentQueryIndex}function ev(t){ce.lFrame.currentQueryIndex=t}function Qj(t){let e=t[te];return e.type===2?e.declTNode:e.type===1?t[Xt]:null}function nA(t,e,n){if(n&he.SkipSelf){let r=e,s=t;for(;r=r.parent,r===null&&!(n&he.Host);)if(r=Qj(s),r===null||(s=s[ra],r.type&10))break;if(r===null)return!1;e=r,t=s}let i=ce.lFrame=iA();return i.currentTNode=e,i.lView=t,!0}function tv(t){let e=iA(),n=t[te];ce.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function iA(){let t=ce.lFrame,e=t===null?null:t.child;return e===null?rA(t):e}function rA(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function sA(){let t=ce.lFrame;return ce.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var oA=sA;function nv(){let t=sA();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Yj(t){return(ce.lFrame.contextLView=Fj(t,ce.lFrame.contextLView))[It]}function _r(){return ce.lFrame.selectedIndex}function ws(t){ce.lFrame.selectedIndex=t}function ef(){let t=ce.lFrame;return W_(t.tView,t.selectedIndex)}function aA(){ce.lFrame.currentNamespace=zS}function cA(){Zj()}function Zj(){ce.lFrame.currentNamespace=null}function Xj(){return ce.lFrame.currentNamespace}var lA=!0;function tf(){return lA}function nf(t){lA=t}function Jj(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=US(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}r&&(n.preOrderHooks??=[]).push(0-t,r),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function rf(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Ih(t,e,n){uA(t,e,3,n)}function bh(t,e,n,i){(t[J]&3)===n&&uA(t,e,n,i)}function Cy(t,e){let n=t[J];(n&3)===e&&(n&=16383,n+=1,t[J]=n)}function uA(t,e,n,i){let r=i!==void 0?t[Ho]&65535:0,s=i??-1,o=e.length-1,a=0;for(let c=r;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(t[Ho]+=65536),(a<s||s==-1)&&(eB(t,n,e,c),t[Ho]=(t[Ho]&4294901760)+c+2),c++}function HT(t,e){Yn(4,t,e);let n=ft(null);try{e.call(t)}finally{ft(n),Yn(5,t,e)}}function eB(t,e,n,i){let r=n[i]<0,s=n[i+1],o=r?-n[i]:n[i],a=t[o];r?t[J]>>14<t[Ho]>>16&&(t[J]&3)===e&&(t[J]+=16384,HT(a,s)):HT(a,s)}var Ko=-1,Es=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function tB(t){return t instanceof Es}function nB(t){return(t.flags&8)!==0}function iB(t){return(t.flags&16)!==0}function dA(t){return t!==Ko}function Mh(t){return t&32767}function rB(t){return t>>16}function Nh(t,e){let n=rB(t),i=e;for(;n>0;)i=i[ra],n--;return i}var Qy=!0;function Ph(t){let e=Qy;return Qy=t,e}var sB=256,hA=sB-1,fA=5,oB=0,Zn={};function aB(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Pc)&&(i=n[Pc]),i==null&&(i=n[Pc]=oB++);let r=i&hA,s=1<<r;e.data[t+(r>>fA)]|=s}function Oh(t,e){let n=pA(t,e);if(n!==-1)return n;let i=e[te];i.firstCreatePass&&(t.injectorIndex=e.length,Ty(i.data,t),Ty(e,null),Ty(i.blueprint,null));let r=iv(t,e),s=t.injectorIndex;if(dA(r)){let o=Mh(r),a=Nh(r,e),c=a[te].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function Ty(t,e){t.push(0,0,0,0,0,0,0,0,e)}function pA(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function iv(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=vA(r),i===null)return Ko;if(n++,r=r[ra],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return Ko}function Yy(t,e,n){aB(t,e,n)}function cB(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let i=n.length,r=0;for(;r<i;){let s=n[r];if(AS(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<i&&typeof n[r]=="string";)r++;else{if(s===e)return n[r+1];r=r+2}}}return null}function mA(t,e,n){if(n&he.Optional||t!==void 0)return t;H_(e,"NodeInjector")}function gA(t,e,n,i){if(n&he.Optional&&i===void 0&&(i=null),!(n&(he.Self|he.Host))){let r=t[Zo],s=Ht(void 0);try{return r?r.get(e,i,n&he.Optional):DS(e,i,n&he.Optional)}finally{Ht(s)}}return mA(i,e,n)}function yA(t,e,n,i=he.Default,r){if(t!==null){if(e[J]&2048&&!(i&he.Self)){let o=hB(t,e,n,i,Zn);if(o!==Zn)return o}let s=_A(t,e,n,i,Zn);if(s!==Zn)return s}return gA(e,n,i,r)}function _A(t,e,n,i,r){let s=uB(n);if(typeof s=="function"){if(!nA(e,t,i))return i&he.Host?mA(r,n,i):gA(e,n,i,r);try{let o;if(o=s(i),o==null&&!(i&he.Optional))H_(n);else return o}finally{oA()}}else if(typeof s=="number"){let o=null,a=pA(t,e),c=Ko,l=i&he.Host?e[dn][Xt]:null;for((a===-1||i&he.SkipSelf)&&(c=a===-1?iv(t,e):e[a+8],c===Ko||!qT(i,!1)?a=-1:(o=e[te],a=Mh(c),e=Nh(c,e)));a!==-1;){let u=e[te];if(zT(s,a,u.data)){let d=lB(a,e,n,o,i,l);if(d!==Zn)return d}c=e[a+8],c!==Ko&&qT(i,e[te].data[a+8]===l)&&zT(s,a,e)?(o=u,a=Mh(c),e=Nh(c,e)):a=-1}}return r}function lB(t,e,n,i,r,s){let o=e[te],a=o.data[t+8],c=i==null?Xh(a)&&Qy:i!=o&&(a.type&3)!==0,l=r&he.Host&&s===a,u=Dh(a,o,n,c,l);return u!==null?Is(e,o,u,a):Zn}function Dh(t,e,n,i,r){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:l;for(let f=d;f<h;f++){let p=o[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(r){let f=o[c];if(f&&ki(f)&&f.type===n)return c}return null}function Is(t,e,n,i){let r=t[n],s=e.data;if(tB(r)){let o=r;o.resolving&&YV(QV(s[n]));let a=Ph(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Ht(o.injectImpl):null,u=nA(t,i,he.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&Jj(n,s[n],e)}finally{l!==null&&Ht(l),Ph(a),o.resolving=!1,oA()}}return r}function uB(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Pc)?t[Pc]:void 0;return typeof e=="number"?e>=0?e&hA:dB:e}function zT(t,e,n){let i=1<<t;return!!(n[e+(t>>fA)]&i)}function qT(t,e){return!(t&he.Self)&&!(t&he.Host&&e)}var gs=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return yA(this._tNode,this._lView,e,Yh(i),n)}};function dB(){return new gs(Ct(),ue())}function ai(t){return Wc(()=>{let e=t.prototype.constructor,n=e[Ah]||Zy(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let s=r[Ah]||Zy(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Zy(t){return _S(t)?()=>{let e=Zy(Pt(t));return e&&e()}:vs(t)}function hB(t,e,n,i,r){let s=t,o=e;for(;s!==null&&o!==null&&o[J]&2048&&!(o[J]&512);){let a=_A(s,o,n,i|he.Self,Zn);if(a!==Zn)return a;let c=s.parent;if(!c){let l=o[jS];if(l){let u=l.get(n,Zn,i);if(u!==Zn)return u}c=vA(o),o=o[ra]}s=c}return r}function vA(t){let e=t[te],n=e.type;return n===2?e.declTNode:n===1?t[Xt]:null}function rv(t){return cB(Ct(),t)}var gh="__parameters__";function fB(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function wA(t,e,n){return Wc(()=>{let i=fB(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(gh)?c[gh]:Object.defineProperty(c,gh,{value:[]})[gh];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function pB(t){return typeof t=="function"}function mB(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}function gB(t){return t.flat(Number.POSITIVE_INFINITY)}function sv(t,e){t.forEach(n=>Array.isArray(n)?sv(n,e):e(n))}function EA(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function kh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function yB(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function _B(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let s=r-2;t[r]=t[s],r--}t[e]=n,t[e+1]=i}}function ov(t,e,n){let i=Qc(t,e);return i>=0?t[i|1]=n:(i=~i,_B(t,i,e,n)),i}function Sy(t,e){let n=Qc(t,e);if(n>=0)return t[n|1]}function Qc(t,e){return vB(t,e,1)}function vB(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let s=i+(r-i>>1),o=t[s<<n];if(e===o)return s<<n;o>e?r=s:i=s+1}return~(r<<n)}var mt=CS(wA("Optional"),8);var av=CS(wA("SkipSelf"),4);var ea=new x("ENVIRONMENT_INITIALIZER"),IA=new x("INJECTOR",-1),bA=new x("INJECTOR_DEF_TYPES"),Fh=class{get(e,n=Oc){if(n===Oc){let i=new Error(`NullInjectorError: No provider for ${Ot(e)}!`);throw i.name="NullInjectorError",i}return n}};function sf(t){return{\u0275providers:t}}function wB(...t){return{\u0275providers:DA(!0,t),\u0275fromNgModule:!0}}function DA(t,...e){let n=[],i=new Set,r,s=o=>{n.push(o)};return sv(e,o=>{let a=o;Xy(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&CA(r,s),n}function CA(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];cv(r,s=>{e(s,i)})}}function Xy(t,e,n,i){if(t=Pt(t),!t)return!1;let r=null,s=OT(t),o=!s&&pr(t);if(!s&&!o){let c=t.ngModule;if(s=OT(c),s)r=c;else return!1}else{if(o&&!o.standalone)return!1;r=t}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Xy(l,e,n,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let l;try{sv(s.imports,u=>{Xy(u,e,n,i)&&(l||=[],l.push(u))})}finally{}l!==void 0&&CA(l,e)}if(!a){let l=vs(r)||(()=>new r);e({provide:r,useFactory:l,deps:zt},r),e({provide:bA,useValue:r,multi:!0},r),e({provide:ea,useValue:()=>y(r),multi:!0},r)}let c=s.providers;if(c!=null&&!a){let l=t;cv(c,u=>{e(u,l)})}}else return!1;return r!==t&&t.providers!==void 0}function cv(t,e){for(let n of t)vS(n)&&(n=n.\u0275providers),Array.isArray(n)?cv(n,e):e(n)}var EB=xe({provide:String,useValue:xe});function TA(t){return t!==null&&typeof t=="object"&&EB in t}function IB(t){return!!(t&&t.useExisting)}function bB(t){return!!(t&&t.useFactory)}function ta(t){return typeof t=="function"}function DB(t){return!!t.useClass}var of=new x("Set Injector scope."),Ch={},CB={},Ay;function lv(){return Ay===void 0&&(Ay=new Fh),Ay}var Yt=class{},Bc=class extends Yt{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,e_(e,o=>this.processProvider(o)),this.records.set(IA,zo(void 0,this)),r.has("environment")&&this.records.set(Yt,zo(void 0,this));let s=this.records.get(of);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(bA,zt,he.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=hr(this),i=Ht(void 0),r;try{return e()}finally{hr(n),Ht(i)}}get(e,n=Oc,i=he.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(NT))return e[NT](this);i=Yh(i);let r,s=hr(this),o=Ht(void 0);try{if(!(i&he.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=xB(e)&&Qh(e);l&&this.injectableDefInScope(l)?c=zo(Jy(e),Ch):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=i&he.Self?lv():this.parent;return n=i&he.Optional&&n===Oc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Rh]=a[Rh]||[]).unshift(Ot(e)),s)throw a;return cj(a,e,"R3InjectorError",this.source)}else throw a}finally{Ht(o),hr(s)}}resolveInjectorInitializers(){let e=hr(this),n=Ht(void 0),i;try{let r=this.get(ea,zt,he.Self);for(let s of r)s()}finally{hr(e),Ht(n)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(Ot(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(e){e=Pt(e);let n=ta(e)?e:Pt(e&&e.provide),i=SB(e);if(!ta(e)&&e.multi===!0){let r=this.records.get(n);r||(r=zo(void 0,Ch,!0),r.factory=()=>zy(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){return n.value===Ch&&(n.value=CB,n.value=n.factory()),typeof n.value=="object"&&n.value&&RB(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Pt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Jy(t){let e=Qh(t),n=e!==null?e.factory:vs(t);if(n!==null)return n;if(t instanceof x)throw new S(204,!1);if(t instanceof Function)return TB(t);throw new S(204,!1)}function TB(t){if(t.length>0)throw new S(204,!1);let n=JV(t);return n!==null?()=>n.factory(t):()=>new t}function SB(t){if(TA(t))return zo(void 0,t.useValue);{let e=SA(t);return zo(e,Ch)}}function SA(t,e,n){let i;if(ta(t)){let r=Pt(t);return vs(r)||Jy(r)}else if(TA(t))i=()=>Pt(t.useValue);else if(bB(t))i=()=>t.useFactory(...zy(t.deps||[]));else if(IB(t))i=()=>y(Pt(t.useExisting));else{let r=Pt(t&&(t.useClass||t.provide));if(AB(t))i=()=>new r(...zy(t.deps));else return vs(r)||Jy(r)}return i}function zo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function AB(t){return!!t.deps}function RB(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function xB(t){return typeof t=="function"||typeof t=="object"&&t instanceof x}function e_(t,e){for(let n of t)Array.isArray(n)?e_(n,e):n&&vS(n)?e_(n.\u0275providers,e):e(n)}function vr(t,e){t instanceof Bc&&t.assertNotDestroyed();let n,i=hr(t),r=Ht(void 0);try{return e()}finally{hr(i),Ht(r)}}function MB(t){if(!bS()&&!sj())throw new S(-203,!1)}function GT(t,e=null,n=null,i){let r=AA(t,e,n,i);return r.resolveInjectorInitializers(),r}function AA(t,e=null,n=null,i,r=new Set){let s=[n||zt,wB(t)];return i=i||(typeof t=="object"?void 0:Ot(t)),new Bc(s,e||lv(),i||null,r)}var Me=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return GT({name:""},r,i,"");{let s=i.name??"";return GT({name:s},i.parent,i.providers,s)}}};e.THROW_IF_NOT_FOUND=Oc,e.NULL=new Fh,e.\u0275prov=D({token:e,providedIn:"any",factory:()=>y(IA)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var t_;function RA(t){t_=t}function xA(){if(t_!==void 0)return t_;if(typeof document<"u")return document;throw new S(210,!1)}var Yc=new x("AppId",{providedIn:"root",factory:()=>NB}),NB="ng",uv=new x("Platform Initializer"),pn=new x("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var qt=new x("AnimationModuleType"),Zc=new x("CSP nonce",{providedIn:"root",factory:()=>xA().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function MA(t){return t instanceof Function?t():t}function PB(t){return(t??C(Me)).get(pn)==="browser"}function NA(t){return(t.flags&128)===128}var ni=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ni||{}),OB=/^>|^->|<!--|-->|--!>|<!-$/g,kB=/(<|>)/g,FB="\u200B$1\u200B";function LB(t){return t.replace(OB,e=>e.replace(kB,FB))}var PA=new Map,VB=0;function jB(){return VB++}function BB(t){PA.set(t[Zh],t)}function UB(t){PA.delete(t[Zh])}var WT="__ngContext__";function mr(t,e){ms(e)?(t[WT]=e[Zh],BB(e)):t[WT]=e}var $B;function dv(t,e){return $B(t,e)}function qo(t,e,n,i,r){if(i!=null){let s,o=!1;Fi(i)?s=i:ms(i)&&(o=!0,i=i[oi]);let a=ti(i);t===0&&n!==null?r==null?VA(e,n,a):Lh(e,n,a,r||null,!0):t===1&&n!==null?Lh(e,n,a,r||null,!0):t===2?rU(e,a,o):t===3&&e.destroyNode(a),s!=null&&oU(e,t,s,n,r)}}function HB(t,e){return t.createText(e)}function zB(t,e,n){t.setValue(e,n)}function qB(t,e){return t.createComment(LB(e))}function OA(t,e,n){return t.createElement(e,n)}function GB(t,e){kA(t,e),e[oi]=null,e[Xt]=null}function WB(t,e,n,i,r,s){i[oi]=r,i[Xt]=e,lf(t,i,n,1,r,s)}function kA(t,e){e[ei].changeDetectionScheduler?.notify(),lf(t,e,e[$e],2,null,null)}function KB(t){let e=t[Lc];if(!e)return Ry(t[te],t);for(;e;){let n=null;if(ms(e))n=e[Lc];else{let i=e[bt];i&&(n=i)}if(!n){for(;e&&!e[Pn]&&e!==t;)ms(e)&&Ry(e[te],e),e=e[pt];e===null&&(e=t),ms(e)&&Ry(e[te],e),n=e&&e[Pn]}e=n}}function QB(t,e,n,i){let r=bt+i,s=n.length;i>0&&(n[r-1][Pn]=e),i<s-bt?(e[Pn]=n[r],EA(n,bt+i,e)):(n.push(e),e[Pn]=null),e[pt]=n;let o=e[Kc];o!==null&&n!==o&&YB(o,e);let a=e[Xn];a!==null&&a.insertView(t),Wy(e),e[J]|=128}function YB(t,e){let n=t[Xo],r=e[pt][pt][dn];e[dn]!==r&&(t[J]|=q_.HasTransplantedViews),n===null?t[Xo]=[e]:n.push(e)}function FA(t,e){let n=t[Xo],i=n.indexOf(e);n.splice(i,1)}function Uc(t,e){if(t.length<=bt)return;let n=bt+e,i=t[n];if(i){let r=i[Kc];r!==null&&r!==t&&FA(r,i),e>0&&(t[n-1][Pn]=i[Pn]);let s=kh(t,bt+e);GB(i[te],i);let o=s[Xn];o!==null&&o.detachView(s[te]),i[pt]=null,i[Pn]=null,i[J]&=-129}return i}function af(t,e){if(!(e[J]&256)){let n=e[$e];n.destroyNode&&lf(t,e,n,3,null,null),KB(e)}}function Ry(t,e){if(!(e[J]&256)){e[J]&=-129,e[J]|=256,e[ys]&&qC(e[ys]),XB(t,e),ZB(t,e),e[te].type===1&&e[$e].destroy();let n=e[Kc];if(n!==null&&Fi(e[pt])){n!==e[pt]&&FA(n,e);let i=e[Xn];i!==null&&i.detachView(t)}UB(e)}}function ZB(t,e){let n=t.cleanup,i=e[Fc];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else{let o=i[n[s+1]];n[s].call(o)}i!==null&&(e[Fc]=null);let r=e[fr];if(r!==null){e[fr]=null;for(let s=0;s<r.length;s++){let o=r[s];o()}}}function XB(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof Es)){let s=n[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],c=s[o+1];Yn(4,a,c);try{c.call(a)}finally{Yn(5,a,c)}}else{Yn(4,r,s);try{s.call(r)}finally{Yn(5,r,s)}}}}}function LA(t,e,n){return JB(t,e.parent,n)}function JB(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[oi];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:s}=t.data[i.directiveStart+r];if(s===Jn.None||s===Jn.Emulated)return null}return fn(i,n)}}function Lh(t,e,n,i,r){t.insertBefore(e,n,i,r)}function VA(t,e,n){t.appendChild(e,n)}function KT(t,e,n,i,r){i!==null?Lh(t,e,n,i,r):VA(t,e,n)}function eU(t,e,n,i){t.removeChild(e,n,i)}function hv(t,e){return t.parentNode(e)}function tU(t,e){return t.nextSibling(e)}function jA(t,e,n){return iU(t,e,n)}function nU(t,e,n){return t.type&40?fn(t,n):null}var iU=nU,QT;function cf(t,e,n,i){let r=LA(t,i,e),s=e[$e],o=i.parent||e[Xt],a=jA(o,i,e);if(r!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)KT(s,r,n[c],a,!1);else KT(s,r,n,a,!1);QT!==void 0&&QT(s,i,e,n,r)}function Th(t,e){if(e!==null){let n=e.type;if(n&3)return fn(e,t);if(n&4)return n_(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return Th(t,i);{let r=t[e.index];return Fi(r)?n_(-1,r):ti(r)}}else{if(n&32)return dv(e,t)()||ti(t[e.index]);{let i=BA(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=jc(t[dn]);return Th(r,i)}else return Th(t,e.next)}}}return null}function BA(t,e){if(e!==null){let i=t[dn][Xt],r=e.projection;return i.projection[r]}return null}function n_(t,e){let n=bt+t+1;if(n<e.length){let i=e[n],r=i[te].firstChild;if(r!==null)return Th(i,r)}return e[_s]}function rU(t,e,n){let i=hv(t,e);i&&eU(t,i,e,n)}function fv(t,e,n,i,r,s,o){for(;n!=null;){let a=i[n.index],c=n.type;if(o&&e===0&&(a&&mr(ti(a),i),n.flags|=2),(n.flags&32)!==32)if(c&8)fv(t,e,n.child,i,r,s,!1),qo(e,t,r,a,s);else if(c&32){let l=dv(n,i),u;for(;u=l();)qo(e,t,r,u,s);qo(e,t,r,a,s)}else c&16?UA(t,e,i,n,r,s):qo(e,t,r,a,s);n=o?n.projectionNext:n.next}}function lf(t,e,n,i,r,s){fv(n,i,t.firstChild,e,r,s,!1)}function sU(t,e,n){let i=e[$e],r=LA(t,n,e),s=n.parent||e[Xt],o=jA(s,n,e);UA(i,0,e,n,r,o)}function UA(t,e,n,i,r,s){let o=n[dn],c=o[Xt].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];qo(e,t,r,u,s)}else{let l=c,u=o[pt];NA(i)&&(l.flags|=128),fv(t,e,l,u,r,s,!0)}}function oU(t,e,n,i,r){let s=n[_s],o=ti(n);s!==o&&qo(e,t,i,s,r);for(let a=bt;a<n.length;a++){let c=n[a];lf(c[te],c,t,e,i,s)}}function aU(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let s=i.indexOf("-")===-1?void 0:ni.DashCase;r==null?t.removeStyle(n,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=ni.Important),t.setStyle(n,i,r,s))}}function cU(t,e,n){t.setAttribute(e,"style",n)}function $A(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function HA(t,e,n){let{mergedAttrs:i,classes:r,styles:s}=n;i!==null&&qy(t,e,i),r!==null&&$A(t,e,r),s!==null&&cU(t,e,s)}var yh;function lU(){if(yh===void 0&&(yh=null,et.trustedTypes))try{yh=et.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return yh}function uf(t){return lU()?.createHTML(t)||t}var _h;function zA(){if(_h===void 0&&(_h=null,et.trustedTypes))try{_h=et.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return _h}function YT(t){return zA()?.createHTML(t)||t}function ZT(t){return zA()?.createScriptURL(t)||t}var Vh=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yS})`}};function As(t){return t instanceof Vh?t.changingThisBreaksApplicationSecurity:t}function df(t,e){let n=uU(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${yS})`)}return n===e}function uU(t){return t instanceof Vh&&t.getTypeName()||null}function dU(t){let e=new r_(t);return hU()?new i_(e):e}var i_=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(uf(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},r_=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=uf(e),n}};function hU(){try{return!!new window.DOMParser().parseFromString(uf(""),"text/html")}catch{return!1}}var fU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function pv(t){return t=String(t),t.match(fU)?t:"unsafe:"+t}function Li(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function Xc(...t){let e={};for(let n of t)for(let i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}var qA=Li("area,br,col,hr,img,wbr"),GA=Li("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),WA=Li("rp,rt"),pU=Xc(WA,GA),mU=Xc(GA,Li("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),gU=Xc(WA,Li("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),XT=Xc(qA,mU,gU,pU),KA=Li("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yU=Li("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_U=Li("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),vU=Xc(KA,yU,_U),wU=Li("script,style,template"),s_=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,i=!0;for(;n;){if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild){n=n.firstChild;continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}}return this.buf.join("")}startElement(e){let n=e.nodeName.toLowerCase();if(!XT.hasOwnProperty(n))return this.sanitizedSomething=!0,!wU.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let i=e.attributes;for(let r=0;r<i.length;r++){let s=i.item(r),o=s.name,a=o.toLowerCase();if(!vU.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;KA[a]&&(c=pv(c)),this.buf.push(" ",o,'="',JT(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=e.nodeName.toLowerCase();XT.hasOwnProperty(n)&&!qA.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(JT(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}},EU=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,IU=/([^\#-~ |!])/g;function JT(t){return t.replace(/&/g,"&amp;").replace(EU,function(e){let n=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((n-55296)*1024+(i-56320)+65536)+";"}).replace(IU,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var vh;function QA(t,e){let n=null;try{vh=vh||dU(t);let i=e?String(e):"";n=vh.getInertBodyElement(i);let r=5,s=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=vh.getInertBodyElement(i)}while(i!==s);let a=new s_().sanitizeChildren(eS(n)||n);return uf(a)}finally{if(n){let i=eS(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function eS(t){return"content"in t&&bU(t)?t.content:null}function bU(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Jc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Jc||{});function YA(t){let e=mv();return e?YT(e.sanitize(Jc.HTML,t)||""):df(t,"HTML")?YT(As(t)):QA(xA(),Gc(t))}function DU(t){let e=mv();return e?e.sanitize(Jc.URL,t)||"":df(t,"URL")?As(t):pv(Gc(t))}function CU(t){let e=mv();if(e)return ZT(e.sanitize(Jc.RESOURCE_URL,t)||"");if(df(t,"ResourceURL"))return ZT(As(t));throw new S(904,!1)}function TU(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?CU:DU}function ZA(t,e,n){return TU(e,n)(t)}function mv(){let t=ue();return t&&t[ei].sanitizer}var o_=class{};var SU="h",AU="b";var RU=()=>null;function gv(t,e,n=!1){return RU(t,e,n)}var a_=class{},jh=class{};function xU(t){let e=Error(`No component factory found for ${Ot(t)}.`);return e[MU]=t,e}var MU="ngComponent";var c_=class{resolveComponentFactory(e){throw xU(e)}},wr=(()=>{let e=class e{};e.NULL=new c_;let t=e;return t})();function NU(){return sa(Ct(),ue())}function sa(t,e){return new _e(fn(t,e))}var _e=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=NU;let t=e;return t})();function PU(t){return t instanceof _e?t.nativeElement:t}var bs=class{},kn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>OU();let t=e;return t})();function OU(){let t=ue(),e=Ct(),n=yr(e.index,t);return(ms(n)?n:t)[$e]}var kU=(()=>{let e=class e{};e.\u0275prov=D({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),xy={};function XA(t,e){let n=ZC(t),i=n[xo];return e?.equal&&(i.equal=e.equal),n.set=r=>cy(i,r),n.update=r=>XC(i,r),n.asReadonly=FU.bind(n),n}function FU(){let t=this[xo];if(t.readonlyFn===void 0){let e=()=>this();e[xo]=t,t.readonlyFn=e}return t.readonlyFn}function JA(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var l_=class{constructor(){}supports(e){return e instanceof Map||JA(e)}create(){return new u_}},u_=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||JA(e)))throw new S(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{let s=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let i=e._prev;return n._next=e,n._prev=i,e._prev=n,i&&(i._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let r=this._records.get(e);this._maybeAddToChanges(r,n);let s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}let i=new d_(e);return this._records.set(e,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(i=>n(e[i],i))}},d_=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function tS(){return new yv([new l_])}var yv=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r){let s=r.factories.slice();i=i.concat(s)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||tS()),deps:[[e,new av,new mt]]}}find(i){let r=this.factories.find(s=>s.supports(i));if(r)return r;throw new S(901,!1)}};e.\u0275prov=D({token:e,providedIn:"root",factory:tS});let t=e;return t})();function Bh(t,e,n,i,r=!1){for(;n!==null;){let s=e[n.index];s!==null&&i.push(ti(s)),Fi(s)&&LU(s,i);let o=n.type;if(o&8)Bh(t,e,n.child,i);else if(o&32){let a=dv(n,e),c;for(;c=a();)i.push(c)}else if(o&16){let a=BA(e,n);if(Array.isArray(a))i.push(...a);else{let c=jc(e[dn]);Bh(c[te],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function LU(t,e){for(let n=bt;n<t.length;n++){let i=t[n],r=i[te].firstChild;r!==null&&Bh(i[te],i,r,e)}t[_s]!==t[oi]&&e.push(t[_s])}var eR=[];function VU(t){return t[ys]??jU(t)}function jU(t){let e=eR.pop()??Object.create(UU);return e.lView=t,e}function BU(t){t.lView[ys]!==t&&(t.lView=null,eR.push(t))}var UU=ye(I({},oy),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Vc(t.lView)},consumerOnSignalRead(){this.lView[ys]=this}});function tR(t){return iR(t[Lc])}function nR(t){return iR(t[Pn])}function iR(t){for(;t!==null&&!Fi(t);)t=t[Pn];return t}var $U="ngOriginalError";function My(t){return t[$U]}var ii=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&My(e);for(;n&&My(n);)n=My(n);return n||null}},rR=new x("",{providedIn:"root",factory:()=>C(ii).handleError.bind(void 0)});var sR=!1,HU=new x("",{providedIn:"root",factory:()=>sR});var Vi={};function Fn(t=1){oR(He(),ue(),_r()+t,!1)}function oR(t,e,n,i){if(!i)if((e[J]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Ih(e,s,n)}else{let s=t.preOrderHooks;s!==null&&bh(e,s,0,n)}ws(n)}function T(t,e=he.Default){let n=ue();if(n===null)return y(t,e);let i=Ct();return yA(i,n,Pt(t),e)}function aR(){let t="invalid";throw new Error(t)}function cR(t,e,n,i,r,s){let o=ft(null);try{let a=null;r&fe.SignalBased&&(a=e[i][xo]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),r&fe.HasDecoratorInputTransform&&(s=t.inputTransforms[i].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,i):BS(e,a,i,s)}finally{ft(o)}}function zU(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)ws(~r);else{let s=r,o=n[++i],a=n[++i];Wj(o,s);let c=e[s];a(2,c)}}}finally{ws(-1)}}function hf(t,e,n,i,r,s,o,a,c,l,u){let d=e.blueprint.slice();return d[oi]=r,d[J]=i|4|128|8|64,(l!==null||t&&t[J]&2048)&&(d[J]|=2048),WS(d),d[pt]=d[ra]=t,d[It]=n,d[ei]=o||t&&t[ei],d[$e]=a||t&&t[$e],d[Zo]=c||t&&t[Zo]||null,d[Xt]=s,d[Zh]=jB(),d[Yo]=u,d[jS]=l,d[dn]=e.type==2?t[dn]:d,d}function oa(t,e,n,i,r){let s=t.data[e];if(s===null)s=qU(t,e,n,i,r),Gj()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=i,s.attrs=r;let o=Hj();s.injectorIndex=o===null?-1:o.injectorIndex}return Ts(s,!0),s}function qU(t,e,n,i,r){let s=XS(),o=Z_(),a=o?s:s&&s.parent,c=t.data[e]=ZU(t,a,n,e,i,r);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function lR(t,e,n,i){if(n===0)return-1;let r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function uR(t,e,n,i,r){let s=_r(),o=i&2;try{ws(-1),o&&e.length>Dt&&oR(t,e,Dt,!1),Yn(o?2:0,r),n(i,r)}finally{ws(s),Yn(o?3:1,r)}}function _v(t,e,n){if(G_(e)){let i=ft(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{ft(i)}}}function vv(t,e,n){YS()&&(i2(t,e,n,fn(n,e)),(n.flags&64)===64&&fR(t,e,n))}function wv(t,e,n=fn){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?n(e,t):t[o];t[r++]=a}}}function dR(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Ev(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Ev(t,e,n,i,r,s,o,a,c,l,u){let d=Dt+i,h=d+r,f=GU(d,h),p=typeof l=="function"?l():l;return f[te]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function GU(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:Vi);return n}function WU(t,e,n,i){let s=i.get(HU,sR)||n===Jn.ShadowDom,o=t.selectRootElement(e,s);return KU(o),o}function KU(t){QU(t)}var QU=()=>null;function YU(t,e,n,i){let r=gR(e);r.push(n),t.firstCreatePass&&yR(t).push(i,r.length-1)}function ZU(t,e,n,i,r,s){let o=e?e.injectorIndex:-1,a=0;return ZS()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function nS(t,e,n,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;i??={};let a,c=fe.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(r!==null){if(!r.hasOwnProperty(s))continue;l=r[s]}t===0?iS(i,n,l,a,c):iS(i,n,l,a)}return i}function iS(t,e,n,i,r){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,i):s=t[n]=[e,i],r!==void 0&&s.push(r)}function XU(t,e,n){let i=e.directiveStart,r=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let u=i;u<r;u++){let d=s[u],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;c=nS(0,d.inputs,u,c,f),l=nS(1,d.outputs,u,l,p);let g=c!==null&&o!==null&&!xS(e)?p2(c,u,o):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function JU(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Iv(t,e,n,i,r,s,o,a){let c=fn(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[i])?(Dv(t,n,u,i,r),Xh(e)&&e2(n,e.index)):e.type&3?(i=JU(i),r=o!=null?o(r,e.value||"",i):r,s.setProperty(c,i,r)):e.type&12}function e2(t,e){let n=yr(e,t);n[J]&16||(n[J]|=64)}function bv(t,e,n,i){if(YS()){let r=i===null?null:{"":-1},s=s2(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&hR(t,e,n,o,r,a),r&&o2(n,i,r)}n.mergedAttrs=kc(n.mergedAttrs,n.attrs)}function hR(t,e,n,i,r,s){for(let l=0;l<i.length;l++)Yy(Oh(n,e),t,i[l].type);c2(n,t.data.length,i.length);for(let l=0;l<i.length;l++){let u=i[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=lR(t,e,i.length,null);for(let l=0;l<i.length;l++){let u=i[l];n.mergedAttrs=kc(n.mergedAttrs,u.hostAttrs),l2(t,n,e,c,u),a2(c,u,r),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}XU(t,n,s)}function t2(t,e,n,i,r){let s=r.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;n2(o)!=a&&o.push(a),o.push(n,i,s)}}function n2(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function i2(t,e,n,i){let r=n.directiveStart,s=n.directiveEnd;Xh(n)&&u2(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Oh(n,e),mr(i,e);let o=n.initialInputs;for(let a=r;a<s;a++){let c=t.data[a],l=Is(e,t,a,n);if(mr(l,e),o!==null&&f2(e,a-r,l,c,n,o),ki(c)){let u=yr(n.index,e);u[It]=Is(e,t,a,n)}}}function fR(t,e,n){let i=n.directiveStart,r=n.directiveEnd,s=n.index,o=Kj();try{ws(s);for(let a=i;a<r;a++){let c=t.data[a],l=e[a];Ky(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&r2(c,l)}}finally{ws(-1),Ky(o)}}function r2(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function s2(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(MS(e,o.selectors,!1))if(i||(i=[]),ki(o))if(o.findHostDirectiveDefs!==null){let a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o);let c=a.length;h_(t,e,c)}else i.unshift(o),h_(t,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return i===null?null:[i,r]}function h_(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function o2(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let s=n[e[r+1]];if(s==null)throw new S(-301,!1);i.push(e[r],s)}}}function a2(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;ki(e)&&(n[""]=t)}}function c2(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function l2(t,e,n,i,r){t.data[i]=r;let s=r.factory||(r.factory=vs(r.type,!0)),o=new Es(s,ki(r),T);t.blueprint[i]=o,n[i]=o,t2(t,e,i,lR(t,n,r.hostVars,Vi),r)}function u2(t,e,n){let i=fn(e,t),r=dR(n),s=t[ei].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=ff(t,hf(t,r,null,o,i,e,null,s.createRenderer(i,n),null,null,null));t[e.index]=a}function d2(t,e,n,i,r,s){let o=fn(t,e);h2(e[$e],o,s,t.value,n,i,r)}function h2(t,e,n,i,r,s,o){if(s==null)t.removeAttribute(e,r,n);else{let a=o==null?Gc(s):o(s,i||"",r);t.setAttribute(e,r,a,n)}}function f2(t,e,n,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];cR(i,n,c,l,u,d)}}function p2(t,e,n){let i=null,r=0;for(;r<n.length;){let s=n[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){i===null&&(i=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],n[r+1]);break}}r+=2}return i}function pR(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function mR(t,e){let n=t.contentQueries;if(n!==null){let i=ft(null);try{for(let r=0;r<n.length;r+=2){let s=n[r],o=n[r+1];if(o!==-1){let a=t.data[o];ev(s),a.contentQueries(2,e[o],o)}}}finally{ft(i)}}}function ff(t,e){return t[Lc]?t[UT][Pn]=e:t[Lc]=e,t[UT]=e,e}function f_(t,e,n){ev(0);let i=ft(null);try{e(t,n)}finally{ft(i)}}function gR(t){return t[Fc]||(t[Fc]=[])}function yR(t){return t.cleanup||(t.cleanup=[])}function _R(t,e,n){return(t===null||ki(t))&&(n=Nj(n[e.index])),n[$e]}function vR(t,e){let n=t[Zo],i=n?n.get(ii,null):null;i&&i.handleError(e)}function Dv(t,e,n,i,r){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],u=t.data[o];cR(u,l,i,a,c,r)}}function m2(t,e,n){let i=qS(e,t);zB(t[$e],i,n)}var g2=100;function y2(t,e=!0){let n=t[ei],i=n.rendererFactory,r=!1;r||i.begin?.();try{_2(t)}catch(s){throw e&&vR(t,s),s}finally{r||(i.end?.(),n.inlineEffectRunner?.flush())}}function _2(t){p_(t,0);let e=0;for(;KS(t);){if(e===g2)throw new S(103,!1);e++,p_(t,1)}}function v2(t,e,n,i){let r=e[J];if((r&256)===256)return;let s=!1;!s&&e[ei].inlineEffectRunner?.flush(),tv(e);let o=null,a=null;!s&&w2(t)&&(a=VU(e),o=HC(a));try{WS(e),qj(t.bindingStartIndex),n!==null&&uR(t,e,n,2,i);let c=(r&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&Ih(e,d,null)}else{let d=t.preOrderHooks;d!==null&&bh(e,d,0,null),Cy(e,0)}if(E2(e),wR(e,0),t.contentQueries!==null&&mR(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&Ih(e,d)}else{let d=t.contentHooks;d!==null&&bh(e,d,1),Cy(e,1)}zU(t,e);let l=t.components;l!==null&&IR(e,l,0);let u=t.viewQuery;if(u!==null&&f_(2,u,i),!s)if(c){let d=t.viewCheckHooks;d!==null&&Ih(e,d)}else{let d=t.viewHooks;d!==null&&bh(e,d,2),Cy(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Dy]){for(let d of e[Dy])d();e[Dy]=null}s||(e[J]&=-73)}catch(c){throw Vc(e),c}finally{a!==null&&(zC(a,o),BU(a)),nv()}}function w2(t){return t.type!==2}function wR(t,e){for(let n=tR(t);n!==null;n=nR(n))for(let i=bt;i<n.length;i++){let r=n[i];ER(r,e)}}function E2(t){for(let e=tR(t);e!==null;e=nR(e)){if(!(e[J]&q_.HasTransplantedViews))continue;let n=e[Xo];for(let i=0;i<n.length;i++){let r=n[i],s=r[pt];kj(r)}}}function I2(t,e,n){let i=yr(e,t);ER(i,n)}function ER(t,e){K_(t)&&p_(t,e)}function p_(t,e){let i=t[te],r=t[J],s=t[ys],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&ay(s)),s&&(s.dirty=!1),t[J]&=-9217,o)v2(i,t,i.template,t[It]);else if(r&8192){wR(t,1);let a=i.components;a!==null&&IR(t,a,1)}}function IR(t,e,n){for(let i=0;i<e.length;i++)I2(t,e[i],n)}function Cv(t){for(t[ei].changeDetectionScheduler?.notify();t;){t[J]|=64;let e=jc(t);if(Cj(t)&&!e)return t;t=e}return null}var Ds=class{get rootNodes(){let e=this._lView,n=e[te];return Bh(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[It]}set context(e){this._lView[It]=e}get destroyed(){return(this._lView[J]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[pt];if(Fi(e)){let n=e[xh],i=n?n.indexOf(this):-1;i>-1&&(Uc(e,i),kh(n,i))}this._attachedToViewContainer=!1}af(this._lView[te],this._lView)}onDestroy(e){QS(this._lView,e)}markForCheck(){Cv(this._cdRefInjectingView||this._lView)}detach(){this._lView[J]&=-129}reattach(){Wy(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,y2(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,kA(this._lView[te],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=e,Wy(this._lView)}},ci=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=b2;let t=e;return t})();function b2(t){return D2(Ct(),ue(),(t&16)===16)}function D2(t,e,n){if(Xh(t)&&!n){let i=yr(t.index,e);return new Ds(i,i)}else if(t.type&47){let i=e[dn];return new Ds(i,e)}return null}var bR=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=C2,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),m_=class extends bR{constructor(e){super(),this._lView=e}onDestroy(e){return QS(this._lView,e),()=>Lj(this._lView,e)}};function C2(){return new m_(ue())}var rS=new Set;function el(t){rS.has(t)||(rS.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var g_=class extends q{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,i){let r=e,s=n||(()=>null),o=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Ny(s),r&&(r=Ny(r)),o&&(o=Ny(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof Se&&e.add(a),a}};function Ny(t){return e=>{setTimeout(t,void 0,e)}}var Ie=g_;function sS(...t){}function T2(){let t=typeof et.requestAnimationFrame=="function",e=et[t?"requestAnimationFrame":"setTimeout"],n=et[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var L=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ie(!1),this.onMicrotaskEmpty=new Ie(!1),this.onStable=new Ie(!1),this.onError=new Ie(!1),typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=T2().nativeRequestAnimationFrame,R2(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new S(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,S2,sS,sS);try{return s.runTask(o,n,i)}finally{s.cancelTask(o)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},S2={};function Tv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function A2(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(et,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,y_(t),t.isCheckStableRunning=!0,Tv(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),y_(t))}function R2(t){let e=()=>{A2(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{if(x2(a))return n.invokeTask(r,s,o,a);try{return oS(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),aS(t)}},onInvoke:(n,i,r,s,o,a,c)=>{try{return oS(t),n.invoke(r,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),aS(t)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,y_(t),Tv(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function y_(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function oS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function aS(t){t._nesting--,Tv(t)}function x2(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Go=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Go||{}),M2={destroy(){}};function Sv(t,e){!e&&MB(Sv);let n=e?.injector??C(Me);if(!PB(n))return M2;el("NgAfterNextRender");let i=n.get(Av),r=i.handler??=new v_,s=e?.phase??Go.MixedReadWrite,o=()=>{r.unregister(c),a()},a=n.get(bR).onDestroy(o),c=new __(n,s,()=>{o(),t()});return r.register(c),{destroy:o}}var __=class{constructor(e,n,i){this.phase=n,this.callbackFn=i,this.zone=e.get(L),this.errorHandler=e.get(ii,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},v_=class{constructor(){this.executingCallbacks=!1,this.buckets={[Go.EarlyRead]:new Set,[Go.Write]:new Set,[Go.MixedReadWrite]:new Set,[Go.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){let e=!1;this.executingCallbacks=!0;for(let n of Object.values(this.buckets))for(let i of n)e=!0,i.invoke();this.executingCallbacks=!1;for(let n of this.deferredCallbacks)this.buckets[n.phase].add(n);return this.deferredCallbacks.clear(),e}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Av=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let s of i)s();return!!this.handler?.execute()||i.length>0}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=D({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function N2(t,e){let n=yr(e,t),i=n[te];P2(i,n);let r=n[oi];r!==null&&n[Yo]===null&&(n[Yo]=gv(r,n[Zo])),Rv(i,n,n[It])}function P2(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Rv(t,e,n){tv(e);try{let i=t.viewQuery;i!==null&&f_(1,i,n);let r=t.template;r!==null&&uR(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&mR(t,e),t.staticViewQueries&&f_(2,t.viewQuery,n);let s=t.components;s!==null&&O2(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[J]&=-5,nv()}}function O2(t,e){for(let n=0;n<e.length;n++)N2(t,e[n])}function Uh(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=Uy(r,a);else if(s==2){let c=a,l=e[++o];i=Uy(i,c+": "+l+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var $h=class extends wr{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=pr(e);return new na(n,this.ngModule)}};function cS(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function k2(t){let e=t.toLowerCase();return e==="svg"?zS:e==="math"?Rj:null}var w_=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Yh(i);let r=this.injector.get(e,xy,i);return r!==xy||n===xy?r:this.parentInjector.get(e,n,i)}},na=class extends jh{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=cS(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return cS(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=wj(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){r=r||this.ngModule;let s=r instanceof Yt?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let o=s?new w_(e,s):e,a=o.get(bs,null);if(a===null)throw new S(407,!1);let c=o.get(kU,null),l=o.get(Av,null),u=o.get(o_,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:u},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=i?WU(h,i,this.componentDef.encapsulation,o):OA(h,f,k2(f)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let v=null;p!==null&&(v=gv(p,o,!0));let E=Ev(0,null,null,1,0,null,null,null,null,null,null),A=hf(null,E,null,g,null,null,d,h,o,null,v);tv(A);let N,O;try{let K=this.componentDef,j,ae=null;K.findHostDirectiveDefs?(j=[],ae=new Map,K.findHostDirectiveDefs(K,j,ae),j.push(K)):j=[K];let De=F2(A,p),Mt=L2(De,p,K,j,A,d,h);O=W_(E,Dt),p&&B2(h,K,p,i),n!==void 0&&U2(O,this.ngContentSelectors,n),N=j2(Mt,K,j,ae,A,[$2]),Rv(E,A,null)}finally{nv()}return new E_(this.componentType,N,sa(O,A),A,O)}},E_=class extends a_{constructor(e,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ds(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Dv(s[te],s,r,e,n),this.previousInputValues.set(e,n);let o=yr(this._tNode.index,s);Cv(o)}}get injector(){return new gs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function F2(t,e){let n=t[te],i=Dt;return t[i]=e,oa(n,i,2,"#host",null)}function L2(t,e,n,i,r,s,o){let a=r[te];V2(i,t,e,o);let c=null;e!==null&&(c=gv(e,r[Zo]));let l=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=hf(r,dR(n),null,u,r[t.index],t,s,l,null,null,c);return a.firstCreatePass&&h_(a,t,i.length-1),ff(r,d),r[t.index]=d}function V2(t,e,n,i){for(let r of t)e.mergedAttrs=kc(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(Uh(e,e.mergedAttrs,!0),n!==null&&HA(i,n,e))}function j2(t,e,n,i,r,s){let o=Ct(),a=r[te],c=fn(o,r);hR(a,r,o,n,null,i);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,h=Is(r,a,d,o);mr(h,r)}fR(a,r,o),c&&mr(c,r);let l=Is(r,a,o.directiveStart+o.componentOffset,o);if(t[It]=r[It]=l,s!==null)for(let u of s)u(l,e);return _v(a,o,t),l}function B2(t,e,n,i){if(i)qy(t,n,["ng-version","17.1.0"]);else{let{attrs:r,classes:s}=Ej(e.selectors[0]);r&&qy(t,n,r),s&&s.length>0&&$A(t,n,s.join(" "))}}function U2(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let s=n[r];i.push(s!=null?Array.from(s):null)}}function $2(){let t=Ct();rf(ue()[te],t)}function H2(t){return Object.getPrototypeOf(t.prototype).constructor}function Ye(t){let e=H2(t.type),n=!0,i=[t];for(;e;){let r;if(ki(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new S(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let o=t;o.inputs=wh(t.inputs),o.inputTransforms=wh(t.inputTransforms),o.declaredInputs=wh(t.declaredInputs),o.outputs=wh(t.outputs);let a=r.hostBindings;a&&K2(t,a);let c=r.viewQuery,l=r.contentQueries;if(c&&G2(t,c),l&&W2(t,l),z2(t,r),HV(t.outputs,r.outputs),ki(r)&&r.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Ye&&(n=!1)}}e=Object.getPrototypeOf(e)}q2(i)}function z2(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function q2(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=kc(r.hostAttrs,n=kc(n,r.hostAttrs))}}function wh(t){return t===Qo?{}:t===zt?[]:t}function G2(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function W2(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,s)=>{e(i,r,s),n(i,r,s)}:t.contentQueries=e}function K2(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function ji(t){let e=t.inputConfig,n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(n[i]=r[3])}t.inputTransforms=n}var wre=new RegExp(`^(\\d+)*(${AU}|${SU})*(.*)`);var Q2=()=>null;function $c(t,e){return Q2(t,e)}function pf(t,e,n,i){let r=e.tView,o=t[J]&4096?4096:16,a=hf(t,r,n,o,null,e,null,null,null,i?.injector??null,i?.dehydratedView??null),c=t[e.index];a[Kc]=c;let l=t[Xn];return l!==null&&(a[Xn]=l.createEmbeddedView(r)),Rv(r,a,n),a}function DR(t,e){let n=bt+e;if(n<t.length)return t[n]}function Hc(t,e){return!e||e.firstChild===null||NA(t)}function mf(t,e,n,i=!0){let r=e[te];if(QB(r,e,t,n),i){let o=n_(n,t),a=e[$e],c=hv(a,t[_s]);c!==null&&WB(r,t[Xt],a,e,c,o)}let s=e[Yo];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function CR(t,e){let n=Uc(t,e);return n!==void 0&&af(n[te],n),n}var mn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Y2;let t=e;return t})();function Y2(){let t=Ct();return SR(t,ue())}var Z2=mn,TR=class extends Z2{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return sa(this._hostTNode,this._hostLView)}get injector(){return new gs(this._hostTNode,this._hostLView)}get parentInjector(){let e=iv(this._hostTNode,this._hostLView);if(dA(e)){let n=Nh(e,this._hostLView),i=Mh(e),r=n[te].data[i+8];return new gs(r,n)}else return new gs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=lS(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-bt}createEmbeddedView(e,n,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=$c(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,r,Hc(this._hostTNode,o)),a}createComponent(e,n,i,r,s){let o=e&&!pB(e),a;if(o)a=n;else{let p=n||{};a=p.index,i=p.injector,r=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new na(pr(e)),l=i||this.parentInjector;if(!s&&c.ngModule==null){let g=(o?l:this.parentInjector).get(Yt,null);g&&(s=g)}let u=pr(c.componentType??{}),d=$c(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,r,h,s);return this.insertImpl(f.hostView,a,Hc(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(Oj(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[pt],l=new TR(c,c[Xt],c[pt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return mf(o,r,s,i),e.attachToViewContainerRef(),EA(Py(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=lS(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=Uc(this._lContainer,n);i&&(kh(Py(this._lContainer),n),af(i[te],i))}detach(e){let n=this._adjustIndex(e,-1),i=Uc(this._lContainer,n);return i&&kh(Py(this._lContainer),n)!=null?new Ds(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function lS(t){return t[xh]}function Py(t){return t[xh]||(t[xh]=[])}function SR(t,e){let n,i=e[t.index];return Fi(i)?n=i:(n=pR(i,e,null,t),e[t.index]=n,ff(e,n)),J2(n,e,t,i),new TR(n,t,e)}function X2(t,e){let n=t[$e],i=n.createComment(""),r=fn(e,t),s=hv(n,r);return Lh(n,s,i,tU(n,r),!1),i}var J2=n$,e$=()=>!1;function t$(t,e,n){return e$(t,e,n)}function n$(t,e,n,i){if(t[_s])return;let r;n.type&8?r=ti(i):r=X2(e,n),t[_s]=r}function i$(t,e,n){return t[e]=n}function li(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function r$(t,e,n,i,r,s,o,a,c){let l=e.consts,u=oa(e,t,4,o||null,Jo(l,a));bv(e,n,u,Jo(l,c)),rf(e,u);let d=u.tView=Ev(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Zt(t,e,n,i,r,s,o,a){let c=ue(),l=He(),u=t+Dt,d=l.firstCreatePass?r$(u,l,c,e,n,i,r,s,o):l.data[u];Ts(d,!1);let h=s$(l,c,d,t);tf()&&cf(l,c,h,d),mr(h,c);let f=pR(h,c,h,d);return c[u]=f,ff(c,f),t$(f,d,c),Jh(d)&&vv(l,c,d),o!=null&&wv(c,d,a),Zt}var s$=o$;function o$(t,e,n,i){return nf(!0),e[$e].createComment("")}function ui(t,e,n,i){let r=ue(),s=Ss();if(li(r,s,e)){let o=He(),a=ef();d2(a,r,t,e,n,i)}return ui}function a$(t,e,n,i){return li(t,Ss(),n)?e+Gc(n)+i:Vi}function Eh(t,e){return t<<17|e<<2}function Cs(t){return t>>17&32767}function c$(t){return(t&2)==2}function l$(t,e){return t&131071|e<<17}function I_(t){return t|2}function ia(t){return(t&131068)>>2}function Oy(t,e){return t&-131069|e<<2}function u$(t){return(t&1)===1}function b_(t){return t|1}function d$(t,e,n,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Cs(o),c=ia(o);t[i]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Qc(d,u)>0)&&(l=!0)}else u=n;if(r)if(c!==0){let h=Cs(t[a+1]);t[i+1]=Eh(h,a),h!==0&&(t[h+1]=Oy(t[h+1],i)),t[a+1]=l$(t[a+1],i)}else t[i+1]=Eh(a,0),a!==0&&(t[a+1]=Oy(t[a+1],i)),a=i;else t[i+1]=Eh(c,0),a===0?a=i:t[c+1]=Oy(t[c+1],i),c=i;l&&(t[i+1]=I_(t[i+1])),uS(t,u,i,!0),uS(t,u,i,!1),h$(e,u,t,i,s),o=Eh(a,c),s?e.classBindings=o:e.styleBindings=o}function h$(t,e,n,i,r){let s=r?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Qc(s,e)>=0&&(n[i+1]=b_(n[i+1]))}function uS(t,e,n,i){let r=t[n+1],s=e===null,o=i?Cs(r):ia(r),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];f$(c,e)&&(a=!0,t[o+1]=i?b_(l):I_(l)),o=i?Cs(l):ia(l)}a&&(t[n+1]=i?I_(r):b_(r))}function f$(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Qc(t,e)>=0:!1}var Nn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function p$(t){return t.substring(Nn.key,Nn.keyEnd)}function m$(t){return g$(t),AR(t,RR(t,0,Nn.textEnd))}function AR(t,e){let n=Nn.textEnd;return n===e?-1:(e=Nn.keyEnd=y$(t,Nn.key=e,n),RR(t,e,n))}function g$(t){Nn.key=0,Nn.keyEnd=0,Nn.value=0,Nn.valueEnd=0,Nn.textEnd=t.length}function RR(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function y$(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Rs(t,e,n){let i=ue(),r=Ss();if(li(i,r,e)){let s=He(),o=ef();Iv(s,o,i,t,e,i[$e],n,!1)}return Rs}function D_(t,e,n,i,r){let s=e.inputs,o=r?"class":"style";Dv(t,n,s[o],o,i)}function xv(t,e,n){return MR(t,e,n,!1),xv}function Bi(t,e){return MR(t,e,null,!0),Bi}function xR(t){v$(C$,_$,t,!0)}function _$(t,e){for(let n=m$(e);n>=0;n=AR(e,n))ov(t,p$(e),!0)}function MR(t,e,n,i){let r=ue(),s=He(),o=eA(2);if(s.firstUpdatePass&&PR(s,t,o,i),e!==Vi&&li(r,o,e)){let a=s.data[_r()];OR(s,a,r,r[$e],t,r[o+1]=S$(e,n),i,o)}}function v$(t,e,n,i){let r=He(),s=eA(2);r.firstUpdatePass&&PR(r,null,s,i);let o=ue();if(n!==Vi&&li(o,s,n)){let a=r.data[_r()];if(kR(a,i)&&!NR(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Uy(c,n||"")),D_(r,a,o,n,i)}else T$(r,a,o,o[$e],o[s+1],o[s+1]=D$(t,e,n),i,s)}}function NR(t,e){return e>=t.expandoStartIndex}function PR(t,e,n,i){let r=t.data;if(r[n+1]===null){let s=r[_r()],o=NR(t,n);kR(s,i)&&e===null&&!o&&(e=!1),e=w$(r,s,e,i),d$(r,s,e,n,o,i)}}function w$(t,e,n,i){let r=J_(t),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=ky(null,t,e,n,i),n=zc(n,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==r)if(n=ky(r,t,e,n,i),s===null){let c=E$(t,e,i);c!==void 0&&Array.isArray(c)&&(c=ky(null,t,e,c[1],i),c=zc(c,e.attrs,i),I$(t,e,i,c))}else s=b$(t,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),n}function E$(t,e,n){let i=n?e.classBindings:e.styleBindings;if(ia(i)!==0)return t[Cs(i)]}function I$(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[Cs(r)]=i}function b$(t,e,n){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=t[s].hostAttrs;i=zc(i,o,n)}return zc(i,e.attrs,n)}function ky(t,e,n,i,r){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],i=zc(i,s.hostAttrs,r),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function zc(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),ov(t,o,n?!0:e[++s]))}return t===void 0?null:t}function D$(t,e,n){if(n==null||n==="")return zt;let i=[],r=As(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else typeof r=="string"&&e(i,r);return i}function C$(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&ov(t,i,n)}function T$(t,e,n,i,r,s,o,a){r===Vi&&(r=zt);let c=0,l=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let h=c<r.length?r[c+1]:void 0,f=l<s.length?s[l+1]:void 0,p=null,g;u===d?(c+=2,l+=2,h!==f&&(p=d,g=f)):d===null||u!==null&&u<d?(c+=2,p=u):(l+=2,p=d,g=f),p!==null&&OR(t,e,n,i,p,g,o,a),u=c<r.length?r[c]:null,d=l<s.length?s[l]:null}}function OR(t,e,n,i,r,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=u$(l)?dS(c,e,n,r,ia(l),o):void 0;if(!Hh(u)){Hh(s)||c$(l)&&(s=dS(c,null,n,r,a,o));let d=qS(_r(),n);aU(i,o,d,r,s)}}function dS(t,e,n,i,r,s){let o=e===null,a;for(;r>0;){let c=t[r],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[r+1];h===Vi&&(h=d?zt:void 0);let f=d?Sy(h,i):u===i?h:void 0;if(l&&!Hh(f)&&(f=Sy(c,i)),Hh(f)&&(a=f,o))return a;let p=t[r+1];r=o?Cs(p):ia(p)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Sy(c,i))}return a}function Hh(t){return t!==void 0}function S$(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ot(As(t)))),t}function kR(t,e){return(t.flags&(e?8:16))!==0}var C_=class{destroy(e){}updateValue(e,n){}swap(e,n){let i=Math.min(e,n),r=Math.max(e,n),s=this.detach(r);if(r-i>1){let o=this.detach(i);this.attach(i,s),this.attach(r,o)}else this.attach(i,s)}move(e,n){this.attach(n,this.detach(e))}};function Fy(t,e,n,i,r){return t===n&&Object.is(e,i)?1:Object.is(r(t,e),r(n,i))?-1:0}function A$(t,e,n){let i,r,s=0,o=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;s<=o&&s<=a;){let c=t.at(s),l=e[s],u=Fy(s,c,s,l,n);if(u!==0){u<0&&t.updateValue(s,l),s++;continue}let d=t.at(o),h=e[a],f=Fy(o,d,a,h,n);if(f!==0){f<0&&t.updateValue(o,h),o--,a--;continue}let p=n(s,c),g=n(o,d),v=n(s,l);if(Object.is(v,g)){let E=n(a,h);Object.is(E,p)?(t.swap(s,o),t.updateValue(o,h),a--,o--):t.move(o,s),t.updateValue(s,l),s++;continue}if(i??=new zh,r??=fS(t,s,o,n),T_(t,i,s,v))t.updateValue(s,l),s++,o++;else if(r.has(v))i.set(p,t.detach(s)),o--;else{let E=t.create(s,e[s]);t.attach(s,E),s++,o++}}for(;s<=a;)hS(t,i,n,s,e[s]),s++}else if(e!=null){let a=e[Symbol.iterator](),c=a.next();for(;!c.done&&s<=o;){let l=t.at(s),u=c.value,d=Fy(s,l,s,u,n);if(d!==0)d<0&&t.updateValue(s,u),s++,c=a.next();else{i??=new zh,r??=fS(t,s,o,n);let h=n(s,u);if(T_(t,i,s,h))t.updateValue(s,u),s++,o++,c=a.next();else if(!r.has(h))t.attach(s,t.create(s,u)),s++,o++,c=a.next();else{let f=n(s,l);i.set(f,t.detach(s)),o--}}}for(;!c.done;)hS(t,i,n,t.length,c.value),c=a.next()}for(;s<=o;)t.destroy(t.detach(o--));i?.forEach(a=>{t.destroy(a)})}function T_(t,e,n,i){return e!==void 0&&e.has(i)?(t.attach(n,e.get(i)),e.delete(i),!0):!1}function hS(t,e,n,i,r){if(T_(t,e,i,n(i,r)))t.updateValue(i,r);else{let s=t.create(i,r);t.attach(i,s)}}function fS(t,e,n,i){let r=new Set;for(let s=e;s<=n;s++)r.add(i(s,t.at(s)));return r}var zh=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,i]of this.kvMap)if(e(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,n)}}};function Mv(t,e,n){el("NgControlFlow");let i=ue(),r=Ss(),s=x_(i,Dt+t),o=0;if(li(i,r,e)){let a=ft(null);try{if(CR(s,o),e!==-1){let c=M_(i[te],Dt+e),l=$c(s,c.tView.ssrId),u=pf(i,c,n,{dehydratedView:l});mf(s,u,o,Hc(c,l))}}finally{ft(a)}}else{let a=DR(s,o);a!==void 0&&(a[It]=n)}}var S_=class{constructor(e,n,i){this.lContainer=e,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-bt}};function Ire(t){return t}function bre(t,e){return e}var A_=class{constructor(e,n,i){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=i}};function Dre(t,e,n,i,r,s,o,a,c,l,u,d,h){el("NgControlFlow");let f=c!==void 0,p=ue(),g=a?o.bind(p[dn][It]):o,v=new A_(f,g);p[Dt+t]=v,Zt(t+1,e,n,i,r,s),f&&Zt(t+2,c,l,u,d,h)}var R_=class extends C_{constructor(e,n,i){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=i,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-bt}at(e){return this.getLView(e)[It].$implicit}attach(e,n){let i=n[Yo];this.needsIndexUpdate||=e!==this.length,mf(this.lContainer,n,e,Hc(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,R$(this.lContainer,e)}create(e,n){let i=$c(this.lContainer,this.templateTNode.tView.ssrId);return pf(this.hostLView,this.templateTNode,new S_(this.lContainer,n,e),{dehydratedView:i})}destroy(e){af(e[te],e)}updateValue(e,n){this.getLView(e)[It].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[It].$index=e}getLView(e){return x$(this.lContainer,e)}};function Cre(t){let e=ft(null),n=_r();try{let i=ue(),r=i[te],s=i[n];if(s.liveCollection===void 0){let a=n+1,c=x_(i,a),l=M_(r,a);s.liveCollection=new R_(c,i,l)}else s.liveCollection.reset();let o=s.liveCollection;if(A$(o,t,s.trackByFn),o.updateIndexes(),s.hasEmptyBlock){let a=Ss(),c=o.length===0;if(li(i,a,c)){let l=n+2,u=x_(i,l);if(c){let d=M_(r,l),h=$c(u,d.tView.ssrId),f=pf(i,d,void 0,{dehydratedView:h});mf(u,f,0,Hc(d,h))}else CR(u,0)}}}finally{ft(e)}}function x_(t,e){return t[e]}function R$(t,e){return Uc(t,e)}function x$(t,e){return DR(t,e)}function M_(t,e){return W_(t,e)}function M$(t,e,n,i,r,s){let o=e.consts,a=Jo(o,r),c=oa(e,t,2,i,a);return bv(e,n,c,Jo(o,s)),c.attrs!==null&&Uh(c,c.attrs,!1),c.mergedAttrs!==null&&Uh(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Ft(t,e,n,i){let r=ue(),s=He(),o=Dt+t,a=r[$e],c=s.firstCreatePass?M$(o,s,r,e,n,i):s.data[o],l=N$(s,r,c,a,e,t);r[o]=l;let u=Jh(c);return Ts(c,!0),HA(a,l,c),(c.flags&32)!==32&&tf()&&cf(s,r,l,c),Vj()===0&&mr(l,r),jj(),u&&(vv(s,r,c),_v(s,c,r)),i!==null&&wv(r,c),Ft}function Tt(){let t=Ct();Z_()?X_():(t=t.parent,Ts(t,!1));let e=t;Uj(e)&&$j(),Bj();let n=He();return n.firstCreatePass&&(rf(n,t),G_(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&nB(e)&&D_(n,e,ue(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&iB(e)&&D_(n,e,ue(),e.stylesWithoutHost,!1),Tt}function Er(t,e,n,i){return Ft(t,e,n,i),Tt(),Er}var N$=(t,e,n,i,r,s)=>(nf(!0),OA(i,r,Xj()));function P$(t,e,n,i,r){let s=e.consts,o=Jo(s,i),a=oa(e,t,8,"ng-container",o);o!==null&&Uh(a,o,!0);let c=Jo(s,r);return bv(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function FR(t,e,n){let i=ue(),r=He(),s=t+Dt,o=r.firstCreatePass?P$(s,r,i,e,n):r.data[s];Ts(o,!0);let a=O$(r,i,o,t);return i[s]=a,tf()&&cf(r,i,a,o),mr(a,i),Jh(o)&&(vv(r,i,o),_v(r,o,i)),n!=null&&wv(i,o),FR}function LR(){let t=Ct(),e=He();return Z_()?X_():(t=t.parent,Ts(t,!1)),e.firstCreatePass&&(rf(e,t),G_(t)&&e.queries.elementEnd(t)),LR}function Nv(t,e,n){return FR(t,e,n),LR(),Nv}var O$=(t,e,n,i)=>(nf(!0),qB(e[$e],""));function Pv(){return ue()}function gf(t,e,n){let i=ue(),r=Ss();if(li(i,r,e)){let s=He(),o=ef();Iv(s,o,i,t,e,i[$e],n,!0)}return gf}function k$(t,e,n){let i=ue(),r=Ss();if(li(i,r,e)){let s=He(),o=ef(),a=J_(s.data),c=_R(a,o,i);Iv(s,o,i,t,e,c,n,!0)}return k$}var ps=void 0;function F$(t){let e=t,n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&i===0?1:5}var L$=["en",[["a","p"],["AM","PM"],ps],[["AM","PM"],ps,ps],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ps,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ps,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ps,"{1} 'at' {0}",ps],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",F$],Ly={};function Ov(t){let e=V$(t),n=pS(e);if(n)return n;let i=e.split("-")[0];if(n=pS(i),n)return n;if(i==="en")return L$;throw new S(701,!1)}function pS(t){return t in Ly||(Ly[t]=et.ng&&et.ng.common&&et.ng.common.locales&&et.ng.common.locales[t]),Ly[t]}var aa=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(aa||{});function V$(t){return t.toLowerCase().replace(/_/g,"-")}var qh="en-US";var j$=qh;function B$(t){ZV(t,"Expected localeId to be defined"),typeof t=="string"&&(j$=t.toLowerCase().replace(/_/g,"-"))}function xs(t){return!!t&&typeof t.then=="function"}function VR(t){return!!t&&typeof t.subscribe=="function"}function at(t,e,n,i){let r=ue(),s=He(),o=Ct();return jR(s,r,r[$e],o,t,e,i),at}function U$(t,e){let n=Ct(),i=ue(),r=He(),s=J_(r.data),o=_R(s,n,i);return jR(r,i,o,n,t,e),U$}function $$(t,e,n,i){let r=t.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===n&&r[s+1]===i){let a=e[Fc],c=r[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function jR(t,e,n,i,r,s,o){let a=Jh(i),l=t.firstCreatePass&&yR(t),u=e[It],d=gR(e),h=!0;if(i.type&3||o){let g=fn(i,e),v=o?o(g):g,E=d.length,A=o?O=>o(ti(O[i.index])):i.index,N=null;if(!o&&a&&(N=$$(t,e,r,i.index)),N!==null){let O=N.__ngLastListenerFn__||N;O.__ngNextListenerFn__=s,N.__ngLastListenerFn__=s,h=!1}else{s=gS(i,e,u,s,!1);let O=n.listen(v,r,s);d.push(s,O),l&&l.push(r,A,E,E+1)}}else s=gS(i,e,u,s,!1);let f=i.outputs,p;if(h&&f!==null&&(p=f[r])){let g=p.length;if(g)for(let v=0;v<g;v+=2){let E=p[v],A=p[v+1],K=e[E][A].subscribe(s),j=d.length;d.push(s,K),l&&l.push(r,i.index,j,-(j+1))}}}function mS(t,e,n,i){try{return Yn(6,e,n),n(i)!==!1}catch(r){return vR(t,r),!1}finally{Yn(7,e,n)}}function gS(t,e,n,i,r){return function s(o){if(o===Function)return i;let a=t.componentOffset>-1?yr(t.index,e):e;Cv(a);let c=mS(e,n,i,o),l=s.__ngNextListenerFn__;for(;l;)c=mS(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return r&&c===!1&&o.preventDefault(),c}}function ca(t=1){return Yj(t)}function H$(t,e){let n=null,i=mj(t);for(let r=0;r<e.length;r++){let s=e[r];if(s==="*"){n=r;continue}if(i===null?MS(t,s,!0):_j(i,s))return r}return n}function BR(t){let e=ue()[dn][Xt];if(!e.projection){let n=t?t.length:1,i=e.projection=yB(n,null),r=i.slice(),s=e.child;for(;s!==null;){let o=t?H$(s,t):0;o!==null&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function UR(t,e=0,n){let i=ue(),r=He(),s=oa(r,Dt+t,16,null,n||null);s.projection===null&&(s.projection=e),X_(),(!i[Yo]||ZS())&&(s.flags&32)!==32&&sU(r,i,s)}function z$(){return this._results[Symbol.iterator]()}var Gh=class t{get changes(){return this._changes??=new Ie}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=z$)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=gB(e);(this._changesDetected=!mB(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},On=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=W$;let t=e;return t})(),q$=On,G$=class extends q${constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=pf(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:i});return new Ds(r)}};function W$(){return yf(Ct(),ue())}function yf(t,e){return t.type&4?new G$(e,t,sa(t,e)):null}var N_=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},P_=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)qR(e,n).matches!==null&&this.queries[n].setDirty()}},Wh=class{constructor(e,n,i=null){this.predicate=e,this.flags=n,this.read=i}},O_=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},k_=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(e,n,K$(n,s)),this.matchTNodeWithReadOption(e,n,Dh(n,e,s,!1,!1))}else i===On?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Dh(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===_e||r===mn||r===On&&n.type&4)this.addMatch(n.index,-2);else{let s=Dh(n,e,r,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function K$(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function Q$(t,e){return t.type&11?sa(t,e):t.type&4?yf(t,e):null}function Y$(t,e,n,i){return n===-1?Q$(e,t):n===-2?Z$(t,e,i):Is(t,t[te],n,e)}function Z$(t,e,n){if(n===_e)return sa(e,t);if(n===On)return yf(e,t);if(n===mn)return SR(e,t)}function $R(t,e,n,i){let r=e[Xn].queries[i];if(r.matches===null){let s=t.data,o=n.matches,a=[];for(let c=0;c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(Y$(e,u,o[c+1],n.metadata.read))}}r.matches=a}return r.matches}function F_(t,e,n,i){let r=t.queries.getByIndex(n),s=r.matches;if(s!==null){let o=$R(t,e,r,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)i.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let d=bt;d<u.length;d++){let h=u[d];h[Kc]===h[pt]&&F_(h[te],h,l,i)}if(u[Xo]!==null){let d=u[Xo];for(let h=0;h<d.length;h++){let f=d[h];F_(f[te],f,l,i)}}}}}return i}function X$(t,e){return t[Xn].queries[e].queryList}function HR(t,e,n){let i=new Gh((n&4)===4);YU(t,e,i,i.destroy),e[Xn]===null&&(e[Xn]=new P_),e[Xn].queries.push(new N_(i))}function zR(t,e,n){t.queries===null&&(t.queries=new O_),t.queries.track(new k_(e,n))}function J$(t,e){let n=t.contentQueries||(t.contentQueries=[]),i=n.length?n[n.length-1]:-1;e!==i&&n.push(t.queries.length-1,e)}function qR(t,e){return t.queries.getByIndex(e)}function eH(t,e,n,i){let r=He();if(r.firstCreatePass){let s=Ct();zR(r,new Wh(e,n,i),s.index),J$(r,t),(n&2)===2&&(r.staticContentQueries=!0)}HR(r,ue(),n)}function _f(t,e,n){let i=He();i.firstCreatePass&&(zR(i,new Wh(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),HR(i,ue(),e)}function tl(t){let e=ue(),n=He(),i=tA();ev(i+1);let r=qR(n,i);if(t.dirty&&Pj(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let s=r.crossesNgTemplate?F_(n,e,i,[]):$R(n,e,r,i);t.reset(s,PU),t.notifyOnChanges()}return!0}return!1}function nl(){return X$(ue(),tA())}function tH(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}function Sre(t){let e=zj();return GS(e,Dt+t)}function la(t,e=""){let n=ue(),i=He(),r=t+Dt,s=i.firstCreatePass?oa(i,r,1,e,null):i.data[r],o=nH(i,n,s,e,t);n[r]=o,tf()&&cf(i,n,o,s),Ts(s,!1)}var nH=(t,e,n,i,r)=>(nf(!0),HB(e[$e],i));function iH(t){return Ms("",t,""),iH}function Ms(t,e,n){let i=ue(),r=a$(i,t,e,n);return r!==Vi&&m2(i,_r(),r),Ms}function rH(t,e,n){let i=He();if(i.firstCreatePass){let r=ki(t);L_(n,i.data,i.blueprint,r,!0),L_(e,i.data,i.blueprint,r,!1)}}function L_(t,e,n,i,r){if(t=Pt(t),Array.isArray(t))for(let s=0;s<t.length;s++)L_(t[s],e,n,i,r);else{let s=He(),o=ue(),a=Ct(),c=ta(t)?t:Pt(t.provide),l=SA(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(ta(t)||!t.multi){let f=new Es(l,r,T),p=jy(c,e,r?u:u+h,d);p===-1?(Yy(Oh(a,o),s,c),Vy(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{let f=jy(c,e,u+h,d),p=jy(c,e,u,u+h),g=f>=0&&n[f],v=p>=0&&n[p];if(r&&!v||!r&&!g){Yy(Oh(a,o),s,c);let E=aH(r?oH:sH,n.length,r,i,l);!r&&v&&(n[p].providerFactory=E),Vy(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(E),o.push(E)}else{let E=GR(n[r?p:f],l,!r&&i);Vy(s,t,f>-1?f:p,E)}!r&&i&&v&&n[p].componentProviders++}}}function Vy(t,e,n,i){let r=ta(e),s=DB(e);if(r||s){let c=(s?Pt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[i,c]):l[u+1].push(i,c)}else l.push(n,c)}}}function GR(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function jy(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function sH(t,e,n,i){return V_(this.multi,[])}function oH(t,e,n,i){let r=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Is(n,n[te],this.providerFactory.index,i);s=a.slice(0,o),V_(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],V_(r,s);return s}function V_(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function aH(t,e,n,i,r){let s=new Es(t,n,T);return s.multi=[],s.index=e,s.componentProviders=0,GR(s,r,i&&!n),s}function Gt(t,e=[]){return n=>{n.providersResolver=(i,r)=>rH(i,r?r(t):t,e)}}var gr=class{},qc=class{};var j_=class extends gr{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $h(this);let r=FS(e);this._bootstrapComponents=MA(r.bootstrap),this._r3Injector=AA(e,n,[{provide:gr,useValue:this},{provide:wr,useValue:this.componentFactoryResolver},...i],Ot(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},B_=class extends qc{constructor(e){super(),this.moduleType=e}create(e){return new j_(this.moduleType,e,[])}};var Kh=class extends gr{constructor(e){super(),this.componentFactoryResolver=new $h(this),this.instance=null;let n=new Bc([...e.providers,{provide:gr,useValue:this},{provide:wr,useValue:this.componentFactoryResolver}],e.parent||lv(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function vf(t,e,n=null){return new Kh({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var cH=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=DA(!1,i.type),s=r.length>0?vf([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,s)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=D({token:e,providedIn:"environment",factory:()=>new e(y(Yt))});let t=e;return t})();function di(t){el("NgStandalone"),t.getStandaloneInjector=e=>e.get(cH).getOrCreateStandaloneInjector(t)}function WR(t,e,n,i){return KR(ue(),JS(),t,e,n,i)}function lH(t,e){let n=t[e];return n===Vi?void 0:n}function KR(t,e,n,i,r,s){let o=e+n;return li(t,o,r)?i$(t,o+1,s?i.call(s,r):i(r)):lH(t,o+1)}function Are(t,e){let n=He(),i,r=t+Dt;n.firstCreatePass?(i=uH(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];let s=i.factory||(i.factory=vs(i.type,!0)),o,a=Ht(T);try{let c=Ph(!1),l=s();return Ph(c),tH(n,ue(),r,l),l}finally{Ht(a)}}function uH(t,e){if(e)for(let n=e.length-1;n>=0;n--){let i=e[n];if(t===i.name)return i}}function Rre(t,e,n){let i=t+Dt,r=ue(),s=GS(r,i);return dH(r,i)?KR(r,JS(),e,s.transform,n,s):s.transform(n)}function dH(t,e){return t[te].data[e].pure}function xre(t,e){return yf(t,e)}var ri=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},QR=new ri("17.1.0");var ua=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),U_=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},wf=(()=>{let e=class e{compileModuleSync(i){return new B_(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),s=FS(i),o=MA(s.declarations).reduce((a,c)=>{let l=pr(c);return l&&a.push(new na(l)),a},[]);return new U_(r,o)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ef=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ke(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var kv=new x(""),il=new x(""),If=(()=>{let e=class e{constructor(i,r,s){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Fv||(hH(s),s.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{L.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb()}});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(i)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,s){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),i()},r)),this._callbacks.push({doneCb:i,timeoutId:o,updateCb:s})}whenStable(i,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,s){return[]}};e.\u0275fac=function(r){return new(r||e)(y(L),y(bf),y(il))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),bf=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return Fv?.findTestabilityInTree(this,i,r)??null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function hH(t){Fv=t}var Fv,Df=new x("Application Initializer"),YR=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=C(Df,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let s of this.appInits){let o=s();if(xs(o))i.push(o);else if(VR(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(s=>{this.reject(s)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Cf=new x("appBootstrapListener");function fH(){YC(()=>{throw new S(600,!1)})}function pH(t){return t.isBoundToModule}function mH(t,e,n){try{let i=n();return xs(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var hi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=C(rR),this.afterRenderEffectManager=C(Av),this.componentTypes=[],this.components=[],this.isStable=C(Ef).hasPendingTasks.pipe(oe(i=>!i)),this._injector=C(Yt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let s=i instanceof jh;if(!this._injector.get(YR).done){let f=!s&&kS(i),p=!1;throw new S(405,p)}let a;s?a=i:a=this._injector.get(wr).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let c=pH(a)?void 0:this._injector.get(gr),l=r||a.selector,u=a.create(Me.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get(kv,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),By(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new S(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{try{let i=this.afterRenderEffectManager.execute()}catch(i){this.internalErrorHandler(i)}this._runningTick=!1}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;By(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(Cf,[]);[...this._bootstrapListeners,...r].forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>By(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new S(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function By(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var gH=(()=>{let e=class e{constructor(){this.zone=C(L),this.applicationRef=C(hi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yH(t){return[{provide:L,useFactory:t},{provide:ea,multi:!0,useFactory:()=>{let e=C(gH,{optional:!0});return()=>e.initialize()}},{provide:ea,multi:!0,useFactory:()=>{let e=C(EH);return()=>{e.initialize()}}},{provide:rR,useFactory:_H}]}function _H(){let t=C(L),e=C(ii);return n=>t.runOutsideAngular(()=>e.handleError(n))}function vH(t){let e=yH(()=>new L(wH(t)));return sf([[],e])}function wH(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var EH=(()=>{let e=class e{constructor(){this.subscription=new Se,this.initialized=!1,this.zone=C(L),this.pendingTasks=C(Ef)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{L.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{L.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function IH(){return typeof $localize<"u"&&$localize.locale||qh}var da=new x("LocaleId",{providedIn:"root",factory:()=>C(da,he.Optional|he.SkipSelf)||IH()});var ZR=new x("PlatformDestroyListeners");var Sh=null;function bH(t=[],e){return Me.create({name:e,providers:[{provide:of,useValue:"platform"},{provide:ZR,useValue:new Set([()=>Sh=null])},...t]})}function DH(t=[]){if(Sh)return Sh;let e=bH(t);return Sh=e,fH(),CH(e),e}function CH(t){t.get(uv,null)?.forEach(n=>n())}function Mre(){return!1}var XR=(()=>{let e=class e{constructor(i){}};e.\u0275fac=function(r){return new(r||e)(y(hi))},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({});let t=e;return t})();function JR(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=DH(i),s=[vH(),...n||[]],a=new Kh({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(L);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(ii,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:f=>{l.handleError(f)}})});let d=()=>a.destroy(),h=r.get(ZR);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),mH(l,c,()=>{let f=a.get(YR);return f.runInitializers(),f.donePromise.then(()=>{let p=a.get(da,qh);B$(p||qh);let g=a.get(hi);return e!==void 0&&g.bootstrap(e),g})})})}catch(e){return Promise.reject(e)}}function gn(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function ex(t){let e=pr(t);if(!e)return null;let n=new na(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Bv=null;function pi(){return Bv}function ox(t){Bv||(Bv=t)}var Tf=class{},Q=new x("DocumentToken"),zv=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(SH),providedIn:"platform"});let t=e;return t})(),ax=new x("Location Initialized"),SH=(()=>{let e=class e extends zv{constructor(){super(),this._doc=C(Q),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return pi().getBaseHref(this._doc)}onPopState(i){let r=pi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=pi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,s){this._history.pushState(i,r,s)}replaceState(i,r,s){this._history.replaceState(i,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function qv(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function tx(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function Ui(t){return t&&t[0]!=="?"?"?"+t:t}var $i=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(Gv),providedIn:"root"});let t=e;return t})(),cx=new x("appBaseHref"),Gv=(()=>{let e=class e extends $i{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??C(Q).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return qv(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+Ui(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${r}${s}`:r}pushState(i,r,s,o){let a=this.prepareExternalUrl(s+Ui(o));this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){let a=this.prepareExternalUrl(s+Ui(o));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(y(zv),y(cx,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lx=(()=>{let e=class e extends $i{constructor(i,r){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let r=this._platformLocation.hash;return r==null&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(i){let r=qv(this._baseHref,i);return r.length>0?"#"+r:r}pushState(i,r,s,o){let a=this.prepareExternalUrl(s+Ui(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){let a=this.prepareExternalUrl(s+Ui(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(y(zv),y(cx,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),mi=(()=>{let e=class e{constructor(i){this._subject=new Ie,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=xH(tx(nx(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Ui(r))}normalize(i){return e.stripTrailingSlash(RH(this._basePath,nx(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",s=null){this._locationStrategy.pushState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Ui(r)),s)}replaceState(i,r="",s=null){this._locationStrategy.replaceState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Ui(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(s=>s(i,r))}subscribe(i,r,s){return this._subject.subscribe({next:i,error:r,complete:s})}};e.normalizeQueryParams=Ui,e.joinWithSlash=qv,e.stripTrailingSlash=tx,e.\u0275fac=function(r){return new(r||e)(y($i))},e.\u0275prov=D({token:e,factory:()=>AH(),providedIn:"root"});let t=e;return t})();function AH(){return new mi(y($i))}function RH(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function nx(t){return t.replace(/\/index.html$/,"")}function xH(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var ux=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(ux||{});var fi=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t.Infinity=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}(fi||{});function rl(t,e){let n=Ov(t),i=n[aa.NumberSymbols][e];if(typeof i>"u"){if(e===fi.CurrencyDecimal)return n[aa.NumberSymbols][fi.Decimal];if(e===fi.CurrencyGroup)return n[aa.NumberSymbols][fi.Group]}return i}function MH(t,e){return Ov(t)[aa.NumberFormats][e]}var NH=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ix=22,Sf=".",sl="0",PH=";",OH=",",Lv="#";function kH(t,e,n,i,r,s,o=!1){let a="",c=!1;if(!isFinite(t))a=rl(n,fi.Infinity);else{let l=jH(t);o&&(l=VH(l));let u=e.minInt,d=e.minFrac,h=e.maxFrac;if(s){let A=s.match(NH);if(A===null)throw new Error(`${s} is not a valid digit info`);let N=A[1],O=A[3],K=A[5];N!=null&&(u=Vv(N)),O!=null&&(d=Vv(O)),K!=null?h=Vv(K):O!=null&&d>h&&(h=d)}BH(l,d,h);let f=l.digits,p=l.integerLen,g=l.exponent,v=[];for(c=f.every(A=>!A);p<u;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?v=f.splice(p,f.length):(v=f,f=[0]);let E=[];for(f.length>=e.lgSize&&E.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)E.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&E.unshift(f.join("")),a=E.join(rl(n,i)),v.length&&(a+=rl(n,r)+v.join("")),g&&(a+=rl(n,fi.Exponential)+"+"+g)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function FH(t,e,n){let i=MH(e,ux.Decimal),r=LH(i,rl(e,fi.MinusSign));return kH(t,r,e,fi.Group,fi.Decimal,n)}function LH(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(PH),r=i[0],s=i[1],o=r.indexOf(Sf)!==-1?r.split(Sf):[r.substring(0,r.lastIndexOf(sl)+1),r.substring(r.lastIndexOf(sl)+1)],a=o[0],c=o[1]||"";n.posPre=a.substring(0,a.indexOf(Lv));for(let u=0;u<c.length;u++){let d=c.charAt(u);d===sl?n.minFrac=n.maxFrac=u+1:d===Lv?n.maxFrac=u+1:n.posSuf+=d}let l=a.split(OH);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let u=r.length-n.posPre.length-n.posSuf.length,d=s.indexOf(Lv);n.negPre=s.substring(0,d).replace(/'/g,""),n.negSuf=s.slice(d+u).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function VH(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function jH(t){let e=Math.abs(t)+"",n=0,i,r,s,o,a;for((r=e.indexOf(Sf))>-1&&(e=e.replace(Sf,"")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),s=0;e.charAt(s)===sl;s++);if(s===(a=e.length))i=[0],r=1;else{for(a--;e.charAt(a)===sl;)a--;for(r-=s,i=[],o=0;s<=a;s++,o++)i[o]=Number(e.charAt(s))}return r>ix&&(i=i.splice(0,ix-1),n=r-1,r=1),{digits:i,exponent:n,integerLen:r}}function BH(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let i=t.digits,r=i.length-t.integerLen,s=Math.min(Math.max(e,r),n),o=s+t.integerLen,a=i[o];if(o>0){i.splice(Math.max(t.integerLen,o));for(let d=o;d<i.length;d++)i[d]=0}else{r=Math.max(0,r),t.integerLen=1,i.length=Math.max(1,o=s+1),i[0]=0;for(let d=1;d<o;d++)i[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[o-1]++;for(;r<Math.max(0,s);r++)i.push(0);let c=s!==0,l=e+t.integerLen,u=i.reduceRight(function(d,h,f,p){return h=h+d,p[f]=h<10?h:h-10,c&&(p[f]===0&&f>=l?p.pop():c=!1),h>=10?1:0},0);u&&(i.unshift(u),t.integerLen++)}function Vv(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function dx(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,s]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var jv=/\s+/,rx=[],Xre=(()=>{let e=class e{constructor(i,r){this._ngEl=i,this._renderer=r,this.initialClasses=rx,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(jv):rx}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(jv):i}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let r of i)this._updateState(r,!0);else if(i!=null)for(let r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){let s=this.stateMap.get(i);s!==void 0?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let r=i[0],s=i[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(i,r){i=i.trim(),i.length>0&&i.split(jv).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(kn))},e.\u0275dir=me({type:e,selectors:[["","ngClass",""]],inputs:{klass:[fe.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var hx=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new Uv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){sx("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){sx("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(T(mn),T(On))},e.\u0275dir=me({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Uv=class{constructor(){this.$implicit=null,this.ngIf=null}};function sx(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Ot(e)}'.`)}var Jre=(()=>{let e=class e{constructor(i,r,s){this._ngEl=i,this._differs=r,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(i){this._ngStyle=i,!this._differ&&i&&(this._differ=this._differs.find(i).create())}ngDoCheck(){if(this._differ){let i=this._differ.diff(this._ngStyle);i&&this._applyChanges(i)}}_setStyle(i,r){let[s,o]=i.split("."),a=s.indexOf("-")===-1?void 0:ni.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${r}${o}`:r,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(i){i.forEachRemovedItem(r=>this._setStyle(r.key,null)),i.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),i.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(yv),T(kn))},e.\u0275dir=me({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let t=e;return t})(),fx=(()=>{let e=class e{constructor(i){this._viewContainerRef=i,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(i){if(this._shouldRecreateView(i)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let s=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(i){return!!i.ngTemplateOutlet||!!i.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(i,r,s)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,s):!1,get:(i,r,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,s)}})}};e.\u0275fac=function(r){return new(r||e)(T(mn))},e.\u0275dir=me({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[kt]});let t=e;return t})();function UH(t,e){return new S(2100,!1)}var ese=(()=>{let e=class e{constructor(i){this._locale=i}transform(i,r,s){if(!$H(i))return null;s=s||this._locale;try{let o=HH(i);return FH(o,s,r)}catch(o){throw UH(e,o.message)}}};e.\u0275fac=function(r){return new(r||e)(T(da,16))},e.\u0275pipe=NS({name:"number",type:e,pure:!0,standalone:!0});let t=e;return t})();function $H(t){return!(t==null||t===""||t!==t)}function HH(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var Ns=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({});let t=e;return t})(),Wv="browser",zH="server";function Kv(t){return t===Wv}function Qv(t){return t===zH}var px=(()=>{let e=class e{};e.\u0275prov=D({token:e,providedIn:"root",factory:()=>Kv(C(pn))?new $v(C(Q),window):new Hv});let t=e;return t})(),$v=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=qH(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}};function qH(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let s=r.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}var Hv=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Af=class{};var Xv=class extends Tf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Jv=class t extends Xv{static makeCurrent(){ox(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=GH();return n==null?null:WH(n)}resetBaseElement(){ol=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return dx(document.cookie,e)}},ol=null;function GH(){return ol=ol||document.querySelector("base"),ol?ol.getAttribute("href"):null}function WH(t){return new URL(t,document.baseURI).pathname}var ew=class{addToWindow(e){et.getAngularTestability=(i,r=!0)=>{let s=e.findTestabilityInTree(i,r);if(s==null)throw new S(5103,!1);return s},et.getAllAngularTestabilities=()=>e.getAllTestabilities(),et.getAllAngularRootElements=()=>e.getAllRootElements();let n=i=>{let r=et.getAllAngularTestabilities(),s=r.length,o=function(){s--,s==0&&i()};r.forEach(a=>{a.whenStable(o)})};et.frameworkStabilizers||(et.frameworkStabilizers=[]),et.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,i){if(n==null)return null;let r=e.getTestability(n);return r??(i?pi().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},KH=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),xf=new x("EventManagerPlugins"),yx=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new S(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(y(xf),y(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),al=class{constructor(e){this._doc=e}},Yv="ng-app-id",_x=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Qv(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Yv}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(Yv),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Yv,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(y(Q),y(Yc),y(Zc,8),y(pn))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),Zv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},iw=/%COMP%/g,vx="%COMP%",QH=`_nghost-${vx}`,YH=`_ngcontent-${vx}`,ZH=!0,XH=new x("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>ZH});function JH(t){return YH.replace(iw,t)}function ez(t){return QH.replace(iw,t)}function wx(t,e){return e.map(n=>n.replace(iw,t))}var Mf=(()=>{let e=class e{constructor(i,r,s,o,a,c,l,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Qv(c),this.defaultRenderer=new cl(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Jn.ShadowDom&&(r=ye(I({},r),{encapsulation:Jn.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof Nf?s.applyToHost(i):s instanceof ll&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Jn.Emulated:o=new Nf(l,u,r,this.appId,d,a,c,h);break;case Jn.ShadowDom:return new tw(l,u,i,r,a,c,this.nonce,h);default:o=new ll(l,u,r,d,a,c,h);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(y(yx),y(_x),y(Yc),y(XH),y(Q),y(pn),y(L),y(Zc))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),cl=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Zv[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(mx(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(mx(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new S(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let s=Zv[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=Zv[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(ni.DashCase|ni.Important)?e.style.setProperty(n,i,r&ni.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&ni.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=pi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function mx(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var tw=class extends cl{constructor(e,n,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=wx(r.id,r.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ll=class extends cl{constructor(e,n,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?wx(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Nf=class extends ll{constructor(e,n,i,r,s,o,a,c){let l=r+"-"+i.id;super(e,n,i,s,o,a,c,l),this.contentAttr=JH(l),this.hostAttr=ez(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},tz=(()=>{let e=class e extends al{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(y(Q))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),gx=["alt","control","meta","shift"],nz={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},iz={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},rz=(()=>{let e=class e extends al{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>pi().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),gx.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let s=nz[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),gx.forEach(a=>{if(a!==s){let c=iz[a];c(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(y(Q))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function wse(t,e){return JR(I({rootComponent:t},sz(e)))}function sz(t){return{appProviders:[...Ex,...t?.providers??[]],platformProviders:lz}}function oz(){Jv.makeCurrent()}function az(){return new ii}function cz(){return RA(document),document}var lz=[{provide:pn,useValue:Wv},{provide:uv,useValue:oz,multi:!0},{provide:Q,useFactory:cz,deps:[]}];var uz=new x(""),dz=[{provide:il,useClass:ew,deps:[]},{provide:kv,useClass:If,deps:[L,bf,il]},{provide:If,useClass:If,deps:[L,bf,il]}],Ex=[{provide:of,useValue:"root"},{provide:ii,useFactory:az,deps:[]},{provide:xf,useClass:tz,multi:!0,deps:[Q,L,pn]},{provide:xf,useClass:rz,multi:!0,deps:[Q]},Mf,_x,yx,{provide:bs,useExisting:Mf},{provide:Af,useClass:KH,deps:[]},[]],Ix=(()=>{let e=class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:Yc,useValue:i.appId}]}}};e.\u0275fac=function(r){return new(r||e)(y(uz,12))},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({providers:[...Ex,...dz],imports:[Ns,XR]});let t=e;return t})();function hz(){return new rw(y(Q))}var rw=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(y(Q))},e.\u0275prov=D({token:e,factory:function(r){let s=null;return r?s=new r:s=hz(),s},providedIn:"root"});let t=e;return t})();var fz={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},nw=new x("HammerGestureConfig"),bx=new x("HammerLoader"),pz=(()=>{let e=class e{constructor(){this.events=[],this.overrides={}}buildHammer(i){let r=new Hammer(i,this.options);r.get("pinch").set({enable:!0}),r.get("rotate").set({enable:!0});for(let s in this.overrides)r.get(s).set(this.overrides[s]);return r}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),mz=(()=>{let e=class e extends al{constructor(i,r,s,o){super(i),this._config=r,this.console=s,this.loader=o,this._loaderPromise=null}supports(i){return!(!fz.hasOwnProperty(i.toLowerCase())&&!this.isCustomEvent(i)||!window.Hammer&&!this.loader)}addEventListener(i,r,s){let o=this.manager.getZone();if(r=r.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||o.runOutsideAngular(()=>this.loader());let a=!1,c=()=>{a=!0};return o.runOutsideAngular(()=>this._loaderPromise.then(()=>{if(!window.Hammer){c=()=>{};return}a||(c=this.addEventListener(i,r,s))}).catch(()=>{c=()=>{}})),()=>{c()}}return o.runOutsideAngular(()=>{let a=this._config.buildHammer(i),c=function(l){o.runGuarded(function(){s(l)})};return a.on(r,c),()=>{a.off(r,c),typeof a.destroy=="function"&&a.destroy()}})}isCustomEvent(i){return this._config.events.indexOf(i)>-1}};e.\u0275fac=function(r){return new(r||e)(y(Q),y(nw),y(ua),y(bx,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),Ese=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({providers:[{provide:xf,useClass:mz,multi:!0,deps:[Q,nw,ua,[new mt,bx]]},{provide:nw,useClass:pz,deps:[]}]});let t=e;return t})();var le="primary",Cl=Symbol("RouteTitle"),lw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ga(t){return new lw(t)}function yz(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=t[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function _z(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!gi(t[n],e[n]))return!1;return!0}function gi(t,e){let n=t?uw(t):void 0,i=e?uw(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!Nx(t[r],e[r]))return!1;return!0}function uw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Nx(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,s)=>i[s]===r)}else return t===e}function Tr(t){return ch(t)?t:xs(t)?Pe(Promise.resolve(t)):H(t)}var vz={exact:Ox,subset:kx},Px={exact:wz,subset:Ez,ignored:()=>!0};function Dx(t,e,n){return vz[n.paths](t.root,e.root,n.matrixParams)&&Px[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function wz(t,e){return gi(t,e)}function Ox(t,e,n){if(!Os(t.segments,e.segments)||!kf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!Ox(t.children[i],e.children[i],n))return!1;return!0}function Ez(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Nx(t[n],e[n]))}function kx(t,e,n){return Fx(t,e,e.segments,n)}function Fx(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!Os(r,n)||e.hasChildren()||!kf(r,n,i))}else if(t.segments.length===n.length){if(!Os(t.segments,n)||!kf(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!kx(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Os(t.segments,r)||!kf(t.segments,r,i)||!t.children[le]?!1:Fx(t.children[le],e,s,i)}}function kf(t,e,n){return e.every((i,r)=>Px[n](t[r].parameters,i.parameters))}var Ir=class{constructor(e=new be([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=ga(this.queryParams),this._queryParamMap}toString(){return Dz.serialize(this)}},be=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ff(this)}},Ps=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ga(this.parameters),this._parameterMap}toString(){return Vx(this)}};function Iz(t,e){return Os(t,e)&&t.every((n,i)=>gi(n.parameters,e[i].parameters))}function Os(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function bz(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===le&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==le&&(n=n.concat(e(r,i)))}),n}var Tl=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>new gl,providedIn:"root"});let t=e;return t})(),gl=class{parse(e){let n=new hw(e);return new Ir(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ul(e.root,!0)}`,i=Sz(e.queryParams),r=typeof e.fragment=="string"?`#${Cz(e.fragment)}`:"";return`${n}${i}${r}`}},Dz=new gl;function Ff(t){return t.segments.map(e=>Vx(e)).join("/")}function ul(t,e){if(!t.hasChildren())return Ff(t);if(e){let n=t.children[le]?ul(t.children[le],!1):"",i=[];return Object.entries(t.children).forEach(([r,s])=>{r!==le&&i.push(`${r}:${ul(s,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=bz(t,(i,r)=>r===le?[ul(t.children[le],!1)]:[`${r}:${ul(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[le]!=null?`${Ff(t)}/${n[0]}`:`${Ff(t)}/(${n.join("//")})`}}function Lx(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pf(t){return Lx(t).replace(/%3B/gi,";")}function Cz(t){return encodeURI(t)}function dw(t){return Lx(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lf(t){return decodeURIComponent(t)}function Cx(t){return Lf(t.replace(/\+/g,"%20"))}function Vx(t){return`${dw(t.path)}${Tz(t.parameters)}`}function Tz(t){return Object.entries(t).map(([e,n])=>`;${dw(e)}=${dw(n)}`).join("")}function Sz(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${Pf(n)}=${Pf(r)}`).join("&"):`${Pf(n)}=${Pf(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Az=/^[^\/()?;#]+/;function sw(t){let e=t.match(Az);return e?e[0]:""}var Rz=/^[^\/()?;=#]+/;function xz(t){let e=t.match(Rz);return e?e[0]:""}var Mz=/^[^=?&#]+/;function Nz(t){let e=t.match(Mz);return e?e[0]:""}var Pz=/^[^&#]+/;function Oz(t){let e=t.match(Pz);return e?e[0]:""}var hw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new be([],{}):new be([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[le]=new be(e,n)),i}parseSegment(){let e=sw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(e),new Ps(Lf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=xz(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=sw(this.remaining);r&&(i=r,this.capture(i))}e[Lf(n)]=Lf(i)}parseQueryParam(e){let n=Nz(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=Oz(this.remaining);o&&(i=o,this.capture(i))}let r=Cx(n),s=Cx(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=sw(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new S(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=le);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[le]:new be([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new S(4011,!1)}};function jx(t){return t.segments.length>0?new be([],{[le]:t}):t}function Bx(t){let e={};for(let[i,r]of Object.entries(t.children)){let s=Bx(r);if(i===le&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let n=new be(t.segments,e);return kz(n)}function kz(t){if(t.numberOfChildren===1&&t.children[le]){let e=t.children[le];return new be(t.segments.concat(e.segments),e.children)}return t}function ya(t){return t instanceof Ir}function Fz(t,e,n=null,i=null){let r=Ux(t);return $x(r,e,n,i)}function Ux(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new be(s.url,o);return s===t&&(e=a),a}let i=n(t.root),r=jx(i);return e??r}function $x(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return ow(r,r,r,n,i);let s=Lz(e);if(s.toRoot())return ow(r,r,new be([],{}),n,i);let o=Vz(s,r,t),a=o.processChildren?fl(o.segmentGroup,o.index,s.commands):zx(o.segmentGroup,o.index,s.commands);return ow(r,o.segmentGroup,a,n,i)}function Vf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function yl(t){return typeof t=="object"&&t!=null&&t.outlets}function ow(t,e,n,i,r){let s={};i&&Object.entries(i).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;t===e?o=n:o=Hx(t,e,n);let a=jx(Bx(o));return new Ir(a,s,r)}function Hx(t,e,n){let i={};return Object.entries(t.children).forEach(([r,s])=>{s===e?i[r]=n:i[r]=Hx(s,e,n)}),new be(t.segments,i)}var jf=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&Vf(i[0]))throw new S(4003,!1);let r=i.find(yl);if(r&&r!==i.at(-1))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Lz(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new jf(!0,0,t);let e=0,n=!1,i=t.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new jf(n,e,i)}var pa=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function Vz(t,e,n){if(t.isAbsolute)return new pa(e,!0,0);if(!n)return new pa(e,!1,NaN);if(n.parent===null)return new pa(n,!0,0);let i=Vf(t.commands[0])?0:1,r=n.segments.length-1+i;return jz(n,r,t.numberOfDoubleDots)}function jz(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new S(4005,!1);r=i.segments.length}return new pa(i,!1,r-s)}function Bz(t){return yl(t[0])?t[0].outlets:{[le]:t}}function zx(t,e,n){if(t??=new be([],{}),t.segments.length===0&&t.hasChildren())return fl(t,e,n);let i=Uz(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let s=new be(t.segments.slice(0,i.pathIndex),{});return s.children[le]=new be(t.segments.slice(i.pathIndex),t.children),fl(s,0,r)}else return i.match&&r.length===0?new be(t.segments,{}):i.match&&!t.hasChildren()?fw(t,e,n):i.match?fl(t,0,r):fw(t,e,n)}function fl(t,e,n){if(n.length===0)return new be(t.segments,{});{let i=Bz(n),r={};if(Object.keys(i).some(s=>s!==le)&&t.children[le]&&t.numberOfChildren===1&&t.children[le].segments.length===0){let s=fl(t.children[le],e,n);return new be(t.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=zx(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new be(t.segments,r)}}function Uz(t,e,n){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;let o=t.segments[r],a=n[i];if(yl(a))break;let c=`${a}`,l=i<n.length-1?n[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Sx(c,l,o))return s;i+=2}else{if(!Sx(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function fw(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let s=n[r];if(yl(s)){let c=$z(s.outlets);return new be(i,c)}if(r===0&&Vf(n[0])){let c=t.segments[e];i.push(new Ps(c.path,Tx(n[0]))),r++;continue}let o=yl(s)?s.outlets[le]:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&Vf(a)?(i.push(new Ps(o,Tx(a))),r+=2):(i.push(new Ps(o,{})),r++)}return new be(i,{})}function $z(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=fw(new be([],{}),0,i))}),e}function Tx(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function Sx(t,e,n){return t==n.path&&gi(e,n.parameters)}var pl="imperative",ct=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ct||{}),_n=class{constructor(e,n){this.id=e,this.url=n}},_a=class extends _n{constructor(e,n,i="imperative",r=null){super(e,n),this.type=ct.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},yi=class extends _n{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=ct.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},yn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(yn||{}),Bf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Bf||{}),br=class extends _n{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=ct.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Dr=class extends _n{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=ct.NavigationSkipped}},_l=class extends _n{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=ct.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Uf=class extends _n{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=ct.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pw=class extends _n{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=ct.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mw=class extends _n{constructor(e,n,i,r,s){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=ct.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},gw=class extends _n{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=ct.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yw=class extends _n{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=ct.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_w=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},vw=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ww=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ew=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Iw=class{constructor(e){this.snapshot=e,this.type=ct.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bw=class{constructor(e){this.snapshot=e,this.type=ct.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$f=class{constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i,this.type=ct.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},vl=class{},wl=class{constructor(e){this.url=e}};var Dw=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Sl,this.attachRef=null}},Sl=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new Dw,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Hf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Cw(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=Cw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Tw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Tw(e,this._root).map(n=>n.value)}};function Cw(t,e){if(t===e.value)return e;for(let n of e.children){let i=Cw(t,n);if(i)return i}return null}function Tw(t,e){if(t===e.value)return[e];for(let n of e.children){let i=Tw(t,n);if(i.length)return i.unshift(e),i}return[]}var Jt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function fa(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var zf=class extends Hf{constructor(e,n){super(e),this.snapshot=n,Fw(this,e)}toString(){return this.snapshot.toString()}};function qx(t){let e=Hz(t),n=new Ke([new Ps("",{})]),i=new Ke({}),r=new Ke({}),s=new Ke({}),o=new Ke(""),a=new Cr(n,i,s,o,r,le,t,e.root);return a.snapshot=e.root,new zf(new Jt(a,[]),e)}function Hz(t){let e={},n={},i={},r="",s=new El([],e,i,r,n,le,t,null,{});return new qf("",new Jt(s,[]))}var Cr=class{constructor(e,n,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(oe(l=>l[Cl]))??H(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>ga(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>ga(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function kw(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:I(I({},e.params),t.params),data:I(I({},e.data),t.data),resolve:I(I(I(I({},t.data),e.data),r?.data),t._resolvedData)}:i={params:I({},t.params),data:I({},t.data),resolve:I(I({},t.data),t._resolvedData??{})},r&&Wx(r)&&(i.resolve[Cl]=r.title),i}var El=class{get title(){return this.data?.[Cl]}constructor(e,n,i,r,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ga(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ga(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},qf=class extends Hf{constructor(e,n){super(n),this.url=e,Fw(this,n)}toString(){return Gx(this._root)}};function Fw(t,e){e.value._routerState=t,e.children.forEach(n=>Fw(t,n))}function Gx(t){let e=t.children.length>0?` { ${t.children.map(Gx).join(", ")} } `:"";return`${t.value}${e}`}function aw(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,gi(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),gi(e.params,n.params)||t.paramsSubject.next(n.params),_z(e.url,n.url)||t.urlSubject.next(n.url),gi(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Sw(t,e){let n=gi(t.params,e.params)&&Iz(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||Sw(t.parent,e.parent))}function Wx(t){return typeof t.title=="string"||t.title===null}var zz=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=le,this.activateEvents=new Ie,this.deactivateEvents=new Ie,this.attachEvents=new Ie,this.detachEvents=new Ie,this.parentContexts=C(Sl),this.location=C(mn),this.changeDetector=C(ci),this.environmentInjector=C(Yt),this.inputBinder=C(Qf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Aw(i,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=me({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[kt]});let t=e;return t})(),Aw=class{constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===Cr?this.route:e===Sl?this.childContexts:this.parent.get(e,n)}},Qf=new x(""),Ax=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,s=hs([r.queryParams,r.params,r.data]).pipe(Qt(([o,a,c],l)=>(c=I(I(I({},o),a),c),l===0?H(c):Promise.resolve(c)))).subscribe(o=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let a=ex(r.component);if(!a){this.unsubscribeFromRouteData(i);return}for(let{templateName:c}of a.inputs)i.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(i,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function qz(t,e,n){let i=Il(t,e._root,n?n._root:void 0);return new zf(i,e)}function Il(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=Gz(t,e,n);return new Jt(i,r)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Il(t,a)),o}}let i=Wz(e.value),r=e.children.map(s=>Il(t,s));return new Jt(i,r)}}function Gz(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Il(t,i,r);return Il(t,i)})}function Wz(t){return new Cr(new Ke(t.url),new Ke(t.params),new Ke(t.queryParams),new Ke(t.fragment),new Ke(t.data),t.outlet,t.component,t)}var Kx="ngNavigationCancelingError";function Qx(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=ya(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Yx(!1,yn.Redirect,e);return r.url=n,r.navigationBehaviorOptions=i,r}function Yx(t,e,n){let i=new Error("NavigationCancelingError: "+(t||""));return i[Kx]=!0,i.cancellationCode=e,n&&(i.url=n),i}function Kz(t){return Zx(t)&&ya(t.url)}function Zx(t){return t&&t[Kx]}var Qz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=si({type:e,selectors:[["ng-component"]],standalone:!0,features:[di],decls:1,vars:0,template:function(r,s){r&1&&Er(0,"router-outlet")},dependencies:[zz],encapsulation:2});let t=e;return t})();function Yz(t,e){return t.providers&&!t._injector&&(t._injector=vf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Lw(t){let e=t.children&&t.children.map(Lw),n=e?ye(I({},t),{children:e}):I({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==le&&(n.component=Qz),n}function _i(t){return t.outlet||le}function Zz(t,e){let n=t.filter(i=>_i(i)===e);return n.push(...t.filter(i=>_i(i)!==e)),n}function Al(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Xz=(t,e,n,i)=>oe(r=>(new Rw(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),Rw=class{constructor(e,n,i,r,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),aw(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=fa(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=fa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=fa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=fa(n);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new bw(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Ew(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(aw(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),aw(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Al(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}},Gf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ma=class{constructor(e,n){this.component=e,this.route=n}};function Jz(t,e,n){let i=t._root,r=e?e._root:null;return dl(i,r,n,[i.value])}function eq(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function wa(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!wS(t)?t:e.get(t):i}function dl(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=fa(e);return t.children.forEach(o=>{tq(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ml(a,n.getContext(o),r)),r}function tq(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=nq(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Gf(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?dl(t,e,a?a.children:null,i,r):dl(t,e,n,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new ma(a.outlet.component,o))}else o&&ml(e,a,r),r.canActivateChecks.push(new Gf(i)),s.component?dl(t,null,a?a.children:null,i,r):dl(t,null,n,i,r);return r}function nq(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Os(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Os(t.url,e.url)||!gi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sw(t,e)||!gi(t.queryParams,e.queryParams);case"paramsChange":default:return!Sw(t,e)}}function ml(t,e,n){let i=fa(t),r=t.value;Object.entries(i).forEach(([s,o])=>{r.component?e?ml(o,e.children.getContext(s),n):ml(o,null,n):ml(o,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ma(e.outlet.component,r)):n.canDeactivateChecks.push(new ma(null,r)):n.canDeactivateChecks.push(new ma(null,r))}function Rl(t){return typeof t=="function"}function iq(t){return typeof t=="boolean"}function rq(t){return t&&Rl(t.canLoad)}function sq(t){return t&&Rl(t.canActivate)}function oq(t){return t&&Rl(t.canActivateChild)}function aq(t){return t&&Rl(t.canDeactivate)}function cq(t){return t&&Rl(t.canMatch)}function Xx(t){return t instanceof Oi||t?.name==="EmptyError"}var Of=Symbol("INITIAL_VALUE");function va(){return Qt(t=>hs(t.map(e=>e.pipe(Be(1),xn(Of)))).pipe(oe(e=>{for(let n of e)if(n!==!0){if(n===Of)return Of;if(n===!1||n instanceof Ir)return n}return!0}),ke(e=>e!==Of),Be(1)))}function lq(t,e){return Ve(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?H(ye(I({},n),{guardsResult:!0})):uq(o,i,r,t).pipe(Ve(a=>a&&iq(a)?dq(i,s,t,e):H(a)),oe(a=>ye(I({},n),{guardsResult:a})))})}function uq(t,e,n,i){return Pe(t).pipe(Ve(r=>gq(r.component,r.route,n,e,i)),Kn(r=>r!==!0,!0))}function dq(t,e,n,i){return Pe(e).pipe(fs(r=>Wn(fq(r.route.parent,i),hq(r.route,i),mq(t,r.path,n),pq(t,r.route,n))),Kn(r=>r!==!0,!0))}function hq(t,e){return t!==null&&e&&e(new Iw(t)),H(!0)}function fq(t,e){return t!==null&&e&&e(new ww(t)),H(!0)}function pq(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return H(!0);let r=i.map(s=>lr(()=>{let o=Al(e)??n,a=wa(s,o),c=sq(a)?a.canActivate(e,t):vr(o,()=>a(e,t));return Tr(c).pipe(Kn())}));return H(r).pipe(va())}function mq(t,e,n){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>eq(o)).filter(o=>o!==null).map(o=>lr(()=>{let a=o.guards.map(c=>{let l=Al(o.node)??n,u=wa(c,l),d=oq(u)?u.canActivateChild(i,t):vr(l,()=>u(i,t));return Tr(d).pipe(Kn())});return H(a).pipe(va())}));return H(s).pipe(va())}function gq(t,e,n,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return H(!0);let o=s.map(a=>{let c=Al(e)??r,l=wa(a,c),u=aq(l)?l.canDeactivate(t,e,n,i):vr(c,()=>l(t,e,n,i));return Tr(u).pipe(Kn())});return H(o).pipe(va())}function yq(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return H(!0);let s=r.map(o=>{let a=wa(o,t),c=rq(a)?a.canLoad(e,n):vr(t,()=>a(e,n));return Tr(c)});return H(s).pipe(va(),Jx(i))}function Jx(t){return Hd(Qe(e=>{if(ya(e))throw Qx(t,e)}),oe(e=>e===!0))}function _q(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return H(!0);let s=r.map(o=>{let a=wa(o,t),c=cq(a)?a.canMatch(e,n):vr(t,()=>a(e,n));return Tr(c)});return H(s).pipe(va(),Jx(i))}var bl=class{constructor(e){this.segmentGroup=e||null}},Wf=class extends Error{constructor(e){super(),this.urlTree=e}};function ha(t){return jo(new bl(t))}function vq(t){return jo(new S(4e3,!1))}function wq(t){return jo(Yx(!1,yn.GuardRejected))}var xw=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return H(i);if(r.numberOfChildren>1||!r.children[le])return vq(e.redirectTo);r=r.children[le]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new Wf(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let s=this.createSegmentGroup(e,n.root,i,r);return new Ir(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[r]=n[a]}else i[r]=s}),i}createSegmentGroup(e,n,i,r){let s=this.createSegments(e,n.segments,i,r),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new be(s,o)}createSegments(e,n,i,r){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new S(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},Mw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Eq(t,e,n,i,r){let s=Vw(t,e,n);return s.matched?(i=Yz(e,i),_q(i,e,n,r).pipe(oe(o=>o===!0?s:I({},Mw)))):H(s)}function Vw(t,e,n){if(e.path==="**")return Iq(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?I({},Mw):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||yz)(n,t,e);if(!r)return I({},Mw);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?I(I({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function Iq(t){return{matched:!0,parameters:t.at(-1)?.parameters??{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Rx(t,e,n,i){return n.length>0&&Cq(t,n,i)?{segmentGroup:new be(e,Dq(i,new be(n,t.children))),slicedSegments:[]}:n.length===0&&Tq(t,n,i)?{segmentGroup:new be(t.segments,bq(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new be(t.segments,t.children),slicedSegments:n}}function bq(t,e,n,i){let r={};for(let s of n)if(Yf(t,e,s)&&!i[_i(s)]){let o=new be([],{});r[_i(s)]=o}return I(I({},i),r)}function Dq(t,e){let n={};n[le]=e;for(let i of t)if(i.path===""&&_i(i)!==le){let r=new be([],{});n[_i(i)]=r}return n}function Cq(t,e,n){return n.some(i=>Yf(t,e,i)&&_i(i)!==le)}function Tq(t,e,n){return n.some(i=>Yf(t,e,i))}function Yf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Sq(t,e,n,i){return _i(t)!==i&&(i===le||!Yf(e,n,t))?!1:Vw(e,t,n).matched}function Aq(t,e,n){return e.length===0&&!t.children[n]}var Nw=class{};function Rq(t,e,n,i,r,s,o="emptyOnly"){return new Pw(t,e,n,i,r,o,s).recognize()}var xq=31,Pw=class{constructor(e,n,i,r,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new xw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new S(4002,`'${e.segmentGroup}'`)}recognize(){let e=Rx(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(n=>{let i=new El([],Object.freeze({}),Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,{},le,this.rootComponentType,null,{}),r=new Jt(i,n),s=new qf("",r),o=Fz(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,le).pipe(ur(i=>{if(i instanceof Wf)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof bl?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=kw(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(oe(s=>s instanceof Jt?[s]:[]))}processChildren(e,n,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return Pe(r).pipe(fs(s=>{let o=i.children[s],a=Zz(n,s);return this.processSegmentGroup(e,a,o,s)}),mh((s,o)=>(s.push(...o),s)),dr(null),Iy(),Ve(s=>{if(s===null)return ha(i);let o=eM(s);return Mq(o),H(o)}))}processSegment(e,n,i,r,s,o){return Pe(n).pipe(fs(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,i,r,s,o).pipe(ur(c=>{if(c instanceof bl)return H(null);throw c}))),Kn(a=>!!a),ur(a=>{if(Xx(a))return Aq(i,r,s)?H(new Nw):ha(i);throw a}))}processSegmentAgainstRoute(e,n,i,r,s,o,a){return Sq(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,s,o):ha(r):ha(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=Vw(n,r,s);if(!a)return ha(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>xq&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,d).pipe(Ve(h=>this.processSegment(e,i,n,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,i,r,s){let o=Eq(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),o.pipe(Qt(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Qt(({routes:c})=>{let l=i._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new El(u,h,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,Pq(i),_i(i),i.component??i._loadedComponent??null,i,Oq(i)),{segmentGroup:p,slicedSegments:g}=Rx(n,u,d,c);if(g.length===0&&p.hasChildren())return this.processChildren(l,c,p).pipe(oe(E=>E===null?null:new Jt(f,E)));if(c.length===0&&g.length===0)return H(new Jt(f,[]));let v=_i(i)===s;return this.processSegment(l,c,p,g,v?le:s,!0).pipe(oe(E=>new Jt(f,E instanceof Jt?[E]:[])))}))):ha(n)))}getChildConfig(e,n,i){return n.children?H({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?H({routes:n._loadedRoutes,injector:n._loadedInjector}):yq(e,n,i,this.urlSerializer).pipe(Ve(r=>r?this.configLoader.loadChildren(e,n).pipe(Qe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):wq(n))):H({routes:[],injector:e})}};function Mq(t){t.sort((e,n)=>e.value.outlet===le?-1:n.value.outlet===le?1:e.value.outlet.localeCompare(n.value.outlet))}function Nq(t){let e=t.value.routeConfig;return e&&e.path===""}function eM(t){let e=[],n=new Set;for(let i of t){if(!Nq(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=eM(i.children);e.push(new Jt(i.value,r))}return e.filter(i=>!n.has(i))}function Pq(t){return t.data||{}}function Oq(t){return t.resolve||{}}function kq(t,e,n,i,r,s){return Ve(o=>Rq(t,e,n,i,o.extractedUrl,r,s).pipe(oe(({state:a,tree:c})=>ye(I({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function Fq(t,e){return Ve(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return H(n);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of tM(c))o.add(l);let a=0;return Pe(o).pipe(fs(c=>s.has(c)?Lq(c,i,t,e):(c.data=kw(c,c.parent,t).resolve,H(void 0))),Qe(()=>a++),$o(1),Ve(c=>a===o.size?H(n):Ut))})}function tM(t){let e=t.children.map(n=>tM(n)).flat();return[t,...e]}function Lq(t,e,n,i){let r=t.routeConfig,s=t._resolve;return r?.title!==void 0&&!Wx(r)&&(s[Cl]=r.title),Vq(s,t,e,i).pipe(oe(o=>(t._resolvedData=o,t.data=kw(t,t.parent,n).resolve,null)))}function Vq(t,e,n,i){let r=uw(t);if(r.length===0)return H({});let s={};return Pe(r).pipe(Ve(o=>jq(t[o],e,n,i).pipe(Kn(),Qe(a=>{s[o]=a}))),$o(1),Rc(s),ur(o=>Xx(o)?Ut:jo(o)))}function jq(t,e,n,i){let r=Al(e)??i,s=wa(t,r),o=s.resolve?s.resolve(e,n):vr(r,()=>s(e,n));return Tr(o)}function cw(t){return Qt(e=>{let n=t(e);return n?Pe(n).pipe(oe(()=>e)):H(e)})}var nM=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===le);return r}getResolvedTitleForRoute(i){return i.data[Cl]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(Bq),providedIn:"root"});let t=e;return t})(),Bq=(()=>{let e=class e extends nM{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(y(rw))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xl=new x("",{providedIn:"root",factory:()=>({})}),Dl=new x("ROUTES"),jw=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=C(wf)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return H(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Tr(i.loadComponent()).pipe(oe(iM),Qe(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Mc(()=>{this.componentLoaders.delete(i)})),s=new ir(r,()=>new q).pipe(ko());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return H({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Uq(r,this.compiler,i,this.onLoadEndListener).pipe(Mc(()=>{this.childrenLoaders.delete(r)})),a=new ir(o,()=>new q).pipe(ko());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Uq(t,e,n,i){return Tr(t.loadChildren()).pipe(oe(iM),Ve(r=>r instanceof qc||Array.isArray(r)?H(r):Pe(e.compileModuleAsync(r))),oe(r=>{i&&i(t);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(n).injector,o=s.get(Dl,[],{optional:!0,self:!0}).flat()),{routes:o.map(Lw),injector:s}}))}function $q(t){return t&&typeof t=="object"&&"default"in t}function iM(t){return $q(t)?t.default:t}var Bw=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(Hq),providedIn:"root"});let t=e;return t})(),Hq=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rM=new x(""),sM=new x("");function zq(t,e,n){let i=t.get(sM),r=t.get(Q);return t.get(L).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(l=>{s=l}),a=r.startViewTransition(()=>(s(),qq(t))),{onViewTransitionCreated:c}=i;return c&&vr(t,()=>c({transition:a,from:e,to:n})),o})}function qq(t){return new Promise(e=>{Sv(e,{injector:t})})}var Uw=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new q,this.transitionAbortSubject=new q,this.configLoader=C(jw),this.environmentInjector=C(Yt),this.urlSerializer=C(Tl),this.rootContexts=C(Sl),this.location=C(mi),this.inputBindingEnabled=C(Qf,{optional:!0})!==null,this.titleStrategy=C(nM),this.options=C(xl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=C(Bw),this.createViewTransition=C(rM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>H(void 0),this.rootComponentType=null;let i=s=>this.events.next(new _w(s)),r=s=>this.events.next(new vw(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(ye(I(I({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new Ke({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:pl,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ke(o=>o.id!==0),oe(o=>ye(I({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Qt(o=>{this.currentTransition=o;let a=!1,c=!1;return H(o).pipe(Qe(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ye(I({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Qt(l=>{let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Dr(l.id,this.urlSerializer.serialize(l.rawUrl),h,Bf.IgnoredSameUrlNavigation)),l.resolve(null),Ut}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return H(l).pipe(Qt(h=>{let f=this.transitions?.getValue();return this.events.next(new _a(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Ut:Promise.resolve(h)}),kq(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Qe(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ye(I({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Uf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:g,extras:v}=l,E=new _a(h,this.urlSerializer.serialize(f),p,g);this.events.next(E);let A=qx(this.rootComponentType).snapshot;return this.currentTransition=o=ye(I({},l),{targetSnapshot:A,urlAfterRedirects:f,extras:ye(I({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,H(o)}else{let h="";return this.events.next(new Dr(l.id,this.urlSerializer.serialize(l.extractedUrl),h,Bf.IgnoredByUrlHandlingStrategy)),l.resolve(null),Ut}}),Qe(l=>{let u=new pw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),oe(l=>(this.currentTransition=o=ye(I({},l),{guards:Jz(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),lq(this.environmentInjector,l=>this.events.next(l)),Qe(l=>{if(o.guardsResult=l.guardsResult,ya(l.guardsResult))throw Qx(this.urlSerializer,l.guardsResult);let u=new mw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),ke(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",yn.GuardRejected),!1)),cw(l=>{if(l.guards.canActivateChecks.length)return H(l).pipe(Qe(u=>{let d=new gw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Qt(u=>{let d=!1;return H(u).pipe(Fq(this.paramsInheritanceStrategy,this.environmentInjector),Qe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",yn.NoDataFromResolver)}}))}),Qe(u=>{let d=new yw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),cw(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Qe(f=>{d.component=f}),oe(()=>{})));for(let f of d.children)h.push(...u(f));return h};return hs(u(l.targetSnapshot.root)).pipe(dr(null),Be(1))}),cw(()=>this.afterPreactivation()),Qt(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?Pe(d).pipe(oe(()=>o)):H(o)}),oe(l=>{let u=qz(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ye(I({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),Qe(()=>{this.events.next(new vl)}),Xz(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Be(1),Qe({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new yi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Qn(this.transitionAbortSubject.pipe(Qe(l=>{throw l}))),Mc(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",yn.SupersededByNewNavigation),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),ur(l=>{if(c=!0,Zx(l))this.events.next(new br(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),Kz(l)?this.events.next(new wl(l.url)):o.resolve(!1);else{this.events.next(new _l(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Ut}))}))}cancelNavigationTransition(i,r,s){let o=new br(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Gq(t){return t!==pl}var Wq=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(Kq),providedIn:"root"});let t=e;return t})(),Ow=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Kq=(()=>{let e=class e extends Ow{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ai(e)))(s||e)}})(),e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),oM=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(Qq),providedIn:"root"});let t=e;return t})(),Qq=(()=>{let e=class e extends oM{constructor(){super(...arguments),this.location=C(mi),this.urlSerializer=C(Tl),this.options=C(xl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=C(Bw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ir,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=qx(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof _a)this.stateMemento=this.createStateMemento();else if(i instanceof Dr)this.rawUrlTree=r.initialUrl;else if(i instanceof Uf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof vl?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof br&&(i.code===yn.GuardRejected||i.code===yn.NoDataFromResolver)?this.restoreHistory(r):i instanceof _l?this.restoreHistory(r,!0):i instanceof yi&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=I(I({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=I(I({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ai(e)))(s||e)}})(),e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hl=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(hl||{});function aM(t,e){t.events.pipe(ke(n=>n instanceof yi||n instanceof br||n instanceof _l||n instanceof Dr),oe(n=>n instanceof yi||n instanceof Dr?hl.COMPLETE:(n instanceof br?n.code===yn.Redirect||n.code===yn.SupersededByNewNavigation:!1)?hl.REDIRECTING:hl.FAILED),ke(n=>n!==hl.REDIRECTING),Be(1)).subscribe(()=>{e()})}function Yq(t){throw t}var Zq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Xq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ln=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=C(ua),this.stateManager=C(oM),this.options=C(xl,{optional:!0})||{},this.pendingTasks=C(Ef),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=C(Uw),this.urlSerializer=C(Tl),this.location=C(mi),this.urlHandlingStrategy=C(Bw),this._events=new q,this.errorHandler=this.options.errorHandler||Yq,this.navigated=!1,this.routeReuseStrategy=C(Wq),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=C(Dl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!C(Qf,{optional:!0}),this.eventsSubscription=new Se,this.isNgZoneEnabled=C(L)instanceof L&&L.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof br&&r.code!==yn.Redirect&&r.code!==yn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof yi)this.navigated=!0;else if(r instanceof wl){let a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Gq(s.source)};this.scheduleNavigation(a,pl,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}eG(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=I({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Lw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=I(I({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=Ux(f)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),h=this.currentUrlTree.root}return $x(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=ya(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,pl,null,r)}navigate(i,r={skipLocationChange:!1}){return Jq(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=I({},Zq):r===!1?s=I({},Xq):s=r,ya(i))return Dx(this.currentUrlTree,i,s);let o=this.parseUrl(i);return Dx(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return aM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Jq(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new S(4008,!1)}function eG(t){return!(t instanceof vl)&&!(t instanceof wl)}var jse=(()=>{let e=class e{constructor(i,r,s,o,a,c){this.router=i,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new q,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=i.events.subscribe(u=>{u instanceof yi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i!=null?(this.commands=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(i,r,s,o,a){if(this.urlTree===null||this.isAnchorElement&&(i!==0||r||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(this.urlTree,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=this.urlTree!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let i=this.href===null?null:ZA(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(i,r){let s=this.renderer,o=this.el.nativeElement;r!==null?s.setAttribute(o,i,r):s.removeAttribute(o,i)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(T(Ln),T(Cr),rv("tabindex"),T(kn),T(_e),T($i))},e.\u0275dir=me({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&at("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&ui("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[fe.HasDecoratorInputTransform,"preserveFragment","preserveFragment",gn],skipLocationChange:[fe.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",gn],replaceUrl:[fe.HasDecoratorInputTransform,"replaceUrl","replaceUrl",gn],routerLink:"routerLink"},standalone:!0,features:[ji,kt]});let t=e;return t})();var Kf=class{};var tG=(()=>{let e=class e{constructor(i,r,s,o,a){this.router=i,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(ke(i=>i instanceof yi),fs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let s=[];for(let o of r){o.providers&&!o._injector&&(o._injector=vf(o.providers,i,`Route: ${o.path}`));let a=o._injector??i,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Pe(s).pipe(cr())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(i,r):s=H(null);let o=s.pipe(Ve(a=>a===null?H(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return Pe([o,a]).pipe(cr())}else return o})}};e.\u0275fac=function(r){return new(r||e)(y(Ln),y(wf),y(Yt),y(Kf),y(jw))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cM=new x(""),nG=(()=>{let e=class e{constructor(i,r,s,o,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof _a?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof yi?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Dr&&i.code===Bf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof $f&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new $f(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){aR()},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function Bse(t,...e){return sf([{provide:Dl,multi:!0,useValue:t},[],{provide:Cr,useFactory:lM,deps:[Ln]},{provide:Cf,multi:!0,useFactory:uM},e.map(n=>n.\u0275providers)])}function lM(t){return t.routerState.root}function Ml(t,e){return{\u0275kind:t,\u0275providers:e}}function uM(){let t=C(Me);return e=>{let n=t.get(hi);if(e!==n.components[0])return;let i=t.get(Ln),r=t.get(dM);t.get($w)===1&&i.initialNavigation(),t.get(hM,null,he.Optional)?.setUpPreloading(),t.get(cM,null,he.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var dM=new x("",{factory:()=>new q}),$w=new x("",{providedIn:"root",factory:()=>1});function iG(){return Ml(2,[{provide:$w,useValue:0},{provide:Df,multi:!0,deps:[Me],useFactory:e=>{let n=e.get(ax,Promise.resolve());return()=>n.then(()=>new Promise(i=>{let r=e.get(Ln),s=e.get(dM);aM(r,()=>{i(!0)}),e.get(Uw).afterPreactivation=()=>(i(!0),s.closed?H(void 0):s),r.initialNavigation()}))}}])}function rG(){return Ml(3,[{provide:Df,multi:!0,useFactory:()=>{let e=C(Ln);return()=>{e.setUpLocationChangeListener()}}},{provide:$w,useValue:2}])}var hM=new x("");function sG(t){return Ml(0,[{provide:hM,useExisting:tG},{provide:Kf,useExisting:t}])}function oG(){return Ml(8,[Ax,{provide:Qf,useExisting:Ax}])}function aG(t){let e=[{provide:rM,useValue:zq},{provide:sM,useValue:I({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ml(9,e)}var xx=new x("ROUTER_FORROOT_GUARD"),cG=[mi,{provide:Tl,useClass:gl},Ln,Sl,{provide:Cr,useFactory:lM,deps:[Ln]},jw,[]],Hw=(()=>{let e=class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[cG,[],{provide:Dl,multi:!0,useValue:i},{provide:xx,useFactory:hG,deps:[[Ln,new mt,new av]]},{provide:xl,useValue:r||{}},r?.useHash?uG():dG(),lG(),r?.preloadingStrategy?sG(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?fG(r):[],r?.bindToComponentInputs?oG().\u0275providers:[],r?.enableViewTransitions?aG().\u0275providers:[],pG()]}}static forChild(i){return{ngModule:e,providers:[{provide:Dl,multi:!0,useValue:i}]}}};e.\u0275fac=function(r){return new(r||e)(y(xx,8))},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({});let t=e;return t})();function lG(){return{provide:cM,useFactory:()=>{let t=C(px),e=C(L),n=C(xl),i=C(Uw),r=C(Tl);return n.scrollOffset&&t.setOffset(n.scrollOffset),new nG(r,i,t,e,n)}}}function uG(){return{provide:$i,useClass:lx}}function dG(){return{provide:$i,useClass:Gv}}function hG(t){return"guarded"}function fG(t){return[t.initialNavigation==="disabled"?rG().\u0275providers:[],t.initialNavigation==="enabledBlocking"?iG().\u0275providers:[]]}var Mx=new x("");function pG(){return[{provide:Mx,useFactory:uM},{provide:Cf,multi:!0,useExisting:Mx}]}var zse=(()=>{let e=class e{constructor(){this.executingCounter=XA(0),this.loadingStatus$=new Ke(!1)}get loading$(){return this.loadingStatus$.asObservable()}start(){this.executingCounter.update(i=>i+1),this.executingCounter()>0&&this.loadingStatus$.next(!0)}stop(){this.executingCounter()>0&&this.executingCounter.update(i=>i-1),this.executingCounter()<=0&&this.loadingStatus$.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var pM=function(t){let e=[],n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},gG=function(t){let e=[],n=0,i=0;for(;n<t.length;){let r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=t[n++],o=t[n++],a=t[n++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},mM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){let s=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,l=c?t[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),i.push(n[u],n[d],n[h],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gG(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){let s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;let l=r<t.length?n[t.charAt(r)]:64;++r;let d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||l==null||d==null)throw new qw;let h=s<<2|a>>4;if(i.push(h),l!==64){let f=a<<4&240|l>>2;if(i.push(f),d!==64){let p=l<<6&192|d;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},qw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},yG=function(t){let e=pM(t);return mM.encodeByteArray(e,!0)},Ww=function(t){return yG(t).replace(/\./g,"")},Kw=function(t){try{return mM.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _G(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var vG=()=>_G().__FIREBASE_DEFAULTS__,wG=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EG=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Kw(t[1]);return e&&JSON.parse(e)},Xf=()=>{try{return vG()||wG()||EG()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gM=t=>{var e,n;return(n=(e=Xf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]};var Qw=()=>{var t;return(t=Xf())===null||t===void 0?void 0:t.config},Yw=t=>{var e;return(e=Xf())===null||e===void 0?void 0:e[`_${t}`]};var Zf=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}};function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function IG(){var t;let e=(t=Xf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _M(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wM(){let t=ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Zw(){return!IG()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jf(){try{return typeof indexedDB=="object"}catch{return!1}}function EM(){return new Promise((t,e)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var bG="FirebaseError",en=class t extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=bG,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hi.prototype.create)}},Hi=class{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){let i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?DG(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new en(r,a,i)}};function DG(t,e){return t.replace(CG,(n,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var CG=/\{\$([^}]+)}/g;function IM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sr(t,e){if(t===e)return!0;let n=Object.keys(t),i=Object.keys(e);for(let r of n){if(!i.includes(r))return!1;let s=t[r],o=e[r];if(fM(s)&&fM(o)){if(!Sr(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!n.includes(r))return!1;return!0}function fM(t){return t!==null&&typeof t=="object"}function Ea(t){let e=[];for(let[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ia(t){let e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function ba(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function bM(t,e){let n=new Gw(t,e);return n.subscribe.bind(n)}var Gw=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");TG(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=zw),r.error===void 0&&(r.error=zw),r.complete===void 0&&(r.complete=zw);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function TG(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function zw(){}var Gse=4*60*60*1e3;function Ue(t){return t&&t._delegate?t._delegate:t}var vn=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ks="[DEFAULT]";var Xw=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let i=new Zf;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AG(e))try{this.getOrInitializeService({instanceIdentifier:ks})}catch{}for(let[n,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return m(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ks){return this.instances.has(e)}getOptions(e=ks){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;let r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let i=this.onInitCallbacks.get(n);if(i)for(let r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:SG(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ks){return this.component?this.component.multipleInstances?e:ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function SG(t){return t===ks?void 0:t}function AG(t){return t.instantiationMode==="EAGER"}var ep=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Xw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var RG=[],pe=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(pe||{}),xG={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},MG=pe.INFO,NG={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},PG=(t,e,...n)=>{if(e<t.logLevel)return;let i=new Date().toISOString(),r=NG[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ar=class{constructor(e){this.name=e,this._logLevel=MG,this._logHandler=PG,this._userLogHandler=null,RG.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xG[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};var OG=(t,e)=>e.some(n=>t instanceof n),DM,CM;function kG(){return DM||(DM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FG(){return CM||(CM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var TM=new WeakMap,eE=new WeakMap,SM=new WeakMap,Jw=new WeakMap,nE=new WeakMap;function LG(t){let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(vi(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&TM.set(n,t)}).catch(()=>{}),nE.set(e,t),e}function VG(t){if(eE.has(t))return;let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});eE.set(t,e)}var tE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return eE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||SM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function AM(t){tE=t(tE)}function jG(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let i=t.call(tp(this),e,...n);return SM.set(i,e.sort?e.sort():[e]),vi(i)}:FG().includes(t)?function(...e){return t.apply(tp(this),e),vi(TM.get(this))}:function(...e){return vi(t.apply(tp(this),e))}}function BG(t){return typeof t=="function"?jG(t):(t instanceof IDBTransaction&&VG(t),OG(t,kG())?new Proxy(t,tE):t)}function vi(t){if(t instanceof IDBRequest)return LG(t);if(Jw.has(t))return Jw.get(t);let e=BG(t);return e!==t&&(Jw.set(t,e),nE.set(e,t)),e}var tp=t=>nE.get(t);function xM(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(t,e),a=vi(o);return i&&o.addEventListener("upgradeneeded",c=>{i(vi(o.result),c.oldVersion,c.newVersion,vi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var UG=["get","getKey","getAll","getAllKeys","count"],$G=["put","add","delete","clear"],iE=new Map;function RM(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(iE.get(e))return iE.get(e);let n=e.replace(/FromIndex$/,""),i=e!==n,r=$G.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||UG.includes(n)))return;let s=function(o,...a){return m(this,null,function*(){let c=this.transaction(o,r?"readwrite":"readonly"),l=c.store;return i&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),r&&c.done]))[0]})};return iE.set(e,s),s}AM(t=>ye(I({},t),{get:(e,n,i)=>RM(e,n)||t.get(e,n,i),has:(e,n)=>!!RM(e,n)||t.has(e,n)}));var sE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HG(n)){let i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}};function HG(t){let e=t.getComponent();return e?.type==="VERSION"}var oE="@firebase/app",MM="0.9.26";var Fs=new Ar("@firebase/app"),zG="@firebase/app-compat",qG="@firebase/analytics-compat",GG="@firebase/analytics",WG="@firebase/app-check-compat",KG="@firebase/app-check",QG="@firebase/auth",YG="@firebase/auth-compat",ZG="@firebase/database",XG="@firebase/database-compat",JG="@firebase/functions",eW="@firebase/functions-compat",tW="@firebase/installations",nW="@firebase/installations-compat",iW="@firebase/messaging",rW="@firebase/messaging-compat",sW="@firebase/performance",oW="@firebase/performance-compat",aW="@firebase/remote-config",cW="@firebase/remote-config-compat",lW="@firebase/storage",uW="@firebase/storage-compat",dW="@firebase/firestore",hW="@firebase/firestore-compat",fW="firebase",pW="10.7.2";var aE="[DEFAULT]",mW={[oE]:"fire-core",[zG]:"fire-core-compat",[GG]:"fire-analytics",[qG]:"fire-analytics-compat",[KG]:"fire-app-check",[WG]:"fire-app-check-compat",[QG]:"fire-auth",[YG]:"fire-auth-compat",[ZG]:"fire-rtdb",[XG]:"fire-rtdb-compat",[JG]:"fire-fn",[eW]:"fire-fn-compat",[tW]:"fire-iid",[nW]:"fire-iid-compat",[iW]:"fire-fcm",[rW]:"fire-fcm-compat",[sW]:"fire-perf",[oW]:"fire-perf-compat",[aW]:"fire-rc",[cW]:"fire-rc-compat",[lW]:"fire-gcs",[uW]:"fire-gcs-compat",[dW]:"fire-fst",[hW]:"fire-fst-compat","fire-js":"fire-js",[fW]:"fire-js-all"};var Nl=new Map,cE=new Map;function gW(t,e){try{t.container.addComponent(e)}catch(n){Fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xr(t){let e=t.name;if(cE.has(e))return Fs.debug(`There were multiple attempts to register component ${e}.`),!1;cE.set(e,t);for(let n of Nl.values())gW(n,t);return!0}function Ol(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var yW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Rr=new Hi("app","Firebase",yW);var lE=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new vn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}};var Mr=pW;function hE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let i=Object.assign({name:aE,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Rr.create("bad-app-name",{appName:String(r)});if(n||(n=Qw()),!n)throw Rr.create("no-options");let s=Nl.get(r);if(s){if(Sr(n,s.options)&&Sr(i,s.config))return s;throw Rr.create("duplicate-app",{appName:r})}let o=new ep(r);for(let c of cE.values())o.addComponent(c);let a=new lE(n,i,o);return Nl.set(r,a),a}function Da(t=aE){let e=Nl.get(t);if(!e&&t===aE&&Qw())return hE();if(!e)throw Rr.create("no-app",{appName:t});return e}function np(){return Array.from(Nl.values())}function it(t,e,n){var i;let r=(i=mW[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fs.warn(a.join(" "));return}xr(new vn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var _W="firebase-heartbeat-database",vW=1,Pl="firebase-heartbeat-store",rE=null;function kM(){return rE||(rE=xM(_W,vW,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),rE}function wW(t){return m(this,null,function*(){try{return yield(yield kM()).transaction(Pl).objectStore(Pl).get(FM(t))}catch(e){if(e instanceof en)Fs.warn(e.message);else{let n=Rr.create("idb-get",{originalErrorMessage:e?.message});Fs.warn(n.message)}}})}function NM(t,e){return m(this,null,function*(){try{let i=(yield kM()).transaction(Pl,"readwrite");yield i.objectStore(Pl).put(e,FM(t)),yield i.done}catch(n){if(n instanceof en)Fs.warn(n.message);else{let i=Rr.create("idb-set",{originalErrorMessage:n?.message});Fs.warn(i.message)}}})}function FM(t){return`${t.name}!${t.options.appId}`}var EW=1024,IW=30*24*60*60*1e3,uE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new dE(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return m(this,null,function*(){var e,n;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=PM();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=IW}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return m(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=PM(),{heartbeatsToSend:i,unsentEntries:r}=bW(this._heartbeatsCache.heartbeats),s=Ww(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function PM(){return new Date().toISOString().substring(0,10)}function bW(t,e=EW){let n=[],i=t.slice();for(let r of t){let s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),OM(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),OM(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}var dE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return Jf()?EM().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield wW(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return NM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return NM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function OM(t){return Ww(JSON.stringify({version:2,heartbeats:t})).length}function DW(t){xr(new vn("platform-logger",e=>new sE(e),"PRIVATE")),xr(new vn("heartbeat",e=>new uE(e),"PRIVATE")),it(oE,MM,t),it(oE,MM,"esm2017"),it("fire-js","")}DW("");var CW="firebase",TW="10.7.2";it(CW,TW,"app");var Vs=new ri("ANGULARFIRE2_VERSION");function rp(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var kl=(t,e)=>{let n=e?[e]:np(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Ta=class{constructor(){return kl(SW)}},SW="app-check";function Ca(){}var ip=class{zone;delegate;constructor(e,n=_y){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,i)}},fE=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ca,{},Ca,Ca)),n.pipe(Qe({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Sa=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new ip(Zone.current)),this.insideAngular=n.run(()=>new ip(Zone.current,un)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(y(L))};static \u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sp(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function AW(t){return sp().ngZone.runOutsideAngular(()=>t())}function Ls(t){return sp().ngZone.run(()=>t())}function RW(t){return xW(sp())(t)}function xW(t){return function(n){return n=n.lift(new fE(t.ngZone)),n.pipe(ar(t.outsideAngular),or(t.insideAngular))}}var MW=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ls(()=>t.apply(void 0,i))},Ae=(t,e)=>function(){let n,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(n||=Ls(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ca,{},Ca,Ca))),i[s]=MW(i[s],n));let r=AW(()=>t.apply(this,i));if(!e)if(r instanceof W){let s=sp();return r.pipe(ar(s.outsideAngular),or(s.insideAngular))}else return Ls(()=>r);return r instanceof W?r.pipe(RW):r instanceof Promise?Ls(()=>new Promise((s,o)=>r.then(a=>Ls(()=>s(a)),a=>Ls(()=>o(a))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:Ls(()=>r)};var zi=class{constructor(e){return e}},js=class{constructor(){return np()}};function NW(t){return t&&t.length===1?t[0]:new zi(Da())}var pE=new x("angularfire2._apps"),PW={provide:zi,useFactory:NW,deps:[[new mt,pE]]},OW={provide:js,deps:[[new mt,pE]]};function kW(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new zi(i)}}var FW=(()=>{class t{constructor(n){it("angularfire",Vs.full,"core"),it("angularfire",Vs.full,"app"),it("angular",QR.full,n.toString())}static \u0275fac=function(i){return new(i||t)(y(pn))};static \u0275mod=ie({type:t});static \u0275inj=ne({providers:[PW,OW]})}return t})();function Roe(t,...e){return{ngModule:FW,providers:[{provide:pE,useFactory:kW(t),multi:!0,deps:[L,Me,Sa,...e]}]}}var xoe=Ae(Da,!0);var Moe=Ae(hE,!0);function XM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var JM=XM,eN=new Hi("auth","Firebase",XM());var dp=new Ar("@firebase/auth");function LW(t,...e){dp.logLevel<=pe.WARN&&dp.warn(`Auth (${Mr}): ${t}`,...e)}function ap(t,...e){dp.logLevel<=pe.ERROR&&dp.error(`Auth (${Mr}): ${t}`,...e)}function wn(t,...e){throw OE(t,...e)}function wi(t,...e){return OE(t,...e)}function tN(t,e,n){let i=Object.assign(Object.assign({},JM()),{[e]:n});return new Hi("auth","Firebase",i).create(e,{appName:t.name})}function VW(t,e,n){let i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&wn(t,"argument-error"),tN(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function OE(t,...e){if(typeof t!="string"){let n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return eN.create(t,...e)}function Z(t,e,...n){if(!t)throw OE(e,...n)}function qi(t){let e="INTERNAL ASSERTION FAILED: "+t;throw ap(e),new Error(e)}function Wi(t,e){t||qi(e)}function yE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jW(){return LM()==="http:"||LM()==="https:"}function LM(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function BW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jW()||_M()||"connection"in navigator)?navigator.onLine:!0}function UW(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Bs=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wi(n>e,"Short delay should be less than long delay!"),this.isMobile=yM()||vM()}get(){return BW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function kE(t,e){Wi(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var hp=class{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var $W={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var HW=new Bs(3e4,6e4);function Pr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Or(s,o,a,c){return m(this,arguments,function*(t,e,n,i,r={}){return nN(t,r,()=>m(this,null,function*(){let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});let d=Ea(Object.assign({key:t.config.apiKey},u)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),hp.fetch()(iN(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},l))}))})}function nN(t,e,n){return m(this,null,function*(){t._canInitEmulator=!1;let i=Object.assign(Object.assign({},$W),e);try{let r=new _E(t),s=yield Promise.race([n(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw op(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw op(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw op(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw op(t,"user-disabled",o);let u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw tN(t,u,l);wn(t,u)}}catch(r){if(r instanceof en)throw r;wn(t,"network-request-failed",{message:String(r)})}})}function $l(s,o,a,c){return m(this,arguments,function*(t,e,n,i,r={}){let l=yield Or(t,e,n,i,r);return"mfaPendingCredential"in l&&wn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function iN(t,e,n,i){let r=`${e}${n}?${i}`;return t.config.emulator?kE(t.config,r):`${t.config.apiScheme}://${r}`}function zW(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var _E=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(wi(this.auth,"network-request-failed")),HW.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function op(t,e,n){let i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let r=wi(t,e,i);return r.customData._tokenResponse=n,r}function VM(t){return t!==void 0&&t.enterprise!==void 0}var vE=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return zW(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function qW(t,e){return m(this,null,function*(){return Or(t,"GET","/v2/recaptchaConfig",Pr(t,e))})}function GW(t,e){return m(this,null,function*(){return Or(t,"POST","/v1/accounts:delete",e)})}function WW(t,e){return m(this,null,function*(){return Or(t,"POST","/v1/accounts:lookup",e)})}function Fl(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function FE(t,e=!1){return m(this,null,function*(){let n=Ue(t),i=yield n.getIdToken(e),r=LE(i);Z(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Fl(mE(r.auth_time)),issuedAtTime:Fl(mE(r.iat)),expirationTime:Fl(mE(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function mE(t){return Number(t)*1e3}function LE(t){let[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return ap("JWT malformed, contained fewer than 3 sections"),null;try{let r=Kw(n);return r?JSON.parse(r):(ap("Failed to decode base64 JWT payload"),null)}catch(r){return ap("Caught error parsing JWT payload as JSON",r?.toString()),null}}function KW(t){let e=LE(t);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ll(t,e,n=!1){return m(this,null,function*(){if(n)return e;try{return yield e}catch(i){throw i instanceof en&&QW(i)&&t.auth.currentUser===t&&(yield t.auth.signOut()),i}})}function QW({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var wE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),n)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var fp=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fl(this.lastLoginAt),this.creationTime=Fl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function pp(t){return m(this,null,function*(){var e;let n=t.auth,i=yield t.getIdToken(),r=yield Ll(t,WW(n,{idToken:i}));Z(r?.users.length,n,"internal-error");let s=r.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ZW(s.providerUserInfo):[],a=YW(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new fp(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function VE(t){return m(this,null,function*(){let e=Ue(t);yield pp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function YW(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function ZW(t){return t.map(e=>{var{providerId:n}=e,i=Xd(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function XW(t,e){return m(this,null,function*(){let n=yield nN(t,{},()=>m(this,null,function*(){let i=Ea({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=iN(t,r,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",hp.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function JW(t,e){return m(this,null,function*(){return Or(t,"POST","/v2/accounts:revokeToken",Pr(t,e))})}var mp=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KW(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return m(this,null,function*(){return Z(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return m(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield XW(e,n);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){let{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new t;return i&&(Z(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Z(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return qi("not implemented")}};function Nr(t,e){Z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Vl=class t{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Xd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fp(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let n=yield Ll(this,this.stsTokenManager.getToken(this.auth,e));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return FE(this,e)}reload(){return VE(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return m(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield pp(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){let e=yield this.getIdToken();return yield Ll(this,GW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,c,l,u;let d=(i=n.displayName)!==null&&i!==void 0?i:void 0,h=(r=n.email)!==null&&r!==void 0?r:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(l=n.createdAt)!==null&&l!==void 0?l:void 0,A=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:N,emailVerified:O,isAnonymous:K,providerData:j,stsTokenManager:ae}=n;Z(N&&ae,e,"internal-error");let De=mp.fromJSON(this.name,ae);Z(typeof N=="string",e,"internal-error"),Nr(d,e.name),Nr(h,e.name),Z(typeof O=="boolean",e,"internal-error"),Z(typeof K=="boolean",e,"internal-error"),Nr(f,e.name),Nr(p,e.name),Nr(g,e.name),Nr(v,e.name),Nr(E,e.name),Nr(A,e.name);let Mt=new t({uid:N,auth:e,email:h,emailVerified:O,displayName:d,isAnonymous:K,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:De,createdAt:E,lastLoginAt:A});return j&&Array.isArray(j)&&(Mt.providerData=j.map(An=>Object.assign({},An))),v&&(Mt._redirectEventId=v),Mt}static _fromIdTokenResponse(e,n,i=!1){return m(this,null,function*(){let r=new mp;r.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield pp(s),s})}};var jM=new Map;function Gi(t){Wi(t instanceof Function,"Expected a class definition");let e=jM.get(t);return e?(Wi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,jM.set(t,e),e)}var e4=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(n,i){return m(this,null,function*(){this.storage[n]=i})}_get(n){return m(this,null,function*(){let i=this.storage[n];return i===void 0?null:i})}_remove(n){return m(this,null,function*(){delete this.storage[n]})}_addListener(n,i){}_removeListener(n,i){}}return t.type="NONE",t})(),EE=e4;function cp(t,e,n){return`firebase:${t}:${e}:${n}`}var gp=class t{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=cp(this.userKey,r.apiKey,s),this.fullPersistenceKey=cp("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Vl._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,i="authUser"){return m(this,null,function*(){if(!n.length)return new t(Gi(EE),e,i);let r=(yield Promise.all(n.map(l=>m(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=r[0]||Gi(EE),o=cp(i,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(o);if(u){let d=Vl._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,i):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>m(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,i))})}};function BM(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cN(e))return"Blackberry";if(lN(e))return"Webos";if(jE(e))return"Safari";if((e.includes("chrome/")||sN(e))&&!e.includes("edge/"))return"Chrome";if(aN(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function rN(t=ze()){return/firefox\//i.test(t)}function jE(t=ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sN(t=ze()){return/crios\//i.test(t)}function oN(t=ze()){return/iemobile/i.test(t)}function aN(t=ze()){return/android/i.test(t)}function cN(t=ze()){return/blackberry/i.test(t)}function lN(t=ze()){return/webos/i.test(t)}function Tp(t=ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function t4(t=ze()){var e;return Tp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function n4(){return wM()&&document.documentMode===10}function uN(t=ze()){return Tp(t)||aN(t)||lN(t)||cN(t)||/windows phone/i.test(t)||oN(t)}function i4(){try{return!!(window&&window!==window.top)}catch{return!1}}function dN(t,e=[]){let n;switch(t){case"Browser":n=BM(ze());break;case"Worker":n=`${BM(ze())}-${t}`;break;default:n=t}let i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mr}/${i}`}var IE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let i=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});i.onAbort=n,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let i of this.queue)yield i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(let r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function r4(n){return m(this,arguments,function*(t,e={}){return Or(t,"GET","/v2/passwordPolicy",Pr(t,e))})}var s4=6,bE=class{constructor(e){var n,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:s4,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var DE=class{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yp(this),this.idTokenSubscription=new yp(this),this.beforeStateQueue=new IE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gi(n)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield gp.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return m(this,null,function*(){var n;let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return m(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield pp(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=UW()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){let n=e?Ue(e):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return m(this,null,function*(){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(Gi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield r4(this),n=new bE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Hi("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},n)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),yield JW(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return m(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Gi(e)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=yield gp.create(this,[Gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var n,i;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,i,r);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(n["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n})}_getAppCheckToken(){return m(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&LW(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function kr(t){return Ue(t)}var yp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=bM(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};function o4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function hN(t){return new Promise((e,n)=>{let i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{let s=wi("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",o4().appendChild(i)})}function fN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var a4="https://www.google.com/recaptcha/enterprise.js?render=",c4="recaptcha-enterprise",l4="NO_RECAPTCHA",CE=class{constructor(e){this.type=c4,this.auth=kr(e)}verify(e="verify",n=!1){return m(this,null,function*(){function i(s){return m(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>m(this,null,function*(){qW(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new vE(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function r(s,o,a){let c=window.grecaptcha;VM(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(l4)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&VM(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}hN(a4+a).then(()=>{r(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})})}};function UM(t,e,n,i=!1){return m(this,null,function*(){let r=new CE(t),s;try{s=yield r.verify(n)}catch{s=yield r.verify(n,!0)}let o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function TE(t,e,n,i){return m(this,null,function*(){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield UM(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(s=>m(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield UM(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)}))})}function BE(t,e){let n=Ol(t,"auth");if(n.isInitialized()){let r=n.getImmediate(),s=n.getOptions();if(Sr(s,e??{}))return r;wn(r,"already-initialized")}return n.initialize({options:e})}function u4(t,e){let n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Gi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function UE(t,e,n){let i=kr(t);Z(i._canInitEmulator,i,"emulator-config-failed"),Z(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!n?.disableWarnings,s=pN(e),{host:o,port:a}=d4(e),c=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||h4()}function pN(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function d4(t){let e=pN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:$M(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:$M(o)}}}function $M(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function h4(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ra=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qi("not implemented")}_getIdTokenResponse(e){return qi("not implemented")}_linkToIdToken(e,n){return qi("not implemented")}_getReauthenticationResolver(e){return qi("not implemented")}};function f4(t,e){return m(this,null,function*(){return Or(t,"POST","/v1/accounts:signUp",e)})}function p4(t,e){return m(this,null,function*(){return $l(t,"POST","/v1/accounts:signInWithPassword",Pr(t,e))})}function m4(t,e){return m(this,null,function*(){return $l(t,"POST","/v1/accounts:signInWithEmailLink",Pr(t,e))})}function g4(t,e){return m(this,null,function*(){return $l(t,"POST","/v1/accounts:signInWithEmailLink",Pr(t,e))})}var jl=class t extends Ra{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new t(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return m(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return TE(e,n,"signInWithPassword",p4);case"emailLink":return m4(e,{email:this._email,oobCode:this._password});default:wn(e,"internal-error")}})}_linkToIdToken(e,n){return m(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return TE(e,i,"signUpPassword",f4);case"emailLink":return g4(e,{idToken:n,email:this._email,oobCode:this._password});default:wn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Aa(t,e){return m(this,null,function*(){return $l(t,"POST","/v1/accounts:signInWithIdp",Pr(t,e))})}var y4="http://localhost",_p=class t extends Ra{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Xd(n,["providerId","signInMethod"]);if(!i||!r)return null;let o=new t(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let n=this.buildRequest();return Aa(e,n)}_linkToIdToken(e,n){let i=this.buildRequest();return i.idToken=n,Aa(e,i)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Aa(e,n)}buildRequest(){let e={requestUri:y4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ea(n)}return e}};function _4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function v4(t){let e=Ia(ba(t)).link,n=e?Ia(ba(e)).deep_link_id:null,i=Ia(ba(t)).deep_link_id;return(i?Ia(ba(i)).link:null)||i||n||e||t}var vp=class t{constructor(e){var n,i,r,s,o,a;let c=Ia(ba(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,u=(i=c.oobCode)!==null&&i!==void 0?i:null,d=_4((r=c.mode)!==null&&r!==void 0?r:null);Z(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=v4(e);try{return new t(n)}catch{return null}}};var mN=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,i){return jl._fromEmailAndPassword(n,i)}static credentialWithLink(n,i){let r=vp.parseLink(i);return Z(r,"argument-error"),jl._fromEmailAndCode(n,r.code,r.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Bl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var wp=class extends Bl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var $E=(()=>{class t extends wp{constructor(){super("google.com"),this.addScope("profile")}static credential(n,i){return _p._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:i})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:i,oauthAccessToken:r}=n;if(!i&&!r)return null;try{return t.credential(i,r)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();function w4(t,e){return m(this,null,function*(){return $l(t,"POST","/v1/accounts:signUp",Pr(t,e))})}var xa=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,i,r=!1){return m(this,null,function*(){let s=yield Vl._fromIdTokenResponse(e,i,r),o=HM(i);return new t({user:s,providerId:o,_tokenResponse:i,operationType:n})})}static _forOperation(e,n,i){return m(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=HM(i);return new t({user:e,providerId:r,_tokenResponse:i,operationType:n})})}};function HM(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var SE=class t extends en{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new t(e,n,i,r)}};function gN(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?SE._fromErrorAndOperation(t,s,e,i):s})}function E4(t,e,n=!1){return m(this,null,function*(){let i=yield Ll(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return xa._forOperation(t,"link",i)})}function I4(t,e,n=!1){return m(this,null,function*(){let{auth:i}=t,r="reauthenticate";try{let s=yield Ll(t,gN(i,r,e,t),n);Z(s.idToken,i,"internal-error");let o=LE(s.idToken);Z(o,i,"internal-error");let{sub:a}=o;return Z(t.uid===a,i,"user-mismatch"),xa._forOperation(t,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&wn(i,"user-mismatch"),s}})}function yN(t,e,n=!1){return m(this,null,function*(){let i="signIn",r=yield gN(t,i,e),s=yield xa._fromIdTokenResponse(t,i,r);return n||(yield t._updateCurrentUser(s.user)),s})}function HE(t,e){return m(this,null,function*(){return yN(kr(t),e)})}function _N(t){return m(this,null,function*(){let e=kr(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function zE(t,e,n){return m(this,null,function*(){let i=kr(t),o=yield TE(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",w4).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&_N(t),c}),a=yield xa._fromIdTokenResponse(i,"signIn",o);return yield i._updateCurrentUser(a.user),a})}function qE(t,e,n){return HE(Ue(t),mN.credential(e,n)).catch(i=>m(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&_N(t),i}))}function GE(t,e,n,i){return Ue(t).onIdTokenChanged(e,n,i)}function WE(t,e,n){return Ue(t).beforeAuthStateChanged(e,n)}function KE(t,e,n,i){return Ue(t).onAuthStateChanged(e,n,i)}function QE(t){return Ue(t).signOut()}var Ep="__sak";var Ip=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ep,"1"),this.storage.removeItem(Ep),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function b4(){let t=ze();return jE(t)||Tp(t)}var D4=1e3,C4=10,T4=(()=>{class t extends Ip{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,i)=>this.onStorageEvent(n,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=b4()&&i4(),this.fallbackToPolling=uN(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&n(i,s,r)}}onStorageEvent(n,i=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let r=n.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(r);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(r,n.newValue):this.storage.removeItem(r);else if(this.localCache[r]===n.newValue&&!i)return}let s=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);n4()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,C4):s()}notifyListeners(n,i){this.localCache[n]=i;let r=this.listeners[n];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:i,newValue:r}),!0)})},D4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,i){return m(this,null,function*(){yield qn(t.prototype,this,"_set").call(this,n,i),this.localCache[n]=JSON.stringify(i)})}_get(n){return m(this,null,function*(){let i=yield qn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(i),i})}_remove(n){return m(this,null,function*(){yield qn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),vN=T4;var S4=(()=>{class t extends Ip{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,i){}_removeListener(n,i){}}return t.type="SESSION",t})(),YE=S4;function A4(t){return Promise.all(t.map(e=>m(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var R4=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let i=this.receivers.find(s=>s.isListeningto(n));if(i)return i;let r=new t(n);return this.receivers.push(r),r}isListeningto(n){return this.eventTarget===n}handleEvent(n){return m(this,null,function*(){let i=n,{eventId:r,eventType:s,data:o}=i.data,a=this.handlersMap[s];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let c=Array.from(a).map(u=>m(this,null,function*(){return u(i.origin,o)})),l=yield A4(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})})}_subscribe(n,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(i)}_unsubscribe(n,i){this.handlersMap[n]&&i&&this.handlersMap[n].delete(i),(!i||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function ZE(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}var AE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,i=50){return m(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=ZE("",20);r.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Ei(){return window}function x4(t){Ei().location.href=t}function wN(){return typeof Ei().WorkerGlobalScope<"u"&&typeof Ei().importScripts=="function"}function M4(){return m(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function N4(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function P4(){return wN()?self:null}var EN="firebaseLocalStorageDb",O4=1,bp="firebaseLocalStorage",IN="fbase_key",Us=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Sp(t,e){return t.transaction([bp],e?"readwrite":"readonly").objectStore(bp)}function k4(){let t=indexedDB.deleteDatabase(EN);return new Us(t).toPromise()}function RE(){let t=indexedDB.open(EN,O4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let i=t.result;try{i.createObjectStore(bp,{keyPath:IN})}catch(r){n(r)}}),t.addEventListener("success",()=>m(this,null,function*(){let i=t.result;i.objectStoreNames.contains(bp)?e(i):(i.close(),yield k4(),e(yield RE()))}))})}function zM(t,e,n){return m(this,null,function*(){let i=Sp(t,!0).put({[IN]:e,value:n});return new Us(i).toPromise()})}function F4(t,e){return m(this,null,function*(){let n=Sp(t,!1).get(e),i=yield new Us(n).toPromise();return i===void 0?null:i.value})}function qM(t,e){let n=Sp(t,!0).delete(e);return new Us(n).toPromise()}var L4=800,V4=3,j4=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return m(this,null,function*(){return this.db?this.db:(this.db=yield RE(),this.db)})}_withRetries(n){return m(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield n(r)}catch(r){if(i++>V4)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return m(this,null,function*(){return wN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return m(this,null,function*(){this.receiver=R4._getInstance(P4()),this.receiver._subscribe("keyChanged",(n,i)=>m(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(n,i)=>m(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return m(this,null,function*(){var n,i;if(this.activeServiceWorker=yield M4(),!this.activeServiceWorker)return;this.sender=new AE(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((n=r[0])===null||n===void 0)&&n.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return m(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||N4()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return m(this,null,function*(){try{if(!indexedDB)return!1;let n=yield RE();return yield zM(n,Ep,"1"),yield qM(n,Ep),!0}catch{}return!1})}_withPendingWrite(n){return m(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,i){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(r=>zM(r,n,i)),this.localCache[n]=i,this.notifyServiceWorker(n)}))})}_get(n){return m(this,null,function*(){let i=yield this._withRetries(r=>F4(r,n));return this.localCache[n]=i,i})}_remove(n){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(i=>qM(i,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return m(this,null,function*(){let n=yield this._withRetries(s=>{let o=Sp(s,!1).getAll();return new Us(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(n,i){this.localCache[n]=i;let r=this.listeners[n];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>m(this,null,function*(){return this._poll()}),L4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),bN=j4;var joe=fN("rcb"),Boe=new Bs(3e4,6e4);function DN(t,e){return e?Gi(e):(Z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Ul=class extends Ra{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Aa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Aa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Aa(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function B4(t){return yN(t.auth,new Ul(t),t.bypassAuthState)}function U4(t){let{auth:e,user:n}=t;return Z(n,e,"internal-error"),I4(n,new Ul(t),t.bypassAuthState)}function $4(t){return m(this,null,function*(){let{auth:e,user:n}=t;return Z(n,e,"internal-error"),E4(n,new Ul(t),t.bypassAuthState)})}var Dp=class{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B4;case"linkViaPopup":case"linkViaRedirect":return $4;case"reauthViaPopup":case"reauthViaRedirect":return U4;default:wn(this.auth,"internal-error")}}resolve(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var H4=new Bs(2e3,1e4);function XE(t,e,n){return m(this,null,function*(){let i=kr(t);VW(t,e,Bl);let r=DN(i,n);return new z4(i,"signInViaPopup",e,r).executeNotNull()})}var z4=(()=>{class t extends Dp{constructor(n,i,r,s,o){super(n,i,s,o),this.provider=r,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return m(this,null,function*(){let n=yield this.execute();return Z(n,this.auth,"internal-error"),n})}onExecution(){return m(this,null,function*(){Wi(this.filter.length===1,"Popup operations only handle one event");let n=ZE();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(wi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(wi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,H4.get())};n()}}t.currentPopupAction=null;return t})(),q4="pendingRedirect",lp=new Map,xE=class t extends Dp{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}execute(){return m(this,null,function*(){let e=lp.get(this.auth._key());if(!e){try{let i=(yield G4(this.resolver,this.auth))?yield qn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}lp.set(this.auth._key(),e)}return this.bypassAuthState||lp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return m(this,null,function*(){if(e.type==="signInViaRedirect")return qn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,qn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return m(this,null,function*(){})}cleanUp(){}};function G4(t,e){return m(this,null,function*(){let n=Q4(e),i=K4(t);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(n))==="true";return yield i._remove(n),r})}function W4(t,e){lp.set(t._key(),e)}function K4(t){return Gi(t._redirectPersistence)}function Q4(t){return cp(q4,t.config.apiKey,t.name)}function Y4(t,e,n=!1){return m(this,null,function*(){let i=kr(t),r=DN(i,e),o=yield new xE(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var Z4=10*60*1e3,ME=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!X4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!CN(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(wi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Z4&&this.cachedEventUids.clear(),this.cachedEventUids.has(GM(e))}saveEventToCache(e){this.cachedEventUids.add(GM(e)),this.lastProcessedEventTime=Date.now()}};function GM(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function X4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CN(t);default:return!1}}function J4(n){return m(this,arguments,function*(t,e={}){return Or(t,"GET","/v1/projects",e)})}var e3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t3=/^https?/;function n3(t){return m(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield J4(t);for(let n of e)try{if(i3(n))return}catch{}wn(t,"unauthorized-domain")})}function i3(t){let e=yE(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!t3.test(n))return!1;if(e3.test(t))return i===t;let r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var r3=new Bs(3e4,6e4);function WM(){let t=Ei().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function s3(t){return new Promise((e,n)=>{var i,r,s;function o(){WM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{WM(),n(wi(t,"network-request-failed"))},timeout:r3.get()})}if(!((r=(i=Ei().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Ei().gapi)===null||s===void 0)&&s.load)o();else{let a=fN("iframefcb");return Ei()[a]=()=>{gapi.load?o():n(wi(t,"network-request-failed"))},hN(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw up=null,e})}var up=null;function o3(t){return up=up||s3(t),up}var a3=new Bs(5e3,15e3),c3="__/auth/iframe",l3="emulator/auth/iframe",u3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h3(t){let e=t.config;Z(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?kE(e,l3):`https://${t.config.authDomain}/${c3}`,i={apiKey:e.apiKey,appName:t.name,v:Mr},r=d3.get(t.config.apiHost);r&&(i.eid=r);let s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Ea(i).slice(1)}`}function f3(t){return m(this,null,function*(){let e=yield o3(t),n=Ei().gapi;return Z(n,t,"internal-error"),e.open({where:document.body,url:h3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u3,dontclear:!0},i=>new Promise((r,s)=>m(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=wi(t,"network-request-failed"),a=Ei().setTimeout(()=>{s(o)},a3.get());function c(){Ei().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})})))})}var p3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},m3=500,g3=600,y3="_blank",_3="http://localhost",Cp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function v3(t,e,n,i=m3,r=g3){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",c=Object.assign(Object.assign({},p3),{width:i.toString(),height:r.toString(),top:s,left:o}),l=ze().toLowerCase();n&&(a=sN(l)?y3:n),rN(l)&&(e=e||_3,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(t4(l)&&a!=="_self")return w3(e||"",a),new Cp(null);let d=window.open(e||"",a,u);Z(d,t,"popup-blocked");try{d.focus()}catch{}return new Cp(d)}function w3(t,e){let n=document.createElement("a");n.href=t,n.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}var E3="__/auth/handler",I3="emulator/auth/handler",b3=encodeURIComponent("fac");function KM(t,e,n,i,r,s){return m(this,null,function*(){Z(t.config.authDomain,t,"auth-domain-config-required"),Z(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Mr,eventId:r};if(e instanceof Bl){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",IM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof wp){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield t._getAppCheckToken(),l=c?`#${b3}=${encodeURIComponent(c)}`:"";return`${D3(t)}?${Ea(a).slice(1)}${l}`})}function D3({config:t}){return t.emulator?kE(t,I3):`https://${t.authDomain}/${E3}`}var gE="webStorageSupport",NE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YE,this._completeRedirectFn=Y4,this._overrideRedirectResult=W4}_openPopup(e,n,i,r){return m(this,null,function*(){var s;Wi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield KM(e,n,i,yE(),r);return v3(e,o,ZE())})}_openRedirect(e,n,i,r){return m(this,null,function*(){yield this._originValidation(e);let s=yield KM(e,n,i,yE(),r);return x4(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Wi(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}initAndGetManager(e){return m(this,null,function*(){let n=yield f3(e),i=new ME(e);return n.register("authEvent",r=>(Z(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gE,{type:gE},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[gE];o!==void 0&&n(!!o),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=n3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uN()||jE()||Tp()}},TN=NE;var QM="@firebase/auth",YM="1.5.1";var PE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function C3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function T3(t){xr(new vn("auth",(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dN(t)},l=new DE(i,r,s,c);return u4(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),xr(new vn("auth-internal",e=>{let n=kr(e.getProvider("auth").getImmediate());return(i=>new PE(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),it(QM,YM,C3(t)),it(QM,YM,"esm2017")}var S3=5*60,A3=Yw("authIdTokenMaxAge")||S3,ZM=null,R3=t=>e=>m(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>A3)return;let r=n?.token;ZM!==r&&(ZM=r,yield fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function JE(t=Da()){let e=Ol(t,"auth");if(e.isInitialized())return e.getImmediate();let n=BE(t,{popupRedirectResolver:TN,persistence:[bN,vN,YE]}),i=Yw("authTokenSyncURL");if(i){let s=R3(i);WE(n,s,()=>s(n.currentUser)),GE(n,o=>s(o))}let r=gM("auth");return r&&UE(n,`http://${r}`),n}T3("Browser");var SN="auth",$s=class{constructor(e){return e}},Hl=class{constructor(){return kl(SN)}};var eI=new x("angularfire2.auth-instances");function y9(t,e){let n=rp(SN,t,e);return n&&new $s(n)}function _9(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new $s(i)}}var v9={provide:Hl,deps:[[new mt,eI]]},w9={provide:$s,useFactory:y9,deps:[[new mt,eI],zi]},E9=(()=>{class t{constructor(){it("angularfire",Vs.full,"auth")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=ie({type:t});static \u0275inj=ne({providers:[w9,v9]})}return t})();function Eae(t,...e){return{ngModule:E9,providers:[{provide:eI,useFactory:_9(t),multi:!0,deps:[L,Me,Sa,js,[new mt,Ta],...e]}]}}var AN=Ae(zE,!0);var tI=Ae(JE,!0);var RN=Ae(KE,!0);var xN=Ae(qE,!0);var MN=Ae(XE,!0);var NN=Ae(QE,!0);var Dae=(()=>{let e=class e{constructor(i,r,s){this.auth=i,this.ngZone=r,this.router=s,RN(this.auth,o=>{o&&(this.UserData=o)})}get userUid(){return tI().currentUser?.uid||""}getAuthFire(){return this.auth.currentUser}Register(i,r){return AN(this.auth,i,r).then(s=>{this.UserData=s.user,this.ngZone.run(()=>{this.sendEmailVerification(),this.router.navigate(["/signIn"])})}).catch(s=>{window.alert(s.message)})}sendEmailVerification(){throw new Error("Method not implemented.")}Login(i,r){return xN(this.auth,i,r).then(s=>{this.UserData=s.user,this.ngZone.run(()=>{this.router.navigate(["/"])})}).catch(s=>{window.alert(s.message)})}googleSignIn(){return this.loginWithPopup(new $E)}loginWithPopup(i){return MN(this.auth,i).then(r=>(console.log("logged in",r),r)).catch(r=>{console.log(r)})}logout(){NN(this.auth).then(()=>this.router.navigate(["/signIn"]))}isSignedIn(){return tI().currentUser!==null}};e.\u0275fac=function(r){return new(r||e)(y($s),y(L),y(Ln))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var b9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jn={},M,bI=bI||{},ee=b9||self;function Up(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function iu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function D9(t){return Object.prototype.hasOwnProperty.call(t,nI)&&t[nI]||(t[nI]=++C9)}var nI="closure_uid_"+(1e9*Math.random()>>>0),C9=0;function T9(t,e,n){return t.call.apply(t.bind,arguments)}function S9(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function St(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?St=T9:St=S9,St.apply(null,arguments)}function Ap(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function ut(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Fr(){this.s=this.s,this.o=this.o}var A9=0;Fr.prototype.s=!1;Fr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),A9!=0)&&D9(this)};Fr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var qN=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function DI(t){let e=t.length;if(0<e){let n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function PN(t,e){for(let n=1;n<arguments.length;n++){let i=arguments[n];if(Up(i)){let r=t.length||0,s=i.length||0;t.length=r+s;for(let o=0;o<s;o++)t[r+o]=i[o]}else t.push(i)}}function At(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var R9=function(){if(!ee.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};ee.addEventListener("test",n,e),ee.removeEventListener("test",n,e)}catch{}return t}();function Ql(t){return/^[\s\xa0]*$/.test(t)}function $p(){var t=ee.navigator;return t&&(t=t.userAgent)?t:""}function Ii(t){return $p().indexOf(t)!=-1}function CI(t){return CI[" "](t),t}CI[" "]=function(){};function x9(t,e){var n=_6;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var M9=Ii("Opera"),Oa=Ii("Trident")||Ii("MSIE"),GN=Ii("Edge"),aI=GN||Oa,WN=Ii("Gecko")&&!($p().toLowerCase().indexOf("webkit")!=-1&&!Ii("Edge"))&&!(Ii("Trident")||Ii("MSIE"))&&!Ii("Edge"),N9=$p().toLowerCase().indexOf("webkit")!=-1&&!Ii("Edge");function KN(){var t=ee.document;return t?t.documentMode:void 0}var cI;e:{if(Rp="",xp=function(){var t=$p();if(WN)return/rv:([^\);]+)(\)|;)/.exec(t);if(GN)return/Edge\/([\d\.]+)/.exec(t);if(Oa)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(N9)return/WebKit\/(\S+)/.exec(t);if(M9)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),xp&&(Rp=xp?xp[1]:""),Oa&&(Mp=KN(),Mp!=null&&Mp>parseFloat(Rp))){cI=String(Mp);break e}cI=Rp}var Rp,xp,Mp,lI;ee.document&&Oa?(iI=KN(),lI=iI||parseInt(cI,10)||void 0):lI=void 0;var iI,P9=lI;function Yl(t,e){if(At.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(WN){e:{try{CI(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:O9[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Yl.$.h.call(this)}}ut(Yl,At);var O9={2:"touch",3:"pen",4:"mouse"};Yl.prototype.h=function(){Yl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ru="closure_listenable_"+(1e6*Math.random()|0),k9=0;function F9(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++k9,this.fa=this.ia=!1}function Hp(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function TI(t,e,n){for(let i in t)e.call(n,t[i],i,t)}function L9(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function QN(t){let e={};for(let n in t)e[n]=t[n];return e}var ON="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function YN(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<ON.length;s++)n=ON[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function zp(t){this.src=t,this.g={},this.h=0}zp.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=dI(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new F9(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};function uI(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=qN(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Hp(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function dI(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}var SI="closure_lm_"+(1e6*Math.random()|0),rI={};function ZN(t,e,n,i,r){if(i&&i.once)return JN(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)ZN(t,e[s],n,i,r);return null}return n=xI(n),t&&t[ru]?t.O(e,n,iu(i)?!!i.capture:!!i,r):XN(t,e,n,!1,i,r)}function XN(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=iu(r)?!!r.capture:!!r,a=RI(t);if(a||(t[SI]=a=new zp(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=V9(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)R9||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(tP(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function V9(){function t(n){return e.call(t.src,t.listener,n)}let e=j9;return t}function JN(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)JN(t,e[s],n,i,r);return null}return n=xI(n),t&&t[ru]?t.P(e,n,iu(i)?!!i.capture:!!i,r):XN(t,e,n,!0,i,r)}function eP(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)eP(t,e[s],n,i,r);else i=iu(i)?!!i.capture:!!i,n=xI(n),t&&t[ru]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=dI(s,n,i,r),-1<n&&(Hp(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=RI(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dI(e,n,i,r)),(n=-1<t?e[t]:null)&&AI(n))}function AI(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ru])uI(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(tP(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=RI(e))?(uI(n,t),n.h==0&&(n.src=null,e[SI]=null)):Hp(t)}}}function tP(t){return t in rI?rI[t]:rI[t]="on"+t}function j9(t,e){if(t.fa)t=!0;else{e=new Yl(e,this);var n=t.listener,i=t.la||t.src;t.ia&&AI(t),t=n.call(i,e)}return t}function RI(t){return t=t[SI],t instanceof zp?t:null}var sI="__closure_events_fn_"+(1e9*Math.random()>>>0);function xI(t){return typeof t=="function"?t:(t[sI]||(t[sI]=function(e){return t.handleEvent(e)}),t[sI])}function lt(){Fr.call(this),this.i=new zp(this),this.S=this,this.J=null}ut(lt,Fr);lt.prototype[ru]=!0;lt.prototype.removeEventListener=function(t,e,n,i){eP(this,t,e,n,i)};function yt(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new At(e,t);else if(e instanceof At)e.target=e.target||t;else{var r=e;e=new At(i,t),YN(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=Np(o,i,!0,e)&&r}if(o=e.g=t,r=Np(o,i,!0,e)&&r,r=Np(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=Np(o,i,!1,e)&&r}lt.prototype.N=function(){if(lt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Hp(n[i]);delete t.g[e],t.h--}}this.J=null};lt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};lt.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function Np(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&uI(t.i,o),r=a.call(c,i)!==!1&&r}}return r&&!i.defaultPrevented}var MI=ee.JSON.stringify,hI=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function B9(){var t=NI;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var fI=class{constructor(){this.h=this.g=null}add(e,n){let i=nP.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}},nP=new hI(()=>new pI,t=>t.reset()),pI=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function U9(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function $9(t){ee.setTimeout(()=>{throw t},0)}var Zl,Xl=!1,NI=new fI,iP=()=>{let t=ee.Promise.resolve(void 0);Zl=()=>{t.then(H9)}},H9=()=>{for(var t;t=B9();){try{t.h.call(t.g)}catch(n){$9(n)}var e=nP;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Xl=!1};function qp(t,e){lt.call(this),this.h=t||1,this.g=e||ee,this.j=St(this.qb,this),this.l=Date.now()}ut(qp,lt);M=qp.prototype;M.ga=!1;M.T=null;M.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),yt(this,"tick"),this.ga&&(PI(this),this.start()))}};M.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function PI(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}M.N=function(){qp.$.N.call(this),PI(this),delete this.g};function OI(t,e,n){if(typeof t=="function")n&&(t=St(t,n));else if(t&&typeof t.handleEvent=="function")t=St(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ee.setTimeout(t,e||0)}function rP(t){t.g=OI(()=>{t.g=null,t.i&&(t.i=!1,rP(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var mI=class extends Fr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:rP(this)}N(){super.N(),this.g&&(ee.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Jl(t){Fr.call(this),this.h=t,this.g={}}ut(Jl,Fr);var kN=[];function sP(t,e,n,i){Array.isArray(n)||(n&&(kN[0]=n.toString()),n=kN);for(var r=0;r<n.length;r++){var s=ZN(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function oP(t){TI(t.g,function(e,n){this.g.hasOwnProperty(n)&&AI(e)},t),t.g={}}Jl.prototype.N=function(){Jl.$.N.call(this),oP(this)};Jl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Gp(){this.g=!0}Gp.prototype.Ea=function(){this.g=!1};function z9(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function q9(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+o})}function Na(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+W9(t,n)+(i?" "+i:"")})}function G9(t,e){t.info(function(){return"TIMEOUT: "+e})}Gp.prototype.info=function(){};function W9(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return MI(n)}catch{return e}}var Gs={},FN=null;function Wp(){return FN=FN||new lt}Gs.Ta="serverreachability";function aP(t){At.call(this,Gs.Ta,t)}ut(aP,At);function eu(t){let e=Wp();yt(e,new aP(e))}Gs.STAT_EVENT="statevent";function cP(t,e){At.call(this,Gs.STAT_EVENT,t),this.stat=e}ut(cP,At);function Lt(t){let e=Wp();yt(e,new cP(e,t))}Gs.Ua="timingevent";function lP(t,e){At.call(this,Gs.Ua,t),this.size=e}ut(lP,At);function su(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ee.setTimeout(function(){t()},e)}var Kp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},uP={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function kI(){}kI.prototype.h=null;function LN(t){return t.h||(t.h=t.i())}function dP(){}var ou={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function FI(){At.call(this,"d")}ut(FI,At);function LI(){At.call(this,"c")}ut(LI,At);var gI;function Qp(){}ut(Qp,kI);Qp.prototype.g=function(){return new XMLHttpRequest};Qp.prototype.i=function(){return{}};gI=new Qp;function au(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Jl(this),this.P=K9,t=aI?125:void 0,this.V=new qp(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new hP}function hP(){this.i=null,this.g="",this.h=!1}var K9=45e3,fP={},yI={};M=au.prototype;M.setTimeout=function(t){this.P=t};function _I(t,e,n){t.L=1,t.A=Zp(Qi(e)),t.u=n,t.S=!0,pP(t,null)}function pP(t,e){t.G=Date.now(),cu(t),t.B=Qi(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),IP(n.i,"t",i),t.o=0,n=t.l.J,t.h=new hP,t.g=HP(t.l,n?e:null,!t.u),0<t.O&&(t.M=new mI(St(t.Pa,t,t.g),t.O)),sP(t.U,t.g,"readystatechange",t.nb),e=t.I?QN(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),eu(),z9(t.j,t.v,t.B,t.m,t.W,t.u)}M.nb=function(t){t=t.target;let e=this.M;e&&bi(t)==3?e.l():this.Pa(t)};M.Pa=function(t){try{if(t==this.g)e:{let u=bi(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||aI||this.g&&(this.h.h||this.g.ja()||UN(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?eu(3):eu(2)),Yp(this);var n=this.g.da();this.ca=n;t:if(mP(this)){var i=UN(this.g);t="";var r=i.length,s=bi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hs(this),Kl(this);var o="";break t}this.h.i=new ee.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,q9(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ql(a)){var l=a;break t}}l=null}if(n=l)Na(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vI(this,n);else{this.i=!1,this.s=3,Lt(12),Hs(this),Kl(this);break e}}this.S?(gP(this,u,o),aI&&this.i&&u==3&&(sP(this.U,this.V,"tick",this.mb),this.V.start())):(Na(this.j,this.m,o,null),vI(this,o)),u==4&&Hs(this),this.i&&!this.J&&(u==4?jP(this.l,this):(this.i=!1,cu(this)))}else m6(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),Hs(this),Kl(this)}}}catch{}finally{}};function mP(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function gP(t,e,n){let i=!0,r;for(;!t.J&&t.o<n.length;)if(r=Q9(t,n),r==yI){e==4&&(t.s=4,Lt(14),i=!1),Na(t.j,t.m,null,"[Incomplete Response]");break}else if(r==fP){t.s=4,Lt(15),Na(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Na(t.j,t.m,r,null),vI(t,r);mP(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Lt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),HI(e),e.M=!0,Lt(11))):(Na(t.j,t.m,n,"[Invalid Chunked Response]"),Hs(t),Kl(t))}M.mb=function(){if(this.g){var t=bi(this.g),e=this.g.ja();this.o<e.length&&(Yp(this),gP(this,t,e),this.i&&t!=4&&cu(this))}};function Q9(t,e){var n=t.o,i=e.indexOf(`
`,n);return i==-1?yI:(n=Number(e.substring(n,i)),isNaN(n)?fP:(i+=1,i+n>e.length?yI:(e=e.slice(i,i+n),t.o=i+n,e)))}M.cancel=function(){this.J=!0,Hs(this)};function cu(t){t.Y=Date.now()+t.P,yP(t,t.P)}function yP(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=su(St(t.lb,t),e)}function Yp(t){t.C&&(ee.clearTimeout(t.C),t.C=null)}M.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(G9(this.j,this.B),this.L!=2&&(eu(),Lt(17)),Hs(this),this.s=2,Kl(this)):yP(this,this.Y-t)};function Kl(t){t.l.H==0||t.J||jP(t.l,t)}function Hs(t){Yp(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,PI(t.V),oP(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function vI(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||wI(n.i,t))){if(!t.K&&wI(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Lp(n),em(n);else break e;$I(n),Lt(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=su(St(n.ib,n),6e3));if(1>=CP(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else zs(n,11)}else if((t.K||n.g==t)&&Lp(n),!Ql(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(i=1.5*h,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;let f=t.g;if(f){let p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=i.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(VI(s,s.h),s.h=null))}if(i.F){let g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(i.Da=g,Fe(i.I,i.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=$P(i,i.J?i.pa:null,i.Y),o.K){TP(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.C&&(Yp(a),cu(a)),i.g=o}else LP(i);0<n.j.length&&tm(n)}else l[0]!="stop"&&l[0]!="close"||zs(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?zs(n,7):UI(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}eu(4)}catch{}}function Y9(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Up(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function Z9(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Up(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let i in t)e[n++]=i;return e}}}function _P(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Up(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Z9(t),i=Y9(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}var vP=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function X9(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function qs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof qs){this.h=t.h,kp(this,t.j),this.s=t.s,this.g=t.g,Fp(this,t.m),this.l=t.l;var e=t.i,n=new tu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),VN(this,n),this.o=t.o}else t&&(e=String(t).match(vP))?(this.h=!1,kp(this,e[1]||"",!0),this.s=Gl(e[2]||""),this.g=Gl(e[3]||"",!0),Fp(this,e[4]),this.l=Gl(e[5]||"",!0),VN(this,e[6]||"",!0),this.o=Gl(e[7]||"")):(this.h=!1,this.i=new tu(null,this.h))}qs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Wl(e,jN,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Wl(e,jN,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Wl(n,n.charAt(0)=="/"?t6:e6,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Wl(n,i6)),t.join("")};function Qi(t){return new qs(t)}function kp(t,e,n){t.j=n?Gl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Fp(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function VN(t,e,n){e instanceof tu?(t.i=e,r6(t.i,t.h)):(n||(e=Wl(e,n6)),t.i=new tu(e,t.h))}function Fe(t,e,n){t.i.set(e,n)}function Zp(t){return Fe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Gl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Wl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,J9),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function J9(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var jN=/[#\/\?@]/g,e6=/[#\?:]/g,t6=/[#\?]/g,n6=/[#\?@]/g,i6=/#/g;function tu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Lr(t){t.g||(t.g=new Map,t.h=0,t.i&&X9(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}M=tu.prototype;M.add=function(t,e){Lr(this),this.i=null,t=ka(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function wP(t,e){Lr(t),e=ka(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function EP(t,e){return Lr(t),e=ka(t,e),t.g.has(e)}M.forEach=function(t,e){Lr(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};M.ta=function(){Lr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){let r=t[i];for(let s=0;s<r.length;s++)n.push(e[i])}return n};M.Z=function(t){Lr(this);let e=[];if(typeof t=="string")EP(this,t)&&(e=e.concat(this.g.get(ka(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};M.set=function(t,e){return Lr(this),this.i=null,t=ka(this,t),EP(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};M.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function IP(t,e,n){wP(t,e),0<n.length&&(t.i=null,t.g.set(ka(t,e),DI(n)),t.h+=n.length)}M.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];let s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};function ka(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function r6(t,e){e&&!t.j&&(Lr(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(wP(this,i),IP(this,r,n))},t)),t.j=e}var s6=class{constructor(t,e){this.g=t,this.map=e}};function bP(t){this.l=t||o6,ee.PerformanceNavigationTiming?(t=ee.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ee.g&&ee.g.Ka&&ee.g.Ka()&&ee.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var o6=10;function DP(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function CP(t){return t.h?1:t.g?t.g.size:0}function wI(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function VI(t,e){t.g?t.g.add(e):t.h=e}function TP(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}bP.prototype.cancel=function(){if(this.i=SP(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function SP(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return DI(t.i)}var a6=class{stringify(t){return ee.JSON.stringify(t,void 0)}parse(t){return ee.JSON.parse(t,void 0)}};function c6(){this.g=new a6}function l6(t,e,n){let i=n||"";try{_P(t,function(r,s){let o=r;iu(r)&&(o=MI(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function u6(t,e){let n=new Gp;if(ee.Image){let i=new Image;i.onload=Ap(Pp,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Ap(Pp,n,i,"TestLoadImage: error",!1,e),i.onabort=Ap(Pp,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Ap(Pp,n,i,"TestLoadImage: timeout",!1,e),ee.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function Pp(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function lu(t){this.l=t.ec||null,this.j=t.ob||!1}ut(lu,kI);lu.prototype.g=function(){return new Xp(this.l,this.j)};lu.prototype.i=function(t){return function(){return t}}({});function Xp(t,e){lt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=jI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ut(Xp,lt);var jI=0;M=Xp.prototype;M.open=function(t,e){if(this.readyState!=jI)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,nu(this)};M.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ee).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};M.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,uu(this)),this.readyState=jI};M.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,nu(this)),this.g&&(this.readyState=3,nu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ee.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;AP(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function AP(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}M.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?uu(this):nu(this),this.readyState==3&&AP(this)}};M.Za=function(t){this.g&&(this.response=this.responseText=t,uu(this))};M.Ya=function(t){this.g&&(this.response=t,uu(this))};M.ka=function(){this.g&&uu(this)};function uu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,nu(t)}M.setRequestHeader=function(t,e){this.v.append(t,e)};M.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};M.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function nu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Xp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var d6=ee.JSON.parse;function qe(t){lt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=RP,this.L=this.M=!1}ut(qe,lt);var RP="",h6=/^https?$/i,f6=["POST","PUT"];M=qe.prototype;M.Oa=function(t){this.M=t};M.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():gI.g(),this.C=this.u?LN(this.u):LN(gI),this.g.onreadystatechange=St(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){BN(this,s);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(let s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=ee.FormData&&t instanceof ee.FormData,!(0<=qN(f6,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{NP(this),0<this.B&&((this.L=p6(this.g))?(this.g.timeout=this.B,this.g.ontimeout=St(this.ua,this)):this.A=OI(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){BN(this,s)}};function p6(t){return Oa&&typeof t.timeout=="number"&&t.ontimeout!==void 0}M.ua=function(){typeof bI<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yt(this,"timeout"),this.abort(8))};function BN(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,xP(t),Jp(t)}function xP(t){t.F||(t.F=!0,yt(t,"complete"),yt(t,"error"))}M.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,yt(this,"complete"),yt(this,"abort"),Jp(this))};M.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jp(this,!0)),qe.$.N.call(this)};M.La=function(){this.s||(this.G||this.v||this.l?MP(this):this.kb())};M.kb=function(){MP(this)};function MP(t){if(t.h&&typeof bI<"u"&&(!t.C[1]||bi(t)!=4||t.da()!=2)){if(t.v&&bi(t)==4)OI(t.La,0,t);else if(yt(t,"readystatechange"),bi(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=o===0){var r=String(t.I).match(vP)[1]||null;!r&&ee.self&&ee.self.location&&(r=ee.self.location.protocol.slice(0,-1)),i=!h6.test(r?r.toLowerCase():"")}n=i}if(n)yt(t,"complete"),yt(t,"success");else{t.m=6;try{var s=2<bi(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",xP(t)}}finally{Jp(t)}}}}function Jp(t,e){if(t.g){NP(t);let n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||yt(t,"ready");try{n.onreadystatechange=i}catch{}}}function NP(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ee.clearTimeout(t.A),t.A=null)}M.isActive=function(){return!!this.g};function bi(t){return t.g?t.g.readyState:0}M.da=function(){try{return 2<bi(this)?this.g.status:-1}catch{return-1}};M.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};M.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),d6(e)}};function UN(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case RP:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function m6(t){let e={};t=(t.g&&2<=bi(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(Ql(t[i]))continue;var n=U9(t[i]);let r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[r]||[];e[r]=s,s.push(n)}L9(e,function(i){return i.join(", ")})}M.Ia=function(){return this.m};M.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function PP(t){let e="";return TI(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function BI(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=PP(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Fe(t,e,n))}function zl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function OP(t){this.Ga=0,this.j=[],this.l=new Gp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=zl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=zl("baseRetryDelayMs",5e3,t),this.hb=zl("retryDelaySeedMs",1e4,t),this.eb=zl("forwardChannelMaxRetries",2,t),this.xa=zl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new bP(t&&t.concurrentRequestLimit),this.Ja=new c6,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}M=OP.prototype;M.ra=8;M.H=1;function UI(t){if(kP(t),t.H==3){var e=t.W++,n=Qi(t.I);if(Fe(n,"SID",t.K),Fe(n,"RID",e),Fe(n,"TYPE","terminate"),du(t,n),e=new au(t,t.l,e),e.L=2,e.A=Zp(Qi(n)),n=!1,ee.navigator&&ee.navigator.sendBeacon)try{n=ee.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&ee.Image&&(new Image().src=e.A,n=!0),n||(e.g=HP(e.l,null),e.g.ha(e.A)),e.G=Date.now(),cu(e)}UP(t)}function em(t){t.g&&(HI(t),t.g.cancel(),t.g=null)}function kP(t){em(t),t.u&&(ee.clearTimeout(t.u),t.u=null),Lp(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ee.clearTimeout(t.m),t.m=null)}function tm(t){if(!DP(t.i)&&!t.m){t.m=!0;var e=t.Na;Zl||iP(),Xl||(Zl(),Xl=!0),NI.add(e,t),t.C=0}}function g6(t,e){return CP(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=su(St(t.Na,t,e),BP(t,t.C)),t.C++,!0)}M.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let r=new au(this,this.l,t),s=this.s;if(this.U&&(s?(s=QN(s),YN(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=FP(this,r,e),n=Qi(this.I),Fe(n,"RID",t),Fe(n,"CVER",22),this.F&&Fe(n,"X-HTTP-Session-Id",this.F),du(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(PP(s)))+"&"+e:this.o&&BI(n,this.o,s)),VI(this.i,r),this.bb&&Fe(n,"TYPE","init"),this.P?(Fe(n,"$req",e),Fe(n,"SID","null"),r.aa=!0,_I(r,n,null)):_I(r,n,e),this.H=2}}else this.H==3&&(t?$N(this,t):this.j.length==0||DP(this.i)||$N(this))};function $N(t,e){var n;e?n=e.m:n=t.W++;let i=Qi(t.I);Fe(i,"SID",t.K),Fe(i,"RID",n),Fe(i,"AID",t.V),du(t,i),t.o&&t.s&&BI(i,t.o,t.s),n=new au(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=FP(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),VI(t.i,n),_I(n,i,e)}function du(t,e){t.na&&TI(t.na,function(n,i){Fe(e,i,n)}),t.h&&_P({},function(n,i){Fe(e,i,n)})}function FP(t,e,n){n=Math.min(t.j.length,n);var i=t.h?St(t.h.Va,t.h,t):null;e:{var r=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let l=r[c].g,u=r[c].map;if(l-=s,0>l)s=Math.max(0,r[c].g-100),a=!1;else try{l6(u,o,"req"+l+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function LP(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Zl||iP(),Xl||(Zl(),Xl=!0),NI.add(e,t),t.A=0}}function $I(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=su(St(t.Ma,t),BP(t,t.A)),t.A++,!0)}M.Ma=function(){if(this.u=null,VP(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=su(St(this.jb,this),t)}};M.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Lt(10),em(this),VP(this))};function HI(t){t.B!=null&&(ee.clearTimeout(t.B),t.B=null)}function VP(t){t.g=new au(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Qi(t.wa);Fe(e,"RID","rpc"),Fe(e,"SID",t.K),Fe(e,"AID",t.V),Fe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Fe(e,"TO",t.qa),Fe(e,"TYPE","xmlhttp"),du(t,e),t.o&&t.s&&BI(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Zp(Qi(e)),n.u=null,n.S=!0,pP(n,t)}M.ib=function(){this.v!=null&&(this.v=null,em(this),$I(this),Lt(19))};function Lp(t){t.v!=null&&(ee.clearTimeout(t.v),t.v=null)}function jP(t,e){var n=null;if(t.g==e){Lp(t),HI(t),t.g=null;var i=2}else if(wI(t.i,e))n=e.F,TP(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;i=Wp(),yt(i,new lP(i,n)),tm(t)}else LP(t);else if(r=e.s,r==3||r==0&&0<e.ca||!(i==1&&g6(t,e)||i==2&&$I(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:zs(t,5);break;case 4:zs(t,10);break;case 3:zs(t,6);break;default:zs(t,2)}}}function BP(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function zs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=St(t.pb,t);n||(n=new qs("//www.google.com/images/cleardot.gif"),ee.location&&ee.location.protocol=="http"||kp(n,"https"),Zp(n)),u6(n.toString(),i)}else Lt(2);t.H=0,t.h&&t.h.za(e),UP(t),kP(t)}M.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Lt(2)):(this.l.info("Failed to ping google.com"),Lt(1))};function UP(t){if(t.H=0,t.ma=[],t.h){let e=SP(t.i);(e.length!=0||t.j.length!=0)&&(PN(t.ma,e),PN(t.ma,t.j),t.i.i.length=0,DI(t.j),t.j.length=0),t.h.ya()}}function $P(t,e,n){var i=n instanceof qs?Qi(n):new qs(n);if(i.g!="")e&&(i.g=e+"."+i.g),Fp(i,i.m);else{var r=ee.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new qs(null);i&&kp(s,i),e&&(s.g=e),r&&Fp(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&Fe(i,n,e),Fe(i,"VER",t.ra),du(t,i),i}function HP(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new qe(new lu({ob:n})):new qe(t.va),e.Oa(t.J),e}M.isActive=function(){return!!this.h&&this.h.isActive(this)};function zP(){}M=zP.prototype;M.Ba=function(){};M.Aa=function(){};M.za=function(){};M.ya=function(){};M.isActive=function(){return!0};M.Va=function(){};function Vp(){if(Oa&&!(10<=Number(P9)))throw Error("Environmental error: no available transport.")}Vp.prototype.g=function(t,e){return new tn(t,e)};function tn(t,e){lt.call(this),this.g=new OP(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ql(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ql(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Fa(this)}ut(tn,lt);tn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Lt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=$P(t,null,t.Y),tm(t)};tn.prototype.close=function(){UI(this.g)};tn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=MI(t),t=n);e.j.push(new s6(e.fb++,t)),e.H==3&&tm(e)};tn.prototype.N=function(){this.g.h=null,delete this.j,UI(this.g),delete this.g,tn.$.N.call(this)};function qP(t){FI.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ut(qP,FI);function GP(){LI.call(this),this.status=1}ut(GP,LI);function Fa(t){this.g=t}ut(Fa,zP);Fa.prototype.Ba=function(){yt(this.g,"a")};Fa.prototype.Aa=function(t){yt(this.g,new qP(t))};Fa.prototype.za=function(t){yt(this.g,new GP)};Fa.prototype.ya=function(){yt(this.g,"b")};function y6(){this.blockSize=-1}function Vn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ut(Vn,y6);Vn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function oI(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}Vn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=n;)oI(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){oI(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){oI(this,i),r=0;break}}this.h=r,this.i+=e};Vn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function Ce(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=t[r]|0;i&&s==e||(n[r]=s,i=!1)}this.g=n}var _6={};function zI(t){return-128<=t&&128>t?x9(t,function(e){return new Ce([e|0],0>e?-1:0)}):new Ce([t|0],0>t?-1:0)}function Di(t){if(isNaN(t)||!isFinite(t))return Pa;if(0>t)return gt(Di(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=EI;return new Ce(e,0)}function WP(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return gt(WP(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Di(Math.pow(e,8)),i=Pa,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+s),e);8>s?(s=Di(Math.pow(e,s)),i=i.R(s).add(Di(o))):(i=i.R(n),i=i.add(Di(o)))}return i}var EI=4294967296,Pa=zI(0),II=zI(1),HN=zI(16777216);M=Ce.prototype;M.ea=function(){if(En(this))return-gt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:EI+i)*e,e*=EI}return t};M.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Ki(this))return"0";if(En(this))return"-"+gt(this).toString(t);for(var e=Di(Math.pow(t,6)),n=this,i="";;){var r=Bp(n,e).g;n=jp(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Ki(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};M.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Ki(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function En(t){return t.h==-1}M.X=function(t){return t=jp(this,t),En(t)?-1:Ki(t)?0:1};function gt(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Ce(n,~t.h).add(II)}M.abs=function(){return En(this)?gt(this):this};M.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(t.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new Ce(n,n[n.length-1]&-2147483648?-1:0)};function jp(t,e){return t.add(gt(e))}M.R=function(t){if(Ki(this)||Ki(t))return Pa;if(En(this))return En(t)?gt(this).R(gt(t)):gt(gt(this).R(t));if(En(t))return gt(this.R(gt(t)));if(0>this.X(HN)&&0>t.X(HN))return Di(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=t.D(r)>>>16,c=t.D(r)&65535;n[2*i+2*r]+=o*c,Op(n,2*i+2*r),n[2*i+2*r+1]+=s*c,Op(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,Op(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,Op(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Ce(n,0)};function Op(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ql(t,e){this.g=t,this.h=e}function Bp(t,e){if(Ki(e))throw Error("division by zero");if(Ki(t))return new ql(Pa,Pa);if(En(t))return e=Bp(gt(t),e),new ql(gt(e.g),gt(e.h));if(En(e))return e=Bp(t,gt(e)),new ql(gt(e.g),e.h);if(30<t.g.length){if(En(t)||En(e))throw Error("slowDivide_ only works with positive integers.");for(var n=II,i=e;0>=i.X(t);)n=zN(n),i=zN(i);var r=Ma(n,1),s=Ma(i,1);for(i=Ma(i,2),n=Ma(n,2);!Ki(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=Ma(i,1),n=Ma(n,1)}return e=jp(t,r.R(e)),new ql(r,e)}for(r=Pa;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=Di(n),o=s.R(e);En(o)||0<o.X(t);)n-=i,s=Di(n),o=s.R(e);Ki(s)&&(s=II),r=r.add(s),t=jp(t,o)}return new ql(r,t)}M.gb=function(t){return Bp(this,t).h};M.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Ce(n,this.h&t.h)};M.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Ce(n,this.h|t.h)};M.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Ce(n,this.h^t.h)};function zN(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Ce(n,t.h)}function Ma(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ce(r,t.h)}Vp.prototype.createWebChannel=Vp.prototype.g;tn.prototype.send=tn.prototype.u;tn.prototype.open=tn.prototype.m;tn.prototype.close=tn.prototype.close;Kp.NO_ERROR=0;Kp.TIMEOUT=8;Kp.HTTP_ERROR=6;uP.COMPLETE="complete";dP.EventType=ou;ou.OPEN="a";ou.CLOSE="b";ou.ERROR="c";ou.MESSAGE="d";lt.prototype.listen=lt.prototype.O;qe.prototype.listenOnce=qe.prototype.P;qe.prototype.getLastError=qe.prototype.Sa;qe.prototype.getLastErrorCode=qe.prototype.Ia;qe.prototype.getStatus=qe.prototype.da;qe.prototype.getResponseJson=qe.prototype.Wa;qe.prototype.getResponseText=qe.prototype.ja;qe.prototype.send=qe.prototype.ha;qe.prototype.setWithCredentials=qe.prototype.Oa;Vn.prototype.digest=Vn.prototype.l;Vn.prototype.reset=Vn.prototype.reset;Vn.prototype.update=Vn.prototype.j;Ce.prototype.add=Ce.prototype.add;Ce.prototype.multiply=Ce.prototype.R;Ce.prototype.modulo=Ce.prototype.gb;Ce.prototype.compare=Ce.prototype.X;Ce.prototype.toNumber=Ce.prototype.ea;Ce.prototype.toString=Ce.prototype.toString;Ce.prototype.getBits=Ce.prototype.D;Ce.fromNumber=Di;Ce.fromString=WP;var KP=jn.createWebChannelTransport=function(){return new Vp},QP=jn.getStatEventTarget=function(){return Wp()},nm=jn.ErrorCode=Kp,YP=jn.EventType=uP,ZP=jn.Event=Gs,qI=jn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Tae=jn.FetchXmlHttpFactory=lu,hu=jn.WebChannel=dP,XP=jn.XhrIo=qe,JP=jn.Md5=Vn,Ws=jn.Integer=Ce;var eO="@firebase/firestore";var dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");var lc="10.7.2";var ro=new Ar("@firebase/firestore");function Ua(){return ro.logLevel}function b(t,...e){if(ro.logLevel<=pe.DEBUG){let n=e.map(qD);ro.debug(`Firestore (${lc}): ${t}`,...n)}}function Ze(t,...e){if(ro.logLevel<=pe.ERROR){let n=e.map(qD);ro.error(`Firestore (${lc}): ${t}`,...n)}}function Cu(t,...e){if(ro.logLevel<=pe.WARN){let n=e.map(qD);ro.warn(`Firestore (${lc}): ${t}`,...n)}}function qD(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function k(t="Unexpected state"){let e=`FIRESTORE (${lc}) INTERNAL ASSERTION FAILED: `+t;throw Ze(e),new Error(e)}function B(t,e){t||k()}function V(t,e){return t}var w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},R=class extends en{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var bn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var XI=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},JI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}};var eb=class{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve(),s=new bn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new bn,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>m(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{b("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(b("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new bn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(b("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(B(typeof i.accessToken=="string"),new XI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return B(e===null||typeof e=="string"),new dt(e)}},tb=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},nb=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new tb(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ib=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},rb=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=s=>{s.error!=null&&b("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,b("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{b("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):b("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(B(typeof n.token=="string"),this.R=n.token,new ib(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function v6(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var hm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=v6(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}};function re(t,e){return t<e?-1:t>e?1:0}function Ya(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function ek(t){return t+"\0"}var Xe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new R(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new R(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new R(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new R(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var z=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Xe(0,0))}static max(){return new t(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var fm=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&k(),i===void 0?i=e.length-n:i>e.length-n&&k(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Re=class t extends fm{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new R(w.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},w6=/^[_a-zA-Z][_a-zA-Z0-9]*$/,rt=class t extends fm{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return w6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,s=()=>{if(i.length===0)throw new R(w.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new R(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new R(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new R(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var P=class t{constructor(e){this.path=e}static fromPath(e){return new t(Re.fromString(e))}static fromName(e){return new t(Re.fromString(e).popFirst(5))}static empty(){return new t(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Re(e.slice()))}};var Za=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function sb(t){return t.fields.find(e=>e.kind===2)}function Qs(t){return t.fields.filter(e=>e.kind!==2)}Za.UNKNOWN_ID=-1;var Wa=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Tu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Dn.min())}};function tk(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=z.fromTimestamp(i===1e9?new Xe(n+1,0):new Xe(n,i));return new Dn(r,P.empty(),e)}function nk(t){return new Dn(t.readTime,t.key,-1)}var Dn=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(z.min(),P.empty(),-1)}static max(){return new t(z.max(),P.empty(),-1)}};function GD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=P.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}var ik="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Xr(t){return m(this,null,function*(){if(t.code!==w.FAILED_PRECONDITION||t.message!==ik)throw t;b("LocalStore","Unexpectedly lost primary lease")})}var _=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&k(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},c=>i(c))}),o=!0,s===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(u=>{o[l]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,n){return new t((i,r)=>{let s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}};var mm=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new bn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new no(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=WD(i.target.error);this.V.reject(new no(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(s){throw new no(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(b("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new ab(n)}},so=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(ze())===12.2&&Ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return b("SimpleDb","Removing database:",e),Ys(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Jf())return!1;if(t.C())return!0;let e=ze(),n=t.S(e),i=0<n&&n<10,r=t.v(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){let n=e.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}O(e){return m(this,null,function*(){return this.db||(b("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{let o=s.target.result;n(o)},r.onblocked=()=>{i(new no(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{let o=s.target.error;o.name==="VersionError"?i(new R(w.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new R(w.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new no(e,o))},r.onupgradeneeded=s=>{b("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,r.transaction,s.oldVersion,this.version).next(()=>{b("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return m(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=mm.open(this.db,e,s?"readonly":"readwrite",i),c=r(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),_.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(b("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},ob=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ys(this.k.delete())}},no=class extends R{constructor(e,n){super(w.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Jr(t){return t.name==="IndexedDbTransactionError"}var ab=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(b("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(b("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Ys(i)}add(e){return b("SimpleDb","ADD",this.store.name,e,e),Ys(this.store.add(e))}get(e){return Ys(this.store.get(e)).next(n=>(n===void 0&&(n=null),b("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return b("SimpleDb","DELETE",this.store.name,e),Ys(this.store.delete(e))}count(){return b("SimpleDb","COUNT",this.store.name),Ys(this.store.count())}W(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let s=r.getAll(i.range);return new _((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(i),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new _((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}H(e,n){b("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.J=!1;let r=this.cursor(i);return this.G(r,(s,o,a)=>a.delete())}Y(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.G(r,n)}Z(e){let n=this.cursor({});return new _((i,r)=>{n.onerror=s=>{let o=WD(s.target.error);r(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}G(e,n){let i=[];return new _((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void r();let c=new ob(a),l=n(a.primaryKey,a.value,c);if(l instanceof _){let u=l.catch(d=>(c.done(),_.reject(d)));i.push(u)}c.isDone?r():c.$===null?a.continue():a.continue(c.$)}}).next(()=>_.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Ys(t){return new _((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=WD(i.target.error);n(r)}})}var tO=!1;function WD(t){let e=so.S(ze());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new R("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tO||(tO=!0,setTimeout(()=>{throw i},0)),i}}return t}var cb=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){b("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>m(this,null,function*(){this.task=null;try{b("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){Jr(n)?b("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Xr(n)}yield this.ee(6e4)}))}},lb=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return m(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let i=new Set,r=n,s=!0;return _.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!i.has(o))return b("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>n-r)}re(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(r,s)).next(a=>(b("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let i=e;return n.changes.forEach((r,s)=>{let o=nk(s);GD(o,i)>0&&(i=o)}),new Dn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var nn=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.se(r),this.oe=r=>i.writeSequenceNumber(r))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function lg(t){return t==null}function Su(t){return t===0&&1/t==-1/0}function rk(t){return typeof t=="number"&&Number.isInteger(t)&&!Su(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function jt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=nO(e)),e=E6(t.get(n),e);return nO(e)}function E6(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let s=t.charAt(r);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function nO(t){return t+""}function Ci(t){let e=t.length;if(B(e>=2),e===2)return B(t.charAt(0)===""&&t.charAt(1)===""),Re.emptyPath();let n=e-2,i=[],r="";for(let s=0;s<e;){let o=t.indexOf("",s);switch((o<0||o>n)&&k(),t.charAt(o+1)){case"":let a=t.substring(s,o),c;r.length===0?c=a:(r+=a,c=r,r=""),i.push(c);break;case"":r+=t.substring(s,o),r+="\0";break;case"":r+=t.substring(s,o+1);break;default:k()}s=o+2}return new Re(i)}var iO=["userId","batchId"];function am(t,e){return[t,jt(e)]}function sk(t,e,n){return[t,jt(e),n]}var I6={},b6=["prefixPath","collectionGroup","readTime","documentId"],D6=["prefixPath","collectionGroup","documentId"],C6=["collectionGroup","readTime","prefixPath","documentId"],T6=["canonicalId","targetId"],S6=["targetId","path"],A6=["path","targetId"],R6=["collectionId","parent"],x6=["indexId","uid"],M6=["uid","sequenceNumber"],N6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],P6=["indexId","uid","orderedDocumentKey"],O6=["userId","collectionPath","documentId"],k6=["userId","collectionPath","largestBatchId"],F6=["userId","collectionGroup","largestBatchId"],ok=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],L6=[...ok,"documentOverlays"],ak=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ck=ak,V6=[...ck,"indexConfiguration","indexState","indexEntries"];var Au=class extends pm{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function ht(t,e){let n=V(t);return so.M(n.ae,e)}function rO(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function go(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lk(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Le=class t{constructor(e,n){this.comparator=e,this.root=n||Si.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Si.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Si.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ga(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ga(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ga(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ga(this.root,e,this.comparator,!0)}},Ga=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Si=class t{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new t(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw k();let e=this.left.check();if(e!==this.right.check())throw k();return e+(this.isRed()?0:1)}};Si.EMPTY=null,Si.RED=!0,Si.BLACK=!1;Si.EMPTY=new class{constructor(){this.size=0}get key(){throw k()}get value(){throw k()}get color(){throw k()}get left(){throw k()}get right(){throw k()}copy(e,n,i,r,s){return this}insert(e,n,i){return new Si(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ne=class t{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gm(this.data.getIterator())}getIteratorFrom(e){return new gm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},gm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function La(t){return t.hasNext()?t.getNext():void 0}var rn=class t{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ne(rt.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ya(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var ym=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var wt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ym("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};wt.EMPTY_BYTE_STRING=new wt("");var j6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(t){if(B(!!t),typeof t=="string"){let e=0,n=j6.exec(t);if(B(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zr(t){return typeof t=="string"?wt.fromBase64String(t):wt.fromUint8Array(t)}function KD(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function QD(t){let e=t.mapValue.fields.__previous_value__;return KD(e)?QD(e):e}function Ru(t){let e=Hr(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}var ub=class{constructor(e,n,i,r,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Xa=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Ur={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},cm={nullValue:"NULL_VALUE"};function oo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?KD(t)?4:uk(t)?9007199254740991:10:k()}function Ai(t,e){if(t===e)return!0;let n=oo(t);if(n!==oo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ru(t).isEqual(Ru(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=Hr(r.timestampValue),a=Hr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return zr(r.bytesValue).isEqual(zr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Ge(r.geoPointValue.latitude)===Ge(s.geoPointValue.latitude)&&Ge(r.geoPointValue.longitude)===Ge(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ge(r.integerValue)===Ge(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Ge(r.doubleValue),a=Ge(s.doubleValue);return o===a?Su(o)===Su(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ya(t.arrayValue.values||[],e.arrayValue.values||[],Ai);case 10:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(rO(o)!==rO(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Ai(o[c],a[c])))return!1;return!0}(t,e);default:return k()}}function xu(t,e){return(t.values||[]).find(n=>Ai(n,e))!==void 0}function qr(t,e){if(t===e)return 0;let n=oo(t),i=oo(e);if(n!==i)return re(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ge(s.integerValue||s.doubleValue),c=Ge(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return sO(t.timestampValue,e.timestampValue);case 4:return sO(Ru(t),Ru(e));case 5:return re(t.stringValue,e.stringValue);case 6:return function(s,o){let a=zr(s),c=zr(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=re(a[l],c[l]);if(u!==0)return u}return re(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=re(Ge(s.latitude),Ge(o.latitude));return a!==0?a:re(Ge(s.longitude),Ge(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=qr(a[l],c[l]);if(u)return u}return re(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ur.mapValue&&o===Ur.mapValue)return 0;if(s===Ur.mapValue)return 1;if(o===Ur.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=re(c[d],u[d]);if(h!==0)return h;let f=qr(a[c[d]],l[u[d]]);if(f!==0)return f}return re(c.length,u.length)}(t.mapValue,e.mapValue);default:throw k()}}function sO(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);let n=Hr(t),i=Hr(e),r=re(n.seconds,i.seconds);return r!==0?r:re(n.nanos,i.nanos)}function Ja(t){return db(t)}function db(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=Hr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return P.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let s of n.values||[])r?r=!1:i+=",",i+=db(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${db(n.fields[o])}`;return r+"}"}(t.mapValue):k()}function Mu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hb(t){return!!t&&"integerValue"in t}function Nu(t){return!!t&&"arrayValue"in t}function oO(t){return!!t&&"nullValue"in t}function aO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lm(t){return!!t&&"mapValue"in t}function vu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return go(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=vu(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function B6(t){return"nullValue"in t?cm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Mu(Xa.empty(),P.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:k()}function U6(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Mu(Xa.empty(),P.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ur:k()}function cO(t,e){let n=qr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function lO(t,e){let n=qr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Vt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!lm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vu(n)}setAll(e){let n=rt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=vu(o):r.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){let n=this.field(e.popLast());lm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ai(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];lm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){go(n,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new t(vu(this.value))}};function dk(t){let e=[];return go(t.fields,(n,i)=>{let r=new rt([n]);if(lm(i)){let s=dk(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new rn(e)}var vt=class t{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,z.min(),z.min(),z.min(),Vt.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,z.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,z.min(),z.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,z.min(),z.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Gr=class{constructor(e,n){this.position=e,this.inclusive=n}};function uO(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let s=e[r],o=t.position[r];if(s.field.isKeyField()?i=P.comparator(P.fromName(o.referenceValue),n.key):i=qr(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function dO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ai(t.position[n],e.position[n]))return!1;return!0}var ao=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function $6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var _m=class{},ge=class t extends _m{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new mb(e,n,i):n==="array-contains"?new _b(e,i):n==="in"?new vm(e,i):n==="not-in"?new vb(e,i):n==="array-contains-any"?new wb(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new gb(e,i):new yb(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qr(n,this.value)):n!==null&&oo(this.value)===oo(n)&&this.matchesComparison(qr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return k()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Te=class t extends _m{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return ec(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function ec(t){return t.op==="and"}function fb(t){return t.op==="or"}function YD(t){return hk(t)&&ec(t)}function hk(t){for(let e of t.filters)if(e instanceof Te)return!1;return!0}function pb(t){if(t instanceof ge)return t.field.canonicalString()+t.op.toString()+Ja(t.value);if(YD(t))return t.filters.map(e=>pb(e)).join(",");{let e=t.filters.map(n=>pb(n)).join(",");return`${t.op}(${e})`}}function fk(t,e){return t instanceof ge?function(i,r){return r instanceof ge&&i.op===r.op&&i.field.isEqual(r.field)&&Ai(i.value,r.value)}(t,e):t instanceof Te?function(i,r){return r instanceof Te&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&fk(o,r.filters[a]),!0):!1}(t,e):void k()}function pk(t,e){let n=t.filters.concat(e);return Te.create(n,t.op)}function mk(t){return t instanceof ge?function(n){return`${n.field.canonicalString()} ${n.op} ${Ja(n.value)}`}(t):t instanceof Te?function(n){return n.op.toString()+" {"+n.getFilters().map(mk).join(" ,")+"}"}(t):"Filter"}var mb=class extends ge{constructor(e,n,i){super(e,n,i),this.key=P.fromName(i.referenceValue)}matches(e){let n=P.comparator(e.key,this.key);return this.matchesComparison(n)}},gb=class extends ge{constructor(e,n){super(e,"in",n),this.keys=gk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},yb=class extends ge{constructor(e,n){super(e,"not-in",n),this.keys=gk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function gk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>P.fromName(i.referenceValue))}var _b=class extends ge{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Nu(n)&&xu(n.arrayValue,this.value)}},vm=class extends ge{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&xu(this.value.arrayValue,n)}},vb=class extends ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!xu(this.value.arrayValue,n)}},wb=class extends ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Nu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>xu(this.value.arrayValue,i))}};var Eb=class{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function Ib(t,e=null,n=[],i=[],r=null,s=null,o=null){return new Eb(t,e,n,i,r,s,o)}function co(t){let e=V(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>pb(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),lg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ja(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ja(i)).join(",")),e.ce=n}return e.ce}function Xu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dO(t.startAt,e.startAt)&&dO(t.endAt,e.endAt)}function wm(t){return P.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Em(t,e){return t.filters.filter(n=>n instanceof ge&&n.field.isEqual(e))}function hO(t,e,n){let i=cm,r=!0;for(let s of Em(t,e)){let o=cm,a=!0;switch(s.op){case"<":case"<=":o=B6(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=cm}cO({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];cO({value:i,inclusive:r},{value:o,inclusive:n.inclusive})<0&&(i=o,r=n.inclusive);break}}return{value:i,inclusive:r}}function fO(t,e,n){let i=Ur,r=!0;for(let s of Em(t,e)){let o=Ur,a=!0;switch(s.op){case">=":case">":o=U6(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ur}lO({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];lO({value:i,inclusive:r},{value:o,inclusive:n.inclusive})>0&&(i=o,r=n.inclusive);break}}return{value:i,inclusive:r}}var Wr=class{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function yk(t,e,n,i,r,s,o,a){return new Wr(t,e,n,i,r,s,o,a)}function Ju(t){return new Wr(t)}function pO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _k(t){return t.collectionGroup!==null}function wu(t){let e=V(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ne(rt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new ao(s,i))}),n.has(rt.keyField().canonicalString())||e.le.push(new ao(rt.keyField(),i))}return e.le}function on(t){let e=V(t);return e.he||(e.he=H6(e,wu(t))),e.he}function H6(t,e){if(t.limitType==="F")return Ib(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new ao(r.field,s)});let n=t.endAt?new Gr(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Gr(t.startAt.position,t.startAt.inclusive):null;return Ib(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function bb(t,e){let n=t.filters.concat([e]);return new Wr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Im(t,e,n){return new Wr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ug(t,e){return Xu(on(t),on(e))&&t.limitType===e.limitType}function vk(t){return`${co(on(t))}|lt:${t.limitType}`}function $a(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>mk(r)).join(", ")}]`),lg(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ja(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ja(r)).join(",")),`Target(${i})`}(on(t))}; limitType=${t.limitType})`}function ed(t,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):P.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(let s of wu(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,c){let l=uO(o,a,c);return o.inclusive?l<=0:l<0}(i.startAt,wu(i),r)||i.endAt&&!function(o,a,c){let l=uO(o,a,c);return o.inclusive?l>=0:l>0}(i.endAt,wu(i),r))}(t,e)}function wk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ek(t){return(e,n)=>{let i=!1;for(let r of wu(t)){let s=z6(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function z6(t,e,n){let i=t.field.isKeyField()?P.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?qr(c,l):k()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return k()}}var Ri=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,(n,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return lk(this.inner)}size(){return this.innerSize}};var q6=new Le(P.comparator);function sn(){return q6}var Ik=new Le(P.comparator);function yu(...t){let e=Ik;for(let n of t)e=e.insert(n.key,n);return e}function bk(t){let e=Ik;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Ti(){return Eu()}function Dk(){return Eu()}function Eu(){return new Ri(t=>t.toString(),(t,e)=>t.isEqual(e))}var G6=new Le(P.comparator),W6=new Ne(P.comparator);function de(...t){let e=W6;for(let n of t)e=e.add(n);return e}var K6=new Ne(re);function ZD(){return K6}function Ck(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Su(e)?"-0":e}}function Tk(t){return{integerValue:""+t}}function Q6(t,e){return rk(e)?Tk(e):Ck(t,e)}var tc=class{constructor(){this._=void 0}};function Y6(t,e,n){return t instanceof lo?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&KD(s)&&(s=QD(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Kr?Ak(t,e):t instanceof Qr?Rk(t,e):function(r,s){let o=Sk(r,s),a=mO(o)+mO(r.Ie);return hb(o)&&hb(r.Ie)?Tk(a):Ck(r.serializer,a)}(t,e)}function Z6(t,e,n){return t instanceof Kr?Ak(t,e):t instanceof Qr?Rk(t,e):n}function Sk(t,e){return t instanceof uo?function(i){return hb(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var lo=class extends tc{},Kr=class extends tc{constructor(e){super(),this.elements=e}};function Ak(t,e){let n=xk(e);for(let i of t.elements)n.some(r=>Ai(r,i))||n.push(i);return{arrayValue:{values:n}}}var Qr=class extends tc{constructor(e){super(),this.elements=e}};function Rk(t,e){let n=xk(e);for(let i of t.elements)n=n.filter(r=>!Ai(r,i));return{arrayValue:{values:n}}}var uo=class extends tc{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function mO(t){return Ge(t.integerValue||t.doubleValue)}function xk(t){return Nu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Db=class{constructor(e,n){this.field=e,this.transform=n}};function X6(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Kr&&r instanceof Kr||i instanceof Qr&&r instanceof Qr?Ya(i.elements,r.elements,Ai):i instanceof uo&&r instanceof uo?Ai(i.Ie,r.Ie):i instanceof lo&&r instanceof lo}(t.transform,e.transform)}var Cb=class{constructor(e,n){this.version=e,this.transformResults=n}},_t=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function um(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var nc=class{};function Mk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ho(t.key,_t.none()):new Yr(t.key,t.data,_t.none());{let n=t.data,i=Vt.empty(),r=new Ne(rt.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Bn(t.key,i,new rn(r.toArray()),_t.none())}}function J6(t,e,n){t instanceof Yr?function(r,s,o){let a=r.value.clone(),c=yO(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Bn?function(r,s,o){if(!um(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=yO(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Nk(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Iu(t,e,n,i){return t instanceof Yr?function(s,o,a,c){if(!um(s.precondition,o))return a;let l=s.value.clone(),u=_O(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,i):t instanceof Bn?function(s,o,a,c){if(!um(s.precondition,o))return a;let l=_O(s.fieldTransforms,c,o),u=o.data;return u.setAll(Nk(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return um(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function e5(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),s=Sk(i.transform,r||null);s!=null&&(n===null&&(n=Vt.empty()),n.set(i.field,s))}return n||null}function gO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ya(i,r,(s,o)=>X6(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Yr=class extends nc{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Bn=class extends nc{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Nk(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function yO(t,e,n){let i=new Map;B(t.length===n.length);for(let r=0;r<n.length;r++){let s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Z6(o,a,n[r]))}return i}function _O(t,e,n){let i=new Map;for(let r of t){let s=r.transform,o=n.data.field(r.field);i.set(r.field,Y6(s,o,e))}return i}var ho=class extends nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},bm=class extends nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Pu=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&J6(s,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=Iu(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=Iu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=Dk();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;let c=Mk(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(z.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&Ya(this.mutations,e.mutations,(n,i)=>gO(n,i))&&Ya(this.baseMutations,e.baseMutations,(n,i)=>gO(n,i))}},Tb=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){B(e.mutations.length===i.length);let r=function(){return G6}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new t(e,n,i,r)}};var Ou=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Sb=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var tt,ve;function t5(t){switch(t){default:return k();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}function Pk(t){if(t===void 0)return Ze("GRPC error has no .code"),w.UNKNOWN;switch(t){case tt.OK:return w.OK;case tt.CANCELLED:return w.CANCELLED;case tt.UNKNOWN:return w.UNKNOWN;case tt.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case tt.INTERNAL:return w.INTERNAL;case tt.UNAVAILABLE:return w.UNAVAILABLE;case tt.UNAUTHENTICATED:return w.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case tt.NOT_FOUND:return w.NOT_FOUND;case tt.ALREADY_EXISTS:return w.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return w.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case tt.ABORTED:return w.ABORTED;case tt.OUT_OF_RANGE:return w.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return w.UNIMPLEMENTED;case tt.DATA_LOSS:return w.DATA_LOSS;default:return k()}}(ve=tt||(tt={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var vO=null;function n5(){return new TextEncoder}var i5=new Ws([4294967295,4294967295],0);function wO(t){let e=n5().encode(t),n=new JP;return n.update(e),new Uint8Array(n.digest())}function EO(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ws([n,i],0),new Ws([r,s],0)]}var Ab=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new eo(`Invalid padding: ${n}`);if(i<0)throw new eo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new eo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new eo(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Ws.fromNumber(this.Te)}de(e,n,i){let r=e.add(n.multiply(Ws.fromNumber(i)));return r.compare(i5)===1&&(r=new Ws([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=wO(e),[i,r]=EO(n);for(let s=0;s<this.hashCount;s++){let o=this.de(i,r,s);if(!this.Ae(o))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=wO(e),[i,r]=EO(n);for(let s=0;s<this.hashCount;s++){let o=this.de(i,r,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},eo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ku=class t{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,Fu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(z.min(),r,new Le(re),sn(),de())}},Fu=class t{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,de(),de(),de())}};var Ka=class{constructor(e,n,i,r){this.Ve=e,this.removedTargetIds=n,this.key=i,this.me=r}},Dm=class{constructor(e,n){this.targetId=e,this.fe=n}},Cm=class{constructor(e,n,i=wt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},Tm=class{constructor(){this.ge=0,this.pe=bO(),this.ye=wt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=de(),n=de(),i=de();return this.pe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:k()}}),new Fu(this.ye,this.we,e,n,i)}Fe(){this.Se=!1,this.pe=bO()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,B(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},Rb=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=sn(),this.Qe=IO(),this.Ke=new Le(re)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let i=this.ze(n);switch(e.state){case 0:this.je(n)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(n);break;case 3:this.je(n)&&(i.Be(),i.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),i.Ce(e.resumeToken));break;default:k()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((i,r)=>{this.je(r)&&n(r)})}Je(e){let n=e.targetId,i=e.fe.count,r=this.Ye(n);if(r){let s=r.target;if(wm(s))if(i===0){let o=new P(s.path);this.We(n,o,vt.newNoDocument(o,z.min()))}else B(i===1);else{let o=this.Ze(n);if(o!==i){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}vO?.tt(function(u,d,h,f,p){var g,v,E,A,N,O;let K={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},j=d.unchangedNames;return j&&(K.bloomFilter={applied:p===0,hashCount:(g=j?.hashCount)!==null&&g!==void 0?g:0,bitmapLength:(A=(E=(v=j?.bits)===null||v===void 0?void 0:v.bitmap)===null||E===void 0?void 0:E.length)!==null&&A!==void 0?A:0,padding:(O=(N=j?.bits)===null||N===void 0?void 0:N.padding)!==null&&O!==void 0?O:0,mightContain:ae=>{var De;return(De=f?.mightContain(ae))!==null&&De!==void 0&&De}}),K}(o,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n,o,a;try{o=zr(i).toUint8Array()}catch(c){if(c instanceof ym)return Cu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Ab(o,r,s)}catch(c){return Cu(c instanceof eo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,i){return n.fe.count===i-this.rt(e,n.targetId)?0:2}rt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(s=>{let o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),r++)}),r}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&wm(a.target)){let c=new P(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,vt.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let i=de();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let r=new ku(e,n,this.Ke,this.qe,i);return this.qe=sn(),this.Qe=IO(),this.Ke=new Le(re),r}Ue(e,n){if(!this.je(e))return;let i=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,i),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,i){if(!this.je(e))return;let r=this.ze(e);this.st(e,n)?r.Me(n,1):r.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),i&&(this.qe=this.qe.insert(n,i))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Tm,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ne(re),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||b("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Tm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function IO(){return new Le(P.comparator)}function bO(){return new Le(P.comparator)}var r5={asc:"ASCENDING",desc:"DESCENDING"},s5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o5={and:"AND",or:"OR"},xb=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Mb(t,e){return t.useProto3Json||lg(e)?e:{value:e}}function ic(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ok(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function a5(t,e){return ic(t,e.toTimestamp())}function Bt(t){return B(!!t),z.fromTimestamp(function(n){let i=Hr(n);return new Xe(i.seconds,i.nanos)}(t))}function XD(t,e){return Nb(t,e).canonicalString()}function Nb(t,e){let n=function(r){return new Re(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function kk(t){let e=Re.fromString(t);return B(zk(e)),e}function Sm(t,e){return XD(t.databaseId,e.path)}function io(t,e){let n=kk(e);if(n.get(1)!==t.databaseId.projectId)throw new R(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new R(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new P(Vk(n))}function Fk(t,e){return XD(t.databaseId,e)}function Lk(t){let e=kk(t);return e.length===4?Re.emptyPath():Vk(e)}function Pb(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Vk(t){return B(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function DO(t,e,n){return{name:Sm(t,e),fields:n.value.mapValue.fields}}function c5(t,e,n){let i=io(t,e.name),r=Bt(e.updateTime),s=e.createTime?Bt(e.createTime):z.min(),o=new Vt({mapValue:{fields:e.fields}}),a=vt.newFoundDocument(i,r,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function l5(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:k()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(B(u===void 0||typeof u=="string"),wt.fromBase64String(u||"")):(B(u===void 0||u instanceof Uint8Array),wt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let u=l.code===void 0?w.UNKNOWN:Pk(l.code);return new R(u,l.message||"")}(o);n=new Cm(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=io(t,i.document.name),s=Bt(i.document.updateTime),o=i.document.createTime?Bt(i.document.createTime):z.min(),a=new Vt({mapValue:{fields:i.document.fields}}),c=vt.newFoundDocument(r,s,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];n=new Ka(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=io(t,i.document),s=i.readTime?Bt(i.readTime):z.min(),o=vt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Ka([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=io(t,i.document),s=i.removedTargetIds||[];n=new Ka([],s,r,null)}else{if(!("filter"in e))return k();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new Sb(r,s),a=i.targetId;n=new Dm(a,o)}}return n}function Am(t,e){let n;if(e instanceof Yr)n={update:DO(t,e.key,e.value)};else if(e instanceof ho)n={delete:Sm(t,e.key)};else if(e instanceof Bn)n={update:DO(t,e.key,e.data),updateMask:m5(e.fieldMask)};else{if(!(e instanceof bm))return k();n={verify:Sm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let a=o.transform;if(a instanceof lo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Kr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Qr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof uo)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw k()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:a5(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:k()}(t,e.precondition)),n}function Ob(t,e){let n=e.currentDocument?function(s){return s.updateTime!==void 0?_t.updateTime(Bt(s.updateTime)):s.exists!==void 0?_t.exists(s.exists):_t.none()}(e.currentDocument):_t.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let c=null;if("setToServerValue"in a)B(a.setToServerValue==="REQUEST_TIME"),c=new lo;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new Kr(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new Qr(u)}else"increment"in a?c=new uo(o,a.increment):k();let l=rt.fromServerFormat(a.fieldPath);return new Db(l,c)}(t,r)):[];if(e.update){e.update.name;let r=io(t,e.update.name),s=new Vt({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new rn(l.map(u=>rt.fromServerFormat(u)))}(e.updateMask);return new Bn(r,s,o,n,i)}return new Yr(r,s,n,i)}if(e.delete){let r=io(t,e.delete);return new ho(r,n)}if(e.verify){let r=io(t,e.verify);return new bm(r,n)}return k()}function u5(t,e){return t&&t.length>0?(B(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?Bt(r.updateTime):Bt(s);return o.isEqual(z.min())&&(o=Bt(s)),new Cb(o,r.transformResults||[])}(n,e))):[]}function jk(t,e){return{documents:[Fk(t,e.path)]}}function Bk(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Fk(t,r);let s=function(l){if(l.length!==0)return Hk(Te.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:Ha(h.field),direction:h5(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Mb(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:n,parent:r}}function Uk(t){let e=Lk(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){B(i===1);let u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){let h=$k(d);return h instanceof Te&&YD(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(p){return new ao(za(p.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,lg(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Gr(f,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){let h=!d.before,f=d.values||[];return new Gr(f,h)}(n.endAt)),yk(e,r,o,s,a,"F",c,l)}function d5(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return k()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $k(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=za(n.unaryFilter.field);return ge.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=za(n.unaryFilter.field);return ge.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=za(n.unaryFilter.field);return ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=za(n.unaryFilter.field);return ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return k()}}(t):t.fieldFilter!==void 0?function(n){return ge.create(za(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return k()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Te.create(n.compositeFilter.filters.map(i=>$k(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return k()}}(n.compositeFilter.op))}(t):k()}function h5(t){return r5[t]}function f5(t){return s5[t]}function p5(t){return o5[t]}function Ha(t){return{fieldPath:t.canonicalString()}}function za(t){return rt.fromServerFormat(t.fieldPath)}function Hk(t){return t instanceof ge?function(n){if(n.op==="=="){if(aO(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NAN"}};if(oO(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(aO(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NAN"}};if(oO(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(n.field),op:f5(n.op),value:n.value}}}(t):t instanceof Te?function(n){let i=n.getFilters().map(r=>Hk(r));return i.length===1?i[0]:{compositeFilter:{op:p5(n.op),filters:i}}}(t):k()}function m5(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var rc=class t{constructor(e,n,i,r,s=z.min(),o=z.min(),a=wt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Rm=class{constructor(e){this.ct=e}};function g5(t,e){let n;if(e.document)n=c5(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=P.fromSegments(e.noDocument.path),r=po(e.noDocument.readTime);n=vt.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return k();{let i=P.fromSegments(e.unknownDocument.path),r=po(e.unknownDocument.version);n=vt.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let s=new Xe(r[0],r[1]);return z.fromTimestamp(s)}(e.readTime)),n}function CO(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:xm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,o){return{name:Sm(s,o.key),fields:o.data.value.mapValue.fields,updateTime:ic(s,o.version.toTimestamp()),createTime:ic(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:fo(e.version)};else{if(!e.isUnknownDocument())return k();i.unknownDocument={path:n.path.toArray(),version:fo(e.version)}}return i}function xm(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function fo(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function po(t){let e=new Xe(t.seconds,t.nanoseconds);return z.fromTimestamp(e)}function Zs(t,e){let n=(e.baseMutations||[]).map(s=>Ob(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let i=e.mutations.map(s=>Ob(t.ct,s)),r=Xe.fromMillis(e.localWriteTimeMs);return new Pu(e.batchId,r,n,i)}function _u(t){let e=po(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?po(t.lastLimboFreeSnapshotVersion):z.min(),i;return i=function(s){return s.documents!==void 0}(t.query)?function(s){return B(s.documents.length===1),on(Ju(Lk(s.documents[0])))}(t.query):function(s){return on(Uk(s))}(t.query),new rc(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,wt.fromBase64String(t.resumeToken))}function qk(t,e){let n=fo(e.snapshotVersion),i=fo(e.lastLimboFreeSnapshotVersion),r;r=wm(e.target)?jk(t.ct,e.target):Bk(t.ct,e.target).ut;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:co(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Gk(t){let e=Uk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Im(e,e.limit,"L"):e}function GI(t,e){return new Ou(e.largestBatchId,Ob(t.ct,e.overlayMutation))}function TO(t,e){let n=e.path.lastSegment();return[t,jt(e.path.popLast()),n]}function SO(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:fo(i.readTime),documentKey:jt(i.documentKey.path),largestBatchId:i.largestBatchId}}var kb=class{getBundleMetadata(e,n){return AO(e).get(n).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:po(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,n){return AO(e).put(function(r){return{bundleId:r.id,createTime:fo(Bt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return RO(e).get(n).next(i=>{if(i)return function(s){return{name:s.name,query:Gk(s.bundledQuery),readTime:po(s.readTime)}}(i)})}saveNamedQuery(e,n){return RO(e).put(function(r){return{name:r.name,readTime:fo(Bt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function AO(t){return ht(t,"bundles")}function RO(t){return ht(t,"namedQueries")}var Mm=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return fu(e).get(TO(this.userId,n)).next(i=>i?GI(this.serializer,i):null)}getOverlays(e,n){let i=Ti();return _.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((s,o)=>{let a=new Ou(n,o);r.push(this.ht(e,a))}),_.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(o=>r.add(jt(o.getCollectionPath())));let s=[];return r.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(fu(e).H("collectionPathOverlayIndex",a))}),_.waitFor(s)}getOverlaysForCollection(e,n,i){let r=Ti(),s=jt(n),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return fu(e).W("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=GI(this.serializer,c);r.set(l.getKey(),l)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let s=Ti(),o,a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return fu(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,l,u)=>{let d=GI(this.serializer,l);s.size()<r||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ht(e,n){return fu(e).put(function(r,s,o){let[a,c,l]=TO(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Am(r.ct,o.mutation)}}(this.serializer,this.userId,n))}};function fu(t){return ht(t,"documentOverlays")}var Yi=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ge(e.integerValue));else if("doubleValue"in e){let i=Ge(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),Su(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"?n.At(i):(n.At(`${i.seconds||""}`),n.dt(i.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(zr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?uk(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):k()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let i=e.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){let i=e.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(e,n){this.Et(n,37),P.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Yi.bt=new Yi;function y5(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function xO(t){let e=64-function(i){let r=0;for(let s=0;s<8;++s){let o=y5(255&i[s]);if(r+=o,o!==8)break}return r}(t);return Math.ceil(e/8)}var Fb=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ct(i.value),i=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Mt(i.value),i=n.next();this.xt()}Ot(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{let r=n.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{let r=n.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Bt(e){let n=this.Lt(e),i=xO(n);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}qt(e){let n=this.Lt(e),i=xO(n);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){let n=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},Lb=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}},Vb=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Xs=class{constructor(){this.Gt=new Fb,this.zt=new Lb(this.Gt),this.jt=new Vb(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Js=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function Vr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=MO(t.arrayValue,e.arrayValue),n!==0?n:(n=MO(t.directionalValue,e.directionalValue),n!==0?n:P.comparator(t.documentKey,e.documentKey)))}function MO(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var Nm=class{constructor(e){this.Yt=new Ne((n,i)=>rt.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let i=n;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(e){if(B(e.collectionGroup===this.collectionId),this.en)return!1;let n=sb(e);if(n!==void 0&&!this.nn(n))return!1;let i=Qs(e),r=new Set,s=0,o=0;for(;s<i.length&&this.nn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let c=i[s];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++s}for(;s<i.length;++s){let a=i[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new Ne(rt.comparator),n=[];for(let i of this.Xt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new Wa(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new Wa(i.field,0))}for(let i of this.Zt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new Wa(i.field,i.dir==="asc"?0:1)));return new Za(Za.UNKNOWN_ID,this.collectionId,n,Tu.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function Wk(t){var e,n;if(B(t instanceof ge||t instanceof Te),t instanceof ge){if(t instanceof vm){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ge.create(t.field,"==",s)))||[];return Te.create(r,"or")}return t}let i=t.filters.map(r=>Wk(r));return Te.create(i,t.op)}function _5(t){if(t.getFilters().length===0)return[];let e=Ub(Wk(t));return B(Kk(e)),jb(e)||Bb(e)?[e]:e.getFilters()}function jb(t){return t instanceof ge}function Bb(t){return t instanceof Te&&YD(t)}function Kk(t){return jb(t)||Bb(t)||function(n){if(n instanceof Te&&fb(n)){for(let i of n.getFilters())if(!jb(i)&&!Bb(i))return!1;return!0}return!1}(t)}function Ub(t){if(B(t instanceof ge||t instanceof Te),t instanceof ge)return t;if(t.filters.length===1)return Ub(t.filters[0]);let e=t.filters.map(i=>Ub(i)),n=Te.create(e,t.op);return n=Pm(n),Kk(n)?n:(B(n instanceof Te),B(ec(n)),B(n.filters.length>1),n.filters.reduce((i,r)=>JD(i,r)))}function JD(t,e){let n;return B(t instanceof ge||t instanceof Te),B(e instanceof ge||e instanceof Te),n=t instanceof ge?e instanceof ge?function(r,s){return Te.create([r,s],"and")}(t,e):NO(t,e):e instanceof ge?NO(e,t):function(r,s){if(B(r.filters.length>0&&s.filters.length>0),ec(r)&&ec(s))return pk(r,s.getFilters());let o=fb(r)?r:s,a=fb(r)?s:r,c=o.filters.map(l=>JD(l,a));return Te.create(c,"or")}(t,e),Pm(n)}function NO(t,e){if(ec(e))return pk(e,t.getFilters());{let n=e.filters.map(i=>JD(t,i));return Te.create(n,"or")}}function Pm(t){if(B(t instanceof ge||t instanceof Te),t instanceof ge)return t;let e=t.getFilters();if(e.length===1)return Pm(e[0]);if(hk(t))return t;let n=e.map(r=>Pm(r)),i=[];return n.forEach(r=>{r instanceof ge?i.push(r):r instanceof Te&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Te.create(i,t.op)}var $b=class{constructor(){this._n=new Lu}addToCollectionParentIndex(e,n){return this._n.add(n),_.resolve()}getCollectionParents(e,n){return _.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return _.resolve()}deleteFieldIndex(e,n){return _.resolve()}deleteAllFieldIndexes(e){return _.resolve()}createTargetIndexes(e,n){return _.resolve()}getDocumentsMatchingTarget(e,n){return _.resolve(null)}getIndexType(e,n){return _.resolve(0)}getFieldIndexes(e,n){return _.resolve([])}getNextCollectionGroupToUpdate(e){return _.resolve(null)}getMinOffset(e,n){return _.resolve(Dn.min())}getMinOffsetFromCollectionGroup(e,n){return _.resolve(Dn.min())}updateCollectionGroup(e,n,i){return _.resolve()}updateIndexEntries(e,n){return _.resolve()}},Lu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ne(Re.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ne(Re.comparator)).toArray()}};var im=new Uint8Array(0),Hb=class{constructor(e,n){this.databaseId=n,this.an=new Lu,this.un=new Ri(i=>co(i),(i,r)=>Xu(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let s={collectionId:i,parent:jt(r)};return PO(e).put(s)}return _.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[ek(n),""],!1,!0);return PO(e).W(r).next(s=>{for(let o of s){if(o.collectionId!==n)break;i.push(Ci(o.parent))}return i})}addFieldIndex(e,n){let i=pu(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;let s=i.add(r);if(n.indexState){let o=ja(e);return s.next(a=>{o.put(SO(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){let i=pu(e),r=ja(e),s=Va(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=pu(e),i=Va(e),r=ja(e);return n.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(e,n){return _.forEach(this.cn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let s=new Nm(i).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){let i=Va(e),r=!0,s=new Map;return _.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=de(),a=[];return _.forEach(s,(c,l)=>{b("IndexedDbIndexManager",`Using index ${function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(O=>`${O.fieldPath}:${O.kind}`).join(",")}`}(c)} to execute ${co(n)}`);let u=function(N,O){let K=sb(O);if(K===void 0)return null;for(let j of Em(N,K.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(l,c),d=function(N,O){let K=new Map;for(let j of Qs(O))for(let ae of Em(N,j.fieldPath))switch(ae.op){case"==":case"in":K.set(j.fieldPath.canonicalString(),ae.value);break;case"not-in":case"!=":return K.set(j.fieldPath.canonicalString(),ae.value),Array.from(K.values())}return null}(l,c),h=function(N,O){let K=[],j=!0;for(let ae of Qs(O)){let De=ae.kind===0?hO(N,ae.fieldPath,N.startAt):fO(N,ae.fieldPath,N.startAt);K.push(De.value),j&&(j=De.inclusive)}return new Gr(K,j)}(l,c),f=function(N,O){let K=[],j=!0;for(let ae of Qs(O)){let De=ae.kind===0?fO(N,ae.fieldPath,N.endAt):hO(N,ae.fieldPath,N.endAt);K.push(De.value),j&&(j=De.inclusive)}return new Gr(K,j)}(l,c),p=this.hn(c,l,h),g=this.hn(c,l,f),v=this.Pn(c,l,d),E=this.In(c.indexId,u,p,h.inclusive,g,f.inclusive,v);return _.forEach(E,A=>i.j(A,n.limit).next(N=>{N.forEach(O=>{let K=P.fromSegments(O.documentKey);o.has(K)||(o=o.add(K),a.push(K))})}))}).next(()=>a)}return _.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=_5(Te.create(e.filters,"and")).map(i=>Ib(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,i,r,s,o,a){let c=(n!=null?n.length:1)*Math.max(i.length,s.length),l=c/(n!=null?n.length:1),u=[];for(let d=0;d<c;++d){let h=n?this.Tn(n[d/l]):im,f=this.En(e,h,i[d%l],r),p=this.dn(e,h,s[d%l],o),g=a.map(v=>this.En(e,h,v,!0));u.push(...this.createRange(f,p,g))}return u}En(e,n,i,r){let s=new Js(e,P.empty(),n,i);return r?s:s.Jt()}dn(e,n,i,r){let s=new Js(e,P.empty(),n,i);return r?s.Jt():s}ln(e,n){let i=new Nm(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(let a of s)i.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let i=2,r=this.cn(n);return _.forEach(r,s=>this.ln(e,s).next(o=>{o?i!==0&&o.fields.length<function(c){let l=new Ne(rt.comparator),u=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:l=l.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(l=l.add(d.field));return l.size+(u?1:0)}(s)&&(i=1):i=0})).next(()=>function(o){return o.limit!==null}(n)&&r.length>1&&i===2?1:i)}An(e,n){let i=new Xs;for(let r of Qs(e)){let s=n.data.field(r.fieldPath);if(s==null)return null;let o=i.Ht(r.kind);Yi.bt.Pt(s,o)}return i.Wt()}Tn(e){let n=new Xs;return Yi.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let i=new Xs;return Yi.bt.Pt(Mu(this.databaseId,n),i.Ht(function(s){let o=Qs(s);return o.length===0?0:o[o.length-1].kind}(e))),i.Wt()}Pn(e,n,i){if(i===null)return[];let r=[];r.push(new Xs);let s=0;for(let o of Qs(e)){let a=i[s++];for(let c of r)if(this.Vn(n,o.fieldPath)&&Nu(a))r=this.mn(r,o,a);else{let l=c.Ht(o.kind);Yi.bt.Pt(a,l)}}return this.fn(r)}hn(e,n,i){return this.Pn(e,n,i.position)}fn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Wt();return n}mn(e,n,i){let r=[...e],s=[];for(let o of i.arrayValue.values||[])for(let a of r){let c=new Xs;c.seed(a.Wt()),Yi.bt.Pt(o,c.Ht(n.kind)),s.push(c)}return s}Vn(e,n){return!!e.filters.find(i=>i instanceof ge&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=pu(e),r=ja(e);return(n?i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.W()).next(s=>{let o=[];return _.forEach(s,a=>r.get([a.indexId,this.uid]).next(c=>{o.push(function(u,d){let h=d?new Tu(d.sequenceNumber,new Dn(po(d.readTime),new P(Ci(d.documentKey)),d.largestBatchId)):Tu.empty(),f=u.fields.map(([p,g])=>new Wa(rt.fromServerFormat(p),g));return new Za(u.indexId,u.collectionGroup,f,h)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:re(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=pu(e),s=ja(e);return this.gn(e).next(o=>r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>_.forEach(a,c=>s.put(SO(c.indexId,this.uid,o,i)))))}updateIndexEntries(e,n){let i=new Map;return _.forEach(n,(r,s)=>{let o=i.get(r.collectionGroup);return(o?_.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),_.forEach(a,c=>this.pn(e,r,c).next(l=>{let u=this.yn(s,c);return l.isEqual(u)?_.resolve():this.wn(e,s,c,l,u)}))))})}Sn(e,n,i,r){return Va(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,n.key),documentKey:n.key.path.toArray()})}bn(e,n,i,r){return Va(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,n.key),n.key.path.toArray()])}pn(e,n,i){let r=Va(e),s=new Ne(Vr);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,n)])},(o,a)=>{s=s.add(new Js(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let i=new Ne(Vr),r=this.An(n,e);if(r==null)return i;let s=sb(n);if(s!=null){let o=e.data.field(s.fieldPath);if(Nu(o))for(let a of o.arrayValue.values||[])i=i.add(new Js(n.indexId,e.key,this.Tn(a),r))}else i=i.add(new Js(n.indexId,e.key,im,r));return i}wn(e,n,i,r,s){b("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let o=[];return function(c,l,u,d,h){let f=c.getIterator(),p=l.getIterator(),g=La(f),v=La(p);for(;g||v;){let E=!1,A=!1;if(g&&v){let N=u(g,v);N<0?A=!0:N>0&&(E=!0)}else g!=null?A=!0:E=!0;E?(d(v),v=La(p)):A?(h(g),g=La(f)):(g=La(f),v=La(p))}}(r,s,Vr,a=>{o.push(this.Sn(e,n,i,a))},a=>{o.push(this.bn(e,n,i,a))}),_.waitFor(o)}gn(e){let n=1;return ja(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((o,a)=>Vr(o,a)).filter((o,a,c)=>!a||Vr(o,c[a-1])!==0);let r=[];r.push(e);for(let o of i){let a=Vr(o,e),c=Vr(o,n);if(a===0)r[0]=e.Jt();else if(a>0&&c<0)r.push(o),r.push(o.Jt());else if(c>0)break}r.push(n);let s=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];let a=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,im,[]],c=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,im,[]];s.push(IDBKeyRange.bound(a,c))}return s}Dn(e,n){return Vr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(OO)}getMinOffset(e,n){return _.mapArray(this.cn(n),i=>this.ln(e,i).next(r=>r||k())).next(OO)}};function PO(t){return ht(t,"collectionParents")}function Va(t){return ht(t,"indexEntries")}function pu(t){return ht(t,"indexConfiguration")}function ja(t){return ht(t,"indexState")}function OO(t){B(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;GD(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Dn(e.readTime,e.documentKey,n)}var kO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},In=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Qk(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId),a=0,c=i.Y({range:o},(u,d,h)=>(a++,h.delete()));s.push(c.next(()=>{B(a===1)}));let l=[];for(let u of n.mutations){let d=sk(e,u.key.path,n.batchId);s.push(r.delete(d)),l.push(u.key)}return _.waitFor(s).next(()=>l)}function Om(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw k();e=t.noDocument}return JSON.stringify(e).length}In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(41943040,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);var km=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(e,n,i,r){B(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new t(s,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jr(e).Y({index:"userMutationsIndex",range:i},(r,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let s=qa(e),o=jr(e);return o.add({}).next(a=>{B(typeof a=="number");let c=new Pu(a,n,i,r),l=function(f,p,g){let v=g.baseMutations.map(A=>Am(f.ct,A)),E=g.mutations.map(A=>Am(f.ct,A));return{userId:p,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:v,mutations:E}}(this.serializer,this.userId,c),u=[],d=new Ne((h,f)=>re(h.canonicalString(),f.canonicalString()));for(let h of r){let f=sk(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(l)),u.push(s.put(f,I6))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),_.waitFor(u).next(()=>c)})}lookupMutationBatch(e,n){return jr(e).get(n).next(i=>i?(B(i.userId===this.userId),Zs(this.serializer,i)):null)}vn(e,n){return this.Cn[n]?_.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.Cn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),s=null;return jr(e).Y({index:"userMutationsIndex",range:r},(o,a,c)=>{a.userId===this.userId&&(B(a.batchId>=i),s=Zs(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return jr(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jr(e).W("userMutationsIndex",n).next(i=>i.map(r=>Zs(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=am(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return qa(e).Y({range:r},(o,a,c)=>{let[l,u,d]=o,h=Ci(u);if(l===this.userId&&n.path.isEqual(h))return jr(e).get(d).next(f=>{if(!f)throw k();B(f.userId===this.userId),s.push(Zs(this.serializer,f))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ne(re),r=[];return n.forEach(s=>{let o=am(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=qa(e).Y({range:a},(l,u,d)=>{let[h,f,p]=l,g=Ci(f);h===this.userId&&s.path.isEqual(g)?i=i.add(p):d.done()});r.push(c)}),_.waitFor(r).next(()=>this.Fn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,s=am(this.userId,i),o=IDBKeyRange.lowerBound(s),a=new Ne(re);return qa(e).Y({range:o},(c,l,u)=>{let[d,h,f]=c,p=Ci(h);d===this.userId&&i.isPrefixOf(p)?p.length===r&&(a=a.add(f)):u.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let i=[],r=[];return n.forEach(s=>{r.push(jr(e).get(s).next(o=>{if(o===null)throw k();B(o.userId===this.userId),i.push(Zs(this.serializer,o))}))}),_.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return Qk(e.ae,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),_.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return _.resolve();let i=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return qa(e).Y({range:i},(s,o,a)=>{if(s[0]===this.userId){let c=Ci(s[1]);r.push(c)}else a.done()}).next(()=>{B(r.length===0)})})}containsKey(e,n){return Yk(e,this.userId,n)}xn(e){return Zk(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Yk(t,e,n){let i=am(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i),o=!1;return qa(t).Y({range:s,J:!0},(a,c,l)=>{let[u,d,h]=a;u===e&&d===r&&(o=!0),l.done()}).next(()=>o)}function jr(t){return ht(t,"mutations")}function qa(t){return ht(t,"documentMutations")}function Zk(t){return ht(t,"mutationQueues")}var sc=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};var zb=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{let i=new sc(n.highestTargetId);return n.highestTargetId=i.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>z.fromTimestamp(new Xe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Ln(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.kn(e,r)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(i=>(i.targetCount+=1,this.Qn(n,i),this.kn(e,i))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ba(e).delete(n.targetId)).next(()=>this.Ln(e)).next(i=>(B(i.targetCount>0),i.targetCount-=1,this.kn(e,i)))}removeTargets(e,n,i){let r=0,s=[];return Ba(e).Y((o,a)=>{let c=_u(a);c.sequenceNumber<=n&&i.get(c.targetId)===null&&(r++,s.push(this.removeTargetData(e,c)))}).next(()=>_.waitFor(s)).next(()=>r)}forEachTarget(e,n){return Ba(e).Y((i,r)=>{let s=_u(r);n(s)})}Ln(e){return FO(e).get("targetGlobalKey").next(n=>(B(n!==null),n))}kn(e,n){return FO(e).put("targetGlobalKey",n)}qn(e,n){return Ba(e).put(qk(this.serializer,n))}Qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){let i=co(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),s=null;return Ba(e).Y({range:r,index:"queryTargetsIndex"},(o,a,c)=>{let l=_u(a);Xu(n,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,n,i){let r=[],s=Br(e);return n.forEach(o=>{let a=jt(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),_.waitFor(r)}removeMatchingKeys(e,n,i){let r=Br(e);return _.forEach(n,s=>{let o=jt(s.path);return _.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){let i=Br(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Br(e),s=de();return r.Y({range:i,J:!0},(o,a,c)=>{let l=Ci(o[1]),u=new P(l);s=s.add(u)}).next(()=>s)}containsKey(e,n){let i=jt(n.path),r=IDBKeyRange.bound([i],[ek(i)],!1,!0),s=0;return Br(e).Y({index:"documentTargetsIndex",J:!0,range:r},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}_t(e,n){return Ba(e).get(n).next(i=>i?_u(i):null)}};function Ba(t){return ht(t,"targets")}function FO(t){return ht(t,"targetGlobal")}function Br(t){return ht(t,"targetDocuments")}function LO([t,e],[n,i]){let r=re(t,n);return r===0?re(e,i):r}var qb=class{constructor(e){this.Kn=e,this.buffer=new Ne(LO),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();LO(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},Gb=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){b("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>m(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Jr(n)?b("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Xr(n)}yield this.zn(3e5)}))}},Wb=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return _.resolve(nn._e);let i=new qb(n);return this.jn.forEachTarget(e,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(e,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(b("LruGarbageCollector","Garbage collection skipped; disabled"),_.resolve(kO)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(b("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kO):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let i,r,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(b("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,n))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(l=Date.now(),Ua()<=pe.DEBUG&&b("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),_.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}};function v5(t,e){return new Wb(t,e)}var Kb=class{constructor(e,n){this.db=e,this.garbageCollector=v5(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Zn(e){let n=0;return this.Jn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(i,r)=>n(r))}addReference(e,n,i){return rm(e,i)}removeReference(e,n,i){return rm(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return rm(e,n)}er(e,n){return function(r,s){let o=!1;return Zk(r).Z(a=>Yk(r,a,s).next(c=>(c&&(o=!0),_.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],s=0;return this.Xn(e,(o,a)=>{if(a<=n){let c=this.er(e,o).next(l=>{if(!l)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,z.min()),Br(e).delete(function(d){return[0,jt(d.path)]}(o))))});r.push(c)}}).next(()=>_.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return rm(e,n)}Xn(e,n){let i=Br(e),r,s=nn._e;return i.Y({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==nn._e&&n(new P(Ci(r)),s),s=l,r=c):s=nn._e}).next(()=>{s!==nn._e&&n(new P(Ci(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function rm(t,e){return Br(t).put(function(i,r){return{targetId:0,path:jt(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var Fm=class{constructor(){this.changes=new Ri(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?_.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Qb=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return Ks(e).put(i)}removeEntry(e,n,i){return Ks(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],xm(o),a[a.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.tr(e,i)))}getEntry(e,n){let i=vt.newInvalidDocument(n);return Ks(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(mu(n))},(r,s)=>{i=this.nr(n,s)}).next(()=>i)}rr(e,n){let i={size:0,document:vt.newInvalidDocument(n)};return Ks(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(mu(n))},(r,s)=>{i={document:this.nr(n,s),size:Om(s)}}).next(()=>i)}getEntries(e,n){let i=sn();return this.ir(e,n,(r,s)=>{let o=this.nr(r,s);i=i.insert(r,o)}).next(()=>i)}sr(e,n){let i=sn(),r=new Le(P.comparator);return this.ir(e,n,(s,o)=>{let a=this.nr(s,o);i=i.insert(s,a),r=r.insert(s,Om(o))}).next(()=>({documents:i,_r:r}))}ir(e,n,i){if(n.isEmpty())return _.resolve();let r=new Ne(BO);n.forEach(c=>r=r.add(c));let s=IDBKeyRange.bound(mu(r.first()),mu(r.last())),o=r.getIterator(),a=o.getNext();return Ks(e).Y({index:"documentKeyIndex",range:s},(c,l,u)=>{let d=P.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&BO(a,d)<0;)i(a,null),a=o.getNext();a&&a.isEqual(d)&&(i(a,l),a=o.hasNext()?o.getNext():null),a?u.U(mu(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,s){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),xm(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ks(e).W(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let u=sn();for(let d of l){let h=this.nr(P.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(ed(n,h)||r.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,n,i,r){let s=sn(),o=jO(n,i),a=jO(n,Dn.max());return Ks(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,u)=>{let d=this.nr(P.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(d.key,d),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(e){return new Yb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return VO(e).get("remoteDocumentGlobalKey").next(n=>(B(!!n),n))}tr(e,n){return VO(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let i=g5(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(z.min())))return i}return vt.newInvalidDocument(e)}};function Xk(t){return new Qb(t)}var Yb=class extends Fm{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Ri(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new Ne((s,o)=>re(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=CO(this.ar.serializer,o);r=r.add(s.path.popLast());let l=Om(c);i+=l-a.size,n.push(this.ar.addEntry(e,s,c))}else if(i-=a.size,this.trackRemovals){let c=CO(this.ar.serializer,o.convertToNoDocument(z.min()));n.push(this.ar.addEntry(e,s,c))}}),r.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,i)),_.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(i=>(this.ur.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:i,_r:r})=>(r.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:i.get(s).readTime})}),i))}};function VO(t){return ht(t,"remoteDocumentGlobal")}function Ks(t){return ht(t,"remoteDocumentsV14")}function mu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jO(t,e){let n=e.documentKey.path.toArray();return[t,xm(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function BO(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=re(n[s],i[s]),r)return r;return r=re(n.length,i.length),r||(r=re(n[n.length-2],i[i.length-2]),r||re(n[n.length-1],i[i.length-1]))}var Zb=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Lm=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Iu(i.mutation,r,rn.empty(),Xe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,de()).next(()=>i))}getLocalViewOfDocuments(e,n,i=de()){let r=Ti();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=yu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let i=Ti();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,de()))}populateOverlays(e,n,i){let r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=sn(),o=Eu(),a=function(){return Eu()}();return n.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof Bn)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Iu(u.mutation,l,u.mutation.getFieldMask(),Xe.now())):o.set(l.key,rn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var d;return a.set(l,new Zb(u,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let i=Eu(),r=new Le((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=i.get(c)||rn.empty();u=a.applyToLocalView(l,u),i.set(c,u);let d=(r.get(a.batchId)||de()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=Dk();u.forEach(h=>{if(!s.has(h)){let f=Mk(n.get(h),i.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return _.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return P.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_k(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):_.resolve(Ti()),a=-1,c=s;return o.next(l=>_.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?_.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,de())).next(u=>({batchId:a,changes:bk(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new P(n)).next(i=>{let r=yu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let s=n.collectionGroup,o=yu();return this.indexManager.getCollectionParents(e,s).next(a=>_.forEach(a,c=>{let l=function(d,h){return new Wr(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,vt.newInvalidDocument(u)))});let a=yu();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&Iu(u.mutation,l,rn.empty(),Xe.now()),ed(n,l)&&(a=a.insert(c,l))}),a})}};var Xb=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return _.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Bt(r.createTime)}}(n)),_.resolve()}getNamedQuery(e,n){return _.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:Gk(r.bundledQuery),readTime:Bt(r.readTime)}}(n)),_.resolve()}};var Jb=class{constructor(){this.overlays=new Le(P.comparator),this.hr=new Map}getOverlay(e,n){return _.resolve(this.overlays.get(n))}getOverlays(e,n){let i=Ti();return _.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),_.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),_.resolve()}getOverlaysForCollection(e,n,i){let r=Ti(),s=n.length+1,o=new P(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return _.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Le((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>i){let u=s.get(l.largestBatchId);u===null&&(u=Ti(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Ti(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return _.resolve(a)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Ou(n,i));let s=this.hr.get(n);s===void 0&&(s=de(),this.hr.set(n,s)),this.hr.set(n,s.add(i.key))}};var Vu=class{constructor(){this.Pr=new Ne(nt.Ir),this.Tr=new Ne(nt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let i=new nt(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new nt(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){let n=new P(new Re([])),i=new nt(n,e),r=new nt(n,e+1),s=[];return this.Tr.forEachInRange([i,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new P(new Re([])),i=new nt(n,e),r=new nt(n,e+1),s=de();return this.Tr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new nt(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},nt=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return P.comparator(e.key,n.key)||re(e.pr,n.pr)}static Er(e,n){return re(e.pr,n.pr)||P.comparator(e.key,n.key)}};var eD=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ne(nt.Ir)}checkEmpty(e){return _.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Pu(s,n,i,r);this.mutationQueue.push(o);for(let a of r)this.wr=this.wr.add(new nt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return _.resolve(o)}lookupMutationBatch(e,n){return _.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.br(i),s=r<0?0:r;return _.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return _.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return _.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new nt(n,0),r=new nt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],o=>{let a=this.Sr(o.pr);s.push(a)}),_.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ne(re);return n.forEach(r=>{let s=new nt(r,0),o=new nt(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{i=i.add(a.pr)})}),_.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,s=i;P.isDocumentKey(s)||(s=s.child(""));let o=new nt(new P(s),0),a=new Ne(re);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.pr)),!0)},o),_.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){B(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return _.forEach(n.mutations,r=>{let s=new nt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){let i=new nt(n,0),r=this.wr.firstAfterOrEqual(i);return _.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,_.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var tD=class{constructor(e){this.vr=e,this.docs=function(){return new Le(P.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return _.resolve(i?i.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(e,n){let i=sn();return n.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():vt.newInvalidDocument(r))}),_.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=sn(),o=n.path,a=new P(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||GD(nk(u),i)<=0||(r.has(u.key)||ed(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return _.resolve(s)}getAllFromCollectionGroup(e,n,i,r){k()}Fr(e,n){return _.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new nD(this)}getSize(e){return _.resolve(this.size)}},nD=class extends Fm{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),_.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var iD=class{constructor(e){this.persistence=e,this.Mr=new Ri(n=>co(n),Xu),this.lastRemoteSnapshotVersion=z.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Vu,this.targetCount=0,this.Br=sc.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),_.resolve()}getLastRemoteSnapshotVersion(e){return _.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),_.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),_.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new sc(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,_.resolve()}updateTargetData(e,n){return this.qn(n),_.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,_.resolve()}removeTargets(e,n,i){let r=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),_.waitFor(s).next(()=>r)}getTargetCount(e){return _.resolve(this.targetCount)}getTargetData(e,n){let i=this.Mr.get(n)||null;return _.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),_.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),_.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),_.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Nr.gr(n);return _.resolve(i)}containsKey(e,n){return _.resolve(this.Nr.containsKey(n))}};var Vm=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new nn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new iD(this),this.indexManager=new $b,this.remoteDocumentCache=function(r){return new tD(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new Rm(n),this.$r=new Xb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Jb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Lr[e.toKey()];return i||(i=new eD(n,this.referenceDelegate),this.Lr[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){b("MemoryPersistence","Starting transaction:",e);let r=new rD(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(e,n){return _.or(Object.values(this.Lr).map(i=>()=>i.containsKey(e,n)))}},rD=class extends pm{constructor(e){super(),this.currentSequenceNumber=e}},jm=class t{constructor(e){this.persistence=e,this.zr=new Vu,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw k()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),_.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),_.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),_.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _.forEach(this.Jr,i=>{let r=P.fromPath(i);return this.Yr(e,r).next(s=>{s||n.removeEntry(r,z.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return _.or([()=>_.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var sD=class{constructor(e){this.serializer=e}N(e,n,i,r){let s=new mm("createOrUpgrade",n);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iO,{unique:!0}),c.createObjectStore("documentMutations")}(e),UO(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=_.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),UO(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:z.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(s))),i<4&&r>=4&&(i!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").W().next(u=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iO,{unique:!0});let d=l.store("mutations"),h=u.map(f=>d.put(f));return _.waitFor(h)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(o=o.next(()=>this.Xr(s))),i<6&&r>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),i<7&&r>=7&&(o=o.next(()=>this.ti(s))),i<8&&r>=8&&(o=o.next(()=>this.ni(e,s))),i<9&&r>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(o=o.next(()=>this.ri(s))),i<11&&r>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:O6});l.createIndex("collectionPathOverlayIndex",k6,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",F6,{unique:!1})})(e)})),i<13&&r>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:b6});l.createIndex("documentKeyIndex",D6),l.createIndex("collectionGroupIndex",C6)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.si(e,s))),i<15&&r>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:x6}).createIndex("sequenceNumberIndex",M6,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:N6}).createIndex("documentKeyIndex",P6,{unique:!1})}(e))),o}ei(e){let n=0;return e.store("remoteDocuments").Y((i,r)=>{n+=Om(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.W().next(r=>_.forEach(r,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",o).next(a=>_.forEach(a,c=>{B(c.userId===s.userId);let l=Zs(this.serializer,c);return Qk(e,s.userId,l).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let s=[];return i.Y((o,a)=>{let c=new Re(o),l=function(d){return[0,jt(d)]}(c);s.push(n.get(l).next(u=>u?_.resolve():(d=>n.put({targetId:0,path:jt(d),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>_.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:R6});let i=n.store("collectionParents"),r=new Lu,s=o=>{if(r.add(o)){let a=o.lastSegment(),c=o.popLast();return i.put({collectionId:a,parent:jt(c)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{let c=new Re(o);return s(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,c],l)=>{let u=Ci(a);return s(u.popLast())}))}ri(e){let n=e.store("targets");return n.Y((i,r)=>{let s=_u(r),o=qk(this.serializer,s);return n.put(o)})}ii(e,n){let i=n.store("remoteDocuments"),r=[];return i.Y((s,o)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new P(Re.fromString(d.document.name).popFirst(5)):d.noDocument?P.fromSegments(d.noDocument.path):d.unknownDocument?P.fromSegments(d.unknownDocument.path):k()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(l))}).next(()=>_.waitFor(r))}si(e,n){let i=n.store("mutations"),r=Xk(this.serializer),s=new Vm(jm.Hr,this.serializer.ct);return i.W().next(o=>{let a=new Map;return o.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:de();Zs(this.serializer,c).keys().forEach(d=>u=u.add(d)),a.set(c.userId,u)}),_.forEach(a,(c,l)=>{let u=new dt(l),d=Mm.lt(this.serializer,u),h=s.getIndexManager(u),f=km.lt(u,this.serializer,h,s.referenceDelegate);return new Lm(r,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new Au(n,nn._e),c).next()})})}};function UO(t){t.createObjectStore("targetDocuments",{keyPath:S6}).createIndex("documentTargetsIndex",A6,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",T6,{unique:!0}),t.createObjectStore("targetGlobal")}var WI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",oD=class t{constructor(e,n,i,r,s,o,a,c,l,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.oi=s,this.window=o,this.document=a,this._i=l,this.ai=u,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!t.D())throw new R(w.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kb(this,r),this.Ti=n+"main",this.serializer=new Rm(c),this.Ei=new so(this.Ti,this.ui,new sD(this.serializer)),this.Qr=new zb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Xk(this.serializer),this.$r=new kb,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,u===!1&&Ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new R(w.FAILED_PRECONDITION,WI);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new nn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>m(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>m(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>m(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Jr(e))return b("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return b("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return gu(e).get("owner").next(n=>_.resolve(this.Si(n)))}bi(e){return sm(e).delete(this.clientId)}Di(){return m(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=ht(n,"clientMetadata");return i.W().next(r=>{let s=this.vi(r,18e5),o=r.filter(a=>s.indexOf(a)===-1);return _.forEach(o,a=>i.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?_.resolve(!0):gu(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new R(w.FAILED_PRECONDITION,WI);return!1}}return!(!this.networkEnabled||!this.inForeground)||sm(e).W().next(i=>this.vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let s=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&b("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return m(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Au(e,nn._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Bi()})}vi(e,n){return e.filter(i=>this.Ci(i.updateTimeMs,n)&&!this.Mi(i.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>sm(e).W().next(n=>this.vi(n,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return km.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Hb(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Mm.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,i){b("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",s=function(c){return c===15?V6:c===14?ck:c===13?ak:c===12?L6:c===11?ok:void k()}(this.ui),o;return this.Ei.runTransaction(e,r,s,a=>(o=new Au(a,this.kr?this.kr.next():nn._e),n==="readwrite-primary"?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw Ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new R(w.FAILED_PRECONDITION,ik);return i(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return gu(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new R(w.FAILED_PRECONDITION,WI)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gu(e).put("owner",n)}static D(){return so.D()}yi(e){let n=gu(e);return n.get("owner").next(i=>this.Si(i)?(b("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):_.resolve())}Ci(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(Ze(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;Zw()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let i=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return b("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ze("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Ze("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function gu(t){return ht(t,"owner")}function sm(t){return ht(t,"clientMetadata")}function Jk(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var aD=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=de(),r=de();for(let s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new t(e,n.fromCache,i,r)}};var cD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Bm=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Zw()?8:so.v(ze())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new cD;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(Ua()<=pe.DEBUG&&b("QueryEngine","SDK will not create cache indexes for query:",$a(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),_.resolve()):(Ua()<=pe.DEBUG&&b("QueryEngine","Query:",$a(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(Ua()<=pe.DEBUG&&b("QueryEngine","The SDK decides to create cache indexes for query:",$a(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,on(n))):_.resolve())}ji(e,n){if(pO(n))return _.resolve(null);let i=on(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Im(n,null,"F"),i=on(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=de(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,Im(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,i,r){return pO(n)||r.isEqual(z.min())?_.resolve(null):this.zi.getDocuments(e,i).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,i,r)?_.resolve(null):(Ua()<=pe.DEBUG&&b("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$a(n)),this.es(e,o,n,tk(r,-1)).next(a=>a))})}Zi(e,n){let i=new Ne(Ek(e));return n.forEach((r,s)=>{ed(e,s)&&(i=i.add(s))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(e,n,i){return Ua()<=pe.DEBUG&&b("QueryEngine","Using full collection scan to execute query:",$a(n)),this.zi.getDocumentsMatchingQuery(e,n,Dn.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var lD=class{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new Le(re),this.rs=new Ri(s=>co(s),Xu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function eF(t,e,n,i){return new lD(t,e,n,i)}function tF(t,e){return m(this,null,function*(){let n=V(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=de();for(let l of r){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(i,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function w5(t,e){let n=V(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,h=d.keys(),f=_.resolve();return h.forEach(p=>{f=f.next(()=>u.getEntry(c,p)).next(g=>{let v=l.docVersions.get(p);B(v!==null),g.version.compareTo(v)<0&&(d.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),u.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function nF(t){let e=V(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function E5(t,e){let n=V(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let a=[];e.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(wt.EMPTY_BYTE_STRING,z.min()).withLastLimboFreeSnapshotVersion(z.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(d,f),function(g,v,E){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(h,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let c=sn(),l=de();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(I5(s,o,e.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!i.isEqual(z.min())){let u=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return _.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.ns=r,s))}function I5(t,e,n){let i=de(),r=de();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=sn();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(z.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):b("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:r}})}function b5(t,e){let n=V(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Um(t,e){let n=V(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(s=>s?(r=s,_.resolve(r)):n.Qr.allocateTargetId(i).next(o=>(r=new rc(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}function oc(t,e,n){return m(this,null,function*(){let i=V(t),r=i.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Jr(o))throw o;b("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function uD(t,e,n){let i=V(t),r=z.min(),s=de();return i.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){let d=V(c),h=d.rs.get(u);return h!==void 0?_.resolve(d.ns.get(h)):d.Qr.getTargetData(l,u)}(i,o,on(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.ts.getDocumentsMatchingQuery(o,e,n?r:z.min(),n?s:de())).next(a=>(sF(i,wk(e),a),{documents:a,hs:s})))}function iF(t,e){let n=V(t),i=V(n.Qr),r=n.ns.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i._t(s,e).next(o=>o?o.target:null))}function rF(t,e){let n=V(t),i=n.ss.get(e)||z.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.os.getAllFromCollectionGroup(r,e,tk(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(sF(n,e,r),r))}function sF(t,e,n){let i=t.ss.get(e)||z.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.ss.set(e,i)}function $O(t,e){return`firestore_clients_${t}_${e}`}function HO(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function KI(t,e){return`firestore_targets_${t}_${e}`}var $m=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Es(e,n,i){let r=JSON.parse(i),s,o=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new R(r.error.code,r.error.message))),o?new t(e,n,r.state,s):(Ze("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},bu=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Es(e,n){let i=JSON.parse(n),r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new R(i.error.code,i.error.message))),s?new t(e,i.state,r):(Ze("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Hm=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=ZD();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=rk(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new t(e,s):(Ze("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},dD=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Ze("SharedClientState",`Failed to parse online state: ${e}`),null)}},ju=class{constructor(){this.activeTargetIds=ZD()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Du=class{constructor(e,n,i,r,s){this.window=e,this.oi=n,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Le(re),this.started=!1,this.ys=[];let o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=$O(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new ju),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return m(this,null,function*(){let e=yield this.syncEngine.Li();for(let i of e){if(i===this.Vs)continue;let r=this.getItem($O(this.persistenceKey,i));if(r){let s=Hm.Es(i,r);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let i=this.xs(n);i&&this.Os(i)}for(let i of this.ys)this.gs(i);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,i){this.Bs(e,n,i),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(KI(this.persistenceKey,e));if(i){let r=bu.Es(e,i);r&&(n=r.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(KI(this.persistenceKey,e))}updateQueryState(e,n,i){this.qs(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Ls(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return b("SharedClientState","READ",e,n),n}setItem(e,n){b("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){b("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(b("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>m(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let i=this.$s(n.key);return this.Us(i,null)}{let i=this.Ws(n.key,n.newValue);if(i)return this.Us(i.clientId,i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let i=this.Gs(n.key,n.newValue);if(i)return this.zs(i)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let i=this.js(n.key,n.newValue);if(i)return this.Hs(i)}}else if(n.key===this.vs){if(n.newValue!==null){let i=this.xs(n.newValue);if(i)return this.Os(i)}}else if(n.key===this.Ss){let i=function(s){let o=nn._e;if(s!=null)try{let a=JSON.parse(s);B(typeof a=="number"),o=a}catch(a){Ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);i!==nn._e&&this.sequenceNumberHandler(i)}else if(n.key===this.Fs){let i=this.Js(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,i){let r=new $m(this.currentUser,e,n,i),s=HO(this.persistenceKey,this.currentUser,e);this.setItem(s,r.ds())}Ls(e){let n=HO(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,i){let r=KI(this.persistenceKey,e),s=new bu(e,n,i);this.setItem(r,s.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let i=this.$s(e);return Hm.Es(i,n)}Gs(e,n){let i=this.Ds.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return $m.Es(new dt(s),r,n)}js(e,n){let i=this.Cs.exec(e),r=Number(i[1]);return bu.Es(r,n)}xs(e){return dD.Es(e)}Js(e){return JSON.parse(e)}zs(e){return m(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);b("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let i=n?this.ps.insert(e,n):this.ps.remove(e),r=this.Ns(this.ps),s=this.Ns(i),o=[],a=[];return s.forEach(c=>{r.has(c)||o.push(c)}),r.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=i})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=ZD();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},zm=class{constructor(){this.no=new ju,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new ju,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var hD=class{io(e){}shutdown(){}};var qm=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){b("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){b("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var om=null;function QI(){return om===null?om=function(){return 268435456+Math.round(2147483648*Math.random())}():om++,"0x"+om.toString(16)}var D5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var fD=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var Rt="WebChannelConnection",pD=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=i+"://"+n.host,this.po=`projects/${r}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get wo(){return!1}So(n,i,r,s,o){let a=QI(),c=this.bo(n,i.toUriEncodedString());b("RestConnection",`Sending RPC '${n}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,s,o),this.Co(n,c,l,r).then(u=>(b("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Cu("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",r),u})}vo(n,i,r,s,o,a){return this.So(n,i,r,s,o)}Do(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}bo(n,i){let r=D5[n];return`${this.fo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,i,r){let s=QI();return new Promise((o,a)=>{let c=new XP;c.setWithCredentials(!0),c.listenOnce(YP.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case nm.NO_ERROR:let u=c.getResponseJson();b(Rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case nm.TIMEOUT:b(Rt,`RPC '${e}' ${s} timed out`),a(new R(w.DEADLINE_EXCEEDED,"Request time out"));break;case nm.HTTP_ERROR:let d=c.getStatus();if(b(Rt,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let p=function(v){let E=v.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(E)>=0?E:w.UNKNOWN}(f.status);a(new R(p,f.message))}else a(new R(w.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new R(w.UNAVAILABLE,"Connection failed."));break;default:k()}}finally{b(Rt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(r);b(Rt,`RPC '${e}' ${s} sending request:`,r),c.send(n,"POST",l,i,15)})}Fo(e,n,i){let r=QI(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=KP(),a=QP(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;let u=s.join("");b(Rt,`Creating RPC '${e}' stream ${r}: ${u}`,c);let d=o.createWebChannel(u,c),h=!1,f=!1,p=new fD({lo:v=>{f?b(Rt,`Not sending because RPC '${e}' stream ${r} is closed:`,v):(h||(b(Rt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),b(Rt,`RPC '${e}' stream ${r} sending:`,v),d.send(v))},ho:()=>d.close()}),g=(v,E,A)=>{v.listen(E,N=>{try{A(N)}catch(O){setTimeout(()=>{throw O},0)}})};return g(d,hu.EventType.OPEN,()=>{f||b(Rt,`RPC '${e}' stream ${r} transport opened.`)}),g(d,hu.EventType.CLOSE,()=>{f||(f=!0,b(Rt,`RPC '${e}' stream ${r} transport closed`),p.Vo())}),g(d,hu.EventType.ERROR,v=>{f||(f=!0,Cu(Rt,`RPC '${e}' stream ${r} transport errored:`,v),p.Vo(new R(w.UNAVAILABLE,"The operation could not be completed")))}),g(d,hu.EventType.MESSAGE,v=>{var E;if(!f){let A=v.data[0];B(!!A);let N=A,O=N.error||((E=N[0])===null||E===void 0?void 0:E.error);if(O){b(Rt,`RPC '${e}' stream ${r} received error:`,O);let K=O.status,j=function(Mt){let An=tt[Mt];if(An!==void 0)return Pk(An)}(K),ae=O.message;j===void 0&&(j=w.INTERNAL,ae="Unknown error status: "+K+" with message "+O.message),f=!0,p.Vo(new R(j,ae)),d.close()}else b(Rt,`RPC '${e}' stream ${r} received:`,A),p.mo(A)}}),g(a,ZP.STAT_EVENT,v=>{v.stat===qI.PROXY?b(Rt,`RPC '${e}' stream ${r} detected buffering proxy`):v.stat===qI.NOPROXY&&b(Rt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}};function oF(){return typeof window<"u"?window:null}function dm(){return typeof document<"u"?document:null}function dg(t){return new xb(t,!0)}var Gm=class{constructor(e,n,i=1e3,r=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=i,this.xo=r,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),i=Math.max(0,Date.now()-this.Lo),r=Math.max(0,n-i);r>0&&b("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var Wm=class{constructor(e,n,i,r,s,o,a,c){this.oi=e,this.$o=i,this.Uo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Gm(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return m(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return m(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return m(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(Ze(n.toString()),Ze("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===w.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Wo===n&&this.o_(i,r)},i=>{e(()=>{let r=new R(w.UNKNOWN,"Fetching auth token failed: "+i.message);return this.__(r)})})}o_(e,n){let i=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{i(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(r=>{i(()=>this.__(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Yo(){this.state=5,this.jo.qo(()=>m(this,null,function*(){this.state=0,this.start()}))}__(e){return b("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(b("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},mD=class extends Wm{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=l5(this.serializer,e),i=function(s){if(!("targetChange"in s))return z.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?z.min():o.readTime?Bt(o.readTime):z.min()}(e);return this.listener.u_(n,i)}c_(e){let n={};n.database=Pb(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=wm(c)?{documents:jk(s,c)}:{query:Bk(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Ok(s,o.resumeToken);let l=Mb(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(z.min())>0){a.readTime=ic(s,o.snapshotVersion.toTimestamp());let l=Mb(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let i=d5(this.serializer,e);i&&(n.labels=i),this.t_(n)}l_(e){let n={};n.database=Pb(this.serializer),n.removeTarget=e,this.t_(n)}},gD=class extends Wm{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(B(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=u5(e.writeResults,e.commitTime),i=Bt(e.commitTime);return this.listener.T_(i,n)}return B(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=Pb(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>Am(this.serializer,i))};this.t_(n)}};var yD=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new R(w.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,Nb(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new R(w.UNKNOWN,s.toString())})}vo(e,n,i,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Nb(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new R(w.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var _D=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ze(n),this.g_=!1):b("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var vD=class{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{i.enqueueAndForget(()=>m(this,null,function*(){yo(this)&&(b("RemoteStore","Restarting streams for network reachability change."),yield function(c){return m(this,null,function*(){let l=V(c);l.v_.add(4),yield td(l),l.x_.set("Unknown"),l.v_.delete(4),yield hg(l)})}(this))}))}),this.x_=new _D(i,r)}};function hg(t){return m(this,null,function*(){if(yo(t))for(let e of t.F_)yield e(!0)})}function td(t){return m(this,null,function*(){for(let e of t.F_)yield e(!1)})}function fg(t,e){let n=V(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),n0(n)?t0(n):dc(n).Jo()&&e0(n,e))}function Bu(t,e){let n=V(t),i=dc(n);n.C_.delete(e),i.Jo()&&aF(n,e),n.C_.size===0&&(i.Jo()?i.Xo():yo(n)&&n.x_.set("Unknown"))}function e0(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(z.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}dc(t).c_(e)}function aF(t,e){t.O_.Oe(e),dc(t).l_(e)}function t0(t){t.O_=new Rb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),dc(t).start(),t.x_.p_()}function n0(t){return yo(t)&&!dc(t).Ho()&&t.C_.size>0}function yo(t){return V(t).v_.size===0}function cF(t){t.O_=void 0}function C5(t){return m(this,null,function*(){t.C_.forEach((e,n)=>{e0(t,e)})})}function T5(t,e){return m(this,null,function*(){cF(t),n0(t)?(t.x_.S_(e),t0(t)):t.x_.set("Unknown")})}function S5(t,e,n){return m(this,null,function*(){if(t.x_.set("Online"),e instanceof Cm&&e.state===2&&e.cause)try{yield function(r,s){return m(this,null,function*(){let o=s.cause;for(let a of s.targetIds)r.C_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.C_.delete(a),r.O_.removeTarget(a))})}(t,e)}catch(i){b("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Km(t,i)}else if(e instanceof Ka?t.O_.$e(e):e instanceof Dm?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(z.min()))try{let i=yield nF(t.localStore);n.compareTo(i)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.C_.get(l);u&&s.C_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.C_.get(c);if(!u)return;s.C_.set(c,u.withResumeToken(wt.EMPTY_BYTE_STRING,u.snapshotVersion)),aF(s,c);let d=new rc(u.target,c,l,u.sequenceNumber);e0(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(i){b("RemoteStore","Failed to raise snapshot:",i),yield Km(t,i)}})}function Km(t,e,n){return m(this,null,function*(){if(!Jr(e))throw e;t.v_.add(1),yield td(t),t.x_.set("Offline"),n||(n=()=>nF(t.localStore)),t.asyncQueue.enqueueRetryable(()=>m(this,null,function*(){b("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield hg(t)}))})}function lF(t,e){return e().catch(n=>Km(t,n,e))}function uc(t){return m(this,null,function*(){let e=V(t),n=Zr(e),i=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;A5(e);)try{let r=yield b5(e.localStore,i);if(r===null){e.D_.length===0&&n.Xo();break}i=r.batchId,R5(e,r)}catch(r){yield Km(e,r)}uF(e)&&dF(e)})}function A5(t){return yo(t)&&t.D_.length<10}function R5(t,e){t.D_.push(e);let n=Zr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function uF(t){return yo(t)&&!Zr(t).Ho()&&t.D_.length>0}function dF(t){Zr(t).start()}function x5(t){return m(this,null,function*(){Zr(t).d_()})}function M5(t){return m(this,null,function*(){let e=Zr(t);for(let n of t.D_)e.I_(n.mutations)})}function N5(t,e,n){return m(this,null,function*(){let i=t.D_.shift(),r=Tb.from(i,e,n);yield lF(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield uc(t)})}function P5(t,e){return m(this,null,function*(){e&&Zr(t).P_&&(yield function(i,r){return m(this,null,function*(){if(function(o){return t5(o)&&o!==w.ABORTED}(r.code)){let s=i.D_.shift();Zr(i).Zo(),yield lF(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield uc(i)}})}(t,e)),uF(t)&&dF(t)})}function zO(t,e){return m(this,null,function*(){let n=V(t);n.asyncQueue.verifyOperationInProgress(),b("RemoteStore","RemoteStore received new credentials");let i=yo(n);n.v_.add(3),yield td(n),i&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield hg(n)})}function wD(t,e){return m(this,null,function*(){let n=V(t);e?(n.v_.delete(2),yield hg(n)):e||(n.v_.add(2),yield td(n),n.x_.set("Unknown"))})}function dc(t){return t.N_||(t.N_=function(n,i,r){let s=V(n);return s.R_(),new mD(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:C5.bind(null,t),To:T5.bind(null,t),u_:S5.bind(null,t)}),t.F_.push(e=>m(this,null,function*(){e?(t.N_.Zo(),n0(t)?t0(t):t.x_.set("Unknown")):(yield t.N_.stop(),cF(t))}))),t.N_}function Zr(t){return t.B_||(t.B_=function(n,i,r){let s=V(n);return s.R_(),new gD(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:x5.bind(null,t),To:P5.bind(null,t),E_:M5.bind(null,t),T_:N5.bind(null,t)}),t.F_.push(e=>m(this,null,function*(){e?(t.B_.Zo(),yield uc(t)):(yield t.B_.stop(),t.D_.length>0&&(b("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}var ED=class t{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){let o=Date.now()+i,a=new t(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new R(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function i0(t,e){if(Ze("AsyncQueue",`${e}: ${t}`),Jr(t))return new R(w.UNAVAILABLE,`${e}: ${t}`);throw t}var Qm=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||P.comparator(n.key,i.key):(n,i)=>P.comparator(n.key,i.key),this.keyedMap=yu(),this.sortedSet=new Le(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var Ym=class{constructor(){this.L_=new Le(P.comparator)}track(e){let n=e.doc.key,i=this.L_.get(n);i?e.type!==0&&i.type===3?this.L_=this.L_.insert(n,e):e.type===3&&i.type!==1?this.L_=this.L_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.L_=this.L_.remove(n):e.type===1&&i.type===2?this.L_=this.L_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):k():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,i)=>{e.push(i)}),e}},ac=class t{constructor(e,n,i,r,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,i,r,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Qm.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ug(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var ID=class{constructor(){this.q_=void 0,this.Q_=[]}},bD=class{constructor(){this.queries=new Ri(e=>vk(e),ug),this.onlineState="Unknown",this.K_=new Set}};function r0(t,e){return m(this,null,function*(){let n=V(t),i=e.query,r=!1,s=n.queries.get(i);if(s||(r=!0,s=new ID),r)try{s.q_=yield n.onListen(i)}catch(o){let a=i0(o,`Initialization of query '${$a(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&o0(n)})}function s0(t,e){return m(this,null,function*(){let n=V(t),i=e.query,r=!1,s=n.queries.get(i);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),r=s.Q_.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)})}function O5(t,e){let n=V(t),i=!1;for(let r of e){let s=r.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.W_(r)&&(i=!0);o.q_=r}}i&&o0(n)}function k5(t,e,n){let i=V(t),r=i.queries.get(e);if(r)for(let s of r.Q_)s.onError(n);i.queries.delete(e)}function o0(t){t.K_.forEach(e=>{e.next()})}var Uu=class{constructor(e,n,i){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=i||{}}W_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new ac(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let i=n!=="Offline";return(!this.options.Z_||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=ac.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var Zm=class{constructor(e){this.key=e}},Xm=class{constructor(e){this.key=e}},DD=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=de(),this.mutatedKeys=de(),this.ua=Ek(e),this.ca=new Qm(this.ua)}get la(){return this.oa}ha(e,n){let i=n?n.Pa:new Ym,r=n?n.ca:this.ca,s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{let h=r.get(u),f=ed(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(i.track({type:3,doc:f}),v=!0):this.Ia(h,f)||(i.track({type:2,doc:f}),v=!0,(c&&this.ua(f,c)>0||l&&this.ua(f,l)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),v=!0):h&&!f&&(i.track({type:1,doc:h}),v=!0,(c||l)&&(a=!0)),v&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{ca:o,Pa:i,Xi:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let o=e.Pa.k_();o.sort((u,d)=>function(f,p){let g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return k()}};return g(f)-g(p)}(u.type,d.type)||this.ua(u.doc,d.doc)),this.Ta(i),r=r!=null&&r;let a=n&&!r?this.Ea():[],c=this.aa.size===0&&this.current&&!r?1:0,l=c!==this._a;return this._a=c,o.length!==0||l?{snapshot:new ac(this.query,e.ca,s,o,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Ym,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=de(),this.ca.forEach(i=>{this.Aa(i.key)&&(this.aa=this.aa.add(i.key))});let n=[];return e.forEach(i=>{this.aa.has(i)||n.push(new Xm(i))}),this.aa.forEach(i=>{e.has(i)||n.push(new Zm(i))}),n}Ra(e){this.oa=e.hs,this.aa=de();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return ac.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},CD=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},TD=class{constructor(e){this.key=e,this.ma=!1}},SD=class{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Ri(a=>vk(a),ug),this.pa=new Map,this.ya=new Set,this.wa=new Le(P.comparator),this.Sa=new Map,this.ba=new Vu,this.Da={},this.Ca=new Map,this.va=sc.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function F5(t,e){return m(this,null,function*(){let n=d0(t),i,r,s=n.ga.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.Va();else{let o=yield Um(n.localStore,on(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=yield a0(n,e,i,a==="current",o.resumeToken),n.isPrimaryClient&&fg(n.remoteStore,o)}return r})}function a0(t,e,n,i,r){return m(this,null,function*(){t.Ma=(d,h,f)=>function(g,v,E,A){return m(this,null,function*(){let N=v.view.ha(E);N.Xi&&(N=yield uD(g.localStore,v.query,!1).then(({documents:ae})=>v.view.ha(ae,N)));let O=A&&A.targetChanges.get(v.targetId),K=A&&A.targetMismatches.get(v.targetId)!=null,j=v.view.applyChanges(N,g.isPrimaryClient,O,K);return AD(g,v.targetId,j.da),j.snapshot})}(t,d,h,f);let s=yield uD(t.localStore,e,!0),o=new DD(e,s.hs),a=o.ha(s.documents),c=Fu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),l=o.applyChanges(a,t.isPrimaryClient,c);AD(t,n,l.da);let u=new CD(e,n,o);return t.ga.set(e,u),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),l.snapshot})}function L5(t,e){return m(this,null,function*(){let n=V(t),i=n.ga.get(e),r=n.pa.get(i.targetId);if(r.length>1)return n.pa.set(i.targetId,r.filter(s=>!ug(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||(yield oc(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),Bu(n.remoteStore,i.targetId),cc(n,i.targetId)}).catch(Xr))):(cc(n,i.targetId),yield oc(n.localStore,i.targetId,!0))})}function V5(t,e,n){return m(this,null,function*(){let i=h0(t);try{let r=yield function(o,a){let c=V(o),l=Xe.now(),u=a.reduce((f,p)=>f.add(p.key),de()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=sn(),g=de();return c.os.getEntries(f,u).next(v=>{p=v,p.forEach((E,A)=>{A.isValidDocument()||(g=g.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,p)).next(v=>{d=v;let E=[];for(let A of a){let N=e5(A,d.get(A.key).overlayedDocument);N!=null&&E.push(new Bn(A.key,N,dk(N.value.mapValue),_t.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,E,a)}).next(v=>{h=v;let E=v.applyToLocalDocumentSet(d,g);return c.documentOverlayCache.saveOverlays(f,v.batchId,E)})}).then(()=>({batchId:h.batchId,changes:bk(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let l=o.Da[o.currentUser.toKey()];l||(l=new Le(re)),l=l.insert(a,c),o.Da[o.currentUser.toKey()]=l}(i,r.batchId,n),yield es(i,r.changes),yield uc(i.remoteStore)}catch(r){let s=i0(r,"Failed to persist write");n.reject(s)}})}function hF(t,e){return m(this,null,function*(){let n=V(t);try{let i=yield E5(n.localStore,e);e.targetChanges.forEach((r,s)=>{let o=n.Sa.get(s);o&&(B(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.ma=!0:r.modifiedDocuments.size>0?B(o.ma):r.removedDocuments.size>0&&(B(o.ma),o.ma=!1))}),yield es(n,i,e)}catch(i){yield Xr(i)}})}function qO(t,e,n){let i=V(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ga.forEach((s,o)=>{let a=o.view.U_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){let c=V(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.Q_)h.U_(a)&&(l=!0)}),l&&o0(c)}(i.eventManager,e),r.length&&i.fa.u_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function j5(t,e,n){return m(this,null,function*(){let i=V(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Sa.get(e),s=r&&r.key;if(s){let o=new Le(P.comparator);o=o.insert(s,vt.newNoDocument(s,z.min()));let a=de().add(s),c=new ku(z.min(),new Map,new Le(re),o,a);yield hF(i,c),i.wa=i.wa.remove(s),i.Sa.delete(e),u0(i)}else yield oc(i.localStore,e,!1).then(()=>cc(i,e,n)).catch(Xr)})}function B5(t,e){return m(this,null,function*(){let n=V(t),i=e.batch.batchId;try{let r=yield w5(n.localStore,e);l0(n,i,null),c0(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield es(n,r)}catch(r){yield Xr(r)}})}function U5(t,e,n){return m(this,null,function*(){let i=V(t);try{let r=yield function(o,a){let c=V(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(B(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(i.localStore,e);l0(i,e,n),c0(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield es(i,r)}catch(r){yield Xr(r)}})}function c0(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function l0(t,e,n){let i=V(t),r=i.Da[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Da[i.currentUser.toKey()]=r}}function cc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.pa.get(e))t.ga.delete(i),n&&t.fa.xa(i,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(i=>{t.ba.containsKey(i)||fF(t,i)})}function fF(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(Bu(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),u0(t))}function AD(t,e,n){for(let i of n)i instanceof Zm?(t.ba.addReference(i.key,e),$5(t,i)):i instanceof Xm?(b("SyncEngine","Document no longer in limbo: "+i.key),t.ba.removeReference(i.key,e),t.ba.containsKey(i.key)||fF(t,i.key)):k()}function $5(t,e){let n=e.key,i=n.path.canonicalString();t.wa.get(n)||t.ya.has(i)||(b("SyncEngine","New document in limbo: "+n),t.ya.add(i),u0(t))}function u0(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new P(Re.fromString(e)),i=t.va.next();t.Sa.set(i,new TD(n)),t.wa=t.wa.insert(n,i),fg(t.remoteStore,new rc(on(Ju(n.path)),i,"TargetPurposeLimboResolution",nn._e))}}function es(t,e,n){return m(this,null,function*(){let i=V(t),r=[],s=[],o=[];i.ga.isEmpty()||(i.ga.forEach((a,c)=>{o.push(i.Ma(c,e,n).then(l=>{if((l||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){r.push(l);let u=aD.Ki(c.targetId,l);s.push(u)}}))}),yield Promise.all(o),i.fa.u_(r),yield function(c,l){return m(this,null,function*(){let u=V(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>_.forEach(l,h=>_.forEach(h.qi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>_.forEach(h.Qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Jr(d))throw d;b("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.ns.get(h),p=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(p);u.ns=u.ns.insert(h,g)}}})}(i.localStore,s))})}function H5(t,e){return m(this,null,function*(){let n=V(t);if(!n.currentUser.isEqual(e)){b("SyncEngine","User change. New user:",e.toKey());let i=yield tF(n.localStore,e);n.currentUser=e,function(s,o){s.Ca.forEach(a=>{a.forEach(c=>{c.reject(new R(w.CANCELLED,o))})}),s.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield es(n,i.us)}})}function z5(t,e){let n=V(t),i=n.Sa.get(e);if(i&&i.ma)return de().add(i.key);{let r=de(),s=n.pa.get(e);if(!s)return r;for(let o of s){let a=n.ga.get(o);r=r.unionWith(a.view.la)}return r}}function q5(t,e){return m(this,null,function*(){let n=V(t),i=yield uD(n.localStore,e.query,!0),r=e.view.Ra(i);return n.isPrimaryClient&&AD(n,e.targetId,r.da),r})}function G5(t,e){return m(this,null,function*(){let n=V(t);return rF(n.localStore,e).then(i=>es(n,i))})}function W5(t,e,n,i){return m(this,null,function*(){let r=V(t),s=yield function(a,c){let l=V(a),u=V(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.vn(d,c).next(h=>h?l.localDocuments.getDocuments(d,h):_.resolve(null)))}(r.localStore,e);s!==null?(n==="pending"?yield uc(r.remoteStore):n==="acknowledged"||n==="rejected"?(l0(r,e,i||null),c0(r,e),function(a,c){V(V(a).mutationQueue).Mn(c)}(r.localStore,e)):k(),yield es(r,s)):b("SyncEngine","Cannot apply mutation batch with id: "+e)})}function K5(t,e){return m(this,null,function*(){let n=V(t);if(d0(n),h0(n),e===!0&&n.Fa!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield GO(n,i.toArray());n.Fa=!0,yield wD(n.remoteStore,!0);for(let s of r)fg(n.remoteStore,s)}else if(e===!1&&n.Fa!==!1){let i=[],r=Promise.resolve();n.pa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(cc(n,o),oc(n.localStore,o,!0))),Bu(n.remoteStore,o)}),yield r,yield GO(n,i),function(o){let a=V(o);a.Sa.forEach((c,l)=>{Bu(a.remoteStore,l)}),a.ba.mr(),a.Sa=new Map,a.wa=new Le(P.comparator)}(n),n.Fa=!1,yield wD(n.remoteStore,!1)}})}function GO(t,e,n){return m(this,null,function*(){let i=V(t),r=[],s=[];for(let o of e){let a,c=i.pa.get(o);if(c&&c.length!==0){a=yield Um(i.localStore,on(c[0]));for(let l of c){let u=i.ga.get(l),d=yield q5(i,u);d.snapshot&&s.push(d.snapshot)}}else{let l=yield iF(i.localStore,o);a=yield Um(i.localStore,l),yield a0(i,pF(l),o,!1,a.resumeToken)}r.push(a)}return i.fa.u_(s),r})}function pF(t){return yk(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Q5(t){return function(n){return V(V(n).persistence).Li()}(V(t).localStore)}function Y5(t,e,n,i){return m(this,null,function*(){let r=V(t);if(r.Fa)return void b("SyncEngine","Ignoring unexpected query state notification.");let s=r.pa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{let o=yield rF(r.localStore,wk(s[0])),a=ku.createSynthesizedRemoteEventForCurrentChange(e,n==="current",wt.EMPTY_BYTE_STRING);yield es(r,o,a);break}case"rejected":yield oc(r.localStore,e,!0),cc(r,e,i);break;default:k()}})}function Z5(t,e,n){return m(this,null,function*(){let i=d0(t);if(i.Fa){for(let r of e){if(i.pa.has(r)){b("SyncEngine","Adding an already active target "+r);continue}let s=yield iF(i.localStore,r),o=yield Um(i.localStore,s);yield a0(i,pF(s),o.targetId,!1,o.resumeToken),fg(i.remoteStore,o)}for(let r of n)i.pa.has(r)&&(yield oc(i.localStore,r,!1).then(()=>{Bu(i.remoteStore,r),cc(i,r)}).catch(Xr))}})}function d0(t){let e=V(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j5.bind(null,e),e.fa.u_=O5.bind(null,e.eventManager),e.fa.xa=k5.bind(null,e.eventManager),e}function h0(t){let e=V(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=B5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=U5.bind(null,e),e}var $u=class{constructor(){this.synchronizeTabs=!1}initialize(e){return m(this,null,function*(){this.serializer=dg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return eF(this.persistence,new Bm,e.initialUser,this.serializer)}createPersistence(e){return new Vm(jm.Hr,this.serializer)}createSharedClientState(e){return new zm}terminate(){return m(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Jm=class t extends $u{constructor(e,n,i){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return m(this,null,function*(){yield qn(t.prototype,this,"initialize").call(this,e),yield this.Na.initialize(this,e),yield h0(this.Na.syncEngine),yield uc(this.Na.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return eF(this.persistence,new Bm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new Gb(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new lb(n,this.persistence);return new cb(e.asyncQueue,i)}createPersistence(e){let n=Jk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new oD(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,oF(),dm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new zm}},RD=class t extends Jm{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return m(this,null,function*(){yield qn(t.prototype,this,"initialize").call(this,e);let n=this.Na.syncEngine;this.sharedClientState instanceof Du&&(this.sharedClientState.syncEngine={Zs:W5.bind(null,n),Xs:Y5.bind(null,n),eo:Z5.bind(null,n),Li:Q5.bind(null,n),Ys:G5.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(i=>m(this,null,function*(){yield K5(this.Na.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=oF();if(!Du.D(n))throw new R(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=Jk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Du(n,e.asyncQueue,i,e.clientId,e.initialUser)}},Hu=class{initialize(e,n){return m(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>qO(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=H5.bind(null,this.syncEngine),yield wD(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new bD}()}createDatastore(e){let n=dg(e.databaseInfo.databaseId),i=function(s){return new pD(s)}(e.databaseInfo);return function(s,o,a,c){return new yD(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new vD(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>qO(this.syncEngine,n,0),function(){return qm.D()?new qm:new hD}())}createSyncEngine(e,n){return function(r,s,o,a,c,l,u){let d=new SD(r,s,o,a,c,l);return u&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return m(this,null,function*(){var e;yield function(i){return m(this,null,function*(){let r=V(i);b("RemoteStore","RemoteStore shutting down."),r.v_.add(5),yield td(r),r.M_.shutdown(),r.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var zu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Ze("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var xD=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=dt.UNAUTHENTICATED,this.clientId=hm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>m(this,null,function*(){b("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(b("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new R(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=i0(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function YI(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),b("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>m(this,null,function*(){i.isEqual(r)||(yield tF(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function WO(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield J5(t);b("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>zO(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>zO(e.remoteStore,r)),t._onlineComponents=e})}function X5(t){return t.name==="FirebaseError"?t.code===w.FAILED_PRECONDITION||t.code===w.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function J5(t){return m(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){b("FirestoreClient","Using user provided OfflineComponentProvider");try{yield YI(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!X5(n))throw n;Cu("Error using user provided cache. Falling back to memory cache: "+n),yield YI(t,new $u)}}else b("FirestoreClient","Using default OfflineComponentProvider"),yield YI(t,new $u);return t._offlineComponents})}function mF(t){return m(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(b("FirestoreClient","Using user provided OnlineComponentProvider"),yield WO(t,t._uninitializedComponentsProvider._online)):(b("FirestoreClient","Using default OnlineComponentProvider"),yield WO(t,new Hu))),t._onlineComponents})}function e8(t){return mF(t).then(e=>e.syncEngine)}function eg(t){return m(this,null,function*(){let e=yield mF(t),n=e.eventManager;return n.onListen=F5.bind(null,e.syncEngine),n.onUnlisten=L5.bind(null,e.syncEngine),n})}function t8(t,e,n={}){let i=new bn;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(s,o,a,c,l){let u=new zu({next:h=>{o.enqueueAndForget(()=>s0(s,d));let f=h.docs.has(a);!f&&h.fromCache?l.reject(new R(w.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?l.reject(new R(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new Uu(Ju(a.path),u,{includeMetadataChanges:!0,Z_:!0});return r0(s,d)}(yield eg(t),t.asyncQueue,e,n,i)})),i.promise}function n8(t,e,n={}){let i=new bn;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(s,o,a,c,l){let u=new zu({next:h=>{o.enqueueAndForget(()=>s0(s,d)),h.fromCache&&c.source==="server"?l.reject(new R(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new Uu(a,u,{includeMetadataChanges:!0,Z_:!0});return r0(s,d)}(yield eg(t),t.asyncQueue,e,n,i)})),i.promise}function gF(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var KO=new Map;function yF(t,e,n){if(!n)throw new R(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function i8(t,e,n,i){if(e===!0&&i===!0)throw new R(w.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function QO(t){if(!P.isDocumentKey(t))throw new R(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function YO(t){if(P.isDocumentKey(t))throw new R(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":k()}function Wt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new R(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=pg(t);throw new R(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function r8(t,e){if(e<=0)throw new R(w.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var tg=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new R(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new R(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}i8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gF((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new R(w.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new R(w.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new R(w.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qu=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new R(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new R(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tg(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new JI;switch(i.type){case"firstParty":return new nb(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new R(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=KO.get(n);i&&(b("ComponentProvider","Removing Datastore"),KO.delete(n),i.terminate())}(this),Promise.resolve()}};var Zi=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},xt=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},$r=class t extends Zi{constructor(e,n,i){super(e,n,Ju(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new P(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function _F(t,e,...n){if(t=Ue(t),yF("collection","path",e),t instanceof qu){let i=Re.fromString(e,...n);return YO(i),new $r(t,null,i)}{if(!(t instanceof xt||t instanceof $r))throw new R(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Re.fromString(e,...n));return YO(i),new $r(t.firestore,null,i)}}function f0(t,e,...n){if(t=Ue(t),arguments.length===1&&(e=hm.newId()),yF("doc","path",e),t instanceof qu){let i=Re.fromString(e,...n);return QO(i),new xt(t,null,new P(i))}{if(!(t instanceof xt||t instanceof $r))throw new R(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Re.fromString(e,...n));return QO(i),new xt(t.firestore,t instanceof $r?t.converter:null,new P(i))}}var MD=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Gm(this,"async_queue_retry"),this._u=()=>{let n=dm();n&&b("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=dm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=dm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new bn;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return m(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Jr(e))throw e;b("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(i=>{this.ru=i,this.iu=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Ze("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.iu=!1,i))));return this.Xa=n,n}enqueueAfterDelay(e,n,i){this.au(),this.ou.indexOf(e)>-1&&(n=0);let r=ED.createAndSchedule(this,e,n,i,s=>this.lu(s));return this.nu.push(r),r}au(){this.ru&&k()}verifyOperationInProgress(){}hu(){return m(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};function ZO(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Cn=class extends qu{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new MD}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||wF(this),this._firestoreClient.terminate()}};function vF(t,e,n){n||(n="(default)");let i=Ol(t,"firestore");if(i.isInitialized(n)){let r=i.getImmediate({identifier:n}),s=i.getOptions(n);if(Sr(s,e))return r;throw new R(w.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new R(w.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new R(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return i.initialize({options:e,instanceIdentifier:n})}function nd(t){return t._firestoreClient||wF(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function wF(t){var e,n,i;let r=t._freezeSettings(),s=function(a,c,l,u){return new ub(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,gF(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new xD(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var Gu=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(wt.fromBase64String(e))}catch(n){throw new R(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var mo=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new R(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wu=class{constructor(e){this._methodName=e}};var Ku=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new R(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new R(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var s8=/^__.*__$/,ND=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Bn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yr(e,this.data,n,this.fieldTransforms)}},ng=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Bn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function EF(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw k()}}var PD=class t{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Au({path:i,Vu:!1});return r.mu(e),r}fu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Au({path:i,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return rg(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(EF(this.du)&&s8.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},OD=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||dg(e)}Su(e,n,i,r=!1){return new PD({du:e,methodName:n,wu:i,path:rt.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function id(t){let e=t._freezeSettings(),n=dg(t._databaseId);return new OD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function p0(t,e,n,i,r,s={}){let o=t.Su(s.merge||s.mergeFields?2:0,e,n,r);m0("Data must be an object, but it was:",o,i);let a=DF(i,o),c,l;if(s.merge)c=new rn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let h=kD(e,d,n);if(!o.contains(h))throw new R(w.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);TF(u,h)||u.push(h)}c=new rn(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new ND(new Vt(a),c,l)}var ig=class t extends Wu{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function IF(t,e,n,i){let r=t.Su(1,e,n);m0("Data must be an object, but it was:",r,i);let s=[],o=Vt.empty();go(i,(c,l)=>{let u=g0(e,c,n);l=Ue(l);let d=r.fu(u);if(l instanceof ig)s.push(u);else{let h=rd(l,d);h!=null&&(s.push(u),o.set(u,h))}});let a=new rn(s);return new ng(o,a,r.fieldTransforms)}function bF(t,e,n,i,r,s){let o=t.Su(1,e,n),a=[kD(e,i,n)],c=[r];if(s.length%2!=0)throw new R(w.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(kD(e,s[h])),c.push(s[h+1]);let l=[],u=Vt.empty();for(let h=a.length-1;h>=0;--h)if(!TF(l,a[h])){let f=a[h],p=c[h];p=Ue(p);let g=o.fu(f);if(p instanceof ig)l.push(f);else{let v=rd(p,g);v!=null&&(l.push(f),u.set(f,v))}}let d=new rn(l);return new ng(u,d,o.fieldTransforms)}function o8(t,e,n,i=!1){return rd(n,t.Su(i?4:3,e))}function rd(t,e){if(CF(t=Ue(t)))return m0("Unsupported field value:",e,t),DF(t,e);if(t instanceof Wu)return function(i,r){if(!EF(r.du))throw r.pu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.pu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let a of i){let c=rd(a,r.gu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Ue(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Q6(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=Xe.fromDate(i);return{timestampValue:ic(r.serializer,s)}}if(i instanceof Xe){let s=new Xe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ic(r.serializer,s)}}if(i instanceof Ku)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Gu)return{bytesValue:Ok(r.serializer,i._byteString)};if(i instanceof xt){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:XD(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.pu(`Unsupported field value: ${pg(i)}`)}(t,e)}function DF(t,e){let n={};return lk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(t,(i,r)=>{let s=rd(r,e.Ru(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function CF(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Ku||t instanceof Gu||t instanceof xt||t instanceof Wu)}function m0(t,e,n){if(!CF(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=pg(n);throw i==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+i)}}function kD(t,e,n){if((e=Ue(e))instanceof mo)return e._internalPath;if(typeof e=="string")return g0(t,e);throw rg("Field path arguments must be of type string or ",t,!1,void 0,n)}var a8=new RegExp("[~\\*/\\[\\]]");function g0(t,e,n){if(e.search(a8)>=0)throw rg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mo(...e.split("."))._internalPath}catch{throw rg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rg(t,e,n,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new R(w.INVALID_ARGUMENT,a+t+c)}function TF(t,e){return t.some(n=>n.isEqual(e))}var sg=class{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new FD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(mg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},FD=class extends sg{data(){return super.data()}};function mg(t,e){return typeof e=="string"?g0(t,e):e instanceof mo?e._internalPath:e._delegate._internalPath}function SF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new R(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qu=class{},Yu=class extends Qu{};function AF(t,e,...n){let i=[];e instanceof Qu&&i.push(e),i=i.concat(n),function(s){let o=s.filter(c=>c instanceof LD).length,a=s.filter(c=>c instanceof og).length;if(o>1||o>0&&a>0)throw new R(w.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var og=class t extends Yu{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return NF(e._query,n),new Zi(e.firestore,e.converter,bb(e._query,n))}_parse(e){let n=id(e.firestore);return function(s,o,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new R(w.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){JO(d,u);let f=[];for(let p of d)f.push(XO(c,s,p));h={arrayValue:{values:f}}}else h=XO(c,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||JO(d,u),h=o8(a,o,d,u==="in"||u==="not-in");return ge.create(l,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function RF(t,e,n){let i=e,r=mg("where",t);return og._create(r,i,n)}var LD=class t extends Qu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Te.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r,a=s.getFlattenedFilters();for(let c of a)NF(o,c),o=bb(o,c)}(e._query,n),new Zi(e.firestore,e.converter,bb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var VD=class t extends Yu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,s,o){if(r.startAt!==null)throw new R(w.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new R(w.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ao(s,o)}(e._query,this._field,this._direction);return new Zi(e.firestore,e.converter,function(r,s){let o=r.explicitOrderBy.concat([s]);return new Wr(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function xF(t,e="asc"){let n=e,i=mg("orderBy",t);return VD._create(i,n)}var jD=class t extends Yu{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new Zi(e.firestore,e.converter,Im(e._query,this._limit,this._limitType))}};function MF(t){return r8("limit",t),jD._create("limit",t,"F")}function XO(t,e,n){if(typeof(n=Ue(n))=="string"){if(n==="")throw new R(w.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_k(e)&&n.indexOf("/")!==-1)throw new R(w.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(Re.fromString(n));if(!P.isDocumentKey(i))throw new R(w.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Mu(t,new P(i))}if(n instanceof xt)return Mu(t,n._key);throw new R(w.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pg(n)}.`)}function JO(t,e){if(!Array.isArray(t)||t.length===0)throw new R(w.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NF(t,e){let n=function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new R(w.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new R(w.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var BD=class{convertValue(e,n="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw k()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return go(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new Ku(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=QD(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ru(e));default:return null}}convertTimestamp(e){let n=Hr(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=Re.fromString(e);B(zk(i));let r=new Xa(i.get(1),i.get(3)),s=new P(i.popFirst(5));return r.isEqual(n)||Ze(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function y0(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var to=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ag=class extends sg{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Qa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(mg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Qa=class extends ag{data(e={}){return super.data(e)}},cg=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new to(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Qa(this._firestore,this._userDataWriter,i.key,i,new to(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new R(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new Qa(r._firestore,r._userDataWriter,a.doc.key,a.doc,new to(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Qa(r._firestore,r._userDataWriter,a.doc.key,a.doc,new to(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:c8(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function c8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return k()}}function PF(t){t=Wt(t,xt);let e=Wt(t.firestore,Cn);return t8(nd(e),t._key).then(n=>jF(e,t,n))}var Zu=class extends BD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gu(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}};function OF(t){t=Wt(t,Zi);let e=Wt(t.firestore,Cn),n=nd(e),i=new Zu(e);return SF(t._query),n8(n,t._query).then(r=>new cg(e,i,t,r))}function kF(t,e,n){t=Wt(t,xt);let i=Wt(t.firestore,Cn),r=y0(t.converter,e,n);return sd(i,[p0(id(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,_t.none())])}function FF(t,e,n,...i){t=Wt(t,xt);let r=Wt(t.firestore,Cn),s=id(r),o;return o=typeof(e=Ue(e))=="string"||e instanceof mo?bF(s,"updateDoc",t._key,e,n,i):IF(s,"updateDoc",t._key,e),sd(r,[o.toMutation(t._key,_t.exists(!0))])}function LF(t){return sd(Wt(t.firestore,Cn),[new ho(t._key,_t.none())])}function VF(t,e){let n=Wt(t.firestore,Cn),i=f0(t),r=y0(t.converter,e);return sd(n,[p0(id(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,_t.exists(!1))]).then(()=>i)}function _0(t,...e){var n,i,r;t=Ue(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||ZO(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges};if(ZO(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let c,l,u;if(t instanceof xt)l=Wt(t.firestore,Cn),u=Ju(t._key.path),c={next:d=>{e[o]&&e[o](jF(l,t,d))},error:e[o+1],complete:e[o+2]};else{let d=Wt(t,Zi);l=Wt(d.firestore,Cn),u=d._query;let h=new Zu(l);c={next:f=>{e[o]&&e[o](new cg(l,h,d,f))},error:e[o+1],complete:e[o+2]},SF(t._query)}return function(h,f,p,g){let v=new zu(g),E=new Uu(f,v,p);return h.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return r0(yield eg(h),E)})),()=>{v.La(),h.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return s0(yield eg(h),E)}))}}(nd(l),u,a,c)}function sd(t,e){return function(i,r){let s=new bn;return i.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return V5(yield e8(i),r,s)})),s.promise}(nd(t),e)}function jF(t,e,n){let i=n.docs.get(e._key),r=new Zu(t);return new ag(t,r,e._key,i,new to(n.hasPendingWrites,n.fromCache),e.converter)}var UD=class{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=UF(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}};function BF(t){return new UD(t)}var $D=class{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new Hu,this._offlineComponentProvider=new Jm(this._onlineComponentProvider,e?.cacheSizeBytes,this.forceOwnership)}},HD=class{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new Hu,this._offlineComponentProvider=new RD(this._onlineComponentProvider,e?.cacheSizeBytes)}};function UF(t){return new $D(t?.forceOwnership)}function $F(){return new HD}var zD=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=id(e)}set(e,n,i){this._verifyNotCommitted();let r=ZI(e,this._firestore),s=y0(r.converter,n,i),o=p0(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,_t.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let s=ZI(e,this._firestore),o;return o=typeof(n=Ue(n))=="string"||n instanceof mo?bF(this._dataReader,"WriteBatch.update",s._key,n,i,r):IF(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,_t.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=ZI(e,this._firestore);return this._mutations=this._mutations.concat(new ho(n._key,_t.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new R(w.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ZI(t,e){if((t=Ue(t)).firestore!==e)throw new R(w.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function HF(t){return nd(t=Wt(t,Cn)),new zD(t,e=>sd(t,e))}(function(e,n=!0){(function(r){lc=r})(Mr),xr(new vn("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new Cn(new eb(i.getProvider("auth-internal")),new rb(i.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new R(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xa(l.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),it(eO,"4.4.1",e),it(eO,"4.4.1","esm2017")})();var gg=function(){return gg=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gg.apply(this,arguments)};var h8={includeMetadataChanges:!1};function zF(t,e){return e===void 0&&(e=h8),new W(function(n){var i=_0(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:i}})}function qF(t){return zF(t,{includeMetadataChanges:!0})}function GF(t,e){return e===void 0&&(e={}),qF(t).pipe(oe(function(n){return WF(n,e)}))}function WF(t,e){var n;e===void 0&&(e={});var i=t.data(e);return!t.exists()||typeof i!="object"||i===null||!e.idField?i:gg(gg({},i),(n={},n[e.idField]=t.id,n))}var od=class{constructor(e){return e}},KF="firestore",v0=class{constructor(){return kl(KF)}};var w0=new x("angularfire2.firestore-instances");function f8(t,e){let n=rp(KF,t,e);return n&&new od(n)}function p8(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new od(i)}}var m8={provide:v0,deps:[[new mt,w0]]},g8={provide:od,useFactory:f8,deps:[[new mt,w0],zi]},y8=(()=>{class t{constructor(){it("angularfire",Vs.full,"fst")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=ie({type:t});static \u0275inj=ne({providers:[g8,m8]})}return t})();function rle(t,...e){return{ngModule:y8,providers:[{provide:w0,useFactory:p8(t),multi:!0,deps:[L,Me,Sa,js,[new mt,Hl],[new mt,Ta],...e]}]}}var sle=Ae(GF,!0);var ole=Ae(VF,!0);var ale=Ae(_F,!0);var cle=Ae(LF,!0);var lle=Ae(f0,!0);var ule=Ae(PF,!0);var dle=Ae(OF,!0);var hle=Ae(vF,!0),fle=Ae(MF,!0);var ple=Ae(xF,!0),mle=Ae(BF,!0),gle=Ae($F,!0);var yle=Ae(AF,!0);var _le=Ae(kF,!0);var vle=Ae(FF,!0);var wle=Ae(RF,!0),Ele=Ae(HF,!0);var se=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(se||{}),xi="*";function Dle(t,e){return{type:se.Trigger,name:t,definitions:e,options:{}}}function Cle(t,e=null){return{type:se.Animate,styles:e,timings:t}}function QF(t,e=null){return{type:se.Sequence,steps:t,options:e}}function E0(t){return{type:se.Style,styles:t,offset:null}}function Tle(t,e,n){return{type:se.State,name:t,styles:e,options:n}}function Sle(t){return{type:se.Keyframes,steps:t}}function Ale(t,e,n=null){return{type:se.Transition,expr:t,animation:e,options:n}}var ts=class{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},ad=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,i=0,r=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,n/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((n,i)=>n===null||i.totalTime>n.totalTime?i:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},yg="!";function YF(t){return new S(3e3,!1)}function _8(){return new S(3100,!1)}function v8(){return new S(3101,!1)}function w8(t){return new S(3001,!1)}function E8(t){return new S(3003,!1)}function I8(t){return new S(3004,!1)}function b8(t,e){return new S(3005,!1)}function D8(){return new S(3006,!1)}function C8(){return new S(3007,!1)}function T8(t,e){return new S(3008,!1)}function S8(t){return new S(3002,!1)}function A8(t,e,n,i,r){return new S(3010,!1)}function R8(){return new S(3011,!1)}function x8(){return new S(3012,!1)}function M8(){return new S(3200,!1)}function N8(){return new S(3202,!1)}function P8(){return new S(3013,!1)}function O8(t){return new S(3014,!1)}function k8(t){return new S(3015,!1)}function F8(t){return new S(3016,!1)}function L8(t,e){return new S(3404,!1)}function V8(t){return new S(3502,!1)}function j8(t){return new S(3503,!1)}function B8(){return new S(3300,!1)}function U8(t){return new S(3504,!1)}function $8(t){return new S(3301,!1)}function H8(t,e){return new S(3302,!1)}function z8(t){return new S(3303,!1)}function q8(t,e){return new S(3400,!1)}function G8(t){return new S(3401,!1)}function W8(t){return new S(3402,!1)}function K8(t,e){return new S(3505,!1)}function ns(t){switch(t.length){case 0:return new ts;case 1:return t[0];default:return new ad(t)}}function u1(t,e,n=new Map,i=new Map){let r=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==o,d=u&&a||new Map;c.forEach((h,f)=>{let p=f,g=h;if(f!=="offset")switch(p=t.normalizePropertyName(p,r),g){case yg:g=n.get(f);break;case xi:g=i.get(f);break;default:g=t.normalizeStyleValue(f,p,g,r);break}d.set(p,g)}),u||s.push(d),a=d,o=l}),r.length)throw V8(r);return s}function H0(t,e,n,i){switch(e){case"start":t.onStart(()=>i(n&&I0(n,"start",t)));break;case"done":t.onDone(()=>i(n&&I0(n,"done",t)));break;case"destroy":t.onDestroy(()=>i(n&&I0(n,"destroy",t)));break}}function I0(t,e,n){let i=n.totalTime,r=!!n.disabled,s=z0(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,i??t.totalTime,r),o=t._data;return o!=null&&(s._data=o),s}function z0(t,e,n,i,r="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function cn(t,e,n){let i=t.get(e);return i||t.set(e,i=n),i}function ZF(t){let e=t.indexOf(":"),n=t.substring(1,e),i=t.slice(e+1);return[n,i]}var Q8=typeof document>"u"?null:document.documentElement;function q0(t){let e=t.parentNode||t.host||null;return e===Q8?null:e}function Y8(t){return t.substring(1,6)=="ebkit"}var _o=null,XF=!1;function Z8(t){_o||(_o=X8()||{},XF=_o.style?"WebkitAppearance"in _o.style:!1);let e=!0;return _o.style&&!Y8(t)&&(e=t in _o.style,!e&&XF&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in _o.style)),e}function X8(){return typeof document<"u"?document.body:null}function d1(t,e){for(;e;){if(e===t)return!0;e=q0(e)}return!1}function h1(t,e,n){if(n)return Array.from(t.querySelectorAll(e));let i=t.querySelector(e);return i?[i]:[]}var G0=(()=>{let e=class e{validateStyleProperty(i){return Z8(i)}matchesElement(i,r){return!1}containsElement(i,r){return d1(i,r)}getParentElement(i){return q0(i)}query(i,r,s){return h1(i,r,s)}computeStyle(i,r,s){return s||""}animate(i,r,s,o,a,c=[],l){return new ts(s,o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),pd=(()=>{let e=class e{};e.NOOP=new G0;let t=e;return t})(),Eo=class{};var J8=1e3,f1="{{",eK="}}",p1="ng-enter",A0="ng-leave",_g="ng-trigger",bg=".ng-trigger",JF="ng-animating",R0=".ng-animating";function Xi(t){if(typeof t=="number")return t;let e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:x0(parseFloat(e[1]),e[2])}function x0(t,e){switch(e){case"s":return t*J8;default:return t}}function Dg(t,e,n){return t.hasOwnProperty("duration")?t:tK(t,e,n)}function tK(t,e,n){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,s=0,o="";if(typeof t=="string"){let a=t.match(i);if(a===null)return e.push(YF(t)),{duration:0,delay:0,easing:""};r=x0(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(s=x0(parseFloat(c),a[4]));let l=a[5];l&&(o=l)}else r=t;if(!n){let a=!1,c=e.length;r<0&&(e.push(_8()),a=!0),s<0&&(e.push(v8()),a=!0),a&&e.splice(c,0,YF(t))}return{duration:r,delay:s,easing:o}}function nK(t){return t.length?t[0]instanceof Map?t:t.map(e=>new Map(Object.entries(e))):[]}function Mi(t,e,n){e.forEach((i,r)=>{let s=W0(r);n&&!n.has(r)&&n.set(r,t.style[s]),t.style[s]=i})}function wo(t,e){e.forEach((n,i)=>{let r=W0(i);t.style[r]=""})}function cd(t){return Array.isArray(t)?t.length==1?t[0]:QF(t):t}function iK(t,e,n){let i=e.params||{},r=m1(t);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||n.push(w8(s))})}var M0=new RegExp(`${f1}\\s*(.+?)\\s*${eK}`,"g");function m1(t){let e=[];if(typeof t=="string"){let n;for(;n=M0.exec(t);)e.push(n[1]);M0.lastIndex=0}return e}function ud(t,e,n){let i=`${t}`,r=i.replace(M0,(s,o)=>{let a=e[o];return a==null&&(n.push(E8(o)),a=""),a.toString()});return r==i?t:r}var rK=/-+([a-z0-9])/g;function W0(t){return t.replace(rK,(...e)=>e[1].toUpperCase())}function sK(t,e){return t===0||e===0}function oK(t,e,n){if(n.size&&e.length){let i=e[0],r=[];if(n.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,K0(t,a)))}}return e}function an(t,e,n){switch(e.type){case se.Trigger:return t.visitTrigger(e,n);case se.State:return t.visitState(e,n);case se.Transition:return t.visitTransition(e,n);case se.Sequence:return t.visitSequence(e,n);case se.Group:return t.visitGroup(e,n);case se.Animate:return t.visitAnimate(e,n);case se.Keyframes:return t.visitKeyframes(e,n);case se.Style:return t.visitStyle(e,n);case se.Reference:return t.visitReference(e,n);case se.AnimateChild:return t.visitAnimateChild(e,n);case se.AnimateRef:return t.visitAnimateRef(e,n);case se.Query:return t.visitQuery(e,n);case se.Stagger:return t.visitStagger(e,n);default:throw I8(e.type)}}function K0(t,e){return window.getComputedStyle(t)[e]}var aK=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Cg=class extends Eo{normalizePropertyName(e,n){return W0(e)}normalizeStyleValue(e,n,i,r){let s="",o=i.toString().trim();if(aK.has(n)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(b8(e,i))}return o+s}};var Tg="*";function cK(t,e){let n=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(i=>lK(i,n,e)):n.push(t),n}function lK(t,e,n){if(t[0]==":"){let c=uK(t,n);if(typeof c=="function"){e.push(c);return}t=c}let i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return n.push(k8(t)),e;let r=i[1],s=i[2],o=i[3];e.push(e1(r,o));let a=r==Tg&&o==Tg;s[0]=="<"&&!a&&e.push(e1(o,r))}function uK(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,i)=>parseFloat(i)>parseFloat(n);case":decrement":return(n,i)=>parseFloat(i)<parseFloat(n);default:return e.push(F8(t)),"* => *"}}var vg=new Set(["true","1"]),wg=new Set(["false","0"]);function e1(t,e){let n=vg.has(t)||wg.has(t),i=vg.has(e)||wg.has(e);return(r,s)=>{let o=t==Tg||t==r,a=e==Tg||e==s;return!o&&n&&typeof r=="boolean"&&(o=r?vg.has(t):wg.has(t)),!a&&i&&typeof s=="boolean"&&(a=s?vg.has(e):wg.has(e)),o&&a}}var g1=":self",dK=new RegExp(`s*${g1}s*,?`,"g");function y1(t,e,n,i){return new N0(t).build(e,n,i)}var t1="",N0=class{constructor(e){this._driver=e}build(e,n,i){let r=new P0(n);return this._resetContextStyleTimingState(r),an(this,cd(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=t1,e.collectedStyles=new Map,e.collectedStyles.set(t1,new Map),e.currentTime=0}visitTrigger(e,n){let i=n.queryCount=0,r=n.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&n.errors.push(D8()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),a.type==se.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,n))}),c.name=l}else if(a.type==se.Transition){let c=this.visitTransition(a,n);i+=c.queryCount,r+=c.depCount,o.push(c)}else n.errors.push(C8())}),{type:se.Trigger,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,n){let i=this.visitStyle(e.styles,n),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{m1(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&n.errors.push(T8(e.name,[...s.values()]))}return{type:se.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;let i=an(this,cd(e.animation),n),r=cK(e.expr,n.errors);return{type:se.Transition,matchers:r,animation:i,queryCount:n.queryCount,depCount:n.depCount,options:vo(e.options)}}visitSequence(e,n){return{type:se.Sequence,steps:e.steps.map(i=>an(this,i,n)),options:vo(e.options)}}visitGroup(e,n){let i=n.currentTime,r=0,s=e.steps.map(o=>{n.currentTime=i;let a=an(this,o,n);return r=Math.max(r,n.currentTime),a});return n.currentTime=r,{type:se.Group,steps:s,options:vo(e.options)}}visitAnimate(e,n){let i=mK(e.timings,n.errors);n.currentAnimateTimings=i;let r,s=e.styles?e.styles:E0({});if(s.type==se.Keyframes)r=this.visitKeyframes(s,n);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};i.easing&&(l.easing=i.easing),o=E0(l)}n.currentTime+=i.duration+i.delay;let c=this.visitStyle(o,n);c.isEmptyStep=a,r=c}return n.currentAnimateTimings=null,{type:se.Animate,timings:i,style:r,options:null}}visitStyle(e,n){let i=this._makeStyleAst(e,n);return this._validateStyleAst(i,n),i}_makeStyleAst(e,n){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===xi?i.push(a):n.errors.push(S8(a)):i.push(new Map(Object.entries(a)));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(f1)>=0){s=!0;break}}}),{type:se.Style,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,n){let i=n.currentAnimateTimings,r=n.currentTime,s=n.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=n.collectedStyles.get(n.currentQuerySelector),u=l.get(c),d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(n.errors.push(A8(c,u.startTime,u.endTime,s,r)),d=!1),s=u.startTime),d&&l.set(c,{startTime:s,endTime:r}),n.options&&iK(a,n.options,n.errors)})})}visitKeyframes(e,n){let i={type:se.Keyframes,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(R8()),i;let r=1,s=0,o=[],a=!1,c=!1,l=0,u=e.steps.map(E=>{let A=this._makeStyleAst(E,n),N=A.offset!=null?A.offset:pK(A.styles),O=0;return N!=null&&(s++,O=A.offset=N),c=c||O<0||O>1,a=a||O<l,l=O,o.push(O),A});c&&n.errors.push(x8()),a&&n.errors.push(M8());let d=e.steps.length,h=0;s>0&&s<d?n.errors.push(N8()):s==0&&(h=r/(d-1));let f=d-1,p=n.currentTime,g=n.currentAnimateTimings,v=g.duration;return u.forEach((E,A)=>{let N=h>0?A==f?1:h*A:o[A],O=N*v;n.currentTime=p+g.delay+O,g.duration=O,this._validateStyleAst(E,n),E.offset=N,i.styles.push(E)}),i}visitReference(e,n){return{type:se.Reference,animation:an(this,cd(e.animation),n),options:vo(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:se.AnimateChild,options:vo(e.options)}}visitAnimateRef(e,n){return{type:se.AnimateRef,animation:this.visitReference(e.animation,n),options:vo(e.options)}}visitQuery(e,n){let i=n.currentQuerySelector,r=e.options||{};n.queryCount++,n.currentQuery=e;let[s,o]=hK(e.selector);n.currentQuerySelector=i.length?i+" "+s:s,cn(n.collectedStyles,n.currentQuerySelector,new Map);let a=an(this,cd(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=i,{type:se.Query,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:vo(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(P8());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Dg(e.timings,n.errors,!0);return{type:se.Stagger,animation:an(this,cd(e.animation),n),timings:i,options:null}}};function hK(t){let e=!!t.split(/\s*,\s*/).find(n=>n==g1);return e&&(t=t.replace(dK,"")),t=t.replace(/@\*/g,bg).replace(/@\w+/g,n=>bg+"-"+n.slice(1)).replace(/:animating/g,R0),[t,e]}function fK(t){return t?I({},t):null}var P0=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function pK(t){if(typeof t=="string")return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){let i=n;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}function mK(t,e){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let s=Dg(t,e).duration;return b0(s,0,"")}let n=t;if(n.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=b0(0,0,"");return s.dynamic=!0,s.strValue=n,s}let r=Dg(n,e);return b0(r.duration,r.delay,r.easing)}function vo(t){return t?(t=I({},t),t.params&&(t.params=fK(t.params))):t={},t}function b0(t,e,n){return{duration:t,delay:e,easing:n}}function Q0(t,e,n,i,r,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}var dd=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}},gK=1,yK=":enter",_K=new RegExp(yK,"g"),vK=":leave",wK=new RegExp(vK,"g");function _1(t,e,n,i,r,s=new Map,o=new Map,a,c,l=[]){return new O0().buildKeyframes(t,e,n,i,r,s,o,a,c,l)}var O0=class{buildKeyframes(e,n,i,r,s,o,a,c,l,u=[]){l=l||new dd;let d=new k0(e,n,l,r,s,u,[]);d.options=c;let h=c.delay?Xi(c.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,c),an(this,i,d);let f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let g=f.length-1;g>=0;g--){let v=f[g];if(v.element===n){p=v;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,c)}return f.length?f.map(p=>p.buildKeyframes()):[Q0(n,[],[],[],0,h,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){let i=n.subInstructions.get(n.element);if(i){let r=n.createSubContext(e.options),s=n.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&n.transformIntoNewTimeline(o)}n.previousNode=e}visitAnimateRef(e,n){let i=n.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,i),this.visitReference(e.animation,i),n.transformIntoNewTimeline(i.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,i){for(let r of e){let s=r?.delay;if(s){let o=typeof s=="number"?s:Xi(ud(s,r?.params??{},n.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,n,i){let s=n.currentTimeline.currentTime,o=i.duration!=null?Xi(i.duration):null,a=i.delay!=null?Xi(i.delay):null;return o!==0&&e.forEach(c=>{let l=n.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,n){n.updateOptions(e.options,!0),an(this,e.animation,n),n.previousNode=e}visitSequence(e,n){let i=n.subContextCount,r=n,s=e.options;if(s&&(s.params||s.delay)&&(r=n.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==se.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Sg);let o=Xi(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>an(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){let i=[],r=n.currentTimeline.currentTime,s=e.options&&e.options.delay?Xi(e.options.delay):0;e.steps.forEach(o=>{let a=n.createSubContext(e.options);s&&a.delayNextStep(s),an(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>n.currentTimeline.mergeTimelineCollectedStyles(o)),n.transformIntoNewTimeline(r),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){let i=e.strValue,r=n.params?ud(i,n.params,n.errors):i;return Dg(r,n.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){let i=n.currentAnimateTimings=this._visitTiming(e.timings,n),r=n.currentTimeline;i.delay&&(n.incrementTime(i.delay),r.snapshotCurrentStyles());let s=e.style;s.type==se.Keyframes?this.visitKeyframes(s,n):(n.incrementTime(i.duration),this.visitStyle(s,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){let i=n.currentTimeline,r=n.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){let i=n.currentAnimateTimings,r=n.currentTimeline.duration,s=i.duration,a=n.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(r+s),n.previousNode=e}visitQuery(e,n){let i=n.currentTimeline.currentTime,r=e.options||{},s=r.delay?Xi(r.delay):0;s&&(n.previousNode.type===se.Style||i==0&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Sg);let o=i,a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{n.currentQueryIndex=u;let d=n.createSubContext(e.options,l);s&&d.delayNextStep(s),l===n.element&&(c=d.currentTimeline),an(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let h=d.currentTimeline.currentTime;o=Math.max(o,h)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),c&&(n.currentTimeline.mergeTimelineCollectedStyles(c),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){let i=n.parentContext,r=n.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(n.currentQueryTotal-1),c=o*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime;break}let u=n.currentTimeline;c&&u.delayNextStep(c);let d=u.currentTime;an(this,e.animation,n),n.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}},Sg={},k0=class t{constructor(e,n,i,r,s,o,a,c){this._driver=e,this.element=n,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Sg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Ag(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=Xi(i.duration)),i.delay!=null&&(r.delay=Xi(i.delay));let s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!n||!o.hasOwnProperty(a))&&(o[a]=ud(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let n=this.options.params;if(n){let i=e.params={};Object.keys(n).forEach(r=>{i[r]=n[r]})}}return e}createSubContext(e=null,n,i){let r=n||this.element,s=new t(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Sg,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,i){let r={duration:n??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new F0(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(_K,"."+this._enterClassName),e=e.replace(wK,"."+this._leaveClassName);let c=i!=1,l=this._driver.query(this.element,e,c);i!==0&&(l=i<0?l.slice(l.length+i,l.length):l.slice(0,i)),a.push(...l)}return!s&&a.length==0&&o.push(O8(n)),a}},Ag=class t{constructor(e,n,i,r){this._driver=e,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let n=this._keyframes.size===1&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=gK,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,i]of this._globalTimelineStyles)this._backFill.set(n,i||xi),this._currentKeyframe.set(n,xi);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,i,r){n&&this._previousKeyframe.set("easing",n);let s=r&&r.params||{},o=EK(e,this._globalTimelineStyles);for(let[a,c]of o){let l=ud(c,s,i);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??xi),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,i)=>{let r=this._styleSummary.get(i);(!r||n.time>r.time)&&this._updateStyle(i,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,n=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((u,d)=>{u===yg?e.add(d):u===xi&&n.add(d)}),i||l.set("offset",c/this.duration),r.push(l)});let s=[...e.values()],o=[...n.values()];if(i){let a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return Q0(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}},F0=class extends Ag{constructor(e,n,i,r,s,o,a=!1){super(e,n,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&n){let s=[],o=i+n,a=n/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",n1(a)),s.push(l);let u=e.length-1;for(let d=1;d<=u;d++){let h=new Map(e[d]),f=h.get("offset"),p=n+f*i;h.set("offset",n1(p/o)),s.push(h)}i=o,n=0,r="",e=s}return Q0(this.element,e,this.preStyleProps,this.postStyleProps,i,n,r,!0)}};function n1(t,e=3){let n=Math.pow(10,e-1);return Math.round(t*n)/n}function EK(t,e){let n=new Map,i;return t.forEach(r=>{if(r==="*"){i??=e.keys();for(let s of i)n.set(s,xi)}else for(let[s,o]of r)n.set(s,o)}),n}function i1(t,e,n,i,r,s,o,a,c,l,u,d,h){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:h}}var D0={},Rg=class{constructor(e,n,i){this._triggerName=e,this.ast=n,this._stateStyles=i}match(e,n,i,r){return IK(this.ast.matchers,e,n,i,r)}buildStyles(e,n,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(n,i):new Map}build(e,n,i,r,s,o,a,c,l,u){let d=[],h=this.ast.options&&this.ast.options.params||D0,f=a&&a.params||D0,p=this.buildStyles(i,f,d),g=c&&c.params||D0,v=this.buildStyles(r,g,d),E=new Set,A=new Map,N=new Map,O=r==="void",K={params:v1(g,h),delay:this.ast.options?.delay},j=u?[]:_1(e,n,this.ast.animation,s,o,p,v,K,l,d),ae=0;return j.forEach(De=>{ae=Math.max(De.duration+De.delay,ae)}),d.length?i1(n,this._triggerName,i,r,O,p,v,[],[],A,N,ae,d):(j.forEach(De=>{let Mt=De.element,An=cn(A,Mt,new Set);De.preStyleProps.forEach(ss=>An.add(ss));let NC=cn(N,Mt,new Set);De.postStyleProps.forEach(ss=>NC.add(ss)),Mt!==n&&E.add(Mt)}),i1(n,this._triggerName,i,r,O,p,v,j,[...E.values()],A,N,ae))}};function IK(t,e,n,i,r){return t.some(s=>s(e,n,i,r))}function v1(t,e){let n=I({},e);return Object.entries(t).forEach(([i,r])=>{r!=null&&(n[i]=r)}),n}var L0=class{constructor(e,n,i){this.styles=e,this.defaultParams=n,this.normalizer=i}buildStyles(e,n){let i=new Map,r=v1(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=ud(o,r,n));let c=this.normalizer.normalizePropertyName(a,n);o=this.normalizer.normalizeStyleValue(a,c,o,n),i.set(a,o)})}),i}};function bK(t,e,n){return new V0(t,e,n)}var V0=class{constructor(e,n,i){this.name=e,this.ast=n,this._normalizer=i,this.transitionFactories=[],this.states=new Map,n.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new L0(r.style,s,i))}),r1(this.states,"true","1"),r1(this.states,"false","0"),n.transitions.forEach(r=>{this.transitionFactories.push(new Rg(e,r,this.states))}),this.fallbackTransition=DK(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,i,r){return this.transitionFactories.find(o=>o.match(e,n,i,r))||null}matchStyles(e,n,i){return this.fallbackTransition.buildStyles(e,n,i)}};function DK(t,e,n){let i=[(o,a)=>!0],r={type:se.Sequence,steps:[],options:null},s={type:se.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new Rg(t,s,e)}function r1(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}var CK=new dd,j0=class{constructor(e,n,i){this.bodyNode=e,this._driver=n,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){let i=[],r=[],s=y1(this._driver,n,i,r);if(i.length)throw j8(i);r.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,n,i){let r=e.element,s=u1(this._normalizer,e.keyframes,n,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,n,i={}){let r=[],s=this._animations.get(e),o,a=new Map;if(s?(o=_1(this._driver,n,s,p1,A0,new Map,new Map,i,CK,r),o.forEach(u=>{let d=cn(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(B8()),o=[]),r.length)throw U8(r);a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,xi))})});let c=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),l=ns(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);let i=this.players.indexOf(n);i>=0&&this.players.splice(i,1)}_getPlayer(e){let n=this._playersById.get(e);if(!n)throw $8(e);return n}listen(e,n,i,r){let s=z0(n,"","","");return H0(this._getPlayer(e),i,s,r),()=>{}}command(e,n,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let o=r[0]||{};this.create(e,n,o);return}let s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},s1="ng-animate-queued",TK=".ng-animate-queued",C0="ng-animate-disabled",SK=".ng-animate-disabled",AK="ng-star-inserted",RK=".ng-star-inserted",xK=[],w1={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},MK={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Un="__ng_removed",hd=class{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=PK(r),i){let s=e,{value:o}=s,a=jC(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let n=e.params;if(n){let i=this.options.params;Object.keys(n).forEach(r=>{i[r]==null&&(i[r]=n[r])})}}},ld="void",T0=new hd(ld),B0=class{constructor(e,n,i){this.id=e,this.hostElement=n,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Tn(n,this._hostClassName)}listen(e,n,i,r){if(!this._triggers.has(n))throw H8(i,n);if(i==null||i.length==0)throw z8(n);if(!OK(i))throw q8(i,n);let s=cn(this._elementListeners,e,[]),o={name:n,phase:i,callback:r};s.push(o);let a=cn(this._engine.statesByElement,e,new Map);return a.has(n)||(Tn(e,_g),Tn(e,_g+"-"+n),a.set(n,T0)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return this._triggers.has(e)?!1:(this._triggers.set(e,n),!0)}_getTrigger(e){let n=this._triggers.get(e);if(!n)throw G8(e);return n}trigger(e,n,i,r=!0){let s=this._getTrigger(n),o=new fd(this.id,n,e),a=this._engine.statesByElement.get(e);a||(Tn(e,_g),Tn(e,_g+"-"+n),this._engine.statesByElement.set(e,a=new Map));let c=a.get(n),l=new hd(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(n,l),c||(c=T0),!(l.value===ld)&&c.value===l.value){if(!LK(c.params,l.params)){let g=[],v=s.matchStyles(c.value,c.params,g),E=s.matchStyles(l.value,l.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{wo(e,v),Mi(e,E)})}return}let h=cn(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==n&&g.queued&&g.destroy()});let f=s.matchTransition(c.value,l.value,e,l.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:f,fromState:c,toState:l,player:o,isFallbackTransition:p}),p||(Tn(e,s1),o.onStart(()=>{hc(e,s1)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);let v=this._engine.playersByElement.get(e);if(v){let E=v.indexOf(o);E>=0&&v.splice(E,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,i)=>{this._elementListeners.set(i,n.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let n=this._engine.playersByElement.get(e);n&&(n.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){let i=this._engine.driver.query(e,bg,!0);i.forEach(r=>{if(r[Un])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,n,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,n,i,r){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,ld,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,o),i&&ns(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let n=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(n&&i){let r=new Set;n.forEach(s=>{let o=s.name;if(r.has(o))return;r.add(o);let c=this._triggers.get(o).fallbackTransition,l=i.get(o)||T0,u=new hd(ld),d=new fd(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,n){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let r=!1;if(i.totalAnimations){let s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,n);else{let s=e[Un];(!s||s===w1)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,n))}}insertNode(e,n){Tn(e,this._hostClassName)}drainQueuedTransitions(e){let n=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){let c=z0(s,i.triggerName,i.fromState.value,i.toState.value);c._data=e,H0(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):n.push(i)}),this._queue=[],n.sort((i,r)=>{let s=i.transition.ast.depCount,o=r.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},U0=class{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,i){this.bodyNode=e,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(n=>{n.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,n){let i=new B0(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(i,n):(this.newHostElements.set(n,i),this.collectEnterElement(n)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,n){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(n);for(;a;){let c=r.get(a);if(c){let l=i.indexOf(c);i.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(n,e),e}register(e,n){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,n)),i}registerTrigger(e,n,i){let r=this._namespaceLookup[e];r&&r.register(n,i)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let n=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&n.add(s)}}return n}trigger(e,n,i,r){if(Eg(n)){let s=this._fetchNamespace(e);if(s)return s.trigger(n,i,r),!0}return!1}insertNode(e,n,i,r){if(!Eg(n))return;let s=n[Un];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(n);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(n,i)}r&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Tn(e,C0)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),hc(e,C0))}removeNode(e,n,i){if(Eg(n)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(n,i):this.markElementAsRemoved(e,n,!1,i);let s=this.namespacesByHostElement.get(n);s&&s.id!==e&&s.removeNode(n,i)}else this._onRemovalComplete(n,i)}markElementAsRemoved(e,n,i,r,s){this.collectedLeaveElements.push(n),n[Un]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,n,i,r,s){return Eg(n)?this._fetchNamespace(e).listen(n,i,r,s):()=>{}}_buildInstruction(e,n,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,n,s)}destroyInnerAnimations(e){let n=this.driver.query(e,bg,!0);n.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(n=this.driver.query(e,R0,!0),n.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let n=this.playersByElement.get(e);n&&n.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let n=this.playersByQueriedElement.get(e);n&&n.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ns(this.players).onDone(()=>e());e()})}processLeaveNode(e){let n=e[Un];if(n&&n.setForRemoval){if(e[Un]=w1,n.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(C0)&&this.markElementAsDisabled(e,!1),this.driver.query(e,SK,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Tn(r,AK)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{n=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],n.length?ns(n).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw W8(e)}_flushAnimations(e,n){let i=new dd,r=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(F=>{u.add(F);let $=this.driver.query(F,TK,!0);for(let G=0;G<$.length;G++)u.add($[G])});let d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=c1(h,this.collectedEnterElements),p=new Map,g=0;f.forEach((F,$)=>{let G=p1+g++;p.set($,G),F.forEach(we=>Tn(we,G))});let v=[],E=new Set,A=new Set;for(let F=0;F<this.collectedLeaveElements.length;F++){let $=this.collectedLeaveElements[F],G=$[Un];G&&G.setForRemoval&&(v.push($),E.add($),G.hasAnimation?this.driver.query($,RK,!0).forEach(we=>E.add(we)):A.add($))}let N=new Map,O=c1(h,Array.from(E));O.forEach((F,$)=>{let G=A0+g++;N.set($,G),F.forEach(we=>Tn(we,G))}),e.push(()=>{f.forEach((F,$)=>{let G=p.get($);F.forEach(we=>hc(we,G))}),O.forEach((F,$)=>{let G=N.get($);F.forEach(we=>hc(we,G))}),v.forEach(F=>{this.processLeaveNode(F)})});let K=[],j=[];for(let F=this._namespaceList.length-1;F>=0;F--)this._namespaceList[F].drainQueuedTransitions(n).forEach(G=>{let we=G.player,st=G.element;if(K.push(we),this.collectedEnterElements.length){let Et=st[Un];if(Et&&Et.setForMove){if(Et.previousTriggersValues&&Et.previousTriggersValues.has(G.triggerName)){let os=Et.previousTriggersValues.get(G.triggerName),ln=this.statesByElement.get(G.element);if(ln&&ln.has(G.triggerName)){let Od=ln.get(G.triggerName);Od.value=os,ln.set(G.triggerName,Od)}}we.destroy();return}}let zn=!d||!this.driver.containsElement(d,st),Kt=N.get(st),nr=p.get(st),je=this._buildInstruction(G,i,nr,Kt,zn);if(je.errors&&je.errors.length){j.push(je);return}if(zn){we.onStart(()=>wo(st,je.fromStyles)),we.onDestroy(()=>Mi(st,je.toStyles)),r.push(we);return}if(G.isFallbackTransition){we.onStart(()=>wo(st,je.fromStyles)),we.onDestroy(()=>Mi(st,je.toStyles)),r.push(we);return}let kC=[];je.timelines.forEach(Et=>{Et.stretchStartingKeyframe=!0,this.disabledNodes.has(Et.element)||kC.push(Et)}),je.timelines=kC,i.append(st,je.timelines);let QL={instruction:je,player:we,element:st};o.push(QL),je.queriedElements.forEach(Et=>cn(a,Et,[]).push(we)),je.preStyleProps.forEach((Et,os)=>{if(Et.size){let ln=c.get(os);ln||c.set(os,ln=new Set),Et.forEach((Od,iy)=>ln.add(iy))}}),je.postStyleProps.forEach((Et,os)=>{let ln=l.get(os);ln||l.set(os,ln=new Set),Et.forEach((Od,iy)=>ln.add(iy))})});if(j.length){let F=[];j.forEach($=>{F.push(K8($.triggerName,$.errors))}),K.forEach($=>$.destroy()),this.reportError(F)}let ae=new Map,De=new Map;o.forEach(F=>{let $=F.element;i.has($)&&(De.set($,$),this._beforeAnimationBuild(F.player.namespaceId,F.instruction,ae))}),r.forEach(F=>{let $=F.element;this._getPreviousPlayers($,!1,F.namespaceId,F.triggerName,null).forEach(we=>{cn(ae,$,[]).push(we),we.destroy()})});let Mt=v.filter(F=>l1(F,c,l)),An=new Map;a1(An,this.driver,A,l,xi).forEach(F=>{l1(F,c,l)&&Mt.push(F)});let ss=new Map;f.forEach((F,$)=>{a1(ss,this.driver,new Set(F),c,yg)}),Mt.forEach(F=>{let $=An.get(F),G=ss.get(F);An.set(F,new Map([...$?.entries()??[],...G?.entries()??[]]))});let ny=[],PC=[],OC={};o.forEach(F=>{let{element:$,player:G,instruction:we}=F;if(i.has($)){if(u.has($)){G.onDestroy(()=>Mi($,we.toStyles)),G.disabled=!0,G.overrideTotalTime(we.totalTime),r.push(G);return}let st=OC;if(De.size>1){let Kt=$,nr=[];for(;Kt=Kt.parentNode;){let je=De.get(Kt);if(je){st=je;break}nr.push(Kt)}nr.forEach(je=>De.set(je,st))}let zn=this._buildAnimation(G.namespaceId,we,ae,s,ss,An);if(G.setRealPlayer(zn),st===OC)ny.push(G);else{let Kt=this.playersByElement.get(st);Kt&&Kt.length&&(G.parentPlayer=ns(Kt)),r.push(G)}}else wo($,we.fromStyles),G.onDestroy(()=>Mi($,we.toStyles)),PC.push(G),u.has($)&&r.push(G)}),PC.forEach(F=>{let $=s.get(F.element);if($&&$.length){let G=ns($);F.setRealPlayer(G)}}),r.forEach(F=>{F.parentPlayer?F.syncPlayerEvents(F.parentPlayer):F.destroy()});for(let F=0;F<v.length;F++){let $=v[F],G=$[Un];if(hc($,A0),G&&G.hasAnimation)continue;let we=[];if(a.size){let zn=a.get($);zn&&zn.length&&we.push(...zn);let Kt=this.driver.query($,R0,!0);for(let nr=0;nr<Kt.length;nr++){let je=a.get(Kt[nr]);je&&je.length&&we.push(...je)}}let st=we.filter(zn=>!zn.destroyed);st.length?kK(this,$,st):this.processLeaveNode($)}return v.length=0,ny.forEach(F=>{this.players.push(F),F.onDone(()=>{F.destroy();let $=this.players.indexOf(F);this.players.splice($,1)}),F.play()}),ny}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,i,r,s){let o=[];if(n){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==ld;a.forEach(l=>{l.queued||!c&&l.triggerName!=r||o.push(l)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,n,i){let r=n.triggerName,s=n.element,o=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:r;for(let c of n.timelines){let l=c.element,u=l!==s,d=cn(i,l,[]);this._getPreviousPlayers(l,u,o,a,n.toState).forEach(f=>{let p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}wo(s,n.fromStyles)}_buildAnimation(e,n,i,r,s,o){let a=n.triggerName,c=n.element,l=[],u=new Set,d=new Set,h=n.timelines.map(p=>{let g=p.element;u.add(g);let v=g[Un];if(v&&v.removedBeforeQueried)return new ts(p.duration,p.delay);let E=g!==c,A=FK((i.get(g)||xK).map(ae=>ae.getRealPlayer())).filter(ae=>{let De=ae;return De.element?De.element===g:!1}),N=s.get(g),O=o.get(g),K=u1(this._normalizer,p.keyframes,N,O),j=this._buildPlayer(p,K,A);if(p.subTimeline&&r&&d.add(g),E){let ae=new fd(e,a,g);ae.setRealPlayer(j),l.push(ae)}return j});l.forEach(p=>{cn(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>NK(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Tn(p,JF));let f=ns(h);return f.onDestroy(()=>{u.forEach(p=>hc(p,JF)),Mi(c,n.toStyles)}),d.forEach(p=>{cn(r,p,[]).push(f)}),f}_buildPlayer(e,n,i){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,i):new ts(e.duration,e.delay)}},fd=class{constructor(e,n,i){this.namespaceId=e,this.triggerName=n,this.element=i,this._player=new ts,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,i)=>{n.forEach(r=>H0(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){cn(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let n=this._player;n.triggerCallback&&n.triggerCallback(e)}};function NK(t,e,n){let i=t.get(e);if(i){if(i.length){let r=i.indexOf(n);i.splice(r,1)}i.length==0&&t.delete(e)}return i}function PK(t){return t??null}function Eg(t){return t&&t.nodeType===1}function OK(t){return t=="start"||t=="done"}function o1(t,e){let n=t.style.display;return t.style.display=e??"none",n}function a1(t,e,n,i,r){let s=[];n.forEach(c=>s.push(o1(c)));let o=[];i.forEach((c,l)=>{let u=new Map;c.forEach(d=>{let h=e.computeStyle(l,d,r);u.set(d,h),(!h||h.length==0)&&(l[Un]=MK,o.push(l))}),t.set(l,u)});let a=0;return n.forEach(c=>o1(c,s[a++])),o}function c1(t,e){let n=new Map;if(t.forEach(a=>n.set(a,[])),e.length==0)return n;let i=1,r=new Set(e),s=new Map;function o(a){if(!a)return i;let c=s.get(a);if(c)return c;let l=a.parentNode;return n.has(l)?c=l:r.has(l)?c=i:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==i&&n.get(c).push(a)}),n}function Tn(t,e){t.classList?.add(e)}function hc(t,e){t.classList?.remove(e)}function kK(t,e,n){ns(n).onDone(()=>t.processLeaveNode(e))}function FK(t){let e=[];return E1(t,e),e}function E1(t,e){for(let n=0;n<t.length;n++){let i=t[n];i instanceof ad?E1(i.players,e):e.push(i)}}function LK(t,e){let n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){let s=n[r];if(!e.hasOwnProperty(s)||t[s]!==e[s])return!1}return!0}function l1(t,e,n){let i=n.get(t);if(!i)return!1;let r=e.get(t);return r?i.forEach(s=>r.add(s)):e.set(t,i),n.delete(t),!0}var fc=class{constructor(e,n,i){this._driver=n,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new U0(e.body,n,i),this._timelineEngine=new j0(e.body,n,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,n,i,r,s){let o=e+"-"+r,a=this._triggerCache[o];if(!a){let c=[],l=[],u=y1(this._driver,s,c,l);if(c.length)throw L8(r,c);l.length&&void 0,a=bK(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(n,r,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,i,r){this._transitionEngine.insertNode(e,n,i,r)}onRemove(e,n,i){this._transitionEngine.removeNode(e,n,i)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,i,r){if(i.charAt(0)=="@"){let[s,o]=ZF(i),a=r;this._timelineEngine.command(s,n,o,a)}else this._transitionEngine.trigger(e,n,i,r)}listen(e,n,i,r,s){if(i.charAt(0)=="@"){let[o,a]=ZF(i);return this._timelineEngine.listen(o,n,a,s)}return this._transitionEngine.listen(e,n,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function VK(t,e){let n=null,i=null;return Array.isArray(e)&&e.length?(n=S0(e[0]),e.length>1&&(i=S0(e[e.length-1]))):e instanceof Map&&(n=S0(e)),n||i?new jK(t,n,i):null}var jK=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._startStyles=r,this._endStyles=s,this._state=0;let o=e.initialStylesByElement.get(i);o||e.initialStylesByElement.set(i,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Mi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Mi(this._element,this._initialStyles),this._endStyles&&(Mi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(wo(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wo(this._element,this._endStyles),this._endStyles=null),Mi(this._element,this._initialStyles),this._state=3)}};e.initialStylesByElement=new WeakMap;let t=e;return t})();function S0(t){let e=null;return t.forEach((n,i)=>{BK(i)&&(e=e||new Map,e.set(i,n))}),e}function BK(t){return t==="display"||t==="position"}var xg=class{constructor(e,n,i,r){this.element=e,this.keyframes=n,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let n=()=>this._onFinish();this.domPlayer.addEventListener("finish",n),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",n)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let n=[];return e.forEach(i=>{n.push(Object.fromEntries(i))}),n}_triggerWebAnimation(e,n,i){return e.animate(this._convertKeyframesToObject(n),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:K0(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let n=e==="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},Mg=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return d1(e,n)}getParentElement(e){return q0(e)}query(e,n,i){return h1(e,n,i)}computeStyle(e,n,i){return K0(e,n)}animate(e,n,i,r,s,o=[]){let a=r==0?"both":"forwards",c={duration:i,delay:r,fill:a};s&&(c.easing=s);let l=new Map,u=o.filter(f=>f instanceof xg);sK(i,r)&&u.forEach(f=>{f.currentSnapshot.forEach((p,g)=>l.set(g,p))});let d=nK(n).map(f=>new Map(f));d=oK(e,d,l);let h=VK(e,d);return new xg(e,d,c,h)}};var Ig="@",I1="@.disabled",Ng=class{constructor(e,n,i,r){this.namespaceId=e,this.delegate=n,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,i,r=!0){this.delegate.insertBefore(e,n,i),this.engine.onInsert(this.namespaceId,n,e,r)}removeChild(e,n,i){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,i,r){this.delegate.setAttribute(e,n,i,r)}removeAttribute(e,n,i){this.delegate.removeAttribute(e,n,i)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,i,r){this.delegate.setStyle(e,n,i,r)}removeStyle(e,n,i){this.delegate.removeStyle(e,n,i)}setProperty(e,n,i){n.charAt(0)==Ig&&n==I1?this.disableAnimations(e,!!i):this.delegate.setProperty(e,n,i)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,i){return this.delegate.listen(e,n,i)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}},$0=class extends Ng{constructor(e,n,i,r,s){super(n,i,r,s),this.factory=e,this.namespaceId=n}setProperty(e,n,i){n.charAt(0)==Ig?n.charAt(1)=="."&&n==I1?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,n.slice(1),i):this.delegate.setProperty(e,n,i)}listen(e,n,i){if(n.charAt(0)==Ig){let r=UK(e),s=n.slice(1),o="";return s.charAt(0)!=Ig&&([s,o]=$K(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,i,a)})}return this.delegate.listen(e,n,i)}};function UK(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function $K(t){let e=t.indexOf("."),n=t.substring(0,e),i=t.slice(e+1);return[n,i]}var Pg=class{constructor(e,n,i){this.delegate=e,this.engine=n,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,n.onRemovalComplete=(r,s)=>{let o=s?.parentNode(r);o&&s.removeChild(o,r)}}createRenderer(e,n){let i="",r=this.delegate.createRenderer(e,n);if(!e||!n?.data?.animation){let l=this._rendererCache,u=l.get(r);if(!u){let d=()=>l.delete(r);u=new Ng(i,r,this.engine,d),l.set(r,u)}return u}let s=n.id,o=n.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return n.data.animation.forEach(a),new $0(this,o,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>n(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),r.push([n,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var zK=(()=>{let e=class e extends fc{constructor(i,r,s,o){super(i,r,s)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(y(Q),y(pd),y(Eo),y(hi))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function qK(){return new Cg}function GK(t,e,n){return new Pg(t,e,n)}var D1=[{provide:Eo,useFactory:qK},{provide:fc,useClass:zK},{provide:bs,useFactory:GK,deps:[Mf,fc,L]}],b1=[{provide:pd,useFactory:()=>new Mg},{provide:qt,useValue:"BrowserAnimations"},...D1],WK=[{provide:pd,useClass:G0},{provide:qt,useValue:"NoopAnimations"},...D1],Ule=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:i.disableAnimations?WK:b1}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({providers:b1,imports:[Ix]});let t=e;return t})();function KK(t){return t!=null&&`${t}`!="false"}function md(t,e=0){return QK(t)?Number(t):e}function QK(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function pc(t){return Array.isArray(t)?t:[t]}function Je(t){return t==null?"":typeof t=="string"?t:`${t}px`}function Ji(t){return t instanceof _e?t.nativeElement:t}function qle(t,e=/\s+/){let n=[];if(t!=null){let i=Array.isArray(t)?t:`${t}`.split(e);for(let r of i){let s=`${r}`.trim();s&&n.push(s)}}return n}var Z0;try{Z0=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Z0=!1}var We=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?Kv(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Z0)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(y(pn))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var mc,C1=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Xle(){if(mc)return mc;if(typeof document!="object"||!document)return mc=new Set(C1),mc;let t=document.createElement("input");return mc=new Set(C1.filter(e=>(t.setAttribute("type",e),t.type===e))),mc}var gd;function YK(){if(gd==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>gd=!0}))}finally{gd=gd||!1}return gd}function gc(t){return YK()?t:!!t.capture}var Io;function T1(){if(Io==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Io=!1,Io;if("scrollBehavior"in document.documentElement.style)Io=!0;else{let t=Element.prototype.scrollTo;t?Io=!/\{\s*\[native code\]\s*\}/.test(t.toString()):Io=!1}}return Io}var Y0;function ZK(){if(Y0==null){let t=typeof document<"u"?document.head:null;Y0=!!(t&&(t.createShadowRoot||t.attachShadow))}return Y0}function S1(t){if(ZK()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function yc(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function $n(t){return t.composedPath?t.composedPath()[0]:t.target}function yd(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var XK=new x("cdk-dir-doc",{providedIn:"root",factory:JK});function JK(){return C(Q)}var eQ=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function tQ(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?eQ.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var vd=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new Ie,i){let r=i.body?i.body.dir:null,s=i.documentElement?i.documentElement.dir:null;this.value=tQ(r||s||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(y(XK,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var is=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({});let t=e;return t})();var iQ=20,R1=(()=>{let e=class e{constructor(i,r,s){this._ngZone=i,this._platform=r,this._scrolled=new q,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=iQ){return this._platform.isBrowser?new W(r=>{this._globalSubscription||this._addGlobalListener();let s=i>0?this._scrolled.pipe(dh(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):H()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let s=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(ke(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,i)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let s=Ji(r),o=i.getElementRef().nativeElement;do if(s==o)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return Sc(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(y(L),y(We),y(Q,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var rQ=20,X0=(()=>{let e=class e{constructor(i,r,s){this._platform=i,this._change=new q,this._changeListener=o=>{this._change.next(o)},this._document=s,r.runOutsideAngular(()=>{if(i.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+s,right:i.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),s=i.documentElement,o=s.getBoundingClientRect(),a=-o.top||i.body.scrollTop||r.scrollY||s.scrollTop||0,c=-o.left||i.body.scrollLeft||r.scrollX||s.scrollLeft||0;return{top:a,left:c}}change(i=rQ){return i>0?this._change.pipe(dh(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(y(We),y(L),y(Q,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var A1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({});let t=e;return t})(),J0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({imports:[is,A1,is,A1]});let t=e;return t})();var wd=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},_c=class extends wd{constructor(e,n,i,r,s){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}},vc=class extends wd{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},eC=class extends wd{constructor(e){super(),this.element=e instanceof _e?e.nativeElement:e}},wc=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof _c)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof vc)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof eC)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Og=class extends wc{constructor(e,n,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Me.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Ed=(()=>{let e=class e extends wc{constructor(i,r,s){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Ie,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,o=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(o,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};e.\u0275fac=function(r){return new(r||e)(T(wr),T(mn),T(Q))},e.\u0275dir=me({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[fe.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Ye]});let t=e;return t})();var kg=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({});let t=e;return t})();function Fg(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var x1=T1(),tC=class{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Je(-this._previousScrollPosition.left),e.style.top=Je(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,i=e.style,r=n.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),x1&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),x1&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};var nC=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(ke(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Lg=class{enable(){}disable(){}attach(){}};function iC(t,e){return e.some(n=>{let i=t.bottom<n.top,r=t.top>n.bottom,s=t.right<n.left,o=t.left>n.right;return i||r||s||o})}function M1(t,e){return e.some(n=>{let i=t.top<n.top,r=t.bottom>n.bottom,s=t.left<n.left,o=t.right>n.right;return i||r||s||o})}var rC=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();iC(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},oQ=(()=>{let e=class e{constructor(i,r,s,o){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new Lg,this.close=a=>new nC(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new tC(this._viewportRuler,this._document),this.reposition=a=>new rC(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}};e.\u0275fac=function(r){return new(r||e)(y(R1),y(X0),y(L),y(Q))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Id=class{constructor(e){if(this.scrollStrategy=new Lg,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let n=Object.keys(e);for(let i of n)e[i]!==void 0&&(this[i]=e[i])}}};var sC=class{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var F1=(()=>{let e=class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(y(Q))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),aQ=(()=>{let e=class e extends F1{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=s=>{let o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){let c=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(s)):c.next(s);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(y(Q),y(L,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cQ=(()=>{let e=class e extends F1{constructor(i,r,s){super(i),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=$n(o)},this._clickListener=o=>{let a=$n(o),c=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let u=l.length-1;u>-1;u--){let d=l[u];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(a)||d.overlayElement.contains(c))break;let h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(o)):h.next(o)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(y(Q),y(We),y(L,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ec=(()=>{let e=class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||yd()){let s=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}let r=this._document.createElement("div");r.classList.add(i),yd()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(y(Q),y(We))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),er=class{constructor(e,n,i,r,s,o,a,c,l,u=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new q,this._attachments=new q,this._detachments=new q,this._locationChanges=Se.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new q,this._outsidePointerEvents=new q,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Be(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=I(I({},this._config),e),this._updateElementSize()}setDirection(e){this._config=ye(I({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Je(this._config.width),e.height=Je(this._config.height),e.minWidth=Je(this._config.minWidth),e.minHeight=Je(this._config.minHeight),e.maxWidth=Je(this._config.maxWidth),e.maxHeight=Je(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){let r=pc(n||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let e=this._ngZone.onStable.pipe(Qn(Ac(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},N1="cdk-overlay-connected-position-bounding-box",lQ=/([A-Za-z%]+)$/,oC=class{get positions(){return this._preferredPositions}constructor(e,n,i,r,s){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new q,this._resizeSubscription=Se.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(N1),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,n,a),u=this._getOverlayFit(l,n,i,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(u,l,i)){s.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(s.length){let a=null,c=-1;for(let l of s){let u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&bo(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(N1),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=i.originX=="start"?o:a}n.left<0&&(r-=n.left);let s;return i.originY=="center"?s=e.top+e.height/2:s=i.originY=="top"?e.top:e.bottom,n.top<0&&(s-=n.top),{x:r,y:s}}_getOverlayPoint(e,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let s;return i.overlayY=="center"?s=-n.height/2:s=i.overlayY=="top"?0:-n.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,n,i,r){let s=O1(n),{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let u=0-o,d=o+s.width-i.width,h=0-a,f=a+s.height-i.height,p=this._subtractOverflows(s.width,u,d),g=this._subtractOverflows(s.height,h,f),v=p*g;return{visibleArea:v,isCompletelyWithinViewport:s.width*s.height===v,fitsInViewportVertically:g===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,s=i.right-n.x,o=P1(this._overlayRef.getConfig().minHeight),a=P1(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportVertically||o!=null&&o<=r,l=e.fitsInViewportHorizontally||a!=null&&a<=s;return c&&l}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=O1(n),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0),u=0,d=0;return r.width<=s.width?u=l||-o:u=e.x<this._viewportMargin?s.left-i.left-e.x:0,r.height<=s.height?d=c||-a:d=e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){let i=this._getScrollVisibility(),r=new sC(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){let i=this._viewportRect,r=this._isRtl(),s,o,a;if(n.overlayY==="top")o=e.y,s=i.height-o+this._viewportMargin;else if(n.overlayY==="bottom")a=i.height-e.y+this._viewportMargin*2,s=i.height-a+this._viewportMargin;else{let f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;s=f*2,o=e.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}let c=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,l=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,u,d,h;if(l)h=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if(c)d=e.x,u=i.right-e.x;else{let f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;u=f*2,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,n){let i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Je(i.height),r.top=Je(i.top),r.bottom=Je(i.bottom),r.width=Je(i.width),r.left=Je(i.left),r.right=Je(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=Je(s)),o&&(r.maxWidth=Je(o))}this._lastBoundingBoxSize=i,bo(this._boundingBox.style,r)}_resetBoundingBoxStyles(){bo(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){bo(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let u=this._viewportRuler.getViewportScrollPosition();bo(i,this._getExactOverlayY(n,e,u)),bo(i,this._getExactOverlayX(n,e,u))}else i.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Je(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Je(o.maxWidth):s&&(i.maxWidth="")),bo(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=Je(s.y);return r}_getExactOverlayX(e,n,i){let r={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(s.x+this._overlayRect.width)}px`}else r.left=Je(s.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:M1(e,i),isOriginOutsideView:iC(e,i),isOverlayClipped:M1(n,i),isOverlayOutsideView:iC(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&pc(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof _e)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}};function bo(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function P1(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(lQ);return!n||n==="px"?parseFloat(e):null}return t||null}function O1(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}var k1="cdk-global-overlay-wrapper",aC=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(k1),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),l=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",p="",g="";c?g="flex-start":u==="center"?(g="center",h?p=d:f=d):h?u==="left"||u==="end"?(g="flex-end",f=d):(u==="right"||u==="start")&&(g="flex-start",p=d):u==="left"||u==="start"?(g="flex-start",f=d):(u==="right"||u==="end")&&(g="flex-end",p=d),e.position=this._cssPosition,e.marginLeft=c?"0":f,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":p,n.justifyContent=g,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(k1),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},uQ=(()=>{let e=class e{constructor(i,r,s,o){this._viewportRuler=i,this._document=r,this._platform=s,this._overlayContainer=o}global(){return new aC}flexibleConnectedTo(i){return new oC(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(y(X0),y(Q),y(We),y(Ec))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dQ=0,Hn=(()=>{let e=class e{constructor(i,r,s,o,a,c,l,u,d,h,f,p){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=u,this._directionality=d,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=p}create(i){let r=this._createHostElement(),s=this._createPaneElement(r),o=this._createPortalOutlet(s),a=new Id(i);return a.direction=a.direction||this._directionality.value,new er(o,r,s,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${dQ++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(hi)),new Og(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(y(oQ),y(Ec),y(wr),y(uQ),y(aQ),y(Me),y(L),y(Q),y(vd),y(mi),y(cQ),y(qt,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var hQ=new x("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=C(Hn);return()=>t.scrollStrategies.reposition()}});function fQ(t){return()=>t.scrollStrategies.reposition()}var pQ={provide:hQ,deps:[Hn],useFactory:fQ},L1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({providers:[Hn,pQ],imports:[is,kg,J0,J0]});let t=e;return t})();var mQ=(()=>{let e=class e{create(i){return typeof MutationObserver>"u"?null:new MutationObserver(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var j1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({providers:[mQ]});let t=e;return t})();var B1=new Set,Do,gQ=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):_Q}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&yQ(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(y(We),y(Zc,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yQ(t,e){if(!B1.has(t))try{Do||(Do=document.createElement("style"),e&&(Do.nonce=e),Do.setAttribute("type","text/css"),document.head.appendChild(Do)),Do.sheet&&(Do.sheet.insertRule(`@media ${t} {body{ }}`,0),B1.add(t))}catch(n){console.error(n)}}function _Q(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var $1=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new q}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return U1(pc(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=U1(pc(i)).map(a=>this._registerQuery(a).observable),o=hs(s);return o=Wn(o.pipe(Be(1)),o.pipe(Nc(1),fh(0))),o.pipe(oe(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new W(a=>{let c=l=>this._zone.run(()=>a.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(xn(r),oe(({matches:a})=>({query:i,matches:a})),Qn(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};e.\u0275fac=function(r){return new(r||e)(y(gQ),y(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function U1(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var bd=(()=>{let e=class e{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return wQ(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let r=vQ(AQ(i));if(r&&(H1(r)===-1||!this.isVisible(r)))return!1;let s=i.nodeName.toLowerCase(),o=H1(i);return i.hasAttribute("contenteditable")?o!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!TQ(i)?!1:s==="audio"?i.hasAttribute("controls")?o!==-1:!1:s==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,r){return SQ(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}};e.\u0275fac=function(r){return new(r||e)(y(We))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vQ(t){try{return t.frameElement}catch{return null}}function wQ(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function EQ(t){let e=t.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function IQ(t){return DQ(t)&&t.type=="hidden"}function bQ(t){return CQ(t)&&t.hasAttribute("href")}function DQ(t){return t.nodeName.toLowerCase()=="input"}function CQ(t){return t.nodeName.toLowerCase()=="a"}function G1(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let e=t.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function H1(t){if(!G1(t))return null;let e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function TQ(t){let e=t.nodeName.toLowerCase(),n=e==="input"&&t.type;return n==="text"||n==="password"||e==="select"||e==="textarea"}function SQ(t){return IQ(t)?!1:EQ(t)||bQ(t)||t.hasAttribute("contenteditable")||G1(t)}function AQ(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var lC=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,s=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){let n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=0;i<n.length;i++){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=n.length-1;i>=0;i--){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Be(1)).subscribe(e)}},Dd=(()=>{let e=class e{constructor(i,r,s){this._checker=i,this._ngZone=r,this._document=s}create(i,r=!1){return new lC(i,this._checker,this._ngZone,this._document,r)}};e.\u0275fac=function(r){return new(r||e)(y(bd),y(L),y(Q))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),gde=(()=>{let e=class e{get enabled(){return this.focusTrap?.enabled||!1}set enabled(i){this.focusTrap&&(this.focusTrap.enabled=i)}constructor(i,r,s){this._elementRef=i,this._focusTrapFactory=r,this._previouslyFocusedElement=null,C(We).isBrowser&&(this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0))}ngOnDestroy(){this.focusTrap?.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap?.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap&&!this.focusTrap.hasAttached()&&this.focusTrap.attachAnchors()}ngOnChanges(i){let r=i.autoCapture;r&&!r.firstChange&&this.autoCapture&&this.focusTrap?.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=yc(),this.focusTrap?.focusInitialElementWhenReady()}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(Dd),T(Q))},e.\u0275dir=me({type:e,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:[fe.HasDecoratorInputTransform,"cdkTrapFocus","enabled",gn],autoCapture:[fe.HasDecoratorInputTransform,"cdkTrapFocusAutoCapture","autoCapture",gn]},exportAs:["cdkTrapFocus"],standalone:!0,features:[ji,kt]});let t=e;return t})();function uC(t){return t.buttons===0||t.detail===0}function dC(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var RQ=new x("cdk-input-modality-detector-options"),xQ={ignoreKeys:[18,17,224,91,16]},W1=650,Ic=gc({passive:!0,capture:!0}),MQ=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,s,o){this._platform=i,this._mostRecentTarget=null,this._modality=new Ke(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=$n(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<W1||(this._modality.next(uC(a)?"keyboard":"mouse"),this._mostRecentTarget=$n(a))},this._onTouchstart=a=>{if(dC(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=$n(a)},this._options=I(I({},xQ),o),this.modalityDetected=this._modality.pipe(Nc(1)),this.modalityChanged=this.modalityDetected.pipe(xc()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Ic),s.addEventListener("mousedown",this._onMousedown,Ic),s.addEventListener("touchstart",this._onTouchstart,Ic)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ic),document.removeEventListener("mousedown",this._onMousedown,Ic),document.removeEventListener("touchstart",this._onTouchstart,Ic))}};e.\u0275fac=function(r){return new(r||e)(y(We),y(L),y(Q),y(RQ,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var jg=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(jg||{}),NQ=new x("cdk-focus-monitor-default-options"),Vg=gc({passive:!0,capture:!0}),Cd=(()=>{let e=class e{constructor(i,r,s,o,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new q,this._rootNodeFocusAndBlurListener=c=>{let l=$n(c);for(let u=l;u;u=u.parentElement)c.type==="focus"?this._onFocus(c,u):this._onBlur(c,u)},this._document=o,this._detectionMode=a?.detectionMode||jg.IMMEDIATE}monitor(i,r=!1){let s=Ji(i);if(!this._platform.isBrowser||s.nodeType!==1)return H();let o=S1(s)||this._getDocument(),a=this._elementInfo.get(s);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new q,rootNode:o};return this._elementInfo.set(s,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){let r=Ji(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){let o=Ji(i),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===jg.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===jg.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?W1:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(i,r){let s=this._elementInfo.get(r),o=$n(i);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(i,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Vg),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Vg)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Qn(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Vg),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Vg),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((s,o)=>{(o===i||s.checkChildren&&o.contains(i))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let o=i.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(y(L),y(We),y(MQ),y(Q,8),y(NQ,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yde=(()=>{let e=class e{constructor(i,r){this._elementRef=i,this._focusMonitor=r,this._focusOrigin=null,this.cdkFocusChange=new Ie}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let i=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(i,i.nodeType===1&&i.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(r=>{this._focusOrigin=r,this.cdkFocusChange.emit(r)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(Cd))},e.\u0275dir=me({type:e,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"],standalone:!0});let t=e;return t})(),Co=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(Co||{}),z1="cdk-high-contrast-black-on-white",q1="cdk-high-contrast-white-on-black",cC="cdk-high-contrast-active",hC=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=C($1).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Co.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Co.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Co.BLACK_ON_WHITE}return Co.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(cC,z1,q1),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Co.BLACK_ON_WHITE?i.add(cC,z1):r===Co.WHITE_ON_BLACK&&i.add(cC,q1)}}};e.\u0275fac=function(r){return new(r||e)(y(We),y(Q))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_de=(()=>{let e=class e{constructor(i){i._applyBodyHighContrastModeCssClasses()}};e.\u0275fac=function(r){return new(r||e)(y(hC))},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({imports:[j1]});let t=e;return t})();function PQ(t,e){}var To=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var gC=(()=>{let e=class e extends wc{constructor(i,r,s,o,a,c,l,u){super(),this._elementRef=i,this._focusTrapFactory=r,this._config=o,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=l,this._focusMonitor=u,this._platform=C(We),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=C(ci),this.attachDomPortal=d=>{this._portalOutlet.hasAttached();let h=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),h},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(i){this._ariaLabelledByQueue.push(i),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(i){let r=this._ariaLabelledByQueue.indexOf(i);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{i.removeEventListener("blur",s),i.removeEventListener("mousedown",s),i.removeAttribute("tabindex")};i.addEventListener("blur",s),i.addEventListener("mousedown",s)})),i.focus(r)}_focusByCssSelector(i,r){let s=this._elementRef.nativeElement.querySelector(i);s&&this._forceFocus(s,r)}_trapFocus(){let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}}_restoreFocus(){let i=this._config.restoreFocus,r=null;if(typeof i=="string"?r=this._document.querySelector(i):typeof i=="boolean"?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&typeof r.focus=="function"){let s=yc(),o=this._elementRef.nativeElement;(!s||s===this._document.body||s===o||o.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let i=this._elementRef.nativeElement,r=yc();return i===r||i.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=yc()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(Dd),T(Q,8),T(To),T(bd),T(L),T(er),T(Cd))},e.\u0275cmp=si({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(r,s){if(r&1&&_f(Ed,7),r&2){let o;tl(o=nl())&&(s._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,s){r&2&&ui("id",s._config.id||null)("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null)},standalone:!0,features:[Ye,di],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,s){r&1&&Zt(0,PQ,0,0,"ng-template",0)},dependencies:[Ed],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2});let t=e;return t})(),Td=class{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new q,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!Fg(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(e,n){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},OQ=new x("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=C(Hn);return()=>t.scrollStrategies.block()}}),kQ=new x("DialogData"),FQ=new x("DefaultDialogConfig");var LQ=0,K1=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,r,s,o,a,c){this._overlay=i,this._injector=r,this._defaultOptions=s,this._parentDialog=o,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new q,this._afterOpenedAtThisLevel=new q,this._ariaHiddenElements=new Map,this.afterAllClosed=lr(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(xn(void 0))),this._scrollStrategy=c}open(i,r){let s=this._defaultOptions||new To;r=I(I({},s),r),r.id=r.id||`cdk-dialog-${LQ++}`,r.id&&this.getDialogById(r.id);let o=this._getOverlayConfig(r),a=this._overlay.create(o),c=new Td(a,r),l=this._attachContainer(a,c,r);return c.containerInstance=l,this._attachDialogContent(i,c,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){pC(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){pC(this._openDialogsAtThisLevel,i=>{i.config.closeOnDestroy===!1&&this._removeOpenDialog(i,!1)}),pC(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){let r=new Id({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,s){let o=s.injector||s.viewContainerRef?.injector,a=[{provide:To,useValue:s},{provide:Td,useValue:r},{provide:er,useValue:i}],c;s.container?typeof s.container=="function"?c=s.container:(c=s.container.type,a.push(...s.container.providers(s))):c=gC;let l=new _c(c,s.viewContainerRef,Me.create({parent:o||this._injector,providers:a}),s.componentFactoryResolver);return i.attach(l).instance}_attachDialogContent(i,r,s,o){if(i instanceof On){let a=this._createInjector(o,r,s,void 0),c={$implicit:o.data,dialogRef:r};o.templateContext&&(c=I(I({},c),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),s.attachTemplatePortal(new vc(i,null,c,a))}else{let a=this._createInjector(o,r,s,this._injector),c=s.attachComponentPortal(new _c(i,o.viewContainerRef,a,o.componentFactoryResolver));r.componentRef=c,r.componentInstance=c.instance}}_createInjector(i,r,s,o){let a=i.injector||i.viewContainerRef?.injector,c=[{provide:kQ,useValue:i.data},{provide:Td,useValue:r}];return i.providers&&(typeof i.providers=="function"?c.push(...i.providers(r,i,s)):c.push(...i.providers)),i.direction&&(!a||!a.get(vd,null,{optional:!0}))&&c.push({provide:vd,useValue:{value:i.direction,change:H()}}),Me.create({parent:a||o,providers:c})}_removeOpenDialog(i,r){let s=this.openDialogs.indexOf(i);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let i=this._overlayContainer.getContainerElement();if(i.parentElement){let r=i.parentElement.children;for(let s=r.length-1;s>-1;s--){let o=r[s];o!==i&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}};e.\u0275fac=function(r){return new(r||e)(y(Hn),y(Me),y(FQ,8),y(e,12),y(Ec),y(OQ))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pC(t,e){let n=t.length;for(;n--;)e(t[n])}function VQ(){return!0}var jQ=new x("mat-sanity-checks",{providedIn:"root",factory:VQ}),Q1=(()=>{let e=class e{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return yd()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(y(hC),y(jQ,8),y(Q))},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({imports:[is,is]});let t=e;return t})();var Y1=class{constructor(e,n,i,r,s){this._defaultMatcher=e,this.ngControl=n,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=s,this.errorState=!1}updateErrorState(){let e=this.errorState,n=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=typeof i?.isErrorState=="function"?i.isErrorState(r,n):!1;s!==e&&(this.errorState=s,this._stateChanges.next())}};var Z1=new x("MAT_DATE_LOCALE",{providedIn:"root",factory:BQ});function BQ(){return C(da)}var Ug=class{constructor(){this._localeChanges=new q,this.localeChanges=this._localeChanges}getValidDateOrNull(e){return this.isDateInstance(e)&&this.isValid(e)?e:null}deserialize(e){return e==null||this.isDateInstance(e)&&this.isValid(e)?e:this.invalid()}setLocale(e){this.locale=e,this._localeChanges.next()}compareDate(e,n){return this.getYear(e)-this.getYear(n)||this.getMonth(e)-this.getMonth(n)||this.getDate(e)-this.getDate(n)}sameDate(e,n){if(e&&n){let i=this.isValid(e),r=this.isValid(n);return i&&r?!this.compareDate(e,n):i==r}return e==n}clampDate(e,n,i){return n&&this.compareDate(e,n)<0?n:i&&this.compareDate(e,i)>0?i:e}},UQ=new x("mat-date-formats"),$Q=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function yC(t,e){let n=Array(t);for(let i=0;i<t;i++)n[i]=e(i);return n}var HQ=(()=>{let e=class e extends Ug{constructor(i){super(),this.useUtcForDisplay=!1,this._matDateLocale=C(Z1,{optional:!0}),i!==void 0&&(this._matDateLocale=i),super.setLocale(this._matDateLocale)}getYear(i){return i.getFullYear()}getMonth(i){return i.getMonth()}getDate(i){return i.getDate()}getDayOfWeek(i){return i.getDay()}getMonthNames(i){let r=new Intl.DateTimeFormat(this.locale,{month:i,timeZone:"utc"});return yC(12,s=>this._format(r,new Date(2017,s,1)))}getDateNames(){let i=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return yC(31,r=>this._format(i,new Date(2017,0,r+1)))}getDayOfWeekNames(i){let r=new Intl.DateTimeFormat(this.locale,{weekday:i,timeZone:"utc"});return yC(7,s=>this._format(r,new Date(2017,0,s+1)))}getYearName(i){let r=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(r,i)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(i){return this.getDate(this._createDateWithOverflow(this.getYear(i),this.getMonth(i)+1,0))}clone(i){return new Date(i.getTime())}createDate(i,r,s){let o=this._createDateWithOverflow(i,r,s);return o.getMonth()!=r,o}today(){return new Date}parse(i,r){return typeof i=="number"?new Date(i):i?new Date(Date.parse(i)):null}format(i,r){if(!this.isValid(i))throw Error("NativeDateAdapter: Cannot format invalid date.");let s=new Intl.DateTimeFormat(this.locale,ye(I({},r),{timeZone:"utc"}));return this._format(s,i)}addCalendarYears(i,r){return this.addCalendarMonths(i,r*12)}addCalendarMonths(i,r){let s=this._createDateWithOverflow(this.getYear(i),this.getMonth(i)+r,this.getDate(i));return this.getMonth(s)!=((this.getMonth(i)+r)%12+12)%12&&(s=this._createDateWithOverflow(this.getYear(s),this.getMonth(s),0)),s}addCalendarDays(i,r){return this._createDateWithOverflow(this.getYear(i),this.getMonth(i),this.getDate(i)+r)}toIso8601(i){return[i.getUTCFullYear(),this._2digit(i.getUTCMonth()+1),this._2digit(i.getUTCDate())].join("-")}deserialize(i){if(typeof i=="string"){if(!i)return null;if($Q.test(i)){let r=new Date(i);if(this.isValid(r))return r}}return super.deserialize(i)}isDateInstance(i){return i instanceof Date}isValid(i){return!isNaN(i.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(i,r,s){let o=new Date;return o.setFullYear(i,r,s),o.setHours(0,0,0,0),o}_2digit(i){return("00"+i).slice(-2)}_format(i,r){let s=new Date;return s.setUTCFullYear(r.getFullYear(),r.getMonth(),r.getDate()),s.setUTCHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),i.format(s)}};e.\u0275fac=function(r){return new(r||e)(y(Z1,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),zQ={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};function she(t=zQ){return[{provide:Ug,useClass:HQ},{provide:UQ,useValue:t}]}var ohe=(()=>{let e=class e{isErrorState(i,r){return!!(i&&i.invalid&&(i.touched||r&&r.submitted))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Sn=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Sn||{}),wC=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Sn.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},X1=gc({passive:!0,capture:!0}),EC=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=$n(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,i,r){let s=this._events.get(n);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,X1)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let s=r.get(n);s&&(s.delete(i),s.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,X1)))}},J1={enterDuration:225,exitDuration:150},qQ=800,eL=gc({passive:!0,capture:!0}),tL=["mousedown","touchstart"],nL=["mouseup","mouseleave","touchend","touchcancel"],Sd=class Sd{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Ji(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=I(I({},J1),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let o=i.radius||GQ(e,n,r),a=e-r.left,c=n-r.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-o}px`,u.style.top=`${c-o}px`,u.style.height=`${o*2}px`,u.style.width=`${o*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,f=d.transitionDuration,p=h==="none"||f==="0s"||f==="0s, 0s"||r.width===0&&r.height===0,g=new wC(this,u,i,p);u.style.transform="scale3d(1, 1, 1)",g.state=Sn.FADING_IN,i.persistent||(this._mostRecentTransientRipple=g);let v=null;return!p&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let E=()=>this._finishRippleTransition(g),A=()=>this._destroyRipple(g);u.addEventListener("transitionend",E),u.addEventListener("transitioncancel",A),v={onTransitionEnd:E,onTransitionCancel:A}}),this._activeRipples.set(g,v),(p||!l)&&this._finishRippleTransition(g),g}fadeOutRipple(e){if(e.state===Sn.FADING_OUT||e.state===Sn.HIDDEN)return;let n=e.element,i=I(I({},J1),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=Sn.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=Ji(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,tL.forEach(i=>{Sd._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{nL.forEach(n=>{this._triggerElement.addEventListener(n,this,eL)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Sn.FADING_IN?this._startFadeOutTransition(e):e.state===Sn.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Sn.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Sn.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=uC(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+qQ;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!dC(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===Sn.VISIBLE||e.config.terminateOnPointerUp&&e.state===Sn.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(tL.forEach(n=>Sd._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&nL.forEach(n=>e.removeEventListener(n,this,eL)))}};Sd._eventManager=new EC;var IC=Sd;function GQ(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}var oL=new x("mat-ripple-global-options"),WQ=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,s,o,a){this._elementRef=i,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new IC(this,r,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:I(I(I({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,s){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,I(I({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,I(I({},this.rippleConfig),i))}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(L),T(We),T(oL,8),T(qt,8))},e.\u0275dir=me({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){r&2&&Bi("mat-ripple-unbounded",s.unbounded)},inputs:{color:[fe.None,"matRippleColor","color"],unbounded:[fe.None,"matRippleUnbounded","unbounded"],centered:[fe.None,"matRippleCentered","centered"],radius:[fe.None,"matRippleRadius","radius"],animation:[fe.None,"matRippleAnimation","animation"],disabled:[fe.None,"matRippleDisabled","disabled"],trigger:[fe.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=e;return t})(),ahe=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({imports:[Q1,Q1]});let t=e;return t})();var iL={capture:!0},rL=["focus","click","mouseenter","touchstart"],_C="mat-ripple-loader-uninitialized",vC="mat-ripple-loader-class-name",sL="mat-ripple-loader-centered",Bg="mat-ripple-loader-disabled",che=(()=>{let e=class e{constructor(){this._document=C(Q,{optional:!0}),this._animationMode=C(qt,{optional:!0}),this._globalRippleOptions=C(oL,{optional:!0}),this._platform=C(We),this._ngZone=C(L),this._hosts=new Map,this._onInteraction=i=>{if(!(i.target instanceof HTMLElement))return;let s=i.target.closest(`[${_C}]`);s&&this._createRipple(s)},this._ngZone.runOutsideAngular(()=>{for(let i of rL)this._document?.addEventListener(i,this._onInteraction,iL)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of rL)this._document?.removeEventListener(r,this._onInteraction,iL)}configureRipple(i,r){i.setAttribute(_C,""),(r.className||!i.hasAttribute(vC))&&i.setAttribute(vC,r.className||""),r.centered&&i.setAttribute(sL,""),r.disabled&&i.setAttribute(Bg,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let s=this._hosts.get(i);if(s){s.disabled=r;return}r?i.setAttribute(Bg,""):i.removeAttribute(Bg)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",i.getAttribute(vC)),i.append(s);let o=new WQ(new _e(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=i,o.centered=i.hasAttribute(sL),o.disabled=i.hasAttribute(Bg),this.attachRipple(i,o),o}attachRipple(i,r){i.removeAttribute(_C),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function KQ(t,e){}var Ad=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},bC="mdc-dialog--open",aL="mdc-dialog--opening",cL="mdc-dialog--closing",QQ=150,YQ=75,ZQ=(()=>{let e=class e extends gC{constructor(i,r,s,o,a,c,l,u,d){super(i,r,s,o,a,c,l,d),this._animationMode=u,this._animationStateChanged=new Ie,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?uL(this._config.enterAnimationDuration)??QQ:0,this._exitAnimationDuration=this._animationsEnabled?uL(this._config.exitAnimationDuration)??YQ:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(lL,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(aL,bC)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(bC),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(bC),this._animationsEnabled?(this._hostElement.style.setProperty(lL,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(cL)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(aL,cL)}_waitForAnimationToComplete(i,r){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(i):i()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(i){let r=super.attachComponentPortal(i);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(Dd),T(Q,8),T(Ad),T(bd),T(L),T(er),T(qt,8),T(Cd))},e.\u0275cmp=si({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(r,s){r&2&&(gf("id",s._config.id),ui("aria-modal",s._config.ariaModal)("role",s._config.role)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null),Bi("_mat-animation-noopable",!s._animationsEnabled))},standalone:!0,features:[Ye,di],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,s){r&1&&(Ft(0,"div",0)(1,"div",1),Zt(2,KQ,0,0,"ng-template",2),Tt()())},dependencies:[Ed],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2});let t=e;return t})(),lL="--mat-dialog-transition-duration";function uL(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?md(t.substring(0,t.length-2)):t.endsWith("s")?md(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var $g=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}($g||{}),DC=class{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new q,this._beforeClosed=new q,this._state=$g.OPEN,this.disableClose=n.disableClose,this.id=e.id,i._animationStateChanged.pipe(ke(r=>r.state==="opened"),Be(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(ke(r=>r.state==="closed"),Be(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Ac(this.backdropClick(),this.keydownEvents().pipe(ke(r=>r.keyCode===27&&!this.disableClose&&!Fg(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),XQ(this,r.type==="keydown"?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(ke(n=>n.state==="closing"),Be(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=$g.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=$g.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function XQ(t,e,n){return t._closeInteractionType=e,t.close(n)}var CC=new x("MatMdcDialogData"),JQ=new x("mat-mdc-dialog-default-options"),e7=new x("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=C(Hn);return()=>t.scrollStrategies.block()}});var t7=0,dL=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(i,r,s,o,a,c,l,u){this._overlay=i,this._defaultOptions=o,this._scrollStrategy=a,this._parentDialog=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new q,this._afterOpenedAtThisLevel=new q,this.dialogConfigClass=Ad,this.afterAllClosed=lr(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(xn(void 0))),this._dialog=r.get(K1),this._dialogRefConstructor=DC,this._dialogContainerType=ZQ,this._dialogDataToken=CC}open(i,r){let s;r=I(I({},this._defaultOptions||new Ad),r),r.id=r.id||`mat-mdc-dialog-${t7++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(i,ye(I({},r),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:To,useValue:r}]},templateContext:()=>({dialogRef:s}),providers:(a,c,l)=>(s=new this._dialogRefConstructor(a,r,l),s.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:s}])}));return s.componentRef=o.componentRef,s.componentInstance=o.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(s);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let r=i.length;for(;r--;)i[r].close()}};e.\u0275fac=function(r){return new(r||e)(y(Hn),y(Me),y(mi,8),y(JQ,8),y(e7),y(e,12),y(Ec),y(qt,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function i7(t,e){if(t&1){let n=Pv();Ft(0,"button",12),at("click",function(){Q_(n);let r=ca();return Y_(r.cancel())}),aA(),Ft(1,"svg",13),Er(2,"path",14),Tt(),cA(),Ft(3,"span",15),la(4,"Close modal"),Tt()()}}function r7(t,e){t&1&&Nv(0)}function s7(t,e){if(t&1&&Zt(0,r7,1,0,"ng-container",16),t&2){let n=ca();Rs("ngTemplateOutlet",n.templateRef)}}function o7(t,e){if(t&1){let n=Pv();Ft(0,"button",17),at("click",function(){Q_(n);let r=ca();return Y_(r.cancel())}),la(1),Tt()}if(t&2){let n=ca();Fn(),Ms(" ",n.cancelText," ")}}var a7=t=>({"pb-10":t}),hL=(()=>{let e=class e{constructor(i){if(this.data=i,this.doConfirm=new Ie,this.doCancel=new Ie,this.title="\u901A\u77E5",this.content="",this.okText="\u78BA\u8A8D",this.cancelText="\u53D6\u6D88",this.showCrossBtn=!0,this.outsideClose=!1,this.showCancelBtn=!0,this.btnCenter=!0,this.fullScreen=!1,this.data){let{title:r,content:s,okText:o,cancelText:a,showCrossBtn:c,outsideClose:l,showCancelBtn:u,contentTemplateRef:d,btnCenter:h,fullScreen:f,afterViewInit:p}=i;this.title=r,this.content=s,this.okText=o,this.cancelText=a,this.showCrossBtn=c,this.outsideClose=l,this.showCancelBtn=u,this.btnCenter=h,this.templateRef=d,this.fullScreen=f,this.afterViewInitEvent=p||(()=>{})}}ngOnInit(){}ngAfterViewInit(){this.afterViewInitEvent()}clickOutsideClose(){this.outsideClose&&this.cancel()}cancel(){this.doCancel.emit()}ok(){this.doConfirm.emit()}};e.\u0275fac=function(r){return new(r||e)(T(CC))},e.\u0275cmp=si({type:e,selectors:[["app-modal"]],outputs:{doConfirm:"doConfirm",doCancel:"doCancel"},standalone:!0,features:[di],decls:15,vars:10,consts:[[1,"bg-white","dark:bg-gray-700","min-w-72","min-h-48","flex","overflow-y-auto","overflow-x-hidden","justify-center","items-center","w-full","md:inset-0","h-[calc(100%-1rem)]","max-h-full"],[1,"relative","w-full","max-w-2xl","max-h-screen","overflow-scroll"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button","class","text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide","default-modal",3,"click",4,"ngIf"],[1,"p-4","md:p-5","space-y-4","text-gray-900","dark:text-white","min-h-20"],[3,"innerHTML"],[1,"flex","justify-center","items-center","p-4","md:p-5","border-t","border-gray-200","rounded-b","dark:border-gray-600"],["type","button",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],["type","button","class","ms-3 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600",3,"click",4,"ngIf"],[1,"fixed","h-full","w-full","top-0","left-0","-z-10",3,"click"],["type","button","data-modal-hide","default-modal",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","ms-auto","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[4,"ngTemplateOutlet"],["type","button",1,"ms-3","text-gray-500","bg-white","hover:bg-gray-100","focus:ring-4","focus:outline-none","focus:ring-blue-300","rounded-lg","border","border-gray-200","text-sm","font-medium","px-5","py-2.5","hover:text-gray-900","focus:z-10","dark:bg-gray-700","dark:text-gray-300","dark:border-gray-500","dark:hover:text-white","dark:hover:bg-gray-600","dark:focus:ring-gray-600",3,"click"]],template:function(r,s){r&1&&(Ft(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),la(5),Tt(),Zt(6,i7,5,0,"button",5),Tt(),Ft(7,"div",6),Er(8,"p",7),Zt(9,s7,1,1,"ng-container"),Tt(),Ft(10,"div",8)(11,"button",9),at("click",function(){return s.ok()}),la(12),Tt(),Zt(13,o7,2,1,"button",10),Tt()()()(),Ft(14,"div",11),at("click",function(){return s.clickOutsideClose()}),Tt()),r&2&&(Fn(5),Ms(" ",s.title," "),Fn(),Rs("ngIf",s.showCrossBtn&&s.showCancelBtn),Fn(2),Rs("innerHTML",s.content,YA),Fn(),Mv(9,s.templateRef?9:-1),Fn(),xR(WR(8,a7,s.fullScreen)),Fn(2),Ms(" ",s.okText," "),Fn(),Rs("ngIf",s.showCancelBtn))},dependencies:[Ns,hx,fx]});let t=e;return t})();var $he=(()=>{let e=class e{constructor(i){this.dialog=i,this.modalQueue=[],this.currentModal$=new us,this.executeStatus$=new q,this.executeModal()}executeModal(){this.executeStatus$.subscribe(()=>{this.modalQueue.length>0&&this.currentModal$.next(this.modalQueue[0])})}openConfirm(i){let r=Date.now();this.pushModalConfig(r);let s=({title:o="\u901A\u77E5",content:a,okText:c="\u78BA\u8A8D",cancelText:l="\u53D6\u6D88",outsideClose:u=!1,showCrossBtn:d=!0,showCancelBtn:h=!0,btnCenter:f=!0,fullScreen:p=!1,contentTemplateRef:g,afterViewInit:v})=>{let E={data:{content:a,title:o,okText:c,cancelText:l,outsideClose:u,showCrossBtn:d,showCancelBtn:h,btnCenter:f,fullScreen:p,contentTemplateRef:g,afterViewInit:v}};return p?I({maxWidth:"100vw",width:"100%"},E):E};return this.modalQueue.length===1&&this.executeStatus$.next(!0),new Promise(o=>{this.currentModal$.subscribe(a=>{if(a===r){let c=this.dialog.open(hL,s(i));o(c),c.componentInstance.doConfirm.subscribe(()=>{i.onOk&&i.onOk(),this.modalQueue.shift(),c.close(),this.executeStatus$.next(!0)}),c.componentInstance.doCancel.subscribe(()=>{i.onCancel&&i.onCancel(),this.modalQueue.shift(),c.close(),this.executeStatus$.next(!0)})}})})}pushModalConfig(i){this.modalQueue.push(i)}cleanQueue(){let i=this.modalQueue[0];this.modalQueue=[i]}};e.\u0275fac=function(r){return new(r||e)(y(dL))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var IL=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(T(kn),T(_e))},e.\u0275dir=me({type:e});let t=e;return t})(),Nd=(()=>{let e=class e extends IL{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ai(e)))(s||e)}})(),e.\u0275dir=me({type:e,features:[Ye]});let t=e;return t})(),Ao=new x("NgValueAccessor"),c7={provide:Ao,useExisting:hn(()=>l7),multi:!0},l7=(()=>{let e=class e extends Nd{writeValue(i){this.setProperty("checked",i)}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ai(e)))(s||e)}})(),e.\u0275dir=me({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,s){r&1&&at("change",function(a){return s.onChange(a.target.checked)})("blur",function(){return s.onTouched()})},features:[Gt([c7]),Ye]});let t=e;return t})(),u7={provide:Ao,useExisting:hn(()=>bL),multi:!0};function d7(){let t=pi()?pi().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var h7=new x("CompositionEventMode"),bL=(()=>{let e=class e extends IL{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!d7())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(T(kn),T(_e),T(h7,8))},e.\u0275dir=me({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&at("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Gt([u7]),Ye]});let t=e;return t})();function rs(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function DL(t){return t!=null&&typeof t.length=="number"}var Xg=new x("NgValidators"),Jg=new x("NgAsyncValidators"),f7=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,fL=class{static min(e){return p7(e)}static max(e){return m7(e)}static required(e){return g7(e)}static requiredTrue(e){return y7(e)}static email(e){return _7(e)}static minLength(e){return v7(e)}static maxLength(e){return w7(e)}static pattern(e){return E7(e)}static nullValidator(e){return CL(e)}static compose(e){return ML(e)}static composeAsync(e){return NL(e)}};function p7(t){return e=>{if(rs(e.value)||rs(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function m7(t){return e=>{if(rs(e.value)||rs(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function g7(t){return rs(t.value)?{required:!0}:null}function y7(t){return t.value===!0?null:{required:!0}}function _7(t){return rs(t.value)||f7.test(t.value)?null:{email:!0}}function v7(t){return e=>rs(e.value)||!DL(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function w7(t){return e=>DL(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function E7(t){if(!t)return CL;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(rs(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function CL(t){return null}function TL(t){return t!=null}function SL(t){return xs(t)?Pe(t):t}function AL(t){let e={};return t.forEach(n=>{e=n!=null?I(I({},e),n):e}),Object.keys(e).length===0?null:e}function RL(t,e){return e.map(n=>n(t))}function I7(t){return!t.validate}function xL(t){return t.map(e=>I7(e)?e:n=>e.validate(n))}function ML(t){if(!t)return null;let e=t.filter(TL);return e.length==0?null:function(n){return AL(RL(n,e))}}function SC(t){return t!=null?ML(xL(t)):null}function NL(t){if(!t)return null;let e=t.filter(TL);return e.length==0?null:function(n){let i=RL(n,e).map(SL);return wy(i).pipe(oe(AL))}}function AC(t){return t!=null?NL(xL(t)):null}function pL(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function PL(t){return t._rawValidators}function OL(t){return t._rawAsyncValidators}function TC(t){return t?Array.isArray(t)?t:[t]:[]}function zg(t,e){return Array.isArray(t)?t.includes(e):t===e}function mL(t,e){let n=TC(e);return TC(t).forEach(r=>{zg(n,r)||n.push(r)}),n}function gL(t,e){return TC(e).filter(n=>!zg(t,n))}var qg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=SC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=AC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},tr=class extends qg{get formDirective(){return null}get path(){return null}},So=class extends qg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Gg=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},b7={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ofe=ye(I({},b7),{"[class.ng-submitted]":"isSubmitted"}),afe=(()=>{let e=class e extends Gg{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(T(So,2))},e.\u0275dir=me({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&Bi("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ye]});let t=e;return t})(),cfe=(()=>{let e=class e extends Gg{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(T(tr,10))},e.\u0275dir=me({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&Bi("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Ye]});let t=e;return t})();var Rd="VALID",Hg="INVALID",bc="PENDING",xd="DISABLED";function kL(t){return(ey(t)?t.validators:t)||null}function D7(t){return Array.isArray(t)?SC(t):t||null}function FL(t,e){return(ey(e)?e.asyncValidators:t)||null}function C7(t){return Array.isArray(t)?AC(t):t||null}function ey(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function T7(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new S(1e3,"");if(!i[n])throw new S(1001,"")}function S7(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new S(1002,"")})}var Wg=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Rd}get invalid(){return this.status===Hg}get pending(){return this.status==bc}get disabled(){return this.status===xd}get enabled(){return this.status!==xd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(mL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(gL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(gL(e,this._rawAsyncValidators))}hasValidator(e){return zg(this._rawValidators,e)}hasAsyncValidator(e){return zg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=bc,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=xd,this.errors=null,this._forEachChild(i=>{i.disable(ye(I({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye(I({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Rd,this._forEachChild(i=>{i.enable(ye(I({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ye(I({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rd||this.status===bc)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xd:Rd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=bc,this._hasOwnPendingAsyncValidator=!0;let n=SL(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ie,this.statusChanges=new Ie}_calculateStatus(){return this._allControlsDisabled()?xd:this.errors?Hg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bc)?bc:this._anyControlsHaveStatus(Hg)?Hg:Rd}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ey(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=D7(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=C7(this._rawAsyncValidators)}},Kg=class extends Wg{constructor(e,n,i){super(kL(n),FL(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){S7(this,!0,e),Object.keys(e).forEach(i=>{T7(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Pd=new x("CallSetDisabledState",{providedIn:"root",factory:()=>ty}),ty="always";function LL(t,e){return[...e.path,t]}function Qg(t,e,n=ty){RC(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),R7(t,e),M7(t,e),x7(t,e),A7(t,e)}function yL(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Zg(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Yg(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function A7(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function RC(t,e){let n=PL(t);e.validator!==null?t.setValidators(pL(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=OL(t);e.asyncValidator!==null?t.setAsyncValidators(pL(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();Yg(e._rawValidators,r),Yg(e._rawAsyncValidators,r)}function Zg(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=PL(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let r=OL(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}let i=()=>{};return Yg(e._rawValidators,i),Yg(e._rawAsyncValidators,i),n}function R7(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&VL(t,e)})}function x7(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&VL(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function VL(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function M7(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function jL(t,e){t==null,RC(t,e)}function N7(t,e){return Zg(t,e)}function BL(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function P7(t){return Object.getPrototypeOf(t.constructor)===Nd}function UL(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function $L(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(s=>{s.constructor===bL?n=s:P7(s)?i=s:r=s}),r||i||n||null}function O7(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var k7={provide:tr,useExisting:hn(()=>F7)},Md=Promise.resolve(),F7=(()=>{let e=class e extends tr{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ie,this.form=new Kg({},SC(i),AC(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){Md.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),Qg(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){Md.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){Md.then(()=>{let r=this._findContainer(i.path),s=new Kg({});jL(s,i),r.registerControl(i.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){Md.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){Md.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,UL(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(T(Xg,10),T(Jg,10),T(Pd,8))},e.\u0275dir=me({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){r&1&&at("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[fe.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Gt([k7]),Ye]});let t=e;return t})();function _L(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function vL(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var HL=class extends Wg{constructor(e=null,n,i){super(kL(n),FL(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ey(n)&&(n.nonNullable||n.initialValueIsDefault)&&(vL(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_L(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_L(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){vL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var L7=t=>t instanceof HL;var V7={provide:So,useExisting:hn(()=>j7)},wL=Promise.resolve(),j7=(()=>{let e=class e extends So{constructor(i,r,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new HL,this._registered=!1,this.name="",this.update=new Ie,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=$L(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),BL(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Qg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){wL.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&gn(r);wL.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?LL(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(T(tr,9),T(Xg,10),T(Jg,10),T(Ao,10),T(ci,8),T(Pd,8))},e.\u0275dir=me({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[fe.None,"disabled","isDisabled"],model:[fe.None,"ngModel","model"],options:[fe.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Gt([V7]),Ye,kt]});let t=e;return t})();var B7={provide:Ao,useExisting:hn(()=>U7),multi:!0},U7=(()=>{let e=class e extends Nd{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ai(e)))(s||e)}})(),e.\u0275dir=me({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){r&1&&at("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[Gt([B7]),Ye]});let t=e;return t})();var $7=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({});let t=e;return t})();var zL=new x("NgModelWithFormControlWarning");var H7={provide:tr,useExisting:hn(()=>z7)},z7=(()=>{let e=class e extends tr{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ie,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Zg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return Qg(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){yL(i.control||null,i,!1),O7(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,UL(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,s=this.form.get(i.path);r!==s&&(yL(r||null,i),L7(s)&&(Qg(s,i,this.callSetDisabledState),i.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);jL(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&N7(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){RC(this.form,this),this._oldForm&&Zg(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(T(Xg,10),T(Jg,10),T(Pd,8))},e.\u0275dir=me({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,s){r&1&&at("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[fe.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Gt([H7]),Ye,kt]});let t=e;return t})();var q7={provide:So,useExisting:hn(()=>G7)},G7=(()=>{let e=class e extends So{set isDisabled(i){}constructor(i,r,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Ie,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=$L(this,o)}ngOnChanges(i){this._added||this._setUpControl(),BL(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return LL(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(T(tr,13),T(Xg,10),T(Jg,10),T(Ao,10),T(zL,8))},e.\u0275dir=me({type:e,selectors:[["","formControlName",""]],inputs:{name:[fe.None,"formControlName","name"],isDisabled:[fe.None,"disabled","isDisabled"],model:[fe.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Gt([q7]),Ye,kt]});let t=e;return t})(),W7={provide:Ao,useExisting:hn(()=>GL),multi:!0};function qL(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function K7(t){return t.split(":")[0]}var GL=(()=>{let e=class e extends Nd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),s=qL(r,i);this.setProperty("value",s)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=K7(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ai(e)))(s||e)}})(),e.\u0275dir=me({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){r&1&&at("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Gt([W7]),Ye]});let t=e;return t})(),ufe=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(qL(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(kn),T(GL,9))},e.\u0275dir=me({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),Q7={provide:Ao,useExisting:hn(()=>WL),multi:!0};function EL(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function Y7(t){return t.split(":")[0]}var WL=(()=>{let e=class e extends Nd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let s=i.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else r=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let s=[],o=r.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let l=a[c],u=this._getOptionValue(l.value);s.push(u)}}else{let a=r.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let u=this._getOptionValue(l.value);s.push(u)}}}this.value=s,i(s)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=Y7(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ai(e)))(s||e)}})(),e.\u0275dir=me({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){r&1&&at("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Gt([Q7]),Ye]});let t=e;return t})(),dfe=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(EL(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(EL(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(kn),T(WL,9))},e.\u0275dir=me({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var KL=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({imports:[$7]});let t=e;return t})();var xC=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Pd,useValue:i.callSetDisabledState??ty}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({imports:[KL]});let t=e;return t})(),MC=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:zL,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:Pd,useValue:i.callSetDisabledState??ty}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({imports:[KL]});let t=e;return t})();var Z7=[Ns,xC,MC,Hw],yfe=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ie({type:e}),e.\u0275inj=ne({imports:[Z7,Ns,xC,MC,Hw]});let t=e;return t})();export{I as a,ye as b,X7 as c,J7 as d,m as e,Se as f,W as g,q as h,aT as i,Ut as j,JZ as k,H as l,jo as m,oe as n,Wn as o,lr as p,Sc as q,FV as r,Ac as s,LV as t,ke as u,Be as v,jV as w,$V as x,MT as y,xn as z,Qt as A,Qn as B,Qe as C,hn as D,WV as E,D as F,ne as G,x as H,y as I,C as J,fe as K,si as L,ie as M,me as N,kt as O,Q_ as P,Y_ as Q,aA as R,cA as S,ai as T,rv as U,mt as V,av as W,sf as X,wB as Y,Me as Z,pn as _,qt as $,_e as aa,XA as ba,Fn as ca,T as da,aR as ea,ci as fa,Ie as ga,L as ha,Ye as ia,ji as ja,mn as ka,Zt as la,ui as ma,Rs as na,xv as oa,Bi as pa,xR as qa,Mv as ra,Ire as sa,bre as ta,Dre as ua,Cre as va,Ft as wa,Tt as xa,Er as ya,Pv as za,gf as Aa,k$ as Ba,at as Ca,U$ as Da,ca as Ea,BR as Fa,UR as Ga,On as Ha,eH as Ia,_f as Ja,tl as Ka,nl as La,Sre as Ma,la as Na,iH as Oa,Ms as Pa,Gt as Qa,di as Ra,WR as Sa,Are as Ta,Rre as Ua,xre as Va,Df as Wa,hi as Xa,Mre as Ya,gn as Za,Q as _a,cx as $a,Xre as ab,hx as bb,Jre as cb,fx as db,ese as eb,Ns as fb,Kv as gb,wse as hb,Ese as ib,Cr as jb,zz as kb,Ln as lb,jse as mb,Bse as nb,Hw as ob,zse as pb,Roe as qb,xoe as rb,Moe as sb,$s as tb,Eae as ub,tI as vb,RN as wb,Dae as xb,Xe as yb,od as zb,rle as Ab,sle as Bb,ole as Cb,ale as Db,cle as Eb,lle as Fb,ule as Gb,dle as Hb,hle as Ib,fle as Jb,ple as Kb,mle as Lb,gle as Mb,yle as Nb,_le as Ob,vle as Pb,wle as Qb,Ele as Rb,KK as Sb,md as Tb,pc as Ub,Ji as Vb,qle as Wb,We as Xb,Xle as Yb,gc as Zb,S1 as _b,yc as $b,$n as ac,vd as bc,R1 as cc,X0 as dc,A1 as ec,_c as fc,vc as gc,Ed as hc,kg as ic,Fg as jc,Id as kc,oC as lc,Hn as mc,L1 as nc,j1 as oc,gde as pc,uC as qc,dC as rc,Cd as sc,yde as tc,_de as uc,Dle as vc,Cle as wc,E0 as xc,Tle as yc,Sle as zc,Ale as Ac,Ule as Bc,Q1 as Cc,Y1 as Dc,Ug as Ec,UQ as Fc,HQ as Gc,she as Hc,ohe as Ic,ahe as Jc,che as Kc,$he as Lc,Ao as Mc,l7 as Nc,bL as Oc,Xg as Pc,fL as Qc,tr as Rc,So as Sc,afe as Tc,cfe as Uc,Kg as Vc,F7 as Wc,HL as Xc,j7 as Yc,U7 as Zc,z7 as _c,G7 as $c,GL as ad,ufe as bd,dfe as cd,xC as dd,yfe as ed};
