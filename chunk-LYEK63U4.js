import{a as ii,b as oe,c as ni,d as ua,e as _r,f as xr,g as vr,k as yr,l as wr,m as br,n as Sr,o as Dr,p as Cr,q as Tr,r as Er,s as Ir,t as Et}from"./chunk-PGE65MTS.js";import{$c as ei,Aa as p,B as Ye,Ba as m,Bb as rr,C as Wn,Ca as P,D as $t,Da as nt,E as Xn,Ga as I,H as Qi,Ia as F,K as bt,L as Bt,M as Ki,Ma as Qe,N as M,Na as xe,O as K,Oa as mt,Oc as ie,Pa as gt,Q as Ji,Qa as Jn,Qc as ur,R as Yn,Ra as v,Rc as ne,S as J,Sa as on,T as tt,Ta as rt,Tc as un,Ua as sn,Va as et,Wa as ot,Wb as an,Wc as re,Xb as or,Xc as fr,Yb as j,Yc as hr,_a as Ke,_c as fn,a as Qt,ac as ti,ad as dr,b as Kt,bc as ln,bd as pr,cb as ve,cd as mr,d as ca,db as Je,dc as ye,dd as gr,e as ge,ea as tn,ec as cn,ed as Tt,f as Jt,fb as St,fc as sr,g as Zi,ga as S,gc as ar,h as R,ha as b,hb as tr,i as jn,ja as en,k as te,ka as X,kb as er,la as Ze,na as nn,o as We,oa as Zn,ob as ir,pa as ut,qa as Qn,qb as Dt,ra as N,rb as Ct,t as Un,ta as rn,tb as nr,tc as lr,u as Xe,ub as ee,uc as cr,va as zt,wa as _e,x as Ft,xa as Kn,ya as dt,za as pt}from"./chunk-FOFDS3CF.js";var Pr=(()=>{let t=class t{constructor(n,r){this.modalService=n,this.authService=r}ngOnInit(){}logout(){this.modalService.openConfirm({content:"\u78BA\u5B9A\u8981\u767B\u51FA\u55CE\uFF1F",onOk:()=>{this.authService.logout()}})}};t.\u0275fac=function(r){return new(r||t)(b(ie),b(rr))},t.\u0275cmp=K({type:t,selectors:[["app-setting"]],standalone:!0,features:[et],decls:39,vars:0,consts:[[1,"bg-gray-800","text-white","h-dvh"],[1,"py-4"],[1,"flex","justify-between","items-center","px-4","mb-4"],["routerLink","/",1,"text-white"],[1,"fas","fa-arrow-left"],[1,"text-lg","font-semibold"],[1,"space-y-2"],["routerLink","./budget",1,"flex","items-center","justify-between","px-4","py-3","bg-gray-700"],[1,"flex","items-center"],["routerLink","./tagsManage",1,"flex","items-center","justify-between","px-4","py-3","bg-gray-700"],[1,"flex","items-center","justify-between","px-4","py-3","bg-gray-700"],[1,"flex","items-center","justify-between","px-4","py-3","bg-gray-700",3,"click"]],template:function(r,o){r&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),P(4,"i",4),m(),p(5,"h1",5),v(6,"\u8A2D\u5B9A"),m(),P(7,"div"),m(),p(8,"div",6)(9,"div",7)(10,"div",8)(11,"span"),v(12," \u9810\u7B97\u7DE8\u5217 "),m()(),p(13,"span"),v(14," > "),m()(),p(15,"div",9)(16,"div",8)(17,"span"),v(18," \u985E\u5225\u7BA1\u7406 "),m()(),p(19,"span"),v(20," > "),m()(),p(21,"div",10)(22,"div",8)(23,"span"),v(24," \u532F\u51FA\u6A94\u6848 "),m()(),p(25,"span"),v(26," > "),m()(),p(27,"div",10)(28,"div",8)(29,"span"),v(30," \u806F\u7D61\u6211\u5011 "),m()(),p(31,"span"),v(32," > "),m()(),p(33,"div",11),I("click",function(){return o.logout()}),p(34,"div",8)(35,"span"),v(36," \u767B\u51FA "),m()(),p(37,"span"),v(38," > "),m()()()()())},dependencies:[Tt,Ct],styles:["[_nghost-%COMP%]{display:block}"]});let e=t;return e})();function xn(e,t,i){for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];r?e.setProperty(n,r,i?.has(n)?"important":""):e.removeProperty(n)}return e}function ae(e,t){let i=t?"":"none";xn(e.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":i,"-ms-user-select":i,"-webkit-user-select":i,"-moz-user-select":i})}function Rr(e,t,i){xn(e.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},i)}function li(e,t){return t&&t!="none"?e+" "+t:e}function Ar(e){let t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function fa(e){let t=getComputedStyle(e),i=hn(t,"transition-property"),n=i.find(a=>a==="transform"||a==="all");if(!n)return 0;let r=i.indexOf(n),o=hn(t,"transition-duration"),s=hn(t,"transition-delay");return Ar(o[r])+Ar(s[r])}function hn(e,t){return e.getPropertyValue(t).split(",").map(n=>n.trim())}function vn(e){let t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function pn(e,t,i){let{top:n,bottom:r,left:o,right:s}=e;return i>=n&&i<=r&&t>=o&&t<=s}function be(e,t,i){e.top+=t,e.bottom=e.top+e.height,e.left+=i,e.right=e.left+e.width}function Mr(e,t,i,n){let{top:r,right:o,bottom:s,left:a,width:l,height:c}=e,u=l*t,h=c*t;return n>r-h&&n<s+h&&i>a-u&&i<o+u}var ci=class{constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(i=>{this.positions.set(i,{scrollPosition:{top:i.scrollTop,left:i.scrollLeft},clientRect:vn(i)})})}handleScroll(t){let i=ye(t),n=this.positions.get(i);if(!n)return null;let r=n.scrollPosition,o,s;if(i===this._document){let c=this.getViewportScrollPosition();o=c.top,s=c.left}else o=i.scrollTop,s=i.scrollLeft;let a=r.top-o,l=r.left-s;return this.positions.forEach((c,u)=>{c.clientRect&&i!==u&&i.contains(u)&&be(c.clientRect,a,l)}),r.top=o,r.left=s,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function Or(e){let t=e.cloneNode(!0),i=t.querySelectorAll("[id]"),n=e.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<i.length;r++)i[r].removeAttribute("id");return n==="canvas"?Fr(e,t):(n==="input"||n==="select"||n==="textarea")&&Lr(e,t),Nr("canvas",e,t,Fr),Nr("input, textarea, select",e,t,Lr),t}function Nr(e,t,i,n){let r=t.querySelectorAll(e);if(r.length){let o=i.querySelectorAll(e);for(let s=0;s<r.length;s++)n(r[s],o[s])}}var ha=0;function Lr(e,t){t.type!=="file"&&(t.value=e.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${ha++}`)}function Fr(e,t){let i=t.getContext("2d");if(i)try{i.drawImage(e,0,0)}catch{}}var $r=ti({passive:!0}),oi=ti({passive:!1}),da=800,dn=new Set(["position"]),mn=class{get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(t){t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(i=>ae(i,t)))}constructor(t,i,n,r,o,s){this._config=i,this._document=n,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new R,this._pointerMoveSubscription=Jt.EMPTY,this._pointerUpSubscription=Jt.EMPTY,this._scrollSubscription=Jt.EMPTY,this._resizeSubscription=Jt.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new R,this.started=new R,this.released=new R,this.ended=new R,this.entered=new R,this.exited=new R,this.dropped=new R,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){let l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{let l=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){let u=Math.abs(l.x-this._pickupPositionOnPage.x),h=Math.abs(l.y-this._pickupPositionOnPage.y);if(u+h>=this._config.dragStartThreshold){let d=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),g=this._dropContainer;if(!d){this._endDragSequence(a);return}(!g||!g.isDragging()&&!g.isReceiving())&&(a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.preventDefault();let c=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(c),this._dropContainer)this._updateActiveDropContainer(c,l);else{let u=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,h=this._activeTransform;h.x=c.x-u.x+this._passiveTransform.x,h.y=c.y-u.y+this._passiveTransform.y,this._applyRootElementTransform(h.x,h.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:c,event:a,distance:this._getDragDistance(c),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){let l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(t).withParent(i.parentDragRef||null),this._parentPositions=new ci(n),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(n=>j(n)),this._handles.forEach(n=>ae(n,this.disabled)),this._toggleNativeDragInteractions();let i=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&i.add(n)}),this._disabledHandles=i,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){let i=j(t);return i!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{i.addEventListener("mousedown",this._pointerDown,oi),i.addEventListener("touchstart",this._pointerDown,$r),i.addEventListener("dragstart",this._nativeDragStart,oi)}),this._initialTransform=void 0,this._rootElement=i),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?j(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),ae(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),ae(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){let t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){let t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let i=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(i),dropPoint:i,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){we(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let i=this._dropContainer;if(i){let n=this._rootElement,r=n.parentNode,o=this._placeholder=this._createPlaceholderElement(),s=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();r.insertBefore(s,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),Rr(n,!1,dn),this._document.body.appendChild(r.replaceChild(o,n)),this._getPreviewInsertionPoint(r,a).appendChild(this._preview),this.started.next({source:this,event:t}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(t,i){this._parentDragRef&&i.stopPropagation();let n=this.isDragging(),r=we(i),o=!r&&i.button!==0,s=this._rootElement,a=ye(i),l=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+da>Date.now(),c=r?cr(i):lr(i);if(a&&a.draggable&&i.type==="mousedown"&&i.preventDefault(),n||o||l||c)return;if(this._handles.length){let f=s.style;this._rootElementTapHighlight=f.webkitTapHighlightColor||"",f.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(f=>this._updateOnScroll(f)),this._boundaryElement&&(this._boundaryRect=vn(this._boundaryElement));let u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,t,i);let h=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(i);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:h.x,y:h.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,i)}_cleanupDragArtifacts(t){Rr(this._rootElement,!0,dn),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let i=this._dropContainer,n=i.getItemIndex(this),r=this._getPointerPositionOnPage(t),o=this._getDragDistance(r),s=i._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:o,dropPoint:r,event:t}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:i,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:r,event:t}),i.drop(this,n,this._initialIndex,this._initialContainer,s,o,r,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:i},{x:n,y:r}){let o=this._initialContainer._getSiblingContainerFromPosition(this,t,i);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,i)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,t,i,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,r),this._dropContainer._sortItem(this,t,i,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,i):this._applyPreviewTransform(t-this._pickupPositionInElement.x,i-this._pickupPositionInElement.y))}_createPreviewElement(){let t=this._previewTemplate,i=this.previewClass,n=t?t.template:null,r;if(n&&t){let o=t.matchSize?this._initialDomRect:null,s=t.viewContainer.createEmbeddedView(n,t.context);s.detectChanges(),r=zr(s,this._document),this._previewRef=s,t.matchSize?Vr(r,o):r.style.transform=ai(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=Or(this._rootElement),Vr(r,this._initialDomRect),this._initialTransform&&(r.style.transform=this._initialTransform);return xn(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},dn),ae(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),i&&(Array.isArray(i)?i.forEach(o=>r.classList.add(o)):r.classList.add(i)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);let i=fa(this._preview);return i===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{let r=s=>{(!s||ye(s)===this._preview&&s.propertyName==="transform")&&(this._preview?.removeEventListener("transitionend",r),n(),clearTimeout(o))},o=setTimeout(r,i*1.5);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){let t=this._placeholderTemplate,i=t?t.template:null,n;return i?(this._placeholderRef=t.viewContainer.createEmbeddedView(i,t.context),this._placeholderRef.detectChanges(),n=zr(this._placeholderRef,this._document)):n=Or(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(t,i,n){let r=i===this._rootElement?null:i,o=r?r.getBoundingClientRect():t,s=we(n)?n.targetTouches[0]:n,a=this._getViewportScrollPosition(),l=s.pageX-o.left-a.left,c=s.pageY-o.top-a.top;return{x:o.left-t.left+l,y:o.top-t.top+c}}_getPointerPositionOnPage(t){let i=this._getViewportScrollPosition(),n=we(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,r=n.pageX-i.left,o=n.pageY-i.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let a=this._ownerSVGElement.createSVGPoint();return a.x=r,a.y=o,a.matrixTransform(s.inverse())}}return{x:r,y:o}}_getConstrainedPointerPosition(t){let i=this._dropContainer?this._dropContainer.lockAxis:null,{x:n,y:r}=this.constrainPosition?this.constrainPosition(t,this,this._initialDomRect,this._pickupPositionInElement):t;if(this.lockAxis==="x"||i==="x"?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||i==="y")&&(n=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),u=a.top+s,h=a.bottom-(c-s),f=a.left+o,d=a.right-(l-o);n=Br(n,f,d),r=Br(r,u,h)}return{x:n,y:r}}_updatePointerDirectionDelta(t){let{x:i,y:n}=t,r=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(i-o.x),a=Math.abs(n-o.y);return s>this._config.pointerDirectionChangeThreshold&&(r.x=i>o.x?1:-1,o.x=i),a>this._config.pointerDirectionChangeThreshold&&(r.y=n>o.y?1:-1,o.y=n),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,ae(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,oi),t.removeEventListener("touchstart",this._pointerDown,$r),t.removeEventListener("dragstart",this._nativeDragStart,oi)}_applyRootElementTransform(t,i){let n=ai(t,i),r=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=r.transform&&r.transform!="none"?r.transform:""),r.transform=li(n,this._initialTransform)}_applyPreviewTransform(t,i){let n=this._previewTemplate?.template?void 0:this._initialTransform,r=ai(t,i);this._preview.style.transform=li(r,n)}_getDragDistance(t){let i=this._pickupPositionOnPage;return i?{x:t.x-i.x,y:t.y-i.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:i}=this._passiveTransform;if(t===0&&i===0||this.isDragging()||!this._boundaryElement)return;let n=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(r.width===0&&r.height===0||n.width===0&&n.height===0)return;let o=r.left-n.left,s=n.right-r.right,a=r.top-n.top,l=n.bottom-r.bottom;r.width>n.width?(o>0&&(t+=o),s>0&&(t-=s)):t=0,r.height>n.height?(a>0&&(i+=a),l>0&&(i-=l)):i=0,(t!==this._passiveTransform.x||i!==this._passiveTransform.y)&&this.setFreeDragPosition({y:i,x:t})}_getDragStartDelay(t){let i=this.dragStartDelay;return typeof i=="number"?i:we(t)?i.touch:i?i.mouse:0}_updateOnScroll(t){let i=this._parentPositions.handleScroll(t);if(i){let n=ye(t);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&be(this._boundaryRect,i.top,i.left),this._pickupPositionOnPage.x+=i.left,this._pickupPositionOnPage.y+=i.top,this._dropContainer||(this._activeTransform.x-=i.left,this._activeTransform.y-=i.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=ln(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,i){let n=this._previewContainer||"global";if(n==="parent")return t;if(n==="global"){let r=this._document;return i||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return j(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(t){return this._handles.find(i=>t.target&&(t.target===i||i.contains(t.target)))}};function ai(e,t){return`translate3d(${Math.round(e)}px, ${Math.round(t)}px, 0)`}function Br(e,t,i){return Math.max(t,Math.min(i,e))}function we(e){return e.type[0]==="t"}function zr(e,t){let i=e.rootNodes;if(i.length===1&&i[0].nodeType===t.ELEMENT_NODE)return i[0];let n=t.createElement("div");return i.forEach(r=>n.appendChild(r)),n}function Vr(e,t){e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.transform=ai(t.left,t.top)}function pa(e,t,i){let n=Hr(t,e.length-1),r=Hr(i,e.length-1);if(n===r)return;let o=e[n],s=r<n?-1:1;for(let a=n;a!==r;a+=s)e[a]=e[a+s];e[r]=o}function Hr(e,t){return Math.max(0,Math.min(t,e))}var gn=class{constructor(t,i){this._element=t,this._dragDropRegistry=i,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(t){this.withItems(t)}sort(t,i,n,r){let o=this._itemPositions,s=this._getItemIndexFromPointerPosition(t,i,n,r);if(s===-1&&o.length>0)return null;let a=this.orientation==="horizontal",l=o.findIndex(y=>y.drag===t),c=o[s],u=o[l].clientRect,h=c.clientRect,f=l>s?1:-1,d=this._getItemOffsetPx(u,h,f),g=this._getSiblingOffsetPx(l,o,f),x=o.slice();return pa(o,l,s),o.forEach((y,D)=>{if(x[D]===y)return;let T=y.drag===t,C=T?d:g,_=T?t.getPlaceholderElement():y.drag.getRootElement();y.offset+=C,a?(_.style.transform=li(`translate3d(${Math.round(y.offset)}px, 0, 0)`,y.initialTransform),be(y.clientRect,0,C)):(_.style.transform=li(`translate3d(0, ${Math.round(y.offset)}px, 0)`,y.initialTransform),be(y.clientRect,C,0))}),this._previousSwap.overlaps=pn(h,i,n),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?r.x:r.y,{previousIndex:l,currentIndex:s}}enter(t,i,n,r){let o=r==null||r<0?this._getItemIndexFromPointerPosition(t,i,n):r,s=this._activeDraggables,a=s.indexOf(t),l=t.getPlaceholderElement(),c=s[o];if(c===t&&(c=s[o+1]),!c&&(o==null||o===-1||o<s.length-1)&&this._shouldEnterAsFirstChild(i,n)&&(c=s[0]),a>-1&&s.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){let u=c.getRootElement();u.parentElement.insertBefore(l,u),s.splice(o,0,t)}else j(this._element).appendChild(l),s.push(t);l.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables.forEach(t=>{let i=t.getRootElement();if(i){let n=this._itemPositions.find(r=>r.drag===t)?.initialTransform;i.style.transform=n||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===t)}updateOnScroll(t,i){this._itemPositions.forEach(({clientRect:n})=>{be(n,t,i)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}_cacheItemPositions(){let t=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(i=>{let n=i.getVisibleElement();return{drag:i,offset:0,initialTransform:n.style.transform||"",clientRect:vn(n)}}).sort((i,n)=>t?i.clientRect.left-n.clientRect.left:i.clientRect.top-n.clientRect.top)}_getItemOffsetPx(t,i,n){let r=this.orientation==="horizontal",o=r?i.left-t.left:i.top-t.top;return n===-1&&(o+=r?i.width-t.width:i.height-t.height),o}_getSiblingOffsetPx(t,i,n){let r=this.orientation==="horizontal",o=i[t].clientRect,s=i[t+n*-1],a=o[r?"width":"height"]*n;if(s){let l=r?"left":"top",c=r?"right":"bottom";n===-1?a-=s.clientRect[l]-o[c]:a+=o[l]-s.clientRect[c]}return a}_shouldEnterAsFirstChild(t,i){if(!this._activeDraggables.length)return!1;let n=this._itemPositions,r=this.orientation==="horizontal";if(n[0].drag!==this._activeDraggables[0]){let s=n[n.length-1].clientRect;return r?t>=s.right:i>=s.bottom}else{let s=n[0].clientRect;return r?t<=s.left:i<=s.top}}_getItemIndexFromPointerPosition(t,i,n,r){let o=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:a,clientRect:l})=>{if(a===t)return!1;if(r){let c=o?r.x:r.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&c===this._previousSwap.delta)return!1}return o?i>=Math.floor(l.left)&&i<Math.floor(l.right):n>=Math.floor(l.top)&&n<Math.floor(l.bottom)});return s===-1||!this._sortPredicate(s,t)?-1:s}},qr=.05,Wr=.05,it=function(e){return e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.DOWN=2]="DOWN",e}(it||{}),V=function(e){return e[e.NONE=0]="NONE",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e}(V||{}),_n=class{constructor(t,i,n,r,o){this._dragDropRegistry=i,this._ngZone=r,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new R,this.entered=new R,this.exited=new R,this.dropped=new R,this.sorted=new R,this.receivingStarted=new R,this.receivingStopped=new R,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Jt.EMPTY,this._verticalScrollDirection=it.NONE,this._horizontalScrollDirection=V.NONE,this._stopScrollTimers=new R,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),Un(0,jn).pipe($t(this._stopScrollTimers)).subscribe(()=>{let s=this._scrollNode,a=this.autoScrollStep;this._verticalScrollDirection===it.UP?s.scrollBy(0,-a):this._verticalScrollDirection===it.DOWN&&s.scrollBy(0,a),this._horizontalScrollDirection===V.LEFT?s.scrollBy(-a,0):this._horizontalScrollDirection===V.RIGHT&&s.scrollBy(a,0)})},this.element=j(t),this._document=n,this.withScrollableParents([this.element]),i.registerDropContainer(this),this._parentPositions=new ci(n),this._sortStrategy=new gn(this.element,i),this._sortStrategy.withSortPredicate((s,a)=>this.sortPredicate(s,a,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,i,n,r){this._draggingStarted(),r==null&&this.sortingDisabled&&(r=this._draggables.indexOf(t)),this._sortStrategy.enter(t,i,n,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,i,n,r,o,s,a,l={}){this._reset(),this.dropped.next({item:t,currentIndex:i,previousIndex:n,container:this,previousContainer:r,isPointerOverContainer:o,distance:s,dropPoint:a,event:l})}withItems(t){let i=this._draggables;return this._draggables=t,t.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(i.filter(r=>r.isDragging()).every(r=>t.indexOf(r)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._sortStrategy.direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._sortStrategy.orientation=t,this}withScrollableParents(t){let i=j(this.element);return this._scrollableElements=t.indexOf(i)===-1?[i,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,i,n,r){if(this.sortingDisabled||!this._domRect||!Mr(this._domRect,qr,i,n))return;let o=this._sortStrategy.sort(t,i,n,r);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,i){if(this.autoScrollDisabled)return;let n,r=it.NONE,o=V.NONE;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||n||Mr(s.clientRect,qr,t,i)&&([r,o]=ma(a,s.clientRect,this._sortStrategy.direction,t,i),(r||o)&&(n=a))}),!r&&!o){let{width:s,height:a}=this._viewportRuler.getViewportSize(),l={width:s,height:a,top:0,right:s,bottom:a,left:0};r=Xr(l,i),o=Yr(l,t),n=window}n&&(r!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=o,this._scrollNode=n,(r||o)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let t=j(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){let t=j(this.element);this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(t).clientRect}_reset(){this._isDragging=!1;let t=j(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(i=>i._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(t,i){return this._domRect!=null&&pn(this._domRect,t,i)}_getSiblingContainerFromPosition(t,i,n){return this._siblings.find(r=>r._canReceive(t,i,n))}_canReceive(t,i,n){if(!this._domRect||!pn(this._domRect,i,n)||!this.enterPredicate(t,this))return!1;let r=this._getShadowRoot().elementFromPoint(i,n);if(!r)return!1;let o=j(this.element);return r===o||o.contains(r)}_startReceiving(t,i){let n=this._activeSiblings;!n.has(t)&&i.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(n.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:i}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){let i=this._parentPositions.handleScroll(t);i&&this._sortStrategy.updateOnScroll(i.top,i.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let t=ln(j(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let t=this._sortStrategy.getActiveItemsSnapshot().filter(i=>i.isDragging());this._siblings.forEach(i=>i._startReceiving(this,t))}};function Xr(e,t){let{top:i,bottom:n,height:r}=e,o=r*Wr;return t>=i-o&&t<=i+o?it.UP:t>=n-o&&t<=n+o?it.DOWN:it.NONE}function Yr(e,t){let{left:i,right:n,width:r}=e,o=r*Wr;return t>=i-o&&t<=i+o?V.LEFT:t>=n-o&&t<=n+o?V.RIGHT:V.NONE}function ma(e,t,i,n,r){let o=Xr(t,r),s=Yr(t,n),a=it.NONE,l=V.NONE;if(o){let c=e.scrollTop;o===it.UP?c>0&&(a=it.UP):e.scrollHeight-c>e.clientHeight&&(a=it.DOWN)}if(s){let c=e.scrollLeft;i==="rtl"?s===V.RIGHT?c<0&&(l=V.RIGHT):e.scrollWidth+c>e.clientWidth&&(l=V.LEFT):s===V.LEFT?c>0&&(l=V.LEFT):e.scrollWidth-c>e.clientWidth&&(l=V.RIGHT)}return[a,l]}var si=ti({passive:!1,capture:!0}),ga=(()=>{let t=class t{constructor(n,r){this._ngZone=n,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new R,this.pointerUp=new R,this.scroll=new R,this._preventDefaultWhileDragging=o=>{this._activeDragInstances.length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=r}registerDropContainer(n){this._dropInstances.has(n)||this._dropInstances.add(n)}registerDragItem(n){this._dragInstances.add(n),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,si)})}removeDropContainer(n){this._dropInstances.delete(n)}removeDragItem(n){this._dragInstances.delete(n),this.stopDragging(n),this._dragInstances.size===0&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,si)}startDragging(n,r){if(!(this._activeDragInstances.indexOf(n)>-1)&&(this._activeDragInstances.push(n),this._activeDragInstances.length===1)){let o=r.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:si}),o||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:si}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,a)=>{this._document.addEventListener(a,s.handler,s.options)})})}}stopDragging(n){let r=this._activeDragInstances.indexOf(n);r>-1&&(this._activeDragInstances.splice(r,1),this._activeDragInstances.length===0&&this._clearGlobalListeners())}isDragging(n){return this._activeDragInstances.indexOf(n)>-1}scrolled(n){let r=[this.scroll];return n&&n!==this._document&&r.push(new Zi(o=>this._ngZone.runOutsideAngular(()=>{let a=l=>{this._activeDragInstances.length&&o.next(l)};return n.addEventListener("scroll",a,!0),()=>{n.removeEventListener("scroll",a,!0)}}))),Xe(...r)}ngOnDestroy(){this._dragInstances.forEach(n=>this.removeDragItem(n)),this._dropInstances.forEach(n=>this.removeDropContainer(n)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((n,r)=>{this._document.removeEventListener(r,n.handler,n.options)}),this._globalListeners.clear()}};t.\u0275fac=function(r){return new(r||t)(Bt(Ze),Bt(Je))},t.\u0275prov=Qi({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),_a={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Zr=(()=>{let t=class t{constructor(n,r,o,s){this._document=n,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=s}createDrag(n,r=_a){return new mn(n,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(n){return new _n(n,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}};t.\u0275fac=function(r){return new(r||t)(Bt(Je),Bt(Ze),Bt(ar),Bt(ga))},t.\u0275prov=Qi({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Gr=new bt("CDK_DRAG_PARENT");var jr=new bt("CdkDragHandle");var xa=new bt("CdkDragPlaceholder");var va=new bt("CdkDragPreview");var Qr=new bt("CDK_DRAG_CONFIG"),ya="cdk-drag",Kr=new bt("CdkDropList"),Jr=(()=>{let t=class t{get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(n){this._disabled=n,this._dragRef.disabled=this._disabled}constructor(n,r,o,s,a,l,c,u,h,f,d){this.element=n,this.dropContainer=r,this._ngZone=s,this._viewContainerRef=a,this._dir=c,this._changeDetectorRef=h,this._selfHandle=f,this._parentDrag=d,this._destroyed=new R,this.started=new X,this.released=new X,this.ended=new X,this.entered=new X,this.exited=new X,this.dropped=new X,this.moved=new Zi(g=>{let x=this._dragRef.moved.pipe(We(y=>({source:this,pointerPosition:y.pointerPosition,event:y.event,delta:y.delta,distance:y.distance}))).subscribe(g);return()=>{x.unsubscribe()}}),this._dragRef=u.createDrag(n,{dragStartThreshold:l&&l.dragStartThreshold!=null?l.dragStartThreshold:5,pointerDirectionChangeThreshold:l&&l.pointerDirectionChangeThreshold!=null?l.pointerDirectionChangeThreshold:5,zIndex:l?.zIndex}),this._dragRef.data=this,t._dragInstances.push(this),l&&this._assignDefaults(l),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(n){this._dragRef.setFreeDragPosition(n)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ft(1),$t(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(n){let r=n.rootElementSelector,o=n.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);let n=t._dragInstances.indexOf(this);n>-1&&t._dragInstances.splice(n,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){let n=this.element.nativeElement,r=n;this.rootElementSelector&&(r=n.closest!==void 0?n.closest(this.rootElementSelector):n.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||n)}_getBoundaryElement(){let n=this.boundaryElement;return n?typeof n=="string"?this.element.nativeElement.closest(n):j(n):null}_syncInputs(n){n.beforeStarted.subscribe(()=>{if(!n.isDragging()){let r=this._dir,o=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;n.disabled=this.disabled,n.lockAxis=this.lockAxis,n.dragStartDelay=typeof o=="object"&&o?o:an(o),n.constrainPosition=this.constrainPosition,n.previewClass=this.previewClass,n.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),r&&n.withDirection(r.value)}}),n.beforeStarted.pipe(Ft(1)).subscribe(()=>{if(this._parentDrag){n.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){if(r.classList.contains(ya)){n.withParent(t._dragInstances.find(o=>o.element.nativeElement===r)?._dragRef||null);break}r=r.parentElement}})}_handleEvents(n){n.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),n.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),n.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),n.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),n.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),n.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(n){let{lockAxis:r,dragStartDelay:o,constrainPosition:s,previewClass:a,boundaryElement:l,draggingDisabled:c,rootElementSelector:u,previewContainer:h}=n;this.disabled=c??!1,this.dragStartDelay=o||0,r&&(this.lockAxis=r),s&&(this.constrainPosition=s),a&&(this.previewClass=a),l&&(this.boundaryElement=l),u&&(this.rootElementSelector=u),h&&(this.previewContainer=h)}_setupHandlesListener(){this._handles.changes.pipe(Ye(this._handles),Xn(n=>{let r=n.filter(o=>o._parentDrag===this).map(o=>o.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),Wn(n=>Xe(...n.map(r=>r._stateChanges.pipe(Ye(r))))),$t(this._destroyed)).subscribe(n=>{let r=this._dragRef,o=n.element.nativeElement;n.disabled?r.disableHandle(o):r.enableHandle(o)})}};t._dragInstances=[],t.\u0275fac=function(r){return new(r||t)(b(tn),b(Kr,12),b(Je),b(Ze),b(Zn),b(Qr,8),b(cn,8),b(Zr),b(en),b(jr,10),b(Gr,12))},t.\u0275dir=Ji({type:t,selectors:[["","cdkDrag",""]],contentQueries:function(r,o,s){if(r&1&&(Qe(s,va,5),Qe(s,xa,5),Qe(s,jr,5)),r&2){let a;mt(a=gt())&&(o._previewTemplate=a.first),mt(a=gt())&&(o._placeholderTemplate=a.first),mt(a=gt())&&(o._handles=a)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,o){r&2&&rn("cdk-drag-disabled",o.disabled)("cdk-drag-dragging",o._dragRef.isDragging())},inputs:{data:[M.None,"cdkDragData","data"],lockAxis:[M.None,"cdkDragLockAxis","lockAxis"],rootElementSelector:[M.None,"cdkDragRootElement","rootElementSelector"],boundaryElement:[M.None,"cdkDragBoundary","boundaryElement"],dragStartDelay:[M.None,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[M.None,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[M.HasDecoratorInputTransform,"cdkDragDisabled","disabled",ve],constrainPosition:[M.None,"cdkDragConstrainPosition","constrainPosition"],previewClass:[M.None,"cdkDragPreviewClass","previewClass"],previewContainer:[M.None,"cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[sn([{provide:Gr,useExisting:t}]),nn,Yn]});let e=t;return e})(),Ur=new bt("CdkDropListGroup");var wa=0,to=(()=>{let t=class t{get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(n){this._dropListRef.disabled=this._disabled=n}constructor(n,r,o,s,a,l,c){this.element=n,this._changeDetectorRef=o,this._scrollDispatcher=s,this._dir=a,this._group=l,this._destroyed=new R,this.connectedTo=[],this.id=`cdk-drop-list-${wa++}`,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new X,this.entered=new X,this.exited=new X,this.sorted=new X,this._unsortedItems=new Set,this._dropListRef=r.createDropList(n),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=(u,h)=>this.enterPredicate(u.data,h.data),this._dropListRef.sortPredicate=(u,h,f)=>this.sortPredicate(u,h.data,f.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),t._dropLists.push(this),l&&l._items.add(this)}addItem(n){this._unsortedItems.add(n),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(n){this._unsortedItems.delete(n),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((n,r)=>n._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let n=t._dropLists.indexOf(this);n>-1&&t._dropLists.splice(n,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(n){this._dir&&this._dir.change.pipe(Ye(this._dir.value),$t(this._destroyed)).subscribe(r=>n.withDirection(r)),n.beforeStarted.subscribe(()=>{let r=or(this.connectedTo).map(o=>{if(typeof o=="string"){let s=t._dropLists.find(a=>a.id===o);return s}return o});if(this._group&&this._group._items.forEach(o=>{r.indexOf(o)===-1&&r.push(o)}),!this._scrollableParentsResolved){let o=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(o),this._scrollableParentsResolved=!0}n.disabled=this.disabled,n.lockAxis=this.lockAxis,n.sortingDisabled=this.sortingDisabled,n.autoScrollDisabled=this.autoScrollDisabled,n.autoScrollStep=an(this.autoScrollStep,2),n.connectedTo(r.filter(o=>o&&o!==this).map(o=>o._dropListRef)).withOrientation(this.orientation)})}_handleEvents(n){n.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),n.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),n.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),n.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),n.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),Xe(n.receivingStarted,n.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(n){let{lockAxis:r,draggingDisabled:o,sortingDisabled:s,listAutoScrollDisabled:a,listOrientation:l}=n;this.disabled=o??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=a??!1,this.orientation=l||"vertical",r&&(this.lockAxis=r)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(n=>n._dragRef))}};t._dropLists=[],t.\u0275fac=function(r){return new(r||t)(b(tn),b(Zr),b(en),b(sr),b(cn,8),b(Ur,12),b(Qr,8))},t.\u0275dir=Ji({type:t,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(r,o){r&2&&(Qn("id",o.id),rn("cdk-drop-list-disabled",o.disabled)("cdk-drop-list-dragging",o._dropListRef.isDragging())("cdk-drop-list-receiving",o._dropListRef.isReceiving()))},inputs:{connectedTo:[M.None,"cdkDropListConnectedTo","connectedTo"],data:[M.None,"cdkDropListData","data"],orientation:[M.None,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[M.None,"cdkDropListLockAxis","lockAxis"],disabled:[M.HasDecoratorInputTransform,"cdkDropListDisabled","disabled",ve],sortingDisabled:[M.HasDecoratorInputTransform,"cdkDropListSortingDisabled","sortingDisabled",ve],enterPredicate:[M.None,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[M.None,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[M.HasDecoratorInputTransform,"cdkDropListAutoScrollDisabled","autoScrollDisabled",ve],autoScrollStep:[M.None,"cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[sn([{provide:Ur,useValue:void 0},{provide:Kr,useExisting:t}]),nn]});let e=t;return e})();var U=function(e){return e.Add="add",e.Edit="edit",e}(U||{});var ba=(e,t)=>t.id;function Sa(e,t){e&1&&v(0," > ")}function Da(e,t){e&1&&P(0,"i",8)}function Ca(e,t){if(e&1){let i=nt();p(0,"div",18),I("click",function(){let o=J(i).$implicit,s=F();return tt(s.goToEditTag(o.id))}),p(1,"div",19),P(2,"i",20),m(),p(3,"span",21),v(4),ut(5,Sa,1,0)(6,Da,1,0),m()()}if(e&2){let i=t.$implicit,n=F();S(2),N("ngClass",i.tagIconName),S(),N("cdkDragDisabled",!n.isDrop),S(),rt(" ",i.tagName," "),S(),zt(5,n.isDrop?6:5)}}function Ta(e,t){if(e&1){let i=nt();p(0,"button",22),I("click",function(){J(i);let r=F();return tt(r.onClickAddTag())}),P(1,"i",23),m()}}function Ea(e,t){if(e&1){let i=nt();p(0,"button",24),I("click",function(){J(i);let r=F();return tt(r.onConfirm())}),v(1,"\u78BA\u8A8D"),m(),p(2,"button",25),I("click",function(){J(i);let r=F();return tt(r.doDropList())}),v(3," \u53D6\u6D88 "),m()}}var eo=e=>({"bg-gray-600":e}),It,ui=(It=class{get TransactionTypeEnum(){return ii}constructor(t,i,n){this.router=t,this.loaderService=i,this.ledgerService=n,this.transactionType=this.TransactionTypeEnum.Expense,this.destroy$=new R,this.tagList=[],this.keepTagList=[],this.isDrop=!1,this.transactionType=this.router?.getCurrentNavigation()?.extras.state?.transactionType||this.TransactionTypeEnum.Expense,this.onChangeTransactionType(this.transactionType)}ngOnInit(){}onChangeTransactionType(t){this.loaderService.start(),this.destroy$.next(!0),this.transactionType=t,this.tagList$=this.ledgerService.getTagList(this.transactionType).pipe(ni(this)),this.tagList$.pipe($t(this.destroy$)).subscribe(i=>{this.loaderService.stop(),this.tagList=i})}goToEditTag(t){this.router.navigate(["/setting/addTag"],{state:{docId:t,transactionType:this.transactionType,tagStatus:U.Edit}})}onClickAddTag(){this.router.navigate(["/setting/addTag"],{state:{transactionType:this.transactionType,tagStatus:U.Add}})}doDropList(){this.isDrop?(this.tagList=this.keepTagList,this.isDrop=!1):(this.keepTagList=structuredClone(this.tagList),this.isDrop=!0)}dropTag(t){let i=structuredClone(this.tagList),n=i[t.previousIndex],r=[...i.slice(0,t.previousIndex),...i.slice(t.previousIndex+1)],o=[...r.slice(0,t.currentIndex),n,...r.slice(t.currentIndex)];this.tagList=o.map((s,a)=>Kt(Qt({},s),{sort:a}))}onConfirm(){return ge(this,null,function*(){this.loaderService.start(),yield this.ledgerService.updateTagsSort(this.tagList).then(()=>{this.isDrop=!1,this.keepTagList=[]}).catch(t=>{this.doDropList(),console.error("Error in batch update:",t)}).finally(()=>{this.loaderService.stop()})})}},It.\u0275fac=function(i){return new(i||It)(b(Dt),b(ee),b(Et))},It.\u0275cmp=K({type:It,selectors:[["app-tags-manage"]],standalone:!0,features:[et],decls:28,vars:7,consts:[[1,"bg-gray-800","text-white","h-dvh"],[1,"bg-gray-800","py-4"],[1,"sticky","top-0","bg-gray-800"],[1,"flex","justify-between","items-center","px-4","mb-4"],["routerLink","/setting",1,"text-white"],[1,"fas","fa-arrow-left"],[1,"text-lg","font-semibold"],[3,"click"],[1,"fas","fa-bars","me-1"],[1,"flex","justify-around","items-center","mb-3"],[1,"w-1/2","p-4","border-y-2","border-gray-900",3,"ngClass","click"],[1,"fas","fa-arrow-up"],[1,"block","text-xs"],[1,"fas","fa-arrow-down"],["cdkDropList","",1,"space-y-2",3,"cdkDropListDropped"],[1,"sticky","bottom-0"],[1,"flex","justify-around","items-center","bg-gray-500"],["class","p-4 flex-1"],[1,"flex","items-center","justify-between","px-4","py-3","bg-gray-700",3,"click"],[1,"flex","items-center"],[3,"ngClass"],["cdkDrag","",3,"cdkDragDisabled"],[1,"p-4","flex-1",3,"click"],[1,"fas","fa-plus"],[1,"flex-1","p-4",3,"click"],[1,"flex-1","p-4","bg-gray-600",3,"click"],["class","flex items-center justify-between px-4 py-3 bg-gray-700"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),P(5,"i",5),m(),p(6,"h1",6),v(7,"\u985E\u5225\u7BA1\u7406"),m(),p(8,"button",7),I("click",function(){return n.doDropList()}),P(9,"i",8),p(10,"span"),v(11,"\u6392\u5E8F"),m()()(),p(12,"div",9)(13,"button",10),I("click",function(){return n.onChangeTransactionType(n.TransactionTypeEnum.Expense)}),P(14,"i",11),p(15,"span",12),v(16,"\u652F\u51FA"),m()(),p(17,"button",10),I("click",function(){return n.onChangeTransactionType(n.TransactionTypeEnum.Income)}),P(18,"i",13),p(19,"span",12),v(20,"\u6536\u5165"),m()()()(),p(21,"div",14),I("cdkDropListDropped",function(o){return n.dropTag(o)}),dt(22,Ca,7,4,"div",26,ba),m()(),p(24,"div",15)(25,"div",16),ut(26,Ta,2,0,"button",17)(27,Ea,4,0),m()()()),i&2&&(S(13),N("ngClass",ot(3,eo,n.transactionType===n.TransactionTypeEnum.Expense)),S(4),N("ngClass",ot(5,eo,n.transactionType===n.TransactionTypeEnum.Income)),S(5),pt(n.tagList),S(4),zt(26,n.isDrop?27:26))},dependencies:[Tt,St,Ct,to,Jr],styles:["[_nghost-%COMP%]{display:block}"]}),It);ui=te([oe()],ui);var Ia=e=>({"bg-gray-500":e});function ka(e,t){if(e&1){let i=nt();p(0,"button",14),I("click",function(){let o=J(i).$implicit,s=F();return tt(s.onClickTag(o))}),P(1,"i",15),m()}if(e&2){let i=t.$implicit,n=F();N("ngClass",ot(2,Ia,n.selectedTag===i)),S(),N("ngClass",i)}}function Pa(e,t){if(e&1){let i=nt();p(0,"button",16),I("click",function(){J(i);let r=F();return tt(r.onClickRemoveTag())}),P(1,"i",17),m()}}var kt,fi=(kt=class{constructor(t,i,n,r){this.router=t,this.loaderService=i,this.route=n,this.ledgerService=r,this.selectedTag="",this.tagname="",this.lastSort=0,this.docId="",this.tagList=["fas fa-bread-slice","fas fa-tshirt","fas fa-candy-cane","fas fa-bus","fas fa-shopping-cart","fas fa-coffee","fas fa-headphones","fas fa-utensils","fas fa-book","fas fa-hospital","fas fa-tag","fas fa-phone","fas fa-user","fas fa-home","fas fa-hamburger","far fa-credit-card","fas fa-gift","fas fa-hand-holding-heart","fas fa-landmark","fas fa-comment-dollar","fas fa-wine-glass-alt","fas fa-store"];let o=this.route.snapshot.data.data;this.tagStatus=o.tagStatus,o.tagStatus===U.Edit?(this.docId=o.docId,this.lastSort=o.lastSort,this.selectedTag=o.selectedTag,this.tagname=o.tagName):o.tagStatus===U.Add?(this.transactionType=o.transactionType,this.lastSort=o.lastSort):this.router.navigateByUrl("/setting/tagsManage")}ngOnInit(){}onClickTag(t){if(this.selectedTag===t){this.selectedTag="";return}this.selectedTag=t}onClickAddTag(){let t=this.tagname.trim();if(!t||!this.selectedTag){alert("Tag name is empty");return}if(!this.selectedTag){alert("Tag icon is empty");return}this.addTag(t,this.selectedTag)}addTag(t,i){return ge(this,null,function*(){this.loaderService.start(),this.tagStatus===U.Add?yield this.ledgerService.addTagDoc({tagName:t,tagIconName:i,sort:this.lastSort,transactionType:this.transactionType}).catch(n=>{console.error("Error adding document: ",n)}).then(()=>{this.router.navigateByUrl("/setting/tagsManage",{state:{transactionType:this.transactionType}})}).finally(()=>this.loaderService.stop()):this.tagStatus===U.Edit?yield this.ledgerService.updateTagDoc(this.docId,i,t).catch(n=>{console.error("Error adding document: ",n)}).then(()=>{this.router.navigateByUrl("/setting/tagsManage",{state:{transactionType:this.transactionType}})}).finally(()=>this.loaderService.stop()):this.loaderService.stop()})}onClickRemoveTag(){return ge(this,null,function*(){this.tagStatus!==U.Add&&this.tagStatus===U.Edit&&(this.loaderService.start(),yield this.ledgerService.removeTagDoc(this.docId).then(()=>{this.router.navigateByUrl("/setting/tagsManage",{state:{transactionType:this.transactionType}})}).catch(t=>{console.error("Error removing document: ",t)}).finally(()=>this.loaderService.stop()))})}},kt.\u0275fac=function(i){return new(i||kt)(b(Dt),b(ee),b(ir),b(Et))},kt.\u0275cmp=K({type:kt,selectors:[["app-add-tag"]],standalone:!0,features:[et],decls:19,vars:2,consts:[[1,"bg-gray-800","text-white","h-dvh"],[1,"py-4"],[1,"flex","justify-between","items-center","px-4","mb-4"],["routerLink","/setting/tagsManage",1,"text-white"],[1,"fas","fa-arrow-left"],[1,"text-lg","font-semibold"],[1,"relative","m-5","mb-4"],["for","tagName",1,"leading-7","text-sm","text-gray-200"],["autocomplete","off","id","tagName","type","text",1,"w-full","bg-gray-800","rounded","border","border-gray-700","focus:border-indigo-500","focus:ring-2","focus:ring-indigo-900","text-base","outline-none","text-gray-100","py-1","px-3","leading-8","transition-colors","duration-200","ease-in-out",3,"ngModel","ngModelChange"],[1,"m-5","border-2","p-1","flex","flex-wrap"],[1,"flex","w-full"],[1,"bg-gray-600","p-4","flex-1",3,"click"],[1,"fas","fa-check"],["class","bg-gray-700 p-4 flex-1"],[1,"p-4","w-1/5",3,"ngClass","click"],[3,"ngClass"],[1,"bg-gray-700","p-4","flex-1",3,"click"],[1,"fas","fa-trash"],["class","p-4 w-1/5",3,"ngClass"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),P(4,"i",4),m(),p(5,"h1",5),v(6,"\u65B0\u589E\u985E\u5225"),m(),P(7,"div"),m(),p(8,"div",6)(9,"label",7),v(10,"\u8ACB\u81EA\u5B9A\u7FA9\u6A19\u7C64\u540D\u7A31"),m(),p(11,"input",8),I("ngModelChange",function(o){return n.tagname=o}),m()(),p(12,"div",9),dt(13,ka,2,4,"button",18,Kn),m(),p(15,"div",10)(16,"button",11),I("click",function(){return n.onClickAddTag()}),P(17,"i",12),m(),ut(18,Pa,2,0,"button",13),m()()()),i&2&&(S(11),N("ngModel",n.tagname),S(2),pt(n.tagList),S(5),zt(18,n.docId?18:-1))},dependencies:[er,St,nr,Ct,gr,ne,re,ei],styles:["[_nghost-%COMP%]{display:block}"]}),kt);fi=te([oe()],fi);var oo=()=>{let e=Ki(Et),t=Ki(Dt),i=t?.getCurrentNavigation()?.extras.state?.docId,n=t?.getCurrentNavigation()?.extras.state?.transactionType,r=t?.getCurrentNavigation()?.extras.state?.tagStatus;if(r===U.Edit)return e.getTagInfo(i).then(o=>{if(o.exists()){let s=o.data();return{tagStatus:r,docId:i,lastSort:s.sort,selectedTag:s.tagIconName,tagName:s.tagName}}else t.navigate(["/setting/tags-manage"])});if(r===U.Add&&n)return e.getTagLastSort(ii.Expense).pipe(Ft(1)).pipe(We(o=>({tagStatus:r,transactionType:n,lastSort:o})));t.navigate(["/setting/tags-manage"])};var Ra=["templateRef"],Aa=e=>({"bg-slate-600":e});function Ma(e,t){if(e&1){let i=nt();p(0,"div",20),I("click",function(){let o=J(i).$implicit,s=F(2);return tt(s.onClickDate(o))}),v(1),m()}if(e&2){let i=t.$implicit,n=F(2);N("ngClass",ot(2,Aa,n.selectedDate===i)),S(),rt(" ",i," ")}}function Oa(e,t){if(e&1&&(p(0,"div",19),dt(1,Ma,2,4,"div",21,_e),m()),e&2){let i=F();S(),pt(i.dateNumList)}}var so=(()=>{let t=class t{constructor(n){this.modalService=n,this.dateNumList=Array.from({length:31}).map((r,o)=>o+1),this.selectedDate=parseInt(localStorage.getItem("selectedDate")||"0"),this.showBudget=localStorage.getItem("showBudget")==="1",this.showBudgetDisabled=!1,this.budgetAmount=parseInt(localStorage.getItem("budgetAmount")||"0")}ngOnInit(){this.showBudgetDisabled=!this.selectedDate}onChangeBudgetAmount(){localStorage.setItem("budgetAmount",`${this.budgetAmount}`),!this.budgetAmount||this.budgetAmount===0?(this.showBudget=!1,this.showBudgetDisabled=!0,this.onChangeShowBudget()):this.showBudgetDisabled=!1}onChangeShowBudget(){localStorage.setItem("showBudget",this.showBudget?"1":"0")}onClickDate(n){n===this.selectedDate?(this.selectedDate=0,localStorage.setItem("selectedDate",""),this.showBudgetDisabled=!0):(this.selectedDate=n,localStorage.setItem("selectedDate",`${n}`),this.showBudgetDisabled=!1)}onSelectDate(){this.modalService.openConfirm({title:"\u9078\u64C7\u65E5\u671F",okText:"\u78BA\u8A8D",showCancelBtn:!1,outsideClose:!1,contentTemplateRef:this.templateRef,onOk:()=>{this.showBudget=this.selectedDate!==0,this.onChangeShowBudget()}})}};t.\u0275fac=function(r){return new(r||t)(b(ie))},t.\u0275cmp=K({type:t,selectors:[["app-budget"]],viewQuery:function(r,o){if(r&1&&xe(Ra,5),r&2){let s;mt(s=gt())&&(o.templateRef=s.first)}},standalone:!0,features:[et],decls:28,vars:4,consts:[[1,"bg-orange-200"],[1,"bg-orange-600","p-4"],["routerLink","/",1,"text-white"],[1,"fas","fa-arrow-left"],[1,"bg-orange-500","p-4","justify-center","items-center","text-white","flex"],[1,"text-3xl","me-3"],["autocomplete","off","type","number","inputmode","numeric",1,"w-full","text-right","bg-red-600","rounded","border","border-red-700","focus:border-red-500","focus:ring-2","focus:ring-red-900","text-3xl","outline-none","text-gray-100","py-1","px-3","leading-8","transition-colors","duration-200","ease-in-out",3,"ngModel","ngModelChange"],["priceInput",""],[1,"bg-orange-300","p-4","flex","justify-between","text-white",3,"click"],[1,"flex","items-center"],[1,"fas","fa-calendar-alt"],[1,"ml-2"],[1,"bg-white","p-4","flex","justify-between","items-center"],[1,"fas","fa-piggy-bank","text-gray-600"],[1,"ml-2","text-gray-600"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox",1,"sr-only","peer",3,"ngModel","disabled","ngModelChange"],[1,"w-11","h-6","bg-gray-200","rounded-full","peer","dark:bg-gray-300","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-0.5","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-blue-600"],["templateRef",""],[1,"flex","flex-wrap"],[1,"w-1/6","p-2","text-2xl","bg-slate-500","flex","justify-center","items-center","border","border-slate-700",3,"ngClass","click"],["class","w-1/6 p-2 text-2xl bg-slate-500 flex justify-center items-center border border-slate-700",3,"ngClass"]],template:function(r,o){r&1&&(p(0,"div",0)(1,"div",1)(2,"button",2),P(3,"i",3),m()(),p(4,"div",4)(5,"div",5),v(6,"TWD"),m(),p(7,"div")(8,"input",6,7),I("ngModelChange",function(a){return o.budgetAmount=a})("ngModelChange",function(){return o.onChangeBudgetAmount()}),m()()(),p(10,"div",8),I("click",function(){return o.onSelectDate()}),p(11,"button",9),P(12,"i",10),p(13,"span",11),v(14,"\u9810\u7B97\u9031\u671F"),m()(),p(15,"button",9)(16,"span"),v(17),m()()(),p(18,"div",12)(19,"div",9),P(20,"i",13),p(21,"span",14),v(22,"\u986F\u793A\u9810\u7B97"),m()(),p(23,"label",15)(24,"input",16),I("ngModelChange",function(a){return o.showBudget=a})("ngModelChange",function(){return o.onChangeShowBudget()}),m(),P(25,"div",17),m()()(),ut(26,Oa,3,0,"ng-template",null,18,Ke)),r&2&&(S(8),N("ngModel",o.budgetAmount),S(9),rt("\u8D77\u59CB\u65BC\u6BCF\u6708\u7B2C",o.selectedDate," \u5929"),S(7),N("ngModel",o.showBudget)("disabled",o.showBudgetDisabled))},dependencies:[Tt,St,ne,dr,ur,re,ei,Ct],styles:["[_nghost-%COMP%]{display:block}"]});let e=t;return e})();var Ve=ca(ua());var le=function(e){return e.Range_TAB="range",e.CUSTOM_TAB="custom",e}(le||{});var ce=class extends Map{constructor(t,i=Fa){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),t!=null)for(let[n,r]of t)this.set(n,r)}get(t){return super.get(ao(this,t))}has(t){return super.has(ao(this,t))}set(t,i){return super.set(Na(this,t),i)}delete(t){return super.delete(La(this,t))}};function ao({_intern:e,_key:t},i){let n=t(i);return e.has(n)?e.get(n):i}function Na({_intern:e,_key:t},i){let n=t(i);return e.has(n)?e.get(n):(e.set(n,i),i)}function La({_intern:e,_key:t},i){let n=t(i);return e.has(n)&&(i=e.get(n),e.delete(n)),i}function Fa(e){return e!==null&&typeof e=="object"?e.valueOf():e}var $a={value:()=>{}};function co(){for(var e=0,t=arguments.length,i={},n;e<t;++e){if(!(n=arguments[e]+"")||n in i||/[\s.]/.test(n))throw new Error("illegal type: "+n);i[n]=[]}return new hi(i)}function hi(e){this._=e}function Ba(e,t){return e.trim().split(/^|\s+/).map(function(i){var n="",r=i.indexOf(".");if(r>=0&&(n=i.slice(r+1),i=i.slice(0,r)),i&&!t.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:n}})}hi.prototype=co.prototype={constructor:hi,on:function(e,t){var i=this._,n=Ba(e+"",i),r,o=-1,s=n.length;if(arguments.length<2){for(;++o<s;)if((r=(e=n[o]).type)&&(r=za(i[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(r=(e=n[o]).type)i[r]=lo(i[r],e.name,t);else if(t==null)for(r in i)i[r]=lo(i[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var i in t)e[i]=t[i].slice();return new hi(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var i=new Array(r),n=0,r,o;n<r;++n)i[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],n=0,r=o.length;n<r;++n)o[n].value.apply(t,i)},apply:function(e,t,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],r=0,o=n.length;r<o;++r)n[r].value.apply(t,i)}};function za(e,t){for(var i=0,n=e.length,r;i<n;++i)if((r=e[i]).name===t)return r.value}function lo(e,t,i){for(var n=0,r=e.length;n<r;++n)if(e[n].name===t){e[n]=$a,e=e.slice(0,n).concat(e.slice(n+1));break}return i!=null&&e.push({name:t,value:i}),e}var wn=co;var di="http://www.w3.org/1999/xhtml",bn={svg:"http://www.w3.org/2000/svg",xhtml:di,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _t(e){var t=e+="",i=t.indexOf(":");return i>=0&&(t=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1)),bn.hasOwnProperty(t)?{space:bn[t],local:e}:e}function Va(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===di&&t.documentElement.namespaceURI===di?t.createElement(e):t.createElementNS(i,e)}}function Ha(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function pi(e){var t=_t(e);return(t.local?Ha:Va)(t)}function qa(){}function Vt(e){return e==null?qa:function(){return this.querySelector(e)}}function uo(e){typeof e!="function"&&(e=Vt(e));for(var t=this._groups,i=t.length,n=new Array(i),r=0;r<i;++r)for(var o=t[r],s=o.length,a=n[r]=new Array(s),l,c,u=0;u<s;++u)(l=o[u])&&(c=e.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new A(n,this._parents)}function Sn(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ga(){return[]}function Se(e){return e==null?Ga:function(){return this.querySelectorAll(e)}}function ja(e){return function(){return Sn(e.apply(this,arguments))}}function fo(e){typeof e=="function"?e=ja(e):e=Se(e);for(var t=this._groups,i=t.length,n=[],r=[],o=0;o<i;++o)for(var s=t[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(n.push(e.call(l,l.__data__,c,s)),r.push(l));return new A(n,r)}function De(e){return function(){return this.matches(e)}}function mi(e){return function(t){return t.matches(e)}}var Ua=Array.prototype.find;function Wa(e){return function(){return Ua.call(this.children,e)}}function Xa(){return this.firstElementChild}function ho(e){return this.select(e==null?Xa:Wa(typeof e=="function"?e:mi(e)))}var Ya=Array.prototype.filter;function Za(){return Array.from(this.children)}function Qa(e){return function(){return Ya.call(this.children,e)}}function po(e){return this.selectAll(e==null?Za:Qa(typeof e=="function"?e:mi(e)))}function mo(e){typeof e!="function"&&(e=De(e));for(var t=this._groups,i=t.length,n=new Array(i),r=0;r<i;++r)for(var o=t[r],s=o.length,a=n[r]=[],l,c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new A(n,this._parents)}function gi(e){return new Array(e.length)}function go(){return new A(this._enter||this._groups.map(gi),this._parents)}function Ce(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ce.prototype={constructor:Ce,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function _o(e){return function(){return e}}function Ka(e,t,i,n,r,o){for(var s=0,a,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],n[s]=a):i[s]=new Ce(e,o[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function Ja(e,t,i,n,r,o,s){var a,l,c=new Map,u=t.length,h=o.length,f=new Array(u),d;for(a=0;a<u;++a)(l=t[a])&&(f[a]=d=s.call(l,l.__data__,a,t)+"",c.has(d)?r[a]=l:c.set(d,l));for(a=0;a<h;++a)d=s.call(e,o[a],a,o)+"",(l=c.get(d))?(n[a]=l,l.__data__=o[a],c.delete(d)):i[a]=new Ce(e,o[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(f[a])===l&&(r[a]=l)}function tl(e){return e.__data__}function xo(e,t){if(!arguments.length)return Array.from(this,tl);var i=t?Ja:Ka,n=this._parents,r=this._groups;typeof e!="function"&&(e=_o(e));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=n[c],h=r[c],f=h.length,d=el(e.call(u,u&&u.__data__,c,n)),g=d.length,x=a[c]=new Array(g),y=s[c]=new Array(g),D=l[c]=new Array(f);i(u,h,x,y,D,d,t);for(var T=0,C=0,_,k;T<g;++T)if(_=x[T]){for(T>=C&&(C=T+1);!(k=y[C])&&++C<g;);_._next=k||null}}return s=new A(s,n),s._enter=a,s._exit=l,s}function el(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vo(){return new A(this._exit||this._groups.map(gi),this._parents)}function yo(e,t,i){var n=this.enter(),r=this,o=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),i==null?o.remove():i(o),n&&r?n.merge(r).order():r}function wo(e){for(var t=e.selection?e.selection():e,i=this._groups,n=t._groups,r=i.length,o=n.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var c=i[l],u=n[l],h=c.length,f=a[l]=new Array(h),d,g=0;g<h;++g)(d=c[g]||u[g])&&(f[g]=d);for(;l<r;++l)a[l]=i[l];return new A(a,this._parents)}function bo(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var n=e[t],r=n.length-1,o=n[r],s;--r>=0;)(s=n[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function So(e){e||(e=il);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var i=this._groups,n=i.length,r=new Array(n),o=0;o<n;++o){for(var s=i[o],a=s.length,l=r[o]=new Array(a),c,u=0;u<a;++u)(c=s[u])&&(l[u]=c);l.sort(t)}return new A(r,this._parents).order()}function il(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Do(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Co(){return Array.from(this)}function To(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var n=e[t],r=0,o=n.length;r<o;++r){var s=n[r];if(s)return s}return null}function Eo(){let e=0;for(let t of this)++e;return e}function Io(){return!this.node()}function ko(e){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var r=t[i],o=0,s=r.length,a;o<s;++o)(a=r[o])&&e.call(a,a.__data__,o,r);return this}function nl(e){return function(){this.removeAttribute(e)}}function rl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ol(e,t){return function(){this.setAttribute(e,t)}}function sl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function al(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttribute(e):this.setAttribute(e,i)}}function ll(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function Po(e,t){var i=_t(e);if(arguments.length<2){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((t==null?i.local?rl:nl:typeof t=="function"?i.local?ll:al:i.local?sl:ol)(i,t))}function _i(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function cl(e){return function(){this.style.removeProperty(e)}}function ul(e,t,i){return function(){this.style.setProperty(e,t,i)}}function fl(e,t,i){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,i)}}function Ro(e,t,i){return arguments.length>1?this.each((t==null?cl:typeof t=="function"?fl:ul)(e,t,i??"")):Pt(this.node(),e)}function Pt(e,t){return e.style.getPropertyValue(t)||_i(e).getComputedStyle(e,null).getPropertyValue(t)}function hl(e){return function(){delete this[e]}}function dl(e,t){return function(){this[e]=t}}function pl(e,t){return function(){var i=t.apply(this,arguments);i==null?delete this[e]:this[e]=i}}function Ao(e,t){return arguments.length>1?this.each((t==null?hl:typeof t=="function"?pl:dl)(e,t)):this.node()[e]}function Mo(e){return e.trim().split(/^|\s+/)}function Dn(e){return e.classList||new Oo(e)}function Oo(e){this._node=e,this._names=Mo(e.getAttribute("class")||"")}Oo.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function No(e,t){for(var i=Dn(e),n=-1,r=t.length;++n<r;)i.add(t[n])}function Lo(e,t){for(var i=Dn(e),n=-1,r=t.length;++n<r;)i.remove(t[n])}function ml(e){return function(){No(this,e)}}function gl(e){return function(){Lo(this,e)}}function _l(e,t){return function(){(t.apply(this,arguments)?No:Lo)(this,e)}}function Fo(e,t){var i=Mo(e+"");if(arguments.length<2){for(var n=Dn(this.node()),r=-1,o=i.length;++r<o;)if(!n.contains(i[r]))return!1;return!0}return this.each((typeof t=="function"?_l:t?ml:gl)(i,t))}function xl(){this.textContent=""}function vl(e){return function(){this.textContent=e}}function yl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function $o(e){return arguments.length?this.each(e==null?xl:(typeof e=="function"?yl:vl)(e)):this.node().textContent}function wl(){this.innerHTML=""}function bl(e){return function(){this.innerHTML=e}}function Sl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Bo(e){return arguments.length?this.each(e==null?wl:(typeof e=="function"?Sl:bl)(e)):this.node().innerHTML}function Dl(){this.nextSibling&&this.parentNode.appendChild(this)}function zo(){return this.each(Dl)}function Cl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Vo(){return this.each(Cl)}function Ho(e){var t=typeof e=="function"?e:pi(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Tl(){return null}function qo(e,t){var i=typeof e=="function"?e:pi(e),n=t==null?Tl:typeof t=="function"?t:Vt(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)})}function El(){var e=this.parentNode;e&&e.removeChild(this)}function Go(){return this.each(El)}function Il(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function jo(e){return this.select(e?kl:Il)}function Uo(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Pl(e){return function(t){e.call(this,t,this.__data__)}}function Rl(e){return e.trim().split(/^|\s+/).map(function(t){var i="",n=t.indexOf(".");return n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),{type:t,name:i}})}function Al(e){return function(){var t=this.__on;if(t){for(var i=0,n=-1,r=t.length,o;i<r;++i)o=t[i],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++n]=o;++n?t.length=n:delete this.__on}}}function Ml(e,t,i){return function(){var n=this.__on,r,o=Pl(t);if(n){for(var s=0,a=n.length;s<a;++s)if((r=n[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=i),r.value=t;return}}this.addEventListener(e.type,o,i),r={type:e.type,name:e.name,value:t,listener:o,options:i},n?n.push(r):this.__on=[r]}}function Wo(e,t,i){var n=Rl(e+""),r,o=n.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<o;++r)if((s=n[r]).type===u.type&&s.name===u.name)return u.value}return}for(a=t?Ml:Al,r=0;r<o;++r)this.each(a(n[r],t,i));return this}function Xo(e,t,i){var n=_i(e),r=n.CustomEvent;typeof r=="function"?r=new r(t,i):(r=n.document.createEvent("Event"),i?(r.initEvent(t,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Ol(e,t){return function(){return Xo(this,e,t)}}function Nl(e,t){return function(){return Xo(this,e,t.apply(this,arguments))}}function Yo(e,t){return this.each((typeof t=="function"?Nl:Ol)(e,t))}function*Zo(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var n=e[t],r=0,o=n.length,s;r<o;++r)(s=n[r])&&(yield s)}var Cn=[null];function A(e,t){this._groups=e,this._parents=t}function Qo(){return new A([[document.documentElement]],Cn)}function Ll(){return this}A.prototype=Qo.prototype={constructor:A,select:uo,selectAll:fo,selectChild:ho,selectChildren:po,filter:mo,data:xo,enter:go,exit:vo,join:yo,merge:wo,selection:Ll,order:bo,sort:So,call:Do,nodes:Co,node:To,size:Eo,empty:Io,each:ko,attr:Po,style:Ro,property:Ao,classed:Fo,text:$o,html:Bo,raise:zo,lower:Vo,append:Ho,insert:qo,remove:Go,clone:jo,datum:Uo,on:Wo,dispatch:Yo,[Symbol.iterator]:Zo};var xt=Qo;function xi(e){return typeof e=="string"?new A([[document.querySelector(e)]],[document.documentElement]):new A([[e]],Cn)}function vi(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function Tn(e,t){var i=Object.create(e.prototype);for(var n in t)i[n]=t[n];return i}function Ie(){}var Te=.7,bi=1/Te,ue="\\s*([+-]?\\d+)\\s*",Ee="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fl=/^#([0-9a-f]{3,8})$/,$l=new RegExp(`^rgb\\(${ue},${ue},${ue}\\)$`),Bl=new RegExp(`^rgb\\(${ft},${ft},${ft}\\)$`),zl=new RegExp(`^rgba\\(${ue},${ue},${ue},${Ee}\\)$`),Vl=new RegExp(`^rgba\\(${ft},${ft},${ft},${Ee}\\)$`),Hl=new RegExp(`^hsl\\(${Ee},${ft},${ft}\\)$`),ql=new RegExp(`^hsla\\(${Ee},${ft},${ft},${Ee}\\)$`),Ko={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vi(Ie,at,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Jo,formatHex:Jo,formatHex8:Gl,formatHsl:jl,formatRgb:ts,toString:ts});function Jo(){return this.rgb().formatHex()}function Gl(){return this.rgb().formatHex8()}function jl(){return ss(this).formatHsl()}function ts(){return this.rgb().formatRgb()}function at(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=Fl.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?es(t):i===3?new W(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?yi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?yi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$l.exec(e))?new W(t[1],t[2],t[3],1):(t=Bl.exec(e))?new W(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=zl.exec(e))?yi(t[1],t[2],t[3],t[4]):(t=Vl.exec(e))?yi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Hl.exec(e))?rs(t[1],t[2]/100,t[3]/100,1):(t=ql.exec(e))?rs(t[1],t[2]/100,t[3]/100,t[4]):Ko.hasOwnProperty(e)?es(Ko[e]):e==="transparent"?new W(NaN,NaN,NaN,0):null}function es(e){return new W(e>>16&255,e>>8&255,e&255,1)}function yi(e,t,i,n){return n<=0&&(e=t=i=NaN),new W(e,t,i,n)}function Ul(e){return e instanceof Ie||(e=at(e)),e?(e=e.rgb(),new W(e.r,e.g,e.b,e.opacity)):new W}function fe(e,t,i,n){return arguments.length===1?Ul(e):new W(e,t,i,n??1)}function W(e,t,i,n){this.r=+e,this.g=+t,this.b=+i,this.opacity=+n}vi(W,fe,Tn(Ie,{brighter(e){return e=e==null?bi:Math.pow(bi,e),new W(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Te:Math.pow(Te,e),new W(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new W(qt(this.r),qt(this.g),qt(this.b),Si(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:is,formatHex:is,formatHex8:Wl,formatRgb:ns,toString:ns}));function is(){return`#${Ht(this.r)}${Ht(this.g)}${Ht(this.b)}`}function Wl(){return`#${Ht(this.r)}${Ht(this.g)}${Ht(this.b)}${Ht((isNaN(this.opacity)?1:this.opacity)*255)}`}function ns(){let e=Si(this.opacity);return`${e===1?"rgb(":"rgba("}${qt(this.r)}, ${qt(this.g)}, ${qt(this.b)}${e===1?")":`, ${e})`}`}function Si(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ht(e){return e=qt(e),(e<16?"0":"")+e.toString(16)}function rs(e,t,i,n){return n<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new st(e,t,i,n)}function ss(e){if(e instanceof st)return new st(e.h,e.s,e.l,e.opacity);if(e instanceof Ie||(e=at(e)),!e)return new st;if(e instanceof st)return e;e=e.rgb();var t=e.r/255,i=e.g/255,n=e.b/255,r=Math.min(t,i,n),o=Math.max(t,i,n),s=NaN,a=o-r,l=(o+r)/2;return a?(t===o?s=(i-n)/a+(i<n)*6:i===o?s=(n-t)/a+2:s=(t-i)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new st(s,a,l,e.opacity)}function as(e,t,i,n){return arguments.length===1?ss(e):new st(e,t,i,n??1)}function st(e,t,i,n){this.h=+e,this.s=+t,this.l=+i,this.opacity=+n}vi(st,as,Tn(Ie,{brighter(e){return e=e==null?bi:Math.pow(bi,e),new st(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Te:Math.pow(Te,e),new st(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*t,r=2*i-n;return new W(En(e>=240?e-240:e+120,r,n),En(e,r,n),En(e<120?e+240:e-120,r,n),this.opacity)},clamp(){return new st(os(this.h),wi(this.s),wi(this.l),Si(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=Si(this.opacity);return`${e===1?"hsl(":"hsla("}${os(this.h)}, ${wi(this.s)*100}%, ${wi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function os(e){return e=(e||0)%360,e<0?e+360:e}function wi(e){return Math.max(0,Math.min(1,e||0))}function En(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}function In(e,t,i,n,r){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*i+(1+3*e+3*o-3*s)*n+s*r)/6}function ls(e){var t=e.length-1;return function(i){var n=i<=0?i=0:i>=1?(i=1,t-1):Math.floor(i*t),r=e[n],o=e[n+1],s=n>0?e[n-1]:2*r-o,a=n<t-1?e[n+2]:2*o-r;return In((i-n/t)*t,s,r,o,a)}}function cs(e){var t=e.length;return function(i){var n=Math.floor(((i%=1)<0?++i:i)*t),r=e[(n+t-1)%t],o=e[n%t],s=e[(n+1)%t],a=e[(n+2)%t];return In((i-n/t)*t,r,o,s,a)}}var ke=e=>()=>e;function Xl(e,t){return function(i){return e+i*t}}function Yl(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(n){return Math.pow(e+n*t,i)}}function us(e){return(e=+e)==1?Di:function(t,i){return i-t?Yl(t,i,e):ke(isNaN(t)?i:t)}}function Di(e,t){var i=t-e;return i?Xl(e,i):ke(isNaN(e)?t:e)}var Gt=function e(t){var i=us(t);function n(r,o){var s=i((r=fe(r)).r,(o=fe(o)).r),a=i(r.g,o.g),l=i(r.b,o.b),c=Di(r.opacity,o.opacity);return function(u){return r.r=s(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return n.gamma=e,n}(1);function fs(e){return function(t){var i=t.length,n=new Array(i),r=new Array(i),o=new Array(i),s,a;for(s=0;s<i;++s)a=fe(t[s]),n[s]=a.r||0,r[s]=a.g||0,o[s]=a.b||0;return n=e(n),r=e(r),o=e(o),a.opacity=1,function(l){return a.r=n(l),a.g=r(l),a.b=o(l),a+""}}}var Zl=fs(ls),Ql=fs(cs);function hs(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,n=t.slice(),r;return function(o){for(r=0;r<i;++r)n[r]=e[r]*(1-o)+t[r]*o;return n}}function ds(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ps(e,t){var i=t?t.length:0,n=e?Math.min(i,e.length):0,r=new Array(n),o=new Array(i),s;for(s=0;s<n;++s)r[s]=Rt(e[s],t[s]);for(;s<i;++s)o[s]=t[s];return function(a){for(s=0;s<n;++s)o[s]=r[s](a);return o}}function ms(e,t){var i=new Date;return e=+e,t=+t,function(n){return i.setTime(e*(1-n)+t*n),i}}function H(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function gs(e,t){var i={},n={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?i[r]=Rt(e[r],t[r]):n[r]=t[r];return function(o){for(r in i)n[r]=i[r](o);return n}}var Pn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kn=new RegExp(Pn.source,"g");function Kl(e){return function(){return e}}function Jl(e){return function(t){return e(t)+""}}function Pe(e,t){var i=Pn.lastIndex=kn.lastIndex=0,n,r,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(n=Pn.exec(e))&&(r=kn.exec(t));)(o=r.index)>i&&(o=t.slice(i,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:H(n,r)})),i=kn.lastIndex;return i<t.length&&(o=t.slice(i),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Jl(l[0].x):Kl(t):(t=l.length,function(c){for(var u=0,h;u<t;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}function Rt(e,t){var i=typeof t,n;return t==null||i==="boolean"?ke(t):(i==="number"?H:i==="string"?(n=at(t))?(t=n,Gt):Pe:t instanceof at?Gt:t instanceof Date?ms:ds(t)?hs:Array.isArray(t)?ps:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?gs:H)(e,t)}var _s=180/Math.PI,Ci={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Rn(e,t,i,n,r,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*i+t*n)&&(i-=e*l,n-=t*l),(a=Math.sqrt(i*i+n*n))&&(i/=a,n/=a,l/=a),e*n<t*i&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*_s,skewX:Math.atan(l)*_s,scaleX:s,scaleY:a}}var Ti;function xs(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ci:Rn(t.a,t.b,t.c,t.d,t.e,t.f)}function vs(e){return e==null?Ci:(Ti||(Ti=document.createElementNS("http://www.w3.org/2000/svg","g")),Ti.setAttribute("transform",e),(e=Ti.transform.baseVal.consolidate())?(e=e.matrix,Rn(e.a,e.b,e.c,e.d,e.e,e.f)):Ci)}function ys(e,t,i,n){function r(c){return c.length?c.pop()+" ":""}function o(c,u,h,f,d,g){if(c!==h||u!==f){var x=d.push("translate(",null,t,null,i);g.push({i:x-4,x:H(c,h)},{i:x-2,x:H(u,f)})}else(h||f)&&d.push("translate("+h+t+f+i)}function s(c,u,h,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:h.push(r(h)+"rotate(",null,n)-2,x:H(c,u)})):u&&h.push(r(h)+"rotate("+u+n)}function a(c,u,h,f){c!==u?f.push({i:h.push(r(h)+"skewX(",null,n)-2,x:H(c,u)}):u&&h.push(r(h)+"skewX("+u+n)}function l(c,u,h,f,d,g){if(c!==h||u!==f){var x=d.push(r(d)+"scale(",null,",",null,")");g.push({i:x-4,x:H(c,h)},{i:x-2,x:H(u,f)})}else(h!==1||f!==1)&&d.push(r(d)+"scale("+h+","+f+")")}return function(c,u){var h=[],f=[];return c=e(c),u=e(u),o(c.translateX,c.translateY,u.translateX,u.translateY,h,f),s(c.rotate,u.rotate,h,f),a(c.skewX,u.skewX,h,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,f),c=u=null,function(d){for(var g=-1,x=f.length,y;++g<x;)h[(y=f[g]).i]=y.x(d);return h.join("")}}}var An=ys(xs,"px, ","px)","deg)"),Mn=ys(vs,", ",")",")");var he=0,Ae=0,Re=0,bs=1e3,Ei,Me,Ii=0,jt=0,ki=0,Oe=typeof performance=="object"&&performance.now?performance:Date,Ss=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Le(){return jt||(Ss(tc),jt=Oe.now()+ki)}function tc(){jt=0}function Ne(){this._call=this._time=this._next=null}Ne.prototype=Pi.prototype={constructor:Ne,restart:function(e,t,i){if(typeof e!="function")throw new TypeError("callback is not a function");i=(i==null?Le():+i)+(t==null?0:+t),!this._next&&Me!==this&&(Me?Me._next=this:Ei=this,Me=this),this._call=e,this._time=i,On()},stop:function(){this._call&&(this._call=null,this._time=1/0,On())}};function Pi(e,t,i){var n=new Ne;return n.restart(e,t,i),n}function Ds(){Le(),++he;for(var e=Ei,t;e;)(t=jt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--he}function ws(){jt=(Ii=Oe.now())+ki,he=Ae=0;try{Ds()}finally{he=0,ic(),jt=0}}function ec(){var e=Oe.now(),t=e-Ii;t>bs&&(ki-=t,Ii=e)}function ic(){for(var e,t=Ei,i,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(i=t._next,t._next=null,t=e?e._next=i:Ei=i);Me=e,On(n)}function On(e){if(!he){Ae&&(Ae=clearTimeout(Ae));var t=e-jt;t>24?(e<1/0&&(Ae=setTimeout(ws,e-Oe.now()-ki)),Re&&(Re=clearInterval(Re))):(Re||(Ii=Oe.now(),Re=setInterval(ec,bs)),he=1,Ss(ws))}}function Ri(e,t,i){var n=new Ne;return t=t==null?0:+t,n.restart(r=>{n.stop(),e(r+t)},t,i),n}var nc=wn("start","end","cancel","interrupt"),rc=[],Es=0,Cs=1,Mi=2,Ai=3,Ts=4,Oi=5,Fe=6;function At(e,t,i,n,r,o){var s=e.__transition;if(!s)e.__transition={};else if(i in s)return;oc(e,i,{name:t,index:n,group:r,on:nc,tween:rc,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Es})}function $e(e,t){var i=L(e,t);if(i.state>Es)throw new Error("too late; already scheduled");return i}function $(e,t){var i=L(e,t);if(i.state>Ai)throw new Error("too late; already running");return i}function L(e,t){var i=e.__transition;if(!i||!(i=i[t]))throw new Error("transition not found");return i}function oc(e,t,i){var n=e.__transition,r;n[t]=i,i.timer=Pi(o,0,i.time);function o(c){i.state=Cs,i.timer.restart(s,i.delay,i.time),i.delay<=c&&s(c-i.delay)}function s(c){var u,h,f,d;if(i.state!==Cs)return l();for(u in n)if(d=n[u],d.name===i.name){if(d.state===Ai)return Ri(s);d.state===Ts?(d.state=Fe,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete n[u]):+u<t&&(d.state=Fe,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete n[u])}if(Ri(function(){i.state===Ai&&(i.state=Ts,i.timer.restart(a,i.delay,i.time),a(c))}),i.state=Mi,i.on.call("start",e,e.__data__,i.index,i.group),i.state===Mi){for(i.state=Ai,r=new Array(f=i.tween.length),u=0,h=-1;u<f;++u)(d=i.tween[u].value.call(e,e.__data__,i.index,i.group))&&(r[++h]=d);r.length=h+1}}function a(c){for(var u=c<i.duration?i.ease.call(null,c/i.duration):(i.timer.restart(l),i.state=Oi,1),h=-1,f=r.length;++h<f;)r[h].call(e,u);i.state===Oi&&(i.on.call("end",e,e.__data__,i.index,i.group),l())}function l(){i.state=Fe,i.timer.stop(),delete n[t];for(var c in n)return;delete e.__transition}}function Ni(e,t){var i=e.__transition,n,r,o=!0,s;if(i){t=t==null?null:t+"";for(s in i){if((n=i[s]).name!==t){o=!1;continue}r=n.state>Mi&&n.state<Oi,n.state=Fe,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[s]}o&&delete e.__transition}}function Is(e){return this.each(function(){Ni(this,e)})}function sc(e,t){var i,n;return function(){var r=$(this,e),o=r.tween;if(o!==i){n=i=o;for(var s=0,a=n.length;s<a;++s)if(n[s].name===t){n=n.slice(),n.splice(s,1);break}}r.tween=n}}function ac(e,t,i){var n,r;if(typeof i!="function")throw new Error;return function(){var o=$(this,e),s=o.tween;if(s!==n){r=(n=s).slice();for(var a={name:t,value:i},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}o.tween=r}}function ks(e,t){var i=this._id;if(e+="",arguments.length<2){for(var n=L(this.node(),i).tween,r=0,o=n.length,s;r<o;++r)if((s=n[r]).name===e)return s.value;return null}return this.each((t==null?sc:ac)(i,e,t))}function de(e,t,i){var n=e._id;return e.each(function(){var r=$(this,n);(r.value||(r.value={}))[t]=i.apply(this,arguments)}),function(r){return L(r,n).value[t]}}function Li(e,t){var i;return(typeof t=="number"?H:t instanceof at?Gt:(i=at(t))?(t=i,Gt):Pe)(e,t)}function lc(e){return function(){this.removeAttribute(e)}}function cc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function uc(e,t,i){var n,r=i+"",o;return function(){var s=this.getAttribute(e);return s===r?null:s===n?o:o=t(n=s,i)}}function fc(e,t,i){var n,r=i+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===n?o:o=t(n=s,i)}}function hc(e,t,i){var n,r,o;return function(){var s,a=i(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===n&&l===r?o:(r=l,o=t(n=s,a)))}}function dc(e,t,i){var n,r,o;return function(){var s,a=i(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===n&&l===r?o:(r=l,o=t(n=s,a)))}}function Ps(e,t){var i=_t(e),n=i==="transform"?Mn:Li;return this.attrTween(e,typeof t=="function"?(i.local?dc:hc)(i,n,de(this,"attr."+e,t)):t==null?(i.local?cc:lc)(i):(i.local?fc:uc)(i,n,t))}function pc(e,t){return function(i){this.setAttribute(e,t.call(this,i))}}function mc(e,t){return function(i){this.setAttributeNS(e.space,e.local,t.call(this,i))}}function gc(e,t){var i,n;function r(){var o=t.apply(this,arguments);return o!==n&&(i=(n=o)&&mc(e,o)),i}return r._value=t,r}function _c(e,t){var i,n;function r(){var o=t.apply(this,arguments);return o!==n&&(i=(n=o)&&pc(e,o)),i}return r._value=t,r}function Rs(e,t){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;var n=_t(e);return this.tween(i,(n.local?gc:_c)(n,t))}function xc(e,t){return function(){$e(this,e).delay=+t.apply(this,arguments)}}function vc(e,t){return t=+t,function(){$e(this,e).delay=t}}function As(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xc:vc)(t,e)):L(this.node(),t).delay}function yc(e,t){return function(){$(this,e).duration=+t.apply(this,arguments)}}function wc(e,t){return t=+t,function(){$(this,e).duration=t}}function Ms(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yc:wc)(t,e)):L(this.node(),t).duration}function bc(e,t){if(typeof t!="function")throw new Error;return function(){$(this,e).ease=t}}function Os(e){var t=this._id;return arguments.length?this.each(bc(t,e)):L(this.node(),t).ease}function Sc(e,t){return function(){var i=t.apply(this,arguments);if(typeof i!="function")throw new Error;$(this,e).ease=i}}function Ns(e){if(typeof e!="function")throw new Error;return this.each(Sc(this._id,e))}function Ls(e){typeof e!="function"&&(e=De(e));for(var t=this._groups,i=t.length,n=new Array(i),r=0;r<i;++r)for(var o=t[r],s=o.length,a=n[r]=[],l,c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new q(n,this._parents,this._name,this._id)}function Fs(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,i=e._groups,n=t.length,r=i.length,o=Math.min(n,r),s=new Array(n),a=0;a<o;++a)for(var l=t[a],c=i[a],u=l.length,h=s[a]=new Array(u),f,d=0;d<u;++d)(f=l[d]||c[d])&&(h[d]=f);for(;a<n;++a)s[a]=t[a];return new q(s,this._parents,this._name,this._id)}function Dc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||t==="start"})}function Cc(e,t,i){var n,r,o=Dc(t)?$e:$;return function(){var s=o(this,e),a=s.on;a!==n&&(r=(n=a).copy()).on(t,i),s.on=r}}function $s(e,t){var i=this._id;return arguments.length<2?L(this.node(),i).on.on(e):this.each(Cc(i,e,t))}function Tc(e){return function(){var t=this.parentNode;for(var i in this.__transition)if(+i!==e)return;t&&t.removeChild(this)}}function Bs(){return this.on("end.remove",Tc(this._id))}function zs(e){var t=this._name,i=this._id;typeof e!="function"&&(e=Vt(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var a=n[s],l=a.length,c=o[s]=new Array(l),u,h,f=0;f<l;++f)(u=a[f])&&(h=e.call(u,u.__data__,f,a))&&("__data__"in u&&(h.__data__=u.__data__),c[f]=h,At(c[f],t,i,f,c,L(u,i)));return new q(o,this._parents,t,i)}function Vs(e){var t=this._name,i=this._id;typeof e!="function"&&(e=Se(e));for(var n=this._groups,r=n.length,o=[],s=[],a=0;a<r;++a)for(var l=n[a],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var f=e.call(u,u.__data__,h,l),d,g=L(u,i),x=0,y=f.length;x<y;++x)(d=f[x])&&At(d,t,i,x,f,g);o.push(f),s.push(u)}return new q(o,s,t,i)}var Ec=xt.prototype.constructor;function Hs(){return new Ec(this._groups,this._parents)}function Ic(e,t){var i,n,r;return function(){var o=Pt(this,e),s=(this.style.removeProperty(e),Pt(this,e));return o===s?null:o===i&&s===n?r:r=t(i=o,n=s)}}function qs(e){return function(){this.style.removeProperty(e)}}function kc(e,t,i){var n,r=i+"",o;return function(){var s=Pt(this,e);return s===r?null:s===n?o:o=t(n=s,i)}}function Pc(e,t,i){var n,r,o;return function(){var s=Pt(this,e),a=i(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Pt(this,e))),s===l?null:s===n&&l===r?o:(r=l,o=t(n=s,a))}}function Rc(e,t){var i,n,r,o="style."+t,s="end."+o,a;return function(){var l=$(this,e),c=l.on,u=l.value[o]==null?a||(a=qs(t)):void 0;(c!==i||r!==u)&&(n=(i=c).copy()).on(s,r=u),l.on=n}}function Gs(e,t,i){var n=(e+="")=="transform"?An:Li;return t==null?this.styleTween(e,Ic(e,n)).on("end.style."+e,qs(e)):typeof t=="function"?this.styleTween(e,Pc(e,n,de(this,"style."+e,t))).each(Rc(this._id,e)):this.styleTween(e,kc(e,n,t),i).on("end.style."+e,null)}function Ac(e,t,i){return function(n){this.style.setProperty(e,t.call(this,n),i)}}function Mc(e,t,i){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Ac(e,s,i)),n}return o._value=t,o}function js(e,t,i){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Mc(e,t,i??""))}function Oc(e){return function(){this.textContent=e}}function Nc(e){return function(){var t=e(this);this.textContent=t??""}}function Us(e){return this.tween("text",typeof e=="function"?Nc(de(this,"text",e)):Oc(e==null?"":e+""))}function Lc(e){return function(t){this.textContent=e.call(this,t)}}function Fc(e){var t,i;function n(){var r=e.apply(this,arguments);return r!==i&&(t=(i=r)&&Lc(r)),t}return n._value=e,n}function Ws(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Fc(e))}function Xs(){for(var e=this._name,t=this._id,i=Fi(),n=this._groups,r=n.length,o=0;o<r;++o)for(var s=n[o],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var u=L(l,t);At(l,e,i,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new q(n,this._parents,e,i)}function Ys(){var e,t,i=this,n=i._id,r=i.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--r===0&&o()}};i.each(function(){var c=$(this,n),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),r===0&&o()})}var $c=0;function q(e,t,i,n){this._groups=e,this._parents=t,this._name=i,this._id=n}function Zs(e){return xt().transition(e)}function Fi(){return++$c}var vt=xt.prototype;q.prototype=Zs.prototype={constructor:q,select:zs,selectAll:Vs,selectChild:vt.selectChild,selectChildren:vt.selectChildren,filter:Ls,merge:Fs,selection:Hs,transition:Xs,call:vt.call,nodes:vt.nodes,node:vt.node,size:vt.size,empty:vt.empty,each:vt.each,on:$s,attr:Ps,attrTween:Rs,style:Gs,styleTween:js,text:Us,textTween:Ws,remove:Bs,tween:ks,delay:As,duration:Ms,ease:Os,easeVarying:Ns,end:Ys,[Symbol.iterator]:vt[Symbol.iterator]};function $i(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Bc={time:null,delay:0,duration:250,ease:$i};function zc(e,t){for(var i;!(i=e.__transition)||!(i=i[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return i}function Qs(e){var t,i;e instanceof q?(t=e._id,e=e._name):(t=Fi(),(i=Bc).time=Le(),e=e==null?null:e+"");for(var n=this._groups,r=n.length,o=0;o<r;++o)for(var s=n[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&At(l,e,t,c,s,i||zc(l,t));return new q(n,this._parents,e,t)}xt.prototype.interrupt=Is;xt.prototype.transition=Qs;var{abs:bg,max:Sg,min:Dg}=Math;function Ks(e){return[+e[0],+e[1]]}function Vc(e){return[Ks(e[0]),Ks(e[1])]}var Cg={name:"x",handles:["w","e"].map(Nn),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Tg={name:"y",handles:["n","s"].map(Nn),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Eg={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Nn),input:function(e){return e==null?null:Vc(e)},output:function(e){return e}};function Nn(e){return{type:e}}var Ln=Math.PI,Fn=2*Ln,Ut=1e-6,Hc=Fn-Ut;function Js(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=arguments[t]+e[t]}function qc(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Js;let i=10**t;return function(n){this._+=n[0];for(let r=1,o=n.length;r<o;++r)this._+=Math.round(arguments[r]*i)/i+n[r]}}var Wt=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Js:qc(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,n,r){this._append`Q${+t},${+i},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,i,n,r,o,s){this._append`C${+t},${+i},${+n},${+r},${this._x1=+o},${this._y1=+s}`}arcTo(t,i,n,r,o){if(t=+t,i=+i,n=+n,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=n-t,c=r-i,u=s-t,h=a-i,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(f>Ut)if(!(Math.abs(h*l-c*u)>Ut)||!o)this._append`L${this._x1=t},${this._y1=i}`;else{let d=n-s,g=r-a,x=l*l+c*c,y=d*d+g*g,D=Math.sqrt(x),T=Math.sqrt(f),C=o*Math.tan((Ln-Math.acos((x+f-y)/(2*D*T)))/2),_=C/T,k=C/D;Math.abs(_-1)>Ut&&this._append`L${t+_*u},${i+_*h}`,this._append`A${o},${o},0,0,${+(h*d>u*g)},${this._x1=t+k*l},${this._y1=i+k*c}`}}arc(t,i,n,r,o,s){if(t=+t,i=+i,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),l=n*Math.sin(r),c=t+a,u=i+l,h=1^s,f=s?r-o:o-r;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Ut||Math.abs(this._y1-u)>Ut)&&this._append`L${c},${u}`,n&&(f<0&&(f=f%Fn+Fn),f>Hc?this._append`A${n},${n},0,1,${h},${t-a},${i-l}A${n},${n},0,1,${h},${this._x1=c},${this._y1=u}`:f>Ut&&this._append`A${n},${n},0,${+(f>=Ln)},${h},${this._x1=t+n*Math.cos(o)},${this._y1=i+n*Math.sin(o)}`)}rect(t,i,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}};function ta(){return new Wt}ta.prototype=Wt.prototype;function ea(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}var $n=Symbol("implicit");function Be(){var e=new ce,t=[],i=[],n=$n;function r(o){let s=e.get(o);if(s===void 0){if(n!==$n)return n;e.set(o,s=t.push(o)-1)}return i[s%i.length]}return r.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new ce;for(let s of o)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(o){return arguments.length?(i=Array.from(o),r):i.slice()},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return Be(t,i).unknown(n)},ea.apply(r,arguments),r}function B(e){return function(){return e}}var Bn=Math.abs,z=Math.atan2,Mt=Math.cos,ia=Math.max,Bi=Math.min,lt=Math.sin,Xt=Math.sqrt,G=1e-12,pe=Math.PI,ze=pe/2,me=2*pe;function na(e){return e>1?0:e<-1?pe:Math.acos(e)}function zn(e){return e>=1?ze:e<=-1?-ze:Math.asin(e)}function ra(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{let n=Math.floor(i);if(!(n>=0))throw new RangeError(`invalid digits: ${i}`);t=n}return e},()=>new Wt(t)}function Gc(e){return e.innerRadius}function jc(e){return e.outerRadius}function Uc(e){return e.startAngle}function Wc(e){return e.endAngle}function Xc(e){return e&&e.padAngle}function Yc(e,t,i,n,r,o,s,a){var l=i-e,c=n-t,u=s-r,h=a-o,f=h*l-u*c;if(!(f*f<G))return f=(u*(t-o)-h*(e-r))/f,[e+f*l,t+f*c]}function zi(e,t,i,n,r,o,s){var a=e-i,l=t-n,c=(s?o:-o)/Xt(a*a+l*l),u=c*l,h=-c*a,f=e+u,d=t+h,g=i+u,x=n+h,y=(f+g)/2,D=(d+x)/2,T=g-f,C=x-d,_=T*T+C*C,k=r-o,O=f*x-g*d,Y=(C<0?-1:1)*Xt(ia(0,k*k*_-O*O)),yt=(O*C-T*Y)/_,wt=(-O*T-C*Y)/_,ct=(O*C+T*Y)/_,Z=(-O*T+C*Y)/_,Q=yt-y,w=wt-D,E=ct-y,Lt=Z-D;return Q*Q+w*w>E*E+Lt*Lt&&(yt=ct,wt=Z),{cx:yt,cy:wt,x01:-u,y01:-h,x11:yt*(r/k-1),y11:wt*(r/k-1)}}function Vi(){var e=Gc,t=jc,i=B(0),n=null,r=Uc,o=Wc,s=Xc,a=null,l=ra(c);function c(){var u,h,f=+e.apply(this,arguments),d=+t.apply(this,arguments),g=r.apply(this,arguments)-ze,x=o.apply(this,arguments)-ze,y=Bn(x-g),D=x>g;if(a||(a=u=l()),d<f&&(h=d,d=f,f=h),!(d>G))a.moveTo(0,0);else if(y>me-G)a.moveTo(d*Mt(g),d*lt(g)),a.arc(0,0,d,g,x,!D),f>G&&(a.moveTo(f*Mt(x),f*lt(x)),a.arc(0,0,f,x,g,D));else{var T=g,C=x,_=g,k=x,O=y,Y=y,yt=s.apply(this,arguments)/2,wt=yt>G&&(n?+n.apply(this,arguments):Xt(f*f+d*d)),ct=Bi(Bn(d-f)/2,+i.apply(this,arguments)),Z=ct,Q=ct,w,E;if(wt>G){var Lt=zn(wt/f*lt(yt)),He=zn(wt/d*lt(yt));(O-=Lt*2)>G?(Lt*=D?1:-1,_+=Lt,k-=Lt):(O=0,_=k=(g+x)/2),(Y-=He*2)>G?(He*=D?1:-1,T+=He,C-=He):(Y=0,T=C=(g+x)/2)}var Yt=d*Mt(T),Zt=d*lt(T),qe=f*Mt(k),Ge=f*lt(k);if(ct>G){var je=d*Mt(C),Ue=d*lt(C),Gi=f*Mt(_),ji=f*lt(_),ht;if(y<pe)if(ht=Yc(Yt,Zt,Gi,ji,je,Ue,qe,Ge)){var Ui=Yt-ht[0],Wi=Zt-ht[1],Xi=je-ht[0],Yi=Ue-ht[1],qn=1/lt(na((Ui*Xi+Wi*Yi)/(Xt(Ui*Ui+Wi*Wi)*Xt(Xi*Xi+Yi*Yi)))/2),Gn=Xt(ht[0]*ht[0]+ht[1]*ht[1]);Z=Bi(ct,(f-Gn)/(qn-1)),Q=Bi(ct,(d-Gn)/(qn+1))}else Z=Q=0}Y>G?Q>G?(w=zi(Gi,ji,Yt,Zt,d,Q,D),E=zi(je,Ue,qe,Ge,d,Q,D),a.moveTo(w.cx+w.x01,w.cy+w.y01),Q<ct?a.arc(w.cx,w.cy,Q,z(w.y01,w.x01),z(E.y01,E.x01),!D):(a.arc(w.cx,w.cy,Q,z(w.y01,w.x01),z(w.y11,w.x11),!D),a.arc(0,0,d,z(w.cy+w.y11,w.cx+w.x11),z(E.cy+E.y11,E.cx+E.x11),!D),a.arc(E.cx,E.cy,Q,z(E.y11,E.x11),z(E.y01,E.x01),!D))):(a.moveTo(Yt,Zt),a.arc(0,0,d,T,C,!D)):a.moveTo(Yt,Zt),!(f>G)||!(O>G)?a.lineTo(qe,Ge):Z>G?(w=zi(qe,Ge,je,Ue,f,-Z,D),E=zi(Yt,Zt,Gi,ji,f,-Z,D),a.lineTo(w.cx+w.x01,w.cy+w.y01),Z<ct?a.arc(w.cx,w.cy,Z,z(w.y01,w.x01),z(E.y01,E.x01),!D):(a.arc(w.cx,w.cy,Z,z(w.y01,w.x01),z(w.y11,w.x11),!D),a.arc(0,0,f,z(w.cy+w.y11,w.cx+w.x11),z(E.cy+E.y11,E.cx+E.x11),D),a.arc(E.cx,E.cy,Z,z(E.y11,E.x11),z(E.y01,E.x01),!D))):a.arc(0,0,f,k,_,D)}if(a.closePath(),u)return a=null,u+""||null}return c.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-pe/2;return[Mt(h)*u,lt(h)*u]},c.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:B(+u),c):e},c.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:B(+u),c):t},c.cornerRadius=function(u){return arguments.length?(i=typeof u=="function"?u:B(+u),c):i},c.padRadius=function(u){return arguments.length?(n=u==null?null:typeof u=="function"?u:B(+u),c):n},c.startAngle=function(u){return arguments.length?(r=typeof u=="function"?u:B(+u),c):r},c.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:B(+u),c):o},c.padAngle=function(u){return arguments.length?(s=typeof u=="function"?u:B(+u),c):s},c.context=function(u){return arguments.length?(a=u??null,c):a},c}var Jg=Array.prototype.slice;function oa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sa(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function aa(e){return e}function Hi(){var e=aa,t=sa,i=null,n=B(0),r=B(me),o=B(0);function s(a){var l,c=(a=oa(a)).length,u,h,f=0,d=new Array(c),g=new Array(c),x=+n.apply(this,arguments),y=Math.min(me,Math.max(-me,r.apply(this,arguments)-x)),D,T=Math.min(Math.abs(y)/c,o.apply(this,arguments)),C=T*(y<0?-1:1),_;for(l=0;l<c;++l)(_=g[d[l]=l]=+e(a[l],l,a))>0&&(f+=_);for(t!=null?d.sort(function(k,O){return t(g[k],g[O])}):i!=null&&d.sort(function(k,O){return i(a[k],a[O])}),l=0,h=f?(y-c*C)/f:0;l<c;++l,x=D)u=d[l],_=g[u],D=x+(_>0?_*h:0)+C,g[u]={data:a[u],index:l,value:_,startAngle:x,endAngle:D,padAngle:T};return g}return s.value=function(a){return arguments.length?(e=typeof a=="function"?a:B(+a),s):e},s.sortValues=function(a){return arguments.length?(t=a,i=null,s):t},s.sort=function(a){return arguments.length?(i=a,t=null,s):i},s.startAngle=function(a){return arguments.length?(n=typeof a=="function"?a:B(+a),s):n},s.endAngle=function(a){return arguments.length?(r=typeof a=="function"?a:B(+a),s):r},s.padAngle=function(a){return arguments.length?(o=typeof a=="function"?a:B(+a),s):o},s}function Ot(e,t,i){this.k=e,this.x=t,this.y=i}Ot.prototype={constructor:Ot,scale:function(e){return e===1?this:new Ot(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ot(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Vn=new Ot(1,0,0);Hn.prototype=Ot.prototype;function Hn(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Vn;return e.__zoom}var la=(()=>{let t=class t{set pieChartItems(n){this.pieChartItemsSubject.next(n)}constructor(){this.onEmitPieChartWithColorItems=new X,this.pieChartItemsSubject=new R}ngOnInit(){this.pieChartItemsSubject.subscribe(n=>{this.init(),this.drawChart(n)})}init(){xi("#pieChart > svg").remove();let n=window.innerWidth,r=window.innerWidth;this.svg=xi("#pieChart").append("svg").attr("width",n).attr("height",r).append("g"),this.svg.append("g").attr("class","pies"),this.svg.append("g").attr("class","slices"),this.svg.append("g").attr("class","labels"),this.svg.append("g").attr("class","lines"),this.svg.append("g").attr("class","centerText"),this.svg.attr("transform",`translate(${n/2}, ${r/2})`)}drawChart(n){let r=window.innerWidth,o=window.innerWidth,s=Math.min(r,o)/2,a=this.enhanceArrayWithBackgroundColor(n);this.onEmitPieChartWithColorItems.emit(a);let l=Be().domain(a.map(_=>_.label)).range(a.map(_=>_.backgroundColor)),c=()=>n,u=Hi().padAngle(.07).sort(null).value(_=>_.value),h=Hi().sort(null).value(_=>_.value),f=Vi().outerRadius(s*.9).innerRadius(s*.4),d=Vi().outerRadius(s*.8).innerRadius(s*.8),g=c(),x=_=>_.data.label,y=this.svg.select(".pies").selectAll("path.pie").data(h(g),x),D=this.svg.select(".slices").selectAll("path.slice").data(u(g),x);y.enter().insert("path").style("fill","rgb(209 213 219 / var(--tw-bg-opacity))").attr("class","slice").style("stroke","rgb(209 213 219 / var(--tw-bg-opacity))").style("stroke-width",2).transition().duration(1e3).attrTween("d",function(_){let k=_,O=Rt(k,_);return k=O(0),function(Y){return f(O(Y))}}),D.enter().insert("path").style("fill",function(_){return l(_.data.label)}).style("stroke","white").style("stroke-width",2).attr("class","slice").transition().duration(1e3).attrTween("d",function(_){let k=_,O=Rt(k,_);return k=O(0),function(Y){return f(O(Y))}}),D.enter().insert("text").text(_=>`${_.index}`).attr("transform",_=>"translate("+f.centroid(_)+")").style("text-anchor","middle").style("font-size",17);let T=this.svg.select(".centerText"),C=n.reduce((_,k)=>_+k.value,0);T.insert("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform","translate(0,0)").style("fill","white").style("font-size","2em").text(`$ ${C}`)}enhanceArrayWithBackgroundColor(n){let r=190,o=60,s=55;return n.map(a=>{r=(r+35)%360;let l=`hsl(${r}, ${o}%, ${s}%)`;return Kt(Qt({},a),{backgroundColor:l})})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=K({type:t,selectors:[["app-pie-chart"]],inputs:{pieChartItems:"pieChartItems"},outputs:{onEmitPieChartWithColorItems:"onEmitPieChartWithColorItems"},standalone:!0,features:[et],decls:1,vars:0,consts:[["id","pieChart",1,"flex","justify-center"]],template:function(r,o){r&1&&P(0,"div",0)},styles:["[_nghost-%COMP%]{display:block}"]});let e=t;return e})();var Qc=["rangeInput"],Kc=["groupItemsRef"];function Jc(e,t){e&1&&(p(0,"mat-error"),v(1,"\u8ACB\u9078\u64C7\u65E5\u671F"),m())}var tu=e=>({color:e});function eu(e,t){if(e&1){let i=nt();p(0,"div",22),I("click",function(){let o=J(i).$implicit,s=F();return tt(s.onClickTagGroup(o.tagName,o.items))}),p(1,"span",23)(2,"div",24),v(3),m(),p(4,"div"),v(5),m()(),p(6,"span",25),v(7),m(),p(8,"span",26),v(9),m()()}if(e&2){let i=t.$implicit,n=t.$index;N("ngStyle",ot(5,tu,i.backgroundColor)),S(3),on(n),S(2),on(i.tagName),S(2),rt(" ",i.percent,""),S(2),rt("$ ",i.price,"")}}function iu(e,t){if(e&1&&(p(0,"div",28)(1,"span",29),v(2),m(),p(3,"span",29),v(4),m(),p(5,"span",30),v(6),m()()),e&2){let i=t.$implicit,n=F(2);S(2),rt(" ",n.dayjs(i.date.toDate()).format("MM/DD")," "),S(2),rt("$ ",i.price,""),S(2),rt(" ",i.description,"")}}function nu(e,t){if(e&1&&(p(0,"div",27),dt(1,iu,7,3,"div",31,_e),m()),e&2){let i=F();S(),pt(i.groupItems)}}var ru=e=>({selectedTab:e}),ou=e=>({selectedTab:e}),Nt,qi=(Nt=class{get DateTabsEnum(){return le}get dayjs(){return Ve.default}constructor(t,i,n,r){this.router=t,this.ledgerService=i,this.loaderService=n,this.modalService=r,this.range=new hr({start:new fn(null,[un.required]),end:new fn(null,[un.required])}),this.dateTab=le.Range_TAB,this.rangeGroupList=[],this.pieChartItems=[],this.rangeList=[],this.totalPriceText="",this.groupItems=[];let o=this.router?.getCurrentNavigation()?.extras.state?.date||new Date;o?(this.previousDate=o,this.setRange(),this.getRangeItems()):this.dateTab=le.CUSTOM_TAB}ngOnInit(){}onDateChange(){this.range.valid&&this.getRangeItems()}setRange(){let t=parseInt(localStorage.getItem("selectedDate")||"0"),i=(0,Ve.default)(this.previousDate),n,r;i.date()>=t?(n=i.date(t),r=i.add(1,"month").date(t).subtract(1,"day")):(n=i.subtract(1,"month").date(t),r=i.date(t).subtract(1,"day")),this.range.setValue({start:n.toDate(),end:r.toDate()})}onSwipeLeft(){this.previousDate=(0,Ve.default)(this.previousDate).add(1,"month").toDate(),this.setRange(),this.onDateChange()}onSwipeRight(){this.previousDate=(0,Ve.default)(this.previousDate).subtract(1,"month").toDate(),this.setRange(),this.onDateChange()}onClickBack(){this.router.navigateByUrl("/")}onClickTab(t){this.dateTab=t,t===le.Range_TAB&&this.setRange()}getRangeItems(){let t=this.range.getRawValue().start,i=this.range.getRawValue().end;t&&i&&(this.loaderService.start(),this.ledgerService.getRangeItems(t,i).pipe(Ft(1),ni(this)).subscribe(n=>{this.loaderService.stop();let r=n.reduce((o,s)=>{if(o.find(l=>l.tagId===s.tagId)){let l=o.findIndex(c=>c.tagId===s.tagId);o[l].price+=parseInt(s.price),o[l].items.push(s),o[l].items.sort((c,u)=>c.date.seconds-u.date.seconds)}else{let l={tagId:s.tagId,price:parseInt(s.price),tagName:s.tagInfo.tagName,items:[s]};o.push(l)}return o},[]).sort((o,s)=>s.price-o.price);this.rangeGroupList=r,this.totalPriceText=`$ ${r.reduce((o,s)=>o+s.price,0)}`,this.pieChartItems=r.map(o=>({id:o.tagId,label:o.tagName,value:o.price}))}))}setLedgerList(t){let i=t.reduce((n,r)=>n+r.value,0);this.rangeList=this.rangeGroupList.map(n=>Kt(Qt({},n),{backgroundColor:t.find(r=>r.id===n.tagId)?.backgroundColor||"",percent:`${(n.price/i*100).toFixed(2)}%`}))}onClickTagGroup(t,i){this.groupItems=i.sort((n,r)=>n.date.seconds-r.date.seconds),this.modalService.openConfirm({title:t,okText:"\u78BA\u8A8D",outsideClose:!1,showCancelBtn:!1,fullScreen:!0,contentTemplateRef:this.groupItemsRef})}},Nt.\u0275fac=function(i){return new(i||Nt)(b(Dt),b(Et),b(ee),b(ie))},Nt.\u0275cmp=K({type:Nt,selectors:[["app-statistics-charts"]],viewQuery:function(i,n){if(i&1&&(xe(Qc,5),xe(Kc,5)),i&2){let r;mt(r=gt())&&(n.rangeInput=r.first),mt(r=gt())&&(n.groupItemsRef=r.first)}},standalone:!0,features:[et],decls:34,vars:12,consts:[[1,"bg-gray-800","text-white","min-h-dvh"],[1,"sticky","top-0","bg-gray-800"],[1,"py-4"],[1,"flex","justify-between","items-center","px-4","mb-4"],[1,"text-white",3,"click"],[1,"fas","fa-arrow-left"],[1,"w-full","text-center"],[3,"disabled","formGroup","rangePicker"],["rangeInput",""],["matStartDate","","formControlName","start","placeholder","\u8D77\u65E5"],["matEndDate","","formControlName","end","placeholder","\u8A16\u65E5"],["matIconSuffix","",3,"for"],["touchUi",""],["picker",""],["mat-button","","matDatepickerCancel","",1,"btn"],["mat-button","","matDatepickerApply","",1,"btn",3,"click"],[1,"flex","mb-4"],[1,"flex-grow","text-center","border-b-2","border-gray-300","py-2","text-lg","px-1",3,"ngClass","click"],[1,"wrapper",3,"swipeLeft","swipeRight"],[3,"pieChartItems","onEmitPieChartWithColorItems"],[1,"bg-gray-700","p-2","pb-10"],["groupItemsRef",""],[1,"text-xl","px-1","py-1","flex","justify-between",3,"ngStyle","click"],[1,"w-5/12","flex"],[1,"w-7","text-center"],[1,"w-2/12"],[1,"w-5/12","pr-1","flex","justify-end","400"],[1,"max-h-max","overflow-scroll"],[1,"text-xl","flex","justify-between","mb-1","pb-1","border-b","border-white"],[1,"flex-1"],[1,"flex-1","flex","justify-end"],["class","text-xl flex justify-between mb-1 pb-1 border-b border-white"],["class","text-xl px-1 py-1 flex justify-between",3,"ngStyle"]],template:function(i,n){if(i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1)(4,"div",3)(5,"button",4),I("click",function(){return n.onClickBack()}),P(6,"i",5),m()()()(),p(7,"div",6)(8,"mat-form-field")(9,"mat-date-range-input",7,8),P(11,"input",9)(12,"input",10),m(),P(13,"mat-datepicker-toggle",11),p(14,"mat-date-range-picker",12,13)(16,"mat-datepicker-actions")(17,"button",14),v(18,"\u53D6\u6D88"),m(),p(19,"button",15),I("click",function(){return n.onDateChange()}),v(20," \u78BA\u5B9A "),m()()(),ut(21,Jc,2,0,"mat-error"),m()(),p(22,"div",16)(23,"div",17),I("click",function(){return n.onClickTab(n.DateTabsEnum.Range_TAB)}),v(24," \u9031\u671F\u7D71\u8A08 "),m(),p(25,"div",17),I("click",function(){return n.onClickTab(n.DateTabsEnum.CUSTOM_TAB)}),v(26," \u81EA\u8A02\u5340\u9593 "),m()()(),p(27,"div",18),I("swipeLeft",function(){return n.onSwipeLeft()})("swipeRight",function(){return n.onSwipeRight()}),p(28,"app-pie-chart",19),I("onEmitPieChartWithColorItems",function(o){return n.setLedgerList(o)}),m()(),p(29,"div",20),dt(30,eu,10,7,"div",32,_e),m()(),ut(32,nu,3,0,"ng-template",null,21,Ke)),i&2){let r=Jn(15);S(9),N("disabled",n.dateTab===n.DateTabsEnum.Range_TAB)("formGroup",n.range)("rangePicker",r),S(4),N("for",r),S(8),zt(21,n.range.controls.start.hasError("required")||n.range.controls.end.hasError("required")?21:-1),S(2),N("ngClass",ot(8,ru,n.dateTab===n.DateTabsEnum.Range_TAB)),S(2),N("ngClass",ot(10,ou,n.dateTab===n.DateTabsEnum.CUSTOM_TAB)),S(3),N("pieChartItems",n.pieChartItems),S(2),pt(n.rangeList)}},dependencies:[Tt,St,tr,ne,re,fr,pr,mr,Ir,vr,_r,xr,yr,Sr,wr,br,Dr,Er,Tr,Cr,la],styles:["[_nghost-%COMP%]{display:block}.selectedTab[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(99 102 241 / var(--tw-border-opacity));--tw-text-opacity: 1;color:rgb(99 102 241 / var(--tw-text-opacity))}.btn[_ngcontent-%COMP%]{margin-right:.25rem;margin-top:2.5rem;flex-shrink:0;border-radius:.25rem;border-width:0px;--tw-bg-opacity: 1;background-color:rgb(99 102 241 / var(--tw-bg-opacity));padding:.5rem 1rem;font-size:1.125rem;line-height:1.75rem;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.btn[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(79 70 229 / var(--tw-bg-opacity))}.btn[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px}@media (min-width: 640px){.btn[_ngcontent-%COMP%]{margin-top:0}}.wrapper[_ngcontent-%COMP%]{overflow-y:auto;touch-action:pan-y!important}"]}),Nt);qi=te([oe()],qi);var R_=[{path:"",children:[{path:"",component:Pr},{path:"tagsManage",component:ui},{path:"addTag",component:fi,resolve:{data:oo}},{path:"budget",component:so},{path:"statisticsCharts",component:qi}]}];export{R_ as SETTING_ROUTES};
