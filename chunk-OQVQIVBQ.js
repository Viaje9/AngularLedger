var rV=Object.create;var ry=Object.defineProperty,sV=Object.defineProperties,oV=Object.getOwnPropertyDescriptor,aV=Object.getOwnPropertyDescriptors,cV=Object.getOwnPropertyNames,Fd=Object.getOwnPropertySymbols,HC=Object.getPrototypeOf,sy=Object.prototype.hasOwnProperty,zC=Object.prototype.propertyIsEnumerable,lV=Reflect.get;var $C=(t,e,n)=>e in t?ry(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I=(t,e)=>{for(var n in e||={})sy.call(e,n)&&$C(t,n,e[n]);if(Fd)for(var n of Fd(e))zC.call(e,n)&&$C(t,n,e[n]);return t},ye=(t,e)=>sV(t,aV(e));var qC=(t,e)=>{var n={};for(var i in t)sy.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&Fd)for(var i of Fd(t))e.indexOf(i)<0&&zC.call(t,i)&&(n[i]=t[i]);return n};var dY=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var uV=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of cV(e))!sy.call(t,r)&&r!==n&&ry(t,r,{get:()=>e[r],enumerable:!(i=oV(e,r))||i.enumerable});return t};var hY=(t,e,n)=>(n=t!=null?rV(HC(t)):{},uV(e||!t||!t.__esModule?ry(n,"default",{value:t,enumerable:!0}):n,t));var Kn=(t,e,n)=>lV(HC(t),n,e);var m=(t,e,n)=>new Promise((i,r)=>{var s=c=>{try{a(n.next(c))}catch(l){r(l)}},o=c=>{try{a(n.throw(c))}catch(l){r(l)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});function dV(t,e){return Object.is(t,e)}var at=null,Ld=!1,Vd=1,xo=Symbol("SIGNAL");function mt(t){let e=at;return at=t,e}var oy={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function GC(t){if(Ld)throw new Error("");if(at===null)return;at.consumerOnSignalRead(t);let e=at.nextProducerIndex++;if(Ro(at),e<at.producerNode.length&&at.producerNode[e]!==t&&Dc(at)){let n=at.producerNode[e];jd(n,at.producerIndexOfThis[e])}at.producerNode[e]!==t&&(at.producerNode[e]=t,at.producerIndexOfThis[e]=Dc(at)?XC(t,at,e):0),at.producerLastReadVersion[e]=t.version}function hV(){Vd++}function fV(t){if(!(Dc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Vd)){if(!t.producerMustRecompute(t)&&!ay(t)){t.dirty=!1,t.lastCleanEpoch=Vd;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Vd}}function WC(t){if(t.liveConsumerNode===void 0)return;let e=Ld;Ld=!0;try{for(let n of t.liveConsumerNode)n.dirty||pV(n)}finally{Ld=e}}function KC(){return at?.consumerAllowSignalWrites!==!1}function pV(t){t.dirty=!0,WC(t),t.consumerMarkedDirty?.(t)}function QC(t){return t&&(t.nextProducerIndex=0),mt(t)}function YC(t,e){if(mt(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Dc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)jd(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ay(t){Ro(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(fV(n),i!==n.version))return!0}return!1}function ZC(t){if(Ro(t),Dc(t))for(let e=0;e<t.producerNode.length;e++)jd(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function XC(t,e,n){if(JC(t),Ro(t),t.liveConsumerNode.length===0)for(let i=0;i<t.producerNode.length;i++)t.producerIndexOfThis[i]=XC(t.producerNode[i],t,i);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function jd(t,e){if(JC(t),Ro(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)jd(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];Ro(r),r.producerIndexOfThis[i]=e}}function Dc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ro(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function JC(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function mV(){throw new Error}var eT=mV;function tT(){eT()}function nT(t){eT=t}var gV=null;function iT(t){let e=Object.create(sT);e.value=t;let n=()=>(GC(e),e.value);return n[xo]=e,n}function cy(t,e){KC()||tT(),t.equal(t.value,e)||(t.value=e,yV(t))}function rT(t,e){KC()||tT(),cy(t,e(t.value))}var sT=ye(I({},oy),{equal:dV,value:void 0});function yV(t){t.version++,hV(),WC(t),gV?.()}function U(t){return typeof t=="function"}function Mo(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Bd=Mo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function cs(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ae=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(U(i))try{i()}catch(s){e=s instanceof Bd?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{oT(s)}catch(o){e=e??[],o instanceof Bd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Bd(e)}}add(e){var n;if(e&&e!==this)if(this.closed)oT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&cs(n,e)}remove(e){let{_finalizers:n}=this;n&&cs(n,e),e instanceof t&&e._removeParent(this)}};Ae.EMPTY=(()=>{let t=new Ae;return t.closed=!0,t})();var ly=Ae.EMPTY;function Ud(t){return t instanceof Ae||t&&"closed"in t&&U(t.remove)&&U(t.add)&&U(t.unsubscribe)}function oT(t){U(t)?t():t.unsubscribe()}var Mn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var No={setTimeout(t,e,...n){let{delegate:i}=No;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=No;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function $d(t){No.setTimeout(()=>{let{onUnhandledError:e}=Mn;if(e)e(t);else throw t})}function Oi(){}var aT=uy("C",void 0,void 0);function cT(t){return uy("E",void 0,t)}function lT(t){return uy("N",t,void 0)}function uy(t,e,n){return{kind:t,value:e,error:n}}var ls=null;function Po(t){if(Mn.useDeprecatedSynchronousErrorHandling){let e=!ls;if(e&&(ls={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=ls;if(ls=null,n)throw i}}else t()}function uT(t){Mn.useDeprecatedSynchronousErrorHandling&&ls&&(ls.errorThrown=!0,ls.error=t)}var us=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ud(e)&&e.add(this)):this.destination=wV}static create(e,n,i){return new ki(e,n,i)}next(e){this.isStopped?hy(lT(e),this):this._next(e)}error(e){this.isStopped?hy(cT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hy(aT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},_V=Function.prototype.bind;function dy(t,e){return _V.call(t,e)}var fy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){Hd(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){Hd(i)}else Hd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Hd(n)}}},ki=class extends us{constructor(e,n,i){super();let r;if(U(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let s;this&&Mn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&dy(e.next,s),error:e.error&&dy(e.error,s),complete:e.complete&&dy(e.complete,s)}):r=e}this.destination=new fy(r)}};function Hd(t){Mn.useDeprecatedSynchronousErrorHandling?uT(t):$d(t)}function vV(t){throw t}function hy(t,e){let{onStoppedNotification:n}=Mn;n&&No.setTimeout(()=>n(t,e))}var wV={closed:!0,next:Oi,error:vV,complete:Oi};var Oo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nt(t){return t}function zd(...t){return py(t)}function py(t){return t.length===0?Nt:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var W=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let s=IV(n)?n:new ki(n,i,r);return Po(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=dT(i),new i((r,s)=>{let o=new ki({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[Oo](){return this}pipe(...n){return py(n)(this)}toPromise(n){return n=dT(n),new n((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return t.create=e=>new t(e),t})();function dT(t){var e;return(e=t??Mn.Promise)!==null&&e!==void 0?e:Promise}function EV(t){return t&&U(t.next)&&U(t.error)&&U(t.complete)}function IV(t){return t&&t instanceof us||EV(t)&&Ud(t)}function my(t){return U(t?.lift)}function Z(t){return e=>{if(my(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function J(t,e,n,i,r){return new gy(t,e,n,i,r)}var gy=class extends us{constructor(e,n,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ko(){return Z((t,e)=>{let n=null;t._refCount++;let i=J(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,s=n;n=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var sr=class extends W{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,my(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ae;let n=this.getSubject();e.add(this.source.subscribe(J(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ae.EMPTY)}return e}refCount(){return ko()(this)}};var Fo={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame,{delegate:i}=Fo;i&&(e=i.requestAnimationFrame,n=i.cancelAnimationFrame);let r=e(s=>{n=void 0,t(s)});return new Ae(()=>n?.(r))},requestAnimationFrame(...t){let{delegate:e}=Fo;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){let{delegate:e}=Fo;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};var hT=Mo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var q=(()=>{class t extends W{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new qd(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new hT}next(n){Po(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){Po(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Po(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:s}=this;return i||r?ly:(this.currentObservers=null,s.push(n),new Ae(()=>{this.currentObservers=null,cs(s,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:s}=this;i?n.error(r):s&&n.complete()}asObservable(){let n=new W;return n.source=this,n}}return t.create=(e,n)=>new qd(e,n),t})(),qd=class extends q{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:ly}};var Ke=class extends q{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Cc={now(){return(Cc.delegate||Date).now()},delegate:void 0};var ds=class extends q{constructor(e=1/0,n=1/0,i=Cc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;n||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){let o=n.now(),a=0;for(let c=1;c<i.length&&i[c]<=o;c+=2)a=c;a&&i.splice(0,a+1)}}};var Gd=class extends Ae{constructor(e,n){super()}schedule(e,n=0){return this}};var Tc={setInterval(t,e,...n){let{delegate:i}=Tc;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Tc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var or=class extends Gd{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,i=0){return Tc.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Tc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,cs(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Lo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};Lo.now=Cc.now;var ar=class extends Lo{constructor(e,n=Lo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var dn=new ar(or),yy=dn;var Wd=class extends or{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var Kd=class extends ar{};var _y=new Kd(Wd);var Qd=class extends or{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return i!==null&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=Fo.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,i=0){var r;if(i!=null?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);let{actions:s}=e;n!=null&&((r=s[s.length-1])===null||r===void 0?void 0:r.id)!==n&&(Fo.cancelAnimationFrame(n),e._scheduled=void 0)}};var Yd=class extends ar{flush(e){this._active=!0;let n=this._scheduled;this._scheduled=void 0;let{actions:i}=this,r;e=e||i.shift();do if(r=e.execute(e.state,e.delay))break;while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}};var fT=new Yd(Qd);var $t=new W(t=>t.complete());function Zd(t){return t&&U(t.schedule)}function vy(t){return t[t.length-1]}function Xd(t){return U(vy(t))?t.pop():void 0}function Qn(t){return Zd(vy(t))?t.pop():void 0}function pT(t,e){return typeof vy(t)=="number"?t.pop():e}function Jd(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function hX(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function gT(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(d){o(d)}}function c(u){try{l(i.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):r(u.value).then(a,c)}l((i=i.apply(t,e||[])).next())})}function mT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hs(t){return this instanceof hs?(this.v=t,this):new hs(t)}function yT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(i[h](f))}catch(p){d(s[0][3],p)}}function c(h){h.value instanceof hs?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function _T(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof mT=="function"?mT(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),r(a,c,o.done,o.value)})}}function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Vo=t=>t&&typeof t.length=="number"&&typeof t!="function";function eh(t){return U(t?.then)}function th(t){return U(t[Oo])}function nh(t){return Symbol.asyncIterator&&U(t?.[Symbol.asyncIterator])}function ih(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function bV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var rh=bV();function sh(t){return U(t?.[rh])}function oh(t){return yT(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield hs(n.read());if(r)return yield hs(void 0);yield yield hs(i)}}finally{n.releaseLock()}})}function ah(t){return U(t?.getReader)}function Ee(t){if(t instanceof W)return t;if(t!=null){if(th(t))return DV(t);if(Vo(t))return CV(t);if(eh(t))return TV(t);if(nh(t))return vT(t);if(sh(t))return SV(t);if(ah(t))return AV(t)}throw ih(t)}function DV(t){return new W(e=>{let n=t[Oo]();if(U(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function CV(t){return new W(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function TV(t){return new W(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,$d)})}function SV(t){return new W(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function vT(t){return new W(e=>{RV(t,e).catch(n=>e.error(n))})}function AV(t){return vT(oh(t))}function RV(t,e){var n,i,r,s;return gT(this,void 0,void 0,function*(){try{for(n=_T(t);i=yield n.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}e.complete()})}function Ht(t,e,n,i=0,r=!1){let s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function cr(t,e=0){return Z((n,i)=>{n.subscribe(J(i,r=>Ht(i,t,()=>i.next(r),e),()=>Ht(i,t,()=>i.complete(),e),r=>Ht(i,t,()=>i.error(r),e)))})}function lr(t,e=0){return Z((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function wT(t,e){return Ee(t).pipe(lr(e),cr(e))}function ET(t,e){return Ee(t).pipe(lr(e),cr(e))}function IT(t,e){return new W(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function bT(t,e){return new W(n=>{let i;return Ht(n,e,()=>{i=t[rh](),Ht(n,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){n.error(o);return}s?n.complete():n.next(r)},0,!0)}),()=>U(i?.return)&&i.return()})}function ch(t,e){if(!t)throw new Error("Iterable cannot be null");return new W(n=>{Ht(n,e,()=>{let i=t[Symbol.asyncIterator]();Ht(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function DT(t,e){return ch(oh(t),e)}function CT(t,e){if(t!=null){if(th(t))return wT(t,e);if(Vo(t))return IT(t,e);if(eh(t))return ET(t,e);if(nh(t))return ch(t,e);if(sh(t))return bT(t,e);if(ah(t))return DT(t,e)}throw ih(t)}function Pe(t,e){return e?CT(t,e):Ee(t)}function H(...t){let e=Qn(t);return Pe(t,e)}function jo(t,e){let n=U(t)?t:()=>t,i=r=>r.error(n());return new W(e?r=>e.schedule(i,0,r):i)}function lh(t){return!!t&&(t instanceof W||U(t.lift)&&U(t.subscribe))}var Fi=Mo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function TT(t){return t instanceof Date&&!isNaN(t)}function ee(t,e){return Z((n,i)=>{let r=0;n.subscribe(J(i,s=>{i.next(t.call(e,s,r++))}))})}var{isArray:xV}=Array;function MV(t,e){return xV(e)?t(...e):t(e)}function Bo(t){return ee(e=>MV(t,e))}var{isArray:NV}=Array,{getPrototypeOf:PV,prototype:OV,keys:kV}=Object;function uh(t){if(t.length===1){let e=t[0];if(NV(e))return{args:e,keys:null};if(FV(e)){let n=kV(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function FV(t){return t&&typeof t=="object"&&PV(t)===OV}function dh(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function fs(...t){let e=Qn(t),n=Xd(t),{args:i,keys:r}=uh(t);if(i.length===0)return Pe([],e);let s=new W(LV(i,e,r?o=>dh(r,o):Nt));return n?s.pipe(Bo(n)):s}function LV(t,e,n=Nt){return i=>{ST(e,()=>{let{length:r}=t,s=new Array(r),o=r,a=r;for(let c=0;c<r;c++)ST(e,()=>{let l=Pe(t[c],e),u=!1;l.subscribe(J(i,d=>{s[c]=d,u||(u=!0,a--),a||i.next(n(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function ST(t,e,n){t?Ht(n,t,e):e()}function AT(t,e,n,i,r,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=g=>l<i?p(g):c.push(g),p=g=>{s&&e.next(g),l++;let v=!1;Ee(n(g,u++)).subscribe(J(e,E=>{r?.(E),s?f(E):e.next(E)},()=>{v=!0},void 0,()=>{if(v)try{for(l--;c.length&&l<i;){let E=c.shift();o?Ht(e,o,()=>p(E)):p(E)}h()}catch(E){e.error(E)}}))};return t.subscribe(J(e,f,()=>{d=!0,h()})),()=>{a?.()}}function ke(t,e,n=1/0){return U(e)?ke((i,r)=>ee((s,o)=>e(i,s,r,o))(Ee(t(i,r))),n):(typeof e=="number"&&(n=e),Z((i,r)=>AT(i,r,t,n)))}function ur(t=1/0){return ke(Nt,t)}function RT(){return ur(1)}function Yn(...t){return RT()(Pe(t,Qn(t)))}function dr(t){return new W(e=>{Ee(t()).subscribe(e)})}function wy(...t){let e=Xd(t),{args:n,keys:i}=uh(t),r=new W(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;Ee(n[u]).subscribe(J(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(i?dh(i,a):a),s.complete())}))}});return e?r.pipe(Bo(e)):r}var VV=["addListener","removeListener"],jV=["addEventListener","removeEventListener"],BV=["on","off"];function Sc(t,e,n,i){if(U(n)&&(i=n,n=void 0),i)return Sc(t,e,n).pipe(Bo(i));let[r,s]=HV(t)?jV.map(o=>a=>t[o](e,a,n)):UV(t)?VV.map(xT(t,e)):$V(t)?BV.map(xT(t,e)):[];if(!r&&Vo(t))return ke(o=>Sc(o,e,n))(Ee(t));if(!r)throw new TypeError("Invalid event target");return new W(o=>{let a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function xT(t,e){return n=>i=>t[n](e,i)}function UV(t){return U(t.addListener)&&U(t.removeListener)}function $V(t){return U(t.on)&&U(t.off)}function HV(t){return U(t.addEventListener)&&U(t.removeEventListener)}function Uo(t=0,e,n=yy){let i=-1;return e!=null&&(Zd(e)?n=e:i=e),new W(r=>{let s=TT(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function zV(t=0,e=dn){return t<0&&(t=0),Uo(t,t,e)}function Ac(...t){let e=Qn(t),n=pT(t,1/0),i=t;return i.length?i.length===1?Ee(i[0]):ur(n)(Pe(i,e)):$t}var qV=new W(Oi);function Fe(t,e){return Z((n,i)=>{let r=0;n.subscribe(J(i,s=>t.call(e,s,r++)&&i.next(s)))})}function MT(t){return Z((e,n)=>{let i=!1,r=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;let l=r;r=null,n.next(l)}o&&n.complete()},c=()=>{s=null,o&&n.complete()};e.subscribe(J(n,l=>{i=!0,r=l,s||Ee(t(l)).subscribe(s=J(n,a,c))},()=>{o=!0,(!i||!s||s.closed)&&n.complete()}))})}function hh(t,e=dn){return MT(()=>Uo(t,e))}function hr(t){return Z((e,n)=>{let i=null,r=!1,s;i=e.subscribe(J(n,void 0,void 0,o=>{s=Ee(t(o,hr(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(n))})}function NT(t,e,n,i,r){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(J(o,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}function ps(t,e){return U(e)?ke(t,e,1):ke(t,1)}function PT(t){return new W(e=>t.subscribe(e))}var GV={connector:()=>new q};function fh(t,e=GV){let{connector:n}=e;return Z((i,r)=>{let s=n();Ee(t(PT(s))).subscribe(r),r.add(i.subscribe(s))})}function ph(t,e=dn){return Z((n,i)=>{let r=null,s=null,o=null,a=()=>{if(r){r.unsubscribe(),r=null;let l=s;s=null,i.next(l)}};function c(){let l=o+t,u=e.now();if(u<l){r=this.schedule(void 0,l-u),i.add(r);return}a()}n.subscribe(J(i,l=>{s=l,o=e.now(),r||(r=e.schedule(c,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function fr(t){return Z((e,n)=>{let i=!1;e.subscribe(J(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function Be(t){return t<=0?()=>$t:Z((e,n)=>{let i=0;e.subscribe(J(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function OT(){return Z((t,e)=>{t.subscribe(J(e,Oi))})}function Rc(t){return ee(()=>t)}function Ey(t,e){return e?n=>Yn(e.pipe(Be(1),OT()),n.pipe(Ey(t))):ke((n,i)=>Ee(t(n,i)).pipe(Be(1),Rc(n)))}function WV(t,e=dn){let n=Uo(t,e);return Ey(()=>n)}function xc(t,e=Nt){return t=t??KV,Z((n,i)=>{let r,s=!0;n.subscribe(J(i,o=>{let a=e(o);(s||!t(r,a))&&(s=!1,r=a,i.next(o))}))})}function KV(t,e){return t===e}function mh(t=QV){return Z((e,n)=>{let i=!1;e.subscribe(J(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function QV(){return new Fi}function Mc(t){return Z((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Zn(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Fe((r,s)=>t(r,s,i)):Nt,Be(1),n?fr(e):mh(()=>new Fi))}function $o(t){return t<=0?()=>$t:Z((e,n)=>{let i=[];e.subscribe(J(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function Iy(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Fe((r,s)=>t(r,s,i)):Nt,$o(1),n?fr(e):mh(()=>new Fi))}function kT(t,e){let n=U(t)?t:()=>t;return U(e)?fh(e,{connector:n}):i=>new sr(i,n)}function YV(t){return t?e=>fh(t)(e):e=>kT(new q)(e)}function gh(t,e){return Z(NT(t,e,arguments.length>=2,!0))}function FT(t={}){let{connector:e=()=>new q,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return s=>{let o,a,c,l=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=c=void 0,u=d=!1},p=()=>{let g=o;f(),g?.unsubscribe()};return Z((g,v)=>{l++,!d&&!u&&h();let E=c=c??e();v.add(()=>{l--,l===0&&!d&&!u&&(a=by(p,r))}),E.subscribe(v),!o&&l>0&&(o=new ki({next:A=>E.next(A),error:A=>{d=!0,h(),a=by(f,n,A),E.error(A)},complete:()=>{u=!0,h(),a=by(f,i),E.complete()}}),Ee(g).subscribe(o))})(s)}}function by(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new ki({next:()=>{i.unsubscribe(),t()}});return Ee(e(...n)).subscribe(i)}function LT(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,FT({connector:()=>new ds(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Nc(t){return Fe((e,n)=>t<=n)}function Nn(...t){let e=Qn(t);return Z((n,i)=>{(e?Yn(t,n,e):Yn(t,n)).subscribe(i)})}function Qt(t,e){return Z((n,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();n.subscribe(J(i,c=>{r?.unsubscribe();let l=0,u=s++;Ee(t(c,u)).subscribe(r=J(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Pn(t){return Z((e,n)=>{Ee(t).subscribe(J(n,()=>n.complete(),Oi)),!n.closed&&e.subscribe(n)})}function Qe(t,e,n){let i=U(t)||e||n?{next:t,error:e,complete:n}:t;return i?Z((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(J(s,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),s.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),s.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),s.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):Nt}var DS="https://g.co/ng/security#xss",S=class extends Error{constructor(e,n){super(q_(e,n)),this.code=e}};function q_(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function xe(t){for(let e in t)if(t[e]===xe)return e;throw Error("Could not find renamed property on target object.")}function ZV(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function kt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(kt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function $y(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var XV=xe({__forward_ref__:xe});function pn(t){return t.__forward_ref__=pn,t.toString=function(){return kt(this())},t}function Pt(t){return CS(t)?t():t}function CS(t){return typeof t=="function"&&t.hasOwnProperty(XV)&&t.__forward_ref__===pn}function TS(t){return t&&!!t.\u0275providers}var JV=xe({\u0275cmp:xe}),ej=xe({\u0275dir:xe}),tj=xe({\u0275pipe:xe}),nj=xe({\u0275mod:xe}),Rh=xe({\u0275fac:xe}),Pc=xe({__NG_ELEMENT_ID__:xe}),VT=xe({__NG_ENV_ID__:xe});function Gc(t){return typeof t=="string"?t:t==null?"":String(t)}function ij(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Gc(t)}function rj(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new S(-200,`Circular dependency in DI detected for ${t}${n}`)}function G_(t,e){throw new S(-201,!1)}function sj(t,e){t==null&&oj(e,t,null,"!=")}function oj(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(i==null?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}function D(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ie(t){return{providers:t.providers||[],imports:t.imports||[]}}function Yh(t){return jT(t,AS)||jT(t,RS)}function SS(t){return Yh(t)!==null}function jT(t,e){return t.hasOwnProperty(e)?t[e]:null}function aj(t){let e=t&&(t[AS]||t[RS]);return e||null}function BT(t){return t&&(t.hasOwnProperty(UT)||t.hasOwnProperty(cj))?t[UT]:null}var AS=xe({\u0275prov:xe}),UT=xe({\u0275inj:xe}),RS=xe({ngInjectableDef:xe}),cj=xe({ngInjectorDef:xe}),he=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(he||{}),Hy;function xS(){return Hy}function zt(t){let e=Hy;return Hy=t,e}function MS(t,e,n){let i=Yh(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&he.Optional)return null;if(e!==void 0)return e;G_(t,"Injector")}var et=globalThis;var x=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=D({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var lj={},Oc=lj,zy="__NG_DI_FLAG__",xh="ngTempTokenPath",uj="ngTokenPath",dj=/\n/gm,hj="\u0275",$T="__source",Wo;function fj(){return Wo}function pr(t){let e=Wo;return Wo=t,e}function pj(t,e=he.Default){if(Wo===void 0)throw new S(-203,!1);return Wo===null?MS(t,void 0,e):Wo.get(t,e&he.Optional?null:void 0,e)}function y(t,e=he.Default){return(xS()||pj)(Pt(t),e)}function C(t,e=he.Default){return y(t,Zh(e))}function Zh(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function qy(t){let e=[];for(let n=0;n<t.length;n++){let i=Pt(t[n]);if(Array.isArray(i)){if(i.length===0)throw new S(900,!1);let r,s=he.Default;for(let o=0;o<i.length;o++){let a=i[o],c=mj(a);typeof c=="number"?c===-1?r=a.token:s|=c:r=a}e.push(y(r,s))}else e.push(y(i))}return e}function NS(t,e){return t[zy]=e,t.prototype[zy]=e,t}function mj(t){return t[zy]}function gj(t,e,n,i){let r=t[xh];throw e[$T]&&r.unshift(e[$T]),t.message=yj(`
`+t.message,r,n,i),t[uj]=r,t[xh]=null,t}function yj(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==hj?t.slice(2):t;let r=kt(e);if(Array.isArray(e))r=e.map(kt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):kt(a)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(dj,`
  `)}`}function Wc(t){return{toString:t}.toString()}var PS=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(PS||{}),ti=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ti||{}),Qo={},Ot=[],fe=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(fe||{});function OS(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}n=r+1}}function Gy(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let s=n[i++],o=n[i++],a=n[i++];t.setAttribute(e,o,a,s)}else{let s=r,o=n[++i];_j(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),i++}}return i}function kS(t){return t===3||t===4||t===6}function _j(t){return t.charCodeAt(0)===64}function kc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?HT(t,n,r,null,e[++i]):HT(t,n,r,null,null))}}return t}function HT(t,e,n,i,r){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(t[s+1]=r);return}else if(i===t[s+1]){t[s+2]=r;return}}s++,i!==null&&s++,r!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),i!==null&&t.splice(s++,0,i),r!==null&&t.splice(s++,0,r)}var FS="ng-template";function vj(t,e,n){let i=0,r=!0;for(;i<t.length;){let s=t[i++];if(typeof s=="string"&&r){let o=t[i++];if(n&&s==="class"&&OS(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;i<t.length&&typeof(s=t[i++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(r=!1)}return!1}function LS(t){return t.type===4&&t.value!==FS}function wj(t,e,n){let i=t.type===4&&!n?FS:t.value;return e===i}function Ej(t,e,n){let i=4,r=t.attrs||[],s=Dj(r),o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!On(i)&&!On(c))return!1;if(o&&On(c))continue;o=!1,i=c|i&1;continue}if(!o)if(i&4){if(i=2|i&1,c!==""&&!wj(t,c,n)||c===""&&e.length===1){if(On(i))return!1;o=!0}}else{let l=i&8?c:e[++a];if(i&8&&t.attrs!==null){if(!vj(t.attrs,l,n)){if(On(i))return!1;o=!0}continue}let u=i&8?"class":c,d=Ij(u,r,LS(t),n);if(d===-1){if(On(i))return!1;o=!0;continue}if(l!==""){let h;d>s?h="":h=r[d+1].toLowerCase();let f=i&8?h:null;if(f&&OS(f,l,0)!==-1||i&2&&l!==h){if(On(i))return!1;o=!0}}}}return On(i)||o}function On(t){return(t&1)===0}function Ij(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let s=!1;for(;r<e.length;){let o=e[r];if(o===t)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return Cj(e,t)}function VS(t,e,n=!1){for(let i=0;i<e.length;i++)if(Ej(t,e[i],n))return!0;return!1}function bj(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function Dj(t){for(let e=0;e<t.length;e++){let n=t[e];if(kS(n))return e}return t.length}function Cj(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function Tj(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function zT(t,e){return t?":not("+e.trim()+")":e}function Sj(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(i&2){let a=t[++n];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!On(o)&&(e+=zT(s,r),r=""),i=o,s=s||!On(i);n++}return r!==""&&(e+=zT(s,r)),e}function Aj(t){return t.map(Sj).join(",")}function Rj(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let s=t[i];if(typeof s=="string")r===2?s!==""&&e.push(s,t[++i]):r===8&&n.push(s);else{if(!On(r))break;r=s}i++}return{attrs:e,classes:n}}function ai(t){return Wc(()=>{let e=zS(t),n=ye(I({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===PS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ti.Emulated,styles:t.styles||Ot,_:null,schemas:t.schemas||null,tView:null,id:""});qS(n);let i=t.dependencies;return n.directiveDefs=GT(i,!1),n.pipeDefs=GT(i,!0),n.id=Nj(n),n})}function xj(t){return yr(t)||BS(t)}function Mj(t){return t!==null}function re(t){return Wc(()=>({type:t.type,bootstrap:t.bootstrap||Ot,declarations:t.declarations||Ot,imports:t.imports||Ot,exports:t.exports||Ot,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function qT(t,e){if(t==null)return Qo;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],s,o,a=fe.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(n[s]=a!==fe.None?[i,a]:i,e[s]=o):n[s]=i}return n}function me(t){return Wc(()=>{let e=zS(t);return qS(e),e})}function jS(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function yr(t){return t[JV]||null}function BS(t){return t[ej]||null}function US(t){return t[tj]||null}function $S(t){let e=yr(t)||BS(t)||US(t);return e!==null?e.standalone:!1}function HS(t,e){let n=t[nj]||null;if(!n&&e===!0)throw new Error(`Type ${kt(t)} does not have '\u0275mod' property.`);return n}function zS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Qo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ot,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:qT(t.inputs,e),outputs:qT(t.outputs),debugInfo:null}}function qS(t){t.features?.forEach(e=>e(t))}function GT(t,e){if(!t)return null;let n=e?US:xj;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(Mj)}function Nj(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var ci=0,Q=1,te=2,gt=3,Fn=4,Jt=5,Yo=6,Fc=7,ct=8,Zo=9,ni=10,$e=11,Lc=12,WT=13,ra=14,fn=15,Kc=16,Ho=17,ei=18,Qc=19,GS=20,mr=21,Dy=22,ys=23,it=25,W_=1;var _s=7,Mh=8,Xo=9,Dt=10,K_=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(K_||{});function gr(t){return Array.isArray(t)&&typeof t[W_]=="object"}function Vi(t){return Array.isArray(t)&&t[W_]===!0}function Q_(t){return(t.flags&4)!==0}function Xh(t){return t.componentOffset>-1}function Jh(t){return(t.flags&1)===1}function Li(t){return!!t.template}function Pj(t){return(t[te]&512)!==0}function vs(t,e){let n=t.hasOwnProperty(Rh);return n?t[Rh]:null}var Wy=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function WS(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function Ft(){return KS}function KS(t){return t.type.prototype.ngOnChanges&&(t.setInput=kj),Oj}Ft.ngInherit=!0;function Oj(){let t=YS(this),e=t?.current;if(e){let n=t.previous;if(n===Qo)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function kj(t,e,n,i,r){let s=this.declaredInputs[i],o=YS(t)||Fj(t,{previous:Qo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Wy(l&&l.currentValue,n,c===Qo),WS(t,e,r,n)}var QS="__ngSimpleChanges__";function YS(t){return t[QS]||null}function Fj(t,e){return t[QS]=e}var KT=null;var Xn=function(t,e,n){KT?.(t,e,n)},ZS="svg",Lj="math",Vj=!1;function jj(){return Vj}function Yt(t){for(;Array.isArray(t);)t=t[ci];return t}function Bj(t){for(;Array.isArray(t);){if(typeof t[W_]=="object")return t;t=t[ci]}return null}function XS(t,e){return Yt(e[t])}function mn(t,e){return Yt(e[t.index])}function Y_(t,e){return t.data[e]}function JS(t,e){return t[e]}function ii(t,e){let n=e[t];return gr(n)?n:n[ci]}function Uj(t){return(t[te]&4)===4}function Z_(t){return(t[te]&128)===128}function $j(t){return Vi(t[gt])}function Jo(t,e){return e==null?null:t[e]}function eA(t){t[Ho]=0}function Hj(t){t[te]&1024||(t[te]|=1024,Z_(t)&&Vc(t))}function zj(t,e){for(;t>0;)e=e[ra],t--;return e}function tA(t){return t[te]&9216||t[ys]?.dirty}function Ky(t){tA(t)?Vc(t):t[te]&64&&(jj()?(t[te]|=1024,Vc(t)):t[ni].changeDetectionScheduler?.notify())}function Vc(t){t[ni].changeDetectionScheduler?.notify();let e=jc(t);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!Z_(e)));)e=jc(e)}function nA(t,e){if((t[te]&256)===256)throw new S(911,!1);t[mr]===null&&(t[mr]=[]),t[mr].push(e)}function qj(t,e){if(t[mr]===null)return;let n=t[mr].indexOf(e);n!==-1&&t[mr].splice(n,1)}function jc(t){let e=t[gt];return Vi(e)?e[gt]:e}var ce={lFrame:dA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Gj(){return ce.lFrame.elementDepthCount}function Wj(){ce.lFrame.elementDepthCount++}function Kj(){ce.lFrame.elementDepthCount--}function iA(){return ce.bindingsEnabled}function rA(){return ce.skipHydrationRootTNode!==null}function Qj(t){return ce.skipHydrationRootTNode===t}function Yj(){ce.skipHydrationRootTNode=null}function ue(){return ce.lFrame.lView}function He(){return ce.lFrame.tView}function X_(t){return ce.lFrame.contextLView=t,t[ct]}function J_(t){return ce.lFrame.contextLView=null,t}function Ct(){let t=sA();for(;t!==null&&t.type===64;)t=t.parent;return t}function sA(){return ce.lFrame.currentTNode}function Zj(){let t=ce.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ts(t,e){let n=ce.lFrame;n.currentTNode=t,n.isParent=e}function ev(){return ce.lFrame.isParent}function tv(){ce.lFrame.isParent=!1}function Xj(){return ce.lFrame.contextLView}function oA(){let t=ce.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Jj(t){return ce.lFrame.bindingIndex=t}function Ss(){return ce.lFrame.bindingIndex++}function aA(t){let e=ce.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function eB(){return ce.lFrame.inI18n}function tB(t,e){let n=ce.lFrame;n.bindingIndex=n.bindingRootIndex=t,Qy(e)}function nB(){return ce.lFrame.currentDirectiveIndex}function Qy(t){ce.lFrame.currentDirectiveIndex=t}function nv(t){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function cA(){return ce.lFrame.currentQueryIndex}function iv(t){ce.lFrame.currentQueryIndex=t}function iB(t){let e=t[Q];return e.type===2?e.declTNode:e.type===1?t[Jt]:null}function lA(t,e,n){if(n&he.SkipSelf){let r=e,s=t;for(;r=r.parent,r===null&&!(n&he.Host);)if(r=iB(s),r===null||(s=s[ra],r.type&10))break;if(r===null)return!1;e=r,t=s}let i=ce.lFrame=uA();return i.currentTNode=e,i.lView=t,!0}function rv(t){let e=uA(),n=t[Q];ce.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function uA(){let t=ce.lFrame,e=t===null?null:t.child;return e===null?dA(t):e}function dA(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function hA(){let t=ce.lFrame;return ce.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var fA=hA;function sv(){let t=hA();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function rB(t){return(ce.lFrame.contextLView=zj(t,ce.lFrame.contextLView))[ct]}function vr(){return ce.lFrame.selectedIndex}function ws(t){ce.lFrame.selectedIndex=t}function ef(){let t=ce.lFrame;return Y_(t.tView,t.selectedIndex)}function pA(){ce.lFrame.currentNamespace=ZS}function mA(){sB()}function sB(){ce.lFrame.currentNamespace=null}function oB(){return ce.lFrame.currentNamespace}var gA=!0;function tf(){return gA}function nf(t){gA=t}function aB(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=KS(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}r&&(n.preOrderHooks??=[]).push(0-t,r),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function rf(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function bh(t,e,n){yA(t,e,3,n)}function Dh(t,e,n,i){(t[te]&3)===n&&yA(t,e,n,i)}function Cy(t,e){let n=t[te];(n&3)===e&&(n&=16383,n+=1,t[te]=n)}function yA(t,e,n,i){let r=i!==void 0?t[Ho]&65535:0,s=i??-1,o=e.length-1,a=0;for(let c=r;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(t[Ho]+=65536),(a<s||s==-1)&&(cB(t,n,e,c),t[Ho]=(t[Ho]&4294901760)+c+2),c++}function QT(t,e){Xn(4,t,e);let n=mt(null);try{e.call(t)}finally{mt(n),Xn(5,t,e)}}function cB(t,e,n,i){let r=n[i]<0,s=n[i+1],o=r?-n[i]:n[i],a=t[o];r?t[te]>>14<t[Ho]>>16&&(t[te]&3)===e&&(t[te]+=16384,QT(a,s)):QT(a,s)}var Ko=-1,Es=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function lB(t){return t instanceof Es}function uB(t){return(t.flags&8)!==0}function dB(t){return(t.flags&16)!==0}function _A(t){return t!==Ko}function Nh(t){return t&32767}function hB(t){return t>>16}function Ph(t,e){let n=hB(t),i=e;for(;n>0;)i=i[ra],n--;return i}var Yy=!0;function Oh(t){let e=Yy;return Yy=t,e}var fB=256,vA=fB-1,wA=5,pB=0,Jn={};function mB(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Pc)&&(i=n[Pc]),i==null&&(i=n[Pc]=pB++);let r=i&vA,s=1<<r;e.data[t+(r>>wA)]|=s}function kh(t,e){let n=EA(t,e);if(n!==-1)return n;let i=e[Q];i.firstCreatePass&&(t.injectorIndex=e.length,Ty(i.data,t),Ty(e,null),Ty(i.blueprint,null));let r=ov(t,e),s=t.injectorIndex;if(_A(r)){let o=Nh(r),a=Ph(r,e),c=a[Q].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function Ty(t,e){t.push(0,0,0,0,0,0,0,0,e)}function EA(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function ov(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=TA(r),i===null)return Ko;if(n++,r=r[ra],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return Ko}function Zy(t,e,n){mB(t,e,n)}function gB(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let i=n.length,r=0;for(;r<i;){let s=n[r];if(kS(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<i&&typeof n[r]=="string";)r++;else{if(s===e)return n[r+1];r=r+2}}}return null}function IA(t,e,n){if(n&he.Optional||t!==void 0)return t;G_(e,"NodeInjector")}function bA(t,e,n,i){if(n&he.Optional&&i===void 0&&(i=null),!(n&(he.Self|he.Host))){let r=t[Zo],s=zt(void 0);try{return r?r.get(e,i,n&he.Optional):MS(e,i,n&he.Optional)}finally{zt(s)}}return IA(i,e,n)}function DA(t,e,n,i=he.Default,r){if(t!==null){if(e[te]&2048&&!(i&he.Self)){let o=wB(t,e,n,i,Jn);if(o!==Jn)return o}let s=CA(t,e,n,i,Jn);if(s!==Jn)return s}return bA(e,n,i,r)}function CA(t,e,n,i,r){let s=_B(n);if(typeof s=="function"){if(!lA(e,t,i))return i&he.Host?IA(r,n,i):bA(e,n,i,r);try{let o;if(o=s(i),o==null&&!(i&he.Optional))G_(n);else return o}finally{fA()}}else if(typeof s=="number"){let o=null,a=EA(t,e),c=Ko,l=i&he.Host?e[fn][Jt]:null;for((a===-1||i&he.SkipSelf)&&(c=a===-1?ov(t,e):e[a+8],c===Ko||!ZT(i,!1)?a=-1:(o=e[Q],a=Nh(c),e=Ph(c,e)));a!==-1;){let u=e[Q];if(YT(s,a,u.data)){let d=yB(a,e,n,o,i,l);if(d!==Jn)return d}c=e[a+8],c!==Ko&&ZT(i,e[Q].data[a+8]===l)&&YT(s,a,e)?(o=u,a=Nh(c),e=Ph(c,e)):a=-1}}return r}function yB(t,e,n,i,r,s){let o=e[Q],a=o.data[t+8],c=i==null?Xh(a)&&Yy:i!=o&&(a.type&3)!==0,l=r&he.Host&&s===a,u=Ch(a,o,n,c,l);return u!==null?Is(e,o,u,a):Jn}function Ch(t,e,n,i,r){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:l;for(let f=d;f<h;f++){let p=o[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(r){let f=o[c];if(f&&Li(f)&&f.type===n)return c}return null}function Is(t,e,n,i){let r=t[n],s=e.data;if(lB(r)){let o=r;o.resolving&&rj(ij(s[n]));let a=Oh(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?zt(o.injectImpl):null,u=lA(t,i,he.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&aB(n,s[n],e)}finally{l!==null&&zt(l),Oh(a),o.resolving=!1,fA()}}return r}function _B(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Pc)?t[Pc]:void 0;return typeof e=="number"?e>=0?e&vA:vB:e}function YT(t,e,n){let i=1<<t;return!!(n[e+(t>>wA)]&i)}function ZT(t,e){return!(t&he.Self)&&!(t&he.Host&&e)}var gs=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return DA(this._tNode,this._lView,e,Zh(i),n)}};function vB(){return new gs(Ct(),ue())}function li(t){return Wc(()=>{let e=t.prototype.constructor,n=e[Rh]||Xy(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let s=r[Rh]||Xy(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Xy(t){return CS(t)?()=>{let e=Xy(Pt(t));return e&&e()}:vs(t)}function wB(t,e,n,i,r){let s=t,o=e;for(;s!==null&&o!==null&&o[te]&2048&&!(o[te]&512);){let a=CA(s,o,n,i|he.Self,Jn);if(a!==Jn)return a;let c=s.parent;if(!c){let l=o[GS];if(l){let u=l.get(n,Jn,i);if(u!==Jn)return u}c=TA(o),o=o[ra]}s=c}return r}function TA(t){let e=t[Q],n=e.type;return n===2?e.declTNode:n===1?t[Jt]:null}function av(t){return gB(Ct(),t)}var yh="__parameters__";function EB(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function SA(t,e,n){return Wc(()=>{let i=EB(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(yh)?c[yh]:Object.defineProperty(c,yh,{value:[]})[yh];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function IB(t){return typeof t=="function"}function bB(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}function DB(t){return t.flat(Number.POSITIVE_INFINITY)}function cv(t,e){t.forEach(n=>Array.isArray(n)?cv(n,e):e(n))}function AA(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Fh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function CB(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function TB(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let s=r-2;t[r]=t[s],r--}t[e]=n,t[e+1]=i}}function lv(t,e,n){let i=Yc(t,e);return i>=0?t[i|1]=n:(i=~i,TB(t,i,e,n)),i}function Sy(t,e){let n=Yc(t,e);if(n>=0)return t[n|1]}function Yc(t,e){return SB(t,e,1)}function SB(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let s=i+(r-i>>1),o=t[s<<n];if(e===o)return s<<n;o>e?r=s:i=s+1}return~(r<<n)}var yt=NS(SA("Optional"),8);var uv=NS(SA("SkipSelf"),4);var ea=new x("ENVIRONMENT_INITIALIZER"),RA=new x("INJECTOR",-1),xA=new x("INJECTOR_DEF_TYPES"),Lh=class{get(e,n=Oc){if(n===Oc){let i=new Error(`NullInjectorError: No provider for ${kt(e)}!`);throw i.name="NullInjectorError",i}return n}};function sf(t){return{\u0275providers:t}}function AB(...t){return{\u0275providers:MA(!0,t),\u0275fromNgModule:!0}}function MA(t,...e){let n=[],i=new Set,r,s=o=>{n.push(o)};return cv(e,o=>{let a=o;Jy(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&NA(r,s),n}function NA(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];dv(r,s=>{e(s,i)})}}function Jy(t,e,n,i){if(t=Pt(t),!t)return!1;let r=null,s=BT(t),o=!s&&yr(t);if(!s&&!o){let c=t.ngModule;if(s=BT(c),s)r=c;else return!1}else{if(o&&!o.standalone)return!1;r=t}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Jy(l,e,n,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let l;try{cv(s.imports,u=>{Jy(u,e,n,i)&&(l||=[],l.push(u))})}finally{}l!==void 0&&NA(l,e)}if(!a){let l=vs(r)||(()=>new r);e({provide:r,useFactory:l,deps:Ot},r),e({provide:xA,useValue:r,multi:!0},r),e({provide:ea,useValue:()=>y(r),multi:!0},r)}let c=s.providers;if(c!=null&&!a){let l=t;dv(c,u=>{e(u,l)})}}else return!1;return r!==t&&t.providers!==void 0}function dv(t,e){for(let n of t)TS(n)&&(n=n.\u0275providers),Array.isArray(n)?dv(n,e):e(n)}var RB=xe({provide:String,useValue:xe});function PA(t){return t!==null&&typeof t=="object"&&RB in t}function xB(t){return!!(t&&t.useExisting)}function MB(t){return!!(t&&t.useFactory)}function ta(t){return typeof t=="function"}function NB(t){return!!t.useClass}var of=new x("Set Injector scope."),Th={},PB={},Ay;function hv(){return Ay===void 0&&(Ay=new Lh),Ay}var Zt=class{},Bc=class extends Zt{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,t_(e,o=>this.processProvider(o)),this.records.set(RA,zo(void 0,this)),r.has("environment")&&this.records.set(Zt,zo(void 0,this));let s=this.records.get(of);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(xA,Ot,he.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=pr(this),i=zt(void 0),r;try{return e()}finally{pr(n),zt(i)}}get(e,n=Oc,i=he.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(VT))return e[VT](this);i=Zh(i);let r,s=pr(this),o=zt(void 0);try{if(!(i&he.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=VB(e)&&Yh(e);l&&this.injectableDefInScope(l)?c=zo(e_(e),Th):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=i&he.Self?hv():this.parent;return n=i&he.Optional&&n===Oc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[xh]=a[xh]||[]).unshift(kt(e)),s)throw a;return gj(a,e,"R3InjectorError",this.source)}else throw a}finally{zt(o),pr(s)}}resolveInjectorInitializers(){let e=pr(this),n=zt(void 0),i;try{let r=this.get(ea,Ot,he.Self);for(let s of r)s()}finally{pr(e),zt(n)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(kt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(e){e=Pt(e);let n=ta(e)?e:Pt(e&&e.provide),i=kB(e);if(!ta(e)&&e.multi===!0){let r=this.records.get(n);r||(r=zo(void 0,Th,!0),r.factory=()=>qy(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){return n.value===Th&&(n.value=PB,n.value=n.factory()),typeof n.value=="object"&&n.value&&LB(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Pt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function e_(t){let e=Yh(t),n=e!==null?e.factory:vs(t);if(n!==null)return n;if(t instanceof x)throw new S(204,!1);if(t instanceof Function)return OB(t);throw new S(204,!1)}function OB(t){if(t.length>0)throw new S(204,!1);let n=aj(t);return n!==null?()=>n.factory(t):()=>new t}function kB(t){if(PA(t))return zo(void 0,t.useValue);{let e=OA(t);return zo(e,Th)}}function OA(t,e,n){let i;if(ta(t)){let r=Pt(t);return vs(r)||e_(r)}else if(PA(t))i=()=>Pt(t.useValue);else if(MB(t))i=()=>t.useFactory(...qy(t.deps||[]));else if(xB(t))i=()=>y(Pt(t.useExisting));else{let r=Pt(t&&(t.useClass||t.provide));if(FB(t))i=()=>new r(...qy(t.deps));else return vs(r)||e_(r)}return i}function zo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function FB(t){return!!t.deps}function LB(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function VB(t){return typeof t=="function"||typeof t=="object"&&t instanceof x}function t_(t,e){for(let n of t)Array.isArray(n)?t_(n,e):n&&TS(n)?t_(n.\u0275providers,e):e(n)}function wr(t,e){t instanceof Bc&&t.assertNotDestroyed();let n,i=pr(t),r=zt(void 0);try{return e()}finally{pr(i),zt(r)}}function jB(t){if(!xS()&&!fj())throw new S(-203,!1)}function XT(t,e=null,n=null,i){let r=kA(t,e,n,i);return r.resolveInjectorInitializers(),r}function kA(t,e=null,n=null,i,r=new Set){let s=[n||Ot,AB(t)];return i=i||(typeof t=="object"?void 0:kt(t)),new Bc(s,e||hv(),i||null,r)}var Me=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return XT({name:""},r,i,"");{let s=i.name??"";return XT({name:s},i.parent,i.providers,s)}}};e.THROW_IF_NOT_FOUND=Oc,e.NULL=new Lh,e.\u0275prov=D({token:e,providedIn:"any",factory:()=>y(RA)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var n_;function FA(t){n_=t}function LA(){if(n_!==void 0)return n_;if(typeof document<"u")return document;throw new S(210,!1)}var Zc=new x("AppId",{providedIn:"root",factory:()=>BB}),BB="ng",fv=new x("Platform Initializer"),gn=new x("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var qt=new x("AnimationModuleType"),Xc=new x("CSP nonce",{providedIn:"root",factory:()=>LA().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function VA(t){return t instanceof Function?t():t}function UB(t){return(t??C(Me)).get(gn)==="browser"}function jA(t){return(t.flags&128)===128}var ri=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ri||{}),$B=/^>|^->|<!--|-->|--!>|<!-$/g,HB=/(<|>)/g,zB="\u200B$1\u200B";function qB(t){return t.replace($B,e=>e.replace(HB,zB))}var pv=new Map,GB=0;function WB(){return GB++}function KB(t){pv.set(t[Qc],t)}function BA(t){return pv.get(t)||null}function QB(t){pv.delete(t[Qc])}var i_=class{get lView(){return BA(this.lViewId)}constructor(e,n,i){this.lViewId=e,this.nodeIndex=n,this.native=i}};function Fre(t){let e=Ry(t);if(e){if(gr(e)){let n=e,i,r,s;if(UA(t)){if(i=XB(n,t),i==-1)throw new Error("The provided component was not found in the application");r=t}else if(YB(t)){if(i=JB(n,t),i==-1)throw new Error("The provided directive was not found in the application");s=eU(i,n)}else if(i=eS(n,t),i==-1)return null;let o=Yt(n[i]),a=Ry(o),c=a&&!Array.isArray(a)?a:JT(n,i,o);if(r&&c.component===void 0&&(c.component=r,hn(c.component,c)),s&&c.directives===void 0){c.directives=s;for(let l=0;l<s.length;l++)hn(s[l],c)}hn(c.native,c),e=c}}else{let n=t,i=n;for(;i=i.parentNode;){let r=Ry(i);if(r){let s=Array.isArray(r)?r:r.lView;if(!s)return null;let o=eS(s,n);if(o>=0){let a=Yt(s[o]),c=JT(s,o,a);hn(a,c),e=c;break}}}}return e||null}function JT(t,e,n){return new i_(t[Qc],e,n)}var r_="__ngContext__";function hn(t,e){gr(e)?(t[r_]=e[Qc],KB(e)):t[r_]=e}function Ry(t){let e=t[r_];return typeof e=="number"?BA(e):e||null}function UA(t){return t&&t.constructor&&t.constructor.\u0275cmp}function YB(t){return t&&t.constructor&&t.constructor.\u0275dir}function eS(t,e){let n=t[Q];for(let i=it;i<n.bindingStartIndex;i++)if(Yt(t[i])===e)return i;return-1}function ZB(t){if(t.child)return t.child;if(t.next)return t.next;for(;t.parent&&!t.parent.next;)t=t.parent;return t.parent&&t.parent.next}function XB(t,e){let n=t[Q].components;if(n)for(let i=0;i<n.length;i++){let r=n[i];if(ii(r,t)[ct]===e)return r}else if(ii(it,t)[ct]===e)return it;return-1}function JB(t,e){let n=t[Q].firstChild;for(;n;){let i=n.directiveStart,r=n.directiveEnd;for(let s=i;s<r;s++)if(t[s]===e)return n.index;n=ZB(n)}return-1}function eU(t,e){let n=e[Q].data[t];if(n.directiveStart===0)return Ot;let i=[];for(let r=n.directiveStart;r<n.directiveEnd;r++){let s=e[r];UA(s)||i.push(s)}return i}var tU;function mv(t,e){return tU(t,e)}function qo(t,e,n,i,r){if(i!=null){let s,o=!1;Vi(i)?s=i:gr(i)&&(o=!0,i=i[ci]);let a=Yt(i);t===0&&n!==null?r==null?GA(e,n,a):Vh(e,n,a,r||null,!0):t===1&&n!==null?Vh(e,n,a,r||null,!0):t===2?yU(e,a,o):t===3&&e.destroyNode(a),s!=null&&vU(e,t,s,n,r)}}function nU(t,e){return t.createText(e)}function iU(t,e,n){t.setValue(e,n)}function rU(t,e){return t.createComment(qB(e))}function $A(t,e,n){return t.createElement(e,n)}function sU(t,e){HA(t,e),e[ci]=null,e[Jt]=null}function oU(t,e,n,i,r,s){i[ci]=r,i[Jt]=e,lf(t,i,n,1,r,s)}function HA(t,e){e[ni].changeDetectionScheduler?.notify(),lf(t,e,e[$e],2,null,null)}function aU(t){let e=t[Lc];if(!e)return xy(t[Q],t);for(;e;){let n=null;if(gr(e))n=e[Lc];else{let i=e[Dt];i&&(n=i)}if(!n){for(;e&&!e[Fn]&&e!==t;)gr(e)&&xy(e[Q],e),e=e[gt];e===null&&(e=t),gr(e)&&xy(e[Q],e),n=e&&e[Fn]}e=n}}function cU(t,e,n,i){let r=Dt+i,s=n.length;i>0&&(n[r-1][Fn]=e),i<s-Dt?(e[Fn]=n[r],AA(n,Dt+i,e)):(n.push(e),e[Fn]=null),e[gt]=n;let o=e[Kc];o!==null&&n!==o&&lU(o,e);let a=e[ei];a!==null&&a.insertView(t),Ky(e),e[te]|=128}function lU(t,e){let n=t[Xo],r=e[gt][gt][fn];e[fn]!==r&&(t[te]|=K_.HasTransplantedViews),n===null?t[Xo]=[e]:n.push(e)}function zA(t,e){let n=t[Xo],i=n.indexOf(e);n.splice(i,1)}function Uc(t,e){if(t.length<=Dt)return;let n=Dt+e,i=t[n];if(i){let r=i[Kc];r!==null&&r!==t&&zA(r,i),e>0&&(t[n-1][Fn]=i[Fn]);let s=Fh(t,Dt+e);sU(i[Q],i);let o=s[ei];o!==null&&o.detachView(s[Q]),i[gt]=null,i[Fn]=null,i[te]&=-129}return i}function af(t,e){if(!(e[te]&256)){let n=e[$e];n.destroyNode&&lf(t,e,n,3,null,null),aU(e)}}function xy(t,e){if(!(e[te]&256)){e[te]&=-129,e[te]|=256,e[ys]&&ZC(e[ys]),dU(t,e),uU(t,e),e[Q].type===1&&e[$e].destroy();let n=e[Kc];if(n!==null&&Vi(e[gt])){n!==e[gt]&&zA(n,e);let i=e[ei];i!==null&&i.detachView(t)}QB(e)}}function uU(t,e){let n=t.cleanup,i=e[Fc];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else{let o=i[n[s+1]];n[s].call(o)}i!==null&&(e[Fc]=null);let r=e[mr];if(r!==null){e[mr]=null;for(let s=0;s<r.length;s++){let o=r[s];o()}}}function dU(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof Es)){let s=n[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],c=s[o+1];Xn(4,a,c);try{c.call(a)}finally{Xn(5,a,c)}}else{Xn(4,r,s);try{s.call(r)}finally{Xn(5,r,s)}}}}}function qA(t,e,n){return hU(t,e.parent,n)}function hU(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[ci];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:s}=t.data[i.directiveStart+r];if(s===ti.None||s===ti.Emulated)return null}return mn(i,n)}}function Vh(t,e,n,i,r){t.insertBefore(e,n,i,r)}function GA(t,e,n){t.appendChild(e,n)}function tS(t,e,n,i,r){i!==null?Vh(t,e,n,i,r):GA(t,e,n)}function fU(t,e,n,i){t.removeChild(e,n,i)}function gv(t,e){return t.parentNode(e)}function pU(t,e){return t.nextSibling(e)}function WA(t,e,n){return gU(t,e,n)}function mU(t,e,n){return t.type&40?mn(t,n):null}var gU=mU,nS;function cf(t,e,n,i){let r=qA(t,i,e),s=e[$e],o=i.parent||e[Jt],a=WA(o,i,e);if(r!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)tS(s,r,n[c],a,!1);else tS(s,r,n,a,!1);nS!==void 0&&nS(s,i,e,n,r)}function Sh(t,e){if(e!==null){let n=e.type;if(n&3)return mn(e,t);if(n&4)return s_(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return Sh(t,i);{let r=t[e.index];return Vi(r)?s_(-1,r):Yt(r)}}else{if(n&32)return mv(e,t)()||Yt(t[e.index]);{let i=KA(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=jc(t[fn]);return Sh(r,i)}else return Sh(t,e.next)}}}return null}function KA(t,e){if(e!==null){let i=t[fn][Jt],r=e.projection;return i.projection[r]}return null}function s_(t,e){let n=Dt+t+1;if(n<e.length){let i=e[n],r=i[Q].firstChild;if(r!==null)return Sh(i,r)}return e[_s]}function yU(t,e,n){let i=gv(t,e);i&&fU(t,i,e,n)}function yv(t,e,n,i,r,s,o){for(;n!=null;){let a=i[n.index],c=n.type;if(o&&e===0&&(a&&hn(Yt(a),i),n.flags|=2),(n.flags&32)!==32)if(c&8)yv(t,e,n.child,i,r,s,!1),qo(e,t,r,a,s);else if(c&32){let l=mv(n,i),u;for(;u=l();)qo(e,t,r,u,s);qo(e,t,r,a,s)}else c&16?QA(t,e,i,n,r,s):qo(e,t,r,a,s);n=o?n.projectionNext:n.next}}function lf(t,e,n,i,r,s){yv(n,i,t.firstChild,e,r,s,!1)}function _U(t,e,n){let i=e[$e],r=qA(t,n,e),s=n.parent||e[Jt],o=WA(s,n,e);QA(i,0,e,n,r,o)}function QA(t,e,n,i,r,s){let o=n[fn],c=o[Jt].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];qo(e,t,r,u,s)}else{let l=c,u=o[gt];jA(i)&&(l.flags|=128),yv(t,e,l,u,r,s,!0)}}function vU(t,e,n,i,r){let s=n[_s],o=Yt(n);s!==o&&qo(e,t,i,s,r);for(let a=Dt;a<n.length;a++){let c=n[a];lf(c[Q],c,t,e,i,s)}}function wU(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let s=i.indexOf("-")===-1?void 0:ri.DashCase;r==null?t.removeStyle(n,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=ri.Important),t.setStyle(n,i,r,s))}}function EU(t,e,n){t.setAttribute(e,"style",n)}function YA(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ZA(t,e,n){let{mergedAttrs:i,classes:r,styles:s}=n;i!==null&&Gy(t,e,i),r!==null&&YA(t,e,r),s!==null&&EU(t,e,s)}var _h;function IU(){if(_h===void 0&&(_h=null,et.trustedTypes))try{_h=et.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return _h}function uf(t){return IU()?.createHTML(t)||t}var vh;function XA(){if(vh===void 0&&(vh=null,et.trustedTypes))try{vh=et.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return vh}function iS(t){return XA()?.createHTML(t)||t}function rS(t){return XA()?.createScriptURL(t)||t}var jh=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${DS})`}};function As(t){return t instanceof jh?t.changingThisBreaksApplicationSecurity:t}function df(t,e){let n=bU(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${DS})`)}return n===e}function bU(t){return t instanceof jh&&t.getTypeName()||null}function DU(t){let e=new a_(t);return CU()?new o_(e):e}var o_=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(uf(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},a_=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=uf(e),n}};function CU(){try{return!!new window.DOMParser().parseFromString(uf(""),"text/html")}catch{return!1}}var TU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function _v(t){return t=String(t),t.match(TU)?t:"unsafe:"+t}function ji(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function Jc(...t){let e={};for(let n of t)for(let i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}var JA=ji("area,br,col,hr,img,wbr"),eR=ji("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),tR=ji("rp,rt"),SU=Jc(tR,eR),AU=Jc(eR,ji("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),RU=Jc(tR,ji("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),sS=Jc(JA,AU,RU,SU),nR=ji("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),xU=ji("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),MU=ji("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),NU=Jc(nR,xU,MU),PU=ji("script,style,template"),c_=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,i=!0;for(;n;){if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild){n=n.firstChild;continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}}return this.buf.join("")}startElement(e){let n=e.nodeName.toLowerCase();if(!sS.hasOwnProperty(n))return this.sanitizedSomething=!0,!PU.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let i=e.attributes;for(let r=0;r<i.length;r++){let s=i.item(r),o=s.name,a=o.toLowerCase();if(!NU.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;nR[a]&&(c=_v(c)),this.buf.push(" ",o,'="',oS(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=e.nodeName.toLowerCase();sS.hasOwnProperty(n)&&!JA.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(oS(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}},OU=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,kU=/([^\#-~ |!])/g;function oS(t){return t.replace(/&/g,"&amp;").replace(OU,function(e){let n=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((n-55296)*1024+(i-56320)+65536)+";"}).replace(kU,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var wh;function iR(t,e){let n=null;try{wh=wh||DU(t);let i=e?String(e):"";n=wh.getInertBodyElement(i);let r=5,s=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=wh.getInertBodyElement(i)}while(i!==s);let a=new c_().sanitizeChildren(aS(n)||n);return uf(a)}finally{if(n){let i=aS(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function aS(t){return"content"in t&&FU(t)?t.content:null}function FU(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var el=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(el||{});function rR(t){let e=vv();return e?iS(e.sanitize(el.HTML,t)||""):df(t,"HTML")?iS(As(t)):iR(LA(),Gc(t))}function LU(t){let e=vv();return e?e.sanitize(el.URL,t)||"":df(t,"URL")?As(t):_v(Gc(t))}function VU(t){let e=vv();if(e)return rS(e.sanitize(el.RESOURCE_URL,t)||"");if(df(t,"ResourceURL"))return rS(As(t));throw new S(904,!1)}function jU(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?VU:LU}function sR(t,e,n){return jU(e,n)(t)}function vv(){let t=ue();return t&&t[ni].sanitizer}var l_=class{};var BU="h",UU="b";var $U=()=>null;function wv(t,e,n=!1){return $U(t,e,n)}var u_=class{},Bh=class{};function HU(t){let e=Error(`No component factory found for ${kt(t)}.`);return e[zU]=t,e}var zU="ngComponent";var d_=class{resolveComponentFactory(e){throw HU(e)}},Er=(()=>{let e=class e{};e.NULL=new d_;let t=e;return t})();function qU(){return sa(Ct(),ue())}function sa(t,e){return new _e(mn(t,e))}var _e=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=qU;let t=e;return t})();function GU(t){return t instanceof _e?t.nativeElement:t}var bs=class{},Vn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>WU();let t=e;return t})();function WU(){let t=ue(),e=Ct(),n=ii(e.index,t);return(gr(n)?n:t)[$e]}var KU=(()=>{let e=class e{};e.\u0275prov=D({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),My={};function oR(t,e){let n=iT(t),i=n[xo];return e?.equal&&(i.equal=e.equal),n.set=r=>cy(i,r),n.update=r=>rT(i,r),n.asReadonly=QU.bind(n),n}function QU(){let t=this[xo];if(t.readonlyFn===void 0){let e=()=>this();e[xo]=t,t.readonlyFn=e}return t.readonlyFn}function aR(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var h_=class{constructor(){}supports(e){return e instanceof Map||aR(e)}create(){return new f_}},f_=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||aR(e)))throw new S(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{let s=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let i=e._prev;return n._next=e,n._prev=i,e._prev=n,i&&(i._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let r=this._records.get(e);this._maybeAddToChanges(r,n);let s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}let i=new p_(e);return this._records.set(e,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(i=>n(e[i],i))}},p_=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function cS(){return new Ev([new h_])}var Ev=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r){let s=r.factories.slice();i=i.concat(s)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||cS()),deps:[[e,new uv,new yt]]}}find(i){let r=this.factories.find(s=>s.supports(i));if(r)return r;throw new S(901,!1)}};e.\u0275prov=D({token:e,providedIn:"root",factory:cS});let t=e;return t})();function Uh(t,e,n,i,r=!1){for(;n!==null;){let s=e[n.index];s!==null&&i.push(Yt(s)),Vi(s)&&YU(s,i);let o=n.type;if(o&8)Uh(t,e,n.child,i);else if(o&32){let a=mv(n,e),c;for(;c=a();)i.push(c)}else if(o&16){let a=KA(e,n);if(Array.isArray(a))i.push(...a);else{let c=jc(e[fn]);Uh(c[Q],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function YU(t,e){for(let n=Dt;n<t.length;n++){let i=t[n],r=i[Q].firstChild;r!==null&&Uh(i[Q],i,r,e)}t[_s]!==t[ci]&&e.push(t[_s])}var cR=[];function ZU(t){return t[ys]??XU(t)}function XU(t){let e=cR.pop()??Object.create(e2);return e.lView=t,e}function JU(t){t.lView[ys]!==t&&(t.lView=null,cR.push(t))}var e2=ye(I({},oy),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Vc(t.lView)},consumerOnSignalRead(){this.lView[ys]=this}});function lR(t){return dR(t[Lc])}function uR(t){return dR(t[Fn])}function dR(t){for(;t!==null&&!Vi(t);)t=t[Fn];return t}var t2="ngOriginalError";function Ny(t){return t[t2]}var si=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Ny(e);for(;n&&Ny(n);)n=Ny(n);return n||null}},hR=new x("",{providedIn:"root",factory:()=>C(si).handleError.bind(void 0)});var fR=!1,n2=new x("",{providedIn:"root",factory:()=>fR});var Bi={};function jn(t=1){pR(He(),ue(),vr()+t,!1)}function pR(t,e,n,i){if(!i)if((e[te]&3)===3){let s=t.preOrderCheckHooks;s!==null&&bh(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Dh(e,s,0,n)}ws(n)}function T(t,e=he.Default){let n=ue();if(n===null)return y(t,e);let i=Ct();return DA(i,n,Pt(t),e)}function mR(){let t="invalid";throw new Error(t)}function gR(t,e,n,i,r,s){let o=mt(null);try{let a=null;r&fe.SignalBased&&(a=e[i][xo]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),r&fe.HasDecoratorInputTransform&&(s=t.inputTransforms[i].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,i):WS(e,a,i,s)}finally{mt(o)}}function i2(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)ws(~r);else{let s=r,o=n[++i],a=n[++i];tB(o,s);let c=e[s];a(2,c)}}}finally{ws(-1)}}function hf(t,e,n,i,r,s,o,a,c,l,u){let d=e.blueprint.slice();return d[ci]=r,d[te]=i|4|128|8|64,(l!==null||t&&t[te]&2048)&&(d[te]|=2048),eA(d),d[gt]=d[ra]=t,d[ct]=n,d[ni]=o||t&&t[ni],d[$e]=a||t&&t[$e],d[Zo]=c||t&&t[Zo]||null,d[Jt]=s,d[Qc]=WB(),d[Yo]=u,d[GS]=l,d[fn]=e.type==2?t[fn]:d,d}function oa(t,e,n,i,r){let s=t.data[e];if(s===null)s=r2(t,e,n,i,r),eB()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=i,s.attrs=r;let o=Zj();s.injectorIndex=o===null?-1:o.injectorIndex}return Ts(s,!0),s}function r2(t,e,n,i,r){let s=sA(),o=ev(),a=o?s:s&&s.parent,c=t.data[e]=u2(t,a,n,e,i,r);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function yR(t,e,n,i){if(n===0)return-1;let r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function _R(t,e,n,i,r){let s=vr(),o=i&2;try{ws(-1),o&&e.length>it&&pR(t,e,it,!1),Xn(o?2:0,r),n(i,r)}finally{ws(s),Xn(o?3:1,r)}}function Iv(t,e,n){if(Q_(e)){let i=mt(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{mt(i)}}}function bv(t,e,n){iA()&&(g2(t,e,n,mn(n,e)),(n.flags&64)===64&&ER(t,e,n))}function Dv(t,e,n=mn){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?n(e,t):t[o];t[r++]=a}}}function vR(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Cv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Cv(t,e,n,i,r,s,o,a,c,l,u){let d=it+i,h=d+r,f=s2(d,h),p=typeof l=="function"?l():l;return f[Q]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function s2(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:Bi);return n}function o2(t,e,n,i){let s=i.get(n2,fR)||n===ti.ShadowDom,o=t.selectRootElement(e,s);return a2(o),o}function a2(t){c2(t)}var c2=()=>null;function l2(t,e,n,i){let r=DR(e);r.push(n),t.firstCreatePass&&CR(t).push(i,r.length-1)}function u2(t,e,n,i,r,s){let o=e?e.injectorIndex:-1,a=0;return rA()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function lS(t,e,n,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;i??={};let a,c=fe.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(r!==null){if(!r.hasOwnProperty(s))continue;l=r[s]}t===0?uS(i,n,l,a,c):uS(i,n,l,a)}return i}function uS(t,e,n,i,r){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,i):s=t[n]=[e,i],r!==void 0&&s.push(r)}function d2(t,e,n){let i=e.directiveStart,r=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let u=i;u<r;u++){let d=s[u],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;c=lS(0,d.inputs,u,c,f),l=lS(1,d.outputs,u,l,p);let g=c!==null&&o!==null&&!LS(e)?S2(c,u,o):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function h2(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Tv(t,e,n,i,r,s,o,a){let c=mn(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[i])?(Av(t,n,u,i,r),Xh(e)&&f2(n,e.index)):e.type&3?(i=h2(i),r=o!=null?o(r,e.value||"",i):r,s.setProperty(c,i,r)):e.type&12}function f2(t,e){let n=ii(e,t);n[te]&16||(n[te]|=64)}function Sv(t,e,n,i){if(iA()){let r=i===null?null:{"":-1},s=_2(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&wR(t,e,n,o,r,a),r&&v2(n,i,r)}n.mergedAttrs=kc(n.mergedAttrs,n.attrs)}function wR(t,e,n,i,r,s){for(let l=0;l<i.length;l++)Zy(kh(n,e),t,i[l].type);E2(n,t.data.length,i.length);for(let l=0;l<i.length;l++){let u=i[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=yR(t,e,i.length,null);for(let l=0;l<i.length;l++){let u=i[l];n.mergedAttrs=kc(n.mergedAttrs,u.hostAttrs),I2(t,n,e,c,u),w2(c,u,r),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}d2(t,n,s)}function p2(t,e,n,i,r){let s=r.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;m2(o)!=a&&o.push(a),o.push(n,i,s)}}function m2(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function g2(t,e,n,i){let r=n.directiveStart,s=n.directiveEnd;Xh(n)&&b2(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||kh(n,e),hn(i,e);let o=n.initialInputs;for(let a=r;a<s;a++){let c=t.data[a],l=Is(e,t,a,n);if(hn(l,e),o!==null&&T2(e,a-r,l,c,n,o),Li(c)){let u=ii(n.index,e);u[ct]=Is(e,t,a,n)}}}function ER(t,e,n){let i=n.directiveStart,r=n.directiveEnd,s=n.index,o=nB();try{ws(s);for(let a=i;a<r;a++){let c=t.data[a],l=e[a];Qy(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&y2(c,l)}}finally{ws(-1),Qy(o)}}function y2(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function _2(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(VS(e,o.selectors,!1))if(i||(i=[]),Li(o))if(o.findHostDirectiveDefs!==null){let a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o);let c=a.length;m_(t,e,c)}else i.unshift(o),m_(t,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return i===null?null:[i,r]}function m_(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function v2(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let s=n[e[r+1]];if(s==null)throw new S(-301,!1);i.push(e[r],s)}}}function w2(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;Li(e)&&(n[""]=t)}}function E2(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function I2(t,e,n,i,r){t.data[i]=r;let s=r.factory||(r.factory=vs(r.type,!0)),o=new Es(s,Li(r),T);t.blueprint[i]=o,n[i]=o,p2(t,e,i,yR(t,n,r.hostVars,Bi),r)}function b2(t,e,n){let i=mn(e,t),r=vR(n),s=t[ni].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=ff(t,hf(t,r,null,o,i,e,null,s.createRenderer(i,n),null,null,null));t[e.index]=a}function D2(t,e,n,i,r,s){let o=mn(t,e);C2(e[$e],o,s,t.value,n,i,r)}function C2(t,e,n,i,r,s,o){if(s==null)t.removeAttribute(e,r,n);else{let a=o==null?Gc(s):o(s,i||"",r);t.setAttribute(e,r,a,n)}}function T2(t,e,n,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];gR(i,n,c,l,u,d)}}function S2(t,e,n){let i=null,r=0;for(;r<n.length;){let s=n[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){i===null&&(i=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],n[r+1]);break}}r+=2}return i}function IR(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function bR(t,e){let n=t.contentQueries;if(n!==null){let i=mt(null);try{for(let r=0;r<n.length;r+=2){let s=n[r],o=n[r+1];if(o!==-1){let a=t.data[o];iv(s),a.contentQueries(2,e[o],o)}}}finally{mt(i)}}}function ff(t,e){return t[Lc]?t[WT][Fn]=e:t[Lc]=e,t[WT]=e,e}function g_(t,e,n){iv(0);let i=mt(null);try{e(t,n)}finally{mt(i)}}function DR(t){return t[Fc]||(t[Fc]=[])}function CR(t){return t.cleanup||(t.cleanup=[])}function TR(t,e,n){return(t===null||Li(t))&&(n=Bj(n[e.index])),n[$e]}function SR(t,e){let n=t[Zo],i=n?n.get(si,null):null;i&&i.handleError(e)}function Av(t,e,n,i,r){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],u=t.data[o];gR(u,l,i,a,c,r)}}function A2(t,e,n){let i=XS(e,t);iU(t[$e],i,n)}var R2=100;function x2(t,e=!0){let n=t[ni],i=n.rendererFactory,r=!1;r||i.begin?.();try{M2(t)}catch(s){throw e&&SR(t,s),s}finally{r||(i.end?.(),n.inlineEffectRunner?.flush())}}function M2(t){y_(t,0);let e=0;for(;tA(t);){if(e===R2)throw new S(103,!1);e++,y_(t,1)}}function N2(t,e,n,i){let r=e[te];if((r&256)===256)return;let s=!1;!s&&e[ni].inlineEffectRunner?.flush(),rv(e);let o=null,a=null;!s&&P2(t)&&(a=ZU(e),o=QC(a));try{eA(e),Jj(t.bindingStartIndex),n!==null&&_R(t,e,n,2,i);let c=(r&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&bh(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Dh(e,d,0,null),Cy(e,0)}if(O2(e),AR(e,0),t.contentQueries!==null&&bR(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&bh(e,d)}else{let d=t.contentHooks;d!==null&&Dh(e,d,1),Cy(e,1)}i2(t,e);let l=t.components;l!==null&&xR(e,l,0);let u=t.viewQuery;if(u!==null&&g_(2,u,i),!s)if(c){let d=t.viewCheckHooks;d!==null&&bh(e,d)}else{let d=t.viewHooks;d!==null&&Dh(e,d,2),Cy(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Dy]){for(let d of e[Dy])d();e[Dy]=null}s||(e[te]&=-73)}catch(c){throw Vc(e),c}finally{a!==null&&(YC(a,o),JU(a)),sv()}}function P2(t){return t.type!==2}function AR(t,e){for(let n=lR(t);n!==null;n=uR(n))for(let i=Dt;i<n.length;i++){let r=n[i];RR(r,e)}}function O2(t){for(let e=lR(t);e!==null;e=uR(e)){if(!(e[te]&K_.HasTransplantedViews))continue;let n=e[Xo];for(let i=0;i<n.length;i++){let r=n[i],s=r[gt];Hj(r)}}}function k2(t,e,n){let i=ii(e,t);RR(i,n)}function RR(t,e){Z_(t)&&y_(t,e)}function y_(t,e){let i=t[Q],r=t[te],s=t[ys],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&ay(s)),s&&(s.dirty=!1),t[te]&=-9217,o)N2(i,t,i.template,t[ct]);else if(r&8192){AR(t,1);let a=i.components;a!==null&&xR(t,a,1)}}function xR(t,e,n){for(let i=0;i<e.length;i++)k2(t,e[i],n)}function Rv(t){for(t[ni].changeDetectionScheduler?.notify();t;){t[te]|=64;let e=jc(t);if(Pj(t)&&!e)return t;t=e}return null}var Ds=class{get rootNodes(){let e=this._lView,n=e[Q];return Uh(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ct]}set context(e){this._lView[ct]=e}get destroyed(){return(this._lView[te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[gt];if(Vi(e)){let n=e[Mh],i=n?n.indexOf(this):-1;i>-1&&(Uc(e,i),Fh(n,i))}this._attachedToViewContainer=!1}af(this._lView[Q],this._lView)}onDestroy(e){nA(this._lView,e)}markForCheck(){Rv(this._cdRefInjectingView||this._lView)}detach(){this._lView[te]&=-129}reattach(){Ky(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,x2(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,HA(this._lView[Q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=e,Ky(this._lView)}},ui=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=F2;let t=e;return t})();function F2(t){return L2(Ct(),ue(),(t&16)===16)}function L2(t,e,n){if(Xh(t)&&!n){let i=ii(t.index,e);return new Ds(i,i)}else if(t.type&47){let i=e[fn];return new Ds(i,e)}return null}var MR=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=V2,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),__=class extends MR{constructor(e){super(),this._lView=e}onDestroy(e){return nA(this._lView,e),()=>qj(this._lView,e)}};function V2(){return new __(ue())}var dS=new Set;function tl(t){dS.has(t)||(dS.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var v_=class extends q{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,i){let r=e,s=n||(()=>null),o=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Py(s),r&&(r=Py(r)),o&&(o=Py(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof Ae&&e.add(a),a}};function Py(t){return e=>{setTimeout(t,void 0,e)}}var Ie=v_;function hS(...t){}function j2(){let t=typeof et.requestAnimationFrame=="function",e=et[t?"requestAnimationFrame":"setTimeout"],n=et[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var L=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ie(!1),this.onMicrotaskEmpty=new Ie(!1),this.onStable=new Ie(!1),this.onError=new Ie(!1),typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=j2().nativeRequestAnimationFrame,$2(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new S(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,B2,hS,hS);try{return s.runTask(o,n,i)}finally{s.cancelTask(o)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},B2={};function xv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function U2(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(et,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,w_(t),t.isCheckStableRunning=!0,xv(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),w_(t))}function $2(t){let e=()=>{U2(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{if(H2(a))return n.invokeTask(r,s,o,a);try{return fS(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),pS(t)}},onInvoke:(n,i,r,s,o,a,c)=>{try{return fS(t),n.invoke(r,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),pS(t)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,w_(t),xv(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function w_(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function fS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function pS(t){t._nesting--,xv(t)}function H2(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Go=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Go||{}),z2={destroy(){}};function Mv(t,e){!e&&jB(Mv);let n=e?.injector??C(Me);if(!UB(n))return z2;tl("NgAfterNextRender");let i=n.get(Nv),r=i.handler??=new I_,s=e?.phase??Go.MixedReadWrite,o=()=>{r.unregister(c),a()},a=n.get(MR).onDestroy(o),c=new E_(n,s,()=>{o(),t()});return r.register(c),{destroy:o}}var E_=class{constructor(e,n,i){this.phase=n,this.callbackFn=i,this.zone=e.get(L),this.errorHandler=e.get(si,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},I_=class{constructor(){this.executingCallbacks=!1,this.buckets={[Go.EarlyRead]:new Set,[Go.Write]:new Set,[Go.MixedReadWrite]:new Set,[Go.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){let e=!1;this.executingCallbacks=!0;for(let n of Object.values(this.buckets))for(let i of n)e=!0,i.invoke();this.executingCallbacks=!1;for(let n of this.deferredCallbacks)this.buckets[n.phase].add(n);return this.deferredCallbacks.clear(),e}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Nv=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let s of i)s();return!!this.handler?.execute()||i.length>0}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=D({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function q2(t,e){let n=ii(e,t),i=n[Q];G2(i,n);let r=n[ci];r!==null&&n[Yo]===null&&(n[Yo]=wv(r,n[Zo])),Pv(i,n,n[ct])}function G2(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Pv(t,e,n){rv(e);try{let i=t.viewQuery;i!==null&&g_(1,i,n);let r=t.template;r!==null&&_R(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&bR(t,e),t.staticViewQueries&&g_(2,t.viewQuery,n);let s=t.components;s!==null&&W2(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[te]&=-5,sv()}}function W2(t,e){for(let n=0;n<e.length;n++)q2(t,e[n])}function $h(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=$y(r,a);else if(s==2){let c=a,l=e[++o];i=$y(i,c+": "+l+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var Hh=class extends Er{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=yr(e);return new na(n,this.ngModule)}};function mS(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function K2(t){let e=t.toLowerCase();return e==="svg"?ZS:e==="math"?Lj:null}var b_=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Zh(i);let r=this.injector.get(e,My,i);return r!==My||n===My?r:this.parentInjector.get(e,n,i)}},na=class extends Bh{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=mS(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return mS(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Aj(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){r=r||this.ngModule;let s=r instanceof Zt?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let o=s?new b_(e,s):e,a=o.get(bs,null);if(a===null)throw new S(407,!1);let c=o.get(KU,null),l=o.get(Nv,null),u=o.get(l_,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:u},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=i?o2(h,i,this.componentDef.encapsulation,o):$A(h,f,K2(f)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let v=null;p!==null&&(v=wv(p,o,!0));let E=Cv(0,null,null,1,0,null,null,null,null,null,null),A=hf(null,E,null,g,null,null,d,h,o,null,v);rv(A);let N,O;try{let K=this.componentDef,j,ae=null;K.findHostDirectiveDefs?(j=[],ae=new Map,K.findHostDirectiveDefs(K,j,ae),j.push(K)):j=[K];let De=Q2(A,p),Mt=Y2(De,p,K,j,A,d,h);O=Y_(E,it),p&&J2(h,K,p,i),n!==void 0&&e$(O,this.ngContentSelectors,n),N=X2(Mt,K,j,ae,A,[t$]),Pv(E,A,null)}finally{sv()}return new D_(this.componentType,N,sa(O,A),A,O)}},D_=class extends u_{constructor(e,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ds(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Av(s[Q],s,r,e,n),this.previousInputValues.set(e,n);let o=ii(this._tNode.index,s);Rv(o)}}get injector(){return new gs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Q2(t,e){let n=t[Q],i=it;return t[i]=e,oa(n,i,2,"#host",null)}function Y2(t,e,n,i,r,s,o){let a=r[Q];Z2(i,t,e,o);let c=null;e!==null&&(c=wv(e,r[Zo]));let l=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=hf(r,vR(n),null,u,r[t.index],t,s,l,null,null,c);return a.firstCreatePass&&m_(a,t,i.length-1),ff(r,d),r[t.index]=d}function Z2(t,e,n,i){for(let r of t)e.mergedAttrs=kc(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&($h(e,e.mergedAttrs,!0),n!==null&&ZA(i,n,e))}function X2(t,e,n,i,r,s){let o=Ct(),a=r[Q],c=mn(o,r);wR(a,r,o,n,null,i);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,h=Is(r,a,d,o);hn(h,r)}ER(a,r,o),c&&hn(c,r);let l=Is(r,a,o.directiveStart+o.componentOffset,o);if(t[ct]=r[ct]=l,s!==null)for(let u of s)u(l,e);return Iv(a,o,t),l}function J2(t,e,n,i){if(i)Gy(t,n,["ng-version","17.1.0"]);else{let{attrs:r,classes:s}=Rj(e.selectors[0]);r&&Gy(t,n,r),s&&s.length>0&&YA(t,n,s.join(" "))}}function e$(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let s=n[r];i.push(s!=null?Array.from(s):null)}}function t$(){let t=Ct();rf(ue()[Q],t)}function n$(t){return Object.getPrototypeOf(t.prototype).constructor}function Ye(t){let e=n$(t.type),n=!0,i=[t];for(;e;){let r;if(Li(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new S(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let o=t;o.inputs=Eh(t.inputs),o.inputTransforms=Eh(t.inputTransforms),o.declaredInputs=Eh(t.declaredInputs),o.outputs=Eh(t.outputs);let a=r.hostBindings;a&&a$(t,a);let c=r.viewQuery,l=r.contentQueries;if(c&&s$(t,c),l&&o$(t,l),i$(t,r),ZV(t.outputs,r.outputs),Li(r)&&r.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Ye&&(n=!1)}}e=Object.getPrototypeOf(e)}r$(i)}function i$(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function r$(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=kc(r.hostAttrs,n=kc(n,r.hostAttrs))}}function Eh(t){return t===Qo?{}:t===Ot?[]:t}function s$(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function o$(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,s)=>{e(i,r,s),n(i,r,s)}:t.contentQueries=e}function a$(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function Ui(t){let e=t.inputConfig,n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(n[i]=r[3])}t.inputTransforms=n}var Lre=new RegExp(`^(\\d+)*(${UU}|${BU})*(.*)`);var c$=()=>null;function $c(t,e){return c$(t,e)}function pf(t,e,n,i){let r=e.tView,o=t[te]&4096?4096:16,a=hf(t,r,n,o,null,e,null,null,null,i?.injector??null,i?.dehydratedView??null),c=t[e.index];a[Kc]=c;let l=t[ei];return l!==null&&(a[ei]=l.createEmbeddedView(r)),Pv(r,a,n),a}function NR(t,e){let n=Dt+e;if(n<t.length)return t[n]}function Hc(t,e){return!e||e.firstChild===null||jA(t)}function mf(t,e,n,i=!0){let r=e[Q];if(cU(r,e,t,n),i){let o=s_(n,t),a=e[$e],c=gv(a,t[_s]);c!==null&&oU(r,t[Jt],a,e,c,o)}let s=e[Yo];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function PR(t,e){let n=Uc(t,e);return n!==void 0&&af(n[Q],n),n}var yn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=l$;let t=e;return t})();function l$(){let t=Ct();return kR(t,ue())}var u$=yn,OR=class extends u${constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return sa(this._hostTNode,this._hostLView)}get injector(){return new gs(this._hostTNode,this._hostLView)}get parentInjector(){let e=ov(this._hostTNode,this._hostLView);if(_A(e)){let n=Ph(e,this._hostLView),i=Nh(e),r=n[Q].data[i+8];return new gs(r,n)}else return new gs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=gS(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Dt}createEmbeddedView(e,n,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=$c(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,r,Hc(this._hostTNode,o)),a}createComponent(e,n,i,r,s){let o=e&&!IB(e),a;if(o)a=n;else{let p=n||{};a=p.index,i=p.injector,r=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new na(yr(e)),l=i||this.parentInjector;if(!s&&c.ngModule==null){let g=(o?l:this.parentInjector).get(Zt,null);g&&(s=g)}let u=yr(c.componentType??{}),d=$c(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,r,h,s);return this.insertImpl(f.hostView,a,Hc(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if($j(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[gt],l=new OR(c,c[Jt],c[gt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return mf(o,r,s,i),e.attachToViewContainerRef(),AA(Oy(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=gS(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=Uc(this._lContainer,n);i&&(Fh(Oy(this._lContainer),n),af(i[Q],i))}detach(e){let n=this._adjustIndex(e,-1),i=Uc(this._lContainer,n);return i&&Fh(Oy(this._lContainer),n)!=null?new Ds(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function gS(t){return t[Mh]}function Oy(t){return t[Mh]||(t[Mh]=[])}function kR(t,e){let n,i=e[t.index];return Vi(i)?n=i:(n=IR(i,e,null,t),e[t.index]=n,ff(e,n)),h$(n,e,t,i),new OR(n,t,e)}function d$(t,e){let n=t[$e],i=n.createComment(""),r=mn(e,t),s=gv(n,r);return Vh(n,s,i,pU(n,r),!1),i}var h$=m$,f$=()=>!1;function p$(t,e,n){return f$(t,e,n)}function m$(t,e,n,i){if(t[_s])return;let r;n.type&8?r=Yt(i):r=d$(e,n),t[_s]=r}function g$(t,e,n){return t[e]=n}function di(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function y$(t,e,n,i,r,s,o,a,c){let l=e.consts,u=oa(e,t,4,o||null,Jo(l,a));Sv(e,n,u,Jo(l,c)),rf(e,u);let d=u.tView=Cv(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Xt(t,e,n,i,r,s,o,a){let c=ue(),l=He(),u=t+it,d=l.firstCreatePass?y$(u,l,c,e,n,i,r,s,o):l.data[u];Ts(d,!1);let h=_$(l,c,d,t);tf()&&cf(l,c,h,d),hn(h,c);let f=IR(h,c,h,d);return c[u]=f,ff(c,f),p$(f,d,c),Jh(d)&&bv(l,c,d),o!=null&&Dv(c,d,a),Xt}var _$=v$;function v$(t,e,n,i){return nf(!0),e[$e].createComment("")}function hi(t,e,n,i){let r=ue(),s=Ss();if(di(r,s,e)){let o=He(),a=ef();D2(a,r,t,e,n,i)}return hi}function w$(t,e,n,i){return di(t,Ss(),n)?e+Gc(n)+i:Bi}function Ih(t,e){return t<<17|e<<2}function Cs(t){return t>>17&32767}function E$(t){return(t&2)==2}function I$(t,e){return t&131071|e<<17}function C_(t){return t|2}function ia(t){return(t&131068)>>2}function ky(t,e){return t&-131069|e<<2}function b$(t){return(t&1)===1}function T_(t){return t|1}function D$(t,e,n,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Cs(o),c=ia(o);t[i]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Yc(d,u)>0)&&(l=!0)}else u=n;if(r)if(c!==0){let h=Cs(t[a+1]);t[i+1]=Ih(h,a),h!==0&&(t[h+1]=ky(t[h+1],i)),t[a+1]=I$(t[a+1],i)}else t[i+1]=Ih(a,0),a!==0&&(t[a+1]=ky(t[a+1],i)),a=i;else t[i+1]=Ih(c,0),a===0?a=i:t[c+1]=ky(t[c+1],i),c=i;l&&(t[i+1]=C_(t[i+1])),yS(t,u,i,!0),yS(t,u,i,!1),C$(e,u,t,i,s),o=Ih(a,c),s?e.classBindings=o:e.styleBindings=o}function C$(t,e,n,i,r){let s=r?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Yc(s,e)>=0&&(n[i+1]=T_(n[i+1]))}function yS(t,e,n,i){let r=t[n+1],s=e===null,o=i?Cs(r):ia(r),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];T$(c,e)&&(a=!0,t[o+1]=i?T_(l):C_(l)),o=i?Cs(l):ia(l)}a&&(t[n+1]=i?C_(r):T_(r))}function T$(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Yc(t,e)>=0:!1}var kn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function S$(t){return t.substring(kn.key,kn.keyEnd)}function A$(t){return R$(t),FR(t,LR(t,0,kn.textEnd))}function FR(t,e){let n=kn.textEnd;return n===e?-1:(e=kn.keyEnd=x$(t,kn.key=e,n),LR(t,e,n))}function R$(t){kn.key=0,kn.keyEnd=0,kn.value=0,kn.valueEnd=0,kn.textEnd=t.length}function LR(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function x$(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Rs(t,e,n){let i=ue(),r=Ss();if(di(i,r,e)){let s=He(),o=ef();Tv(s,o,i,t,e,i[$e],n,!1)}return Rs}function S_(t,e,n,i,r){let s=e.inputs,o=r?"class":"style";Av(t,n,s[o],o,i)}function Ov(t,e,n){return jR(t,e,n,!1),Ov}function $i(t,e){return jR(t,e,null,!0),$i}function VR(t){N$(V$,M$,t,!0)}function M$(t,e){for(let n=A$(e);n>=0;n=FR(e,n))lv(t,S$(e),!0)}function jR(t,e,n,i){let r=ue(),s=He(),o=aA(2);if(s.firstUpdatePass&&UR(s,t,o,i),e!==Bi&&di(r,o,e)){let a=s.data[vr()];$R(s,a,r,r[$e],t,r[o+1]=B$(e,n),i,o)}}function N$(t,e,n,i){let r=He(),s=aA(2);r.firstUpdatePass&&UR(r,null,s,i);let o=ue();if(n!==Bi&&di(o,s,n)){let a=r.data[vr()];if(HR(a,i)&&!BR(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=$y(c,n||"")),S_(r,a,o,n,i)}else j$(r,a,o,o[$e],o[s+1],o[s+1]=L$(t,e,n),i,s)}}function BR(t,e){return e>=t.expandoStartIndex}function UR(t,e,n,i){let r=t.data;if(r[n+1]===null){let s=r[vr()],o=BR(t,n);HR(s,i)&&e===null&&!o&&(e=!1),e=P$(r,s,e,i),D$(r,s,e,n,o,i)}}function P$(t,e,n,i){let r=nv(t),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=Fy(null,t,e,n,i),n=zc(n,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==r)if(n=Fy(r,t,e,n,i),s===null){let c=O$(t,e,i);c!==void 0&&Array.isArray(c)&&(c=Fy(null,t,e,c[1],i),c=zc(c,e.attrs,i),k$(t,e,i,c))}else s=F$(t,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),n}function O$(t,e,n){let i=n?e.classBindings:e.styleBindings;if(ia(i)!==0)return t[Cs(i)]}function k$(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[Cs(r)]=i}function F$(t,e,n){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=t[s].hostAttrs;i=zc(i,o,n)}return zc(i,e.attrs,n)}function Fy(t,e,n,i,r){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],i=zc(i,s.hostAttrs,r),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function zc(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),lv(t,o,n?!0:e[++s]))}return t===void 0?null:t}function L$(t,e,n){if(n==null||n==="")return Ot;let i=[],r=As(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else typeof r=="string"&&e(i,r);return i}function V$(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&lv(t,i,n)}function j$(t,e,n,i,r,s,o,a){r===Bi&&(r=Ot);let c=0,l=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let h=c<r.length?r[c+1]:void 0,f=l<s.length?s[l+1]:void 0,p=null,g;u===d?(c+=2,l+=2,h!==f&&(p=d,g=f)):d===null||u!==null&&u<d?(c+=2,p=u):(l+=2,p=d,g=f),p!==null&&$R(t,e,n,i,p,g,o,a),u=c<r.length?r[c]:null,d=l<s.length?s[l]:null}}function $R(t,e,n,i,r,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=b$(l)?_S(c,e,n,r,ia(l),o):void 0;if(!zh(u)){zh(s)||E$(l)&&(s=_S(c,null,n,r,a,o));let d=XS(vr(),n);wU(i,o,d,r,s)}}function _S(t,e,n,i,r,s){let o=e===null,a;for(;r>0;){let c=t[r],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[r+1];h===Bi&&(h=d?Ot:void 0);let f=d?Sy(h,i):u===i?h:void 0;if(l&&!zh(f)&&(f=Sy(c,i)),zh(f)&&(a=f,o))return a;let p=t[r+1];r=o?Cs(p):ia(p)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Sy(c,i))}return a}function zh(t){return t!==void 0}function B$(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=kt(As(t)))),t}function HR(t,e){return(t.flags&(e?8:16))!==0}var A_=class{destroy(e){}updateValue(e,n){}swap(e,n){let i=Math.min(e,n),r=Math.max(e,n),s=this.detach(r);if(r-i>1){let o=this.detach(i);this.attach(i,s),this.attach(r,o)}else this.attach(i,s)}move(e,n){this.attach(n,this.detach(e))}};function Ly(t,e,n,i,r){return t===n&&Object.is(e,i)?1:Object.is(r(t,e),r(n,i))?-1:0}function U$(t,e,n){let i,r,s=0,o=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;s<=o&&s<=a;){let c=t.at(s),l=e[s],u=Ly(s,c,s,l,n);if(u!==0){u<0&&t.updateValue(s,l),s++;continue}let d=t.at(o),h=e[a],f=Ly(o,d,a,h,n);if(f!==0){f<0&&t.updateValue(o,h),o--,a--;continue}let p=n(s,c),g=n(o,d),v=n(s,l);if(Object.is(v,g)){let E=n(a,h);Object.is(E,p)?(t.swap(s,o),t.updateValue(o,h),a--,o--):t.move(o,s),t.updateValue(s,l),s++;continue}if(i??=new qh,r??=wS(t,s,o,n),R_(t,i,s,v))t.updateValue(s,l),s++,o++;else if(r.has(v))i.set(p,t.detach(s)),o--;else{let E=t.create(s,e[s]);t.attach(s,E),s++,o++}}for(;s<=a;)vS(t,i,n,s,e[s]),s++}else if(e!=null){let a=e[Symbol.iterator](),c=a.next();for(;!c.done&&s<=o;){let l=t.at(s),u=c.value,d=Ly(s,l,s,u,n);if(d!==0)d<0&&t.updateValue(s,u),s++,c=a.next();else{i??=new qh,r??=wS(t,s,o,n);let h=n(s,u);if(R_(t,i,s,h))t.updateValue(s,u),s++,o++,c=a.next();else if(!r.has(h))t.attach(s,t.create(s,u)),s++,o++,c=a.next();else{let f=n(s,l);i.set(f,t.detach(s)),o--}}}for(;!c.done;)vS(t,i,n,t.length,c.value),c=a.next()}for(;s<=o;)t.destroy(t.detach(o--));i?.forEach(a=>{t.destroy(a)})}function R_(t,e,n,i){return e!==void 0&&e.has(i)?(t.attach(n,e.get(i)),e.delete(i),!0):!1}function vS(t,e,n,i,r){if(R_(t,e,i,n(i,r)))t.updateValue(i,r);else{let s=t.create(i,r);t.attach(i,s)}}function wS(t,e,n,i){let r=new Set;for(let s=e;s<=n;s++)r.add(i(s,t.at(s)));return r}var qh=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,i]of this.kvMap)if(e(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,n)}}};function kv(t,e,n){tl("NgControlFlow");let i=ue(),r=Ss(),s=P_(i,it+t),o=0;if(di(i,r,e)){let a=mt(null);try{if(PR(s,o),e!==-1){let c=O_(i[Q],it+e),l=$c(s,c.tView.ssrId),u=pf(i,c,n,{dehydratedView:l});mf(s,u,o,Hc(c,l))}}finally{mt(a)}}else{let a=NR(s,o);a!==void 0&&(a[ct]=n)}}var x_=class{constructor(e,n,i){this.lContainer=e,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-Dt}};function jre(t){return t}function Bre(t,e){return e}var M_=class{constructor(e,n,i){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=i}};function Ure(t,e,n,i,r,s,o,a,c,l,u,d,h){tl("NgControlFlow");let f=c!==void 0,p=ue(),g=a?o.bind(p[fn][ct]):o,v=new M_(f,g);p[it+t]=v,Xt(t+1,e,n,i,r,s),f&&Xt(t+2,c,l,u,d,h)}var N_=class extends A_{constructor(e,n,i){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=i,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Dt}at(e){return this.getLView(e)[ct].$implicit}attach(e,n){let i=n[Yo];this.needsIndexUpdate||=e!==this.length,mf(this.lContainer,n,e,Hc(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,$$(this.lContainer,e)}create(e,n){let i=$c(this.lContainer,this.templateTNode.tView.ssrId);return pf(this.hostLView,this.templateTNode,new x_(this.lContainer,n,e),{dehydratedView:i})}destroy(e){af(e[Q],e)}updateValue(e,n){this.getLView(e)[ct].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ct].$index=e}getLView(e){return H$(this.lContainer,e)}};function $re(t){let e=mt(null),n=vr();try{let i=ue(),r=i[Q],s=i[n];if(s.liveCollection===void 0){let a=n+1,c=P_(i,a),l=O_(r,a);s.liveCollection=new N_(c,i,l)}else s.liveCollection.reset();let o=s.liveCollection;if(U$(o,t,s.trackByFn),o.updateIndexes(),s.hasEmptyBlock){let a=Ss(),c=o.length===0;if(di(i,a,c)){let l=n+2,u=P_(i,l);if(c){let d=O_(r,l),h=$c(u,d.tView.ssrId),f=pf(i,d,void 0,{dehydratedView:h});mf(u,f,0,Hc(d,h))}else PR(u,0)}}}finally{mt(e)}}function P_(t,e){return t[e]}function $$(t,e){return Uc(t,e)}function H$(t,e){return NR(t,e)}function O_(t,e){return Y_(t,e)}function z$(t,e,n,i,r,s){let o=e.consts,a=Jo(o,r),c=oa(e,t,2,i,a);return Sv(e,n,c,Jo(o,s)),c.attrs!==null&&$h(c,c.attrs,!1),c.mergedAttrs!==null&&$h(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Lt(t,e,n,i){let r=ue(),s=He(),o=it+t,a=r[$e],c=s.firstCreatePass?z$(o,s,r,e,n,i):s.data[o],l=q$(s,r,c,a,e,t);r[o]=l;let u=Jh(c);return Ts(c,!0),ZA(a,l,c),(c.flags&32)!==32&&tf()&&cf(s,r,l,c),Gj()===0&&hn(l,r),Wj(),u&&(bv(s,r,c),Iv(s,c,r)),i!==null&&Dv(r,c),Lt}function Tt(){let t=Ct();ev()?tv():(t=t.parent,Ts(t,!1));let e=t;Qj(e)&&Yj(),Kj();let n=He();return n.firstCreatePass&&(rf(n,t),Q_(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&uB(e)&&S_(n,e,ue(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&dB(e)&&S_(n,e,ue(),e.stylesWithoutHost,!1),Tt}function Ir(t,e,n,i){return Lt(t,e,n,i),Tt(),Ir}var q$=(t,e,n,i,r,s)=>(nf(!0),$A(i,r,oB()));function G$(t,e,n,i,r){let s=e.consts,o=Jo(s,i),a=oa(e,t,8,"ng-container",o);o!==null&&$h(a,o,!0);let c=Jo(s,r);return Sv(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function zR(t,e,n){let i=ue(),r=He(),s=t+it,o=r.firstCreatePass?G$(s,r,i,e,n):r.data[s];Ts(o,!0);let a=W$(r,i,o,t);return i[s]=a,tf()&&cf(r,i,a,o),hn(a,i),Jh(o)&&(bv(r,i,o),Iv(r,o,i)),n!=null&&Dv(i,o),zR}function qR(){let t=Ct(),e=He();return ev()?tv():(t=t.parent,Ts(t,!1)),e.firstCreatePass&&(rf(e,t),Q_(t)&&e.queries.elementEnd(t)),qR}function Fv(t,e,n){return zR(t,e,n),qR(),Fv}var W$=(t,e,n,i)=>(nf(!0),rU(e[$e],""));function Lv(){return ue()}function gf(t,e,n){let i=ue(),r=Ss();if(di(i,r,e)){let s=He(),o=ef();Tv(s,o,i,t,e,i[$e],n,!0)}return gf}function K$(t,e,n){let i=ue(),r=Ss();if(di(i,r,e)){let s=He(),o=ef(),a=nv(s.data),c=TR(a,o,i);Tv(s,o,i,t,e,c,n,!0)}return K$}var ms=void 0;function Q$(t){let e=t,n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&i===0?1:5}var Y$=["en",[["a","p"],["AM","PM"],ms],[["AM","PM"],ms,ms],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ms,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ms,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ms,"{1} 'at' {0}",ms],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Q$],Vy={};function Vv(t){let e=Z$(t),n=ES(e);if(n)return n;let i=e.split("-")[0];if(n=ES(i),n)return n;if(i==="en")return Y$;throw new S(701,!1)}function ES(t){return t in Vy||(Vy[t]=et.ng&&et.ng.common&&et.ng.common.locales&&et.ng.common.locales[t]),Vy[t]}var aa=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(aa||{});function Z$(t){return t.toLowerCase().replace(/_/g,"-")}var Gh="en-US";var X$=Gh;function J$(t){sj(t,"Expected localeId to be defined"),typeof t=="string"&&(X$=t.toLowerCase().replace(/_/g,"-"))}function xs(t){return!!t&&typeof t.then=="function"}function GR(t){return!!t&&typeof t.subscribe=="function"}function lt(t,e,n,i){let r=ue(),s=He(),o=Ct();return WR(s,r,r[$e],o,t,e,i),lt}function eH(t,e){let n=Ct(),i=ue(),r=He(),s=nv(r.data),o=TR(s,n,i);return WR(r,i,o,n,t,e),eH}function tH(t,e,n,i){let r=t.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===n&&r[s+1]===i){let a=e[Fc],c=r[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function WR(t,e,n,i,r,s,o){let a=Jh(i),l=t.firstCreatePass&&CR(t),u=e[ct],d=DR(e),h=!0;if(i.type&3||o){let g=mn(i,e),v=o?o(g):g,E=d.length,A=o?O=>o(Yt(O[i.index])):i.index,N=null;if(!o&&a&&(N=tH(t,e,r,i.index)),N!==null){let O=N.__ngLastListenerFn__||N;O.__ngNextListenerFn__=s,N.__ngLastListenerFn__=s,h=!1}else{s=bS(i,e,u,s,!1);let O=n.listen(v,r,s);d.push(s,O),l&&l.push(r,A,E,E+1)}}else s=bS(i,e,u,s,!1);let f=i.outputs,p;if(h&&f!==null&&(p=f[r])){let g=p.length;if(g)for(let v=0;v<g;v+=2){let E=p[v],A=p[v+1],K=e[E][A].subscribe(s),j=d.length;d.push(s,K),l&&l.push(r,i.index,j,-(j+1))}}}function IS(t,e,n,i){try{return Xn(6,e,n),n(i)!==!1}catch(r){return SR(t,r),!1}finally{Xn(7,e,n)}}function bS(t,e,n,i,r){return function s(o){if(o===Function)return i;let a=t.componentOffset>-1?ii(t.index,e):e;Rv(a);let c=IS(e,n,i,o),l=s.__ngNextListenerFn__;for(;l;)c=IS(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return r&&c===!1&&o.preventDefault(),c}}function ca(t=1){return rB(t)}function nH(t,e){let n=null,i=bj(t);for(let r=0;r<e.length;r++){let s=e[r];if(s==="*"){n=r;continue}if(i===null?VS(t,s,!0):Tj(i,s))return r}return n}function KR(t){let e=ue()[fn][Jt];if(!e.projection){let n=t?t.length:1,i=e.projection=CB(n,null),r=i.slice(),s=e.child;for(;s!==null;){let o=t?nH(s,t):0;o!==null&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function QR(t,e=0,n){let i=ue(),r=He(),s=oa(r,it+t,16,null,n||null);s.projection===null&&(s.projection=e),tv(),(!i[Yo]||rA())&&(s.flags&32)!==32&&_U(r,i,s)}function iH(){return this._results[Symbol.iterator]()}var Wh=class t{get changes(){return this._changes??=new Ie}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=iH)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=DB(e);(this._changesDetected=!bB(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},Ln=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=oH;let t=e;return t})(),rH=Ln,sH=class extends rH{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=pf(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:i});return new Ds(r)}};function oH(){return yf(Ct(),ue())}function yf(t,e){return t.type&4?new sH(e,t,sa(t,e)):null}var k_=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},F_=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)JR(e,n).matches!==null&&this.queries[n].setDirty()}},Kh=class{constructor(e,n,i=null){this.predicate=e,this.flags=n,this.read=i}},L_=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},V_=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(e,n,aH(n,s)),this.matchTNodeWithReadOption(e,n,Ch(n,e,s,!1,!1))}else i===Ln?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Ch(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===_e||r===yn||r===Ln&&n.type&4)this.addMatch(n.index,-2);else{let s=Ch(n,e,r,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function aH(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function cH(t,e){return t.type&11?sa(t,e):t.type&4?yf(t,e):null}function lH(t,e,n,i){return n===-1?cH(e,t):n===-2?uH(t,e,i):Is(t,t[Q],n,e)}function uH(t,e,n){if(n===_e)return sa(e,t);if(n===Ln)return yf(e,t);if(n===yn)return kR(e,t)}function YR(t,e,n,i){let r=e[ei].queries[i];if(r.matches===null){let s=t.data,o=n.matches,a=[];for(let c=0;c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(lH(e,u,o[c+1],n.metadata.read))}}r.matches=a}return r.matches}function j_(t,e,n,i){let r=t.queries.getByIndex(n),s=r.matches;if(s!==null){let o=YR(t,e,r,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)i.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let d=Dt;d<u.length;d++){let h=u[d];h[Kc]===h[gt]&&j_(h[Q],h,l,i)}if(u[Xo]!==null){let d=u[Xo];for(let h=0;h<d.length;h++){let f=d[h];j_(f[Q],f,l,i)}}}}}return i}function dH(t,e){return t[ei].queries[e].queryList}function ZR(t,e,n){let i=new Wh((n&4)===4);l2(t,e,i,i.destroy),e[ei]===null&&(e[ei]=new F_),e[ei].queries.push(new k_(i))}function XR(t,e,n){t.queries===null&&(t.queries=new L_),t.queries.track(new V_(e,n))}function hH(t,e){let n=t.contentQueries||(t.contentQueries=[]),i=n.length?n[n.length-1]:-1;e!==i&&n.push(t.queries.length-1,e)}function JR(t,e){return t.queries.getByIndex(e)}function fH(t,e,n,i){let r=He();if(r.firstCreatePass){let s=Ct();XR(r,new Kh(e,n,i),s.index),hH(r,t),(n&2)===2&&(r.staticContentQueries=!0)}ZR(r,ue(),n)}function _f(t,e,n){let i=He();i.firstCreatePass&&(XR(i,new Kh(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),ZR(i,ue(),e)}function nl(t){let e=ue(),n=He(),i=cA();iv(i+1);let r=JR(n,i);if(t.dirty&&Uj(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let s=r.crossesNgTemplate?j_(n,e,i,[]):YR(n,e,r,i);t.reset(s,GU),t.notifyOnChanges()}return!0}return!1}function il(){return dH(ue(),cA())}function pH(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}function zre(t){let e=Xj();return JS(e,it+t)}function la(t,e=""){let n=ue(),i=He(),r=t+it,s=i.firstCreatePass?oa(i,r,1,e,null):i.data[r],o=mH(i,n,s,e,t);n[r]=o,tf()&&cf(i,n,o,s),Ts(s,!1)}var mH=(t,e,n,i,r)=>(nf(!0),nU(e[$e],i));function gH(t){return Ms("",t,""),gH}function Ms(t,e,n){let i=ue(),r=w$(i,t,e,n);return r!==Bi&&A2(i,vr(),r),Ms}function yH(t,e,n){let i=He();if(i.firstCreatePass){let r=Li(t);B_(n,i.data,i.blueprint,r,!0),B_(e,i.data,i.blueprint,r,!1)}}function B_(t,e,n,i,r){if(t=Pt(t),Array.isArray(t))for(let s=0;s<t.length;s++)B_(t[s],e,n,i,r);else{let s=He(),o=ue(),a=Ct(),c=ta(t)?t:Pt(t.provide),l=OA(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(ta(t)||!t.multi){let f=new Es(l,r,T),p=By(c,e,r?u:u+h,d);p===-1?(Zy(kh(a,o),s,c),jy(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{let f=By(c,e,u+h,d),p=By(c,e,u,u+h),g=f>=0&&n[f],v=p>=0&&n[p];if(r&&!v||!r&&!g){Zy(kh(a,o),s,c);let E=wH(r?vH:_H,n.length,r,i,l);!r&&v&&(n[p].providerFactory=E),jy(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(E),o.push(E)}else{let E=ex(n[r?p:f],l,!r&&i);jy(s,t,f>-1?f:p,E)}!r&&i&&v&&n[p].componentProviders++}}}function jy(t,e,n,i){let r=ta(e),s=NB(e);if(r||s){let c=(s?Pt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[i,c]):l[u+1].push(i,c)}else l.push(n,c)}}}function ex(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function By(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function _H(t,e,n,i){return U_(this.multi,[])}function vH(t,e,n,i){let r=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Is(n,n[Q],this.providerFactory.index,i);s=a.slice(0,o),U_(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],U_(r,s);return s}function U_(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function wH(t,e,n,i,r){let s=new Es(t,n,T);return s.multi=[],s.index=e,s.componentProviders=0,ex(s,r,i&&!n),s}function Gt(t,e=[]){return n=>{n.providersResolver=(i,r)=>yH(i,r?r(t):t,e)}}var _r=class{},qc=class{};var $_=class extends _r{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Hh(this);let r=HS(e);this._bootstrapComponents=VA(r.bootstrap),this._r3Injector=kA(e,n,[{provide:_r,useValue:this},{provide:Er,useValue:this.componentFactoryResolver},...i],kt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},H_=class extends qc{constructor(e){super(),this.moduleType=e}create(e){return new $_(this.moduleType,e,[])}};var Qh=class extends _r{constructor(e){super(),this.componentFactoryResolver=new Hh(this),this.instance=null;let n=new Bc([...e.providers,{provide:_r,useValue:this},{provide:Er,useValue:this.componentFactoryResolver}],e.parent||hv(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function vf(t,e,n=null){return new Qh({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var EH=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=MA(!1,i.type),s=r.length>0?vf([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,s)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=D({token:e,providedIn:"environment",factory:()=>new e(y(Zt))});let t=e;return t})();function fi(t){tl("NgStandalone"),t.getStandaloneInjector=e=>e.get(EH).getOrCreateStandaloneInjector(t)}function tx(t,e,n,i){return nx(ue(),oA(),t,e,n,i)}function IH(t,e){let n=t[e];return n===Bi?void 0:n}function nx(t,e,n,i,r,s){let o=e+n;return di(t,o,r)?g$(t,o+1,s?i.call(s,r):i(r)):IH(t,o+1)}function qre(t,e){let n=He(),i,r=t+it;n.firstCreatePass?(i=bH(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];let s=i.factory||(i.factory=vs(i.type,!0)),o,a=zt(T);try{let c=Oh(!1),l=s();return Oh(c),pH(n,ue(),r,l),l}finally{zt(a)}}function bH(t,e){if(e)for(let n=e.length-1;n>=0;n--){let i=e[n];if(t===i.name)return i}}function Gre(t,e,n){let i=t+it,r=ue(),s=JS(r,i);return DH(r,i)?nx(r,oA(),e,s.transform,n,s):s.transform(n)}function DH(t,e){return t[Q].data[e].pure}function Wre(t,e){return yf(t,e)}var oi=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},ix=new oi("17.1.0");var ua=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),z_=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},wf=(()=>{let e=class e{compileModuleSync(i){return new H_(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),s=HS(i),o=VA(s.declarations).reduce((a,c)=>{let l=yr(c);return l&&a.push(new na(l)),a},[]);return new z_(r,o)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ef=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ke(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var jv=new x(""),rl=new x(""),If=(()=>{let e=class e{constructor(i,r,s){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Bv||(CH(s),s.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{L.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb()}});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(i)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,s){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),i()},r)),this._callbacks.push({doneCb:i,timeoutId:o,updateCb:s})}whenStable(i,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,s){return[]}};e.\u0275fac=function(r){return new(r||e)(y(L),y(bf),y(rl))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),bf=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return Bv?.findTestabilityInTree(this,i,r)??null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function CH(t){Bv=t}var Bv,Df=new x("Application Initializer"),rx=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=C(Df,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let s of this.appInits){let o=s();if(xs(o))i.push(o);else if(GR(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(s=>{this.reject(s)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Cf=new x("appBootstrapListener");function TH(){nT(()=>{throw new S(600,!1)})}function SH(t){return t.isBoundToModule}function AH(t,e,n){try{let i=n();return xs(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var pi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=C(hR),this.afterRenderEffectManager=C(Nv),this.componentTypes=[],this.components=[],this.isStable=C(Ef).hasPendingTasks.pipe(ee(i=>!i)),this._injector=C(Zt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let s=i instanceof Bh;if(!this._injector.get(rx).done){let f=!s&&$S(i),p=!1;throw new S(405,p)}let a;s?a=i:a=this._injector.get(Er).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let c=SH(a)?void 0:this._injector.get(_r),l=r||a.selector,u=a.create(Me.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get(jv,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Uy(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new S(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{try{let i=this.afterRenderEffectManager.execute()}catch(i){this.internalErrorHandler(i)}this._runningTick=!1}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;Uy(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(Cf,[]);[...this._bootstrapListeners,...r].forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Uy(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new S(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Uy(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var RH=(()=>{let e=class e{constructor(){this.zone=C(L),this.applicationRef=C(pi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function xH(t){return[{provide:L,useFactory:t},{provide:ea,multi:!0,useFactory:()=>{let e=C(RH,{optional:!0});return()=>e.initialize()}},{provide:ea,multi:!0,useFactory:()=>{let e=C(OH);return()=>{e.initialize()}}},{provide:hR,useFactory:MH}]}function MH(){let t=C(L),e=C(si);return n=>t.runOutsideAngular(()=>e.handleError(n))}function NH(t){let e=xH(()=>new L(PH(t)));return sf([[],e])}function PH(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var OH=(()=>{let e=class e{constructor(){this.subscription=new Ae,this.initialized=!1,this.zone=C(L),this.pendingTasks=C(Ef)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{L.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{L.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function kH(){return typeof $localize<"u"&&$localize.locale||Gh}var da=new x("LocaleId",{providedIn:"root",factory:()=>C(da,he.Optional|he.SkipSelf)||kH()});var sx=new x("PlatformDestroyListeners");var Ah=null;function FH(t=[],e){return Me.create({name:e,providers:[{provide:of,useValue:"platform"},{provide:sx,useValue:new Set([()=>Ah=null])},...t]})}function LH(t=[]){if(Ah)return Ah;let e=FH(t);return Ah=e,TH(),VH(e),e}function VH(t){t.get(fv,null)?.forEach(n=>n())}function Kre(){return!1}var ox=(()=>{let e=class e{constructor(i){}};e.\u0275fac=function(r){return new(r||e)(y(pi))},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})();function ax(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=LH(i),s=[NH(),...n||[]],a=new Qh({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(L);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(si,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:f=>{l.handleError(f)}})});let d=()=>a.destroy(),h=r.get(sx);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),AH(l,c,()=>{let f=a.get(rx);return f.runInitializers(),f.donePromise.then(()=>{let p=a.get(da,Gh);J$(p||Gh);let g=a.get(pi);return e!==void 0&&g.bootstrap(e),g})})})}catch(e){return Promise.reject(e)}}function _n(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function cx(t){let e=yr(t);if(!e)return null;let n=new na(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var zv=null;function gi(){return zv}function px(t){zv||(zv=t)}var Tf=class{},Y=new x("DocumentToken"),Kv=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(BH),providedIn:"platform"});let t=e;return t})(),mx=new x("Location Initialized"),BH=(()=>{let e=class e extends Kv{constructor(){super(),this._doc=C(Y),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return gi().getBaseHref(this._doc)}onPopState(i){let r=gi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=gi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,s){this._history.pushState(i,r,s)}replaceState(i,r,s){this._history.replaceState(i,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Qv(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function lx(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function Hi(t){return t&&t[0]!=="?"?"?"+t:t}var zi=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(Yv),providedIn:"root"});let t=e;return t})(),gx=new x("appBaseHref"),Yv=(()=>{let e=class e extends zi{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??C(Y).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return Qv(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+Hi(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${r}${s}`:r}pushState(i,r,s,o){let a=this.prepareExternalUrl(s+Hi(o));this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){let a=this.prepareExternalUrl(s+Hi(o));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(y(Kv),y(gx,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yx=(()=>{let e=class e extends zi{constructor(i,r){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let r=this._platformLocation.hash;return r==null&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(i){let r=Qv(this._baseHref,i);return r.length>0?"#"+r:r}pushState(i,r,s,o){let a=this.prepareExternalUrl(s+Hi(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){let a=this.prepareExternalUrl(s+Hi(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(y(Kv),y(gx,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),yi=(()=>{let e=class e{constructor(i){this._subject=new Ie,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=HH(lx(ux(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Hi(r))}normalize(i){return e.stripTrailingSlash($H(this._basePath,ux(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",s=null){this._locationStrategy.pushState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Hi(r)),s)}replaceState(i,r="",s=null){this._locationStrategy.replaceState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Hi(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(s=>s(i,r))}subscribe(i,r,s){return this._subject.subscribe({next:i,error:r,complete:s})}};e.normalizeQueryParams=Hi,e.joinWithSlash=Qv,e.stripTrailingSlash=lx,e.\u0275fac=function(r){return new(r||e)(y(zi))},e.\u0275prov=D({token:e,factory:()=>UH(),providedIn:"root"});let t=e;return t})();function UH(){return new yi(y(zi))}function $H(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function ux(t){return t.replace(/\/index.html$/,"")}function HH(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var _x=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(_x||{});var mi=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t.Infinity=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}(mi||{});function sl(t,e){let n=Vv(t),i=n[aa.NumberSymbols][e];if(typeof i>"u"){if(e===mi.CurrencyDecimal)return n[aa.NumberSymbols][mi.Decimal];if(e===mi.CurrencyGroup)return n[aa.NumberSymbols][mi.Group]}return i}function zH(t,e){return Vv(t)[aa.NumberFormats][e]}var qH=/^(\d+)?\.((\d+)(-(\d+))?)?$/,dx=22,Sf=".",ol="0",GH=";",WH=",",Uv="#";function KH(t,e,n,i,r,s,o=!1){let a="",c=!1;if(!isFinite(t))a=sl(n,mi.Infinity);else{let l=XH(t);o&&(l=ZH(l));let u=e.minInt,d=e.minFrac,h=e.maxFrac;if(s){let A=s.match(qH);if(A===null)throw new Error(`${s} is not a valid digit info`);let N=A[1],O=A[3],K=A[5];N!=null&&(u=$v(N)),O!=null&&(d=$v(O)),K!=null?h=$v(K):O!=null&&d>h&&(h=d)}JH(l,d,h);let f=l.digits,p=l.integerLen,g=l.exponent,v=[];for(c=f.every(A=>!A);p<u;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?v=f.splice(p,f.length):(v=f,f=[0]);let E=[];for(f.length>=e.lgSize&&E.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)E.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&E.unshift(f.join("")),a=E.join(sl(n,i)),v.length&&(a+=sl(n,r)+v.join("")),g&&(a+=sl(n,mi.Exponential)+"+"+g)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function QH(t,e,n){let i=zH(e,_x.Decimal),r=YH(i,sl(e,mi.MinusSign));return KH(t,r,e,mi.Group,mi.Decimal,n)}function YH(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(GH),r=i[0],s=i[1],o=r.indexOf(Sf)!==-1?r.split(Sf):[r.substring(0,r.lastIndexOf(ol)+1),r.substring(r.lastIndexOf(ol)+1)],a=o[0],c=o[1]||"";n.posPre=a.substring(0,a.indexOf(Uv));for(let u=0;u<c.length;u++){let d=c.charAt(u);d===ol?n.minFrac=n.maxFrac=u+1:d===Uv?n.maxFrac=u+1:n.posSuf+=d}let l=a.split(WH);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let u=r.length-n.posPre.length-n.posSuf.length,d=s.indexOf(Uv);n.negPre=s.substring(0,d).replace(/'/g,""),n.negSuf=s.slice(d+u).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function ZH(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function XH(t){let e=Math.abs(t)+"",n=0,i,r,s,o,a;for((r=e.indexOf(Sf))>-1&&(e=e.replace(Sf,"")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),s=0;e.charAt(s)===ol;s++);if(s===(a=e.length))i=[0],r=1;else{for(a--;e.charAt(a)===ol;)a--;for(r-=s,i=[],o=0;s<=a;s++,o++)i[o]=Number(e.charAt(s))}return r>dx&&(i=i.splice(0,dx-1),n=r-1,r=1),{digits:i,exponent:n,integerLen:r}}function JH(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let i=t.digits,r=i.length-t.integerLen,s=Math.min(Math.max(e,r),n),o=s+t.integerLen,a=i[o];if(o>0){i.splice(Math.max(t.integerLen,o));for(let d=o;d<i.length;d++)i[d]=0}else{r=Math.max(0,r),t.integerLen=1,i.length=Math.max(1,o=s+1),i[0]=0;for(let d=1;d<o;d++)i[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[o-1]++;for(;r<Math.max(0,s);r++)i.push(0);let c=s!==0,l=e+t.integerLen,u=i.reduceRight(function(d,h,f,p){return h=h+d,p[f]=h<10?h:h-10,c&&(p[f]===0&&f>=l?p.pop():c=!1),h>=10?1:0},0);u&&(i.unshift(u),t.integerLen++)}function $v(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function vx(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,s]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var Hv=/\s+/,hx=[],mse=(()=>{let e=class e{constructor(i,r){this._ngEl=i,this._renderer=r,this.initialClasses=hx,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(Hv):hx}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(Hv):i}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let r of i)this._updateState(r,!0);else if(i!=null)for(let r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){let s=this.stateMap.get(i);s!==void 0?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let r=i[0],s=i[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(i,r){i=i.trim(),i.length>0&&i.split(Hv).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(Vn))},e.\u0275dir=me({type:e,selectors:[["","ngClass",""]],inputs:{klass:[fe.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var wx=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new qv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){fx("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){fx("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(T(yn),T(Ln))},e.\u0275dir=me({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),qv=class{constructor(){this.$implicit=null,this.ngIf=null}};function fx(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${kt(e)}'.`)}var gse=(()=>{let e=class e{constructor(i,r,s){this._ngEl=i,this._differs=r,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(i){this._ngStyle=i,!this._differ&&i&&(this._differ=this._differs.find(i).create())}ngDoCheck(){if(this._differ){let i=this._differ.diff(this._ngStyle);i&&this._applyChanges(i)}}_setStyle(i,r){let[s,o]=i.split("."),a=s.indexOf("-")===-1?void 0:ri.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${r}${o}`:r,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(i){i.forEachRemovedItem(r=>this._setStyle(r.key,null)),i.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),i.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(Ev),T(Vn))},e.\u0275dir=me({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let t=e;return t})(),Ex=(()=>{let e=class e{constructor(i){this._viewContainerRef=i,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(i){if(this._shouldRecreateView(i)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let s=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(i){return!!i.ngTemplateOutlet||!!i.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(i,r,s)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,s):!1,get:(i,r,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,s)}})}};e.\u0275fac=function(r){return new(r||e)(T(yn))},e.\u0275dir=me({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Ft]});let t=e;return t})();function ez(t,e){return new S(2100,!1)}var yse=(()=>{let e=class e{constructor(i){this._locale=i}transform(i,r,s){if(!tz(i))return null;s=s||this._locale;try{let o=nz(i);return QH(o,s,r)}catch(o){throw ez(e,o.message)}}};e.\u0275fac=function(r){return new(r||e)(T(da,16))},e.\u0275pipe=jS({name:"number",type:e,pure:!0,standalone:!0});let t=e;return t})();function tz(t){return!(t==null||t===""||t!==t)}function nz(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var Ns=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})(),Zv="browser",iz="server";function Xv(t){return t===Zv}function Jv(t){return t===iz}var Ix=(()=>{let e=class e{};e.\u0275prov=D({token:e,providedIn:"root",factory:()=>Xv(C(gn))?new Gv(C(Y),window):new Wv});let t=e;return t})(),Gv=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=rz(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}};function rz(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let s=r.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}var Wv=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Af=class{};var nw=class extends Tf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},iw=class t extends nw{static makeCurrent(){px(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=sz();return n==null?null:oz(n)}resetBaseElement(){al=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return vx(document.cookie,e)}},al=null;function sz(){return al=al||document.querySelector("base"),al?al.getAttribute("href"):null}function oz(t){return new URL(t,document.baseURI).pathname}var rw=class{addToWindow(e){et.getAngularTestability=(i,r=!0)=>{let s=e.findTestabilityInTree(i,r);if(s==null)throw new S(5103,!1);return s},et.getAllAngularTestabilities=()=>e.getAllTestabilities(),et.getAllAngularRootElements=()=>e.getAllRootElements();let n=i=>{let r=et.getAllAngularTestabilities(),s=r.length,o=function(){s--,s==0&&i()};r.forEach(a=>{a.whenStable(o)})};et.frameworkStabilizers||(et.frameworkStabilizers=[]),et.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,i){if(n==null)return null;let r=e.getTestability(n);return r??(i?gi().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},az=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),xf=new x("EventManagerPlugins"),Cx=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new S(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(y(xf),y(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),cl=class{constructor(e){this._doc=e}},ew="ng-app-id",Tx=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Jv(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${ew}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(ew),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(ew,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(y(Y),y(Zc),y(Xc,8),y(gn))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),tw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},aw=/%COMP%/g,Sx="%COMP%",cz=`_nghost-${Sx}`,lz=`_ngcontent-${Sx}`,uz=!0,dz=new x("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>uz});function hz(t){return lz.replace(aw,t)}function fz(t){return cz.replace(aw,t)}function Ax(t,e){return e.map(n=>n.replace(aw,t))}var Mf=(()=>{let e=class e{constructor(i,r,s,o,a,c,l,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Jv(c),this.defaultRenderer=new ll(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ti.ShadowDom&&(r=ye(I({},r),{encapsulation:ti.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof Nf?s.applyToHost(i):s instanceof ul&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case ti.Emulated:o=new Nf(l,u,r,this.appId,d,a,c,h);break;case ti.ShadowDom:return new sw(l,u,i,r,a,c,this.nonce,h);default:o=new ul(l,u,r,d,a,c,h);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(y(Cx),y(Tx),y(Zc),y(dz),y(Y),y(gn),y(L),y(Xc))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),ll=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(tw[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(bx(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(bx(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new S(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let s=tw[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=tw[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(ri.DashCase|ri.Important)?e.style.setProperty(n,i,r&ri.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&ri.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=gi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function bx(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var sw=class extends ll{constructor(e,n,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Ax(r.id,r.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ul=class extends ll{constructor(e,n,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?Ax(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Nf=class extends ul{constructor(e,n,i,r,s,o,a,c){let l=r+"-"+i.id;super(e,n,i,s,o,a,c,l),this.contentAttr=hz(l),this.hostAttr=fz(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},pz=(()=>{let e=class e extends cl{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(y(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),Dx=["alt","control","meta","shift"],mz={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gz={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},yz=(()=>{let e=class e extends cl{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>gi().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),Dx.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let s=mz[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Dx.forEach(a=>{if(a!==s){let c=gz[a];c(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(y(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function Lse(t,e){return ax(I({rootComponent:t},_z(e)))}function _z(t){return{appProviders:[...Rx,...t?.providers??[]],platformProviders:Iz}}function vz(){iw.makeCurrent()}function wz(){return new si}function Ez(){return FA(document),document}var Iz=[{provide:gn,useValue:Zv},{provide:fv,useValue:vz,multi:!0},{provide:Y,useFactory:Ez,deps:[]}];var bz=new x(""),Dz=[{provide:rl,useClass:rw,deps:[]},{provide:jv,useClass:If,deps:[L,bf,rl]},{provide:If,useClass:If,deps:[L,bf,rl]}],Rx=[{provide:of,useValue:"root"},{provide:si,useFactory:wz,deps:[]},{provide:xf,useClass:pz,multi:!0,deps:[Y,L,gn]},{provide:xf,useClass:yz,multi:!0,deps:[Y]},Mf,Tx,Cx,{provide:bs,useExisting:Mf},{provide:Af,useClass:az,deps:[]},[]],xx=(()=>{let e=class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:Zc,useValue:i.appId}]}}};e.\u0275fac=function(r){return new(r||e)(y(bz,12))},e.\u0275mod=re({type:e}),e.\u0275inj=ie({providers:[...Rx,...Dz],imports:[Ns,ox]});let t=e;return t})();function Cz(){return new cw(y(Y))}var cw=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(y(Y))},e.\u0275prov=D({token:e,factory:function(r){let s=null;return r?s=new r:s=Cz(),s},providedIn:"root"});let t=e;return t})();var Tz={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},ow=new x("HammerGestureConfig"),Mx=new x("HammerLoader"),Sz=(()=>{let e=class e{constructor(){this.events=[],this.overrides={}}buildHammer(i){let r=new Hammer(i,this.options);r.get("pinch").set({enable:!0}),r.get("rotate").set({enable:!0});for(let s in this.overrides)r.get(s).set(this.overrides[s]);return r}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),Az=(()=>{let e=class e extends cl{constructor(i,r,s,o){super(i),this._config=r,this.console=s,this.loader=o,this._loaderPromise=null}supports(i){return!(!Tz.hasOwnProperty(i.toLowerCase())&&!this.isCustomEvent(i)||!window.Hammer&&!this.loader)}addEventListener(i,r,s){let o=this.manager.getZone();if(r=r.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||o.runOutsideAngular(()=>this.loader());let a=!1,c=()=>{a=!0};return o.runOutsideAngular(()=>this._loaderPromise.then(()=>{if(!window.Hammer){c=()=>{};return}a||(c=this.addEventListener(i,r,s))}).catch(()=>{c=()=>{}})),()=>{c()}}return o.runOutsideAngular(()=>{let a=this._config.buildHammer(i),c=function(l){o.runGuarded(function(){s(l)})};return a.on(r,c),()=>{a.off(r,c),typeof a.destroy=="function"&&a.destroy()}})}isCustomEvent(i){return this._config.events.indexOf(i)>-1}};e.\u0275fac=function(r){return new(r||e)(y(Y),y(ow),y(ua),y(Mx,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),Vse=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({providers:[{provide:xf,useClass:Az,multi:!0,deps:[Y,ow,ua,[new yt,Mx]]},{provide:ow,useClass:Sz,deps:[]}]});let t=e;return t})();var le="primary",Tl=Symbol("RouteTitle"),fw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ga(t){return new fw(t)}function xz(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=t[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Mz(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!_i(t[n],e[n]))return!1;return!0}function _i(t,e){let n=t?pw(t):void 0,i=e?pw(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!Bx(t[r],e[r]))return!1;return!0}function pw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Bx(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,s)=>i[s]===r)}else return t===e}function Sr(t){return lh(t)?t:xs(t)?Pe(Promise.resolve(t)):H(t)}var Nz={exact:$x,subset:Hx},Ux={exact:Pz,subset:Oz,ignored:()=>!0};function Nx(t,e,n){return Nz[n.paths](t.root,e.root,n.matrixParams)&&Ux[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Pz(t,e){return _i(t,e)}function $x(t,e,n){if(!Os(t.segments,e.segments)||!kf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!$x(t.children[i],e.children[i],n))return!1;return!0}function Oz(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Bx(t[n],e[n]))}function Hx(t,e,n){return zx(t,e,e.segments,n)}function zx(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!Os(r,n)||e.hasChildren()||!kf(r,n,i))}else if(t.segments.length===n.length){if(!Os(t.segments,n)||!kf(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!Hx(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Os(t.segments,r)||!kf(t.segments,r,i)||!t.children[le]?!1:zx(t.children[le],e,s,i)}}function kf(t,e,n){return e.every((i,r)=>Ux[n](t[r].parameters,i.parameters))}var br=class{constructor(e=new be([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=ga(this.queryParams),this._queryParamMap}toString(){return Lz.serialize(this)}},be=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ff(this)}},Ps=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ga(this.parameters),this._parameterMap}toString(){return Gx(this)}};function kz(t,e){return Os(t,e)&&t.every((n,i)=>_i(n.parameters,e[i].parameters))}function Os(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function Fz(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===le&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==le&&(n=n.concat(e(r,i)))}),n}var Sl=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>new yl,providedIn:"root"});let t=e;return t})(),yl=class{parse(e){let n=new gw(e);return new br(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${dl(e.root,!0)}`,i=Bz(e.queryParams),r=typeof e.fragment=="string"?`#${Vz(e.fragment)}`:"";return`${n}${i}${r}`}},Lz=new yl;function Ff(t){return t.segments.map(e=>Gx(e)).join("/")}function dl(t,e){if(!t.hasChildren())return Ff(t);if(e){let n=t.children[le]?dl(t.children[le],!1):"",i=[];return Object.entries(t.children).forEach(([r,s])=>{r!==le&&i.push(`${r}:${dl(s,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=Fz(t,(i,r)=>r===le?[dl(t.children[le],!1)]:[`${r}:${dl(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[le]!=null?`${Ff(t)}/${n[0]}`:`${Ff(t)}/(${n.join("//")})`}}function qx(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pf(t){return qx(t).replace(/%3B/gi,";")}function Vz(t){return encodeURI(t)}function mw(t){return qx(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lf(t){return decodeURIComponent(t)}function Px(t){return Lf(t.replace(/\+/g,"%20"))}function Gx(t){return`${mw(t.path)}${jz(t.parameters)}`}function jz(t){return Object.entries(t).map(([e,n])=>`;${mw(e)}=${mw(n)}`).join("")}function Bz(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${Pf(n)}=${Pf(r)}`).join("&"):`${Pf(n)}=${Pf(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Uz=/^[^\/()?;#]+/;function lw(t){let e=t.match(Uz);return e?e[0]:""}var $z=/^[^\/()?;=#]+/;function Hz(t){let e=t.match($z);return e?e[0]:""}var zz=/^[^=?&#]+/;function qz(t){let e=t.match(zz);return e?e[0]:""}var Gz=/^[^&#]+/;function Wz(t){let e=t.match(Gz);return e?e[0]:""}var gw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new be([],{}):new be([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[le]=new be(e,n)),i}parseSegment(){let e=lw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(e),new Ps(Lf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Hz(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=lw(this.remaining);r&&(i=r,this.capture(i))}e[Lf(n)]=Lf(i)}parseQueryParam(e){let n=qz(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=Wz(this.remaining);o&&(i=o,this.capture(i))}let r=Px(n),s=Px(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=lw(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new S(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=le);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[le]:new be([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new S(4011,!1)}};function Wx(t){return t.segments.length>0?new be([],{[le]:t}):t}function Kx(t){let e={};for(let[i,r]of Object.entries(t.children)){let s=Kx(r);if(i===le&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let n=new be(t.segments,e);return Kz(n)}function Kz(t){if(t.numberOfChildren===1&&t.children[le]){let e=t.children[le];return new be(t.segments.concat(e.segments),e.children)}return t}function ya(t){return t instanceof br}function Qz(t,e,n=null,i=null){let r=Qx(t);return Yx(r,e,n,i)}function Qx(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new be(s.url,o);return s===t&&(e=a),a}let i=n(t.root),r=Wx(i);return e??r}function Yx(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return uw(r,r,r,n,i);let s=Yz(e);if(s.toRoot())return uw(r,r,new be([],{}),n,i);let o=Zz(s,r,t),a=o.processChildren?pl(o.segmentGroup,o.index,s.commands):Xx(o.segmentGroup,o.index,s.commands);return uw(r,o.segmentGroup,a,n,i)}function Vf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function _l(t){return typeof t=="object"&&t!=null&&t.outlets}function uw(t,e,n,i,r){let s={};i&&Object.entries(i).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;t===e?o=n:o=Zx(t,e,n);let a=Wx(Kx(o));return new br(a,s,r)}function Zx(t,e,n){let i={};return Object.entries(t.children).forEach(([r,s])=>{s===e?i[r]=n:i[r]=Zx(s,e,n)}),new be(t.segments,i)}var jf=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&Vf(i[0]))throw new S(4003,!1);let r=i.find(_l);if(r&&r!==i.at(-1))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Yz(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new jf(!0,0,t);let e=0,n=!1,i=t.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new jf(n,e,i)}var pa=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function Zz(t,e,n){if(t.isAbsolute)return new pa(e,!0,0);if(!n)return new pa(e,!1,NaN);if(n.parent===null)return new pa(n,!0,0);let i=Vf(t.commands[0])?0:1,r=n.segments.length-1+i;return Xz(n,r,t.numberOfDoubleDots)}function Xz(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new S(4005,!1);r=i.segments.length}return new pa(i,!1,r-s)}function Jz(t){return _l(t[0])?t[0].outlets:{[le]:t}}function Xx(t,e,n){if(t??=new be([],{}),t.segments.length===0&&t.hasChildren())return pl(t,e,n);let i=eq(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let s=new be(t.segments.slice(0,i.pathIndex),{});return s.children[le]=new be(t.segments.slice(i.pathIndex),t.children),pl(s,0,r)}else return i.match&&r.length===0?new be(t.segments,{}):i.match&&!t.hasChildren()?yw(t,e,n):i.match?pl(t,0,r):yw(t,e,n)}function pl(t,e,n){if(n.length===0)return new be(t.segments,{});{let i=Jz(n),r={};if(Object.keys(i).some(s=>s!==le)&&t.children[le]&&t.numberOfChildren===1&&t.children[le].segments.length===0){let s=pl(t.children[le],e,n);return new be(t.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=Xx(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new be(t.segments,r)}}function eq(t,e,n){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;let o=t.segments[r],a=n[i];if(_l(a))break;let c=`${a}`,l=i<n.length-1?n[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!kx(c,l,o))return s;i+=2}else{if(!kx(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function yw(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let s=n[r];if(_l(s)){let c=tq(s.outlets);return new be(i,c)}if(r===0&&Vf(n[0])){let c=t.segments[e];i.push(new Ps(c.path,Ox(n[0]))),r++;continue}let o=_l(s)?s.outlets[le]:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&Vf(a)?(i.push(new Ps(o,Ox(a))),r+=2):(i.push(new Ps(o,{})),r++)}return new be(i,{})}function tq(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=yw(new be([],{}),0,i))}),e}function Ox(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function kx(t,e,n){return t==n.path&&_i(e,n.parameters)}var ml="imperative",ut=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ut||{}),wn=class{constructor(e,n){this.id=e,this.url=n}},_a=class extends wn{constructor(e,n,i="imperative",r=null){super(e,n),this.type=ut.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},vi=class extends wn{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=ut.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(vn||{}),Bf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Bf||{}),Dr=class extends wn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=ut.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Cr=class extends wn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=ut.NavigationSkipped}},vl=class extends wn{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=ut.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Uf=class extends wn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=ut.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_w=class extends wn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=ut.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vw=class extends wn{constructor(e,n,i,r,s){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=ut.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ww=class extends wn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=ut.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ew=class extends wn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=ut.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Iw=class{constructor(e){this.route=e,this.type=ut.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},bw=class{constructor(e){this.route=e,this.type=ut.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Dw=class{constructor(e){this.snapshot=e,this.type=ut.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cw=class{constructor(e){this.snapshot=e,this.type=ut.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tw=class{constructor(e){this.snapshot=e,this.type=ut.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sw=class{constructor(e){this.snapshot=e,this.type=ut.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$f=class{constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i,this.type=ut.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},wl=class{},El=class{constructor(e){this.url=e}};var Aw=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Al,this.attachRef=null}},Al=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new Aw,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Hf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Rw(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=Rw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=xw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return xw(e,this._root).map(n=>n.value)}};function Rw(t,e){if(t===e.value)return e;for(let n of e.children){let i=Rw(t,n);if(i)return i}return null}function xw(t,e){if(t===e.value)return[e];for(let n of e.children){let i=xw(t,n);if(i.length)return i.unshift(e),i}return[]}var en=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function fa(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var zf=class extends Hf{constructor(e,n){super(e),this.snapshot=n,Bw(this,e)}toString(){return this.snapshot.toString()}};function Jx(t){let e=nq(t),n=new Ke([new Ps("",{})]),i=new Ke({}),r=new Ke({}),s=new Ke({}),o=new Ke(""),a=new Tr(n,i,s,o,r,le,t,e.root);return a.snapshot=e.root,new zf(new en(a,[]),e)}function nq(t){let e={},n={},i={},r="",s=new Il([],e,i,r,n,le,t,null,{});return new qf("",new en(s,[]))}var Tr=class{constructor(e,n,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ee(l=>l[Tl]))??H(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>ga(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>ga(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function jw(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:I(I({},e.params),t.params),data:I(I({},e.data),t.data),resolve:I(I(I(I({},t.data),e.data),r?.data),t._resolvedData)}:i={params:I({},t.params),data:I({},t.data),resolve:I(I({},t.data),t._resolvedData??{})},r&&tM(r)&&(i.resolve[Tl]=r.title),i}var Il=class{get title(){return this.data?.[Tl]}constructor(e,n,i,r,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ga(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ga(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},qf=class extends Hf{constructor(e,n){super(n),this.url=e,Bw(this,n)}toString(){return eM(this._root)}};function Bw(t,e){e.value._routerState=t,e.children.forEach(n=>Bw(t,n))}function eM(t){let e=t.children.length>0?` { ${t.children.map(eM).join(", ")} } `:"";return`${t.value}${e}`}function dw(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,_i(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),_i(e.params,n.params)||t.paramsSubject.next(n.params),Mz(e.url,n.url)||t.urlSubject.next(n.url),_i(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Mw(t,e){let n=_i(t.params,e.params)&&kz(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||Mw(t.parent,e.parent))}function tM(t){return typeof t.title=="string"||t.title===null}var iq=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=le,this.activateEvents=new Ie,this.deactivateEvents=new Ie,this.attachEvents=new Ie,this.detachEvents=new Ie,this.parentContexts=C(Al),this.location=C(yn),this.changeDetector=C(ui),this.environmentInjector=C(Zt),this.inputBinder=C(Qf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Nw(i,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=me({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ft]});let t=e;return t})(),Nw=class{constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===Tr?this.route:e===Al?this.childContexts:this.parent.get(e,n)}},Qf=new x(""),Fx=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,s=fs([r.queryParams,r.params,r.data]).pipe(Qt(([o,a,c],l)=>(c=I(I(I({},o),a),c),l===0?H(c):Promise.resolve(c)))).subscribe(o=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let a=cx(r.component);if(!a){this.unsubscribeFromRouteData(i);return}for(let{templateName:c}of a.inputs)i.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(i,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function rq(t,e,n){let i=bl(t,e._root,n?n._root:void 0);return new zf(i,e)}function bl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=sq(t,e,n);return new en(i,r)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>bl(t,a)),o}}let i=oq(e.value),r=e.children.map(s=>bl(t,s));return new en(i,r)}}function sq(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return bl(t,i,r);return bl(t,i)})}function oq(t){return new Tr(new Ke(t.url),new Ke(t.params),new Ke(t.queryParams),new Ke(t.fragment),new Ke(t.data),t.outlet,t.component,t)}var nM="ngNavigationCancelingError";function iM(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=ya(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=rM(!1,vn.Redirect,e);return r.url=n,r.navigationBehaviorOptions=i,r}function rM(t,e,n){let i=new Error("NavigationCancelingError: "+(t||""));return i[nM]=!0,i.cancellationCode=e,n&&(i.url=n),i}function aq(t){return sM(t)&&ya(t.url)}function sM(t){return t&&t[nM]}var cq=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ai({type:e,selectors:[["ng-component"]],standalone:!0,features:[fi],decls:1,vars:0,template:function(r,s){r&1&&Ir(0,"router-outlet")},dependencies:[iq],encapsulation:2});let t=e;return t})();function lq(t,e){return t.providers&&!t._injector&&(t._injector=vf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Uw(t){let e=t.children&&t.children.map(Uw),n=e?ye(I({},t),{children:e}):I({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==le&&(n.component=cq),n}function wi(t){return t.outlet||le}function uq(t,e){let n=t.filter(i=>wi(i)===e);return n.push(...t.filter(i=>wi(i)!==e)),n}function Rl(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var dq=(t,e,n,i)=>ee(r=>(new Pw(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),Pw=class{constructor(e,n,i,r,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),dw(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=fa(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=fa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=fa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=fa(n);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Sw(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Cw(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(dw(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),dw(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Rl(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}},Gf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ma=class{constructor(e,n){this.component=e,this.route=n}};function hq(t,e,n){let i=t._root,r=e?e._root:null;return hl(i,r,n,[i.value])}function fq(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function wa(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!SS(t)?t:e.get(t):i}function hl(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=fa(e);return t.children.forEach(o=>{pq(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>gl(a,n.getContext(o),r)),r}function pq(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=mq(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Gf(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?hl(t,e,a?a.children:null,i,r):hl(t,e,n,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new ma(a.outlet.component,o))}else o&&gl(e,a,r),r.canActivateChecks.push(new Gf(i)),s.component?hl(t,null,a?a.children:null,i,r):hl(t,null,n,i,r);return r}function mq(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Os(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Os(t.url,e.url)||!_i(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mw(t,e)||!_i(t.queryParams,e.queryParams);case"paramsChange":default:return!Mw(t,e)}}function gl(t,e,n){let i=fa(t),r=t.value;Object.entries(i).forEach(([s,o])=>{r.component?e?gl(o,e.children.getContext(s),n):gl(o,null,n):gl(o,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ma(e.outlet.component,r)):n.canDeactivateChecks.push(new ma(null,r)):n.canDeactivateChecks.push(new ma(null,r))}function xl(t){return typeof t=="function"}function gq(t){return typeof t=="boolean"}function yq(t){return t&&xl(t.canLoad)}function _q(t){return t&&xl(t.canActivate)}function vq(t){return t&&xl(t.canActivateChild)}function wq(t){return t&&xl(t.canDeactivate)}function Eq(t){return t&&xl(t.canMatch)}function oM(t){return t instanceof Fi||t?.name==="EmptyError"}var Of=Symbol("INITIAL_VALUE");function va(){return Qt(t=>fs(t.map(e=>e.pipe(Be(1),Nn(Of)))).pipe(ee(e=>{for(let n of e)if(n!==!0){if(n===Of)return Of;if(n===!1||n instanceof br)return n}return!0}),Fe(e=>e!==Of),Be(1)))}function Iq(t,e){return ke(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?H(ye(I({},n),{guardsResult:!0})):bq(o,i,r,t).pipe(ke(a=>a&&gq(a)?Dq(i,s,t,e):H(a)),ee(a=>ye(I({},n),{guardsResult:a})))})}function bq(t,e,n,i){return Pe(t).pipe(ke(r=>Rq(r.component,r.route,n,e,i)),Zn(r=>r!==!0,!0))}function Dq(t,e,n,i){return Pe(e).pipe(ps(r=>Yn(Tq(r.route.parent,i),Cq(r.route,i),Aq(t,r.path,n),Sq(t,r.route,n))),Zn(r=>r!==!0,!0))}function Cq(t,e){return t!==null&&e&&e(new Tw(t)),H(!0)}function Tq(t,e){return t!==null&&e&&e(new Dw(t)),H(!0)}function Sq(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return H(!0);let r=i.map(s=>dr(()=>{let o=Rl(e)??n,a=wa(s,o),c=_q(a)?a.canActivate(e,t):wr(o,()=>a(e,t));return Sr(c).pipe(Zn())}));return H(r).pipe(va())}function Aq(t,e,n){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>fq(o)).filter(o=>o!==null).map(o=>dr(()=>{let a=o.guards.map(c=>{let l=Rl(o.node)??n,u=wa(c,l),d=vq(u)?u.canActivateChild(i,t):wr(l,()=>u(i,t));return Sr(d).pipe(Zn())});return H(a).pipe(va())}));return H(s).pipe(va())}function Rq(t,e,n,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return H(!0);let o=s.map(a=>{let c=Rl(e)??r,l=wa(a,c),u=wq(l)?l.canDeactivate(t,e,n,i):wr(c,()=>l(t,e,n,i));return Sr(u).pipe(Zn())});return H(o).pipe(va())}function xq(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return H(!0);let s=r.map(o=>{let a=wa(o,t),c=yq(a)?a.canLoad(e,n):wr(t,()=>a(e,n));return Sr(c)});return H(s).pipe(va(),aM(i))}function aM(t){return zd(Qe(e=>{if(ya(e))throw iM(t,e)}),ee(e=>e===!0))}function Mq(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return H(!0);let s=r.map(o=>{let a=wa(o,t),c=Eq(a)?a.canMatch(e,n):wr(t,()=>a(e,n));return Sr(c)});return H(s).pipe(va(),aM(i))}var Dl=class{constructor(e){this.segmentGroup=e||null}},Wf=class extends Error{constructor(e){super(),this.urlTree=e}};function ha(t){return jo(new Dl(t))}function Nq(t){return jo(new S(4e3,!1))}function Pq(t){return jo(rM(!1,vn.GuardRejected))}var Ow=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return H(i);if(r.numberOfChildren>1||!r.children[le])return Nq(e.redirectTo);r=r.children[le]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new Wf(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let s=this.createSegmentGroup(e,n.root,i,r);return new br(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[r]=n[a]}else i[r]=s}),i}createSegmentGroup(e,n,i,r){let s=this.createSegments(e,n.segments,i,r),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new be(s,o)}createSegments(e,n,i,r){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new S(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},kw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Oq(t,e,n,i,r){let s=$w(t,e,n);return s.matched?(i=lq(e,i),Mq(i,e,n,r).pipe(ee(o=>o===!0?s:I({},kw)))):H(s)}function $w(t,e,n){if(e.path==="**")return kq(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?I({},kw):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||xz)(n,t,e);if(!r)return I({},kw);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?I(I({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function kq(t){return{matched:!0,parameters:t.at(-1)?.parameters??{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Lx(t,e,n,i){return n.length>0&&Vq(t,n,i)?{segmentGroup:new be(e,Lq(i,new be(n,t.children))),slicedSegments:[]}:n.length===0&&jq(t,n,i)?{segmentGroup:new be(t.segments,Fq(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new be(t.segments,t.children),slicedSegments:n}}function Fq(t,e,n,i){let r={};for(let s of n)if(Yf(t,e,s)&&!i[wi(s)]){let o=new be([],{});r[wi(s)]=o}return I(I({},i),r)}function Lq(t,e){let n={};n[le]=e;for(let i of t)if(i.path===""&&wi(i)!==le){let r=new be([],{});n[wi(i)]=r}return n}function Vq(t,e,n){return n.some(i=>Yf(t,e,i)&&wi(i)!==le)}function jq(t,e,n){return n.some(i=>Yf(t,e,i))}function Yf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Bq(t,e,n,i){return wi(t)!==i&&(i===le||!Yf(e,n,t))?!1:$w(e,t,n).matched}function Uq(t,e,n){return e.length===0&&!t.children[n]}var Fw=class{};function $q(t,e,n,i,r,s,o="emptyOnly"){return new Lw(t,e,n,i,r,o,s).recognize()}var Hq=31,Lw=class{constructor(e,n,i,r,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Ow(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new S(4002,`'${e.segmentGroup}'`)}recognize(){let e=Lx(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(n=>{let i=new Il([],Object.freeze({}),Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,{},le,this.rootComponentType,null,{}),r=new en(i,n),s=new qf("",r),o=Qz(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,le).pipe(hr(i=>{if(i instanceof Wf)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Dl?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=jw(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(ee(s=>s instanceof en?[s]:[]))}processChildren(e,n,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return Pe(r).pipe(ps(s=>{let o=i.children[s],a=uq(n,s);return this.processSegmentGroup(e,a,o,s)}),gh((s,o)=>(s.push(...o),s)),fr(null),Iy(),ke(s=>{if(s===null)return ha(i);let o=cM(s);return zq(o),H(o)}))}processSegment(e,n,i,r,s,o){return Pe(n).pipe(ps(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,i,r,s,o).pipe(hr(c=>{if(c instanceof Dl)return H(null);throw c}))),Zn(a=>!!a),hr(a=>{if(oM(a))return Uq(i,r,s)?H(new Fw):ha(i);throw a}))}processSegmentAgainstRoute(e,n,i,r,s,o,a){return Bq(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,s,o):ha(r):ha(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=$w(n,r,s);if(!a)return ha(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Hq&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,d).pipe(ke(h=>this.processSegment(e,i,n,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,i,r,s){let o=Oq(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),o.pipe(Qt(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Qt(({routes:c})=>{let l=i._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new Il(u,h,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,Gq(i),wi(i),i.component??i._loadedComponent??null,i,Wq(i)),{segmentGroup:p,slicedSegments:g}=Lx(n,u,d,c);if(g.length===0&&p.hasChildren())return this.processChildren(l,c,p).pipe(ee(E=>E===null?null:new en(f,E)));if(c.length===0&&g.length===0)return H(new en(f,[]));let v=wi(i)===s;return this.processSegment(l,c,p,g,v?le:s,!0).pipe(ee(E=>new en(f,E instanceof en?[E]:[])))}))):ha(n)))}getChildConfig(e,n,i){return n.children?H({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?H({routes:n._loadedRoutes,injector:n._loadedInjector}):xq(e,n,i,this.urlSerializer).pipe(ke(r=>r?this.configLoader.loadChildren(e,n).pipe(Qe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):Pq(n))):H({routes:[],injector:e})}};function zq(t){t.sort((e,n)=>e.value.outlet===le?-1:n.value.outlet===le?1:e.value.outlet.localeCompare(n.value.outlet))}function qq(t){let e=t.value.routeConfig;return e&&e.path===""}function cM(t){let e=[],n=new Set;for(let i of t){if(!qq(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=cM(i.children);e.push(new en(i.value,r))}return e.filter(i=>!n.has(i))}function Gq(t){return t.data||{}}function Wq(t){return t.resolve||{}}function Kq(t,e,n,i,r,s){return ke(o=>$q(t,e,n,i,o.extractedUrl,r,s).pipe(ee(({state:a,tree:c})=>ye(I({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function Qq(t,e){return ke(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return H(n);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of lM(c))o.add(l);let a=0;return Pe(o).pipe(ps(c=>s.has(c)?Yq(c,i,t,e):(c.data=jw(c,c.parent,t).resolve,H(void 0))),Qe(()=>a++),$o(1),ke(c=>a===o.size?H(n):$t))})}function lM(t){let e=t.children.map(n=>lM(n)).flat();return[t,...e]}function Yq(t,e,n,i){let r=t.routeConfig,s=t._resolve;return r?.title!==void 0&&!tM(r)&&(s[Tl]=r.title),Zq(s,t,e,i).pipe(ee(o=>(t._resolvedData=o,t.data=jw(t,t.parent,n).resolve,null)))}function Zq(t,e,n,i){let r=pw(t);if(r.length===0)return H({});let s={};return Pe(r).pipe(ke(o=>Xq(t[o],e,n,i).pipe(Zn(),Qe(a=>{s[o]=a}))),$o(1),Rc(s),hr(o=>oM(o)?$t:jo(o)))}function Xq(t,e,n,i){let r=Rl(e)??i,s=wa(t,r),o=s.resolve?s.resolve(e,n):wr(r,()=>s(e,n));return Sr(o)}function hw(t){return Qt(e=>{let n=t(e);return n?Pe(n).pipe(ee(()=>e)):H(e)})}var uM=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===le);return r}getResolvedTitleForRoute(i){return i.data[Tl]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(Jq),providedIn:"root"});let t=e;return t})(),Jq=(()=>{let e=class e extends uM{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(y(cw))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ml=new x("",{providedIn:"root",factory:()=>({})}),Cl=new x("ROUTES"),Hw=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=C(wf)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return H(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Sr(i.loadComponent()).pipe(ee(dM),Qe(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Mc(()=>{this.componentLoaders.delete(i)})),s=new sr(r,()=>new q).pipe(ko());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return H({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=eG(r,this.compiler,i,this.onLoadEndListener).pipe(Mc(()=>{this.childrenLoaders.delete(r)})),a=new sr(o,()=>new q).pipe(ko());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function eG(t,e,n,i){return Sr(t.loadChildren()).pipe(ee(dM),ke(r=>r instanceof qc||Array.isArray(r)?H(r):Pe(e.compileModuleAsync(r))),ee(r=>{i&&i(t);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(n).injector,o=s.get(Cl,[],{optional:!0,self:!0}).flat()),{routes:o.map(Uw),injector:s}}))}function tG(t){return t&&typeof t=="object"&&"default"in t}function dM(t){return tG(t)?t.default:t}var zw=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(nG),providedIn:"root"});let t=e;return t})(),nG=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hM=new x(""),fM=new x("");function iG(t,e,n){let i=t.get(fM),r=t.get(Y);return t.get(L).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(l=>{s=l}),a=r.startViewTransition(()=>(s(),rG(t))),{onViewTransitionCreated:c}=i;return c&&wr(t,()=>c({transition:a,from:e,to:n})),o})}function rG(t){return new Promise(e=>{Mv(e,{injector:t})})}var qw=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new q,this.transitionAbortSubject=new q,this.configLoader=C(Hw),this.environmentInjector=C(Zt),this.urlSerializer=C(Sl),this.rootContexts=C(Al),this.location=C(yi),this.inputBindingEnabled=C(Qf,{optional:!0})!==null,this.titleStrategy=C(uM),this.options=C(Ml,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=C(zw),this.createViewTransition=C(hM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>H(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Iw(s)),r=s=>this.events.next(new bw(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(ye(I(I({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new Ke({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ml,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Fe(o=>o.id!==0),ee(o=>ye(I({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Qt(o=>{this.currentTransition=o;let a=!1,c=!1;return H(o).pipe(Qe(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ye(I({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Qt(l=>{let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Cr(l.id,this.urlSerializer.serialize(l.rawUrl),h,Bf.IgnoredSameUrlNavigation)),l.resolve(null),$t}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return H(l).pipe(Qt(h=>{let f=this.transitions?.getValue();return this.events.next(new _a(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?$t:Promise.resolve(h)}),Kq(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Qe(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ye(I({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Uf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:g,extras:v}=l,E=new _a(h,this.urlSerializer.serialize(f),p,g);this.events.next(E);let A=Jx(this.rootComponentType).snapshot;return this.currentTransition=o=ye(I({},l),{targetSnapshot:A,urlAfterRedirects:f,extras:ye(I({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,H(o)}else{let h="";return this.events.next(new Cr(l.id,this.urlSerializer.serialize(l.extractedUrl),h,Bf.IgnoredByUrlHandlingStrategy)),l.resolve(null),$t}}),Qe(l=>{let u=new _w(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ee(l=>(this.currentTransition=o=ye(I({},l),{guards:hq(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),Iq(this.environmentInjector,l=>this.events.next(l)),Qe(l=>{if(o.guardsResult=l.guardsResult,ya(l.guardsResult))throw iM(this.urlSerializer,l.guardsResult);let u=new vw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Fe(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",vn.GuardRejected),!1)),hw(l=>{if(l.guards.canActivateChecks.length)return H(l).pipe(Qe(u=>{let d=new ww(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Qt(u=>{let d=!1;return H(u).pipe(Qq(this.paramsInheritanceStrategy,this.environmentInjector),Qe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",vn.NoDataFromResolver)}}))}),Qe(u=>{let d=new Ew(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),hw(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Qe(f=>{d.component=f}),ee(()=>{})));for(let f of d.children)h.push(...u(f));return h};return fs(u(l.targetSnapshot.root)).pipe(fr(null),Be(1))}),hw(()=>this.afterPreactivation()),Qt(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?Pe(d).pipe(ee(()=>o)):H(o)}),ee(l=>{let u=rq(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ye(I({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),Qe(()=>{this.events.next(new wl)}),dq(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Be(1),Qe({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new vi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Pn(this.transitionAbortSubject.pipe(Qe(l=>{throw l}))),Mc(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",vn.SupersededByNewNavigation),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),hr(l=>{if(c=!0,sM(l))this.events.next(new Dr(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),aq(l)?this.events.next(new El(l.url)):o.resolve(!1);else{this.events.next(new vl(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return $t}))}))}cancelNavigationTransition(i,r,s){let o=new Dr(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sG(t){return t!==ml}var oG=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(aG),providedIn:"root"});let t=e;return t})(),Vw=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},aG=(()=>{let e=class e extends Vw{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=li(e)))(s||e)}})(),e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pM=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(cG),providedIn:"root"});let t=e;return t})(),cG=(()=>{let e=class e extends pM{constructor(){super(...arguments),this.location=C(yi),this.urlSerializer=C(Sl),this.options=C(Ml,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=C(zw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new br,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Jx(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof _a)this.stateMemento=this.createStateMemento();else if(i instanceof Cr)this.rawUrlTree=r.initialUrl;else if(i instanceof Uf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof wl?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Dr&&(i.code===vn.GuardRejected||i.code===vn.NoDataFromResolver)?this.restoreHistory(r):i instanceof vl?this.restoreHistory(r,!0):i instanceof vi&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=I(I({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=I(I({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=li(e)))(s||e)}})(),e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fl=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(fl||{});function mM(t,e){t.events.pipe(Fe(n=>n instanceof vi||n instanceof Dr||n instanceof vl||n instanceof Cr),ee(n=>n instanceof vi||n instanceof Cr?fl.COMPLETE:(n instanceof Dr?n.code===vn.Redirect||n.code===vn.SupersededByNewNavigation:!1)?fl.REDIRECTING:fl.FAILED),Fe(n=>n!==fl.REDIRECTING),Be(1)).subscribe(()=>{e()})}function lG(t){throw t}var uG={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Bn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=C(ua),this.stateManager=C(pM),this.options=C(Ml,{optional:!0})||{},this.pendingTasks=C(Ef),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=C(qw),this.urlSerializer=C(Sl),this.location=C(yi),this.urlHandlingStrategy=C(zw),this._events=new q,this.errorHandler=this.options.errorHandler||lG,this.navigated=!1,this.routeReuseStrategy=C(oG),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=C(Cl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!C(Qf,{optional:!0}),this.eventsSubscription=new Ae,this.isNgZoneEnabled=C(L)instanceof L&&L.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Dr&&r.code!==vn.Redirect&&r.code!==vn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof vi)this.navigated=!0;else if(r instanceof El){let a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||sG(s.source)};this.scheduleNavigation(a,ml,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}fG(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ml,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=I({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Uw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=I(I({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=Qx(f)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),h=this.currentUrlTree.root}return Yx(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=ya(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,ml,null,r)}navigate(i,r={skipLocationChange:!1}){return hG(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=I({},uG):r===!1?s=I({},dG):s=r,ya(i))return Nx(this.currentUrlTree,i,s);let o=this.parseUrl(i);return Nx(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return mM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hG(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new S(4008,!1)}function fG(t){return!(t instanceof wl)&&!(t instanceof El)}var noe=(()=>{let e=class e{constructor(i,r,s,o,a,c){this.router=i,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new q,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=i.events.subscribe(u=>{u instanceof vi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i!=null?(this.commands=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(i,r,s,o,a){if(this.urlTree===null||this.isAnchorElement&&(i!==0||r||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(this.urlTree,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=this.urlTree!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let i=this.href===null?null:sR(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(i,r){let s=this.renderer,o=this.el.nativeElement;r!==null?s.setAttribute(o,i,r):s.removeAttribute(o,i)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(T(Bn),T(Tr),av("tabindex"),T(Vn),T(_e),T(zi))},e.\u0275dir=me({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&lt("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&hi("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[fe.HasDecoratorInputTransform,"preserveFragment","preserveFragment",_n],skipLocationChange:[fe.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",_n],replaceUrl:[fe.HasDecoratorInputTransform,"replaceUrl","replaceUrl",_n],routerLink:"routerLink"},standalone:!0,features:[Ui,Ft]});let t=e;return t})();var Kf=class{};var pG=(()=>{let e=class e{constructor(i,r,s,o,a){this.router=i,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Fe(i=>i instanceof vi),ps(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let s=[];for(let o of r){o.providers&&!o._injector&&(o._injector=vf(o.providers,i,`Route: ${o.path}`));let a=o._injector??i,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Pe(s).pipe(ur())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(i,r):s=H(null);let o=s.pipe(ke(a=>a===null?H(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return Pe([o,a]).pipe(ur())}else return o})}};e.\u0275fac=function(r){return new(r||e)(y(Bn),y(wf),y(Zt),y(Kf),y(Hw))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),gM=new x(""),mG=(()=>{let e=class e{constructor(i,r,s,o,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof _a?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof vi?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Cr&&i.code===Bf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof $f&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new $f(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){mR()},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function ioe(t,...e){return sf([{provide:Cl,multi:!0,useValue:t},[],{provide:Tr,useFactory:yM,deps:[Bn]},{provide:Cf,multi:!0,useFactory:_M},e.map(n=>n.\u0275providers)])}function yM(t){return t.routerState.root}function Nl(t,e){return{\u0275kind:t,\u0275providers:e}}function _M(){let t=C(Me);return e=>{let n=t.get(pi);if(e!==n.components[0])return;let i=t.get(Bn),r=t.get(vM);t.get(Gw)===1&&i.initialNavigation(),t.get(wM,null,he.Optional)?.setUpPreloading(),t.get(gM,null,he.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var vM=new x("",{factory:()=>new q}),Gw=new x("",{providedIn:"root",factory:()=>1});function gG(){return Nl(2,[{provide:Gw,useValue:0},{provide:Df,multi:!0,deps:[Me],useFactory:e=>{let n=e.get(mx,Promise.resolve());return()=>n.then(()=>new Promise(i=>{let r=e.get(Bn),s=e.get(vM);mM(r,()=>{i(!0)}),e.get(qw).afterPreactivation=()=>(i(!0),s.closed?H(void 0):s),r.initialNavigation()}))}}])}function yG(){return Nl(3,[{provide:Df,multi:!0,useFactory:()=>{let e=C(Bn);return()=>{e.setUpLocationChangeListener()}}},{provide:Gw,useValue:2}])}var wM=new x("");function _G(t){return Nl(0,[{provide:wM,useExisting:pG},{provide:Kf,useExisting:t}])}function vG(){return Nl(8,[Fx,{provide:Qf,useExisting:Fx}])}function wG(t){let e=[{provide:hM,useValue:iG},{provide:fM,useValue:I({skipNextTransition:!!t?.skipInitialTransition},t)}];return Nl(9,e)}var Vx=new x("ROUTER_FORROOT_GUARD"),EG=[yi,{provide:Sl,useClass:yl},Bn,Al,{provide:Tr,useFactory:yM,deps:[Bn]},Hw,[]],Ww=(()=>{let e=class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[EG,[],{provide:Cl,multi:!0,useValue:i},{provide:Vx,useFactory:CG,deps:[[Bn,new yt,new uv]]},{provide:Ml,useValue:r||{}},r?.useHash?bG():DG(),IG(),r?.preloadingStrategy?_G(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?TG(r):[],r?.bindToComponentInputs?vG().\u0275providers:[],r?.enableViewTransitions?wG().\u0275providers:[],SG()]}}static forChild(i){return{ngModule:e,providers:[{provide:Cl,multi:!0,useValue:i}]}}};e.\u0275fac=function(r){return new(r||e)(y(Vx,8))},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})();function IG(){return{provide:gM,useFactory:()=>{let t=C(Ix),e=C(L),n=C(Ml),i=C(qw),r=C(Sl);return n.scrollOffset&&t.setOffset(n.scrollOffset),new mG(r,i,t,e,n)}}}function bG(){return{provide:zi,useClass:yx}}function DG(){return{provide:zi,useClass:Yv}}function CG(t){return"guarded"}function TG(t){return[t.initialNavigation==="disabled"?yG().\u0275providers:[],t.initialNavigation==="enabledBlocking"?gG().\u0275providers:[]]}var jx=new x("");function SG(){return[{provide:jx,useFactory:_M},{provide:Cf,multi:!0,useExisting:jx}]}var aoe=(()=>{let e=class e{constructor(){this.executingCounter=oR(0),this.loadingStatus$=new Ke(!1)}get loading$(){return this.loadingStatus$.asObservable()}start(){this.executingCounter.update(i=>i+1),this.executingCounter()>0&&this.loadingStatus$.next(!0)}stop(){this.executingCounter()>0&&this.executingCounter.update(i=>i-1),this.executingCounter()<=0&&this.loadingStatus$.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var IM=function(t){let e=[],n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},RG=function(t){let e=[],n=0,i=0;for(;n<t.length;){let r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=t[n++],o=t[n++],a=t[n++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){let s=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,l=c?t[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),i.push(n[u],n[d],n[h],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(IM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RG(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){let s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;let l=r<t.length?n[t.charAt(r)]:64;++r;let d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||l==null||d==null)throw new Qw;let h=s<<2|a>>4;if(i.push(h),l!==64){let f=a<<4&240|l>>2;if(i.push(f),d!==64){let p=l<<6&192|d;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Qw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},xG=function(t){let e=IM(t);return bM.encodeByteArray(e,!0)},Zw=function(t){return xG(t).replace(/\./g,"")},Xw=function(t){try{return bM.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function MG(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var NG=()=>MG().__FIREBASE_DEFAULTS__,PG=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},OG=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Xw(t[1]);return e&&JSON.parse(e)},Xf=()=>{try{return NG()||PG()||OG()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},DM=t=>{var e,n;return(n=(e=Xf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]};var Jw=()=>{var t;return(t=Xf())===null||t===void 0?void 0:t.config},eE=t=>{var e;return(e=Xf())===null||e===void 0?void 0:e[`_${t}`]};var Zf=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}};function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function kG(){var t;let e=(t=Xf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TM(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function SM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AM(){let t=ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tE(){return!kG()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jf(){try{return typeof indexedDB=="object"}catch{return!1}}function RM(){return new Promise((t,e)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var FG="FirebaseError",tn=class t extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=FG,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qi.prototype.create)}},qi=class{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){let i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?LG(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new tn(r,a,i)}};function LG(t,e){return t.replace(VG,(n,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var VG=/\{\$([^}]+)}/g;function xM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ar(t,e){if(t===e)return!0;let n=Object.keys(t),i=Object.keys(e);for(let r of n){if(!i.includes(r))return!1;let s=t[r],o=e[r];if(EM(s)&&EM(o)){if(!Ar(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!n.includes(r))return!1;return!0}function EM(t){return t!==null&&typeof t=="object"}function Ea(t){let e=[];for(let[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ia(t){let e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function ba(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function MM(t,e){let n=new Yw(t,e);return n.subscribe.bind(n)}var Yw=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");jG(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Kw),r.error===void 0&&(r.error=Kw),r.complete===void 0&&(r.complete=Kw);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function jG(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Kw(){}var loe=4*60*60*1e3;function Ue(t){return t&&t._delegate?t._delegate:t}var En=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ks="[DEFAULT]";var nE=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let i=new Zf;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UG(e))try{this.getOrInitializeService({instanceIdentifier:ks})}catch{}for(let[n,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return m(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ks){return this.instances.has(e)}getOptions(e=ks){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;let r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let i=this.onInitCallbacks.get(n);if(i)for(let r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:BG(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ks){return this.component?this.component.multipleInstances?e:ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function BG(t){return t===ks?void 0:t}function UG(t){return t.instantiationMode==="EAGER"}var ep=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new nE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var $G=[],pe=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(pe||{}),HG={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},zG=pe.INFO,qG={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},GG=(t,e,...n)=>{if(e<t.logLevel)return;let i=new Date().toISOString(),r=qG[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Rr=class{constructor(e){this.name=e,this._logLevel=zG,this._logHandler=GG,this._userLogHandler=null,$G.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HG[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};var WG=(t,e)=>e.some(n=>t instanceof n),NM,PM;function KG(){return NM||(NM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QG(){return PM||(PM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var OM=new WeakMap,rE=new WeakMap,kM=new WeakMap,iE=new WeakMap,oE=new WeakMap;function YG(t){let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ei(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&OM.set(n,t)}).catch(()=>{}),oE.set(e,t),e}function ZG(t){if(rE.has(t))return;let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});rE.set(t,e)}var sE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ei(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FM(t){sE=t(sE)}function XG(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let i=t.call(tp(this),e,...n);return kM.set(i,e.sort?e.sort():[e]),Ei(i)}:QG().includes(t)?function(...e){return t.apply(tp(this),e),Ei(OM.get(this))}:function(...e){return Ei(t.apply(tp(this),e))}}function JG(t){return typeof t=="function"?XG(t):(t instanceof IDBTransaction&&ZG(t),WG(t,KG())?new Proxy(t,sE):t)}function Ei(t){if(t instanceof IDBRequest)return YG(t);if(iE.has(t))return iE.get(t);let e=JG(t);return e!==t&&(iE.set(t,e),oE.set(e,t)),e}var tp=t=>oE.get(t);function VM(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(t,e),a=Ei(o);return i&&o.addEventListener("upgradeneeded",c=>{i(Ei(o.result),c.oldVersion,c.newVersion,Ei(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var eW=["get","getKey","getAll","getAllKeys","count"],tW=["put","add","delete","clear"],aE=new Map;function LM(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(aE.get(e))return aE.get(e);let n=e.replace(/FromIndex$/,""),i=e!==n,r=tW.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||eW.includes(n)))return;let s=function(o,...a){return m(this,null,function*(){let c=this.transaction(o,r?"readwrite":"readonly"),l=c.store;return i&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),r&&c.done]))[0]})};return aE.set(e,s),s}FM(t=>ye(I({},t),{get:(e,n,i)=>LM(e,n)||t.get(e,n,i),has:(e,n)=>!!LM(e,n)||t.has(e,n)}));var lE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nW(n)){let i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}};function nW(t){let e=t.getComponent();return e?.type==="VERSION"}var uE="@firebase/app",jM="0.9.26";var Fs=new Rr("@firebase/app"),iW="@firebase/app-compat",rW="@firebase/analytics-compat",sW="@firebase/analytics",oW="@firebase/app-check-compat",aW="@firebase/app-check",cW="@firebase/auth",lW="@firebase/auth-compat",uW="@firebase/database",dW="@firebase/database-compat",hW="@firebase/functions",fW="@firebase/functions-compat",pW="@firebase/installations",mW="@firebase/installations-compat",gW="@firebase/messaging",yW="@firebase/messaging-compat",_W="@firebase/performance",vW="@firebase/performance-compat",wW="@firebase/remote-config",EW="@firebase/remote-config-compat",IW="@firebase/storage",bW="@firebase/storage-compat",DW="@firebase/firestore",CW="@firebase/firestore-compat",TW="firebase",SW="10.7.2";var dE="[DEFAULT]",AW={[uE]:"fire-core",[iW]:"fire-core-compat",[sW]:"fire-analytics",[rW]:"fire-analytics-compat",[aW]:"fire-app-check",[oW]:"fire-app-check-compat",[cW]:"fire-auth",[lW]:"fire-auth-compat",[uW]:"fire-rtdb",[dW]:"fire-rtdb-compat",[hW]:"fire-fn",[fW]:"fire-fn-compat",[pW]:"fire-iid",[mW]:"fire-iid-compat",[gW]:"fire-fcm",[yW]:"fire-fcm-compat",[_W]:"fire-perf",[vW]:"fire-perf-compat",[wW]:"fire-rc",[EW]:"fire-rc-compat",[IW]:"fire-gcs",[bW]:"fire-gcs-compat",[DW]:"fire-fst",[CW]:"fire-fst-compat","fire-js":"fire-js",[TW]:"fire-js-all"};var Pl=new Map,hE=new Map;function RW(t,e){try{t.container.addComponent(e)}catch(n){Fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mr(t){let e=t.name;if(hE.has(e))return Fs.debug(`There were multiple attempts to register component ${e}.`),!1;hE.set(e,t);for(let n of Pl.values())RW(n,t);return!0}function kl(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var xW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},xr=new qi("app","Firebase",xW);var fE=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new En("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}};var Nr=SW;function gE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let i=Object.assign({name:dE,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw xr.create("bad-app-name",{appName:String(r)});if(n||(n=Jw()),!n)throw xr.create("no-options");let s=Pl.get(r);if(s){if(Ar(n,s.options)&&Ar(i,s.config))return s;throw xr.create("duplicate-app",{appName:r})}let o=new ep(r);for(let c of hE.values())o.addComponent(c);let a=new fE(n,i,o);return Pl.set(r,a),a}function Da(t=dE){let e=Pl.get(t);if(!e&&t===dE&&Jw())return gE();if(!e)throw xr.create("no-app",{appName:t});return e}function np(){return Array.from(Pl.values())}function rt(t,e,n){var i;let r=(i=AW[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fs.warn(a.join(" "));return}Mr(new En(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var MW="firebase-heartbeat-database",NW=1,Ol="firebase-heartbeat-store",cE=null;function HM(){return cE||(cE=VM(MW,NW,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ol)}catch(n){console.warn(n)}}}}).catch(t=>{throw xr.create("idb-open",{originalErrorMessage:t.message})})),cE}function PW(t){return m(this,null,function*(){try{return yield(yield HM()).transaction(Ol).objectStore(Ol).get(zM(t))}catch(e){if(e instanceof tn)Fs.warn(e.message);else{let n=xr.create("idb-get",{originalErrorMessage:e?.message});Fs.warn(n.message)}}})}function BM(t,e){return m(this,null,function*(){try{let i=(yield HM()).transaction(Ol,"readwrite");yield i.objectStore(Ol).put(e,zM(t)),yield i.done}catch(n){if(n instanceof tn)Fs.warn(n.message);else{let i=xr.create("idb-set",{originalErrorMessage:n?.message});Fs.warn(i.message)}}})}function zM(t){return`${t.name}!${t.options.appId}`}var OW=1024,kW=30*24*60*60*1e3,pE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new mE(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return m(this,null,function*(){var e,n;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=UM();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=kW}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return m(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=UM(),{heartbeatsToSend:i,unsentEntries:r}=FW(this._heartbeatsCache.heartbeats),s=Zw(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function UM(){return new Date().toISOString().substring(0,10)}function FW(t,e=OW){let n=[],i=t.slice();for(let r of t){let s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),$M(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),$M(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}var mE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return Jf()?RM().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield PW(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return BM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return BM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function $M(t){return Zw(JSON.stringify({version:2,heartbeats:t})).length}function LW(t){Mr(new En("platform-logger",e=>new lE(e),"PRIVATE")),Mr(new En("heartbeat",e=>new pE(e),"PRIVATE")),rt(uE,jM,t),rt(uE,jM,"esm2017"),rt("fire-js","")}LW("");var VW="firebase",jW="10.7.2";rt(VW,jW,"app");var Vs=new oi("ANGULARFIRE2_VERSION");function rp(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Fl=(t,e)=>{let n=e?[e]:np(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Ta=class{constructor(){return Fl(BW)}},BW="app-check";function Ca(){}var ip=class{zone;delegate;constructor(e,n=_y){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,i)}},yE=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ca,{},Ca,Ca)),n.pipe(Qe({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Sa=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new ip(Zone.current)),this.insideAngular=n.run(()=>new ip(Zone.current,dn)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(y(L))};static \u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sp(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function UW(t){return sp().ngZone.runOutsideAngular(()=>t())}function Ls(t){return sp().ngZone.run(()=>t())}function $W(t){return HW(sp())(t)}function HW(t){return function(n){return n=n.lift(new yE(t.ngZone)),n.pipe(lr(t.outsideAngular),cr(t.insideAngular))}}var zW=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ls(()=>t.apply(void 0,i))},Ce=(t,e)=>function(){let n,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(n||=Ls(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ca,{},Ca,Ca))),i[s]=zW(i[s],n));let r=UW(()=>t.apply(this,i));if(!e)if(r instanceof W){let s=sp();return r.pipe(lr(s.outsideAngular),cr(s.insideAngular))}else return Ls(()=>r);return r instanceof W?r.pipe($W):r instanceof Promise?Ls(()=>new Promise((s,o)=>r.then(a=>Ls(()=>s(a)),a=>Ls(()=>o(a))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:Ls(()=>r)};var Gi=class{constructor(e){return e}},js=class{constructor(){return np()}};function qW(t){return t&&t.length===1?t[0]:new Gi(Da())}var _E=new x("angularfire2._apps"),GW={provide:Gi,useFactory:qW,deps:[[new yt,_E]]},WW={provide:js,deps:[[new yt,_E]]};function KW(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Gi(i)}}var QW=(()=>{class t{constructor(n){rt("angularfire",Vs.full,"core"),rt("angularfire",Vs.full,"app"),rt("angular",ix.full,n.toString())}static \u0275fac=function(i){return new(i||t)(y(gn))};static \u0275mod=re({type:t});static \u0275inj=ie({providers:[GW,WW]})}return t})();function Goe(t,...e){return{ngModule:QW,providers:[{provide:_E,useFactory:KW(t),multi:!0,deps:[L,Me,Sa,...e]}]}}var Woe=Ce(Da,!0);var Koe=Ce(gE,!0);function oN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var aN=oN,cN=new qi("auth","Firebase",oN());var dp=new Rr("@firebase/auth");function YW(t,...e){dp.logLevel<=pe.WARN&&dp.warn(`Auth (${Nr}): ${t}`,...e)}function ap(t,...e){dp.logLevel<=pe.ERROR&&dp.error(`Auth (${Nr}): ${t}`,...e)}function In(t,...e){throw VE(t,...e)}function Ii(t,...e){return VE(t,...e)}function lN(t,e,n){let i=Object.assign(Object.assign({},aN()),{[e]:n});return new qi("auth","Firebase",i).create(e,{appName:t.name})}function ZW(t,e,n){let i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&In(t,"argument-error"),lN(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function VE(t,...e){if(typeof t!="string"){let n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return cN.create(t,...e)}function X(t,e,...n){if(!t)throw VE(e,...n)}function Wi(t){let e="INTERNAL ASSERTION FAILED: "+t;throw ap(e),new Error(e)}function Qi(t,e){t||Wi(e)}function EE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function XW(){return qM()==="http:"||qM()==="https:"}function qM(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function JW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XW()||TM()||"connection"in navigator)?navigator.onLine:!0}function e4(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Bs=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qi(n>e,"Short delay should be less than long delay!"),this.isMobile=CM()||SM()}get(){return JW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function jE(t,e){Qi(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var hp=class{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var t4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var n4=new Bs(3e4,6e4);function Or(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function kr(s,o,a,c){return m(this,arguments,function*(t,e,n,i,r={}){return uN(t,r,()=>m(this,null,function*(){let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});let d=Ea(Object.assign({key:t.config.apiKey},u)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),hp.fetch()(dN(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},l))}))})}function uN(t,e,n){return m(this,null,function*(){t._canInitEmulator=!1;let i=Object.assign(Object.assign({},t4),e);try{let r=new IE(t),s=yield Promise.race([n(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw op(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw op(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw op(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw op(t,"user-disabled",o);let u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw lN(t,u,l);In(t,u)}}catch(r){if(r instanceof tn)throw r;In(t,"network-request-failed",{message:String(r)})}})}function Hl(s,o,a,c){return m(this,arguments,function*(t,e,n,i,r={}){let l=yield kr(t,e,n,i,r);return"mfaPendingCredential"in l&&In(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function dN(t,e,n,i){let r=`${e}${n}?${i}`;return t.config.emulator?jE(t.config,r):`${t.config.apiScheme}://${r}`}function i4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var IE=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ii(this.auth,"network-request-failed")),n4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function op(t,e,n){let i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let r=Ii(t,e,i);return r.customData._tokenResponse=n,r}function GM(t){return t!==void 0&&t.enterprise!==void 0}var bE=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return i4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function r4(t,e){return m(this,null,function*(){return kr(t,"GET","/v2/recaptchaConfig",Or(t,e))})}function s4(t,e){return m(this,null,function*(){return kr(t,"POST","/v1/accounts:delete",e)})}function o4(t,e){return m(this,null,function*(){return kr(t,"POST","/v1/accounts:lookup",e)})}function Ll(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function BE(t,e=!1){return m(this,null,function*(){let n=Ue(t),i=yield n.getIdToken(e),r=UE(i);X(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Ll(vE(r.auth_time)),issuedAtTime:Ll(vE(r.iat)),expirationTime:Ll(vE(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function vE(t){return Number(t)*1e3}function UE(t){let[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return ap("JWT malformed, contained fewer than 3 sections"),null;try{let r=Xw(n);return r?JSON.parse(r):(ap("Failed to decode base64 JWT payload"),null)}catch(r){return ap("Caught error parsing JWT payload as JSON",r?.toString()),null}}function a4(t){let e=UE(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Vl(t,e,n=!1){return m(this,null,function*(){if(n)return e;try{return yield e}catch(i){throw i instanceof tn&&c4(i)&&t.auth.currentUser===t&&(yield t.auth.signOut()),i}})}function c4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var DE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),n)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var fp=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ll(this.lastLoginAt),this.creationTime=Ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function pp(t){return m(this,null,function*(){var e;let n=t.auth,i=yield t.getIdToken(),r=yield Vl(t,o4(n,{idToken:i}));X(r?.users.length,n,"internal-error");let s=r.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?u4(s.providerUserInfo):[],a=l4(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new fp(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function $E(t){return m(this,null,function*(){let e=Ue(t);yield pp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function l4(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function u4(t){return t.map(e=>{var{providerId:n}=e,i=Jd(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function d4(t,e){return m(this,null,function*(){let n=yield uN(t,{},()=>m(this,null,function*(){let i=Ea({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=dN(t,r,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",hp.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function h4(t,e){return m(this,null,function*(){return kr(t,"POST","/v2/accounts:revokeToken",Or(t,e))})}var mp=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):a4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return m(this,null,function*(){return X(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return m(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield d4(e,n);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){let{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new t;return i&&(X(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(X(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(X(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Wi("not implemented")}};function Pr(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var jl=class t{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Jd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fp(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let n=yield Vl(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return BE(this,e)}reload(){return $E(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return m(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield pp(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){let e=yield this.getIdToken();return yield Vl(this,s4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,c,l,u;let d=(i=n.displayName)!==null&&i!==void 0?i:void 0,h=(r=n.email)!==null&&r!==void 0?r:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(l=n.createdAt)!==null&&l!==void 0?l:void 0,A=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:N,emailVerified:O,isAnonymous:K,providerData:j,stsTokenManager:ae}=n;X(N&&ae,e,"internal-error");let De=mp.fromJSON(this.name,ae);X(typeof N=="string",e,"internal-error"),Pr(d,e.name),Pr(h,e.name),X(typeof O=="boolean",e,"internal-error"),X(typeof K=="boolean",e,"internal-error"),Pr(f,e.name),Pr(p,e.name),Pr(g,e.name),Pr(v,e.name),Pr(E,e.name),Pr(A,e.name);let Mt=new t({uid:N,auth:e,email:h,emailVerified:O,displayName:d,isAnonymous:K,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:De,createdAt:E,lastLoginAt:A});return j&&Array.isArray(j)&&(Mt.providerData=j.map(xn=>Object.assign({},xn))),v&&(Mt._redirectEventId=v),Mt}static _fromIdTokenResponse(e,n,i=!1){return m(this,null,function*(){let r=new mp;r.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield pp(s),s})}};var WM=new Map;function Ki(t){Qi(t instanceof Function,"Expected a class definition");let e=WM.get(t);return e?(Qi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,WM.set(t,e),e)}var f4=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(n,i){return m(this,null,function*(){this.storage[n]=i})}_get(n){return m(this,null,function*(){let i=this.storage[n];return i===void 0?null:i})}_remove(n){return m(this,null,function*(){delete this.storage[n]})}_addListener(n,i){}_removeListener(n,i){}}return t.type="NONE",t})(),CE=f4;function cp(t,e,n){return`firebase:${t}:${e}:${n}`}var gp=class t{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=cp(this.userKey,r.apiKey,s),this.fullPersistenceKey=cp("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?jl._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,i="authUser"){return m(this,null,function*(){if(!n.length)return new t(Ki(CE),e,i);let r=(yield Promise.all(n.map(l=>m(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=r[0]||Ki(CE),o=cp(i,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(o);if(u){let d=jl._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,i):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>m(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,i))})}};function KM(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gN(e))return"Blackberry";if(yN(e))return"Webos";if(HE(e))return"Safari";if((e.includes("chrome/")||fN(e))&&!e.includes("edge/"))return"Chrome";if(mN(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function hN(t=ze()){return/firefox\//i.test(t)}function HE(t=ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fN(t=ze()){return/crios\//i.test(t)}function pN(t=ze()){return/iemobile/i.test(t)}function mN(t=ze()){return/android/i.test(t)}function gN(t=ze()){return/blackberry/i.test(t)}function yN(t=ze()){return/webos/i.test(t)}function Tp(t=ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function p4(t=ze()){var e;return Tp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function m4(){return AM()&&document.documentMode===10}function _N(t=ze()){return Tp(t)||mN(t)||yN(t)||gN(t)||/windows phone/i.test(t)||pN(t)}function g4(){try{return!!(window&&window!==window.top)}catch{return!1}}function vN(t,e=[]){let n;switch(t){case"Browser":n=KM(ze());break;case"Worker":n=`${KM(ze())}-${t}`;break;default:n=t}let i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Nr}/${i}`}var TE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let i=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});i.onAbort=n,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let i of this.queue)yield i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(let r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function y4(n){return m(this,arguments,function*(t,e={}){return kr(t,"GET","/v2/passwordPolicy",Or(t,e))})}var _4=6,SE=class{constructor(e){var n,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_4,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var AE=class{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yp(this),this.idTokenSubscription=new yp(this),this.beforeStateQueue=new TE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ki(n)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield gp.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return m(this,null,function*(){var n;let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return m(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield pp(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=e4()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){let n=e?Ue(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return m(this,null,function*(){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(Ki(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield y4(this),n=new SE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qi("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},n)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),yield h4(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return m(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Ki(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=yield gp.create(this,[Ki(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var n,i;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,i,r);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(n["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n})}_getAppCheckToken(){return m(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&YW(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Fr(t){return Ue(t)}var yp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=MM(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};function v4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function wN(t){return new Promise((e,n)=>{let i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{let s=Ii("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",v4().appendChild(i)})}function EN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var w4="https://www.google.com/recaptcha/enterprise.js?render=",E4="recaptcha-enterprise",I4="NO_RECAPTCHA",RE=class{constructor(e){this.type=E4,this.auth=Fr(e)}verify(e="verify",n=!1){return m(this,null,function*(){function i(s){return m(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>m(this,null,function*(){r4(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new bE(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function r(s,o,a){let c=window.grecaptcha;GM(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(I4)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&GM(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}wN(w4+a).then(()=>{r(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})})}};function QM(t,e,n,i=!1){return m(this,null,function*(){let r=new RE(t),s;try{s=yield r.verify(n)}catch{s=yield r.verify(n,!0)}let o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function xE(t,e,n,i){return m(this,null,function*(){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield QM(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(s=>m(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield QM(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)}))})}function zE(t,e){let n=kl(t,"auth");if(n.isInitialized()){let r=n.getImmediate(),s=n.getOptions();if(Ar(s,e??{}))return r;In(r,"already-initialized")}return n.initialize({options:e})}function b4(t,e){let n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Ki);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function qE(t,e,n){let i=Fr(t);X(i._canInitEmulator,i,"emulator-config-failed"),X(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!n?.disableWarnings,s=IN(e),{host:o,port:a}=D4(e),c=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||C4()}function IN(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function D4(t){let e=IN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:YM(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:YM(o)}}}function YM(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function C4(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ra=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wi("not implemented")}_getIdTokenResponse(e){return Wi("not implemented")}_linkToIdToken(e,n){return Wi("not implemented")}_getReauthenticationResolver(e){return Wi("not implemented")}};function T4(t,e){return m(this,null,function*(){return kr(t,"POST","/v1/accounts:signUp",e)})}function S4(t,e){return m(this,null,function*(){return Hl(t,"POST","/v1/accounts:signInWithPassword",Or(t,e))})}function A4(t,e){return m(this,null,function*(){return Hl(t,"POST","/v1/accounts:signInWithEmailLink",Or(t,e))})}function R4(t,e){return m(this,null,function*(){return Hl(t,"POST","/v1/accounts:signInWithEmailLink",Or(t,e))})}var Bl=class t extends Ra{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new t(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return m(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xE(e,n,"signInWithPassword",S4);case"emailLink":return A4(e,{email:this._email,oobCode:this._password});default:In(e,"internal-error")}})}_linkToIdToken(e,n){return m(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xE(e,i,"signUpPassword",T4);case"emailLink":return R4(e,{idToken:n,email:this._email,oobCode:this._password});default:In(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Aa(t,e){return m(this,null,function*(){return Hl(t,"POST","/v1/accounts:signInWithIdp",Or(t,e))})}var x4="http://localhost",_p=class t extends Ra{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):In("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Jd(n,["providerId","signInMethod"]);if(!i||!r)return null;let o=new t(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let n=this.buildRequest();return Aa(e,n)}_linkToIdToken(e,n){let i=this.buildRequest();return i.idToken=n,Aa(e,i)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Aa(e,n)}buildRequest(){let e={requestUri:x4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ea(n)}return e}};function M4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function N4(t){let e=Ia(ba(t)).link,n=e?Ia(ba(e)).deep_link_id:null,i=Ia(ba(t)).deep_link_id;return(i?Ia(ba(i)).link:null)||i||n||e||t}var vp=class t{constructor(e){var n,i,r,s,o,a;let c=Ia(ba(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,u=(i=c.oobCode)!==null&&i!==void 0?i:null,d=M4((r=c.mode)!==null&&r!==void 0?r:null);X(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=N4(e);try{return new t(n)}catch{return null}}};var bN=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,i){return Bl._fromEmailAndPassword(n,i)}static credentialWithLink(n,i){let r=vp.parseLink(i);return X(r,"argument-error"),Bl._fromEmailAndCode(n,r.code,r.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Ul=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var wp=class extends Ul{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var GE=(()=>{class t extends wp{constructor(){super("google.com"),this.addScope("profile")}static credential(n,i){return _p._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:i})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:i,oauthAccessToken:r}=n;if(!i&&!r)return null;try{return t.credential(i,r)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();function P4(t,e){return m(this,null,function*(){return Hl(t,"POST","/v1/accounts:signUp",Or(t,e))})}var xa=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,i,r=!1){return m(this,null,function*(){let s=yield jl._fromIdTokenResponse(e,i,r),o=ZM(i);return new t({user:s,providerId:o,_tokenResponse:i,operationType:n})})}static _forOperation(e,n,i){return m(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=ZM(i);return new t({user:e,providerId:r,_tokenResponse:i,operationType:n})})}};function ZM(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var ME=class t extends tn{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new t(e,n,i,r)}};function DN(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ME._fromErrorAndOperation(t,s,e,i):s})}function O4(t,e,n=!1){return m(this,null,function*(){let i=yield Vl(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return xa._forOperation(t,"link",i)})}function k4(t,e,n=!1){return m(this,null,function*(){let{auth:i}=t,r="reauthenticate";try{let s=yield Vl(t,DN(i,r,e,t),n);X(s.idToken,i,"internal-error");let o=UE(s.idToken);X(o,i,"internal-error");let{sub:a}=o;return X(t.uid===a,i,"user-mismatch"),xa._forOperation(t,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&In(i,"user-mismatch"),s}})}function CN(t,e,n=!1){return m(this,null,function*(){let i="signIn",r=yield DN(t,i,e),s=yield xa._fromIdTokenResponse(t,i,r);return n||(yield t._updateCurrentUser(s.user)),s})}function WE(t,e){return m(this,null,function*(){return CN(Fr(t),e)})}function TN(t){return m(this,null,function*(){let e=Fr(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function KE(t,e,n){return m(this,null,function*(){let i=Fr(t),o=yield xE(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",P4).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&TN(t),c}),a=yield xa._fromIdTokenResponse(i,"signIn",o);return yield i._updateCurrentUser(a.user),a})}function QE(t,e,n){return WE(Ue(t),bN.credential(e,n)).catch(i=>m(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&TN(t),i}))}function YE(t,e,n,i){return Ue(t).onIdTokenChanged(e,n,i)}function ZE(t,e,n){return Ue(t).beforeAuthStateChanged(e,n)}function XE(t,e,n,i){return Ue(t).onAuthStateChanged(e,n,i)}function JE(t){return Ue(t).signOut()}var Ep="__sak";var Ip=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ep,"1"),this.storage.removeItem(Ep),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function F4(){let t=ze();return HE(t)||Tp(t)}var L4=1e3,V4=10,j4=(()=>{class t extends Ip{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,i)=>this.onStorageEvent(n,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=F4()&&g4(),this.fallbackToPolling=_N(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&n(i,s,r)}}onStorageEvent(n,i=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let r=n.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(r);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(r,n.newValue):this.storage.removeItem(r);else if(this.localCache[r]===n.newValue&&!i)return}let s=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);m4()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,V4):s()}notifyListeners(n,i){this.localCache[n]=i;let r=this.listeners[n];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:i,newValue:r}),!0)})},L4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,i){return m(this,null,function*(){yield Kn(t.prototype,this,"_set").call(this,n,i),this.localCache[n]=JSON.stringify(i)})}_get(n){return m(this,null,function*(){let i=yield Kn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(i),i})}_remove(n){return m(this,null,function*(){yield Kn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),SN=j4;var B4=(()=>{class t extends Ip{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,i){}_removeListener(n,i){}}return t.type="SESSION",t})(),eI=B4;function U4(t){return Promise.all(t.map(e=>m(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var $4=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let i=this.receivers.find(s=>s.isListeningto(n));if(i)return i;let r=new t(n);return this.receivers.push(r),r}isListeningto(n){return this.eventTarget===n}handleEvent(n){return m(this,null,function*(){let i=n,{eventId:r,eventType:s,data:o}=i.data,a=this.handlersMap[s];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let c=Array.from(a).map(u=>m(this,null,function*(){return u(i.origin,o)})),l=yield U4(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})})}_subscribe(n,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(i)}_unsubscribe(n,i){this.handlersMap[n]&&i&&this.handlersMap[n].delete(i),(!i||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function tI(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}var NE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,i=50){return m(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=tI("",20);r.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function bi(){return window}function H4(t){bi().location.href=t}function AN(){return typeof bi().WorkerGlobalScope<"u"&&typeof bi().importScripts=="function"}function z4(){return m(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function q4(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function G4(){return AN()?self:null}var RN="firebaseLocalStorageDb",W4=1,bp="firebaseLocalStorage",xN="fbase_key",Us=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Sp(t,e){return t.transaction([bp],e?"readwrite":"readonly").objectStore(bp)}function K4(){let t=indexedDB.deleteDatabase(RN);return new Us(t).toPromise()}function PE(){let t=indexedDB.open(RN,W4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let i=t.result;try{i.createObjectStore(bp,{keyPath:xN})}catch(r){n(r)}}),t.addEventListener("success",()=>m(this,null,function*(){let i=t.result;i.objectStoreNames.contains(bp)?e(i):(i.close(),yield K4(),e(yield PE()))}))})}function XM(t,e,n){return m(this,null,function*(){let i=Sp(t,!0).put({[xN]:e,value:n});return new Us(i).toPromise()})}function Q4(t,e){return m(this,null,function*(){let n=Sp(t,!1).get(e),i=yield new Us(n).toPromise();return i===void 0?null:i.value})}function JM(t,e){let n=Sp(t,!0).delete(e);return new Us(n).toPromise()}var Y4=800,Z4=3,X4=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return m(this,null,function*(){return this.db?this.db:(this.db=yield PE(),this.db)})}_withRetries(n){return m(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield n(r)}catch(r){if(i++>Z4)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return m(this,null,function*(){return AN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return m(this,null,function*(){this.receiver=$4._getInstance(G4()),this.receiver._subscribe("keyChanged",(n,i)=>m(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(n,i)=>m(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return m(this,null,function*(){var n,i;if(this.activeServiceWorker=yield z4(),!this.activeServiceWorker)return;this.sender=new NE(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((n=r[0])===null||n===void 0)&&n.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return m(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||q4()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return m(this,null,function*(){try{if(!indexedDB)return!1;let n=yield PE();return yield XM(n,Ep,"1"),yield JM(n,Ep),!0}catch{}return!1})}_withPendingWrite(n){return m(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,i){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(r=>XM(r,n,i)),this.localCache[n]=i,this.notifyServiceWorker(n)}))})}_get(n){return m(this,null,function*(){let i=yield this._withRetries(r=>Q4(r,n));return this.localCache[n]=i,i})}_remove(n){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(i=>JM(i,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return m(this,null,function*(){let n=yield this._withRetries(s=>{let o=Sp(s,!1).getAll();return new Us(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(n,i){this.localCache[n]=i;let r=this.listeners[n];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>m(this,null,function*(){return this._poll()}),Y4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),MN=X4;var nae=EN("rcb"),iae=new Bs(3e4,6e4);function NN(t,e){return e?Ki(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var $l=class extends Ra{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Aa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Aa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Aa(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function J4(t){return CN(t.auth,new $l(t),t.bypassAuthState)}function e3(t){let{auth:e,user:n}=t;return X(n,e,"internal-error"),k4(n,new $l(t),t.bypassAuthState)}function t3(t){return m(this,null,function*(){let{auth:e,user:n}=t;return X(n,e,"internal-error"),O4(n,new $l(t),t.bypassAuthState)})}var Dp=class{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return J4;case"linkViaPopup":case"linkViaRedirect":return t3;case"reauthViaPopup":case"reauthViaRedirect":return e3;default:In(this.auth,"internal-error")}}resolve(e){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var n3=new Bs(2e3,1e4);function nI(t,e,n){return m(this,null,function*(){let i=Fr(t);ZW(t,e,Ul);let r=NN(i,n);return new i3(i,"signInViaPopup",e,r).executeNotNull()})}var i3=(()=>{class t extends Dp{constructor(n,i,r,s,o){super(n,i,s,o),this.provider=r,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return m(this,null,function*(){let n=yield this.execute();return X(n,this.auth,"internal-error"),n})}onExecution(){return m(this,null,function*(){Qi(this.filter.length===1,"Popup operations only handle one event");let n=tI();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(Ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,n3.get())};n()}}t.currentPopupAction=null;return t})(),r3="pendingRedirect",lp=new Map,OE=class t extends Dp{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}execute(){return m(this,null,function*(){let e=lp.get(this.auth._key());if(!e){try{let i=(yield s3(this.resolver,this.auth))?yield Kn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}lp.set(this.auth._key(),e)}return this.bypassAuthState||lp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return m(this,null,function*(){if(e.type==="signInViaRedirect")return Kn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Kn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return m(this,null,function*(){})}cleanUp(){}};function s3(t,e){return m(this,null,function*(){let n=c3(e),i=a3(t);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(n))==="true";return yield i._remove(n),r})}function o3(t,e){lp.set(t._key(),e)}function a3(t){return Ki(t._redirectPersistence)}function c3(t){return cp(r3,t.config.apiKey,t.name)}function l3(t,e,n=!1){return m(this,null,function*(){let i=Fr(t),r=NN(i,e),o=yield new OE(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var u3=10*60*1e3,kE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!d3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!PN(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ii(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=u3&&this.cachedEventUids.clear(),this.cachedEventUids.has(eN(e))}saveEventToCache(e){this.cachedEventUids.add(eN(e)),this.lastProcessedEventTime=Date.now()}};function eN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function PN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function d3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PN(t);default:return!1}}function h3(n){return m(this,arguments,function*(t,e={}){return kr(t,"GET","/v1/projects",e)})}var f3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,p3=/^https?/;function m3(t){return m(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield h3(t);for(let n of e)try{if(g3(n))return}catch{}In(t,"unauthorized-domain")})}function g3(t){let e=EE(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!p3.test(n))return!1;if(f3.test(t))return i===t;let r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var y3=new Bs(3e4,6e4);function tN(){let t=bi().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _3(t){return new Promise((e,n)=>{var i,r,s;function o(){tN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tN(),n(Ii(t,"network-request-failed"))},timeout:y3.get()})}if(!((r=(i=bi().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=bi().gapi)===null||s===void 0)&&s.load)o();else{let a=EN("iframefcb");return bi()[a]=()=>{gapi.load?o():n(Ii(t,"network-request-failed"))},wN(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw up=null,e})}var up=null;function v3(t){return up=up||_3(t),up}var w3=new Bs(5e3,15e3),E3="__/auth/iframe",I3="emulator/auth/iframe",b3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},D3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function C3(t){let e=t.config;X(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?jE(e,I3):`https://${t.config.authDomain}/${E3}`,i={apiKey:e.apiKey,appName:t.name,v:Nr},r=D3.get(t.config.apiHost);r&&(i.eid=r);let s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Ea(i).slice(1)}`}function T3(t){return m(this,null,function*(){let e=yield v3(t),n=bi().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:C3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:b3,dontclear:!0},i=>new Promise((r,s)=>m(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=Ii(t,"network-request-failed"),a=bi().setTimeout(()=>{s(o)},w3.get());function c(){bi().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})})))})}var S3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},A3=500,R3=600,x3="_blank",M3="http://localhost",Cp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function N3(t,e,n,i=A3,r=R3){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",c=Object.assign(Object.assign({},S3),{width:i.toString(),height:r.toString(),top:s,left:o}),l=ze().toLowerCase();n&&(a=fN(l)?x3:n),hN(l)&&(e=e||M3,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(p4(l)&&a!=="_self")return P3(e||"",a),new Cp(null);let d=window.open(e||"",a,u);X(d,t,"popup-blocked");try{d.focus()}catch{}return new Cp(d)}function P3(t,e){let n=document.createElement("a");n.href=t,n.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}var O3="__/auth/handler",k3="emulator/auth/handler",F3=encodeURIComponent("fac");function nN(t,e,n,i,r,s){return m(this,null,function*(){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Nr,eventId:r};if(e instanceof Ul){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",xM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof wp){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield t._getAppCheckToken(),l=c?`#${F3}=${encodeURIComponent(c)}`:"";return`${L3(t)}?${Ea(a).slice(1)}${l}`})}function L3({config:t}){return t.emulator?jE(t,k3):`https://${t.authDomain}/${O3}`}var wE="webStorageSupport",FE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eI,this._completeRedirectFn=l3,this._overrideRedirectResult=o3}_openPopup(e,n,i,r){return m(this,null,function*(){var s;Qi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield nN(e,n,i,EE(),r);return N3(e,o,tI())})}_openRedirect(e,n,i,r){return m(this,null,function*(){yield this._originValidation(e);let s=yield nN(e,n,i,EE(),r);return H4(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Qi(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}initAndGetManager(e){return m(this,null,function*(){let n=yield T3(e),i=new kE(e);return n.register("authEvent",r=>(X(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wE,{type:wE},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[wE];o!==void 0&&n(!!o),In(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=m3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _N()||HE()||Tp()}},ON=FE;var iN="@firebase/auth",rN="1.5.1";var LE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function V3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function j3(t){Mr(new En("auth",(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vN(t)},l=new AE(i,r,s,c);return b4(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Mr(new En("auth-internal",e=>{let n=Fr(e.getProvider("auth").getImmediate());return(i=>new LE(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rt(iN,rN,V3(t)),rt(iN,rN,"esm2017")}var B3=5*60,U3=eE("authIdTokenMaxAge")||B3,sN=null,$3=t=>e=>m(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>U3)return;let r=n?.token;sN!==r&&(sN=r,yield fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function iI(t=Da()){let e=kl(t,"auth");if(e.isInitialized())return e.getImmediate();let n=zE(t,{popupRedirectResolver:ON,persistence:[MN,SN,eI]}),i=eE("authTokenSyncURL");if(i){let s=$3(i);ZE(n,s,()=>s(n.currentUser)),YE(n,o=>s(o))}let r=DM("auth");return r&&qE(n,`http://${r}`),n}j3("Browser");var kN="auth",$s=class{constructor(e){return e}},zl=class{constructor(){return Fl(kN)}};var rI=new x("angularfire2.auth-instances");function x9(t,e){let n=rp(kN,t,e);return n&&new $s(n)}function M9(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new $s(i)}}var N9={provide:zl,deps:[[new yt,rI]]},P9={provide:$s,useFactory:x9,deps:[[new yt,rI],Gi]},O9=(()=>{class t{constructor(){rt("angularfire",Vs.full,"auth")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=re({type:t});static \u0275inj=ie({providers:[P9,N9]})}return t})();function Vae(t,...e){return{ngModule:O9,providers:[{provide:rI,useFactory:M9(t),multi:!0,deps:[L,Me,Sa,js,[new yt,Ta],...e]}]}}var FN=Ce(KE,!0);var sI=Ce(iI,!0);var LN=Ce(XE,!0);var VN=Ce(QE,!0);var jN=Ce(nI,!0);var BN=Ce(JE,!0);var Uae=(()=>{let e=class e{constructor(i,r,s){this.auth=i,this.ngZone=r,this.router=s,LN(this.auth,o=>{o&&(this.UserData=o)})}get userUid(){return sI().currentUser?.uid||""}getAuthFire(){return this.auth.currentUser}Register(i,r){return FN(this.auth,i,r).then(s=>{this.UserData=s.user,this.ngZone.run(()=>{this.sendEmailVerification(),this.router.navigate(["/signIn"])})}).catch(s=>{window.alert(s.message)})}sendEmailVerification(){throw new Error("Method not implemented.")}Login(i,r){return VN(this.auth,i,r).then(s=>{this.UserData=s.user,this.ngZone.run(()=>{this.router.navigate(["/"])})}).catch(s=>{window.alert(s.message)})}googleSignIn(){return this.loginWithPopup(new GE)}loginWithPopup(i){return jN(this.auth,i).then(r=>(console.log("logged in",r),r)).catch(r=>{console.log(r)})}logout(){BN(this.auth).then(()=>this.router.navigate(["/signIn"]))}isSignedIn(){return sI().currentUser!==null}};e.\u0275fac=function(r){return new(r||e)(y($s),y(L),y(Bn))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var F9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$n={},M,SI=SI||{},ne=F9||self;function Up(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ru(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function L9(t){return Object.prototype.hasOwnProperty.call(t,oI)&&t[oI]||(t[oI]=++V9)}var oI="closure_uid_"+(1e9*Math.random()>>>0),V9=0;function j9(t,e,n){return t.call.apply(t.bind,arguments)}function B9(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function St(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?St=j9:St=B9,St.apply(null,arguments)}function Ap(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function ht(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Lr(){this.s=this.s,this.o=this.o}var U9=0;Lr.prototype.s=!1;Lr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),U9!=0)&&L9(this)};Lr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var JN=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function AI(t){let e=t.length;if(0<e){let n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function UN(t,e){for(let n=1;n<arguments.length;n++){let i=arguments[n];if(Up(i)){let r=t.length||0,s=i.length||0;t.length=r+s;for(let o=0;o<s;o++)t[r+o]=i[o]}else t.push(i)}}function At(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var $9=function(){if(!ne.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};ne.addEventListener("test",n,e),ne.removeEventListener("test",n,e)}catch{}return t}();function Yl(t){return/^[\s\xa0]*$/.test(t)}function $p(){var t=ne.navigator;return t&&(t=t.userAgent)?t:""}function Di(t){return $p().indexOf(t)!=-1}function RI(t){return RI[" "](t),t}RI[" "]=function(){};function H9(t,e){var n=M6;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var z9=Di("Opera"),Oa=Di("Trident")||Di("MSIE"),eP=Di("Edge"),dI=eP||Oa,tP=Di("Gecko")&&!($p().toLowerCase().indexOf("webkit")!=-1&&!Di("Edge"))&&!(Di("Trident")||Di("MSIE"))&&!Di("Edge"),q9=$p().toLowerCase().indexOf("webkit")!=-1&&!Di("Edge");function nP(){var t=ne.document;return t?t.documentMode:void 0}var hI;e:{if(Rp="",xp=function(){var t=$p();if(tP)return/rv:([^\);]+)(\)|;)/.exec(t);if(eP)return/Edge\/([\d\.]+)/.exec(t);if(Oa)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(q9)return/WebKit\/(\S+)/.exec(t);if(z9)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),xp&&(Rp=xp?xp[1]:""),Oa&&(Mp=nP(),Mp!=null&&Mp>parseFloat(Rp))){hI=String(Mp);break e}hI=Rp}var Rp,xp,Mp,fI;ne.document&&Oa?(aI=nP(),fI=aI||parseInt(hI,10)||void 0):fI=void 0;var aI,G9=fI;function Zl(t,e){if(At.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(tP){e:{try{RI(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:W9[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Zl.$.h.call(this)}}ht(Zl,At);var W9={2:"touch",3:"pen",4:"mouse"};Zl.prototype.h=function(){Zl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var su="closure_listenable_"+(1e6*Math.random()|0),K9=0;function Q9(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++K9,this.fa=this.ia=!1}function Hp(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function xI(t,e,n){for(let i in t)e.call(n,t[i],i,t)}function Y9(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function iP(t){let e={};for(let n in t)e[n]=t[n];return e}var $N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rP(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<$N.length;s++)n=$N[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function zp(t){this.src=t,this.g={},this.h=0}zp.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=mI(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Q9(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};function pI(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=JN(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Hp(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function mI(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}var MI="closure_lm_"+(1e6*Math.random()|0),cI={};function sP(t,e,n,i,r){if(i&&i.once)return aP(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)sP(t,e[s],n,i,r);return null}return n=OI(n),t&&t[su]?t.O(e,n,ru(i)?!!i.capture:!!i,r):oP(t,e,n,!1,i,r)}function oP(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=ru(r)?!!r.capture:!!r,a=PI(t);if(a||(t[MI]=a=new zp(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=Z9(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)$9||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(lP(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Z9(){function t(n){return e.call(t.src,t.listener,n)}let e=X9;return t}function aP(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)aP(t,e[s],n,i,r);return null}return n=OI(n),t&&t[su]?t.P(e,n,ru(i)?!!i.capture:!!i,r):oP(t,e,n,!0,i,r)}function cP(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)cP(t,e[s],n,i,r);else i=ru(i)?!!i.capture:!!i,n=OI(n),t&&t[su]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=mI(s,n,i,r),-1<n&&(Hp(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=PI(t))&&(e=t.g[e.toString()],t=-1,e&&(t=mI(e,n,i,r)),(n=-1<t?e[t]:null)&&NI(n))}function NI(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[su])pI(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(lP(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=PI(e))?(pI(n,t),n.h==0&&(n.src=null,e[MI]=null)):Hp(t)}}}function lP(t){return t in cI?cI[t]:cI[t]="on"+t}function X9(t,e){if(t.fa)t=!0;else{e=new Zl(e,this);var n=t.listener,i=t.la||t.src;t.ia&&NI(t),t=n.call(i,e)}return t}function PI(t){return t=t[MI],t instanceof zp?t:null}var lI="__closure_events_fn_"+(1e9*Math.random()>>>0);function OI(t){return typeof t=="function"?t:(t[lI]||(t[lI]=function(e){return t.handleEvent(e)}),t[lI])}function dt(){Lr.call(this),this.i=new zp(this),this.S=this,this.J=null}ht(dt,Lr);dt.prototype[su]=!0;dt.prototype.removeEventListener=function(t,e,n,i){cP(this,t,e,n,i)};function vt(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new At(e,t);else if(e instanceof At)e.target=e.target||t;else{var r=e;e=new At(i,t),rP(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=Np(o,i,!0,e)&&r}if(o=e.g=t,r=Np(o,i,!0,e)&&r,r=Np(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=Np(o,i,!1,e)&&r}dt.prototype.N=function(){if(dt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Hp(n[i]);delete t.g[e],t.h--}}this.J=null};dt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};dt.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function Np(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&pI(t.i,o),r=a.call(c,i)!==!1&&r}}return r&&!i.defaultPrevented}var kI=ne.JSON.stringify,gI=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function J9(){var t=FI;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var yI=class{constructor(){this.h=this.g=null}add(e,n){let i=uP.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}},uP=new gI(()=>new _I,t=>t.reset()),_I=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function e6(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function t6(t){ne.setTimeout(()=>{throw t},0)}var Xl,Jl=!1,FI=new yI,dP=()=>{let t=ne.Promise.resolve(void 0);Xl=()=>{t.then(n6)}},n6=()=>{for(var t;t=J9();){try{t.h.call(t.g)}catch(n){t6(n)}var e=uP;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Jl=!1};function qp(t,e){dt.call(this),this.h=t||1,this.g=e||ne,this.j=St(this.qb,this),this.l=Date.now()}ht(qp,dt);M=qp.prototype;M.ga=!1;M.T=null;M.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),vt(this,"tick"),this.ga&&(LI(this),this.start()))}};M.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function LI(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}M.N=function(){qp.$.N.call(this),LI(this),delete this.g};function VI(t,e,n){if(typeof t=="function")n&&(t=St(t,n));else if(t&&typeof t.handleEvent=="function")t=St(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ne.setTimeout(t,e||0)}function hP(t){t.g=VI(()=>{t.g=null,t.i&&(t.i=!1,hP(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var vI=class extends Lr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:hP(this)}N(){super.N(),this.g&&(ne.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function eu(t){Lr.call(this),this.h=t,this.g={}}ht(eu,Lr);var HN=[];function fP(t,e,n,i){Array.isArray(n)||(n&&(HN[0]=n.toString()),n=HN);for(var r=0;r<n.length;r++){var s=sP(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function pP(t){xI(t.g,function(e,n){this.g.hasOwnProperty(n)&&NI(e)},t),t.g={}}eu.prototype.N=function(){eu.$.N.call(this),pP(this)};eu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Gp(){this.g=!0}Gp.prototype.Ea=function(){this.g=!1};function i6(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function r6(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+o})}function Na(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+o6(t,n)+(i?" "+i:"")})}function s6(t,e){t.info(function(){return"TIMEOUT: "+e})}Gp.prototype.info=function(){};function o6(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return kI(n)}catch{return e}}var Gs={},zN=null;function Wp(){return zN=zN||new dt}Gs.Ta="serverreachability";function mP(t){At.call(this,Gs.Ta,t)}ht(mP,At);function tu(t){let e=Wp();vt(e,new mP(e))}Gs.STAT_EVENT="statevent";function gP(t,e){At.call(this,Gs.STAT_EVENT,t),this.stat=e}ht(gP,At);function Vt(t){let e=Wp();vt(e,new gP(e,t))}Gs.Ua="timingevent";function yP(t,e){At.call(this,Gs.Ua,t),this.size=e}ht(yP,At);function ou(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ne.setTimeout(function(){t()},e)}var Kp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},_P={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function jI(){}jI.prototype.h=null;function qN(t){return t.h||(t.h=t.i())}function vP(){}var au={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function BI(){At.call(this,"d")}ht(BI,At);function UI(){At.call(this,"c")}ht(UI,At);var wI;function Qp(){}ht(Qp,jI);Qp.prototype.g=function(){return new XMLHttpRequest};Qp.prototype.i=function(){return{}};wI=new Qp;function cu(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new eu(this),this.P=a6,t=dI?125:void 0,this.V=new qp(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new wP}function wP(){this.i=null,this.g="",this.h=!1}var a6=45e3,EP={},EI={};M=cu.prototype;M.setTimeout=function(t){this.P=t};function II(t,e,n){t.L=1,t.A=Zp(Zi(e)),t.u=n,t.S=!0,IP(t,null)}function IP(t,e){t.G=Date.now(),lu(t),t.B=Zi(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),xP(n.i,"t",i),t.o=0,n=t.l.J,t.h=new wP,t.g=ZP(t.l,n?e:null,!t.u),0<t.O&&(t.M=new vI(St(t.Pa,t,t.g),t.O)),fP(t.U,t.g,"readystatechange",t.nb),e=t.I?iP(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),tu(),i6(t.j,t.v,t.B,t.m,t.W,t.u)}M.nb=function(t){t=t.target;let e=this.M;e&&Ci(t)==3?e.l():this.Pa(t)};M.Pa=function(t){try{if(t==this.g)e:{let u=Ci(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||dI||this.g&&(this.h.h||this.g.ja()||QN(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?tu(3):tu(2)),Yp(this);var n=this.g.da();this.ca=n;t:if(bP(this)){var i=QN(this.g);t="";var r=i.length,s=Ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hs(this),Ql(this);var o="";break t}this.h.i=new ne.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,r6(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yl(a)){var l=a;break t}}l=null}if(n=l)Na(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bI(this,n);else{this.i=!1,this.s=3,Vt(12),Hs(this),Ql(this);break e}}this.S?(DP(this,u,o),dI&&this.i&&u==3&&(fP(this.U,this.V,"tick",this.mb),this.V.start())):(Na(this.j,this.m,o,null),bI(this,o)),u==4&&Hs(this),this.i&&!this.J&&(u==4?WP(this.l,this):(this.i=!1,lu(this)))}else A6(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),Hs(this),Ql(this)}}}catch{}finally{}};function bP(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function DP(t,e,n){let i=!0,r;for(;!t.J&&t.o<n.length;)if(r=c6(t,n),r==EI){e==4&&(t.s=4,Vt(14),i=!1),Na(t.j,t.m,null,"[Incomplete Response]");break}else if(r==EP){t.s=4,Vt(15),Na(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Na(t.j,t.m,r,null),bI(t,r);bP(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Vt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),WI(e),e.M=!0,Vt(11))):(Na(t.j,t.m,n,"[Invalid Chunked Response]"),Hs(t),Ql(t))}M.mb=function(){if(this.g){var t=Ci(this.g),e=this.g.ja();this.o<e.length&&(Yp(this),DP(this,t,e),this.i&&t!=4&&lu(this))}};function c6(t,e){var n=t.o,i=e.indexOf(`
`,n);return i==-1?EI:(n=Number(e.substring(n,i)),isNaN(n)?EP:(i+=1,i+n>e.length?EI:(e=e.slice(i,i+n),t.o=i+n,e)))}M.cancel=function(){this.J=!0,Hs(this)};function lu(t){t.Y=Date.now()+t.P,CP(t,t.P)}function CP(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=ou(St(t.lb,t),e)}function Yp(t){t.C&&(ne.clearTimeout(t.C),t.C=null)}M.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(s6(this.j,this.B),this.L!=2&&(tu(),Vt(17)),Hs(this),this.s=2,Ql(this)):CP(this,this.Y-t)};function Ql(t){t.l.H==0||t.J||WP(t.l,t)}function Hs(t){Yp(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,LI(t.V),pP(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function bI(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||DI(n.i,t))){if(!t.K&&DI(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Lp(n),em(n);else break e;GI(n),Vt(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=ou(St(n.ib,n),6e3));if(1>=PP(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else zs(n,11)}else if((t.K||n.g==t)&&Lp(n),!Yl(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(i=1.5*h,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;let f=t.g;if(f){let p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=i.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&($I(s,s.h),s.h=null))}if(i.F){let g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(i.Da=g,Le(i.I,i.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=YP(i,i.J?i.pa:null,i.Y),o.K){OP(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.C&&(Yp(a),lu(a)),i.g=o}else qP(i);0<n.j.length&&tm(n)}else l[0]!="stop"&&l[0]!="close"||zs(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?zs(n,7):qI(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}tu(4)}catch{}}function l6(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Up(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function u6(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Up(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let i in t)e[n++]=i;return e}}}function TP(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Up(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=u6(t),i=l6(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}var SP=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function d6(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function qs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof qs){this.h=t.h,kp(this,t.j),this.s=t.s,this.g=t.g,Fp(this,t.m),this.l=t.l;var e=t.i,n=new nu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),GN(this,n),this.o=t.o}else t&&(e=String(t).match(SP))?(this.h=!1,kp(this,e[1]||"",!0),this.s=Wl(e[2]||""),this.g=Wl(e[3]||"",!0),Fp(this,e[4]),this.l=Wl(e[5]||"",!0),GN(this,e[6]||"",!0),this.o=Wl(e[7]||"")):(this.h=!1,this.i=new nu(null,this.h))}qs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Kl(e,WN,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Kl(e,WN,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Kl(n,n.charAt(0)=="/"?p6:f6,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Kl(n,g6)),t.join("")};function Zi(t){return new qs(t)}function kp(t,e,n){t.j=n?Wl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Fp(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function GN(t,e,n){e instanceof nu?(t.i=e,y6(t.i,t.h)):(n||(e=Kl(e,m6)),t.i=new nu(e,t.h))}function Le(t,e,n){t.i.set(e,n)}function Zp(t){return Le(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Wl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Kl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,h6),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function h6(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var WN=/[#\/\?@]/g,f6=/[#\?:]/g,p6=/[#\?]/g,m6=/[#\?@]/g,g6=/#/g;function nu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Vr(t){t.g||(t.g=new Map,t.h=0,t.i&&d6(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}M=nu.prototype;M.add=function(t,e){Vr(this),this.i=null,t=ka(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function AP(t,e){Vr(t),e=ka(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function RP(t,e){return Vr(t),e=ka(t,e),t.g.has(e)}M.forEach=function(t,e){Vr(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};M.ta=function(){Vr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){let r=t[i];for(let s=0;s<r.length;s++)n.push(e[i])}return n};M.Z=function(t){Vr(this);let e=[];if(typeof t=="string")RP(this,t)&&(e=e.concat(this.g.get(ka(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};M.set=function(t,e){return Vr(this),this.i=null,t=ka(this,t),RP(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};M.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function xP(t,e,n){AP(t,e),0<n.length&&(t.i=null,t.g.set(ka(t,e),AI(n)),t.h+=n.length)}M.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];let s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};function ka(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function y6(t,e){e&&!t.j&&(Vr(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(AP(this,i),xP(this,r,n))},t)),t.j=e}var _6=class{constructor(t,e){this.g=t,this.map=e}};function MP(t){this.l=t||v6,ne.PerformanceNavigationTiming?(t=ne.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ne.g&&ne.g.Ka&&ne.g.Ka()&&ne.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var v6=10;function NP(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function PP(t){return t.h?1:t.g?t.g.size:0}function DI(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function $I(t,e){t.g?t.g.add(e):t.h=e}function OP(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}MP.prototype.cancel=function(){if(this.i=kP(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function kP(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return AI(t.i)}var w6=class{stringify(t){return ne.JSON.stringify(t,void 0)}parse(t){return ne.JSON.parse(t,void 0)}};function E6(){this.g=new w6}function I6(t,e,n){let i=n||"";try{TP(t,function(r,s){let o=r;ru(r)&&(o=kI(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function b6(t,e){let n=new Gp;if(ne.Image){let i=new Image;i.onload=Ap(Pp,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Ap(Pp,n,i,"TestLoadImage: error",!1,e),i.onabort=Ap(Pp,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Ap(Pp,n,i,"TestLoadImage: timeout",!1,e),ne.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function Pp(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function uu(t){this.l=t.ec||null,this.j=t.ob||!1}ht(uu,jI);uu.prototype.g=function(){return new Xp(this.l,this.j)};uu.prototype.i=function(t){return function(){return t}}({});function Xp(t,e){dt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=HI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ht(Xp,dt);var HI=0;M=Xp.prototype;M.open=function(t,e){if(this.readyState!=HI)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,iu(this)};M.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ne).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};M.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,du(this)),this.readyState=HI};M.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,iu(this)),this.g&&(this.readyState=3,iu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ne.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;FP(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function FP(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}M.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?du(this):iu(this),this.readyState==3&&FP(this)}};M.Za=function(t){this.g&&(this.response=this.responseText=t,du(this))};M.Ya=function(t){this.g&&(this.response=t,du(this))};M.ka=function(){this.g&&du(this)};function du(t){t.readyState=4,t.l=null,t.j=null,t.A=null,iu(t)}M.setRequestHeader=function(t,e){this.v.append(t,e)};M.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};M.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function iu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Xp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var D6=ne.JSON.parse;function qe(t){dt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=LP,this.L=this.M=!1}ht(qe,dt);var LP="",C6=/^https?$/i,T6=["POST","PUT"];M=qe.prototype;M.Oa=function(t){this.M=t};M.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():wI.g(),this.C=this.u?qN(this.u):qN(wI),this.g.onreadystatechange=St(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){KN(this,s);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(let s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=ne.FormData&&t instanceof ne.FormData,!(0<=JN(T6,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{BP(this),0<this.B&&((this.L=S6(this.g))?(this.g.timeout=this.B,this.g.ontimeout=St(this.ua,this)):this.A=VI(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){KN(this,s)}};function S6(t){return Oa&&typeof t.timeout=="number"&&t.ontimeout!==void 0}M.ua=function(){typeof SI<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vt(this,"timeout"),this.abort(8))};function KN(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,VP(t),Jp(t)}function VP(t){t.F||(t.F=!0,vt(t,"complete"),vt(t,"error"))}M.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,vt(this,"complete"),vt(this,"abort"),Jp(this))};M.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jp(this,!0)),qe.$.N.call(this)};M.La=function(){this.s||(this.G||this.v||this.l?jP(this):this.kb())};M.kb=function(){jP(this)};function jP(t){if(t.h&&typeof SI<"u"&&(!t.C[1]||Ci(t)!=4||t.da()!=2)){if(t.v&&Ci(t)==4)VI(t.La,0,t);else if(vt(t,"readystatechange"),Ci(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=o===0){var r=String(t.I).match(SP)[1]||null;!r&&ne.self&&ne.self.location&&(r=ne.self.location.protocol.slice(0,-1)),i=!C6.test(r?r.toLowerCase():"")}n=i}if(n)vt(t,"complete"),vt(t,"success");else{t.m=6;try{var s=2<Ci(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",VP(t)}}finally{Jp(t)}}}}function Jp(t,e){if(t.g){BP(t);let n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||vt(t,"ready");try{n.onreadystatechange=i}catch{}}}function BP(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ne.clearTimeout(t.A),t.A=null)}M.isActive=function(){return!!this.g};function Ci(t){return t.g?t.g.readyState:0}M.da=function(){try{return 2<Ci(this)?this.g.status:-1}catch{return-1}};M.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};M.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),D6(e)}};function QN(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case LP:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function A6(t){let e={};t=(t.g&&2<=Ci(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(Yl(t[i]))continue;var n=e6(t[i]);let r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[r]||[];e[r]=s,s.push(n)}Y9(e,function(i){return i.join(", ")})}M.Ia=function(){return this.m};M.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function UP(t){let e="";return xI(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function zI(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=UP(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Le(t,e,n))}function ql(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function $P(t){this.Ga=0,this.j=[],this.l=new Gp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ql("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ql("baseRetryDelayMs",5e3,t),this.hb=ql("retryDelaySeedMs",1e4,t),this.eb=ql("forwardChannelMaxRetries",2,t),this.xa=ql("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new MP(t&&t.concurrentRequestLimit),this.Ja=new E6,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}M=$P.prototype;M.ra=8;M.H=1;function qI(t){if(HP(t),t.H==3){var e=t.W++,n=Zi(t.I);if(Le(n,"SID",t.K),Le(n,"RID",e),Le(n,"TYPE","terminate"),hu(t,n),e=new cu(t,t.l,e),e.L=2,e.A=Zp(Zi(n)),n=!1,ne.navigator&&ne.navigator.sendBeacon)try{n=ne.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&ne.Image&&(new Image().src=e.A,n=!0),n||(e.g=ZP(e.l,null),e.g.ha(e.A)),e.G=Date.now(),lu(e)}QP(t)}function em(t){t.g&&(WI(t),t.g.cancel(),t.g=null)}function HP(t){em(t),t.u&&(ne.clearTimeout(t.u),t.u=null),Lp(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ne.clearTimeout(t.m),t.m=null)}function tm(t){if(!NP(t.i)&&!t.m){t.m=!0;var e=t.Na;Xl||dP(),Jl||(Xl(),Jl=!0),FI.add(e,t),t.C=0}}function R6(t,e){return PP(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ou(St(t.Na,t,e),KP(t,t.C)),t.C++,!0)}M.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let r=new cu(this,this.l,t),s=this.s;if(this.U&&(s?(s=iP(s),rP(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=zP(this,r,e),n=Zi(this.I),Le(n,"RID",t),Le(n,"CVER",22),this.F&&Le(n,"X-HTTP-Session-Id",this.F),hu(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(UP(s)))+"&"+e:this.o&&zI(n,this.o,s)),$I(this.i,r),this.bb&&Le(n,"TYPE","init"),this.P?(Le(n,"$req",e),Le(n,"SID","null"),r.aa=!0,II(r,n,null)):II(r,n,e),this.H=2}}else this.H==3&&(t?YN(this,t):this.j.length==0||NP(this.i)||YN(this))};function YN(t,e){var n;e?n=e.m:n=t.W++;let i=Zi(t.I);Le(i,"SID",t.K),Le(i,"RID",n),Le(i,"AID",t.V),hu(t,i),t.o&&t.s&&zI(i,t.o,t.s),n=new cu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=zP(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),$I(t.i,n),II(n,i,e)}function hu(t,e){t.na&&xI(t.na,function(n,i){Le(e,i,n)}),t.h&&TP({},function(n,i){Le(e,i,n)})}function zP(t,e,n){n=Math.min(t.j.length,n);var i=t.h?St(t.h.Va,t.h,t):null;e:{var r=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let l=r[c].g,u=r[c].map;if(l-=s,0>l)s=Math.max(0,r[c].g-100),a=!1;else try{I6(u,o,"req"+l+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function qP(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Xl||dP(),Jl||(Xl(),Jl=!0),FI.add(e,t),t.A=0}}function GI(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ou(St(t.Ma,t),KP(t,t.A)),t.A++,!0)}M.Ma=function(){if(this.u=null,GP(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ou(St(this.jb,this),t)}};M.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Vt(10),em(this),GP(this))};function WI(t){t.B!=null&&(ne.clearTimeout(t.B),t.B=null)}function GP(t){t.g=new cu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Zi(t.wa);Le(e,"RID","rpc"),Le(e,"SID",t.K),Le(e,"AID",t.V),Le(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Le(e,"TO",t.qa),Le(e,"TYPE","xmlhttp"),hu(t,e),t.o&&t.s&&zI(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Zp(Zi(e)),n.u=null,n.S=!0,IP(n,t)}M.ib=function(){this.v!=null&&(this.v=null,em(this),GI(this),Vt(19))};function Lp(t){t.v!=null&&(ne.clearTimeout(t.v),t.v=null)}function WP(t,e){var n=null;if(t.g==e){Lp(t),WI(t),t.g=null;var i=2}else if(DI(t.i,e))n=e.F,OP(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;i=Wp(),vt(i,new yP(i,n)),tm(t)}else qP(t);else if(r=e.s,r==3||r==0&&0<e.ca||!(i==1&&R6(t,e)||i==2&&GI(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:zs(t,5);break;case 4:zs(t,10);break;case 3:zs(t,6);break;default:zs(t,2)}}}function KP(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function zs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=St(t.pb,t);n||(n=new qs("//www.google.com/images/cleardot.gif"),ne.location&&ne.location.protocol=="http"||kp(n,"https"),Zp(n)),b6(n.toString(),i)}else Vt(2);t.H=0,t.h&&t.h.za(e),QP(t),HP(t)}M.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Vt(2)):(this.l.info("Failed to ping google.com"),Vt(1))};function QP(t){if(t.H=0,t.ma=[],t.h){let e=kP(t.i);(e.length!=0||t.j.length!=0)&&(UN(t.ma,e),UN(t.ma,t.j),t.i.i.length=0,AI(t.j),t.j.length=0),t.h.ya()}}function YP(t,e,n){var i=n instanceof qs?Zi(n):new qs(n);if(i.g!="")e&&(i.g=e+"."+i.g),Fp(i,i.m);else{var r=ne.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new qs(null);i&&kp(s,i),e&&(s.g=e),r&&Fp(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&Le(i,n,e),Le(i,"VER",t.ra),hu(t,i),i}function ZP(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new qe(new uu({ob:n})):new qe(t.va),e.Oa(t.J),e}M.isActive=function(){return!!this.h&&this.h.isActive(this)};function XP(){}M=XP.prototype;M.Ba=function(){};M.Aa=function(){};M.za=function(){};M.ya=function(){};M.isActive=function(){return!0};M.Va=function(){};function Vp(){if(Oa&&!(10<=Number(G9)))throw Error("Environmental error: no available transport.")}Vp.prototype.g=function(t,e){return new nn(t,e)};function nn(t,e){dt.call(this),this.g=new $P(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Yl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yl(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Fa(this)}ht(nn,dt);nn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Vt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=YP(t,null,t.Y),tm(t)};nn.prototype.close=function(){qI(this.g)};nn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=kI(t),t=n);e.j.push(new _6(e.fb++,t)),e.H==3&&tm(e)};nn.prototype.N=function(){this.g.h=null,delete this.j,qI(this.g),delete this.g,nn.$.N.call(this)};function JP(t){BI.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ht(JP,BI);function eO(){UI.call(this),this.status=1}ht(eO,UI);function Fa(t){this.g=t}ht(Fa,XP);Fa.prototype.Ba=function(){vt(this.g,"a")};Fa.prototype.Aa=function(t){vt(this.g,new JP(t))};Fa.prototype.za=function(t){vt(this.g,new eO)};Fa.prototype.ya=function(){vt(this.g,"b")};function x6(){this.blockSize=-1}function Un(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ht(Un,x6);Un.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function uI(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}Un.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=n;)uI(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){uI(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){uI(this,i),r=0;break}}this.h=r,this.i+=e};Un.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function Te(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=t[r]|0;i&&s==e||(n[r]=s,i=!1)}this.g=n}var M6={};function KI(t){return-128<=t&&128>t?H9(t,function(e){return new Te([e|0],0>e?-1:0)}):new Te([t|0],0>t?-1:0)}function Ti(t){if(isNaN(t)||!isFinite(t))return Pa;if(0>t)return _t(Ti(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=CI;return new Te(e,0)}function tO(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return _t(tO(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ti(Math.pow(e,8)),i=Pa,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+s),e);8>s?(s=Ti(Math.pow(e,s)),i=i.R(s).add(Ti(o))):(i=i.R(n),i=i.add(Ti(o)))}return i}var CI=4294967296,Pa=KI(0),TI=KI(1),ZN=KI(16777216);M=Te.prototype;M.ea=function(){if(bn(this))return-_t(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:CI+i)*e,e*=CI}return t};M.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Yi(this))return"0";if(bn(this))return"-"+_t(this).toString(t);for(var e=Ti(Math.pow(t,6)),n=this,i="";;){var r=Bp(n,e).g;n=jp(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Yi(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};M.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Yi(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function bn(t){return t.h==-1}M.X=function(t){return t=jp(this,t),bn(t)?-1:Yi(t)?0:1};function _t(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Te(n,~t.h).add(TI)}M.abs=function(){return bn(this)?_t(this):this};M.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(t.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new Te(n,n[n.length-1]&-2147483648?-1:0)};function jp(t,e){return t.add(_t(e))}M.R=function(t){if(Yi(this)||Yi(t))return Pa;if(bn(this))return bn(t)?_t(this).R(_t(t)):_t(_t(this).R(t));if(bn(t))return _t(this.R(_t(t)));if(0>this.X(ZN)&&0>t.X(ZN))return Ti(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=t.D(r)>>>16,c=t.D(r)&65535;n[2*i+2*r]+=o*c,Op(n,2*i+2*r),n[2*i+2*r+1]+=s*c,Op(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,Op(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,Op(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Te(n,0)};function Op(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Gl(t,e){this.g=t,this.h=e}function Bp(t,e){if(Yi(e))throw Error("division by zero");if(Yi(t))return new Gl(Pa,Pa);if(bn(t))return e=Bp(_t(t),e),new Gl(_t(e.g),_t(e.h));if(bn(e))return e=Bp(t,_t(e)),new Gl(_t(e.g),e.h);if(30<t.g.length){if(bn(t)||bn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=TI,i=e;0>=i.X(t);)n=XN(n),i=XN(i);var r=Ma(n,1),s=Ma(i,1);for(i=Ma(i,2),n=Ma(n,2);!Yi(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=Ma(i,1),n=Ma(n,1)}return e=jp(t,r.R(e)),new Gl(r,e)}for(r=Pa;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=Ti(n),o=s.R(e);bn(o)||0<o.X(t);)n-=i,s=Ti(n),o=s.R(e);Yi(s)&&(s=TI),r=r.add(s),t=jp(t,o)}return new Gl(r,t)}M.gb=function(t){return Bp(this,t).h};M.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Te(n,this.h&t.h)};M.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Te(n,this.h|t.h)};M.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Te(n,this.h^t.h)};function XN(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Te(n,t.h)}function Ma(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Te(r,t.h)}Vp.prototype.createWebChannel=Vp.prototype.g;nn.prototype.send=nn.prototype.u;nn.prototype.open=nn.prototype.m;nn.prototype.close=nn.prototype.close;Kp.NO_ERROR=0;Kp.TIMEOUT=8;Kp.HTTP_ERROR=6;_P.COMPLETE="complete";vP.EventType=au;au.OPEN="a";au.CLOSE="b";au.ERROR="c";au.MESSAGE="d";dt.prototype.listen=dt.prototype.O;qe.prototype.listenOnce=qe.prototype.P;qe.prototype.getLastError=qe.prototype.Sa;qe.prototype.getLastErrorCode=qe.prototype.Ia;qe.prototype.getStatus=qe.prototype.da;qe.prototype.getResponseJson=qe.prototype.Wa;qe.prototype.getResponseText=qe.prototype.ja;qe.prototype.send=qe.prototype.ha;qe.prototype.setWithCredentials=qe.prototype.Oa;Un.prototype.digest=Un.prototype.l;Un.prototype.reset=Un.prototype.reset;Un.prototype.update=Un.prototype.j;Te.prototype.add=Te.prototype.add;Te.prototype.multiply=Te.prototype.R;Te.prototype.modulo=Te.prototype.gb;Te.prototype.compare=Te.prototype.X;Te.prototype.toNumber=Te.prototype.ea;Te.prototype.toString=Te.prototype.toString;Te.prototype.getBits=Te.prototype.D;Te.fromNumber=Ti;Te.fromString=tO;var nO=$n.createWebChannelTransport=function(){return new Vp},iO=$n.getStatEventTarget=function(){return Wp()},nm=$n.ErrorCode=Kp,rO=$n.EventType=_P,sO=$n.Event=Gs,QI=$n.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Hae=$n.FetchXmlHttpFactory=uu,fu=$n.WebChannel=vP,oO=$n.XhrIo=qe,aO=$n.Md5=Un,Ws=$n.Integer=Te;var cO="@firebase/firestore";var ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");var lc="10.7.2";var ro=new Rr("@firebase/firestore");function Ua(){return ro.logLevel}function b(t,...e){if(ro.logLevel<=pe.DEBUG){let n=e.map(QD);ro.debug(`Firestore (${lc}): ${t}`,...n)}}function Ze(t,...e){if(ro.logLevel<=pe.ERROR){let n=e.map(QD);ro.error(`Firestore (${lc}): ${t}`,...n)}}function Tu(t,...e){if(ro.logLevel<=pe.WARN){let n=e.map(QD);ro.warn(`Firestore (${lc}): ${t}`,...n)}}function QD(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function k(t="Unexpected state"){let e=`FIRESTORE (${lc}) INTERNAL ASSERTION FAILED: `+t;throw Ze(e),new Error(e)}function B(t,e){t||k()}function V(t,e){return t}var w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},R=class extends tn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Cn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var nb=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ib=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ft.UNAUTHENTICATED))}shutdown(){}};var rb=class{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve(),s=new Cn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Cn,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>m(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{b("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(b("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Cn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(b("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(B(typeof i.accessToken=="string"),new nb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return B(e===null||typeof e=="string"),new ft(e)}},sb=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ob=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new sb(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ab=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},cb=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=s=>{s.error!=null&&b("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,b("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{b("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):b("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(B(typeof n.token=="string"),this.R=n.token,new ab(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function N6(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var hm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=N6(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}};function se(t,e){return t<e?-1:t>e?1:0}function Ya(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function ck(t){return t+"\0"}var Xe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new R(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new R(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new R(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new R(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var z=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Xe(0,0))}static max(){return new t(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var fm=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&k(),i===void 0?i=e.length-n:i>e.length-n&&k(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Re=class t extends fm{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new R(w.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},P6=/^[_a-zA-Z][_a-zA-Z0-9]*$/,st=class t extends fm{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return P6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,s=()=>{if(i.length===0)throw new R(w.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new R(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new R(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new R(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var P=class t{constructor(e){this.path=e}static fromPath(e){return new t(Re.fromString(e))}static fromName(e){return new t(Re.fromString(e).popFirst(5))}static empty(){return new t(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Re(e.slice()))}};var Za=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function lb(t){return t.fields.find(e=>e.kind===2)}function Qs(t){return t.fields.filter(e=>e.kind!==2)}Za.UNKNOWN_ID=-1;var Wa=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Su=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Tn.min())}};function lk(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=z.fromTimestamp(i===1e9?new Xe(n+1,0):new Xe(n,i));return new Tn(r,P.empty(),e)}function uk(t){return new Tn(t.readTime,t.key,-1)}var Tn=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(z.min(),P.empty(),-1)}static max(){return new t(z.max(),P.empty(),-1)}};function YD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=P.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}var dk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Jr(t){return m(this,null,function*(){if(t.code!==w.FAILED_PRECONDITION||t.message!==dk)throw t;b("LocalStore","Unexpectedly lost primary lease")})}var _=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&k(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},c=>i(c))}),o=!0,s===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(u=>{o[l]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,n){return new t((i,r)=>{let s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}};var mm=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Cn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new no(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=ZD(i.target.error);this.V.reject(new no(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(s){throw new no(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(b("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new db(n)}},so=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(ze())===12.2&&Ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return b("SimpleDb","Removing database:",e),Ys(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Jf())return!1;if(t.C())return!0;let e=ze(),n=t.S(e),i=0<n&&n<10,r=t.v(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){let n=e.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}O(e){return m(this,null,function*(){return this.db||(b("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{let o=s.target.result;n(o)},r.onblocked=()=>{i(new no(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{let o=s.target.error;o.name==="VersionError"?i(new R(w.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new R(w.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new no(e,o))},r.onupgradeneeded=s=>{b("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,r.transaction,s.oldVersion,this.version).next(()=>{b("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return m(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=mm.open(this.db,e,s?"readonly":"readwrite",i),c=r(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),_.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(b("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},ub=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ys(this.k.delete())}},no=class extends R{constructor(e,n){super(w.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function es(t){return t.name==="IndexedDbTransactionError"}var db=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(b("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(b("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Ys(i)}add(e){return b("SimpleDb","ADD",this.store.name,e,e),Ys(this.store.add(e))}get(e){return Ys(this.store.get(e)).next(n=>(n===void 0&&(n=null),b("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return b("SimpleDb","DELETE",this.store.name,e),Ys(this.store.delete(e))}count(){return b("SimpleDb","COUNT",this.store.name),Ys(this.store.count())}W(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let s=r.getAll(i.range);return new _((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(i),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new _((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}H(e,n){b("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.J=!1;let r=this.cursor(i);return this.G(r,(s,o,a)=>a.delete())}Y(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.G(r,n)}Z(e){let n=this.cursor({});return new _((i,r)=>{n.onerror=s=>{let o=ZD(s.target.error);r(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}G(e,n){let i=[];return new _((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void r();let c=new ub(a),l=n(a.primaryKey,a.value,c);if(l instanceof _){let u=l.catch(d=>(c.done(),_.reject(d)));i.push(u)}c.isDone?r():c.$===null?a.continue():a.continue(c.$)}}).next(()=>_.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Ys(t){return new _((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=ZD(i.target.error);n(r)}})}var lO=!1;function ZD(t){let e=so.S(ze());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new R("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lO||(lO=!0,setTimeout(()=>{throw i},0)),i}}return t}var hb=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){b("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>m(this,null,function*(){this.task=null;try{b("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){es(n)?b("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Jr(n)}yield this.ee(6e4)}))}},fb=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return m(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let i=new Set,r=n,s=!0;return _.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!i.has(o))return b("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>n-r)}re(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(r,s)).next(a=>(b("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let i=e;return n.changes.forEach((r,s)=>{let o=uk(s);YD(o,i)>0&&(i=o)}),new Tn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var rn=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.se(r),this.oe=r=>i.writeSequenceNumber(r))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function lg(t){return t==null}function Au(t){return t===0&&1/t==-1/0}function hk(t){return typeof t=="number"&&Number.isInteger(t)&&!Au(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Bt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=uO(e)),e=O6(t.get(n),e);return uO(e)}function O6(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let s=t.charAt(r);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function uO(t){return t+""}function Si(t){let e=t.length;if(B(e>=2),e===2)return B(t.charAt(0)===""&&t.charAt(1)===""),Re.emptyPath();let n=e-2,i=[],r="";for(let s=0;s<e;){let o=t.indexOf("",s);switch((o<0||o>n)&&k(),t.charAt(o+1)){case"":let a=t.substring(s,o),c;r.length===0?c=a:(r+=a,c=r,r=""),i.push(c);break;case"":r+=t.substring(s,o),r+="\0";break;case"":r+=t.substring(s,o+1);break;default:k()}s=o+2}return new Re(i)}var dO=["userId","batchId"];function am(t,e){return[t,Bt(e)]}function fk(t,e,n){return[t,Bt(e),n]}var k6={},F6=["prefixPath","collectionGroup","readTime","documentId"],L6=["prefixPath","collectionGroup","documentId"],V6=["collectionGroup","readTime","prefixPath","documentId"],j6=["canonicalId","targetId"],B6=["targetId","path"],U6=["path","targetId"],$6=["collectionId","parent"],H6=["indexId","uid"],z6=["uid","sequenceNumber"],q6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],G6=["indexId","uid","orderedDocumentKey"],W6=["userId","collectionPath","documentId"],K6=["userId","collectionPath","largestBatchId"],Q6=["userId","collectionGroup","largestBatchId"],pk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Y6=[...pk,"documentOverlays"],mk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gk=mk,Z6=[...gk,"indexConfiguration","indexState","indexEntries"];var Ru=class extends pm{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function pt(t,e){let n=V(t);return so.M(n.ae,e)}function hO(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function go(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yk(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ve=class t{constructor(e,n){this.comparator=e,this.root=n||Ri.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ri.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ri.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ga(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ga(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ga(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ga(this.root,e,this.comparator,!0)}},Ga=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ri=class t{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new t(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw k();let e=this.left.check();if(e!==this.right.check())throw k();return e+(this.isRed()?0:1)}};Ri.EMPTY=null,Ri.RED=!0,Ri.BLACK=!1;Ri.EMPTY=new class{constructor(){this.size=0}get key(){throw k()}get value(){throw k()}get color(){throw k()}get left(){throw k()}get right(){throw k()}copy(e,n,i,r,s){return this}insert(e,n,i){return new Ri(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ne=class t{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gm(this.data.getIterator())}getIteratorFrom(e){return new gm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},gm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function La(t){return t.hasNext()?t.getNext():void 0}var sn=class t{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ne(st.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ya(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var ym=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var It=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ym("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};It.EMPTY_BYTE_STRING=new It("");var X6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(t){if(B(!!t),typeof t=="string"){let e=0,n=X6.exec(t);if(B(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qr(t){return typeof t=="string"?It.fromBase64String(t):It.fromUint8Array(t)}function XD(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function JD(t){let e=t.mapValue.fields.__previous_value__;return XD(e)?JD(e):e}function xu(t){let e=zr(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}var pb=class{constructor(e,n,i,r,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Xa=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var $r={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},cm={nullValue:"NULL_VALUE"};function oo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?XD(t)?4:_k(t)?9007199254740991:10:k()}function xi(t,e){if(t===e)return!0;let n=oo(t);if(n!==oo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xu(t).isEqual(xu(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=zr(r.timestampValue),a=zr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return qr(r.bytesValue).isEqual(qr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Ge(r.geoPointValue.latitude)===Ge(s.geoPointValue.latitude)&&Ge(r.geoPointValue.longitude)===Ge(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ge(r.integerValue)===Ge(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Ge(r.doubleValue),a=Ge(s.doubleValue);return o===a?Au(o)===Au(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ya(t.arrayValue.values||[],e.arrayValue.values||[],xi);case 10:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(hO(o)!==hO(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!xi(o[c],a[c])))return!1;return!0}(t,e);default:return k()}}function Mu(t,e){return(t.values||[]).find(n=>xi(n,e))!==void 0}function Gr(t,e){if(t===e)return 0;let n=oo(t),i=oo(e);if(n!==i)return se(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ge(s.integerValue||s.doubleValue),c=Ge(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return fO(t.timestampValue,e.timestampValue);case 4:return fO(xu(t),xu(e));case 5:return se(t.stringValue,e.stringValue);case 6:return function(s,o){let a=qr(s),c=qr(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=se(a[l],c[l]);if(u!==0)return u}return se(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=se(Ge(s.latitude),Ge(o.latitude));return a!==0?a:se(Ge(s.longitude),Ge(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=Gr(a[l],c[l]);if(u)return u}return se(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===$r.mapValue&&o===$r.mapValue)return 0;if(s===$r.mapValue)return 1;if(o===$r.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=se(c[d],u[d]);if(h!==0)return h;let f=Gr(a[c[d]],l[u[d]]);if(f!==0)return f}return se(c.length,u.length)}(t.mapValue,e.mapValue);default:throw k()}}function fO(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);let n=zr(t),i=zr(e),r=se(n.seconds,i.seconds);return r!==0?r:se(n.nanos,i.nanos)}function Ja(t){return mb(t)}function mb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=zr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return P.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let s of n.values||[])r?r=!1:i+=",",i+=mb(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${mb(n.fields[o])}`;return r+"}"}(t.mapValue):k()}function Nu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gb(t){return!!t&&"integerValue"in t}function Pu(t){return!!t&&"arrayValue"in t}function pO(t){return!!t&&"nullValue"in t}function mO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lm(t){return!!t&&"mapValue"in t}function wu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return go(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=wu(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _k(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function J6(t){return"nullValue"in t?cm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Nu(Xa.empty(),P.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:k()}function e5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Nu(Xa.empty(),P.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?$r:k()}function gO(t,e){let n=Gr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function yO(t,e){let n=Gr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var jt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!lm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wu(n)}setAll(e){let n=st.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=wu(o):r.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){let n=this.field(e.popLast());lm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];lm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){go(n,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new t(wu(this.value))}};function vk(t){let e=[];return go(t.fields,(n,i)=>{let r=new st([n]);if(lm(i)){let s=vk(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new sn(e)}var Et=class t{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,z.min(),z.min(),z.min(),jt.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,z.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,z.min(),z.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,z.min(),z.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Wr=class{constructor(e,n){this.position=e,this.inclusive=n}};function _O(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let s=e[r],o=t.position[r];if(s.field.isKeyField()?i=P.comparator(P.fromName(o.referenceValue),n.key):i=Gr(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function vO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xi(t.position[n],e.position[n]))return!1;return!0}var ao=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function t5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var _m=class{},ge=class t extends _m{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new vb(e,n,i):n==="array-contains"?new Ib(e,i):n==="in"?new vm(e,i):n==="not-in"?new bb(e,i):n==="array-contains-any"?new Db(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new wb(e,i):new Eb(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Gr(n,this.value)):n!==null&&oo(this.value)===oo(n)&&this.matchesComparison(Gr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return k()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Se=class t extends _m{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return ec(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function ec(t){return t.op==="and"}function yb(t){return t.op==="or"}function e0(t){return wk(t)&&ec(t)}function wk(t){for(let e of t.filters)if(e instanceof Se)return!1;return!0}function _b(t){if(t instanceof ge)return t.field.canonicalString()+t.op.toString()+Ja(t.value);if(e0(t))return t.filters.map(e=>_b(e)).join(",");{let e=t.filters.map(n=>_b(n)).join(",");return`${t.op}(${e})`}}function Ek(t,e){return t instanceof ge?function(i,r){return r instanceof ge&&i.op===r.op&&i.field.isEqual(r.field)&&xi(i.value,r.value)}(t,e):t instanceof Se?function(i,r){return r instanceof Se&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&Ek(o,r.filters[a]),!0):!1}(t,e):void k()}function Ik(t,e){let n=t.filters.concat(e);return Se.create(n,t.op)}function bk(t){return t instanceof ge?function(n){return`${n.field.canonicalString()} ${n.op} ${Ja(n.value)}`}(t):t instanceof Se?function(n){return n.op.toString()+" {"+n.getFilters().map(bk).join(" ,")+"}"}(t):"Filter"}var vb=class extends ge{constructor(e,n,i){super(e,n,i),this.key=P.fromName(i.referenceValue)}matches(e){let n=P.comparator(e.key,this.key);return this.matchesComparison(n)}},wb=class extends ge{constructor(e,n){super(e,"in",n),this.keys=Dk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Eb=class extends ge{constructor(e,n){super(e,"not-in",n),this.keys=Dk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Dk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>P.fromName(i.referenceValue))}var Ib=class extends ge{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Pu(n)&&Mu(n.arrayValue,this.value)}},vm=class extends ge{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Mu(this.value.arrayValue,n)}},bb=class extends ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Mu(this.value.arrayValue,n)}},Db=class extends ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Pu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Mu(this.value.arrayValue,i))}};var Cb=class{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function Tb(t,e=null,n=[],i=[],r=null,s=null,o=null){return new Cb(t,e,n,i,r,s,o)}function co(t){let e=V(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>_b(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),lg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ja(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ja(i)).join(",")),e.ce=n}return e.ce}function Ju(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!t5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ek(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vO(t.startAt,e.startAt)&&vO(t.endAt,e.endAt)}function wm(t){return P.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Em(t,e){return t.filters.filter(n=>n instanceof ge&&n.field.isEqual(e))}function wO(t,e,n){let i=cm,r=!0;for(let s of Em(t,e)){let o=cm,a=!0;switch(s.op){case"<":case"<=":o=J6(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=cm}gO({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];gO({value:i,inclusive:r},{value:o,inclusive:n.inclusive})<0&&(i=o,r=n.inclusive);break}}return{value:i,inclusive:r}}function EO(t,e,n){let i=$r,r=!0;for(let s of Em(t,e)){let o=$r,a=!0;switch(s.op){case">=":case">":o=e5(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=$r}yO({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];yO({value:i,inclusive:r},{value:o,inclusive:n.inclusive})>0&&(i=o,r=n.inclusive);break}}return{value:i,inclusive:r}}var Kr=class{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function Ck(t,e,n,i,r,s,o,a){return new Kr(t,e,n,i,r,s,o,a)}function ed(t){return new Kr(t)}function IO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Tk(t){return t.collectionGroup!==null}function Eu(t){let e=V(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ne(st.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new ao(s,i))}),n.has(st.keyField().canonicalString())||e.le.push(new ao(st.keyField(),i))}return e.le}function an(t){let e=V(t);return e.he||(e.he=n5(e,Eu(t))),e.he}function n5(t,e){if(t.limitType==="F")return Tb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new ao(r.field,s)});let n=t.endAt?new Wr(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Wr(t.startAt.position,t.startAt.inclusive):null;return Tb(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Sb(t,e){let n=t.filters.concat([e]);return new Kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Im(t,e,n){return new Kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ug(t,e){return Ju(an(t),an(e))&&t.limitType===e.limitType}function Sk(t){return`${co(an(t))}|lt:${t.limitType}`}function $a(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>bk(r)).join(", ")}]`),lg(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ja(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ja(r)).join(",")),`Target(${i})`}(an(t))}; limitType=${t.limitType})`}function td(t,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):P.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(let s of Eu(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,c){let l=_O(o,a,c);return o.inclusive?l<=0:l<0}(i.startAt,Eu(i),r)||i.endAt&&!function(o,a,c){let l=_O(o,a,c);return o.inclusive?l>=0:l>0}(i.endAt,Eu(i),r))}(t,e)}function Ak(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Rk(t){return(e,n)=>{let i=!1;for(let r of Eu(t)){let s=i5(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function i5(t,e,n){let i=t.field.isKeyField()?P.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Gr(c,l):k()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return k()}}var Mi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,(n,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return yk(this.inner)}size(){return this.innerSize}};var r5=new Ve(P.comparator);function on(){return r5}var xk=new Ve(P.comparator);function _u(...t){let e=xk;for(let n of t)e=e.insert(n.key,n);return e}function Mk(t){let e=xk;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Ai(){return Iu()}function Nk(){return Iu()}function Iu(){return new Mi(t=>t.toString(),(t,e)=>t.isEqual(e))}var s5=new Ve(P.comparator),o5=new Ne(P.comparator);function de(...t){let e=o5;for(let n of t)e=e.add(n);return e}var a5=new Ne(se);function t0(){return a5}function Pk(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Au(e)?"-0":e}}function Ok(t){return{integerValue:""+t}}function c5(t,e){return hk(e)?Ok(e):Pk(t,e)}var tc=class{constructor(){this._=void 0}};function l5(t,e,n){return t instanceof lo?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&XD(s)&&(s=JD(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Qr?Fk(t,e):t instanceof Yr?Lk(t,e):function(r,s){let o=kk(r,s),a=bO(o)+bO(r.Ie);return gb(o)&&gb(r.Ie)?Ok(a):Pk(r.serializer,a)}(t,e)}function u5(t,e,n){return t instanceof Qr?Fk(t,e):t instanceof Yr?Lk(t,e):n}function kk(t,e){return t instanceof uo?function(i){return gb(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var lo=class extends tc{},Qr=class extends tc{constructor(e){super(),this.elements=e}};function Fk(t,e){let n=Vk(e);for(let i of t.elements)n.some(r=>xi(r,i))||n.push(i);return{arrayValue:{values:n}}}var Yr=class extends tc{constructor(e){super(),this.elements=e}};function Lk(t,e){let n=Vk(e);for(let i of t.elements)n=n.filter(r=>!xi(r,i));return{arrayValue:{values:n}}}var uo=class extends tc{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function bO(t){return Ge(t.integerValue||t.doubleValue)}function Vk(t){return Pu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ab=class{constructor(e,n){this.field=e,this.transform=n}};function d5(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Qr&&r instanceof Qr||i instanceof Yr&&r instanceof Yr?Ya(i.elements,r.elements,xi):i instanceof uo&&r instanceof uo?xi(i.Ie,r.Ie):i instanceof lo&&r instanceof lo}(t.transform,e.transform)}var Rb=class{constructor(e,n){this.version=e,this.transformResults=n}},wt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function um(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var nc=class{};function jk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ho(t.key,wt.none()):new Zr(t.key,t.data,wt.none());{let n=t.data,i=jt.empty(),r=new Ne(st.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Hn(t.key,i,new sn(r.toArray()),wt.none())}}function h5(t,e,n){t instanceof Zr?function(r,s,o){let a=r.value.clone(),c=CO(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Hn?function(r,s,o){if(!um(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=CO(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Bk(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function bu(t,e,n,i){return t instanceof Zr?function(s,o,a,c){if(!um(s.precondition,o))return a;let l=s.value.clone(),u=TO(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,i):t instanceof Hn?function(s,o,a,c){if(!um(s.precondition,o))return a;let l=TO(s.fieldTransforms,c,o),u=o.data;return u.setAll(Bk(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return um(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function f5(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),s=kk(i.transform,r||null);s!=null&&(n===null&&(n=jt.empty()),n.set(i.field,s))}return n||null}function DO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ya(i,r,(s,o)=>d5(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Zr=class extends nc{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Hn=class extends nc{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Bk(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function CO(t,e,n){let i=new Map;B(t.length===n.length);for(let r=0;r<n.length;r++){let s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,u5(o,a,n[r]))}return i}function TO(t,e,n){let i=new Map;for(let r of t){let s=r.transform,o=n.data.field(r.field);i.set(r.field,l5(s,o,e))}return i}var ho=class extends nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},bm=class extends nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ou=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&h5(s,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=bu(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=bu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=Nk();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;let c=jk(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(z.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&Ya(this.mutations,e.mutations,(n,i)=>DO(n,i))&&Ya(this.baseMutations,e.baseMutations,(n,i)=>DO(n,i))}},xb=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){B(e.mutations.length===i.length);let r=function(){return s5}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new t(e,n,i,r)}};var ku=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Mb=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var tt,ve;function p5(t){switch(t){default:return k();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}function Uk(t){if(t===void 0)return Ze("GRPC error has no .code"),w.UNKNOWN;switch(t){case tt.OK:return w.OK;case tt.CANCELLED:return w.CANCELLED;case tt.UNKNOWN:return w.UNKNOWN;case tt.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case tt.INTERNAL:return w.INTERNAL;case tt.UNAVAILABLE:return w.UNAVAILABLE;case tt.UNAUTHENTICATED:return w.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case tt.NOT_FOUND:return w.NOT_FOUND;case tt.ALREADY_EXISTS:return w.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return w.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case tt.ABORTED:return w.ABORTED;case tt.OUT_OF_RANGE:return w.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return w.UNIMPLEMENTED;case tt.DATA_LOSS:return w.DATA_LOSS;default:return k()}}(ve=tt||(tt={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var SO=null;function m5(){return new TextEncoder}var g5=new Ws([4294967295,4294967295],0);function AO(t){let e=m5().encode(t),n=new aO;return n.update(e),new Uint8Array(n.digest())}function RO(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ws([n,i],0),new Ws([r,s],0)]}var Nb=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new eo(`Invalid padding: ${n}`);if(i<0)throw new eo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new eo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new eo(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Ws.fromNumber(this.Te)}de(e,n,i){let r=e.add(n.multiply(Ws.fromNumber(i)));return r.compare(g5)===1&&(r=new Ws([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=AO(e),[i,r]=RO(n);for(let s=0;s<this.hashCount;s++){let o=this.de(i,r,s);if(!this.Ae(o))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=AO(e),[i,r]=RO(n);for(let s=0;s<this.hashCount;s++){let o=this.de(i,r,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},eo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Fu=class t{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,Lu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(z.min(),r,new Ve(se),on(),de())}},Lu=class t{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,de(),de(),de())}};var Ka=class{constructor(e,n,i,r){this.Ve=e,this.removedTargetIds=n,this.key=i,this.me=r}},Dm=class{constructor(e,n){this.targetId=e,this.fe=n}},Cm=class{constructor(e,n,i=It.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},Tm=class{constructor(){this.ge=0,this.pe=MO(),this.ye=It.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=de(),n=de(),i=de();return this.pe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:k()}}),new Lu(this.ye,this.we,e,n,i)}Fe(){this.Se=!1,this.pe=MO()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,B(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},Pb=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=on(),this.Qe=xO(),this.Ke=new Ve(se)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let i=this.ze(n);switch(e.state){case 0:this.je(n)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(n);break;case 3:this.je(n)&&(i.Be(),i.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),i.Ce(e.resumeToken));break;default:k()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((i,r)=>{this.je(r)&&n(r)})}Je(e){let n=e.targetId,i=e.fe.count,r=this.Ye(n);if(r){let s=r.target;if(wm(s))if(i===0){let o=new P(s.path);this.We(n,o,Et.newNoDocument(o,z.min()))}else B(i===1);else{let o=this.Ze(n);if(o!==i){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}SO?.tt(function(u,d,h,f,p){var g,v,E,A,N,O;let K={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},j=d.unchangedNames;return j&&(K.bloomFilter={applied:p===0,hashCount:(g=j?.hashCount)!==null&&g!==void 0?g:0,bitmapLength:(A=(E=(v=j?.bits)===null||v===void 0?void 0:v.bitmap)===null||E===void 0?void 0:E.length)!==null&&A!==void 0?A:0,padding:(O=(N=j?.bits)===null||N===void 0?void 0:N.padding)!==null&&O!==void 0?O:0,mightContain:ae=>{var De;return(De=f?.mightContain(ae))!==null&&De!==void 0&&De}}),K}(o,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n,o,a;try{o=qr(i).toUint8Array()}catch(c){if(c instanceof ym)return Tu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Nb(o,r,s)}catch(c){return Tu(c instanceof eo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,i){return n.fe.count===i-this.rt(e,n.targetId)?0:2}rt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(s=>{let o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),r++)}),r}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&wm(a.target)){let c=new P(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,Et.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let i=de();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let r=new Fu(e,n,this.Ke,this.qe,i);return this.qe=on(),this.Qe=xO(),this.Ke=new Ve(se),r}Ue(e,n){if(!this.je(e))return;let i=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,i),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,i){if(!this.je(e))return;let r=this.ze(e);this.st(e,n)?r.Me(n,1):r.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),i&&(this.qe=this.qe.insert(n,i))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Tm,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ne(se),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||b("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Tm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function xO(){return new Ve(P.comparator)}function MO(){return new Ve(P.comparator)}var y5={asc:"ASCENDING",desc:"DESCENDING"},_5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v5={and:"AND",or:"OR"},Ob=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function kb(t,e){return t.useProto3Json||lg(e)?e:{value:e}}function ic(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $k(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function w5(t,e){return ic(t,e.toTimestamp())}function Ut(t){return B(!!t),z.fromTimestamp(function(n){let i=zr(n);return new Xe(i.seconds,i.nanos)}(t))}function n0(t,e){return Fb(t,e).canonicalString()}function Fb(t,e){let n=function(r){return new Re(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Hk(t){let e=Re.fromString(t);return B(Xk(e)),e}function Sm(t,e){return n0(t.databaseId,e.path)}function io(t,e){let n=Hk(e);if(n.get(1)!==t.databaseId.projectId)throw new R(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new R(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new P(Gk(n))}function zk(t,e){return n0(t.databaseId,e)}function qk(t){let e=Hk(t);return e.length===4?Re.emptyPath():Gk(e)}function Lb(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Gk(t){return B(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function NO(t,e,n){return{name:Sm(t,e),fields:n.value.mapValue.fields}}function E5(t,e,n){let i=io(t,e.name),r=Ut(e.updateTime),s=e.createTime?Ut(e.createTime):z.min(),o=new jt({mapValue:{fields:e.fields}}),a=Et.newFoundDocument(i,r,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function I5(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:k()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(B(u===void 0||typeof u=="string"),It.fromBase64String(u||"")):(B(u===void 0||u instanceof Uint8Array),It.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let u=l.code===void 0?w.UNKNOWN:Uk(l.code);return new R(u,l.message||"")}(o);n=new Cm(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=io(t,i.document.name),s=Ut(i.document.updateTime),o=i.document.createTime?Ut(i.document.createTime):z.min(),a=new jt({mapValue:{fields:i.document.fields}}),c=Et.newFoundDocument(r,s,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];n=new Ka(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=io(t,i.document),s=i.readTime?Ut(i.readTime):z.min(),o=Et.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Ka([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=io(t,i.document),s=i.removedTargetIds||[];n=new Ka([],s,r,null)}else{if(!("filter"in e))return k();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new Mb(r,s),a=i.targetId;n=new Dm(a,o)}}return n}function Am(t,e){let n;if(e instanceof Zr)n={update:NO(t,e.key,e.value)};else if(e instanceof ho)n={delete:Sm(t,e.key)};else if(e instanceof Hn)n={update:NO(t,e.key,e.data),updateMask:A5(e.fieldMask)};else{if(!(e instanceof bm))return k();n={verify:Sm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let a=o.transform;if(a instanceof lo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Yr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof uo)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw k()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:w5(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:k()}(t,e.precondition)),n}function Vb(t,e){let n=e.currentDocument?function(s){return s.updateTime!==void 0?wt.updateTime(Ut(s.updateTime)):s.exists!==void 0?wt.exists(s.exists):wt.none()}(e.currentDocument):wt.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let c=null;if("setToServerValue"in a)B(a.setToServerValue==="REQUEST_TIME"),c=new lo;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new Qr(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new Yr(u)}else"increment"in a?c=new uo(o,a.increment):k();let l=st.fromServerFormat(a.fieldPath);return new Ab(l,c)}(t,r)):[];if(e.update){e.update.name;let r=io(t,e.update.name),s=new jt({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new sn(l.map(u=>st.fromServerFormat(u)))}(e.updateMask);return new Hn(r,s,o,n,i)}return new Zr(r,s,n,i)}if(e.delete){let r=io(t,e.delete);return new ho(r,n)}if(e.verify){let r=io(t,e.verify);return new bm(r,n)}return k()}function b5(t,e){return t&&t.length>0?(B(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?Ut(r.updateTime):Ut(s);return o.isEqual(z.min())&&(o=Ut(s)),new Rb(o,r.transformResults||[])}(n,e))):[]}function Wk(t,e){return{documents:[zk(t,e.path)]}}function Kk(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=zk(t,r);let s=function(l){if(l.length!==0)return Zk(Se.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:Ha(h.field),direction:C5(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=kb(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:n,parent:r}}function Qk(t){let e=qk(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){B(i===1);let u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){let h=Yk(d);return h instanceof Se&&e0(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(p){return new ao(za(p.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,lg(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Wr(f,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){let h=!d.before,f=d.values||[];return new Wr(f,h)}(n.endAt)),Ck(e,r,o,s,a,"F",c,l)}function D5(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return k()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Yk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=za(n.unaryFilter.field);return ge.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=za(n.unaryFilter.field);return ge.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=za(n.unaryFilter.field);return ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=za(n.unaryFilter.field);return ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return k()}}(t):t.fieldFilter!==void 0?function(n){return ge.create(za(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return k()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Se.create(n.compositeFilter.filters.map(i=>Yk(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return k()}}(n.compositeFilter.op))}(t):k()}function C5(t){return y5[t]}function T5(t){return _5[t]}function S5(t){return v5[t]}function Ha(t){return{fieldPath:t.canonicalString()}}function za(t){return st.fromServerFormat(t.fieldPath)}function Zk(t){return t instanceof ge?function(n){if(n.op==="=="){if(mO(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NAN"}};if(pO(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mO(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NAN"}};if(pO(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(n.field),op:T5(n.op),value:n.value}}}(t):t instanceof Se?function(n){let i=n.getFilters().map(r=>Zk(r));return i.length===1?i[0]:{compositeFilter:{op:S5(n.op),filters:i}}}(t):k()}function A5(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Xk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var rc=class t{constructor(e,n,i,r,s=z.min(),o=z.min(),a=It.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Rm=class{constructor(e){this.ct=e}};function R5(t,e){let n;if(e.document)n=E5(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=P.fromSegments(e.noDocument.path),r=po(e.noDocument.readTime);n=Et.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return k();{let i=P.fromSegments(e.unknownDocument.path),r=po(e.unknownDocument.version);n=Et.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let s=new Xe(r[0],r[1]);return z.fromTimestamp(s)}(e.readTime)),n}function PO(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:xm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,o){return{name:Sm(s,o.key),fields:o.data.value.mapValue.fields,updateTime:ic(s,o.version.toTimestamp()),createTime:ic(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:fo(e.version)};else{if(!e.isUnknownDocument())return k();i.unknownDocument={path:n.path.toArray(),version:fo(e.version)}}return i}function xm(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function fo(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function po(t){let e=new Xe(t.seconds,t.nanoseconds);return z.fromTimestamp(e)}function Zs(t,e){let n=(e.baseMutations||[]).map(s=>Vb(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let i=e.mutations.map(s=>Vb(t.ct,s)),r=Xe.fromMillis(e.localWriteTimeMs);return new Ou(e.batchId,r,n,i)}function vu(t){let e=po(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?po(t.lastLimboFreeSnapshotVersion):z.min(),i;return i=function(s){return s.documents!==void 0}(t.query)?function(s){return B(s.documents.length===1),an(ed(qk(s.documents[0])))}(t.query):function(s){return an(Qk(s))}(t.query),new rc(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,It.fromBase64String(t.resumeToken))}function Jk(t,e){let n=fo(e.snapshotVersion),i=fo(e.lastLimboFreeSnapshotVersion),r;r=wm(e.target)?Wk(t.ct,e.target):Kk(t.ct,e.target).ut;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:co(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function eF(t){let e=Qk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Im(e,e.limit,"L"):e}function YI(t,e){return new ku(e.largestBatchId,Vb(t.ct,e.overlayMutation))}function OO(t,e){let n=e.path.lastSegment();return[t,Bt(e.path.popLast()),n]}function kO(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:fo(i.readTime),documentKey:Bt(i.documentKey.path),largestBatchId:i.largestBatchId}}var jb=class{getBundleMetadata(e,n){return FO(e).get(n).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:po(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,n){return FO(e).put(function(r){return{bundleId:r.id,createTime:fo(Ut(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return LO(e).get(n).next(i=>{if(i)return function(s){return{name:s.name,query:eF(s.bundledQuery),readTime:po(s.readTime)}}(i)})}saveNamedQuery(e,n){return LO(e).put(function(r){return{name:r.name,readTime:fo(Ut(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function FO(t){return pt(t,"bundles")}function LO(t){return pt(t,"namedQueries")}var Mm=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return pu(e).get(OO(this.userId,n)).next(i=>i?YI(this.serializer,i):null)}getOverlays(e,n){let i=Ai();return _.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((s,o)=>{let a=new ku(n,o);r.push(this.ht(e,a))}),_.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(o=>r.add(Bt(o.getCollectionPath())));let s=[];return r.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(pu(e).H("collectionPathOverlayIndex",a))}),_.waitFor(s)}getOverlaysForCollection(e,n,i){let r=Ai(),s=Bt(n),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return pu(e).W("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=YI(this.serializer,c);r.set(l.getKey(),l)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let s=Ai(),o,a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return pu(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,l,u)=>{let d=YI(this.serializer,l);s.size()<r||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ht(e,n){return pu(e).put(function(r,s,o){let[a,c,l]=OO(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Am(r.ct,o.mutation)}}(this.serializer,this.userId,n))}};function pu(t){return pt(t,"documentOverlays")}var Xi=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ge(e.integerValue));else if("doubleValue"in e){let i=Ge(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),Au(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"?n.At(i):(n.At(`${i.seconds||""}`),n.dt(i.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(qr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?_k(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):k()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let i=e.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){let i=e.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(e,n){this.Et(n,37),P.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Xi.bt=new Xi;function x5(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function VO(t){let e=64-function(i){let r=0;for(let s=0;s<8;++s){let o=x5(255&i[s]);if(r+=o,o!==8)break}return r}(t);return Math.ceil(e/8)}var Bb=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ct(i.value),i=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Mt(i.value),i=n.next();this.xt()}Ot(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{let r=n.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{let r=n.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Bt(e){let n=this.Lt(e),i=VO(n);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}qt(e){let n=this.Lt(e),i=VO(n);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){let n=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},Ub=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}},$b=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Xs=class{constructor(){this.Gt=new Bb,this.zt=new Ub(this.Gt),this.jt=new $b(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Js=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function jr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=jO(t.arrayValue,e.arrayValue),n!==0?n:(n=jO(t.directionalValue,e.directionalValue),n!==0?n:P.comparator(t.documentKey,e.documentKey)))}function jO(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var Nm=class{constructor(e){this.Yt=new Ne((n,i)=>st.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let i=n;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(e){if(B(e.collectionGroup===this.collectionId),this.en)return!1;let n=lb(e);if(n!==void 0&&!this.nn(n))return!1;let i=Qs(e),r=new Set,s=0,o=0;for(;s<i.length&&this.nn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let c=i[s];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++s}for(;s<i.length;++s){let a=i[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new Ne(st.comparator),n=[];for(let i of this.Xt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new Wa(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new Wa(i.field,0))}for(let i of this.Zt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new Wa(i.field,i.dir==="asc"?0:1)));return new Za(Za.UNKNOWN_ID,this.collectionId,n,Su.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function tF(t){var e,n;if(B(t instanceof ge||t instanceof Se),t instanceof ge){if(t instanceof vm){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ge.create(t.field,"==",s)))||[];return Se.create(r,"or")}return t}let i=t.filters.map(r=>tF(r));return Se.create(i,t.op)}function M5(t){if(t.getFilters().length===0)return[];let e=qb(tF(t));return B(nF(e)),Hb(e)||zb(e)?[e]:e.getFilters()}function Hb(t){return t instanceof ge}function zb(t){return t instanceof Se&&e0(t)}function nF(t){return Hb(t)||zb(t)||function(n){if(n instanceof Se&&yb(n)){for(let i of n.getFilters())if(!Hb(i)&&!zb(i))return!1;return!0}return!1}(t)}function qb(t){if(B(t instanceof ge||t instanceof Se),t instanceof ge)return t;if(t.filters.length===1)return qb(t.filters[0]);let e=t.filters.map(i=>qb(i)),n=Se.create(e,t.op);return n=Pm(n),nF(n)?n:(B(n instanceof Se),B(ec(n)),B(n.filters.length>1),n.filters.reduce((i,r)=>i0(i,r)))}function i0(t,e){let n;return B(t instanceof ge||t instanceof Se),B(e instanceof ge||e instanceof Se),n=t instanceof ge?e instanceof ge?function(r,s){return Se.create([r,s],"and")}(t,e):BO(t,e):e instanceof ge?BO(e,t):function(r,s){if(B(r.filters.length>0&&s.filters.length>0),ec(r)&&ec(s))return Ik(r,s.getFilters());let o=yb(r)?r:s,a=yb(r)?s:r,c=o.filters.map(l=>i0(l,a));return Se.create(c,"or")}(t,e),Pm(n)}function BO(t,e){if(ec(e))return Ik(e,t.getFilters());{let n=e.filters.map(i=>i0(t,i));return Se.create(n,"or")}}function Pm(t){if(B(t instanceof ge||t instanceof Se),t instanceof ge)return t;let e=t.getFilters();if(e.length===1)return Pm(e[0]);if(wk(t))return t;let n=e.map(r=>Pm(r)),i=[];return n.forEach(r=>{r instanceof ge?i.push(r):r instanceof Se&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Se.create(i,t.op)}var Gb=class{constructor(){this._n=new Vu}addToCollectionParentIndex(e,n){return this._n.add(n),_.resolve()}getCollectionParents(e,n){return _.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return _.resolve()}deleteFieldIndex(e,n){return _.resolve()}deleteAllFieldIndexes(e){return _.resolve()}createTargetIndexes(e,n){return _.resolve()}getDocumentsMatchingTarget(e,n){return _.resolve(null)}getIndexType(e,n){return _.resolve(0)}getFieldIndexes(e,n){return _.resolve([])}getNextCollectionGroupToUpdate(e){return _.resolve(null)}getMinOffset(e,n){return _.resolve(Tn.min())}getMinOffsetFromCollectionGroup(e,n){return _.resolve(Tn.min())}updateCollectionGroup(e,n,i){return _.resolve()}updateIndexEntries(e,n){return _.resolve()}},Vu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ne(Re.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ne(Re.comparator)).toArray()}};var im=new Uint8Array(0),Wb=class{constructor(e,n){this.databaseId=n,this.an=new Vu,this.un=new Mi(i=>co(i),(i,r)=>Ju(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let s={collectionId:i,parent:Bt(r)};return UO(e).put(s)}return _.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[ck(n),""],!1,!0);return UO(e).W(r).next(s=>{for(let o of s){if(o.collectionId!==n)break;i.push(Si(o.parent))}return i})}addFieldIndex(e,n){let i=mu(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;let s=i.add(r);if(n.indexState){let o=ja(e);return s.next(a=>{o.put(kO(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){let i=mu(e),r=ja(e),s=Va(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=mu(e),i=Va(e),r=ja(e);return n.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(e,n){return _.forEach(this.cn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let s=new Nm(i).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){let i=Va(e),r=!0,s=new Map;return _.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=de(),a=[];return _.forEach(s,(c,l)=>{b("IndexedDbIndexManager",`Using index ${function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(O=>`${O.fieldPath}:${O.kind}`).join(",")}`}(c)} to execute ${co(n)}`);let u=function(N,O){let K=lb(O);if(K===void 0)return null;for(let j of Em(N,K.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(l,c),d=function(N,O){let K=new Map;for(let j of Qs(O))for(let ae of Em(N,j.fieldPath))switch(ae.op){case"==":case"in":K.set(j.fieldPath.canonicalString(),ae.value);break;case"not-in":case"!=":return K.set(j.fieldPath.canonicalString(),ae.value),Array.from(K.values())}return null}(l,c),h=function(N,O){let K=[],j=!0;for(let ae of Qs(O)){let De=ae.kind===0?wO(N,ae.fieldPath,N.startAt):EO(N,ae.fieldPath,N.startAt);K.push(De.value),j&&(j=De.inclusive)}return new Wr(K,j)}(l,c),f=function(N,O){let K=[],j=!0;for(let ae of Qs(O)){let De=ae.kind===0?EO(N,ae.fieldPath,N.endAt):wO(N,ae.fieldPath,N.endAt);K.push(De.value),j&&(j=De.inclusive)}return new Wr(K,j)}(l,c),p=this.hn(c,l,h),g=this.hn(c,l,f),v=this.Pn(c,l,d),E=this.In(c.indexId,u,p,h.inclusive,g,f.inclusive,v);return _.forEach(E,A=>i.j(A,n.limit).next(N=>{N.forEach(O=>{let K=P.fromSegments(O.documentKey);o.has(K)||(o=o.add(K),a.push(K))})}))}).next(()=>a)}return _.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=M5(Se.create(e.filters,"and")).map(i=>Tb(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,i,r,s,o,a){let c=(n!=null?n.length:1)*Math.max(i.length,s.length),l=c/(n!=null?n.length:1),u=[];for(let d=0;d<c;++d){let h=n?this.Tn(n[d/l]):im,f=this.En(e,h,i[d%l],r),p=this.dn(e,h,s[d%l],o),g=a.map(v=>this.En(e,h,v,!0));u.push(...this.createRange(f,p,g))}return u}En(e,n,i,r){let s=new Js(e,P.empty(),n,i);return r?s:s.Jt()}dn(e,n,i,r){let s=new Js(e,P.empty(),n,i);return r?s.Jt():s}ln(e,n){let i=new Nm(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(let a of s)i.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let i=2,r=this.cn(n);return _.forEach(r,s=>this.ln(e,s).next(o=>{o?i!==0&&o.fields.length<function(c){let l=new Ne(st.comparator),u=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:l=l.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(l=l.add(d.field));return l.size+(u?1:0)}(s)&&(i=1):i=0})).next(()=>function(o){return o.limit!==null}(n)&&r.length>1&&i===2?1:i)}An(e,n){let i=new Xs;for(let r of Qs(e)){let s=n.data.field(r.fieldPath);if(s==null)return null;let o=i.Ht(r.kind);Xi.bt.Pt(s,o)}return i.Wt()}Tn(e){let n=new Xs;return Xi.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let i=new Xs;return Xi.bt.Pt(Nu(this.databaseId,n),i.Ht(function(s){let o=Qs(s);return o.length===0?0:o[o.length-1].kind}(e))),i.Wt()}Pn(e,n,i){if(i===null)return[];let r=[];r.push(new Xs);let s=0;for(let o of Qs(e)){let a=i[s++];for(let c of r)if(this.Vn(n,o.fieldPath)&&Pu(a))r=this.mn(r,o,a);else{let l=c.Ht(o.kind);Xi.bt.Pt(a,l)}}return this.fn(r)}hn(e,n,i){return this.Pn(e,n,i.position)}fn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Wt();return n}mn(e,n,i){let r=[...e],s=[];for(let o of i.arrayValue.values||[])for(let a of r){let c=new Xs;c.seed(a.Wt()),Xi.bt.Pt(o,c.Ht(n.kind)),s.push(c)}return s}Vn(e,n){return!!e.filters.find(i=>i instanceof ge&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=mu(e),r=ja(e);return(n?i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.W()).next(s=>{let o=[];return _.forEach(s,a=>r.get([a.indexId,this.uid]).next(c=>{o.push(function(u,d){let h=d?new Su(d.sequenceNumber,new Tn(po(d.readTime),new P(Si(d.documentKey)),d.largestBatchId)):Su.empty(),f=u.fields.map(([p,g])=>new Wa(st.fromServerFormat(p),g));return new Za(u.indexId,u.collectionGroup,f,h)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:se(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=mu(e),s=ja(e);return this.gn(e).next(o=>r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>_.forEach(a,c=>s.put(kO(c.indexId,this.uid,o,i)))))}updateIndexEntries(e,n){let i=new Map;return _.forEach(n,(r,s)=>{let o=i.get(r.collectionGroup);return(o?_.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),_.forEach(a,c=>this.pn(e,r,c).next(l=>{let u=this.yn(s,c);return l.isEqual(u)?_.resolve():this.wn(e,s,c,l,u)}))))})}Sn(e,n,i,r){return Va(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,n.key),documentKey:n.key.path.toArray()})}bn(e,n,i,r){return Va(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,n.key),n.key.path.toArray()])}pn(e,n,i){let r=Va(e),s=new Ne(jr);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,n)])},(o,a)=>{s=s.add(new Js(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let i=new Ne(jr),r=this.An(n,e);if(r==null)return i;let s=lb(n);if(s!=null){let o=e.data.field(s.fieldPath);if(Pu(o))for(let a of o.arrayValue.values||[])i=i.add(new Js(n.indexId,e.key,this.Tn(a),r))}else i=i.add(new Js(n.indexId,e.key,im,r));return i}wn(e,n,i,r,s){b("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let o=[];return function(c,l,u,d,h){let f=c.getIterator(),p=l.getIterator(),g=La(f),v=La(p);for(;g||v;){let E=!1,A=!1;if(g&&v){let N=u(g,v);N<0?A=!0:N>0&&(E=!0)}else g!=null?A=!0:E=!0;E?(d(v),v=La(p)):A?(h(g),g=La(f)):(g=La(f),v=La(p))}}(r,s,jr,a=>{o.push(this.Sn(e,n,i,a))},a=>{o.push(this.bn(e,n,i,a))}),_.waitFor(o)}gn(e){let n=1;return ja(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((o,a)=>jr(o,a)).filter((o,a,c)=>!a||jr(o,c[a-1])!==0);let r=[];r.push(e);for(let o of i){let a=jr(o,e),c=jr(o,n);if(a===0)r[0]=e.Jt();else if(a>0&&c<0)r.push(o),r.push(o.Jt());else if(c>0)break}r.push(n);let s=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];let a=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,im,[]],c=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,im,[]];s.push(IDBKeyRange.bound(a,c))}return s}Dn(e,n){return jr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next($O)}getMinOffset(e,n){return _.mapArray(this.cn(n),i=>this.ln(e,i).next(r=>r||k())).next($O)}};function UO(t){return pt(t,"collectionParents")}function Va(t){return pt(t,"indexEntries")}function mu(t){return pt(t,"indexConfiguration")}function ja(t){return pt(t,"indexState")}function $O(t){B(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;YD(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Tn(e.readTime,e.documentKey,n)}var HO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dn=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function iF(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId),a=0,c=i.Y({range:o},(u,d,h)=>(a++,h.delete()));s.push(c.next(()=>{B(a===1)}));let l=[];for(let u of n.mutations){let d=fk(e,u.key.path,n.batchId);s.push(r.delete(d)),l.push(u.key)}return _.waitFor(s).next(()=>l)}function Om(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw k();e=t.noDocument}return JSON.stringify(e).length}Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(41943040,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);var km=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(e,n,i,r){B(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new t(s,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Br(e).Y({index:"userMutationsIndex",range:i},(r,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let s=qa(e),o=Br(e);return o.add({}).next(a=>{B(typeof a=="number");let c=new Ou(a,n,i,r),l=function(f,p,g){let v=g.baseMutations.map(A=>Am(f.ct,A)),E=g.mutations.map(A=>Am(f.ct,A));return{userId:p,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:v,mutations:E}}(this.serializer,this.userId,c),u=[],d=new Ne((h,f)=>se(h.canonicalString(),f.canonicalString()));for(let h of r){let f=fk(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(l)),u.push(s.put(f,k6))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),_.waitFor(u).next(()=>c)})}lookupMutationBatch(e,n){return Br(e).get(n).next(i=>i?(B(i.userId===this.userId),Zs(this.serializer,i)):null)}vn(e,n){return this.Cn[n]?_.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.Cn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),s=null;return Br(e).Y({index:"userMutationsIndex",range:r},(o,a,c)=>{a.userId===this.userId&&(B(a.batchId>=i),s=Zs(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Br(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Br(e).W("userMutationsIndex",n).next(i=>i.map(r=>Zs(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=am(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return qa(e).Y({range:r},(o,a,c)=>{let[l,u,d]=o,h=Si(u);if(l===this.userId&&n.path.isEqual(h))return Br(e).get(d).next(f=>{if(!f)throw k();B(f.userId===this.userId),s.push(Zs(this.serializer,f))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ne(se),r=[];return n.forEach(s=>{let o=am(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=qa(e).Y({range:a},(l,u,d)=>{let[h,f,p]=l,g=Si(f);h===this.userId&&s.path.isEqual(g)?i=i.add(p):d.done()});r.push(c)}),_.waitFor(r).next(()=>this.Fn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,s=am(this.userId,i),o=IDBKeyRange.lowerBound(s),a=new Ne(se);return qa(e).Y({range:o},(c,l,u)=>{let[d,h,f]=c,p=Si(h);d===this.userId&&i.isPrefixOf(p)?p.length===r&&(a=a.add(f)):u.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let i=[],r=[];return n.forEach(s=>{r.push(Br(e).get(s).next(o=>{if(o===null)throw k();B(o.userId===this.userId),i.push(Zs(this.serializer,o))}))}),_.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return iF(e.ae,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),_.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return _.resolve();let i=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return qa(e).Y({range:i},(s,o,a)=>{if(s[0]===this.userId){let c=Si(s[1]);r.push(c)}else a.done()}).next(()=>{B(r.length===0)})})}containsKey(e,n){return rF(e,this.userId,n)}xn(e){return sF(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function rF(t,e,n){let i=am(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i),o=!1;return qa(t).Y({range:s,J:!0},(a,c,l)=>{let[u,d,h]=a;u===e&&d===r&&(o=!0),l.done()}).next(()=>o)}function Br(t){return pt(t,"mutations")}function qa(t){return pt(t,"documentMutations")}function sF(t){return pt(t,"mutationQueues")}var sc=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};var Kb=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{let i=new sc(n.highestTargetId);return n.highestTargetId=i.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>z.fromTimestamp(new Xe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Ln(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.kn(e,r)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(i=>(i.targetCount+=1,this.Qn(n,i),this.kn(e,i))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ba(e).delete(n.targetId)).next(()=>this.Ln(e)).next(i=>(B(i.targetCount>0),i.targetCount-=1,this.kn(e,i)))}removeTargets(e,n,i){let r=0,s=[];return Ba(e).Y((o,a)=>{let c=vu(a);c.sequenceNumber<=n&&i.get(c.targetId)===null&&(r++,s.push(this.removeTargetData(e,c)))}).next(()=>_.waitFor(s)).next(()=>r)}forEachTarget(e,n){return Ba(e).Y((i,r)=>{let s=vu(r);n(s)})}Ln(e){return zO(e).get("targetGlobalKey").next(n=>(B(n!==null),n))}kn(e,n){return zO(e).put("targetGlobalKey",n)}qn(e,n){return Ba(e).put(Jk(this.serializer,n))}Qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){let i=co(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),s=null;return Ba(e).Y({range:r,index:"queryTargetsIndex"},(o,a,c)=>{let l=vu(a);Ju(n,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,n,i){let r=[],s=Ur(e);return n.forEach(o=>{let a=Bt(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),_.waitFor(r)}removeMatchingKeys(e,n,i){let r=Ur(e);return _.forEach(n,s=>{let o=Bt(s.path);return _.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){let i=Ur(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Ur(e),s=de();return r.Y({range:i,J:!0},(o,a,c)=>{let l=Si(o[1]),u=new P(l);s=s.add(u)}).next(()=>s)}containsKey(e,n){let i=Bt(n.path),r=IDBKeyRange.bound([i],[ck(i)],!1,!0),s=0;return Ur(e).Y({index:"documentTargetsIndex",J:!0,range:r},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}_t(e,n){return Ba(e).get(n).next(i=>i?vu(i):null)}};function Ba(t){return pt(t,"targets")}function zO(t){return pt(t,"targetGlobal")}function Ur(t){return pt(t,"targetDocuments")}function qO([t,e],[n,i]){let r=se(t,n);return r===0?se(e,i):r}var Qb=class{constructor(e){this.Kn=e,this.buffer=new Ne(qO),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();qO(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},Yb=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){b("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>m(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){es(n)?b("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Jr(n)}yield this.zn(3e5)}))}},Zb=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return _.resolve(rn._e);let i=new Qb(n);return this.jn.forEachTarget(e,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(e,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(b("LruGarbageCollector","Garbage collection skipped; disabled"),_.resolve(HO)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(b("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HO):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let i,r,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(b("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,n))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(l=Date.now(),Ua()<=pe.DEBUG&&b("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),_.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}};function N5(t,e){return new Zb(t,e)}var Xb=class{constructor(e,n){this.db=e,this.garbageCollector=N5(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Zn(e){let n=0;return this.Jn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(i,r)=>n(r))}addReference(e,n,i){return rm(e,i)}removeReference(e,n,i){return rm(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return rm(e,n)}er(e,n){return function(r,s){let o=!1;return sF(r).Z(a=>rF(r,a,s).next(c=>(c&&(o=!0),_.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],s=0;return this.Xn(e,(o,a)=>{if(a<=n){let c=this.er(e,o).next(l=>{if(!l)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,z.min()),Ur(e).delete(function(d){return[0,Bt(d.path)]}(o))))});r.push(c)}}).next(()=>_.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return rm(e,n)}Xn(e,n){let i=Ur(e),r,s=rn._e;return i.Y({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==rn._e&&n(new P(Si(r)),s),s=l,r=c):s=rn._e}).next(()=>{s!==rn._e&&n(new P(Si(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function rm(t,e){return Ur(t).put(function(i,r){return{targetId:0,path:Bt(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var Fm=class{constructor(){this.changes=new Mi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?_.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Jb=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return Ks(e).put(i)}removeEntry(e,n,i){return Ks(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],xm(o),a[a.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.tr(e,i)))}getEntry(e,n){let i=Et.newInvalidDocument(n);return Ks(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(gu(n))},(r,s)=>{i=this.nr(n,s)}).next(()=>i)}rr(e,n){let i={size:0,document:Et.newInvalidDocument(n)};return Ks(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(gu(n))},(r,s)=>{i={document:this.nr(n,s),size:Om(s)}}).next(()=>i)}getEntries(e,n){let i=on();return this.ir(e,n,(r,s)=>{let o=this.nr(r,s);i=i.insert(r,o)}).next(()=>i)}sr(e,n){let i=on(),r=new Ve(P.comparator);return this.ir(e,n,(s,o)=>{let a=this.nr(s,o);i=i.insert(s,a),r=r.insert(s,Om(o))}).next(()=>({documents:i,_r:r}))}ir(e,n,i){if(n.isEmpty())return _.resolve();let r=new Ne(KO);n.forEach(c=>r=r.add(c));let s=IDBKeyRange.bound(gu(r.first()),gu(r.last())),o=r.getIterator(),a=o.getNext();return Ks(e).Y({index:"documentKeyIndex",range:s},(c,l,u)=>{let d=P.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&KO(a,d)<0;)i(a,null),a=o.getNext();a&&a.isEqual(d)&&(i(a,l),a=o.hasNext()?o.getNext():null),a?u.U(gu(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,s){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),xm(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ks(e).W(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let u=on();for(let d of l){let h=this.nr(P.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(td(n,h)||r.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,n,i,r){let s=on(),o=WO(n,i),a=WO(n,Tn.max());return Ks(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,u)=>{let d=this.nr(P.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(d.key,d),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(e){return new eD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return GO(e).get("remoteDocumentGlobalKey").next(n=>(B(!!n),n))}tr(e,n){return GO(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let i=R5(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(z.min())))return i}return Et.newInvalidDocument(e)}};function oF(t){return new Jb(t)}var eD=class extends Fm{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Mi(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new Ne((s,o)=>se(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=PO(this.ar.serializer,o);r=r.add(s.path.popLast());let l=Om(c);i+=l-a.size,n.push(this.ar.addEntry(e,s,c))}else if(i-=a.size,this.trackRemovals){let c=PO(this.ar.serializer,o.convertToNoDocument(z.min()));n.push(this.ar.addEntry(e,s,c))}}),r.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,i)),_.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(i=>(this.ur.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:i,_r:r})=>(r.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:i.get(s).readTime})}),i))}};function GO(t){return pt(t,"remoteDocumentGlobal")}function Ks(t){return pt(t,"remoteDocumentsV14")}function gu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function WO(t,e){let n=e.documentKey.path.toArray();return[t,xm(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function KO(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=se(n[s],i[s]),r)return r;return r=se(n.length,i.length),r||(r=se(n[n.length-2],i[i.length-2]),r||se(n[n.length-1],i[i.length-1]))}var tD=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Lm=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&bu(i.mutation,r,sn.empty(),Xe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,de()).next(()=>i))}getLocalViewOfDocuments(e,n,i=de()){let r=Ai();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=_u();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let i=Ai();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,de()))}populateOverlays(e,n,i){let r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=on(),o=Iu(),a=function(){return Iu()}();return n.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof Hn)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),bu(u.mutation,l,u.mutation.getFieldMask(),Xe.now())):o.set(l.key,sn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var d;return a.set(l,new tD(u,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let i=Iu(),r=new Ve((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=i.get(c)||sn.empty();u=a.applyToLocalView(l,u),i.set(c,u);let d=(r.get(a.batchId)||de()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=Nk();u.forEach(h=>{if(!s.has(h)){let f=jk(n.get(h),i.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return _.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return P.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Tk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):_.resolve(Ai()),a=-1,c=s;return o.next(l=>_.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?_.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,de())).next(u=>({batchId:a,changes:Mk(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new P(n)).next(i=>{let r=_u();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let s=n.collectionGroup,o=_u();return this.indexManager.getCollectionParents(e,s).next(a=>_.forEach(a,c=>{let l=function(d,h){return new Kr(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,Et.newInvalidDocument(u)))});let a=_u();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&bu(u.mutation,l,sn.empty(),Xe.now()),td(n,l)&&(a=a.insert(c,l))}),a})}};var nD=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return _.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ut(r.createTime)}}(n)),_.resolve()}getNamedQuery(e,n){return _.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:eF(r.bundledQuery),readTime:Ut(r.readTime)}}(n)),_.resolve()}};var iD=class{constructor(){this.overlays=new Ve(P.comparator),this.hr=new Map}getOverlay(e,n){return _.resolve(this.overlays.get(n))}getOverlays(e,n){let i=Ai();return _.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),_.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),_.resolve()}getOverlaysForCollection(e,n,i){let r=Ai(),s=n.length+1,o=new P(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return _.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Ve((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>i){let u=s.get(l.largestBatchId);u===null&&(u=Ai(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Ai(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return _.resolve(a)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new ku(n,i));let s=this.hr.get(n);s===void 0&&(s=de(),this.hr.set(n,s)),this.hr.set(n,s.add(i.key))}};var ju=class{constructor(){this.Pr=new Ne(nt.Ir),this.Tr=new Ne(nt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let i=new nt(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new nt(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){let n=new P(new Re([])),i=new nt(n,e),r=new nt(n,e+1),s=[];return this.Tr.forEachInRange([i,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new P(new Re([])),i=new nt(n,e),r=new nt(n,e+1),s=de();return this.Tr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new nt(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},nt=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return P.comparator(e.key,n.key)||se(e.pr,n.pr)}static Er(e,n){return se(e.pr,n.pr)||P.comparator(e.key,n.key)}};var rD=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ne(nt.Ir)}checkEmpty(e){return _.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Ou(s,n,i,r);this.mutationQueue.push(o);for(let a of r)this.wr=this.wr.add(new nt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return _.resolve(o)}lookupMutationBatch(e,n){return _.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.br(i),s=r<0?0:r;return _.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return _.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return _.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new nt(n,0),r=new nt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],o=>{let a=this.Sr(o.pr);s.push(a)}),_.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ne(se);return n.forEach(r=>{let s=new nt(r,0),o=new nt(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{i=i.add(a.pr)})}),_.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,s=i;P.isDocumentKey(s)||(s=s.child(""));let o=new nt(new P(s),0),a=new Ne(se);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.pr)),!0)},o),_.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){B(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return _.forEach(n.mutations,r=>{let s=new nt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){let i=new nt(n,0),r=this.wr.firstAfterOrEqual(i);return _.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,_.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var sD=class{constructor(e){this.vr=e,this.docs=function(){return new Ve(P.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return _.resolve(i?i.document.mutableCopy():Et.newInvalidDocument(n))}getEntries(e,n){let i=on();return n.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Et.newInvalidDocument(r))}),_.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=on(),o=n.path,a=new P(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||YD(uk(u),i)<=0||(r.has(u.key)||td(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return _.resolve(s)}getAllFromCollectionGroup(e,n,i,r){k()}Fr(e,n){return _.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new oD(this)}getSize(e){return _.resolve(this.size)}},oD=class extends Fm{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),_.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var aD=class{constructor(e){this.persistence=e,this.Mr=new Mi(n=>co(n),Ju),this.lastRemoteSnapshotVersion=z.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ju,this.targetCount=0,this.Br=sc.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),_.resolve()}getLastRemoteSnapshotVersion(e){return _.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),_.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),_.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new sc(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,_.resolve()}updateTargetData(e,n){return this.qn(n),_.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,_.resolve()}removeTargets(e,n,i){let r=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),_.waitFor(s).next(()=>r)}getTargetCount(e){return _.resolve(this.targetCount)}getTargetData(e,n){let i=this.Mr.get(n)||null;return _.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),_.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),_.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),_.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Nr.gr(n);return _.resolve(i)}containsKey(e,n){return _.resolve(this.Nr.containsKey(n))}};var Vm=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new rn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new aD(this),this.indexManager=new Gb,this.remoteDocumentCache=function(r){return new sD(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new Rm(n),this.$r=new nD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new iD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Lr[e.toKey()];return i||(i=new rD(n,this.referenceDelegate),this.Lr[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){b("MemoryPersistence","Starting transaction:",e);let r=new cD(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(e,n){return _.or(Object.values(this.Lr).map(i=>()=>i.containsKey(e,n)))}},cD=class extends pm{constructor(e){super(),this.currentSequenceNumber=e}},jm=class t{constructor(e){this.persistence=e,this.zr=new ju,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw k()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),_.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),_.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),_.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _.forEach(this.Jr,i=>{let r=P.fromPath(i);return this.Yr(e,r).next(s=>{s||n.removeEntry(r,z.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return _.or([()=>_.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var lD=class{constructor(e){this.serializer=e}N(e,n,i,r){let s=new mm("createOrUpgrade",n);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dO,{unique:!0}),c.createObjectStore("documentMutations")}(e),QO(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=_.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),QO(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:z.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(s))),i<4&&r>=4&&(i!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").W().next(u=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dO,{unique:!0});let d=l.store("mutations"),h=u.map(f=>d.put(f));return _.waitFor(h)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(o=o.next(()=>this.Xr(s))),i<6&&r>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),i<7&&r>=7&&(o=o.next(()=>this.ti(s))),i<8&&r>=8&&(o=o.next(()=>this.ni(e,s))),i<9&&r>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(o=o.next(()=>this.ri(s))),i<11&&r>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:W6});l.createIndex("collectionPathOverlayIndex",K6,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Q6,{unique:!1})})(e)})),i<13&&r>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:F6});l.createIndex("documentKeyIndex",L6),l.createIndex("collectionGroupIndex",V6)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.si(e,s))),i<15&&r>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:H6}).createIndex("sequenceNumberIndex",z6,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:q6}).createIndex("documentKeyIndex",G6,{unique:!1})}(e))),o}ei(e){let n=0;return e.store("remoteDocuments").Y((i,r)=>{n+=Om(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.W().next(r=>_.forEach(r,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",o).next(a=>_.forEach(a,c=>{B(c.userId===s.userId);let l=Zs(this.serializer,c);return iF(e,s.userId,l).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let s=[];return i.Y((o,a)=>{let c=new Re(o),l=function(d){return[0,Bt(d)]}(c);s.push(n.get(l).next(u=>u?_.resolve():(d=>n.put({targetId:0,path:Bt(d),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>_.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:$6});let i=n.store("collectionParents"),r=new Vu,s=o=>{if(r.add(o)){let a=o.lastSegment(),c=o.popLast();return i.put({collectionId:a,parent:Bt(c)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{let c=new Re(o);return s(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,c],l)=>{let u=Si(a);return s(u.popLast())}))}ri(e){let n=e.store("targets");return n.Y((i,r)=>{let s=vu(r),o=Jk(this.serializer,s);return n.put(o)})}ii(e,n){let i=n.store("remoteDocuments"),r=[];return i.Y((s,o)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new P(Re.fromString(d.document.name).popFirst(5)):d.noDocument?P.fromSegments(d.noDocument.path):d.unknownDocument?P.fromSegments(d.unknownDocument.path):k()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(l))}).next(()=>_.waitFor(r))}si(e,n){let i=n.store("mutations"),r=oF(this.serializer),s=new Vm(jm.Hr,this.serializer.ct);return i.W().next(o=>{let a=new Map;return o.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:de();Zs(this.serializer,c).keys().forEach(d=>u=u.add(d)),a.set(c.userId,u)}),_.forEach(a,(c,l)=>{let u=new ft(l),d=Mm.lt(this.serializer,u),h=s.getIndexManager(u),f=km.lt(u,this.serializer,h,s.referenceDelegate);return new Lm(r,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new Ru(n,rn._e),c).next()})})}};function QO(t){t.createObjectStore("targetDocuments",{keyPath:B6}).createIndex("documentTargetsIndex",U6,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",j6,{unique:!0}),t.createObjectStore("targetGlobal")}var ZI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",uD=class t{constructor(e,n,i,r,s,o,a,c,l,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.oi=s,this.window=o,this.document=a,this._i=l,this.ai=u,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!t.D())throw new R(w.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Xb(this,r),this.Ti=n+"main",this.serializer=new Rm(c),this.Ei=new so(this.Ti,this.ui,new lD(this.serializer)),this.Qr=new Kb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=oF(this.serializer),this.$r=new jb,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,u===!1&&Ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new R(w.FAILED_PRECONDITION,ZI);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new rn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>m(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>m(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>m(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(es(e))return b("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return b("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return yu(e).get("owner").next(n=>_.resolve(this.Si(n)))}bi(e){return sm(e).delete(this.clientId)}Di(){return m(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=pt(n,"clientMetadata");return i.W().next(r=>{let s=this.vi(r,18e5),o=r.filter(a=>s.indexOf(a)===-1);return _.forEach(o,a=>i.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?_.resolve(!0):yu(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new R(w.FAILED_PRECONDITION,ZI);return!1}}return!(!this.networkEnabled||!this.inForeground)||sm(e).W().next(i=>this.vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let s=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&b("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return m(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Ru(e,rn._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Bi()})}vi(e,n){return e.filter(i=>this.Ci(i.updateTimeMs,n)&&!this.Mi(i.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>sm(e).W().next(n=>this.vi(n,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return km.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Wb(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Mm.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,i){b("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",s=function(c){return c===15?Z6:c===14?gk:c===13?mk:c===12?Y6:c===11?pk:void k()}(this.ui),o;return this.Ei.runTransaction(e,r,s,a=>(o=new Ru(a,this.kr?this.kr.next():rn._e),n==="readwrite-primary"?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw Ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new R(w.FAILED_PRECONDITION,dk);return i(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return yu(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new R(w.FAILED_PRECONDITION,ZI)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yu(e).put("owner",n)}static D(){return so.D()}yi(e){let n=yu(e);return n.get("owner").next(i=>this.Si(i)?(b("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):_.resolve())}Ci(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(Ze(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;tE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let i=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return b("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ze("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Ze("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function yu(t){return pt(t,"owner")}function sm(t){return pt(t,"clientMetadata")}function aF(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var dD=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=de(),r=de();for(let s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new t(e,n.fromCache,i,r)}};var hD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Bm=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return tE()?8:so.v(ze())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new hD;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(Ua()<=pe.DEBUG&&b("QueryEngine","SDK will not create cache indexes for query:",$a(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),_.resolve()):(Ua()<=pe.DEBUG&&b("QueryEngine","Query:",$a(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(Ua()<=pe.DEBUG&&b("QueryEngine","The SDK decides to create cache indexes for query:",$a(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,an(n))):_.resolve())}ji(e,n){if(IO(n))return _.resolve(null);let i=an(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Im(n,null,"F"),i=an(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=de(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,Im(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,i,r){return IO(n)||r.isEqual(z.min())?_.resolve(null):this.zi.getDocuments(e,i).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,i,r)?_.resolve(null):(Ua()<=pe.DEBUG&&b("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$a(n)),this.es(e,o,n,lk(r,-1)).next(a=>a))})}Zi(e,n){let i=new Ne(Rk(e));return n.forEach((r,s)=>{td(e,s)&&(i=i.add(s))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(e,n,i){return Ua()<=pe.DEBUG&&b("QueryEngine","Using full collection scan to execute query:",$a(n)),this.zi.getDocumentsMatchingQuery(e,n,Tn.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var fD=class{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new Ve(se),this.rs=new Mi(s=>co(s),Ju),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function cF(t,e,n,i){return new fD(t,e,n,i)}function lF(t,e){return m(this,null,function*(){let n=V(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=de();for(let l of r){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(i,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function P5(t,e){let n=V(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,h=d.keys(),f=_.resolve();return h.forEach(p=>{f=f.next(()=>u.getEntry(c,p)).next(g=>{let v=l.docVersions.get(p);B(v!==null),g.version.compareTo(v)<0&&(d.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),u.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function uF(t){let e=V(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function O5(t,e){let n=V(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let a=[];e.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(It.EMPTY_BYTE_STRING,z.min()).withLastLimboFreeSnapshotVersion(z.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(d,f),function(g,v,E){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(h,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let c=on(),l=de();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(k5(s,o,e.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!i.isEqual(z.min())){let u=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return _.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.ns=r,s))}function k5(t,e,n){let i=de(),r=de();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=on();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(z.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):b("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:r}})}function F5(t,e){let n=V(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Um(t,e){let n=V(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(s=>s?(r=s,_.resolve(r)):n.Qr.allocateTargetId(i).next(o=>(r=new rc(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}function oc(t,e,n){return m(this,null,function*(){let i=V(t),r=i.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!es(o))throw o;b("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function pD(t,e,n){let i=V(t),r=z.min(),s=de();return i.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){let d=V(c),h=d.rs.get(u);return h!==void 0?_.resolve(d.ns.get(h)):d.Qr.getTargetData(l,u)}(i,o,an(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.ts.getDocumentsMatchingQuery(o,e,n?r:z.min(),n?s:de())).next(a=>(fF(i,Ak(e),a),{documents:a,hs:s})))}function dF(t,e){let n=V(t),i=V(n.Qr),r=n.ns.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i._t(s,e).next(o=>o?o.target:null))}function hF(t,e){let n=V(t),i=n.ss.get(e)||z.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.os.getAllFromCollectionGroup(r,e,lk(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(fF(n,e,r),r))}function fF(t,e,n){let i=t.ss.get(e)||z.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.ss.set(e,i)}function YO(t,e){return`firestore_clients_${t}_${e}`}function ZO(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function XI(t,e){return`firestore_targets_${t}_${e}`}var $m=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Es(e,n,i){let r=JSON.parse(i),s,o=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new R(r.error.code,r.error.message))),o?new t(e,n,r.state,s):(Ze("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Du=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Es(e,n){let i=JSON.parse(n),r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new R(i.error.code,i.error.message))),s?new t(e,i.state,r):(Ze("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Hm=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=t0();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=hk(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new t(e,s):(Ze("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},mD=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Ze("SharedClientState",`Failed to parse online state: ${e}`),null)}},Bu=class{constructor(){this.activeTargetIds=t0()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Cu=class{constructor(e,n,i,r,s){this.window=e,this.oi=n,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Ve(se),this.started=!1,this.ys=[];let o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=YO(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Bu),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return m(this,null,function*(){let e=yield this.syncEngine.Li();for(let i of e){if(i===this.Vs)continue;let r=this.getItem(YO(this.persistenceKey,i));if(r){let s=Hm.Es(i,r);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let i=this.xs(n);i&&this.Os(i)}for(let i of this.ys)this.gs(i);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,i){this.Bs(e,n,i),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(XI(this.persistenceKey,e));if(i){let r=Du.Es(e,i);r&&(n=r.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(XI(this.persistenceKey,e))}updateQueryState(e,n,i){this.qs(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Ls(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return b("SharedClientState","READ",e,n),n}setItem(e,n){b("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){b("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(b("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>m(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let i=this.$s(n.key);return this.Us(i,null)}{let i=this.Ws(n.key,n.newValue);if(i)return this.Us(i.clientId,i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let i=this.Gs(n.key,n.newValue);if(i)return this.zs(i)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let i=this.js(n.key,n.newValue);if(i)return this.Hs(i)}}else if(n.key===this.vs){if(n.newValue!==null){let i=this.xs(n.newValue);if(i)return this.Os(i)}}else if(n.key===this.Ss){let i=function(s){let o=rn._e;if(s!=null)try{let a=JSON.parse(s);B(typeof a=="number"),o=a}catch(a){Ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);i!==rn._e&&this.sequenceNumberHandler(i)}else if(n.key===this.Fs){let i=this.Js(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,i){let r=new $m(this.currentUser,e,n,i),s=ZO(this.persistenceKey,this.currentUser,e);this.setItem(s,r.ds())}Ls(e){let n=ZO(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,i){let r=XI(this.persistenceKey,e),s=new Du(e,n,i);this.setItem(r,s.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let i=this.$s(e);return Hm.Es(i,n)}Gs(e,n){let i=this.Ds.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return $m.Es(new ft(s),r,n)}js(e,n){let i=this.Cs.exec(e),r=Number(i[1]);return Du.Es(r,n)}xs(e){return mD.Es(e)}Js(e){return JSON.parse(e)}zs(e){return m(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);b("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let i=n?this.ps.insert(e,n):this.ps.remove(e),r=this.Ns(this.ps),s=this.Ns(i),o=[],a=[];return s.forEach(c=>{r.has(c)||o.push(c)}),r.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=i})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=t0();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},zm=class{constructor(){this.no=new Bu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Bu,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var gD=class{io(e){}shutdown(){}};var qm=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){b("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){b("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var om=null;function JI(){return om===null?om=function(){return 268435456+Math.round(2147483648*Math.random())}():om++,"0x"+om.toString(16)}var L5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var yD=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var Rt="WebChannelConnection",_D=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=i+"://"+n.host,this.po=`projects/${r}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get wo(){return!1}So(n,i,r,s,o){let a=JI(),c=this.bo(n,i.toUriEncodedString());b("RestConnection",`Sending RPC '${n}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,s,o),this.Co(n,c,l,r).then(u=>(b("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Tu("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",r),u})}vo(n,i,r,s,o,a){return this.So(n,i,r,s,o)}Do(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}bo(n,i){let r=L5[n];return`${this.fo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,i,r){let s=JI();return new Promise((o,a)=>{let c=new oO;c.setWithCredentials(!0),c.listenOnce(rO.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case nm.NO_ERROR:let u=c.getResponseJson();b(Rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case nm.TIMEOUT:b(Rt,`RPC '${e}' ${s} timed out`),a(new R(w.DEADLINE_EXCEEDED,"Request time out"));break;case nm.HTTP_ERROR:let d=c.getStatus();if(b(Rt,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let p=function(v){let E=v.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(E)>=0?E:w.UNKNOWN}(f.status);a(new R(p,f.message))}else a(new R(w.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new R(w.UNAVAILABLE,"Connection failed."));break;default:k()}}finally{b(Rt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(r);b(Rt,`RPC '${e}' ${s} sending request:`,r),c.send(n,"POST",l,i,15)})}Fo(e,n,i){let r=JI(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=nO(),a=iO(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;let u=s.join("");b(Rt,`Creating RPC '${e}' stream ${r}: ${u}`,c);let d=o.createWebChannel(u,c),h=!1,f=!1,p=new yD({lo:v=>{f?b(Rt,`Not sending because RPC '${e}' stream ${r} is closed:`,v):(h||(b(Rt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),b(Rt,`RPC '${e}' stream ${r} sending:`,v),d.send(v))},ho:()=>d.close()}),g=(v,E,A)=>{v.listen(E,N=>{try{A(N)}catch(O){setTimeout(()=>{throw O},0)}})};return g(d,fu.EventType.OPEN,()=>{f||b(Rt,`RPC '${e}' stream ${r} transport opened.`)}),g(d,fu.EventType.CLOSE,()=>{f||(f=!0,b(Rt,`RPC '${e}' stream ${r} transport closed`),p.Vo())}),g(d,fu.EventType.ERROR,v=>{f||(f=!0,Tu(Rt,`RPC '${e}' stream ${r} transport errored:`,v),p.Vo(new R(w.UNAVAILABLE,"The operation could not be completed")))}),g(d,fu.EventType.MESSAGE,v=>{var E;if(!f){let A=v.data[0];B(!!A);let N=A,O=N.error||((E=N[0])===null||E===void 0?void 0:E.error);if(O){b(Rt,`RPC '${e}' stream ${r} received error:`,O);let K=O.status,j=function(Mt){let xn=tt[Mt];if(xn!==void 0)return Uk(xn)}(K),ae=O.message;j===void 0&&(j=w.INTERNAL,ae="Unknown error status: "+K+" with message "+O.message),f=!0,p.Vo(new R(j,ae)),d.close()}else b(Rt,`RPC '${e}' stream ${r} received:`,A),p.mo(A)}}),g(a,sO.STAT_EVENT,v=>{v.stat===QI.PROXY?b(Rt,`RPC '${e}' stream ${r} detected buffering proxy`):v.stat===QI.NOPROXY&&b(Rt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}};function pF(){return typeof window<"u"?window:null}function dm(){return typeof document<"u"?document:null}function dg(t){return new Ob(t,!0)}var Gm=class{constructor(e,n,i=1e3,r=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=i,this.xo=r,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),i=Math.max(0,Date.now()-this.Lo),r=Math.max(0,n-i);r>0&&b("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var Wm=class{constructor(e,n,i,r,s,o,a,c){this.oi=e,this.$o=i,this.Uo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Gm(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return m(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return m(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return m(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(Ze(n.toString()),Ze("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===w.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Wo===n&&this.o_(i,r)},i=>{e(()=>{let r=new R(w.UNKNOWN,"Fetching auth token failed: "+i.message);return this.__(r)})})}o_(e,n){let i=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{i(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(r=>{i(()=>this.__(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Yo(){this.state=5,this.jo.qo(()=>m(this,null,function*(){this.state=0,this.start()}))}__(e){return b("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(b("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},vD=class extends Wm{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=I5(this.serializer,e),i=function(s){if(!("targetChange"in s))return z.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?z.min():o.readTime?Ut(o.readTime):z.min()}(e);return this.listener.u_(n,i)}c_(e){let n={};n.database=Lb(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=wm(c)?{documents:Wk(s,c)}:{query:Kk(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$k(s,o.resumeToken);let l=kb(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(z.min())>0){a.readTime=ic(s,o.snapshotVersion.toTimestamp());let l=kb(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let i=D5(this.serializer,e);i&&(n.labels=i),this.t_(n)}l_(e){let n={};n.database=Lb(this.serializer),n.removeTarget=e,this.t_(n)}},wD=class extends Wm{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(B(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=b5(e.writeResults,e.commitTime),i=Ut(e.commitTime);return this.listener.T_(i,n)}return B(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=Lb(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>Am(this.serializer,i))};this.t_(n)}};var ED=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new R(w.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,Fb(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new R(w.UNKNOWN,s.toString())})}vo(e,n,i,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Fb(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new R(w.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var ID=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ze(n),this.g_=!1):b("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var bD=class{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{i.enqueueAndForget(()=>m(this,null,function*(){yo(this)&&(b("RemoteStore","Restarting streams for network reachability change."),yield function(c){return m(this,null,function*(){let l=V(c);l.v_.add(4),yield nd(l),l.x_.set("Unknown"),l.v_.delete(4),yield hg(l)})}(this))}))}),this.x_=new ID(i,r)}};function hg(t){return m(this,null,function*(){if(yo(t))for(let e of t.F_)yield e(!0)})}function nd(t){return m(this,null,function*(){for(let e of t.F_)yield e(!1)})}function fg(t,e){let n=V(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),o0(n)?s0(n):dc(n).Jo()&&r0(n,e))}function Uu(t,e){let n=V(t),i=dc(n);n.C_.delete(e),i.Jo()&&mF(n,e),n.C_.size===0&&(i.Jo()?i.Xo():yo(n)&&n.x_.set("Unknown"))}function r0(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(z.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}dc(t).c_(e)}function mF(t,e){t.O_.Oe(e),dc(t).l_(e)}function s0(t){t.O_=new Pb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),dc(t).start(),t.x_.p_()}function o0(t){return yo(t)&&!dc(t).Ho()&&t.C_.size>0}function yo(t){return V(t).v_.size===0}function gF(t){t.O_=void 0}function V5(t){return m(this,null,function*(){t.C_.forEach((e,n)=>{r0(t,e)})})}function j5(t,e){return m(this,null,function*(){gF(t),o0(t)?(t.x_.S_(e),s0(t)):t.x_.set("Unknown")})}function B5(t,e,n){return m(this,null,function*(){if(t.x_.set("Online"),e instanceof Cm&&e.state===2&&e.cause)try{yield function(r,s){return m(this,null,function*(){let o=s.cause;for(let a of s.targetIds)r.C_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.C_.delete(a),r.O_.removeTarget(a))})}(t,e)}catch(i){b("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Km(t,i)}else if(e instanceof Ka?t.O_.$e(e):e instanceof Dm?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(z.min()))try{let i=yield uF(t.localStore);n.compareTo(i)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.C_.get(l);u&&s.C_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.C_.get(c);if(!u)return;s.C_.set(c,u.withResumeToken(It.EMPTY_BYTE_STRING,u.snapshotVersion)),mF(s,c);let d=new rc(u.target,c,l,u.sequenceNumber);r0(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(i){b("RemoteStore","Failed to raise snapshot:",i),yield Km(t,i)}})}function Km(t,e,n){return m(this,null,function*(){if(!es(e))throw e;t.v_.add(1),yield nd(t),t.x_.set("Offline"),n||(n=()=>uF(t.localStore)),t.asyncQueue.enqueueRetryable(()=>m(this,null,function*(){b("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield hg(t)}))})}function yF(t,e){return e().catch(n=>Km(t,n,e))}function uc(t){return m(this,null,function*(){let e=V(t),n=Xr(e),i=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;U5(e);)try{let r=yield F5(e.localStore,i);if(r===null){e.D_.length===0&&n.Xo();break}i=r.batchId,$5(e,r)}catch(r){yield Km(e,r)}_F(e)&&vF(e)})}function U5(t){return yo(t)&&t.D_.length<10}function $5(t,e){t.D_.push(e);let n=Xr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function _F(t){return yo(t)&&!Xr(t).Ho()&&t.D_.length>0}function vF(t){Xr(t).start()}function H5(t){return m(this,null,function*(){Xr(t).d_()})}function z5(t){return m(this,null,function*(){let e=Xr(t);for(let n of t.D_)e.I_(n.mutations)})}function q5(t,e,n){return m(this,null,function*(){let i=t.D_.shift(),r=xb.from(i,e,n);yield yF(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield uc(t)})}function G5(t,e){return m(this,null,function*(){e&&Xr(t).P_&&(yield function(i,r){return m(this,null,function*(){if(function(o){return p5(o)&&o!==w.ABORTED}(r.code)){let s=i.D_.shift();Xr(i).Zo(),yield yF(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield uc(i)}})}(t,e)),_F(t)&&vF(t)})}function XO(t,e){return m(this,null,function*(){let n=V(t);n.asyncQueue.verifyOperationInProgress(),b("RemoteStore","RemoteStore received new credentials");let i=yo(n);n.v_.add(3),yield nd(n),i&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield hg(n)})}function DD(t,e){return m(this,null,function*(){let n=V(t);e?(n.v_.delete(2),yield hg(n)):e||(n.v_.add(2),yield nd(n),n.x_.set("Unknown"))})}function dc(t){return t.N_||(t.N_=function(n,i,r){let s=V(n);return s.R_(),new vD(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:V5.bind(null,t),To:j5.bind(null,t),u_:B5.bind(null,t)}),t.F_.push(e=>m(this,null,function*(){e?(t.N_.Zo(),o0(t)?s0(t):t.x_.set("Unknown")):(yield t.N_.stop(),gF(t))}))),t.N_}function Xr(t){return t.B_||(t.B_=function(n,i,r){let s=V(n);return s.R_(),new wD(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:H5.bind(null,t),To:G5.bind(null,t),E_:z5.bind(null,t),T_:q5.bind(null,t)}),t.F_.push(e=>m(this,null,function*(){e?(t.B_.Zo(),yield uc(t)):(yield t.B_.stop(),t.D_.length>0&&(b("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}var CD=class t{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Cn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){let o=Date.now()+i,a=new t(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new R(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function a0(t,e){if(Ze("AsyncQueue",`${e}: ${t}`),es(t))return new R(w.UNAVAILABLE,`${e}: ${t}`);throw t}var Qm=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||P.comparator(n.key,i.key):(n,i)=>P.comparator(n.key,i.key),this.keyedMap=_u(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var Ym=class{constructor(){this.L_=new Ve(P.comparator)}track(e){let n=e.doc.key,i=this.L_.get(n);i?e.type!==0&&i.type===3?this.L_=this.L_.insert(n,e):e.type===3&&i.type!==1?this.L_=this.L_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.L_=this.L_.remove(n):e.type===1&&i.type===2?this.L_=this.L_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):k():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,i)=>{e.push(i)}),e}},ac=class t{constructor(e,n,i,r,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,i,r,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Qm.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ug(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var TD=class{constructor(){this.q_=void 0,this.Q_=[]}},SD=class{constructor(){this.queries=new Mi(e=>Sk(e),ug),this.onlineState="Unknown",this.K_=new Set}};function c0(t,e){return m(this,null,function*(){let n=V(t),i=e.query,r=!1,s=n.queries.get(i);if(s||(r=!0,s=new TD),r)try{s.q_=yield n.onListen(i)}catch(o){let a=a0(o,`Initialization of query '${$a(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&u0(n)})}function l0(t,e){return m(this,null,function*(){let n=V(t),i=e.query,r=!1,s=n.queries.get(i);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),r=s.Q_.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)})}function W5(t,e){let n=V(t),i=!1;for(let r of e){let s=r.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.W_(r)&&(i=!0);o.q_=r}}i&&u0(n)}function K5(t,e,n){let i=V(t),r=i.queries.get(e);if(r)for(let s of r.Q_)s.onError(n);i.queries.delete(e)}function u0(t){t.K_.forEach(e=>{e.next()})}var $u=class{constructor(e,n,i){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=i||{}}W_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new ac(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let i=n!=="Offline";return(!this.options.Z_||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=ac.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var Zm=class{constructor(e){this.key=e}},Xm=class{constructor(e){this.key=e}},AD=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=de(),this.mutatedKeys=de(),this.ua=Rk(e),this.ca=new Qm(this.ua)}get la(){return this.oa}ha(e,n){let i=n?n.Pa:new Ym,r=n?n.ca:this.ca,s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{let h=r.get(u),f=td(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(i.track({type:3,doc:f}),v=!0):this.Ia(h,f)||(i.track({type:2,doc:f}),v=!0,(c&&this.ua(f,c)>0||l&&this.ua(f,l)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),v=!0):h&&!f&&(i.track({type:1,doc:h}),v=!0,(c||l)&&(a=!0)),v&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{ca:o,Pa:i,Xi:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let o=e.Pa.k_();o.sort((u,d)=>function(f,p){let g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return k()}};return g(f)-g(p)}(u.type,d.type)||this.ua(u.doc,d.doc)),this.Ta(i),r=r!=null&&r;let a=n&&!r?this.Ea():[],c=this.aa.size===0&&this.current&&!r?1:0,l=c!==this._a;return this._a=c,o.length!==0||l?{snapshot:new ac(this.query,e.ca,s,o,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Ym,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=de(),this.ca.forEach(i=>{this.Aa(i.key)&&(this.aa=this.aa.add(i.key))});let n=[];return e.forEach(i=>{this.aa.has(i)||n.push(new Xm(i))}),this.aa.forEach(i=>{e.has(i)||n.push(new Zm(i))}),n}Ra(e){this.oa=e.hs,this.aa=de();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return ac.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},RD=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},xD=class{constructor(e){this.key=e,this.ma=!1}},MD=class{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Mi(a=>Sk(a),ug),this.pa=new Map,this.ya=new Set,this.wa=new Ve(P.comparator),this.Sa=new Map,this.ba=new ju,this.Da={},this.Ca=new Map,this.va=sc.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function Q5(t,e){return m(this,null,function*(){let n=m0(t),i,r,s=n.ga.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.Va();else{let o=yield Um(n.localStore,an(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=yield d0(n,e,i,a==="current",o.resumeToken),n.isPrimaryClient&&fg(n.remoteStore,o)}return r})}function d0(t,e,n,i,r){return m(this,null,function*(){t.Ma=(d,h,f)=>function(g,v,E,A){return m(this,null,function*(){let N=v.view.ha(E);N.Xi&&(N=yield pD(g.localStore,v.query,!1).then(({documents:ae})=>v.view.ha(ae,N)));let O=A&&A.targetChanges.get(v.targetId),K=A&&A.targetMismatches.get(v.targetId)!=null,j=v.view.applyChanges(N,g.isPrimaryClient,O,K);return ND(g,v.targetId,j.da),j.snapshot})}(t,d,h,f);let s=yield pD(t.localStore,e,!0),o=new AD(e,s.hs),a=o.ha(s.documents),c=Lu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),l=o.applyChanges(a,t.isPrimaryClient,c);ND(t,n,l.da);let u=new RD(e,n,o);return t.ga.set(e,u),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),l.snapshot})}function Y5(t,e){return m(this,null,function*(){let n=V(t),i=n.ga.get(e),r=n.pa.get(i.targetId);if(r.length>1)return n.pa.set(i.targetId,r.filter(s=>!ug(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||(yield oc(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),Uu(n.remoteStore,i.targetId),cc(n,i.targetId)}).catch(Jr))):(cc(n,i.targetId),yield oc(n.localStore,i.targetId,!0))})}function Z5(t,e,n){return m(this,null,function*(){let i=g0(t);try{let r=yield function(o,a){let c=V(o),l=Xe.now(),u=a.reduce((f,p)=>f.add(p.key),de()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=on(),g=de();return c.os.getEntries(f,u).next(v=>{p=v,p.forEach((E,A)=>{A.isValidDocument()||(g=g.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,p)).next(v=>{d=v;let E=[];for(let A of a){let N=f5(A,d.get(A.key).overlayedDocument);N!=null&&E.push(new Hn(A.key,N,vk(N.value.mapValue),wt.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,E,a)}).next(v=>{h=v;let E=v.applyToLocalDocumentSet(d,g);return c.documentOverlayCache.saveOverlays(f,v.batchId,E)})}).then(()=>({batchId:h.batchId,changes:Mk(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let l=o.Da[o.currentUser.toKey()];l||(l=new Ve(se)),l=l.insert(a,c),o.Da[o.currentUser.toKey()]=l}(i,r.batchId,n),yield ts(i,r.changes),yield uc(i.remoteStore)}catch(r){let s=a0(r,"Failed to persist write");n.reject(s)}})}function wF(t,e){return m(this,null,function*(){let n=V(t);try{let i=yield O5(n.localStore,e);e.targetChanges.forEach((r,s)=>{let o=n.Sa.get(s);o&&(B(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.ma=!0:r.modifiedDocuments.size>0?B(o.ma):r.removedDocuments.size>0&&(B(o.ma),o.ma=!1))}),yield ts(n,i,e)}catch(i){yield Jr(i)}})}function JO(t,e,n){let i=V(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ga.forEach((s,o)=>{let a=o.view.U_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){let c=V(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.Q_)h.U_(a)&&(l=!0)}),l&&u0(c)}(i.eventManager,e),r.length&&i.fa.u_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function X5(t,e,n){return m(this,null,function*(){let i=V(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Sa.get(e),s=r&&r.key;if(s){let o=new Ve(P.comparator);o=o.insert(s,Et.newNoDocument(s,z.min()));let a=de().add(s),c=new Fu(z.min(),new Map,new Ve(se),o,a);yield wF(i,c),i.wa=i.wa.remove(s),i.Sa.delete(e),p0(i)}else yield oc(i.localStore,e,!1).then(()=>cc(i,e,n)).catch(Jr)})}function J5(t,e){return m(this,null,function*(){let n=V(t),i=e.batch.batchId;try{let r=yield P5(n.localStore,e);f0(n,i,null),h0(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield ts(n,r)}catch(r){yield Jr(r)}})}function e8(t,e,n){return m(this,null,function*(){let i=V(t);try{let r=yield function(o,a){let c=V(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(B(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(i.localStore,e);f0(i,e,n),h0(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield ts(i,r)}catch(r){yield Jr(r)}})}function h0(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function f0(t,e,n){let i=V(t),r=i.Da[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Da[i.currentUser.toKey()]=r}}function cc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.pa.get(e))t.ga.delete(i),n&&t.fa.xa(i,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(i=>{t.ba.containsKey(i)||EF(t,i)})}function EF(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(Uu(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),p0(t))}function ND(t,e,n){for(let i of n)i instanceof Zm?(t.ba.addReference(i.key,e),t8(t,i)):i instanceof Xm?(b("SyncEngine","Document no longer in limbo: "+i.key),t.ba.removeReference(i.key,e),t.ba.containsKey(i.key)||EF(t,i.key)):k()}function t8(t,e){let n=e.key,i=n.path.canonicalString();t.wa.get(n)||t.ya.has(i)||(b("SyncEngine","New document in limbo: "+n),t.ya.add(i),p0(t))}function p0(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new P(Re.fromString(e)),i=t.va.next();t.Sa.set(i,new xD(n)),t.wa=t.wa.insert(n,i),fg(t.remoteStore,new rc(an(ed(n.path)),i,"TargetPurposeLimboResolution",rn._e))}}function ts(t,e,n){return m(this,null,function*(){let i=V(t),r=[],s=[],o=[];i.ga.isEmpty()||(i.ga.forEach((a,c)=>{o.push(i.Ma(c,e,n).then(l=>{if((l||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){r.push(l);let u=dD.Ki(c.targetId,l);s.push(u)}}))}),yield Promise.all(o),i.fa.u_(r),yield function(c,l){return m(this,null,function*(){let u=V(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>_.forEach(l,h=>_.forEach(h.qi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>_.forEach(h.Qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!es(d))throw d;b("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.ns.get(h),p=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(p);u.ns=u.ns.insert(h,g)}}})}(i.localStore,s))})}function n8(t,e){return m(this,null,function*(){let n=V(t);if(!n.currentUser.isEqual(e)){b("SyncEngine","User change. New user:",e.toKey());let i=yield lF(n.localStore,e);n.currentUser=e,function(s,o){s.Ca.forEach(a=>{a.forEach(c=>{c.reject(new R(w.CANCELLED,o))})}),s.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield ts(n,i.us)}})}function i8(t,e){let n=V(t),i=n.Sa.get(e);if(i&&i.ma)return de().add(i.key);{let r=de(),s=n.pa.get(e);if(!s)return r;for(let o of s){let a=n.ga.get(o);r=r.unionWith(a.view.la)}return r}}function r8(t,e){return m(this,null,function*(){let n=V(t),i=yield pD(n.localStore,e.query,!0),r=e.view.Ra(i);return n.isPrimaryClient&&ND(n,e.targetId,r.da),r})}function s8(t,e){return m(this,null,function*(){let n=V(t);return hF(n.localStore,e).then(i=>ts(n,i))})}function o8(t,e,n,i){return m(this,null,function*(){let r=V(t),s=yield function(a,c){let l=V(a),u=V(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.vn(d,c).next(h=>h?l.localDocuments.getDocuments(d,h):_.resolve(null)))}(r.localStore,e);s!==null?(n==="pending"?yield uc(r.remoteStore):n==="acknowledged"||n==="rejected"?(f0(r,e,i||null),h0(r,e),function(a,c){V(V(a).mutationQueue).Mn(c)}(r.localStore,e)):k(),yield ts(r,s)):b("SyncEngine","Cannot apply mutation batch with id: "+e)})}function a8(t,e){return m(this,null,function*(){let n=V(t);if(m0(n),g0(n),e===!0&&n.Fa!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield ek(n,i.toArray());n.Fa=!0,yield DD(n.remoteStore,!0);for(let s of r)fg(n.remoteStore,s)}else if(e===!1&&n.Fa!==!1){let i=[],r=Promise.resolve();n.pa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(cc(n,o),oc(n.localStore,o,!0))),Uu(n.remoteStore,o)}),yield r,yield ek(n,i),function(o){let a=V(o);a.Sa.forEach((c,l)=>{Uu(a.remoteStore,l)}),a.ba.mr(),a.Sa=new Map,a.wa=new Ve(P.comparator)}(n),n.Fa=!1,yield DD(n.remoteStore,!1)}})}function ek(t,e,n){return m(this,null,function*(){let i=V(t),r=[],s=[];for(let o of e){let a,c=i.pa.get(o);if(c&&c.length!==0){a=yield Um(i.localStore,an(c[0]));for(let l of c){let u=i.ga.get(l),d=yield r8(i,u);d.snapshot&&s.push(d.snapshot)}}else{let l=yield dF(i.localStore,o);a=yield Um(i.localStore,l),yield d0(i,IF(l),o,!1,a.resumeToken)}r.push(a)}return i.fa.u_(s),r})}function IF(t){return Ck(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function c8(t){return function(n){return V(V(n).persistence).Li()}(V(t).localStore)}function l8(t,e,n,i){return m(this,null,function*(){let r=V(t);if(r.Fa)return void b("SyncEngine","Ignoring unexpected query state notification.");let s=r.pa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{let o=yield hF(r.localStore,Ak(s[0])),a=Fu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",It.EMPTY_BYTE_STRING);yield ts(r,o,a);break}case"rejected":yield oc(r.localStore,e,!0),cc(r,e,i);break;default:k()}})}function u8(t,e,n){return m(this,null,function*(){let i=m0(t);if(i.Fa){for(let r of e){if(i.pa.has(r)){b("SyncEngine","Adding an already active target "+r);continue}let s=yield dF(i.localStore,r),o=yield Um(i.localStore,s);yield d0(i,IF(s),o.targetId,!1,o.resumeToken),fg(i.remoteStore,o)}for(let r of n)i.pa.has(r)&&(yield oc(i.localStore,r,!1).then(()=>{Uu(i.remoteStore,r),cc(i,r)}).catch(Jr))}})}function m0(t){let e=V(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=i8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=X5.bind(null,e),e.fa.u_=W5.bind(null,e.eventManager),e.fa.xa=K5.bind(null,e.eventManager),e}function g0(t){let e=V(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=J5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=e8.bind(null,e),e}var Hu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return m(this,null,function*(){this.serializer=dg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return cF(this.persistence,new Bm,e.initialUser,this.serializer)}createPersistence(e){return new Vm(jm.Hr,this.serializer)}createSharedClientState(e){return new zm}terminate(){return m(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Jm=class t extends Hu{constructor(e,n,i){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return m(this,null,function*(){yield Kn(t.prototype,this,"initialize").call(this,e),yield this.Na.initialize(this,e),yield g0(this.Na.syncEngine),yield uc(this.Na.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return cF(this.persistence,new Bm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new Yb(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new fb(n,this.persistence);return new hb(e.asyncQueue,i)}createPersistence(e){let n=aF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new uD(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,pF(),dm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new zm}},PD=class t extends Jm{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return m(this,null,function*(){yield Kn(t.prototype,this,"initialize").call(this,e);let n=this.Na.syncEngine;this.sharedClientState instanceof Cu&&(this.sharedClientState.syncEngine={Zs:o8.bind(null,n),Xs:l8.bind(null,n),eo:u8.bind(null,n),Li:c8.bind(null,n),Ys:s8.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(i=>m(this,null,function*(){yield a8(this.Na.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=pF();if(!Cu.D(n))throw new R(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=aF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Cu(n,e.asyncQueue,i,e.clientId,e.initialUser)}},zu=class{initialize(e,n){return m(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>JO(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=n8.bind(null,this.syncEngine),yield DD(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new SD}()}createDatastore(e){let n=dg(e.databaseInfo.databaseId),i=function(s){return new _D(s)}(e.databaseInfo);return function(s,o,a,c){return new ED(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new bD(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>JO(this.syncEngine,n,0),function(){return qm.D()?new qm:new gD}())}createSyncEngine(e,n){return function(r,s,o,a,c,l,u){let d=new MD(r,s,o,a,c,l);return u&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return m(this,null,function*(){var e;yield function(i){return m(this,null,function*(){let r=V(i);b("RemoteStore","RemoteStore shutting down."),r.v_.add(5),yield nd(r),r.M_.shutdown(),r.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var qu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Ze("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var OD=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=ft.UNAUTHENTICATED,this.clientId=hm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>m(this,null,function*(){b("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(b("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new R(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Cn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=a0(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function eb(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),b("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>m(this,null,function*(){i.isEqual(r)||(yield lF(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function tk(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield h8(t);b("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>XO(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>XO(e.remoteStore,r)),t._onlineComponents=e})}function d8(t){return t.name==="FirebaseError"?t.code===w.FAILED_PRECONDITION||t.code===w.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function h8(t){return m(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){b("FirestoreClient","Using user provided OfflineComponentProvider");try{yield eb(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!d8(n))throw n;Tu("Error using user provided cache. Falling back to memory cache: "+n),yield eb(t,new Hu)}}else b("FirestoreClient","Using default OfflineComponentProvider"),yield eb(t,new Hu);return t._offlineComponents})}function bF(t){return m(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(b("FirestoreClient","Using user provided OnlineComponentProvider"),yield tk(t,t._uninitializedComponentsProvider._online)):(b("FirestoreClient","Using default OnlineComponentProvider"),yield tk(t,new zu))),t._onlineComponents})}function f8(t){return bF(t).then(e=>e.syncEngine)}function eg(t){return m(this,null,function*(){let e=yield bF(t),n=e.eventManager;return n.onListen=Q5.bind(null,e.syncEngine),n.onUnlisten=Y5.bind(null,e.syncEngine),n})}function p8(t,e,n={}){let i=new Cn;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(s,o,a,c,l){let u=new qu({next:h=>{o.enqueueAndForget(()=>l0(s,d));let f=h.docs.has(a);!f&&h.fromCache?l.reject(new R(w.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?l.reject(new R(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new $u(ed(a.path),u,{includeMetadataChanges:!0,Z_:!0});return c0(s,d)}(yield eg(t),t.asyncQueue,e,n,i)})),i.promise}function m8(t,e,n={}){let i=new Cn;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(s,o,a,c,l){let u=new qu({next:h=>{o.enqueueAndForget(()=>l0(s,d)),h.fromCache&&c.source==="server"?l.reject(new R(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new $u(a,u,{includeMetadataChanges:!0,Z_:!0});return c0(s,d)}(yield eg(t),t.asyncQueue,e,n,i)})),i.promise}function DF(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var nk=new Map;function CF(t,e,n){if(!n)throw new R(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function g8(t,e,n,i){if(e===!0&&i===!0)throw new R(w.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ik(t){if(!P.isDocumentKey(t))throw new R(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rk(t){if(P.isDocumentKey(t))throw new R(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":k()}function Wt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new R(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=pg(t);throw new R(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function y8(t,e){if(e<=0)throw new R(w.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var tg=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new R(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new R(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}g8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DF((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new R(w.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new R(w.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new R(w.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Gu=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new R(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new R(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tg(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new ib;switch(i.type){case"firstParty":return new ob(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new R(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=nk.get(n);i&&(b("ComponentProvider","Removing Datastore"),nk.delete(n),i.terminate())}(this),Promise.resolve()}};var Ji=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},xt=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Hr=class t extends Ji{constructor(e,n,i){super(e,n,ed(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new P(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function TF(t,e,...n){if(t=Ue(t),CF("collection","path",e),t instanceof Gu){let i=Re.fromString(e,...n);return rk(i),new Hr(t,null,i)}{if(!(t instanceof xt||t instanceof Hr))throw new R(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Re.fromString(e,...n));return rk(i),new Hr(t.firestore,null,i)}}function y0(t,e,...n){if(t=Ue(t),arguments.length===1&&(e=hm.newId()),CF("doc","path",e),t instanceof Gu){let i=Re.fromString(e,...n);return ik(i),new xt(t,null,new P(i))}{if(!(t instanceof xt||t instanceof Hr))throw new R(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Re.fromString(e,...n));return ik(i),new xt(t.firestore,t instanceof Hr?t.converter:null,new P(i))}}var kD=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Gm(this,"async_queue_retry"),this._u=()=>{let n=dm();n&&b("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=dm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=dm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new Cn;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return m(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!es(e))throw e;b("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(i=>{this.ru=i,this.iu=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Ze("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.iu=!1,i))));return this.Xa=n,n}enqueueAfterDelay(e,n,i){this.au(),this.ou.indexOf(e)>-1&&(n=0);let r=CD.createAndSchedule(this,e,n,i,s=>this.lu(s));return this.nu.push(r),r}au(){this.ru&&k()}verifyOperationInProgress(){}hu(){return m(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};function sk(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Sn=class extends Gu{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new kD}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||AF(this),this._firestoreClient.terminate()}};function SF(t,e,n){n||(n="(default)");let i=kl(t,"firestore");if(i.isInitialized(n)){let r=i.getImmediate({identifier:n}),s=i.getOptions(n);if(Ar(s,e))return r;throw new R(w.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new R(w.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new R(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return i.initialize({options:e,instanceIdentifier:n})}function id(t){return t._firestoreClient||AF(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function AF(t){var e,n,i;let r=t._freezeSettings(),s=function(a,c,l,u){return new pb(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,DF(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new OD(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var Wu=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(It.fromBase64String(e))}catch(n){throw new R(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var mo=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new R(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ku=class{constructor(e){this._methodName=e}};var Qu=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new R(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new R(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}};var _8=/^__.*__$/,FD=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Hn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zr(e,this.data,n,this.fieldTransforms)}},ng=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Hn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function RF(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw k()}}var LD=class t{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Au({path:i,Vu:!1});return r.mu(e),r}fu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Au({path:i,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return rg(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(RF(this.du)&&_8.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},VD=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||dg(e)}Su(e,n,i,r=!1){return new LD({du:e,methodName:n,wu:i,path:st.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function rd(t){let e=t._freezeSettings(),n=dg(t._databaseId);return new VD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _0(t,e,n,i,r,s={}){let o=t.Su(s.merge||s.mergeFields?2:0,e,n,r);v0("Data must be an object, but it was:",o,i);let a=NF(i,o),c,l;if(s.merge)c=new sn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let h=jD(e,d,n);if(!o.contains(h))throw new R(w.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);OF(u,h)||u.push(h)}c=new sn(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new FD(new jt(a),c,l)}var ig=class t extends Ku{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function xF(t,e,n,i){let r=t.Su(1,e,n);v0("Data must be an object, but it was:",r,i);let s=[],o=jt.empty();go(i,(c,l)=>{let u=w0(e,c,n);l=Ue(l);let d=r.fu(u);if(l instanceof ig)s.push(u);else{let h=sd(l,d);h!=null&&(s.push(u),o.set(u,h))}});let a=new sn(s);return new ng(o,a,r.fieldTransforms)}function MF(t,e,n,i,r,s){let o=t.Su(1,e,n),a=[jD(e,i,n)],c=[r];if(s.length%2!=0)throw new R(w.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(jD(e,s[h])),c.push(s[h+1]);let l=[],u=jt.empty();for(let h=a.length-1;h>=0;--h)if(!OF(l,a[h])){let f=a[h],p=c[h];p=Ue(p);let g=o.fu(f);if(p instanceof ig)l.push(f);else{let v=sd(p,g);v!=null&&(l.push(f),u.set(f,v))}}let d=new sn(l);return new ng(u,d,o.fieldTransforms)}function v8(t,e,n,i=!1){return sd(n,t.Su(i?4:3,e))}function sd(t,e){if(PF(t=Ue(t)))return v0("Unsupported field value:",e,t),NF(t,e);if(t instanceof Ku)return function(i,r){if(!RF(r.du))throw r.pu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.pu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let a of i){let c=sd(a,r.gu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Ue(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return c5(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=Xe.fromDate(i);return{timestampValue:ic(r.serializer,s)}}if(i instanceof Xe){let s=new Xe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ic(r.serializer,s)}}if(i instanceof Qu)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Wu)return{bytesValue:$k(r.serializer,i._byteString)};if(i instanceof xt){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:n0(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.pu(`Unsupported field value: ${pg(i)}`)}(t,e)}function NF(t,e){let n={};return yk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(t,(i,r)=>{let s=sd(r,e.Ru(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function PF(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Qu||t instanceof Wu||t instanceof xt||t instanceof Ku)}function v0(t,e,n){if(!PF(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=pg(n);throw i==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+i)}}function jD(t,e,n){if((e=Ue(e))instanceof mo)return e._internalPath;if(typeof e=="string")return w0(t,e);throw rg("Field path arguments must be of type string or ",t,!1,void 0,n)}var w8=new RegExp("[~\\*/\\[\\]]");function w0(t,e,n){if(e.search(w8)>=0)throw rg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mo(...e.split("."))._internalPath}catch{throw rg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rg(t,e,n,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new R(w.INVALID_ARGUMENT,a+t+c)}function OF(t,e){return t.some(n=>n.isEqual(e))}var sg=class{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new BD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(mg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},BD=class extends sg{data(){return super.data()}};function mg(t,e){return typeof e=="string"?w0(t,e):e instanceof mo?e._internalPath:e._delegate._internalPath}function kF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new R(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Yu=class{},Zu=class extends Yu{};function FF(t,e,...n){let i=[];e instanceof Yu&&i.push(e),i=i.concat(n),function(s){let o=s.filter(c=>c instanceof UD).length,a=s.filter(c=>c instanceof og).length;if(o>1||o>0&&a>0)throw new R(w.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var og=class t extends Zu{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return BF(e._query,n),new Ji(e.firestore,e.converter,Sb(e._query,n))}_parse(e){let n=rd(e.firestore);return function(s,o,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new R(w.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){ak(d,u);let f=[];for(let p of d)f.push(ok(c,s,p));h={arrayValue:{values:f}}}else h=ok(c,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||ak(d,u),h=v8(a,o,d,u==="in"||u==="not-in");return ge.create(l,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function LF(t,e,n){let i=e,r=mg("where",t);return og._create(r,i,n)}var UD=class t extends Yu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Se.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r,a=s.getFlattenedFilters();for(let c of a)BF(o,c),o=Sb(o,c)}(e._query,n),new Ji(e.firestore,e.converter,Sb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var $D=class t extends Zu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,s,o){if(r.startAt!==null)throw new R(w.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new R(w.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ao(s,o)}(e._query,this._field,this._direction);return new Ji(e.firestore,e.converter,function(r,s){let o=r.explicitOrderBy.concat([s]);return new Kr(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function VF(t,e="asc"){let n=e,i=mg("orderBy",t);return $D._create(i,n)}var HD=class t extends Zu{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new Ji(e.firestore,e.converter,Im(e._query,this._limit,this._limitType))}};function jF(t){return y8("limit",t),HD._create("limit",t,"F")}function ok(t,e,n){if(typeof(n=Ue(n))=="string"){if(n==="")throw new R(w.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tk(e)&&n.indexOf("/")!==-1)throw new R(w.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(Re.fromString(n));if(!P.isDocumentKey(i))throw new R(w.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Nu(t,new P(i))}if(n instanceof xt)return Nu(t,n._key);throw new R(w.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pg(n)}.`)}function ak(t,e){if(!Array.isArray(t)||t.length===0)throw new R(w.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BF(t,e){let n=function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new R(w.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new R(w.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var zD=class{convertValue(e,n="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw k()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return go(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new Qu(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=JD(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){let n=zr(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=Re.fromString(e);B(Xk(i));let r=new Xa(i.get(1),i.get(3)),s=new P(i.popFirst(5));return r.isEqual(n)||Ze(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function E0(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var to=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ag=class extends sg{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Qa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(mg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Qa=class extends ag{data(e={}){return super.data(e)}},cg=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new to(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Qa(this._firestore,this._userDataWriter,i.key,i,new to(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new R(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new Qa(r._firestore,r._userDataWriter,a.doc.key,a.doc,new to(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Qa(r._firestore,r._userDataWriter,a.doc.key,a.doc,new to(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:E8(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function E8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return k()}}function UF(t){t=Wt(t,xt);let e=Wt(t.firestore,Sn);return p8(id(e),t._key).then(n=>WF(e,t,n))}var Xu=class extends zD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}};function $F(t){t=Wt(t,Ji);let e=Wt(t.firestore,Sn),n=id(e),i=new Xu(e);return kF(t._query),m8(n,t._query).then(r=>new cg(e,i,t,r))}function HF(t,e,n){t=Wt(t,xt);let i=Wt(t.firestore,Sn),r=E0(t.converter,e,n);return od(i,[_0(rd(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,wt.none())])}function zF(t,e,n,...i){t=Wt(t,xt);let r=Wt(t.firestore,Sn),s=rd(r),o;return o=typeof(e=Ue(e))=="string"||e instanceof mo?MF(s,"updateDoc",t._key,e,n,i):xF(s,"updateDoc",t._key,e),od(r,[o.toMutation(t._key,wt.exists(!0))])}function qF(t){return od(Wt(t.firestore,Sn),[new ho(t._key,wt.none())])}function GF(t,e){let n=Wt(t.firestore,Sn),i=y0(t),r=E0(t.converter,e);return od(n,[_0(rd(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,wt.exists(!1))]).then(()=>i)}function I0(t,...e){var n,i,r;t=Ue(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||sk(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges};if(sk(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let c,l,u;if(t instanceof xt)l=Wt(t.firestore,Sn),u=ed(t._key.path),c={next:d=>{e[o]&&e[o](WF(l,t,d))},error:e[o+1],complete:e[o+2]};else{let d=Wt(t,Ji);l=Wt(d.firestore,Sn),u=d._query;let h=new Xu(l);c={next:f=>{e[o]&&e[o](new cg(l,h,d,f))},error:e[o+1],complete:e[o+2]},kF(t._query)}return function(h,f,p,g){let v=new qu(g),E=new $u(f,v,p);return h.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return c0(yield eg(h),E)})),()=>{v.La(),h.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return l0(yield eg(h),E)}))}}(id(l),u,a,c)}function od(t,e){return function(i,r){let s=new Cn;return i.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return Z5(yield f8(i),r,s)})),s.promise}(id(t),e)}function WF(t,e,n){let i=n.docs.get(e._key),r=new Xu(t);return new ag(t,r,e._key,i,new to(n.hasPendingWrites,n.fromCache),e.converter)}var qD=class{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=QF(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}};function KF(t){return new qD(t)}var GD=class{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new zu,this._offlineComponentProvider=new Jm(this._onlineComponentProvider,e?.cacheSizeBytes,this.forceOwnership)}},WD=class{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new zu,this._offlineComponentProvider=new PD(this._onlineComponentProvider,e?.cacheSizeBytes)}};function QF(t){return new GD(t?.forceOwnership)}function YF(){return new WD}var KD=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=rd(e)}set(e,n,i){this._verifyNotCommitted();let r=tb(e,this._firestore),s=E0(r.converter,n,i),o=_0(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,wt.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let s=tb(e,this._firestore),o;return o=typeof(n=Ue(n))=="string"||n instanceof mo?MF(this._dataReader,"WriteBatch.update",s._key,n,i,r):xF(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,wt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=tb(e,this._firestore);return this._mutations=this._mutations.concat(new ho(n._key,wt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new R(w.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function tb(t,e){if((t=Ue(t)).firestore!==e)throw new R(w.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function ZF(t){return id(t=Wt(t,Sn)),new KD(t,e=>od(t,e))}(function(e,n=!0){(function(r){lc=r})(Nr),Mr(new En("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new Sn(new rb(i.getProvider("auth-internal")),new cb(i.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new R(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xa(l.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),rt(cO,"4.4.1",e),rt(cO,"4.4.1","esm2017")})();var gg=function(){return gg=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gg.apply(this,arguments)};var C8={includeMetadataChanges:!1};function b0(t,e){return e===void 0&&(e=C8),new W(function(n){var i=I0(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:i}})}function XF(t){return b0(t,{includeMetadataChanges:!0})}function JF(t,e){return e===void 0&&(e={}),XF(t).pipe(ee(function(n){return D0(n,e)}))}function D0(t,e){var n;e===void 0&&(e={});var i=t.data(e);return!t.exists()||typeof i!="object"||i===null||!e.idField?i:gg(gg({},i),(n={},n[e.idField]=t.id,n))}function e1(t){return b0(t,{includeMetadataChanges:!0}).pipe(ee(function(e){return e.docs}))}function t1(t,e){return e===void 0&&(e={}),e1(t).pipe(ee(function(n){return n.map(function(i){return D0(i,e)})}))}var ad=class{constructor(e){return e}},n1="firestore",C0=class{constructor(){return Fl(n1)}};var T0=new x("angularfire2.firestore-instances");function T8(t,e){let n=rp(n1,t,e);return n&&new ad(n)}function S8(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new ad(i)}}var A8={provide:C0,deps:[[new yt,T0]]},R8={provide:ad,useFactory:T8,deps:[[new yt,T0],Gi]},x8=(()=>{class t{constructor(){rt("angularfire",Vs.full,"fst")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=re({type:t});static \u0275inj=ie({providers:[R8,A8]})}return t})();function vle(t,...e){return{ngModule:x8,providers:[{provide:T0,useFactory:S8(t),multi:!0,deps:[L,Me,Sa,js,[new yt,zl],[new yt,Ta],...e]}]}}var wle=Ce(t1,!0);var Ele=Ce(JF,!0);var Ile=Ce(GF,!0);var ble=Ce(TF,!0);var Dle=Ce(qF,!0);var Cle=Ce(y0,!0);var Tle=Ce(UF,!0);var Sle=Ce($F,!0);var Ale=Ce(SF,!0),Rle=Ce(jF,!0);var xle=Ce(VF,!0),Mle=Ce(KF,!0),Nle=Ce(YF,!0);var Ple=Ce(FF,!0);var Ole=Ce(HF,!0);var kle=Ce(zF,!0);var Fle=Ce(LF,!0),Lle=Ce(ZF,!0);var oe=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(oe||{}),Ni="*";function Ble(t,e){return{type:oe.Trigger,name:t,definitions:e,options:{}}}function Ule(t,e=null){return{type:oe.Animate,styles:e,timings:t}}function i1(t,e=null){return{type:oe.Sequence,steps:t,options:e}}function S0(t){return{type:oe.Style,styles:t,offset:null}}function $le(t,e,n){return{type:oe.State,name:t,styles:e,options:n}}function Hle(t){return{type:oe.Keyframes,steps:t}}function zle(t,e,n=null){return{type:oe.Transition,expr:t,animation:e,options:n}}var ns=class{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},cd=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,i=0,r=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,n/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((n,i)=>n===null||i.totalTime>n.totalTime?i:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},yg="!";function r1(t){return new S(3e3,!1)}function M8(){return new S(3100,!1)}function N8(){return new S(3101,!1)}function P8(t){return new S(3001,!1)}function O8(t){return new S(3003,!1)}function k8(t){return new S(3004,!1)}function F8(t,e){return new S(3005,!1)}function L8(){return new S(3006,!1)}function V8(){return new S(3007,!1)}function j8(t,e){return new S(3008,!1)}function B8(t){return new S(3002,!1)}function U8(t,e,n,i,r){return new S(3010,!1)}function $8(){return new S(3011,!1)}function H8(){return new S(3012,!1)}function z8(){return new S(3200,!1)}function q8(){return new S(3202,!1)}function G8(){return new S(3013,!1)}function W8(t){return new S(3014,!1)}function K8(t){return new S(3015,!1)}function Q8(t){return new S(3016,!1)}function Y8(t,e){return new S(3404,!1)}function Z8(t){return new S(3502,!1)}function X8(t){return new S(3503,!1)}function J8(){return new S(3300,!1)}function eK(t){return new S(3504,!1)}function tK(t){return new S(3301,!1)}function nK(t,e){return new S(3302,!1)}function iK(t){return new S(3303,!1)}function rK(t,e){return new S(3400,!1)}function sK(t){return new S(3401,!1)}function oK(t){return new S(3402,!1)}function aK(t,e){return new S(3505,!1)}function is(t){switch(t.length){case 0:return new ns;case 1:return t[0];default:return new cd(t)}}function _1(t,e,n=new Map,i=new Map){let r=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==o,d=u&&a||new Map;c.forEach((h,f)=>{let p=f,g=h;if(f!=="offset")switch(p=t.normalizePropertyName(p,r),g){case yg:g=n.get(f);break;case Ni:g=i.get(f);break;default:g=t.normalizeStyleValue(f,p,g,r);break}d.set(p,g)}),u||s.push(d),a=d,o=l}),r.length)throw Z8(r);return s}function Q0(t,e,n,i){switch(e){case"start":t.onStart(()=>i(n&&A0(n,"start",t)));break;case"done":t.onDone(()=>i(n&&A0(n,"done",t)));break;case"destroy":t.onDestroy(()=>i(n&&A0(n,"destroy",t)));break}}function A0(t,e,n){let i=n.totalTime,r=!!n.disabled,s=Y0(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,i??t.totalTime,r),o=t._data;return o!=null&&(s._data=o),s}function Y0(t,e,n,i,r="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function ln(t,e,n){let i=t.get(e);return i||t.set(e,i=n),i}function s1(t){let e=t.indexOf(":"),n=t.substring(1,e),i=t.slice(e+1);return[n,i]}var cK=typeof document>"u"?null:document.documentElement;function Z0(t){let e=t.parentNode||t.host||null;return e===cK?null:e}function lK(t){return t.substring(1,6)=="ebkit"}var _o=null,o1=!1;function uK(t){_o||(_o=dK()||{},o1=_o.style?"WebkitAppearance"in _o.style:!1);let e=!0;return _o.style&&!lK(t)&&(e=t in _o.style,!e&&o1&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in _o.style)),e}function dK(){return typeof document<"u"?document.body:null}function v1(t,e){for(;e;){if(e===t)return!0;e=Z0(e)}return!1}function w1(t,e,n){if(n)return Array.from(t.querySelectorAll(e));let i=t.querySelector(e);return i?[i]:[]}var X0=(()=>{let e=class e{validateStyleProperty(i){return uK(i)}matchesElement(i,r){return!1}containsElement(i,r){return v1(i,r)}getParentElement(i){return Z0(i)}query(i,r,s){return w1(i,r,s)}computeStyle(i,r,s){return s||""}animate(i,r,s,o,a,c=[],l){return new ns(s,o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),md=(()=>{let e=class e{};e.NOOP=new X0;let t=e;return t})(),Eo=class{};var hK=1e3,E1="{{",fK="}}",I1="ng-enter",O0="ng-leave",_g="ng-trigger",bg=".ng-trigger",a1="ng-animating",k0=".ng-animating";function er(t){if(typeof t=="number")return t;let e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:F0(parseFloat(e[1]),e[2])}function F0(t,e){switch(e){case"s":return t*hK;default:return t}}function Dg(t,e,n){return t.hasOwnProperty("duration")?t:pK(t,e,n)}function pK(t,e,n){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,s=0,o="";if(typeof t=="string"){let a=t.match(i);if(a===null)return e.push(r1(t)),{duration:0,delay:0,easing:""};r=F0(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(s=F0(parseFloat(c),a[4]));let l=a[5];l&&(o=l)}else r=t;if(!n){let a=!1,c=e.length;r<0&&(e.push(M8()),a=!0),s<0&&(e.push(N8()),a=!0),a&&e.splice(c,0,r1(t))}return{duration:r,delay:s,easing:o}}function mK(t){return t.length?t[0]instanceof Map?t:t.map(e=>new Map(Object.entries(e))):[]}function Pi(t,e,n){e.forEach((i,r)=>{let s=J0(r);n&&!n.has(r)&&n.set(r,t.style[s]),t.style[s]=i})}function wo(t,e){e.forEach((n,i)=>{let r=J0(i);t.style[r]=""})}function ld(t){return Array.isArray(t)?t.length==1?t[0]:i1(t):t}function gK(t,e,n){let i=e.params||{},r=b1(t);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||n.push(P8(s))})}var L0=new RegExp(`${E1}\\s*(.+?)\\s*${fK}`,"g");function b1(t){let e=[];if(typeof t=="string"){let n;for(;n=L0.exec(t);)e.push(n[1]);L0.lastIndex=0}return e}function dd(t,e,n){let i=`${t}`,r=i.replace(L0,(s,o)=>{let a=e[o];return a==null&&(n.push(O8(o)),a=""),a.toString()});return r==i?t:r}var yK=/-+([a-z0-9])/g;function J0(t){return t.replace(yK,(...e)=>e[1].toUpperCase())}function _K(t,e){return t===0||e===0}function vK(t,e,n){if(n.size&&e.length){let i=e[0],r=[];if(n.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,eC(t,a)))}}return e}function cn(t,e,n){switch(e.type){case oe.Trigger:return t.visitTrigger(e,n);case oe.State:return t.visitState(e,n);case oe.Transition:return t.visitTransition(e,n);case oe.Sequence:return t.visitSequence(e,n);case oe.Group:return t.visitGroup(e,n);case oe.Animate:return t.visitAnimate(e,n);case oe.Keyframes:return t.visitKeyframes(e,n);case oe.Style:return t.visitStyle(e,n);case oe.Reference:return t.visitReference(e,n);case oe.AnimateChild:return t.visitAnimateChild(e,n);case oe.AnimateRef:return t.visitAnimateRef(e,n);case oe.Query:return t.visitQuery(e,n);case oe.Stagger:return t.visitStagger(e,n);default:throw k8(e.type)}}function eC(t,e){return window.getComputedStyle(t)[e]}var wK=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Cg=class extends Eo{normalizePropertyName(e,n){return J0(e)}normalizeStyleValue(e,n,i,r){let s="",o=i.toString().trim();if(wK.has(n)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(F8(e,i))}return o+s}};var Tg="*";function EK(t,e){let n=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(i=>IK(i,n,e)):n.push(t),n}function IK(t,e,n){if(t[0]==":"){let c=bK(t,n);if(typeof c=="function"){e.push(c);return}t=c}let i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return n.push(K8(t)),e;let r=i[1],s=i[2],o=i[3];e.push(c1(r,o));let a=r==Tg&&o==Tg;s[0]=="<"&&!a&&e.push(c1(o,r))}function bK(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,i)=>parseFloat(i)>parseFloat(n);case":decrement":return(n,i)=>parseFloat(i)<parseFloat(n);default:return e.push(Q8(t)),"* => *"}}var vg=new Set(["true","1"]),wg=new Set(["false","0"]);function c1(t,e){let n=vg.has(t)||wg.has(t),i=vg.has(e)||wg.has(e);return(r,s)=>{let o=t==Tg||t==r,a=e==Tg||e==s;return!o&&n&&typeof r=="boolean"&&(o=r?vg.has(t):wg.has(t)),!a&&i&&typeof s=="boolean"&&(a=s?vg.has(e):wg.has(e)),o&&a}}var D1=":self",DK=new RegExp(`s*${D1}s*,?`,"g");function C1(t,e,n,i){return new V0(t).build(e,n,i)}var l1="",V0=class{constructor(e){this._driver=e}build(e,n,i){let r=new j0(n);return this._resetContextStyleTimingState(r),cn(this,ld(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=l1,e.collectedStyles=new Map,e.collectedStyles.set(l1,new Map),e.currentTime=0}visitTrigger(e,n){let i=n.queryCount=0,r=n.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&n.errors.push(L8()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),a.type==oe.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,n))}),c.name=l}else if(a.type==oe.Transition){let c=this.visitTransition(a,n);i+=c.queryCount,r+=c.depCount,o.push(c)}else n.errors.push(V8())}),{type:oe.Trigger,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,n){let i=this.visitStyle(e.styles,n),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{b1(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&n.errors.push(j8(e.name,[...s.values()]))}return{type:oe.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;let i=cn(this,ld(e.animation),n),r=EK(e.expr,n.errors);return{type:oe.Transition,matchers:r,animation:i,queryCount:n.queryCount,depCount:n.depCount,options:vo(e.options)}}visitSequence(e,n){return{type:oe.Sequence,steps:e.steps.map(i=>cn(this,i,n)),options:vo(e.options)}}visitGroup(e,n){let i=n.currentTime,r=0,s=e.steps.map(o=>{n.currentTime=i;let a=cn(this,o,n);return r=Math.max(r,n.currentTime),a});return n.currentTime=r,{type:oe.Group,steps:s,options:vo(e.options)}}visitAnimate(e,n){let i=AK(e.timings,n.errors);n.currentAnimateTimings=i;let r,s=e.styles?e.styles:S0({});if(s.type==oe.Keyframes)r=this.visitKeyframes(s,n);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};i.easing&&(l.easing=i.easing),o=S0(l)}n.currentTime+=i.duration+i.delay;let c=this.visitStyle(o,n);c.isEmptyStep=a,r=c}return n.currentAnimateTimings=null,{type:oe.Animate,timings:i,style:r,options:null}}visitStyle(e,n){let i=this._makeStyleAst(e,n);return this._validateStyleAst(i,n),i}_makeStyleAst(e,n){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===Ni?i.push(a):n.errors.push(B8(a)):i.push(new Map(Object.entries(a)));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(E1)>=0){s=!0;break}}}),{type:oe.Style,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,n){let i=n.currentAnimateTimings,r=n.currentTime,s=n.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=n.collectedStyles.get(n.currentQuerySelector),u=l.get(c),d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(n.errors.push(U8(c,u.startTime,u.endTime,s,r)),d=!1),s=u.startTime),d&&l.set(c,{startTime:s,endTime:r}),n.options&&gK(a,n.options,n.errors)})})}visitKeyframes(e,n){let i={type:oe.Keyframes,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push($8()),i;let r=1,s=0,o=[],a=!1,c=!1,l=0,u=e.steps.map(E=>{let A=this._makeStyleAst(E,n),N=A.offset!=null?A.offset:SK(A.styles),O=0;return N!=null&&(s++,O=A.offset=N),c=c||O<0||O>1,a=a||O<l,l=O,o.push(O),A});c&&n.errors.push(H8()),a&&n.errors.push(z8());let d=e.steps.length,h=0;s>0&&s<d?n.errors.push(q8()):s==0&&(h=r/(d-1));let f=d-1,p=n.currentTime,g=n.currentAnimateTimings,v=g.duration;return u.forEach((E,A)=>{let N=h>0?A==f?1:h*A:o[A],O=N*v;n.currentTime=p+g.delay+O,g.duration=O,this._validateStyleAst(E,n),E.offset=N,i.styles.push(E)}),i}visitReference(e,n){return{type:oe.Reference,animation:cn(this,ld(e.animation),n),options:vo(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:oe.AnimateChild,options:vo(e.options)}}visitAnimateRef(e,n){return{type:oe.AnimateRef,animation:this.visitReference(e.animation,n),options:vo(e.options)}}visitQuery(e,n){let i=n.currentQuerySelector,r=e.options||{};n.queryCount++,n.currentQuery=e;let[s,o]=CK(e.selector);n.currentQuerySelector=i.length?i+" "+s:s,ln(n.collectedStyles,n.currentQuerySelector,new Map);let a=cn(this,ld(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=i,{type:oe.Query,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:vo(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(G8());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Dg(e.timings,n.errors,!0);return{type:oe.Stagger,animation:cn(this,ld(e.animation),n),timings:i,options:null}}};function CK(t){let e=!!t.split(/\s*,\s*/).find(n=>n==D1);return e&&(t=t.replace(DK,"")),t=t.replace(/@\*/g,bg).replace(/@\w+/g,n=>bg+"-"+n.slice(1)).replace(/:animating/g,k0),[t,e]}function TK(t){return t?I({},t):null}var j0=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function SK(t){if(typeof t=="string")return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){let i=n;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}function AK(t,e){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let s=Dg(t,e).duration;return R0(s,0,"")}let n=t;if(n.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=R0(0,0,"");return s.dynamic=!0,s.strValue=n,s}let r=Dg(n,e);return R0(r.duration,r.delay,r.easing)}function vo(t){return t?(t=I({},t),t.params&&(t.params=TK(t.params))):t={},t}function R0(t,e,n){return{duration:t,delay:e,easing:n}}function tC(t,e,n,i,r,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}var hd=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}},RK=1,xK=":enter",MK=new RegExp(xK,"g"),NK=":leave",PK=new RegExp(NK,"g");function T1(t,e,n,i,r,s=new Map,o=new Map,a,c,l=[]){return new B0().buildKeyframes(t,e,n,i,r,s,o,a,c,l)}var B0=class{buildKeyframes(e,n,i,r,s,o,a,c,l,u=[]){l=l||new hd;let d=new U0(e,n,l,r,s,u,[]);d.options=c;let h=c.delay?er(c.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,c),cn(this,i,d);let f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let g=f.length-1;g>=0;g--){let v=f[g];if(v.element===n){p=v;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,c)}return f.length?f.map(p=>p.buildKeyframes()):[tC(n,[],[],[],0,h,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){let i=n.subInstructions.get(n.element);if(i){let r=n.createSubContext(e.options),s=n.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&n.transformIntoNewTimeline(o)}n.previousNode=e}visitAnimateRef(e,n){let i=n.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,i),this.visitReference(e.animation,i),n.transformIntoNewTimeline(i.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,i){for(let r of e){let s=r?.delay;if(s){let o=typeof s=="number"?s:er(dd(s,r?.params??{},n.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,n,i){let s=n.currentTimeline.currentTime,o=i.duration!=null?er(i.duration):null,a=i.delay!=null?er(i.delay):null;return o!==0&&e.forEach(c=>{let l=n.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,n){n.updateOptions(e.options,!0),cn(this,e.animation,n),n.previousNode=e}visitSequence(e,n){let i=n.subContextCount,r=n,s=e.options;if(s&&(s.params||s.delay)&&(r=n.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==oe.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Sg);let o=er(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>cn(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){let i=[],r=n.currentTimeline.currentTime,s=e.options&&e.options.delay?er(e.options.delay):0;e.steps.forEach(o=>{let a=n.createSubContext(e.options);s&&a.delayNextStep(s),cn(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>n.currentTimeline.mergeTimelineCollectedStyles(o)),n.transformIntoNewTimeline(r),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){let i=e.strValue,r=n.params?dd(i,n.params,n.errors):i;return Dg(r,n.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){let i=n.currentAnimateTimings=this._visitTiming(e.timings,n),r=n.currentTimeline;i.delay&&(n.incrementTime(i.delay),r.snapshotCurrentStyles());let s=e.style;s.type==oe.Keyframes?this.visitKeyframes(s,n):(n.incrementTime(i.duration),this.visitStyle(s,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){let i=n.currentTimeline,r=n.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){let i=n.currentAnimateTimings,r=n.currentTimeline.duration,s=i.duration,a=n.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(r+s),n.previousNode=e}visitQuery(e,n){let i=n.currentTimeline.currentTime,r=e.options||{},s=r.delay?er(r.delay):0;s&&(n.previousNode.type===oe.Style||i==0&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Sg);let o=i,a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{n.currentQueryIndex=u;let d=n.createSubContext(e.options,l);s&&d.delayNextStep(s),l===n.element&&(c=d.currentTimeline),cn(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let h=d.currentTimeline.currentTime;o=Math.max(o,h)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),c&&(n.currentTimeline.mergeTimelineCollectedStyles(c),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){let i=n.parentContext,r=n.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(n.currentQueryTotal-1),c=o*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime;break}let u=n.currentTimeline;c&&u.delayNextStep(c);let d=u.currentTime;cn(this,e.animation,n),n.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}},Sg={},U0=class t{constructor(e,n,i,r,s,o,a,c){this._driver=e,this.element=n,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Sg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Ag(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=er(i.duration)),i.delay!=null&&(r.delay=er(i.delay));let s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!n||!o.hasOwnProperty(a))&&(o[a]=dd(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let n=this.options.params;if(n){let i=e.params={};Object.keys(n).forEach(r=>{i[r]=n[r]})}}return e}createSubContext(e=null,n,i){let r=n||this.element,s=new t(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Sg,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,i){let r={duration:n??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new $0(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(MK,"."+this._enterClassName),e=e.replace(PK,"."+this._leaveClassName);let c=i!=1,l=this._driver.query(this.element,e,c);i!==0&&(l=i<0?l.slice(l.length+i,l.length):l.slice(0,i)),a.push(...l)}return!s&&a.length==0&&o.push(W8(n)),a}},Ag=class t{constructor(e,n,i,r){this._driver=e,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let n=this._keyframes.size===1&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=RK,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,i]of this._globalTimelineStyles)this._backFill.set(n,i||Ni),this._currentKeyframe.set(n,Ni);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,i,r){n&&this._previousKeyframe.set("easing",n);let s=r&&r.params||{},o=OK(e,this._globalTimelineStyles);for(let[a,c]of o){let l=dd(c,s,i);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ni),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,i)=>{let r=this._styleSummary.get(i);(!r||n.time>r.time)&&this._updateStyle(i,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,n=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((u,d)=>{u===yg?e.add(d):u===Ni&&n.add(d)}),i||l.set("offset",c/this.duration),r.push(l)});let s=[...e.values()],o=[...n.values()];if(i){let a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return tC(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}},$0=class extends Ag{constructor(e,n,i,r,s,o,a=!1){super(e,n,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&n){let s=[],o=i+n,a=n/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",u1(a)),s.push(l);let u=e.length-1;for(let d=1;d<=u;d++){let h=new Map(e[d]),f=h.get("offset"),p=n+f*i;h.set("offset",u1(p/o)),s.push(h)}i=o,n=0,r="",e=s}return tC(this.element,e,this.preStyleProps,this.postStyleProps,i,n,r,!0)}};function u1(t,e=3){let n=Math.pow(10,e-1);return Math.round(t*n)/n}function OK(t,e){let n=new Map,i;return t.forEach(r=>{if(r==="*"){i??=e.keys();for(let s of i)n.set(s,Ni)}else for(let[s,o]of r)n.set(s,o)}),n}function d1(t,e,n,i,r,s,o,a,c,l,u,d,h){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:h}}var x0={},Rg=class{constructor(e,n,i){this._triggerName=e,this.ast=n,this._stateStyles=i}match(e,n,i,r){return kK(this.ast.matchers,e,n,i,r)}buildStyles(e,n,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(n,i):new Map}build(e,n,i,r,s,o,a,c,l,u){let d=[],h=this.ast.options&&this.ast.options.params||x0,f=a&&a.params||x0,p=this.buildStyles(i,f,d),g=c&&c.params||x0,v=this.buildStyles(r,g,d),E=new Set,A=new Map,N=new Map,O=r==="void",K={params:S1(g,h),delay:this.ast.options?.delay},j=u?[]:T1(e,n,this.ast.animation,s,o,p,v,K,l,d),ae=0;return j.forEach(De=>{ae=Math.max(De.duration+De.delay,ae)}),d.length?d1(n,this._triggerName,i,r,O,p,v,[],[],A,N,ae,d):(j.forEach(De=>{let Mt=De.element,xn=ln(A,Mt,new Set);De.preStyleProps.forEach(os=>xn.add(os));let VC=ln(N,Mt,new Set);De.postStyleProps.forEach(os=>VC.add(os)),Mt!==n&&E.add(Mt)}),d1(n,this._triggerName,i,r,O,p,v,j,[...E.values()],A,N,ae))}};function kK(t,e,n,i,r){return t.some(s=>s(e,n,i,r))}function S1(t,e){let n=I({},e);return Object.entries(t).forEach(([i,r])=>{r!=null&&(n[i]=r)}),n}var H0=class{constructor(e,n,i){this.styles=e,this.defaultParams=n,this.normalizer=i}buildStyles(e,n){let i=new Map,r=S1(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=dd(o,r,n));let c=this.normalizer.normalizePropertyName(a,n);o=this.normalizer.normalizeStyleValue(a,c,o,n),i.set(a,o)})}),i}};function FK(t,e,n){return new z0(t,e,n)}var z0=class{constructor(e,n,i){this.name=e,this.ast=n,this._normalizer=i,this.transitionFactories=[],this.states=new Map,n.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new H0(r.style,s,i))}),h1(this.states,"true","1"),h1(this.states,"false","0"),n.transitions.forEach(r=>{this.transitionFactories.push(new Rg(e,r,this.states))}),this.fallbackTransition=LK(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,i,r){return this.transitionFactories.find(o=>o.match(e,n,i,r))||null}matchStyles(e,n,i){return this.fallbackTransition.buildStyles(e,n,i)}};function LK(t,e,n){let i=[(o,a)=>!0],r={type:oe.Sequence,steps:[],options:null},s={type:oe.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new Rg(t,s,e)}function h1(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}var VK=new hd,q0=class{constructor(e,n,i){this.bodyNode=e,this._driver=n,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){let i=[],r=[],s=C1(this._driver,n,i,r);if(i.length)throw X8(i);r.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,n,i){let r=e.element,s=_1(this._normalizer,e.keyframes,n,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,n,i={}){let r=[],s=this._animations.get(e),o,a=new Map;if(s?(o=T1(this._driver,n,s,I1,O0,new Map,new Map,i,VK,r),o.forEach(u=>{let d=ln(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(J8()),o=[]),r.length)throw eK(r);a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,Ni))})});let c=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),l=is(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);let i=this.players.indexOf(n);i>=0&&this.players.splice(i,1)}_getPlayer(e){let n=this._playersById.get(e);if(!n)throw tK(e);return n}listen(e,n,i,r){let s=Y0(n,"","","");return Q0(this._getPlayer(e),i,s,r),()=>{}}command(e,n,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let o=r[0]||{};this.create(e,n,o);return}let s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},f1="ng-animate-queued",jK=".ng-animate-queued",M0="ng-animate-disabled",BK=".ng-animate-disabled",UK="ng-star-inserted",$K=".ng-star-inserted",HK=[],A1={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},zK={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},zn="__ng_removed",fd=class{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=GK(r),i){let s=e,{value:o}=s,a=qC(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let n=e.params;if(n){let i=this.options.params;Object.keys(n).forEach(r=>{i[r]==null&&(i[r]=n[r])})}}},ud="void",N0=new fd(ud),G0=class{constructor(e,n,i){this.id=e,this.hostElement=n,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,An(n,this._hostClassName)}listen(e,n,i,r){if(!this._triggers.has(n))throw nK(i,n);if(i==null||i.length==0)throw iK(n);if(!WK(i))throw rK(i,n);let s=ln(this._elementListeners,e,[]),o={name:n,phase:i,callback:r};s.push(o);let a=ln(this._engine.statesByElement,e,new Map);return a.has(n)||(An(e,_g),An(e,_g+"-"+n),a.set(n,N0)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return this._triggers.has(e)?!1:(this._triggers.set(e,n),!0)}_getTrigger(e){let n=this._triggers.get(e);if(!n)throw sK(e);return n}trigger(e,n,i,r=!0){let s=this._getTrigger(n),o=new pd(this.id,n,e),a=this._engine.statesByElement.get(e);a||(An(e,_g),An(e,_g+"-"+n),this._engine.statesByElement.set(e,a=new Map));let c=a.get(n),l=new fd(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(n,l),c||(c=N0),!(l.value===ud)&&c.value===l.value){if(!YK(c.params,l.params)){let g=[],v=s.matchStyles(c.value,c.params,g),E=s.matchStyles(l.value,l.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{wo(e,v),Pi(e,E)})}return}let h=ln(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==n&&g.queued&&g.destroy()});let f=s.matchTransition(c.value,l.value,e,l.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:f,fromState:c,toState:l,player:o,isFallbackTransition:p}),p||(An(e,f1),o.onStart(()=>{hc(e,f1)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);let v=this._engine.playersByElement.get(e);if(v){let E=v.indexOf(o);E>=0&&v.splice(E,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,i)=>{this._elementListeners.set(i,n.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let n=this._engine.playersByElement.get(e);n&&(n.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){let i=this._engine.driver.query(e,bg,!0);i.forEach(r=>{if(r[zn])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,n,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,n,i,r){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,ud,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,o),i&&is(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let n=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(n&&i){let r=new Set;n.forEach(s=>{let o=s.name;if(r.has(o))return;r.add(o);let c=this._triggers.get(o).fallbackTransition,l=i.get(o)||N0,u=new fd(ud),d=new pd(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,n){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let r=!1;if(i.totalAnimations){let s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,n);else{let s=e[zn];(!s||s===A1)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,n))}}insertNode(e,n){An(e,this._hostClassName)}drainQueuedTransitions(e){let n=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){let c=Y0(s,i.triggerName,i.fromState.value,i.toState.value);c._data=e,Q0(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):n.push(i)}),this._queue=[],n.sort((i,r)=>{let s=i.transition.ast.depCount,o=r.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},W0=class{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,i){this.bodyNode=e,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(n=>{n.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,n){let i=new G0(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(i,n):(this.newHostElements.set(n,i),this.collectEnterElement(n)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,n){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(n);for(;a;){let c=r.get(a);if(c){let l=i.indexOf(c);i.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(n,e),e}register(e,n){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,n)),i}registerTrigger(e,n,i){let r=this._namespaceLookup[e];r&&r.register(n,i)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let n=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&n.add(s)}}return n}trigger(e,n,i,r){if(Eg(n)){let s=this._fetchNamespace(e);if(s)return s.trigger(n,i,r),!0}return!1}insertNode(e,n,i,r){if(!Eg(n))return;let s=n[zn];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(n);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(n,i)}r&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),An(e,M0)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),hc(e,M0))}removeNode(e,n,i){if(Eg(n)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(n,i):this.markElementAsRemoved(e,n,!1,i);let s=this.namespacesByHostElement.get(n);s&&s.id!==e&&s.removeNode(n,i)}else this._onRemovalComplete(n,i)}markElementAsRemoved(e,n,i,r,s){this.collectedLeaveElements.push(n),n[zn]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,n,i,r,s){return Eg(n)?this._fetchNamespace(e).listen(n,i,r,s):()=>{}}_buildInstruction(e,n,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,n,s)}destroyInnerAnimations(e){let n=this.driver.query(e,bg,!0);n.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(n=this.driver.query(e,k0,!0),n.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let n=this.playersByElement.get(e);n&&n.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let n=this.playersByQueriedElement.get(e);n&&n.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return is(this.players).onDone(()=>e());e()})}processLeaveNode(e){let n=e[zn];if(n&&n.setForRemoval){if(e[zn]=A1,n.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(M0)&&this.markElementAsDisabled(e,!1),this.driver.query(e,BK,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];An(r,UK)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{n=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],n.length?is(n).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw oK(e)}_flushAnimations(e,n){let i=new hd,r=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(F=>{u.add(F);let $=this.driver.query(F,jK,!0);for(let G=0;G<$.length;G++)u.add($[G])});let d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=g1(h,this.collectedEnterElements),p=new Map,g=0;f.forEach((F,$)=>{let G=I1+g++;p.set($,G),F.forEach(we=>An(we,G))});let v=[],E=new Set,A=new Set;for(let F=0;F<this.collectedLeaveElements.length;F++){let $=this.collectedLeaveElements[F],G=$[zn];G&&G.setForRemoval&&(v.push($),E.add($),G.hasAnimation?this.driver.query($,$K,!0).forEach(we=>E.add(we)):A.add($))}let N=new Map,O=g1(h,Array.from(E));O.forEach((F,$)=>{let G=O0+g++;N.set($,G),F.forEach(we=>An(we,G))}),e.push(()=>{f.forEach((F,$)=>{let G=p.get($);F.forEach(we=>hc(we,G))}),O.forEach((F,$)=>{let G=N.get($);F.forEach(we=>hc(we,G))}),v.forEach(F=>{this.processLeaveNode(F)})});let K=[],j=[];for(let F=this._namespaceList.length-1;F>=0;F--)this._namespaceList[F].drainQueuedTransitions(n).forEach(G=>{let we=G.player,ot=G.element;if(K.push(we),this.collectedEnterElements.length){let bt=ot[zn];if(bt&&bt.setForMove){if(bt.previousTriggersValues&&bt.previousTriggersValues.has(G.triggerName)){let as=bt.previousTriggersValues.get(G.triggerName),un=this.statesByElement.get(G.element);if(un&&un.has(G.triggerName)){let kd=un.get(G.triggerName);kd.value=as,un.set(G.triggerName,kd)}}we.destroy();return}}let Wn=!d||!this.driver.containsElement(d,ot),Kt=N.get(ot),rr=p.get(ot),je=this._buildInstruction(G,i,rr,Kt,Wn);if(je.errors&&je.errors.length){j.push(je);return}if(Wn){we.onStart(()=>wo(ot,je.fromStyles)),we.onDestroy(()=>Pi(ot,je.toStyles)),r.push(we);return}if(G.isFallbackTransition){we.onStart(()=>wo(ot,je.fromStyles)),we.onDestroy(()=>Pi(ot,je.toStyles)),r.push(we);return}let UC=[];je.timelines.forEach(bt=>{bt.stretchStartingKeyframe=!0,this.disabledNodes.has(bt.element)||UC.push(bt)}),je.timelines=UC,i.append(ot,je.timelines);let iV={instruction:je,player:we,element:ot};o.push(iV),je.queriedElements.forEach(bt=>ln(a,bt,[]).push(we)),je.preStyleProps.forEach((bt,as)=>{if(bt.size){let un=c.get(as);un||c.set(as,un=new Set),bt.forEach((kd,iy)=>un.add(iy))}}),je.postStyleProps.forEach((bt,as)=>{let un=l.get(as);un||l.set(as,un=new Set),bt.forEach((kd,iy)=>un.add(iy))})});if(j.length){let F=[];j.forEach($=>{F.push(aK($.triggerName,$.errors))}),K.forEach($=>$.destroy()),this.reportError(F)}let ae=new Map,De=new Map;o.forEach(F=>{let $=F.element;i.has($)&&(De.set($,$),this._beforeAnimationBuild(F.player.namespaceId,F.instruction,ae))}),r.forEach(F=>{let $=F.element;this._getPreviousPlayers($,!1,F.namespaceId,F.triggerName,null).forEach(we=>{ln(ae,$,[]).push(we),we.destroy()})});let Mt=v.filter(F=>y1(F,c,l)),xn=new Map;m1(xn,this.driver,A,l,Ni).forEach(F=>{y1(F,c,l)&&Mt.push(F)});let os=new Map;f.forEach((F,$)=>{m1(os,this.driver,new Set(F),c,yg)}),Mt.forEach(F=>{let $=xn.get(F),G=os.get(F);xn.set(F,new Map([...$?.entries()??[],...G?.entries()??[]]))});let ny=[],jC=[],BC={};o.forEach(F=>{let{element:$,player:G,instruction:we}=F;if(i.has($)){if(u.has($)){G.onDestroy(()=>Pi($,we.toStyles)),G.disabled=!0,G.overrideTotalTime(we.totalTime),r.push(G);return}let ot=BC;if(De.size>1){let Kt=$,rr=[];for(;Kt=Kt.parentNode;){let je=De.get(Kt);if(je){ot=je;break}rr.push(Kt)}rr.forEach(je=>De.set(je,ot))}let Wn=this._buildAnimation(G.namespaceId,we,ae,s,os,xn);if(G.setRealPlayer(Wn),ot===BC)ny.push(G);else{let Kt=this.playersByElement.get(ot);Kt&&Kt.length&&(G.parentPlayer=is(Kt)),r.push(G)}}else wo($,we.fromStyles),G.onDestroy(()=>Pi($,we.toStyles)),jC.push(G),u.has($)&&r.push(G)}),jC.forEach(F=>{let $=s.get(F.element);if($&&$.length){let G=is($);F.setRealPlayer(G)}}),r.forEach(F=>{F.parentPlayer?F.syncPlayerEvents(F.parentPlayer):F.destroy()});for(let F=0;F<v.length;F++){let $=v[F],G=$[zn];if(hc($,O0),G&&G.hasAnimation)continue;let we=[];if(a.size){let Wn=a.get($);Wn&&Wn.length&&we.push(...Wn);let Kt=this.driver.query($,k0,!0);for(let rr=0;rr<Kt.length;rr++){let je=a.get(Kt[rr]);je&&je.length&&we.push(...je)}}let ot=we.filter(Wn=>!Wn.destroyed);ot.length?KK(this,$,ot):this.processLeaveNode($)}return v.length=0,ny.forEach(F=>{this.players.push(F),F.onDone(()=>{F.destroy();let $=this.players.indexOf(F);this.players.splice($,1)}),F.play()}),ny}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,i,r,s){let o=[];if(n){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==ud;a.forEach(l=>{l.queued||!c&&l.triggerName!=r||o.push(l)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,n,i){let r=n.triggerName,s=n.element,o=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:r;for(let c of n.timelines){let l=c.element,u=l!==s,d=ln(i,l,[]);this._getPreviousPlayers(l,u,o,a,n.toState).forEach(f=>{let p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}wo(s,n.fromStyles)}_buildAnimation(e,n,i,r,s,o){let a=n.triggerName,c=n.element,l=[],u=new Set,d=new Set,h=n.timelines.map(p=>{let g=p.element;u.add(g);let v=g[zn];if(v&&v.removedBeforeQueried)return new ns(p.duration,p.delay);let E=g!==c,A=QK((i.get(g)||HK).map(ae=>ae.getRealPlayer())).filter(ae=>{let De=ae;return De.element?De.element===g:!1}),N=s.get(g),O=o.get(g),K=_1(this._normalizer,p.keyframes,N,O),j=this._buildPlayer(p,K,A);if(p.subTimeline&&r&&d.add(g),E){let ae=new pd(e,a,g);ae.setRealPlayer(j),l.push(ae)}return j});l.forEach(p=>{ln(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>qK(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>An(p,a1));let f=is(h);return f.onDestroy(()=>{u.forEach(p=>hc(p,a1)),Pi(c,n.toStyles)}),d.forEach(p=>{ln(r,p,[]).push(f)}),f}_buildPlayer(e,n,i){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,i):new ns(e.duration,e.delay)}},pd=class{constructor(e,n,i){this.namespaceId=e,this.triggerName=n,this.element=i,this._player=new ns,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,i)=>{n.forEach(r=>Q0(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){ln(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let n=this._player;n.triggerCallback&&n.triggerCallback(e)}};function qK(t,e,n){let i=t.get(e);if(i){if(i.length){let r=i.indexOf(n);i.splice(r,1)}i.length==0&&t.delete(e)}return i}function GK(t){return t??null}function Eg(t){return t&&t.nodeType===1}function WK(t){return t=="start"||t=="done"}function p1(t,e){let n=t.style.display;return t.style.display=e??"none",n}function m1(t,e,n,i,r){let s=[];n.forEach(c=>s.push(p1(c)));let o=[];i.forEach((c,l)=>{let u=new Map;c.forEach(d=>{let h=e.computeStyle(l,d,r);u.set(d,h),(!h||h.length==0)&&(l[zn]=zK,o.push(l))}),t.set(l,u)});let a=0;return n.forEach(c=>p1(c,s[a++])),o}function g1(t,e){let n=new Map;if(t.forEach(a=>n.set(a,[])),e.length==0)return n;let i=1,r=new Set(e),s=new Map;function o(a){if(!a)return i;let c=s.get(a);if(c)return c;let l=a.parentNode;return n.has(l)?c=l:r.has(l)?c=i:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==i&&n.get(c).push(a)}),n}function An(t,e){t.classList?.add(e)}function hc(t,e){t.classList?.remove(e)}function KK(t,e,n){is(n).onDone(()=>t.processLeaveNode(e))}function QK(t){let e=[];return R1(t,e),e}function R1(t,e){for(let n=0;n<t.length;n++){let i=t[n];i instanceof cd?R1(i.players,e):e.push(i)}}function YK(t,e){let n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){let s=n[r];if(!e.hasOwnProperty(s)||t[s]!==e[s])return!1}return!0}function y1(t,e,n){let i=n.get(t);if(!i)return!1;let r=e.get(t);return r?i.forEach(s=>r.add(s)):e.set(t,i),n.delete(t),!0}var fc=class{constructor(e,n,i){this._driver=n,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new W0(e.body,n,i),this._timelineEngine=new q0(e.body,n,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,n,i,r,s){let o=e+"-"+r,a=this._triggerCache[o];if(!a){let c=[],l=[],u=C1(this._driver,s,c,l);if(c.length)throw Y8(r,c);l.length&&void 0,a=FK(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(n,r,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,i,r){this._transitionEngine.insertNode(e,n,i,r)}onRemove(e,n,i){this._transitionEngine.removeNode(e,n,i)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,i,r){if(i.charAt(0)=="@"){let[s,o]=s1(i),a=r;this._timelineEngine.command(s,n,o,a)}else this._transitionEngine.trigger(e,n,i,r)}listen(e,n,i,r,s){if(i.charAt(0)=="@"){let[o,a]=s1(i);return this._timelineEngine.listen(o,n,a,s)}return this._transitionEngine.listen(e,n,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function ZK(t,e){let n=null,i=null;return Array.isArray(e)&&e.length?(n=P0(e[0]),e.length>1&&(i=P0(e[e.length-1]))):e instanceof Map&&(n=P0(e)),n||i?new XK(t,n,i):null}var XK=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._startStyles=r,this._endStyles=s,this._state=0;let o=e.initialStylesByElement.get(i);o||e.initialStylesByElement.set(i,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Pi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Pi(this._element,this._initialStyles),this._endStyles&&(Pi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(wo(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wo(this._element,this._endStyles),this._endStyles=null),Pi(this._element,this._initialStyles),this._state=3)}};e.initialStylesByElement=new WeakMap;let t=e;return t})();function P0(t){let e=null;return t.forEach((n,i)=>{JK(i)&&(e=e||new Map,e.set(i,n))}),e}function JK(t){return t==="display"||t==="position"}var xg=class{constructor(e,n,i,r){this.element=e,this.keyframes=n,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let n=()=>this._onFinish();this.domPlayer.addEventListener("finish",n),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",n)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let n=[];return e.forEach(i=>{n.push(Object.fromEntries(i))}),n}_triggerWebAnimation(e,n,i){return e.animate(this._convertKeyframesToObject(n),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:eC(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let n=e==="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},Mg=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return v1(e,n)}getParentElement(e){return Z0(e)}query(e,n,i){return w1(e,n,i)}computeStyle(e,n,i){return eC(e,n)}animate(e,n,i,r,s,o=[]){let a=r==0?"both":"forwards",c={duration:i,delay:r,fill:a};s&&(c.easing=s);let l=new Map,u=o.filter(f=>f instanceof xg);_K(i,r)&&u.forEach(f=>{f.currentSnapshot.forEach((p,g)=>l.set(g,p))});let d=mK(n).map(f=>new Map(f));d=vK(e,d,l);let h=ZK(e,d);return new xg(e,d,c,h)}};var Ig="@",x1="@.disabled",Ng=class{constructor(e,n,i,r){this.namespaceId=e,this.delegate=n,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,i,r=!0){this.delegate.insertBefore(e,n,i),this.engine.onInsert(this.namespaceId,n,e,r)}removeChild(e,n,i){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,i,r){this.delegate.setAttribute(e,n,i,r)}removeAttribute(e,n,i){this.delegate.removeAttribute(e,n,i)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,i,r){this.delegate.setStyle(e,n,i,r)}removeStyle(e,n,i){this.delegate.removeStyle(e,n,i)}setProperty(e,n,i){n.charAt(0)==Ig&&n==x1?this.disableAnimations(e,!!i):this.delegate.setProperty(e,n,i)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,i){return this.delegate.listen(e,n,i)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}},K0=class extends Ng{constructor(e,n,i,r,s){super(n,i,r,s),this.factory=e,this.namespaceId=n}setProperty(e,n,i){n.charAt(0)==Ig?n.charAt(1)=="."&&n==x1?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,n.slice(1),i):this.delegate.setProperty(e,n,i)}listen(e,n,i){if(n.charAt(0)==Ig){let r=eQ(e),s=n.slice(1),o="";return s.charAt(0)!=Ig&&([s,o]=tQ(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,i,a)})}return this.delegate.listen(e,n,i)}};function eQ(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function tQ(t){let e=t.indexOf("."),n=t.substring(0,e),i=t.slice(e+1);return[n,i]}var Pg=class{constructor(e,n,i){this.delegate=e,this.engine=n,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,n.onRemovalComplete=(r,s)=>{let o=s?.parentNode(r);o&&s.removeChild(o,r)}}createRenderer(e,n){let i="",r=this.delegate.createRenderer(e,n);if(!e||!n?.data?.animation){let l=this._rendererCache,u=l.get(r);if(!u){let d=()=>l.delete(r);u=new Ng(i,r,this.engine,d),l.set(r,u)}return u}let s=n.id,o=n.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return n.data.animation.forEach(a),new K0(this,o,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>n(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),r.push([n,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var iQ=(()=>{let e=class e extends fc{constructor(i,r,s,o){super(i,r,s)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(y(Y),y(md),y(Eo),y(pi))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function rQ(){return new Cg}function sQ(t,e,n){return new Pg(t,e,n)}var N1=[{provide:Eo,useFactory:rQ},{provide:fc,useClass:iQ},{provide:bs,useFactory:sQ,deps:[Mf,fc,L]}],M1=[{provide:md,useFactory:()=>new Mg},{provide:qt,useValue:"BrowserAnimations"},...N1],oQ=[{provide:md,useClass:X0},{provide:qt,useValue:"NoopAnimations"},...N1],iue=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:i.disableAnimations?oQ:M1}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({providers:M1,imports:[xx]});let t=e;return t})();function aQ(t){return t!=null&&`${t}`!="false"}function gd(t,e=0){return cQ(t)?Number(t):e}function cQ(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function pc(t){return Array.isArray(t)?t:[t]}function Je(t){return t==null?"":typeof t=="string"?t:`${t}px`}function tr(t){return t instanceof _e?t.nativeElement:t}function aue(t,e=/\s+/){let n=[];if(t!=null){let i=Array.isArray(t)?t:`${t}`.split(e);for(let r of i){let s=`${r}`.trim();s&&n.push(s)}}return n}var iC;try{iC=typeof Intl<"u"&&Intl.v8BreakIterator}catch{iC=!1}var We=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?Xv(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||iC)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(y(gn))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var mc,P1=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function pue(){if(mc)return mc;if(typeof document!="object"||!document)return mc=new Set(P1),mc;let t=document.createElement("input");return mc=new Set(P1.filter(e=>(t.setAttribute("type",e),t.type===e))),mc}var yd;function lQ(){if(yd==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>yd=!0}))}finally{yd=yd||!1}return yd}function gc(t){return lQ()?t:!!t.capture}var Io;function O1(){if(Io==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Io=!1,Io;if("scrollBehavior"in document.documentElement.style)Io=!0;else{let t=Element.prototype.scrollTo;t?Io=!/\{\s*\[native code\]\s*\}/.test(t.toString()):Io=!1}}return Io}var nC;function uQ(){if(nC==null){let t=typeof document<"u"?document.head:null;nC=!!(t&&(t.createShadowRoot||t.attachShadow))}return nC}function k1(t){if(uQ()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function yc(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function qn(t){return t.composedPath?t.composedPath()[0]:t.target}function _d(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var dQ=new x("cdk-dir-doc",{providedIn:"root",factory:hQ});function hQ(){return C(Y)}var fQ=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function pQ(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?fQ.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var wd=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new Ie,i){let r=i.body?i.body.dir:null,s=i.documentElement?i.documentElement.dir:null;this.value=pQ(r||s||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(y(dQ,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var rs=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})();var gQ=20,L1=(()=>{let e=class e{constructor(i,r,s){this._ngZone=i,this._platform=r,this._scrolled=new q,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=gQ){return this._platform.isBrowser?new W(r=>{this._globalSubscription||this._addGlobalListener();let s=i>0?this._scrolled.pipe(hh(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):H()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let s=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(Fe(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,i)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let s=tr(r),o=i.getElementRef().nativeElement;do if(s==o)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return Sc(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(y(L),y(We),y(Y,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var yQ=20,rC=(()=>{let e=class e{constructor(i,r,s){this._platform=i,this._change=new q,this._changeListener=o=>{this._change.next(o)},this._document=s,r.runOutsideAngular(()=>{if(i.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+s,right:i.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),s=i.documentElement,o=s.getBoundingClientRect(),a=-o.top||i.body.scrollTop||r.scrollY||s.scrollTop||0,c=-o.left||i.body.scrollLeft||r.scrollX||s.scrollLeft||0;return{top:a,left:c}}change(i=yQ){return i>0?this._change.pipe(hh(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(y(We),y(L),y(Y,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var F1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})(),sC=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[rs,F1,rs,F1]});let t=e;return t})();var Ed=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},_c=class extends Ed{constructor(e,n,i,r,s){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}},vc=class extends Ed{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},oC=class extends Ed{constructor(e){super(),this.element=e instanceof _e?e.nativeElement:e}},wc=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof _c)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof vc)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof oC)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Og=class extends wc{constructor(e,n,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Me.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Id=(()=>{let e=class e extends wc{constructor(i,r,s){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Ie,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,o=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(o,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};e.\u0275fac=function(r){return new(r||e)(T(Er),T(yn),T(Y))},e.\u0275dir=me({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[fe.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Ye]});let t=e;return t})();var kg=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})();function Fg(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var V1=O1(),aC=class{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Je(-this._previousScrollPosition.left),e.style.top=Je(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,i=e.style,r=n.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),V1&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),V1&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};var cC=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Fe(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Lg=class{enable(){}disable(){}attach(){}};function lC(t,e){return e.some(n=>{let i=t.bottom<n.top,r=t.top>n.bottom,s=t.right<n.left,o=t.left>n.right;return i||r||s||o})}function j1(t,e){return e.some(n=>{let i=t.top<n.top,r=t.bottom>n.bottom,s=t.left<n.left,o=t.right>n.right;return i||r||s||o})}var uC=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();lC(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},vQ=(()=>{let e=class e{constructor(i,r,s,o){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new Lg,this.close=a=>new cC(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new aC(this._viewportRuler,this._document),this.reposition=a=>new uC(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}};e.\u0275fac=function(r){return new(r||e)(y(L1),y(rC),y(L),y(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bd=class{constructor(e){if(this.scrollStrategy=new Lg,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let n=Object.keys(e);for(let i of n)e[i]!==void 0&&(this[i]=e[i])}}};var dC=class{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var z1=(()=>{let e=class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(y(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wQ=(()=>{let e=class e extends z1{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=s=>{let o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){let c=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(s)):c.next(s);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(y(Y),y(L,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),EQ=(()=>{let e=class e extends z1{constructor(i,r,s){super(i),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=qn(o)},this._clickListener=o=>{let a=qn(o),c=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let u=l.length-1;u>-1;u--){let d=l[u];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(a)||d.overlayElement.contains(c))break;let h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(o)):h.next(o)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(y(Y),y(We),y(L,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ec=(()=>{let e=class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||_d()){let s=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}let r=this._document.createElement("div");r.classList.add(i),_d()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(y(Y),y(We))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),nr=class{constructor(e,n,i,r,s,o,a,c,l,u=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new q,this._attachments=new q,this._detachments=new q,this._locationChanges=Ae.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new q,this._outsidePointerEvents=new q,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Be(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=I(I({},this._config),e),this._updateElementSize()}setDirection(e){this._config=ye(I({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Je(this._config.width),e.height=Je(this._config.height),e.minWidth=Je(this._config.minWidth),e.minHeight=Je(this._config.minHeight),e.maxWidth=Je(this._config.maxWidth),e.maxHeight=Je(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){let r=pc(n||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let e=this._ngZone.onStable.pipe(Pn(Ac(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},B1="cdk-overlay-connected-position-bounding-box",IQ=/([A-Za-z%]+)$/,hC=class{get positions(){return this._preferredPositions}constructor(e,n,i,r,s){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new q,this._resizeSubscription=Ae.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(B1),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,n,a),u=this._getOverlayFit(l,n,i,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(u,l,i)){s.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(s.length){let a=null,c=-1;for(let l of s){let u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&bo(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(B1),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=i.originX=="start"?o:a}n.left<0&&(r-=n.left);let s;return i.originY=="center"?s=e.top+e.height/2:s=i.originY=="top"?e.top:e.bottom,n.top<0&&(s-=n.top),{x:r,y:s}}_getOverlayPoint(e,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let s;return i.overlayY=="center"?s=-n.height/2:s=i.overlayY=="top"?0:-n.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,n,i,r){let s=$1(n),{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let u=0-o,d=o+s.width-i.width,h=0-a,f=a+s.height-i.height,p=this._subtractOverflows(s.width,u,d),g=this._subtractOverflows(s.height,h,f),v=p*g;return{visibleArea:v,isCompletelyWithinViewport:s.width*s.height===v,fitsInViewportVertically:g===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,s=i.right-n.x,o=U1(this._overlayRef.getConfig().minHeight),a=U1(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportVertically||o!=null&&o<=r,l=e.fitsInViewportHorizontally||a!=null&&a<=s;return c&&l}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=$1(n),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0),u=0,d=0;return r.width<=s.width?u=l||-o:u=e.x<this._viewportMargin?s.left-i.left-e.x:0,r.height<=s.height?d=c||-a:d=e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){let i=this._getScrollVisibility(),r=new dC(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){let i=this._viewportRect,r=this._isRtl(),s,o,a;if(n.overlayY==="top")o=e.y,s=i.height-o+this._viewportMargin;else if(n.overlayY==="bottom")a=i.height-e.y+this._viewportMargin*2,s=i.height-a+this._viewportMargin;else{let f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;s=f*2,o=e.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}let c=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,l=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,u,d,h;if(l)h=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if(c)d=e.x,u=i.right-e.x;else{let f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;u=f*2,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,n){let i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Je(i.height),r.top=Je(i.top),r.bottom=Je(i.bottom),r.width=Je(i.width),r.left=Je(i.left),r.right=Je(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=Je(s)),o&&(r.maxWidth=Je(o))}this._lastBoundingBoxSize=i,bo(this._boundingBox.style,r)}_resetBoundingBoxStyles(){bo(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){bo(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let u=this._viewportRuler.getViewportScrollPosition();bo(i,this._getExactOverlayY(n,e,u)),bo(i,this._getExactOverlayX(n,e,u))}else i.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Je(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Je(o.maxWidth):s&&(i.maxWidth="")),bo(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=Je(s.y);return r}_getExactOverlayX(e,n,i){let r={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(s.x+this._overlayRect.width)}px`}else r.left=Je(s.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:j1(e,i),isOriginOutsideView:lC(e,i),isOverlayClipped:j1(n,i),isOverlayOutsideView:lC(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&pc(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof _e)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}};function bo(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function U1(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(IQ);return!n||n==="px"?parseFloat(e):null}return t||null}function $1(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}var H1="cdk-global-overlay-wrapper",fC=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(H1),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),l=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",p="",g="";c?g="flex-start":u==="center"?(g="center",h?p=d:f=d):h?u==="left"||u==="end"?(g="flex-end",f=d):(u==="right"||u==="start")&&(g="flex-start",p=d):u==="left"||u==="start"?(g="flex-start",f=d):(u==="right"||u==="end")&&(g="flex-end",p=d),e.position=this._cssPosition,e.marginLeft=c?"0":f,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":p,n.justifyContent=g,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(H1),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},bQ=(()=>{let e=class e{constructor(i,r,s,o){this._viewportRuler=i,this._document=r,this._platform=s,this._overlayContainer=o}global(){return new fC}flexibleConnectedTo(i){return new hC(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(y(rC),y(Y),y(We),y(Ec))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),DQ=0,Gn=(()=>{let e=class e{constructor(i,r,s,o,a,c,l,u,d,h,f,p){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=u,this._directionality=d,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=p}create(i){let r=this._createHostElement(),s=this._createPaneElement(r),o=this._createPortalOutlet(s),a=new bd(i);return a.direction=a.direction||this._directionality.value,new nr(o,r,s,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${DQ++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(pi)),new Og(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(y(vQ),y(Ec),y(Er),y(bQ),y(wQ),y(Me),y(L),y(Y),y(wd),y(yi),y(EQ),y(qt,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var CQ=new x("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=C(Gn);return()=>t.scrollStrategies.reposition()}});function TQ(t){return()=>t.scrollStrategies.reposition()}var SQ={provide:CQ,deps:[Gn],useFactory:TQ},q1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({providers:[Gn,SQ],imports:[rs,kg,sC,sC]});let t=e;return t})();var AQ=(()=>{let e=class e{create(i){return typeof MutationObserver>"u"?null:new MutationObserver(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var W1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({providers:[AQ]});let t=e;return t})();var K1=new Set,Do,RQ=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):MQ}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&xQ(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(y(We),y(Xc,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function xQ(t,e){if(!K1.has(t))try{Do||(Do=document.createElement("style"),e&&(Do.nonce=e),Do.setAttribute("type","text/css"),document.head.appendChild(Do)),Do.sheet&&(Do.sheet.insertRule(`@media ${t} {body{ }}`,0),K1.add(t))}catch(n){console.error(n)}}function MQ(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var Y1=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new q}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return Q1(pc(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=Q1(pc(i)).map(a=>this._registerQuery(a).observable),o=fs(s);return o=Yn(o.pipe(Be(1)),o.pipe(Nc(1),ph(0))),o.pipe(ee(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new W(a=>{let c=l=>this._zone.run(()=>a.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(Nn(r),ee(({matches:a})=>({query:i,matches:a})),Pn(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};e.\u0275fac=function(r){return new(r||e)(y(RQ),y(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Q1(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var Dd=(()=>{let e=class e{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return PQ(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let r=NQ(UQ(i));if(r&&(Z1(r)===-1||!this.isVisible(r)))return!1;let s=i.nodeName.toLowerCase(),o=Z1(i);return i.hasAttribute("contenteditable")?o!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!jQ(i)?!1:s==="audio"?i.hasAttribute("controls")?o!==-1:!1:s==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,r){return BQ(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}};e.\u0275fac=function(r){return new(r||e)(y(We))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function NQ(t){try{return t.frameElement}catch{return null}}function PQ(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function OQ(t){let e=t.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function kQ(t){return LQ(t)&&t.type=="hidden"}function FQ(t){return VQ(t)&&t.hasAttribute("href")}function LQ(t){return t.nodeName.toLowerCase()=="input"}function VQ(t){return t.nodeName.toLowerCase()=="a"}function eL(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let e=t.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function Z1(t){if(!eL(t))return null;let e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function jQ(t){let e=t.nodeName.toLowerCase(),n=e==="input"&&t.type;return n==="text"||n==="password"||e==="select"||e==="textarea"}function BQ(t){return kQ(t)?!1:OQ(t)||FQ(t)||t.hasAttribute("contenteditable")||eL(t)}function UQ(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var mC=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,s=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){let n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=0;i<n.length;i++){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=n.length-1;i>=0;i--){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Be(1)).subscribe(e)}},Cd=(()=>{let e=class e{constructor(i,r,s){this._checker=i,this._ngZone=r,this._document=s}create(i,r=!1){return new mC(i,this._checker,this._ngZone,this._document,r)}};e.\u0275fac=function(r){return new(r||e)(y(Dd),y(L),y(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Nde=(()=>{let e=class e{get enabled(){return this.focusTrap?.enabled||!1}set enabled(i){this.focusTrap&&(this.focusTrap.enabled=i)}constructor(i,r,s){this._elementRef=i,this._focusTrapFactory=r,this._previouslyFocusedElement=null,C(We).isBrowser&&(this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0))}ngOnDestroy(){this.focusTrap?.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap?.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap&&!this.focusTrap.hasAttached()&&this.focusTrap.attachAnchors()}ngOnChanges(i){let r=i.autoCapture;r&&!r.firstChange&&this.autoCapture&&this.focusTrap?.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=yc(),this.focusTrap?.focusInitialElementWhenReady()}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(Cd),T(Y))},e.\u0275dir=me({type:e,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:[fe.HasDecoratorInputTransform,"cdkTrapFocus","enabled",_n],autoCapture:[fe.HasDecoratorInputTransform,"cdkTrapFocusAutoCapture","autoCapture",_n]},exportAs:["cdkTrapFocus"],standalone:!0,features:[Ui,Ft]});let t=e;return t})();function gC(t){return t.buttons===0||t.detail===0}function yC(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var $Q=new x("cdk-input-modality-detector-options"),HQ={ignoreKeys:[18,17,224,91,16]},tL=650,Ic=gc({passive:!0,capture:!0}),zQ=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,s,o){this._platform=i,this._mostRecentTarget=null,this._modality=new Ke(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=qn(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<tL||(this._modality.next(gC(a)?"keyboard":"mouse"),this._mostRecentTarget=qn(a))},this._onTouchstart=a=>{if(yC(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=qn(a)},this._options=I(I({},HQ),o),this.modalityDetected=this._modality.pipe(Nc(1)),this.modalityChanged=this.modalityDetected.pipe(xc()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Ic),s.addEventListener("mousedown",this._onMousedown,Ic),s.addEventListener("touchstart",this._onTouchstart,Ic)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ic),document.removeEventListener("mousedown",this._onMousedown,Ic),document.removeEventListener("touchstart",this._onTouchstart,Ic))}};e.\u0275fac=function(r){return new(r||e)(y(We),y(L),y(Y),y($Q,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var jg=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(jg||{}),qQ=new x("cdk-focus-monitor-default-options"),Vg=gc({passive:!0,capture:!0}),Td=(()=>{let e=class e{constructor(i,r,s,o,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new q,this._rootNodeFocusAndBlurListener=c=>{let l=qn(c);for(let u=l;u;u=u.parentElement)c.type==="focus"?this._onFocus(c,u):this._onBlur(c,u)},this._document=o,this._detectionMode=a?.detectionMode||jg.IMMEDIATE}monitor(i,r=!1){let s=tr(i);if(!this._platform.isBrowser||s.nodeType!==1)return H();let o=k1(s)||this._getDocument(),a=this._elementInfo.get(s);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new q,rootNode:o};return this._elementInfo.set(s,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){let r=tr(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){let o=tr(i),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===jg.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===jg.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?tL:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(i,r){let s=this._elementInfo.get(r),o=qn(i);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(i,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Vg),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Vg)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Pn(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Vg),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Vg),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((s,o)=>{(o===i||s.checkChildren&&o.contains(i))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let o=i.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(y(L),y(We),y(zQ),y(Y,8),y(qQ,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Pde=(()=>{let e=class e{constructor(i,r){this._elementRef=i,this._focusMonitor=r,this._focusOrigin=null,this.cdkFocusChange=new Ie}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let i=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(i,i.nodeType===1&&i.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(r=>{this._focusOrigin=r,this.cdkFocusChange.emit(r)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(Td))},e.\u0275dir=me({type:e,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"],standalone:!0});let t=e;return t})(),Co=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(Co||{}),X1="cdk-high-contrast-black-on-white",J1="cdk-high-contrast-white-on-black",pC="cdk-high-contrast-active",_C=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=C(Y1).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Co.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Co.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Co.BLACK_ON_WHITE}return Co.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(pC,X1,J1),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Co.BLACK_ON_WHITE?i.add(pC,X1):r===Co.WHITE_ON_BLACK&&i.add(pC,J1)}}};e.\u0275fac=function(r){return new(r||e)(y(We),y(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ode=(()=>{let e=class e{constructor(i){i._applyBodyHighContrastModeCssClasses()}};e.\u0275fac=function(r){return new(r||e)(y(_C))},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[W1]});let t=e;return t})();function GQ(t,e){}var To=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var IC=(()=>{let e=class e extends wc{constructor(i,r,s,o,a,c,l,u){super(),this._elementRef=i,this._focusTrapFactory=r,this._config=o,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=l,this._focusMonitor=u,this._platform=C(We),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=C(ui),this.attachDomPortal=d=>{this._portalOutlet.hasAttached();let h=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),h},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(i){this._ariaLabelledByQueue.push(i),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(i){let r=this._ariaLabelledByQueue.indexOf(i);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{i.removeEventListener("blur",s),i.removeEventListener("mousedown",s),i.removeAttribute("tabindex")};i.addEventListener("blur",s),i.addEventListener("mousedown",s)})),i.focus(r)}_focusByCssSelector(i,r){let s=this._elementRef.nativeElement.querySelector(i);s&&this._forceFocus(s,r)}_trapFocus(){let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}}_restoreFocus(){let i=this._config.restoreFocus,r=null;if(typeof i=="string"?r=this._document.querySelector(i):typeof i=="boolean"?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&typeof r.focus=="function"){let s=yc(),o=this._elementRef.nativeElement;(!s||s===this._document.body||s===o||o.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let i=this._elementRef.nativeElement,r=yc();return i===r||i.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=yc()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(Cd),T(Y,8),T(To),T(Dd),T(L),T(nr),T(Td))},e.\u0275cmp=ai({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(r,s){if(r&1&&_f(Id,7),r&2){let o;nl(o=il())&&(s._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,s){r&2&&hi("id",s._config.id||null)("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null)},standalone:!0,features:[Ye,fi],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,s){r&1&&Xt(0,GQ,0,0,"ng-template",0)},dependencies:[Id],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2});let t=e;return t})(),Sd=class{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new q,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!Fg(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(e,n){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},WQ=new x("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=C(Gn);return()=>t.scrollStrategies.block()}}),KQ=new x("DialogData"),QQ=new x("DefaultDialogConfig");var YQ=0,nL=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,r,s,o,a,c){this._overlay=i,this._injector=r,this._defaultOptions=s,this._parentDialog=o,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new q,this._afterOpenedAtThisLevel=new q,this._ariaHiddenElements=new Map,this.afterAllClosed=dr(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Nn(void 0))),this._scrollStrategy=c}open(i,r){let s=this._defaultOptions||new To;r=I(I({},s),r),r.id=r.id||`cdk-dialog-${YQ++}`,r.id&&this.getDialogById(r.id);let o=this._getOverlayConfig(r),a=this._overlay.create(o),c=new Sd(a,r),l=this._attachContainer(a,c,r);return c.containerInstance=l,this._attachDialogContent(i,c,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){wC(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){wC(this._openDialogsAtThisLevel,i=>{i.config.closeOnDestroy===!1&&this._removeOpenDialog(i,!1)}),wC(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){let r=new bd({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,s){let o=s.injector||s.viewContainerRef?.injector,a=[{provide:To,useValue:s},{provide:Sd,useValue:r},{provide:nr,useValue:i}],c;s.container?typeof s.container=="function"?c=s.container:(c=s.container.type,a.push(...s.container.providers(s))):c=IC;let l=new _c(c,s.viewContainerRef,Me.create({parent:o||this._injector,providers:a}),s.componentFactoryResolver);return i.attach(l).instance}_attachDialogContent(i,r,s,o){if(i instanceof Ln){let a=this._createInjector(o,r,s,void 0),c={$implicit:o.data,dialogRef:r};o.templateContext&&(c=I(I({},c),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),s.attachTemplatePortal(new vc(i,null,c,a))}else{let a=this._createInjector(o,r,s,this._injector),c=s.attachComponentPortal(new _c(i,o.viewContainerRef,a,o.componentFactoryResolver));r.componentRef=c,r.componentInstance=c.instance}}_createInjector(i,r,s,o){let a=i.injector||i.viewContainerRef?.injector,c=[{provide:KQ,useValue:i.data},{provide:Sd,useValue:r}];return i.providers&&(typeof i.providers=="function"?c.push(...i.providers(r,i,s)):c.push(...i.providers)),i.direction&&(!a||!a.get(wd,null,{optional:!0}))&&c.push({provide:wd,useValue:{value:i.direction,change:H()}}),Me.create({parent:a||o,providers:c})}_removeOpenDialog(i,r){let s=this.openDialogs.indexOf(i);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let i=this._overlayContainer.getContainerElement();if(i.parentElement){let r=i.parentElement.children;for(let s=r.length-1;s>-1;s--){let o=r[s];o!==i&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}};e.\u0275fac=function(r){return new(r||e)(y(Gn),y(Me),y(QQ,8),y(e,12),y(Ec),y(WQ))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wC(t,e){let n=t.length;for(;n--;)e(t[n])}function ZQ(){return!0}var XQ=new x("mat-sanity-checks",{providedIn:"root",factory:ZQ}),iL=(()=>{let e=class e{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return _d()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(y(_C),y(XQ,8),y(Y))},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[rs,rs]});let t=e;return t})();var rL=class{constructor(e,n,i,r,s){this._defaultMatcher=e,this.ngControl=n,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=s,this.errorState=!1}updateErrorState(){let e=this.errorState,n=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=typeof i?.isErrorState=="function"?i.isErrorState(r,n):!1;s!==e&&(this.errorState=s,this._stateChanges.next())}};var sL=new x("MAT_DATE_LOCALE",{providedIn:"root",factory:JQ});function JQ(){return C(da)}var Ug=class{constructor(){this._localeChanges=new q,this.localeChanges=this._localeChanges}getValidDateOrNull(e){return this.isDateInstance(e)&&this.isValid(e)?e:null}deserialize(e){return e==null||this.isDateInstance(e)&&this.isValid(e)?e:this.invalid()}setLocale(e){this.locale=e,this._localeChanges.next()}compareDate(e,n){return this.getYear(e)-this.getYear(n)||this.getMonth(e)-this.getMonth(n)||this.getDate(e)-this.getDate(n)}sameDate(e,n){if(e&&n){let i=this.isValid(e),r=this.isValid(n);return i&&r?!this.compareDate(e,n):i==r}return e==n}clampDate(e,n,i){return n&&this.compareDate(e,n)<0?n:i&&this.compareDate(e,i)>0?i:e}},e7=new x("mat-date-formats"),t7=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function bC(t,e){let n=Array(t);for(let i=0;i<t;i++)n[i]=e(i);return n}var n7=(()=>{let e=class e extends Ug{constructor(i){super(),this.useUtcForDisplay=!1,this._matDateLocale=C(sL,{optional:!0}),i!==void 0&&(this._matDateLocale=i),super.setLocale(this._matDateLocale)}getYear(i){return i.getFullYear()}getMonth(i){return i.getMonth()}getDate(i){return i.getDate()}getDayOfWeek(i){return i.getDay()}getMonthNames(i){let r=new Intl.DateTimeFormat(this.locale,{month:i,timeZone:"utc"});return bC(12,s=>this._format(r,new Date(2017,s,1)))}getDateNames(){let i=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return bC(31,r=>this._format(i,new Date(2017,0,r+1)))}getDayOfWeekNames(i){let r=new Intl.DateTimeFormat(this.locale,{weekday:i,timeZone:"utc"});return bC(7,s=>this._format(r,new Date(2017,0,s+1)))}getYearName(i){let r=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(r,i)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(i){return this.getDate(this._createDateWithOverflow(this.getYear(i),this.getMonth(i)+1,0))}clone(i){return new Date(i.getTime())}createDate(i,r,s){let o=this._createDateWithOverflow(i,r,s);return o.getMonth()!=r,o}today(){return new Date}parse(i,r){return typeof i=="number"?new Date(i):i?new Date(Date.parse(i)):null}format(i,r){if(!this.isValid(i))throw Error("NativeDateAdapter: Cannot format invalid date.");let s=new Intl.DateTimeFormat(this.locale,ye(I({},r),{timeZone:"utc"}));return this._format(s,i)}addCalendarYears(i,r){return this.addCalendarMonths(i,r*12)}addCalendarMonths(i,r){let s=this._createDateWithOverflow(this.getYear(i),this.getMonth(i)+r,this.getDate(i));return this.getMonth(s)!=((this.getMonth(i)+r)%12+12)%12&&(s=this._createDateWithOverflow(this.getYear(s),this.getMonth(s),0)),s}addCalendarDays(i,r){return this._createDateWithOverflow(this.getYear(i),this.getMonth(i),this.getDate(i)+r)}toIso8601(i){return[i.getUTCFullYear(),this._2digit(i.getUTCMonth()+1),this._2digit(i.getUTCDate())].join("-")}deserialize(i){if(typeof i=="string"){if(!i)return null;if(t7.test(i)){let r=new Date(i);if(this.isValid(r))return r}}return super.deserialize(i)}isDateInstance(i){return i instanceof Date}isValid(i){return!isNaN(i.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(i,r,s){let o=new Date;return o.setFullYear(i,r,s),o.setHours(0,0,0,0),o}_2digit(i){return("00"+i).slice(-2)}_format(i,r){let s=new Date;return s.setUTCFullYear(r.getFullYear(),r.getMonth(),r.getDate()),s.setUTCHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),i.format(s)}};e.\u0275fac=function(r){return new(r||e)(y(sL,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),i7={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};function Ehe(t=i7){return[{provide:Ug,useClass:n7},{provide:e7,useValue:t}]}var Ihe=(()=>{let e=class e{isErrorState(i,r){return!!(i&&i.invalid&&(i.touched||r&&r.submitted))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Rn=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Rn||{}),TC=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Rn.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},oL=gc({passive:!0,capture:!0}),SC=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=qn(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,i,r){let s=this._events.get(n);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,oL)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let s=r.get(n);s&&(s.delete(i),s.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,oL)))}},aL={enterDuration:225,exitDuration:150},r7=800,cL=gc({passive:!0,capture:!0}),lL=["mousedown","touchstart"],uL=["mouseup","mouseleave","touchend","touchcancel"],Ad=class Ad{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=tr(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=I(I({},aL),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let o=i.radius||s7(e,n,r),a=e-r.left,c=n-r.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-o}px`,u.style.top=`${c-o}px`,u.style.height=`${o*2}px`,u.style.width=`${o*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,f=d.transitionDuration,p=h==="none"||f==="0s"||f==="0s, 0s"||r.width===0&&r.height===0,g=new TC(this,u,i,p);u.style.transform="scale3d(1, 1, 1)",g.state=Rn.FADING_IN,i.persistent||(this._mostRecentTransientRipple=g);let v=null;return!p&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let E=()=>this._finishRippleTransition(g),A=()=>this._destroyRipple(g);u.addEventListener("transitionend",E),u.addEventListener("transitioncancel",A),v={onTransitionEnd:E,onTransitionCancel:A}}),this._activeRipples.set(g,v),(p||!l)&&this._finishRippleTransition(g),g}fadeOutRipple(e){if(e.state===Rn.FADING_OUT||e.state===Rn.HIDDEN)return;let n=e.element,i=I(I({},aL),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=Rn.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=tr(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,lL.forEach(i=>{Ad._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{uL.forEach(n=>{this._triggerElement.addEventListener(n,this,cL)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Rn.FADING_IN?this._startFadeOutTransition(e):e.state===Rn.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Rn.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Rn.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=gC(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+r7;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!yC(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===Rn.VISIBLE||e.config.terminateOnPointerUp&&e.state===Rn.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(lL.forEach(n=>Ad._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&uL.forEach(n=>e.removeEventListener(n,this,cL)))}};Ad._eventManager=new SC;var AC=Ad;function s7(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}var pL=new x("mat-ripple-global-options"),o7=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,s,o,a){this._elementRef=i,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new AC(this,r,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:I(I(I({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,s){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,I(I({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,I(I({},this.rippleConfig),i))}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(L),T(We),T(pL,8),T(qt,8))},e.\u0275dir=me({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){r&2&&$i("mat-ripple-unbounded",s.unbounded)},inputs:{color:[fe.None,"matRippleColor","color"],unbounded:[fe.None,"matRippleUnbounded","unbounded"],centered:[fe.None,"matRippleCentered","centered"],radius:[fe.None,"matRippleRadius","radius"],animation:[fe.None,"matRippleAnimation","animation"],disabled:[fe.None,"matRippleDisabled","disabled"],trigger:[fe.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=e;return t})(),bhe=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[iL,iL]});let t=e;return t})();var dL={capture:!0},hL=["focus","click","mouseenter","touchstart"],DC="mat-ripple-loader-uninitialized",CC="mat-ripple-loader-class-name",fL="mat-ripple-loader-centered",Bg="mat-ripple-loader-disabled",Dhe=(()=>{let e=class e{constructor(){this._document=C(Y,{optional:!0}),this._animationMode=C(qt,{optional:!0}),this._globalRippleOptions=C(pL,{optional:!0}),this._platform=C(We),this._ngZone=C(L),this._hosts=new Map,this._onInteraction=i=>{if(!(i.target instanceof HTMLElement))return;let s=i.target.closest(`[${DC}]`);s&&this._createRipple(s)},this._ngZone.runOutsideAngular(()=>{for(let i of hL)this._document?.addEventListener(i,this._onInteraction,dL)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of hL)this._document?.removeEventListener(r,this._onInteraction,dL)}configureRipple(i,r){i.setAttribute(DC,""),(r.className||!i.hasAttribute(CC))&&i.setAttribute(CC,r.className||""),r.centered&&i.setAttribute(fL,""),r.disabled&&i.setAttribute(Bg,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let s=this._hosts.get(i);if(s){s.disabled=r;return}r?i.setAttribute(Bg,""):i.removeAttribute(Bg)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",i.getAttribute(CC)),i.append(s);let o=new o7(new _e(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=i,o.centered=i.hasAttribute(fL),o.disabled=i.hasAttribute(Bg),this.attachRipple(i,o),o}attachRipple(i,r){i.removeAttribute(DC),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function a7(t,e){}var Rd=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},RC="mdc-dialog--open",mL="mdc-dialog--opening",gL="mdc-dialog--closing",c7=150,l7=75,u7=(()=>{let e=class e extends IC{constructor(i,r,s,o,a,c,l,u,d){super(i,r,s,o,a,c,l,d),this._animationMode=u,this._animationStateChanged=new Ie,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?_L(this._config.enterAnimationDuration)??c7:0,this._exitAnimationDuration=this._animationsEnabled?_L(this._config.exitAnimationDuration)??l7:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(yL,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(mL,RC)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(RC),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(RC),this._animationsEnabled?(this._hostElement.style.setProperty(yL,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(gL)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(mL,gL)}_waitForAnimationToComplete(i,r){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(i):i()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(i){let r=super.attachComponentPortal(i);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(Cd),T(Y,8),T(Rd),T(Dd),T(L),T(nr),T(qt,8),T(Td))},e.\u0275cmp=ai({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(r,s){r&2&&(gf("id",s._config.id),hi("aria-modal",s._config.ariaModal)("role",s._config.role)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null),$i("_mat-animation-noopable",!s._animationsEnabled))},standalone:!0,features:[Ye,fi],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,s){r&1&&(Lt(0,"div",0)(1,"div",1),Xt(2,a7,0,0,"ng-template",2),Tt()())},dependencies:[Id],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2});let t=e;return t})(),yL="--mat-dialog-transition-duration";function _L(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?gd(t.substring(0,t.length-2)):t.endsWith("s")?gd(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var $g=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}($g||{}),xC=class{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new q,this._beforeClosed=new q,this._state=$g.OPEN,this.disableClose=n.disableClose,this.id=e.id,i._animationStateChanged.pipe(Fe(r=>r.state==="opened"),Be(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Fe(r=>r.state==="closed"),Be(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Ac(this.backdropClick(),this.keydownEvents().pipe(Fe(r=>r.keyCode===27&&!this.disableClose&&!Fg(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),d7(this,r.type==="keydown"?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Fe(n=>n.state==="closing"),Be(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=$g.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=$g.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function d7(t,e,n){return t._closeInteractionType=e,t.close(n)}var MC=new x("MatMdcDialogData"),h7=new x("mat-mdc-dialog-default-options"),f7=new x("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=C(Gn);return()=>t.scrollStrategies.block()}});var p7=0,vL=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(i,r,s,o,a,c,l,u){this._overlay=i,this._defaultOptions=o,this._scrollStrategy=a,this._parentDialog=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new q,this._afterOpenedAtThisLevel=new q,this.dialogConfigClass=Rd,this.afterAllClosed=dr(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Nn(void 0))),this._dialog=r.get(nL),this._dialogRefConstructor=xC,this._dialogContainerType=u7,this._dialogDataToken=MC}open(i,r){let s;r=I(I({},this._defaultOptions||new Rd),r),r.id=r.id||`mat-mdc-dialog-${p7++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(i,ye(I({},r),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:To,useValue:r}]},templateContext:()=>({dialogRef:s}),providers:(a,c,l)=>(s=new this._dialogRefConstructor(a,r,l),s.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:s}])}));return s.componentRef=o.componentRef,s.componentInstance=o.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(s);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let r=i.length;for(;r--;)i[r].close()}};e.\u0275fac=function(r){return new(r||e)(y(Gn),y(Me),y(yi,8),y(h7,8),y(f7),y(e,12),y(Ec),y(qt,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function g7(t,e){if(t&1){let n=Lv();Lt(0,"button",12),lt("click",function(){X_(n);let r=ca();return J_(r.cancel())}),pA(),Lt(1,"svg",13),Ir(2,"path",14),Tt(),mA(),Lt(3,"span",15),la(4,"Close modal"),Tt()()}}function y7(t,e){t&1&&Fv(0)}function _7(t,e){if(t&1&&Xt(0,y7,1,0,"ng-container",16),t&2){let n=ca();Rs("ngTemplateOutlet",n.templateRef)}}function v7(t,e){if(t&1){let n=Lv();Lt(0,"button",17),lt("click",function(){X_(n);let r=ca();return J_(r.cancel())}),la(1),Tt()}if(t&2){let n=ca();jn(),Ms(" ",n.cancelText," ")}}var w7=t=>({"pb-10":t}),wL=(()=>{let e=class e{constructor(i){if(this.data=i,this.doConfirm=new Ie,this.doCancel=new Ie,this.title="\u901A\u77E5",this.content="",this.okText="\u78BA\u8A8D",this.cancelText="\u53D6\u6D88",this.showCrossBtn=!0,this.outsideClose=!1,this.showCancelBtn=!0,this.btnCenter=!0,this.fullScreen=!1,this.data){let{title:r,content:s,okText:o,cancelText:a,showCrossBtn:c,outsideClose:l,showCancelBtn:u,contentTemplateRef:d,btnCenter:h,fullScreen:f,afterViewInit:p}=i;this.title=r,this.content=s,this.okText=o,this.cancelText=a,this.showCrossBtn=c,this.outsideClose=l,this.showCancelBtn=u,this.btnCenter=h,this.templateRef=d,this.fullScreen=f,this.afterViewInitEvent=p||(()=>{})}}ngOnInit(){}ngAfterViewInit(){this.afterViewInitEvent()}clickOutsideClose(){this.outsideClose&&this.cancel()}cancel(){this.doCancel.emit()}ok(){this.doConfirm.emit()}};e.\u0275fac=function(r){return new(r||e)(T(MC))},e.\u0275cmp=ai({type:e,selectors:[["app-modal"]],outputs:{doConfirm:"doConfirm",doCancel:"doCancel"},standalone:!0,features:[fi],decls:15,vars:10,consts:[[1,"bg-white","dark:bg-gray-700","min-w-72","min-h-48","flex","overflow-y-auto","overflow-x-hidden","justify-center","items-center","w-full","md:inset-0","h-[calc(100%-1rem)]","max-h-full"],[1,"relative","w-full","max-w-2xl","max-h-screen","overflow-scroll"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button","class","text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide","default-modal",3,"click",4,"ngIf"],[1,"p-4","md:p-5","space-y-4","text-gray-900","dark:text-white","min-h-20"],[3,"innerHTML"],[1,"flex","justify-center","items-center","p-4","md:p-5","border-t","border-gray-200","rounded-b","dark:border-gray-600"],["type","button",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],["type","button","class","ms-3 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600",3,"click",4,"ngIf"],[1,"fixed","h-full","w-full","top-0","left-0","-z-10",3,"click"],["type","button","data-modal-hide","default-modal",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","ms-auto","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[4,"ngTemplateOutlet"],["type","button",1,"ms-3","text-gray-500","bg-white","hover:bg-gray-100","focus:ring-4","focus:outline-none","focus:ring-blue-300","rounded-lg","border","border-gray-200","text-sm","font-medium","px-5","py-2.5","hover:text-gray-900","focus:z-10","dark:bg-gray-700","dark:text-gray-300","dark:border-gray-500","dark:hover:text-white","dark:hover:bg-gray-600","dark:focus:ring-gray-600",3,"click"]],template:function(r,s){r&1&&(Lt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),la(5),Tt(),Xt(6,g7,5,0,"button",5),Tt(),Lt(7,"div",6),Ir(8,"p",7),Xt(9,_7,1,1,"ng-container"),Tt(),Lt(10,"div",8)(11,"button",9),lt("click",function(){return s.ok()}),la(12),Tt(),Xt(13,v7,2,1,"button",10),Tt()()()(),Lt(14,"div",11),lt("click",function(){return s.clickOutsideClose()}),Tt()),r&2&&(jn(5),Ms(" ",s.title," "),jn(),Rs("ngIf",s.showCrossBtn&&s.showCancelBtn),jn(2),Rs("innerHTML",s.content,rR),jn(),kv(9,s.templateRef?9:-1),jn(),VR(tx(8,w7,s.fullScreen)),jn(2),Ms(" ",s.okText," "),jn(),Rs("ngIf",s.showCancelBtn))},dependencies:[Ns,wx,Ex]});let t=e;return t})();var rfe=(()=>{let e=class e{constructor(i){this.dialog=i,this.modalQueue=[],this.currentModal$=new ds,this.executeStatus$=new q,this.executeModal()}executeModal(){this.executeStatus$.subscribe(()=>{this.modalQueue.length>0&&this.currentModal$.next(this.modalQueue[0])})}openConfirm(i){let r=Date.now();this.pushModalConfig(r);let s=({title:o="\u901A\u77E5",content:a,okText:c="\u78BA\u8A8D",cancelText:l="\u53D6\u6D88",outsideClose:u=!1,showCrossBtn:d=!0,showCancelBtn:h=!0,btnCenter:f=!0,fullScreen:p=!1,contentTemplateRef:g,afterViewInit:v})=>{let E={data:{content:a,title:o,okText:c,cancelText:l,outsideClose:u,showCrossBtn:d,showCancelBtn:h,btnCenter:f,fullScreen:p,contentTemplateRef:g,afterViewInit:v}};return p?I({maxWidth:"100vw",width:"100%"},E):E};return this.modalQueue.length===1&&this.executeStatus$.next(!0),new Promise(o=>{this.currentModal$.subscribe(a=>{if(a===r){let c=this.dialog.open(wL,s(i));o(c),c.componentInstance.doConfirm.subscribe(()=>{i.onOk&&i.onOk(),this.modalQueue.shift(),c.close(),this.executeStatus$.next(!0)}),c.componentInstance.doCancel.subscribe(()=>{i.onCancel&&i.onCancel(),this.modalQueue.shift(),c.close(),this.executeStatus$.next(!0)})}})})}pushModalConfig(i){this.modalQueue.push(i)}cleanQueue(){let i=this.modalQueue[0];this.modalQueue=[i]}};e.\u0275fac=function(r){return new(r||e)(y(vL))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var xL=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(T(Vn),T(_e))},e.\u0275dir=me({type:e});let t=e;return t})(),Pd=(()=>{let e=class e extends xL{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=li(e)))(s||e)}})(),e.\u0275dir=me({type:e,features:[Ye]});let t=e;return t})(),Ao=new x("NgValueAccessor"),E7={provide:Ao,useExisting:pn(()=>I7),multi:!0},I7=(()=>{let e=class e extends Pd{writeValue(i){this.setProperty("checked",i)}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=li(e)))(s||e)}})(),e.\u0275dir=me({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,s){r&1&&lt("change",function(a){return s.onChange(a.target.checked)})("blur",function(){return s.onTouched()})},features:[Gt([E7]),Ye]});let t=e;return t})(),b7={provide:Ao,useExisting:pn(()=>ML),multi:!0};function D7(){let t=gi()?gi().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var C7=new x("CompositionEventMode"),ML=(()=>{let e=class e extends xL{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!D7())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(T(Vn),T(_e),T(C7,8))},e.\u0275dir=me({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&lt("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Gt([b7]),Ye]});let t=e;return t})();function ss(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function NL(t){return t!=null&&typeof t.length=="number"}var Xg=new x("NgValidators"),Jg=new x("NgAsyncValidators"),T7=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,EL=class{static min(e){return S7(e)}static max(e){return A7(e)}static required(e){return R7(e)}static requiredTrue(e){return x7(e)}static email(e){return M7(e)}static minLength(e){return N7(e)}static maxLength(e){return P7(e)}static pattern(e){return O7(e)}static nullValidator(e){return PL(e)}static compose(e){return jL(e)}static composeAsync(e){return BL(e)}};function S7(t){return e=>{if(ss(e.value)||ss(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function A7(t){return e=>{if(ss(e.value)||ss(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function R7(t){return ss(t.value)?{required:!0}:null}function x7(t){return t.value===!0?null:{required:!0}}function M7(t){return ss(t.value)||T7.test(t.value)?null:{email:!0}}function N7(t){return e=>ss(e.value)||!NL(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function P7(t){return e=>NL(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function O7(t){if(!t)return PL;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(ss(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function PL(t){return null}function OL(t){return t!=null}function kL(t){return xs(t)?Pe(t):t}function FL(t){let e={};return t.forEach(n=>{e=n!=null?I(I({},e),n):e}),Object.keys(e).length===0?null:e}function LL(t,e){return e.map(n=>n(t))}function k7(t){return!t.validate}function VL(t){return t.map(e=>k7(e)?e:n=>e.validate(n))}function jL(t){if(!t)return null;let e=t.filter(OL);return e.length==0?null:function(n){return FL(LL(n,e))}}function PC(t){return t!=null?jL(VL(t)):null}function BL(t){if(!t)return null;let e=t.filter(OL);return e.length==0?null:function(n){let i=LL(n,e).map(kL);return wy(i).pipe(ee(FL))}}function OC(t){return t!=null?BL(VL(t)):null}function IL(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function UL(t){return t._rawValidators}function $L(t){return t._rawAsyncValidators}function NC(t){return t?Array.isArray(t)?t:[t]:[]}function zg(t,e){return Array.isArray(t)?t.includes(e):t===e}function bL(t,e){let n=NC(e);return NC(t).forEach(r=>{zg(n,r)||n.push(r)}),n}function DL(t,e){return NC(e).filter(n=>!zg(t,n))}var qg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=PC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=OC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},ir=class extends qg{get formDirective(){return null}get path(){return null}},So=class extends qg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Gg=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},F7={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ife=ye(I({},F7),{"[class.ng-submitted]":"isSubmitted"}),bfe=(()=>{let e=class e extends Gg{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(T(So,2))},e.\u0275dir=me({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&$i("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ye]});let t=e;return t})(),Dfe=(()=>{let e=class e extends Gg{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(T(ir,10))},e.\u0275dir=me({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&$i("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Ye]});let t=e;return t})();var xd="VALID",Hg="INVALID",bc="PENDING",Md="DISABLED";function HL(t){return(ey(t)?t.validators:t)||null}function L7(t){return Array.isArray(t)?PC(t):t||null}function zL(t,e){return(ey(e)?e.asyncValidators:t)||null}function V7(t){return Array.isArray(t)?OC(t):t||null}function ey(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function j7(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new S(1e3,"");if(!i[n])throw new S(1001,"")}function B7(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new S(1002,"")})}var Wg=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===xd}get invalid(){return this.status===Hg}get pending(){return this.status==bc}get disabled(){return this.status===Md}get enabled(){return this.status!==Md}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(bL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(bL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(DL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(DL(e,this._rawAsyncValidators))}hasValidator(e){return zg(this._rawValidators,e)}hasAsyncValidator(e){return zg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=bc,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Md,this.errors=null,this._forEachChild(i=>{i.disable(ye(I({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye(I({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=xd,this._forEachChild(i=>{i.enable(ye(I({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ye(I({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xd||this.status===bc)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Md:xd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=bc,this._hasOwnPendingAsyncValidator=!0;let n=kL(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ie,this.statusChanges=new Ie}_calculateStatus(){return this._allControlsDisabled()?Md:this.errors?Hg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bc)?bc:this._anyControlsHaveStatus(Hg)?Hg:xd}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ey(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=L7(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=V7(this._rawAsyncValidators)}},Kg=class extends Wg{constructor(e,n,i){super(HL(n),zL(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){B7(this,!0,e),Object.keys(e).forEach(i=>{j7(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Od=new x("CallSetDisabledState",{providedIn:"root",factory:()=>ty}),ty="always";function qL(t,e){return[...e.path,t]}function Qg(t,e,n=ty){kC(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),$7(t,e),z7(t,e),H7(t,e),U7(t,e)}function CL(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Zg(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Yg(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function U7(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function kC(t,e){let n=UL(t);e.validator!==null?t.setValidators(IL(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=$L(t);e.asyncValidator!==null?t.setAsyncValidators(IL(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();Yg(e._rawValidators,r),Yg(e._rawAsyncValidators,r)}function Zg(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=UL(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let r=$L(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}let i=()=>{};return Yg(e._rawValidators,i),Yg(e._rawAsyncValidators,i),n}function $7(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&GL(t,e)})}function H7(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&GL(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function GL(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function z7(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function WL(t,e){t==null,kC(t,e)}function q7(t,e){return Zg(t,e)}function KL(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function G7(t){return Object.getPrototypeOf(t.constructor)===Pd}function QL(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function YL(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(s=>{s.constructor===ML?n=s:G7(s)?i=s:r=s}),r||i||n||null}function W7(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var K7={provide:ir,useExisting:pn(()=>Q7)},Nd=Promise.resolve(),Q7=(()=>{let e=class e extends ir{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ie,this.form=new Kg({},PC(i),OC(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){Nd.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),Qg(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){Nd.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){Nd.then(()=>{let r=this._findContainer(i.path),s=new Kg({});WL(s,i),r.registerControl(i.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){Nd.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){Nd.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,QL(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(T(Xg,10),T(Jg,10),T(Od,8))},e.\u0275dir=me({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){r&1&&lt("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[fe.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Gt([K7]),Ye]});let t=e;return t})();function TL(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function SL(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var ZL=class extends Wg{constructor(e=null,n,i){super(HL(n),zL(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ey(n)&&(n.nonNullable||n.initialValueIsDefault)&&(SL(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){TL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){TL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){SL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Y7=t=>t instanceof ZL;var Z7={provide:So,useExisting:pn(()=>X7)},AL=Promise.resolve(),X7=(()=>{let e=class e extends So{constructor(i,r,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new ZL,this._registered=!1,this.name="",this.update=new Ie,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=YL(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),KL(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Qg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){AL.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&_n(r);AL.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?qL(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(T(ir,9),T(Xg,10),T(Jg,10),T(Ao,10),T(ui,8),T(Od,8))},e.\u0275dir=me({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[fe.None,"disabled","isDisabled"],model:[fe.None,"ngModel","model"],options:[fe.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Gt([Z7]),Ye,Ft]});let t=e;return t})();var J7={provide:Ao,useExisting:pn(()=>eY),multi:!0},eY=(()=>{let e=class e extends Pd{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=li(e)))(s||e)}})(),e.\u0275dir=me({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){r&1&&lt("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[Gt([J7]),Ye]});let t=e;return t})();var tY=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})();var XL=new x("NgModelWithFormControlWarning");var nY={provide:ir,useExisting:pn(()=>iY)},iY=(()=>{let e=class e extends ir{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ie,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Zg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return Qg(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){CL(i.control||null,i,!1),W7(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,QL(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,s=this.form.get(i.path);r!==s&&(CL(r||null,i),Y7(s)&&(Qg(s,i,this.callSetDisabledState),i.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);WL(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&q7(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){kC(this.form,this),this._oldForm&&Zg(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(T(Xg,10),T(Jg,10),T(Od,8))},e.\u0275dir=me({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,s){r&1&&lt("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[fe.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Gt([nY]),Ye,Ft]});let t=e;return t})();var rY={provide:So,useExisting:pn(()=>sY)},sY=(()=>{let e=class e extends So{set isDisabled(i){}constructor(i,r,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Ie,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=YL(this,o)}ngOnChanges(i){this._added||this._setUpControl(),KL(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return qL(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(T(ir,13),T(Xg,10),T(Jg,10),T(Ao,10),T(XL,8))},e.\u0275dir=me({type:e,selectors:[["","formControlName",""]],inputs:{name:[fe.None,"formControlName","name"],isDisabled:[fe.None,"disabled","isDisabled"],model:[fe.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Gt([rY]),Ye,Ft]});let t=e;return t})(),oY={provide:Ao,useExisting:pn(()=>eV),multi:!0};function JL(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function aY(t){return t.split(":")[0]}var eV=(()=>{let e=class e extends Pd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),s=JL(r,i);this.setProperty("value",s)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=aY(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=li(e)))(s||e)}})(),e.\u0275dir=me({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){r&1&&lt("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Gt([oY]),Ye]});let t=e;return t})(),Tfe=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(JL(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(Vn),T(eV,9))},e.\u0275dir=me({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),cY={provide:Ao,useExisting:pn(()=>tV),multi:!0};function RL(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function lY(t){return t.split(":")[0]}var tV=(()=>{let e=class e extends Pd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let s=i.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else r=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let s=[],o=r.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let l=a[c],u=this._getOptionValue(l.value);s.push(u)}}else{let a=r.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let u=this._getOptionValue(l.value);s.push(u)}}}this.value=s,i(s)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=lY(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=li(e)))(s||e)}})(),e.\u0275dir=me({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){r&1&&lt("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Gt([cY]),Ye]});let t=e;return t})(),Sfe=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(RL(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(RL(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(T(_e),T(Vn),T(tV,9))},e.\u0275dir=me({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var nV=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[tY]});let t=e;return t})();var FC=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Od,useValue:i.callSetDisabledState??ty}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[nV]});let t=e;return t})(),LC=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:XL,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:Od,useValue:i.callSetDisabledState??ty}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[nV]});let t=e;return t})();var uY=[Ns,FC,LC,Ww],Pfe=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[uY,Ns,FC,LC,Ww]});let t=e;return t})();export{I as a,ye as b,dY as c,hY as d,m as e,Ae as f,W as g,q as h,fT as i,$t as j,hX as k,Pe as l,H as m,jo as n,ee as o,ke as p,Yn as q,dr as r,Sc as s,zV as t,Ac as u,qV as v,Fe as w,Be as x,WV as y,YV as z,LT as A,Nn as B,Qt as C,Pn as D,Qe as E,pn as F,tj as G,D as H,ie as I,et as J,x as K,y as L,C as M,fe as N,ai as O,re as P,me as Q,Ft as R,X_ as S,J_ as T,pA as U,mA as V,li as W,av as X,yt as Y,uv as Z,sf as _,AB as $,Me as aa,gn as ba,qt as ca,Fre as da,_e as ea,oR as fa,jn as ga,T as ha,mR as ia,ui as ja,Ie as ka,L as la,Ye as ma,Ui as na,yn as oa,Xt as pa,hi as qa,Rs as ra,Ov as sa,$i as ta,VR as ua,kv as va,jre as wa,Bre as xa,Ure as ya,$re as za,Lt as Aa,Tt as Ba,Ir as Ca,Lv as Da,gf as Ea,K$ as Fa,lt as Ga,eH as Ha,ca as Ia,KR as Ja,QR as Ka,Ln as La,fH as Ma,_f as Na,nl as Oa,il as Pa,zre as Qa,la as Ra,gH as Sa,Ms as Ta,Gt as Ua,fi as Va,tx as Wa,qre as Xa,Gre as Ya,Wre as Za,Df as _a,pi as $a,Kre as ab,_n as bb,Y as cb,gx as db,mse as eb,wx as fb,gse as gb,Ex as hb,yse as ib,Ns as jb,Xv as kb,Lse as lb,Vse as mb,Tr as nb,iq as ob,Bn as pb,noe as qb,ioe as rb,Ww as sb,aoe as tb,Goe as ub,Woe as vb,Koe as wb,$s as xb,Vae as yb,sI as zb,LN as Ab,Uae as Bb,Xe as Cb,ad as Db,vle as Eb,wle as Fb,Ele as Gb,Ile as Hb,ble as Ib,Dle as Jb,Cle as Kb,Tle as Lb,Sle as Mb,Ale as Nb,Rle as Ob,xle as Pb,Mle as Qb,Nle as Rb,Ple as Sb,Ole as Tb,kle as Ub,Fle as Vb,Lle as Wb,aQ as Xb,gd as Yb,pc as Zb,tr as _b,aue as $b,We as ac,pue as bc,gc as cc,k1 as dc,yc as ec,qn as fc,wd as gc,L1 as hc,rC as ic,F1 as jc,_c as kc,vc as lc,Id as mc,kg as nc,Fg as oc,bd as pc,hC as qc,Gn as rc,q1 as sc,W1 as tc,Nde as uc,gC as vc,yC as wc,Td as xc,Pde as yc,Ode as zc,Ble as Ac,Ule as Bc,S0 as Cc,$le as Dc,Hle as Ec,zle as Fc,iue as Gc,iL as Hc,rL as Ic,Ug as Jc,e7 as Kc,n7 as Lc,Ehe as Mc,Ihe as Nc,bhe as Oc,Dhe as Pc,rfe as Qc,Ao as Rc,I7 as Sc,ML as Tc,Xg as Uc,EL as Vc,ir as Wc,So as Xc,bfe as Yc,Dfe as Zc,Kg as _c,Q7 as $c,ZL as ad,X7 as bd,eY as cd,iY as dd,sY as ed,eV as fd,Tfe as gd,Sfe as hd,FC as id,Pfe as jd};
