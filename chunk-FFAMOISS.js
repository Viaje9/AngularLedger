var yV=Object.create;var fy=Object.defineProperty,_V=Object.defineProperties,vV=Object.getOwnPropertyDescriptor,wV=Object.getOwnPropertyDescriptors,EV=Object.getOwnPropertyNames,Ud=Object.getOwnPropertySymbols,eT=Object.getPrototypeOf,py=Object.prototype.hasOwnProperty,tT=Object.prototype.propertyIsEnumerable,IV=Reflect.get;var JC=(t,e,n)=>e in t?fy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I=(t,e)=>{for(var n in e||={})py.call(e,n)&&JC(t,n,e[n]);if(Ud)for(var n of Ud(e))tT.call(e,n)&&JC(t,n,e[n]);return t},pe=(t,e)=>_V(t,wV(e));var nT=(t,e)=>{var n={};for(var r in t)py.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Ud)for(var r of Ud(t))e.indexOf(r)<0&&tT.call(t,r)&&(n[r]=t[r]);return n};var xY=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var bV=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of EV(e))!py.call(t,i)&&i!==n&&fy(t,i,{get:()=>e[i],enumerable:!(r=vV(e,i))||r.enumerable});return t};var NY=(t,e,n)=>(n=t!=null?yV(eT(t)):{},bV(e||!t||!t.__esModule?fy(n,"default",{value:t,enumerable:!0}):n,t));var Qn=(t,e,n)=>IV(eT(t),n,e);var p=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});function DV(t,e){return Object.is(t,e)}var at=null,Ac=!1,$d=1,Rr=Symbol("SIGNAL");function me(t){let e=at;return at=t,e}function CV(){return Ac}var Hd={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function gy(t){if(Ac)throw new Error("");if(at===null)return;at.consumerOnSignalRead(t);let e=at.nextProducerIndex++;if(No(at),e<at.producerNode.length&&at.producerNode[e]!==t&&Rc(at)){let n=at.producerNode[e];qd(n,at.producerIndexOfThis[e])}at.producerNode[e]!==t&&(at.producerNode[e]=t,at.producerIndexOfThis[e]=Rc(at)?oT(t,at,e):0),at.producerLastReadVersion[e]=t.version}function TV(){$d++}function SV(t){if(!(Rc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===$d)){if(!t.producerMustRecompute(t)&&!zd(t)){t.dirty=!1,t.lastCleanEpoch=$d;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=$d}}function rT(t){if(t.liveConsumerNode===void 0)return;let e=Ac;Ac=!0;try{for(let n of t.liveConsumerNode)n.dirty||sT(n)}finally{Ac=e}}function iT(){return at?.consumerAllowSignalWrites!==!1}function sT(t){t.dirty=!0,rT(t),t.consumerMarkedDirty?.(t)}function yy(t){return t&&(t.nextProducerIndex=0),me(t)}function _y(t,e){if(me(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Rc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)qd(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function zd(t){No(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(SV(n),r!==n.version))return!0}return!1}function vy(t){if(No(t),Rc(t))for(let e=0;e<t.producerNode.length;e++)qd(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function oT(t,e,n){if(aT(t),No(t),t.liveConsumerNode.length===0)for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=oT(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function qd(t,e){if(aT(t),No(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)qd(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];No(i),i.producerIndexOfThis[r]=e}}function Rc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function No(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function aT(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function AV(){throw new Error}var cT=AV;function lT(){cT()}function uT(t){cT=t}var RV=null;function dT(t){let e=Object.create(wy);e.value=t;let n=()=>(gy(e),e.value);return n[Rr]=e,n}function Gd(t,e){iT()||lT(),t.equal(t.value,e)||(t.value=e,MV(t))}function hT(t,e){iT()||lT(),Gd(t,e(t.value))}var wy=pe(I({},Hd),{equal:DV,value:void 0});function MV(t){t.version++,TV(),rT(t),RV?.()}function fT(t,e,n){let r=Object.create(xV);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;let i=c=>{r.cleanupFn=c};function s(c){return c.fn===null&&c.schedule===null}function o(c){s(c)||(vy(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=my)}let a=()=>{if(r.fn===null)return;if(CV())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!zd(r))return;r.hasRun=!0;let c=yy(r);try{r.cleanupFn(),r.cleanupFn=my,r.fn(i)}finally{_y(r,c)}};return r.ref={notify:()=>sT(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>o(r),[Rr]:r},r.ref}var my=()=>{},xV=pe(I({},Hd),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:my});function U(t){return typeof t=="function"}function Po(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Wd=Po(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function us(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ae=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(U(r))try{r()}catch(s){e=s instanceof Wd?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{pT(s)}catch(o){e=e??[],o instanceof Wd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Wd(e)}}add(e){var n;if(e&&e!==this)if(this.closed)pT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&us(n,e)}remove(e){let{_finalizers:n}=this;n&&us(n,e),e instanceof t&&e._removeParent(this)}};Ae.EMPTY=(()=>{let t=new Ae;return t.closed=!0,t})();var Ey=Ae.EMPTY;function Kd(t){return t instanceof Ae||t&&"closed"in t&&U(t.remove)&&U(t.add)&&U(t.unsubscribe)}function pT(t){U(t)?t():t.unsubscribe()}var xn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Oo={setTimeout(t,e,...n){let{delegate:r}=Oo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Oo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Qd(t){Oo.setTimeout(()=>{let{onUnhandledError:e}=xn;if(e)e(t);else throw t})}function Mr(){}var mT=Iy("C",void 0,void 0);function gT(t){return Iy("E",void 0,t)}function yT(t){return Iy("N",t,void 0)}function Iy(t,e,n){return{kind:t,value:e,error:n}}var ds=null;function ko(t){if(xn.useDeprecatedSynchronousErrorHandling){let e=!ds;if(e&&(ds={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ds;if(ds=null,n)throw r}}else t()}function _T(t){xn.useDeprecatedSynchronousErrorHandling&&ds&&(ds.errorThrown=!0,ds.error=t)}var hs=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Kd(e)&&e.add(this)):this.destination=OV}static create(e,n,r){return new xr(e,n,r)}next(e){this.isStopped?Dy(yT(e),this):this._next(e)}error(e){this.isStopped?Dy(gT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Dy(mT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},NV=Function.prototype.bind;function by(t,e){return NV.call(t,e)}var Cy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Yd(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Yd(r)}else Yd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Yd(n)}}},xr=class extends hs{constructor(e,n,r){super();let i;if(U(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&xn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&by(e.next,s),error:e.error&&by(e.error,s),complete:e.complete&&by(e.complete,s)}):i=e}this.destination=new Cy(i)}};function Yd(t){xn.useDeprecatedSynchronousErrorHandling?_T(t):Qd(t)}function PV(t){throw t}function Dy(t,e){let{onStoppedNotification:n}=xn;n&&Oo.setTimeout(()=>n(t,e))}var OV={closed:!0,next:Mr,error:PV,complete:Mr};var Fo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nt(t){return t}function Zd(...t){return Ty(t)}function Ty(t){return t.length===0?Nt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var W=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=FV(n)?n:new xr(n,r,i);return ko(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=vT(r),new r((i,s)=>{let o=new xr({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Fo](){return this}pipe(...n){return Ty(n)(this)}toPromise(n){return n=vT(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function vT(t){var e;return(e=t??xn.Promise)!==null&&e!==void 0?e:Promise}function kV(t){return t&&U(t.next)&&U(t.error)&&U(t.complete)}function FV(t){return t&&t instanceof hs||kV(t)&&Kd(t)}function Sy(t){return U(t?.lift)}function Q(t){return e=>{if(Sy(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function X(t,e,n,r,i){return new Ay(t,e,n,r,i)}var Ay=class extends hs{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Lo(){return Q((t,e)=>{let n=null;t._refCount++;let r=X(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ii=class extends W{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Sy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ae;let n=this.getSubject();e.add(this.source.subscribe(X(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ae.EMPTY)}return e}refCount(){return Lo()(this)}};var Vo={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame,{delegate:r}=Vo;r&&(e=r.requestAnimationFrame,n=r.cancelAnimationFrame);let i=e(s=>{n=void 0,t(s)});return new Ae(()=>n?.(i))},requestAnimationFrame(...t){let{delegate:e}=Vo;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){let{delegate:e}=Vo;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};var wT=Po(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var H=(()=>{class t extends W{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Xd(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new wT}next(n){ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Ey:(this.currentObservers=null,s.push(n),new Ae(()=>{this.currentObservers=null,us(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new W;return n.source=this,n}}return t.create=(e,n)=>new Xd(e,n),t})(),Xd=class extends H{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Ey}};var Qe=class extends H{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Mc={now(){return(Mc.delegate||Date).now()},delegate:void 0};var fs=class extends H{constructor(e=1/0,n=1/0,r=Mc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Jd=class extends Ae{constructor(e,n){super()}schedule(e,n=0){return this}};var xc={setInterval(t,e,...n){let{delegate:r}=xc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=xc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var si=class extends Jd{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return xc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&xc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,us(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var jo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};jo.now=Mc.now;var oi=class extends jo{constructor(e,n=jo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var hn=new oi(si),Ry=hn;var eh=class extends si{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var th=class extends oi{};var My=new th(eh);var nh=class extends si{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,r=0){return r!==null&&r>0?super.requestAsyncId(e,n,r):(e.actions.push(this),e._scheduled||(e._scheduled=Vo.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,n,r);let{actions:s}=e;n!=null&&((i=s[s.length-1])===null||i===void 0?void 0:i.id)!==n&&(Vo.cancelAnimationFrame(n),e._scheduled=void 0)}};var rh=class extends oi{flush(e){this._active=!0;let n=this._scheduled;this._scheduled=void 0;let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===n&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===n&&r.shift();)e.unsubscribe();throw i}}};var ET=new rh(nh);var Pt=new W(t=>t.complete());function ih(t){return t&&U(t.schedule)}function xy(t){return t[t.length-1]}function sh(t){return U(xy(t))?t.pop():void 0}function Yn(t){return ih(xy(t))?t.pop():void 0}function IT(t,e){return typeof xy(t)=="number"?t.pop():e}function oh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function NX(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function DT(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function bT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ps(t){return this instanceof ps?(this.v=t,this):new ps(t)}function CT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(m,g){s.push([h,f,m,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(m){d(s[0][3],m)}}function c(h){h.value instanceof ps?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function TT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof bT=="function"?bT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Bo=t=>t&&typeof t.length=="number"&&typeof t!="function";function ah(t){return U(t?.then)}function ch(t){return U(t[Fo])}function lh(t){return Symbol.asyncIterator&&U(t?.[Symbol.asyncIterator])}function uh(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function LV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var dh=LV();function hh(t){return U(t?.[dh])}function fh(t){return CT(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ps(n.read());if(i)return yield ps(void 0);yield yield ps(r)}}finally{n.releaseLock()}})}function ph(t){return U(t?.getReader)}function Ie(t){if(t instanceof W)return t;if(t!=null){if(ch(t))return VV(t);if(Bo(t))return jV(t);if(ah(t))return BV(t);if(lh(t))return ST(t);if(hh(t))return UV(t);if(ph(t))return $V(t)}throw uh(t)}function VV(t){return new W(e=>{let n=t[Fo]();if(U(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function jV(t){return new W(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function BV(t){return new W(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Qd)})}function UV(t){return new W(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function ST(t){return new W(e=>{HV(t,e).catch(n=>e.error(n))})}function $V(t){return ST(fh(t))}function HV(t,e){var n,r,i,s;return DT(this,void 0,void 0,function*(){try{for(n=TT(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function $t(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function ai(t,e=0){return Q((n,r)=>{n.subscribe(X(r,i=>$t(r,t,()=>r.next(i),e),()=>$t(r,t,()=>r.complete(),e),i=>$t(r,t,()=>r.error(i),e)))})}function ci(t,e=0){return Q((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function AT(t,e){return Ie(t).pipe(ci(e),ai(e))}function RT(t,e){return Ie(t).pipe(ci(e),ai(e))}function MT(t,e){return new W(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function xT(t,e){return new W(n=>{let r;return $t(n,e,()=>{r=t[dh](),$t(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>U(r?.return)&&r.return()})}function mh(t,e){if(!t)throw new Error("Iterable cannot be null");return new W(n=>{$t(n,e,()=>{let r=t[Symbol.asyncIterator]();$t(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function NT(t,e){return mh(fh(t),e)}function PT(t,e){if(t!=null){if(ch(t))return AT(t,e);if(Bo(t))return MT(t,e);if(ah(t))return RT(t,e);if(lh(t))return mh(t,e);if(hh(t))return xT(t,e);if(ph(t))return NT(t,e)}throw uh(t)}function Oe(t,e){return e?PT(t,e):Ie(t)}function z(...t){let e=Yn(t);return Oe(t,e)}function Uo(t,e){let n=U(t)?t:()=>t,r=i=>i.error(n());return new W(e?i=>e.schedule(r,0,i):r)}function gh(t){return!!t&&(t instanceof W||U(t.lift)&&U(t.subscribe))}var Nr=Po(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function OT(t){return t instanceof Date&&!isNaN(t)}function se(t,e){return Q((n,r)=>{let i=0;n.subscribe(X(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:zV}=Array;function qV(t,e){return zV(e)?t(...e):t(e)}function $o(t){return se(e=>qV(t,e))}var{isArray:GV}=Array,{getPrototypeOf:WV,prototype:KV,keys:QV}=Object;function yh(t){if(t.length===1){let e=t[0];if(GV(e))return{args:e,keys:null};if(YV(e)){let n=QV(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function YV(t){return t&&typeof t=="object"&&WV(t)===KV}function _h(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function ms(...t){let e=Yn(t),n=sh(t),{args:r,keys:i}=yh(t);if(r.length===0)return Oe([],e);let s=new W(ZV(r,e,i?o=>_h(i,o):Nt));return n?s.pipe($o(n)):s}function ZV(t,e,n=Nt){return r=>{kT(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)kT(e,()=>{let l=Oe(t[c],e),u=!1;l.subscribe(X(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function kT(t,e,n){t?$t(n,t,e):e()}function FT(t,e,n,r,i,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=g=>l<r?m(g):c.push(g),m=g=>{s&&e.next(g),l++;let v=!1;Ie(n(g,u++)).subscribe(X(e,E=>{i?.(E),s?f(E):e.next(E)},()=>{v=!0},void 0,()=>{if(v)try{for(l--;c.length&&l<r;){let E=c.shift();o?$t(e,o,()=>m(E)):m(E)}h()}catch(E){e.error(E)}}))};return t.subscribe(X(e,f,()=>{d=!0,h()})),()=>{a?.()}}function je(t,e,n=1/0){return U(e)?je((r,i)=>se((s,o)=>e(r,s,i,o))(Ie(t(r,i))),n):(typeof e=="number"&&(n=e),Q((r,i)=>FT(r,i,t,n)))}function li(t=1/0){return je(Nt,t)}function LT(){return li(1)}function Zn(...t){return LT()(Oe(t,Yn(t)))}function ui(t){return new W(e=>{Ie(t()).subscribe(e)})}function Ny(...t){let e=sh(t),{args:n,keys:r}=yh(t),i=new W(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;Ie(n[u]).subscribe(X(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(r?_h(r,a):a),s.complete())}))}});return e?i.pipe($o(e)):i}var XV=["addListener","removeListener"],JV=["addEventListener","removeEventListener"],ej=["on","off"];function Nc(t,e,n,r){if(U(n)&&(r=n,n=void 0),r)return Nc(t,e,n).pipe($o(r));let[i,s]=rj(t)?JV.map(o=>a=>t[o](e,a,n)):tj(t)?XV.map(VT(t,e)):nj(t)?ej.map(VT(t,e)):[];if(!i&&Bo(t))return je(o=>Nc(o,e,n))(Ie(t));if(!i)throw new TypeError("Invalid event target");return new W(o=>{let a=(...c)=>o.next(1<c.length?c:c[0]);return i(a),()=>s(a)})}function VT(t,e){return n=>r=>t[n](e,r)}function tj(t){return U(t.addListener)&&U(t.removeListener)}function nj(t){return U(t.on)&&U(t.off)}function rj(t){return U(t.addEventListener)&&U(t.removeEventListener)}function Ho(t=0,e,n=Ry){let r=-1;return e!=null&&(ih(e)?n=e:r=e),new W(i=>{let s=OT(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function ij(t=0,e=hn){return t<0&&(t=0),Ho(t,t,e)}function Pc(...t){let e=Yn(t),n=IT(t,1/0),r=t;return r.length?r.length===1?Ie(r[0]):li(n)(Oe(r,e)):Pt}var sj=new W(Mr);function Fe(t,e){return Q((n,r)=>{let i=0;n.subscribe(X(r,s=>t.call(e,s,i++)&&r.next(s)))})}function jT(t){return Q((e,n)=>{let r=!1,i=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;let l=i;i=null,n.next(l)}o&&n.complete()},c=()=>{s=null,o&&n.complete()};e.subscribe(X(n,l=>{r=!0,i=l,s||Ie(t(l)).subscribe(s=X(n,a,c))},()=>{o=!0,(!r||!s||s.closed)&&n.complete()}))})}function vh(t,e=hn){return jT(()=>Ho(t,e))}function di(t){return Q((e,n)=>{let r=null,i=!1,s;r=e.subscribe(X(n,void 0,void 0,o=>{s=Ie(t(o,di(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function BT(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(X(o,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function gs(t,e){return U(e)?je(t,e,1):je(t,1)}function UT(t){return new W(e=>t.subscribe(e))}var oj={connector:()=>new H};function wh(t,e=oj){let{connector:n}=e;return Q((r,i)=>{let s=n();Ie(t(UT(s))).subscribe(i),i.add(r.subscribe(s))})}function Eh(t,e=hn){return Q((n,r)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=s;s=null,r.next(l)}};function c(){let l=o+t,u=e.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}n.subscribe(X(r,l=>{s=l,o=e.now(),i||(i=e.schedule(c,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function hi(t){return Q((e,n)=>{let r=!1;e.subscribe(X(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function He(t){return t<=0?()=>Pt:Q((e,n)=>{let r=0;e.subscribe(X(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function $T(){return Q((t,e)=>{t.subscribe(X(e,Mr))})}function Oc(t){return se(()=>t)}function Py(t,e){return e?n=>Zn(e.pipe(He(1),$T()),n.pipe(Py(t))):je((n,r)=>Ie(t(n,r)).pipe(He(1),Oc(n)))}function aj(t,e=hn){let n=Ho(t,e);return Py(()=>n)}function kc(t,e=Nt){return t=t??cj,Q((n,r)=>{let i,s=!0;n.subscribe(X(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function cj(t,e){return t===e}function Ih(t=lj){return Q((e,n)=>{let r=!1;e.subscribe(X(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function lj(){return new Nr}function Fc(t){return Q((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Xn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Fe((i,s)=>t(i,s,r)):Nt,He(1),n?hi(e):Ih(()=>new Nr))}function zo(t){return t<=0?()=>Pt:Q((e,n)=>{let r=[];e.subscribe(X(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Oy(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Fe((i,s)=>t(i,s,r)):Nt,zo(1),n?hi(e):Ih(()=>new Nr))}function HT(t,e){let n=U(t)?t:()=>t;return U(e)?wh(e,{connector:n}):r=>new ii(r,n)}function uj(t){return t?e=>wh(t)(e):e=>HT(new H)(e)}function bh(t,e){return Q(BT(t,e,arguments.length>=2,!0))}function zT(t={}){let{connector:e=()=>new H,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,c,l=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=c=void 0,u=d=!1},m=()=>{let g=o;f(),g?.unsubscribe()};return Q((g,v)=>{l++,!d&&!u&&h();let E=c=c??e();v.add(()=>{l--,l===0&&!d&&!u&&(a=ky(m,i))}),E.subscribe(v),!o&&l>0&&(o=new xr({next:R=>E.next(R),error:R=>{d=!0,h(),a=ky(f,n,R),E.error(R)},complete:()=>{u=!0,h(),a=ky(f,r),E.complete()}}),Ie(g).subscribe(o))})(s)}}function ky(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new xr({next:()=>{r.unsubscribe(),t()}});return Ie(e(...n)).subscribe(r)}function qT(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,zT({connector:()=>new fs(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Lc(t){return Fe((e,n)=>t<=n)}function Nn(...t){let e=Yn(t);return Q((n,r)=>{(e?Zn(t,n,e):Zn(t,n)).subscribe(r)})}function Zt(t,e){return Q((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(X(r,c=>{i?.unsubscribe();let l=0,u=s++;Ie(t(c,u)).subscribe(i=X(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Jn(t){return Q((e,n)=>{Ie(t).subscribe(X(n,()=>n.complete(),Mr)),!n.closed&&e.subscribe(n)})}function et(t,e,n){let r=U(t)||e||n?{next:t,error:e,complete:n}:t;return r?Q((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(X(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Nt}var PS="https://g.co/ng/security#xss",T=class extends Error{constructor(e,n){super(nv(e,n)),this.code=e}};function nv(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var OS=Symbol("InputSignalNode#UNSET"),dj=pe(I({},wy),{transformFn:void 0,applyValueToInputSignal(t,e){Gd(t,e)}});function kS(t,e){let n=Object.create(dj);n.value=t,n.transformFn=e?.transform;function r(){if(gy(n),n.value===OS)throw new T(-950,!1);return n.value}return r[Rr]=n,r}function Zc(t){return{toString:t}.toString()}var Dh="__parameters__";function hj(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function FS(t,e,n){return Zc(()=>{let r=hj(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Dh)?c[Dh]:Object.defineProperty(c,Dh,{value:[]})[Dh];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var tt=globalThis;function xe(t){for(let e in t)if(t[e]===xe)return e;throw Error("Could not find renamed property on target object.")}function fj(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function kt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(kt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Xy(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var pj=xe({__forward_ref__:xe});function mn(t){return t.__forward_ref__=mn,t.toString=function(){return kt(this())},t}function Ot(t){return LS(t)?t():t}function LS(t){return typeof t=="function"&&t.hasOwnProperty(pj)&&t.__forward_ref__===mn}function C(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ae(t){return{providers:t.providers||[],imports:t.imports||[]}}function sf(t){return GT(t,jS)||GT(t,BS)}function VS(t){return sf(t)!==null}function GT(t,e){return t.hasOwnProperty(e)?t[e]:null}function mj(t){let e=t&&(t[jS]||t[BS]);return e||null}function WT(t){return t&&(t.hasOwnProperty(KT)||t.hasOwnProperty(gj))?t[KT]:null}var jS=xe({\u0275prov:xe}),KT=xe({\u0275inj:xe}),BS=xe({ngInjectableDef:xe}),gj=xe({ngInjectorDef:xe}),x=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=C({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function US(t){return t&&!!t.\u0275providers}var yj=xe({\u0275cmp:xe}),_j=xe({\u0275dir:xe}),vj=xe({\u0275pipe:xe}),wj=xe({\u0275mod:xe}),Lh=xe({\u0275fac:xe}),Vc=xe({__NG_ELEMENT_ID__:xe}),QT=xe({__NG_ENV_ID__:xe});function Xc(t){return typeof t=="string"?t:t==null?"":String(t)}function Ej(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Xc(t)}function Ij(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new T(-200,t)}function rv(t,e){throw new T(-201,!1)}var he=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(he||{}),Jy;function $S(){return Jy}function Ht(t){let e=Jy;return Jy=t,e}function HS(t,e,n){let r=sf(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&he.Optional)return null;if(e!==void 0)return e;rv(t,"Injector")}var bj={},jc=bj,e_="__NG_DI_FLAG__",Vh="ngTempTokenPath",Dj="ngTokenPath",Cj=/\n/gm,Tj="\u0275",YT="__source",Qo;function Sj(){return Qo}function fi(t){let e=Qo;return Qo=t,e}function Aj(t,e=he.Default){if(Qo===void 0)throw new T(-203,!1);return Qo===null?HS(t,void 0,e):Qo.get(t,e&he.Optional?null:void 0,e)}function y(t,e=he.Default){return($S()||Aj)(Ot(t),e)}function b(t,e=he.Default){return y(t,of(e))}function of(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function t_(t){let e=[];for(let n=0;n<t.length;n++){let r=Ot(t[n]);if(Array.isArray(r)){if(r.length===0)throw new T(900,!1);let i,s=he.Default;for(let o=0;o<r.length;o++){let a=r[o],c=Rj(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(y(i,s))}else e.push(y(r))}return e}function zS(t,e){return t[e_]=e,t.prototype[e_]=e,t}function Rj(t){return t[e_]}function Mj(t,e,n,r){let i=t[Vh];throw e[YT]&&i.unshift(e[YT]),t.message=xj(`
`+t.message,i,n,r),t[Dj]=i,t[Vh]=null,t}function xj(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Tj?t.slice(2):t;let i=kt(e);if(Array.isArray(e))i=e.map(kt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):kt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Cj,`
  `)}`}var mt=zS(FS("Optional"),8);var iv=zS(FS("SkipSelf"),4);function ws(t,e){let n=t.hasOwnProperty(Lh);return n?t[Lh]:null}function Nj(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function Pj(t){return t.flat(Number.POSITIVE_INFINITY)}function sv(t,e){t.forEach(n=>Array.isArray(n)?sv(n,e):e(n))}function qS(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function jh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Oj(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function kj(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function ov(t,e,n){let r=Jc(t,e);return r>=0?t[r|1]=n:(r=~r,kj(t,r,e,n)),r}function Fy(t,e){let n=Jc(t,e);if(n>=0)return t[n|1]}function Jc(t,e){return Fj(t,e,1)}function Fj(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Zo={},zt=[],Xo=new x(""),GS=new x("",-1),WS=new x(""),Bh=class{get(e,n=jc){if(n===jc){let r=new Error(`NullInjectorError: No provider for ${kt(e)}!`);throw r.name="NullInjectorError",r}return n}},KS=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(KS||{}),nr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(nr||{}),fe=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(fe||{});function Lj(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function n_(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];Vj(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function QS(t){return t===3||t===4||t===6}function Vj(t){return t.charCodeAt(0)===64}function Bc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?ZT(t,n,i,null,e[++r]):ZT(t,n,i,null,null))}}return t}function ZT(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var YS="ng-template";function jj(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Lj(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(av(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function av(t){return t.type===4&&t.value!==YS}function Bj(t,e,n){let r=t.type===4&&!n?YS:t.value;return e===r}function Uj(t,e,n){let r=4,i=t.attrs,s=i!==null?zj(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Pn(r)&&!Pn(c))return!1;if(o&&Pn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!Bj(t,c,n)||c===""&&e.length===1){if(Pn(r))return!1;o=!0}}else if(r&8){if(i===null||!jj(t,i,c,n)){if(Pn(r))return!1;o=!0}}else{let l=e[++a],u=$j(c,i,av(t),n);if(u===-1){if(Pn(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Pn(r))return!1;o=!0}}}}return Pn(r)||o}function Pn(t){return(t&1)===0}function $j(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return qj(e,t)}function ZS(t,e,n=!1){for(let r=0;r<e.length;r++)if(Uj(t,e[r],n))return!0;return!1}function Hj(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function zj(t){for(let e=0;e<t.length;e++){let n=t[e];if(QS(n))return e}return t.length}function qj(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Gj(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function XT(t,e){return t?":not("+e.trim()+")":e}function Wj(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Pn(o)&&(e+=XT(s,i),i=""),r=o,s=s||!Pn(r);n++}return i!==""&&(e+=XT(s,i)),e}function Kj(t){return t.map(Wj).join(",")}function Qj(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Pn(i))break;i=s}r++}return{attrs:e,classes:n}}function or(t){return Zc(()=>{let e=rA(t),n=pe(I({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===KS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||nr.Emulated,styles:t.styles||zt,_:null,schemas:t.schemas||null,tView:null,id:""});iA(n);let r=t.dependencies;return n.directiveDefs=eS(r,!1),n.pipeDefs=eS(r,!0),n.id=Xj(n),n})}function Yj(t){return mi(t)||JS(t)}function Zj(t){return t!==null}function ce(t){return Zc(()=>({type:t.type,bootstrap:t.bootstrap||zt,declarations:t.declarations||zt,imports:t.imports||zt,exports:t.exports||zt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function JT(t,e){if(t==null)return Zo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=fe.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==fe.None?[r,a]:r,e[s]=o):n[s]=r}return n}function ye(t){return Zc(()=>{let e=rA(t);return iA(e),e})}function XS(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function mi(t){return t[yj]||null}function JS(t){return t[_j]||null}function eA(t){return t[vj]||null}function tA(t){let e=mi(t)||JS(t)||eA(t);return e!==null?e.standalone:!1}function nA(t,e){let n=t[wj]||null;if(!n&&e===!0)throw new Error(`Type ${kt(t)} does not have '\u0275mod' property.`);return n}function rA(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Zo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||zt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:JT(t.inputs,e),outputs:JT(t.outputs),debugInfo:null}}function iA(t){t.features?.forEach(e=>e(t))}function eS(t,e){if(!t)return null;let n=e?eA:Yj;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(Zj)}function Xj(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function af(t){return{\u0275providers:t}}function Jj(...t){return{\u0275providers:sA(!0,t),\u0275fromNgModule:!0}}function sA(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return sv(e,o=>{let a=o;r_(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&oA(i,s),n}function oA(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];cv(i,s=>{e(s,r)})}}function r_(t,e,n,r){if(t=Ot(t),!t)return!1;let i=null,s=WT(t),o=!s&&mi(t);if(!s&&!o){let c=t.ngModule;if(s=WT(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)r_(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{sv(s.imports,u=>{r_(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&oA(l,e)}if(!a){let l=ws(i)||(()=>new i);e({provide:i,useFactory:l,deps:zt},i),e({provide:WS,useValue:i,multi:!0},i),e({provide:Xo,useValue:()=>y(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;cv(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function cv(t,e){for(let n of t)US(n)&&(n=n.\u0275providers),Array.isArray(n)?cv(n,e):e(n)}var eB=xe({provide:String,useValue:xe});function aA(t){return t!==null&&typeof t=="object"&&eB in t}function tB(t){return!!(t&&t.useExisting)}function nB(t){return!!(t&&t.useFactory)}function Jo(t){return typeof t=="function"}function rB(t){return!!t.useClass}var cf=new x(""),Mh={},iB={},Ly;function lv(){return Ly===void 0&&(Ly=new Bh),Ly}var qt=class{},Uc=class extends qt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,s_(e,o=>this.processProvider(o)),this.records.set(GS,qo(void 0,this)),i.has("environment")&&this.records.set(qt,qo(void 0,this));let s=this.records.get(cf);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(WS,zt,he.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=fi(this),r=Ht(void 0),i;try{return e()}finally{fi(n),Ht(r)}}get(e,n=jc,r=he.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(QT))return e[QT](this);r=of(r);let i,s=fi(this),o=Ht(void 0);try{if(!(r&he.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=lB(e)&&sf(e);l&&this.injectableDefInScope(l)?c=qo(i_(e),Mh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&he.Self?lv():this.parent;return n=r&he.Optional&&n===jc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Vh]=a[Vh]||[]).unshift(kt(e)),s)throw a;return Mj(a,e,"R3InjectorError",this.source)}else throw a}finally{Ht(o),fi(s)}}resolveInjectorInitializers(){let e=me(null),n=fi(this),r=Ht(void 0),i;try{let s=this.get(Xo,zt,he.Self);for(let o of s)o()}finally{fi(n),Ht(r),me(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(kt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new T(205,!1)}processProvider(e){e=Ot(e);let n=Jo(e)?e:Ot(e&&e.provide),r=oB(e);if(!Jo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=qo(void 0,Mh,!0),i.factory=()=>t_(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=me(null);try{return n.value===Mh&&(n.value=iB,n.value=n.factory()),typeof n.value=="object"&&n.value&&cB(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{me(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ot(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function i_(t){let e=sf(t),n=e!==null?e.factory:ws(t);if(n!==null)return n;if(t instanceof x)throw new T(204,!1);if(t instanceof Function)return sB(t);throw new T(204,!1)}function sB(t){if(t.length>0)throw new T(204,!1);let n=mj(t);return n!==null?()=>n.factory(t):()=>new t}function oB(t){if(aA(t))return qo(void 0,t.useValue);{let e=cA(t);return qo(e,Mh)}}function cA(t,e,n){let r;if(Jo(t)){let i=Ot(t);return ws(i)||i_(i)}else if(aA(t))r=()=>Ot(t.useValue);else if(nB(t))r=()=>t.useFactory(...t_(t.deps||[]));else if(tB(t))r=()=>y(Ot(t.useExisting));else{let i=Ot(t&&(t.useClass||t.provide));if(aB(t))r=()=>new i(...t_(t.deps));else return ws(i)||i_(i)}return r}function qo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function aB(t){return!!t.deps}function cB(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function lB(t){return typeof t=="function"||typeof t=="object"&&t instanceof x}function s_(t,e){for(let n of t)Array.isArray(n)?s_(n,e):n&&US(n)?s_(n.\u0275providers,e):e(n)}function kr(t,e){t instanceof Uc&&t.assertNotDestroyed();let n,r=fi(t),i=Ht(void 0);try{return e()}finally{fi(r),Ht(i)}}function lA(){return $S()!==void 0||Sj()!=null}function uA(t){if(!lA())throw new T(-203,!1)}function uB(t){return typeof t=="function"}var ar=0,ne=1,K=2,pt=3,kn=4,Jt=5,ea=6,$c=7,bt=8,ta=9,Fn=10,Be=11,Hc=12,tS=13,aa=14,fn=15,el=16,Go=17,Pr=18,lf=19,dA=20,pi=21,xh=22,Es=23,Ct=25,uv=1;var Is=7,Uh=8,na=9,Dt=10,dv=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(dv||{});function _s(t){return Array.isArray(t)&&typeof t[uv]=="object"}function Fr(t){return Array.isArray(t)&&t[uv]===!0}function hv(t){return(t.flags&4)!==0}function uf(t){return t.componentOffset>-1}function df(t){return(t.flags&1)===1}function Or(t){return!!t.template}function dB(t){return(t[K]&512)!==0}var o_=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function hA(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ft(){return fA}function fA(t){return t.type.prototype.ngOnChanges&&(t.setInput=fB),hB}Ft.ngInherit=!0;function hB(){let t=mA(this),e=t?.current;if(e){let n=t.previous;if(n===Zo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function fB(t,e,n,r,i){let s=this.declaredInputs[r],o=mA(t)||pB(t,{previous:Zo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new o_(l&&l.currentValue,n,c===Zo),hA(t,e,i,n)}var pA="__ngSimpleChanges__";function mA(t){return t[pA]||null}function pB(t,e){return t[pA]=e}var nS=null;var er=function(t,e,n){nS?.(t,e,n)},gA="svg",mB="math",gB=!1;function yB(){return gB}function rr(t){for(;Array.isArray(t);)t=t[ar];return t}function _B(t){for(;Array.isArray(t);){if(typeof t[uv]=="object")return t;t=t[ar]}return null}function yA(t,e){return rr(e[t])}function gn(t,e){return rr(e[t.index])}function fv(t,e){return t.data[e]}function _A(t,e){return t[e]}function _i(t,e){let n=e[t];return _s(n)?n:n[ar]}function vB(t){return(t[K]&4)===4}function pv(t){return(t[K]&128)===128}function wB(t){return Fr(t[pt])}function ra(t,e){return e==null?null:t[e]}function vA(t){t[Go]=0}function EB(t){t[K]&1024||(t[K]|=1024,pv(t)&&zc(t))}function IB(t,e){for(;t>0;)e=e[aa],t--;return e}function mv(t){return!!(t[K]&9216||t[Es]?.dirty)}function a_(t){t[Fn].changeDetectionScheduler?.notify(1),mv(t)?zc(t):t[K]&64&&(yB()?(t[K]|=1024,zc(t)):t[Fn].changeDetectionScheduler?.notify())}function zc(t){t[Fn].changeDetectionScheduler?.notify();let e=qc(t);for(;e!==null&&!(e[K]&8192||(e[K]|=8192,!pv(e)));)e=qc(e)}function wA(t,e){if((t[K]&256)===256)throw new T(911,!1);t[pi]===null&&(t[pi]=[]),t[pi].push(e)}function bB(t,e){if(t[pi]===null)return;let n=t[pi].indexOf(e);n!==-1&&t[pi].splice(n,1)}function qc(t){let e=t[pt];return Fr(e)?e[pt]:e}var le={lFrame:RA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function DB(){return le.lFrame.elementDepthCount}function CB(){le.lFrame.elementDepthCount++}function TB(){le.lFrame.elementDepthCount--}function EA(){return le.bindingsEnabled}function IA(){return le.skipHydrationRootTNode!==null}function SB(t){return le.skipHydrationRootTNode===t}function AB(){le.skipHydrationRootTNode=null}function oe(){return le.lFrame.lView}function Ue(){return le.lFrame.tView}function gv(t){return le.lFrame.contextLView=t,t[bt]}function yv(t){return le.lFrame.contextLView=null,t}function gt(){let t=bA();for(;t!==null&&t.type===64;)t=t.parent;return t}function bA(){return le.lFrame.currentTNode}function RB(){let t=le.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Rs(t,e){let n=le.lFrame;n.currentTNode=t,n.isParent=e}function _v(){return le.lFrame.isParent}function vv(){le.lFrame.isParent=!1}function MB(){return le.lFrame.contextLView}function DA(){let t=le.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function xB(t){return le.lFrame.bindingIndex=t}function vi(){return le.lFrame.bindingIndex++}function CA(t){let e=le.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function NB(){return le.lFrame.inI18n}function PB(t,e){let n=le.lFrame;n.bindingIndex=n.bindingRootIndex=t,c_(e)}function OB(){return le.lFrame.currentDirectiveIndex}function c_(t){le.lFrame.currentDirectiveIndex=t}function wv(t){let e=le.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function TA(){return le.lFrame.currentQueryIndex}function Ev(t){le.lFrame.currentQueryIndex=t}function kB(t){let e=t[ne];return e.type===2?e.declTNode:e.type===1?t[Jt]:null}function SA(t,e,n){if(n&he.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&he.Host);)if(i=kB(s),i===null||(s=s[aa],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=le.lFrame=AA();return r.currentTNode=e,r.lView=t,!0}function Iv(t){let e=AA(),n=t[ne];le.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function AA(){let t=le.lFrame,e=t===null?null:t.child;return e===null?RA(t):e}function RA(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function MA(){let t=le.lFrame;return le.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var xA=MA;function bv(){let t=MA();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function FB(t){return(le.lFrame.contextLView=IB(t,le.lFrame.contextLView))[bt]}function wi(){return le.lFrame.selectedIndex}function bs(t){le.lFrame.selectedIndex=t}function tl(){let t=le.lFrame;return fv(t.tView,t.selectedIndex)}function NA(){le.lFrame.currentNamespace=gA}function PA(){LB()}function LB(){le.lFrame.currentNamespace=null}function VB(){return le.lFrame.currentNamespace}var OA=!0;function hf(){return OA}function ff(t){OA=t}function jB(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=fA(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function pf(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Nh(t,e,n){kA(t,e,3,n)}function Ph(t,e,n,r){(t[K]&3)===n&&kA(t,e,n,r)}function Vy(t,e){let n=t[K];(n&3)===e&&(n&=16383,n+=1,t[K]=n)}function kA(t,e,n,r){let i=r!==void 0?t[Go]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Go]+=65536),(a<s||s==-1)&&(BB(t,n,e,c),t[Go]=(t[Go]&4294901760)+c+2),c++}function rS(t,e){er(4,t,e);let n=me(null);try{e.call(t)}finally{me(n),er(5,t,e)}}function BB(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[K]>>14<t[Go]>>16&&(t[K]&3)===e&&(t[K]+=16384,rS(a,s)):rS(a,s)}var Yo=-1,Ds=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function UB(t){return t instanceof Ds}function $B(t){return(t.flags&8)!==0}function HB(t){return(t.flags&16)!==0}function FA(t){return t!==Yo}function $h(t){return t&32767}function zB(t){return t>>16}function Hh(t,e){let n=zB(t),r=e;for(;n>0;)r=r[aa],n--;return r}var l_=!0;function zh(t){let e=l_;return l_=t,e}var qB=256,LA=qB-1,VA=5,GB=0,tr={};function WB(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Vc)&&(r=n[Vc]),r==null&&(r=n[Vc]=GB++);let i=r&LA,s=1<<i;e.data[t+(i>>VA)]|=s}function qh(t,e){let n=jA(t,e);if(n!==-1)return n;let r=e[ne];r.firstCreatePass&&(t.injectorIndex=e.length,jy(r.data,t),jy(e,null),jy(r.blueprint,null));let i=Dv(t,e),s=t.injectorIndex;if(FA(i)){let o=$h(i),a=Hh(i,e),c=a[ne].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function jy(t,e){t.push(0,0,0,0,0,0,0,0,e)}function jA(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Dv(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=zA(i),r===null)return Yo;if(n++,i=i[aa],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Yo}function u_(t,e,n){WB(t,e,n)}function KB(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(QS(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function BA(t,e,n){if(n&he.Optional||t!==void 0)return t;rv(e,"NodeInjector")}function UA(t,e,n,r){if(n&he.Optional&&r===void 0&&(r=null),!(n&(he.Self|he.Host))){let i=t[ta],s=Ht(void 0);try{return i?i.get(e,r,n&he.Optional):HS(e,r,n&he.Optional)}finally{Ht(s)}}return BA(r,e,n)}function $A(t,e,n,r=he.Default,i){if(t!==null){if(e[K]&2048&&!(r&he.Self)){let o=XB(t,e,n,r,tr);if(o!==tr)return o}let s=HA(t,e,n,r,tr);if(s!==tr)return s}return UA(e,n,r,i)}function HA(t,e,n,r,i){let s=YB(n);if(typeof s=="function"){if(!SA(e,t,r))return r&he.Host?BA(i,n,r):UA(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&he.Optional))rv(n);else return o}finally{xA()}}else if(typeof s=="number"){let o=null,a=jA(t,e),c=Yo,l=r&he.Host?e[fn][Jt]:null;for((a===-1||r&he.SkipSelf)&&(c=a===-1?Dv(t,e):e[a+8],c===Yo||!sS(r,!1)?a=-1:(o=e[ne],a=$h(c),e=Hh(c,e)));a!==-1;){let u=e[ne];if(iS(s,a,u.data)){let d=QB(a,e,n,o,r,l);if(d!==tr)return d}c=e[a+8],c!==Yo&&sS(r,e[ne].data[a+8]===l)&&iS(s,a,e)?(o=u,a=$h(c),e=Hh(c,e)):a=-1}}return i}function QB(t,e,n,r,i,s){let o=e[ne],a=o.data[t+8],c=r==null?uf(a)&&l_:r!=o&&(a.type&3)!==0,l=i&he.Host&&s===a,u=Oh(a,o,n,c,l);return u!==null?Cs(e,o,u,a):tr}function Oh(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,u=s>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let m=o[f];if(f<c&&n===m||f>=c&&m.type===n)return f}if(i){let f=o[c];if(f&&Or(f)&&f.type===n)return c}return null}function Cs(t,e,n,r){let i=t[n],s=e.data;if(UB(i)){let o=i;o.resolving&&Ij(Ej(s[n]));let a=zh(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Ht(o.injectImpl):null,u=SA(t,r,he.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&jB(n,s[n],e)}finally{l!==null&&Ht(l),zh(a),o.resolving=!1,xA()}}return i}function YB(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Vc)?t[Vc]:void 0;return typeof e=="number"?e>=0?e&LA:ZB:e}function iS(t,e,n){let r=1<<t;return!!(n[e+(t>>VA)]&r)}function sS(t,e){return!(t&he.Self)&&!(t&he.Host&&e)}var vs=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return $A(this._tNode,this._lView,e,of(r),n)}};function ZB(){return new vs(gt(),oe())}function cr(t){return Zc(()=>{let e=t.prototype.constructor,n=e[Lh]||d_(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Lh]||d_(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function d_(t){return LS(t)?()=>{let e=d_(Ot(t));return e&&e()}:ws(t)}function XB(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[K]&2048&&!(o[K]&512);){let a=HA(s,o,n,r|he.Self,tr);if(a!==tr)return a;let c=s.parent;if(!c){let l=o[dA];if(l){let u=l.get(n,tr,r);if(u!==tr)return u}c=zA(o),o=o[aa]}s=c}return i}function zA(t){let e=t[ne],n=e.type;return n===2?e.declTNode:n===1?t[Jt]:null}function Cv(t){return KB(gt(),t)}function oS(t,e=null,n=null,r){let i=qA(t,e,n,r);return i.resolveInjectorInitializers(),i}function qA(t,e=null,n=null,r,i=new Set){let s=[n||zt,Jj(t)];return r=r||(typeof t=="object"?void 0:kt(t)),new Uc(s,e||lv(),r||null,i)}var Ne=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return oS({name:""},i,r,"");{let s=r.name??"";return oS({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=jc,e.NULL=new Bh,e.\u0275prov=C({token:e,providedIn:"any",factory:()=>y(GS)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var JB="ngOriginalError";function By(t){return t[JB]}var pn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&By(e);for(;n&&By(n);)n=By(n);return n||null}},GA=new x("",{providedIn:"root",factory:()=>b(pn).handleError.bind(void 0)}),nl=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=eU,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),h_=class extends nl{constructor(e){super(),this._lView=e}onDestroy(e){return wA(this._lView,e),()=>bB(this._lView,e)}};function eU(){return new h_(oe())}var f_=class{constructor(){this.destroyed=!1,this.listeners=null,this.errorHandler=b(pn,{optional:!0}),this.destroyRef=b(nl),this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new T(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let n=this.listeners?.indexOf(e);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(e){if(this.destroyed)throw new T(953,!1);if(this.listeners===null)return;let n=me(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{me(n)}}};function Tv(t){return new f_}function aS(t,e){return kS(t,e)}function tU(t){return kS(OS,t)}var Xie=(aS.required=tU,aS);function nU(){return ca(gt(),oe())}function ca(t,e){return new ve(gn(t,e))}var ve=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=nU;let t=e;return t})();function rU(t){return t instanceof ve?t.nativeElement:t}var p_=class extends H{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,lA()&&(this.destroyRef=b(nl,{optional:!0})??void 0)}emit(e){let n=me(null);try{super.next(e)}finally{me(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Uy(s),i&&(i=Uy(i)),o&&(o=Uy(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ae&&e.add(a),a}};function Uy(t){return e=>{setTimeout(t,void 0,e)}}var Ce=p_;function iU(){return this._results[Symbol.iterator]()}var Gh=class t{get changes(){return this._changes??=new Ce}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=iU)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=Pj(e);(this._changesDetected=!Nj(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function WA(t){return(t.flags&128)===128}var KA=new Map,sU=0;function oU(){return sU++}function aU(t){KA.set(t[lf],t)}function cU(t){KA.delete(t[lf])}var cS="__ngContext__";function gi(t,e){_s(e)?(t[cS]=e[lf],aU(e)):t[cS]=e}function QA(t){return ZA(t[Hc])}function YA(t){return ZA(t[kn])}function ZA(t){for(;t!==null&&!Fr(t);)t=t[kn];return t}var m_;function XA(t){m_=t}function JA(){if(m_!==void 0)return m_;if(typeof document<"u")return document;throw new T(210,!1)}var rl=new x("",{providedIn:"root",factory:()=>lU}),lU="ng",Sv=new x(""),yn=new x("",{providedIn:"platform",factory:()=>"unknown"});var Gt=new x(""),il=new x("",{providedIn:"root",factory:()=>JA().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var uU="h",dU="b";var hU=()=>null;function Av(t,e,n=!1){return hU(t,e,n)}var eR=!1,fU=new x("",{providedIn:"root",factory:()=>eR});var Ch;function pU(){if(Ch===void 0&&(Ch=null,tt.trustedTypes))try{Ch=tt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ch}function mf(t){return pU()?.createHTML(t)||t}var Th;function tR(){if(Th===void 0&&(Th=null,tt.trustedTypes))try{Th=tt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Th}function lS(t){return tR()?.createHTML(t)||t}function uS(t){return tR()?.createScriptURL(t)||t}var Wh=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${PS})`}};function Ms(t){return t instanceof Wh?t.changingThisBreaksApplicationSecurity:t}function gf(t,e){let n=mU(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${PS})`)}return n===e}function mU(t){return t instanceof Wh&&t.getTypeName()||null}function gU(t){let e=new y_(t);return yU()?new g_(e):e}var g_=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(mf(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},y_=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=mf(e),n}};function yU(){try{return!!new window.DOMParser().parseFromString(mf(""),"text/html")}catch{return!1}}var _U=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Rv(t){return t=String(t),t.match(_U)?t:"unsafe:"+t}function Lr(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function sl(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var nR=Lr("area,br,col,hr,img,wbr"),rR=Lr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),iR=Lr("rp,rt"),vU=sl(iR,rR),wU=sl(rR,Lr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),EU=sl(iR,Lr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),dS=sl(nR,wU,EU,vU),sR=Lr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),IU=Lr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),bU=Lr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),DU=sl(sR,IU,bU),CU=Lr("script,style,template"),__=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=AU(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let s=SU(n);if(s){n=s;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=hS(e).toLowerCase();if(!dS.hasOwnProperty(n))return this.sanitizedSomething=!0,!CU.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!DU.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;sR[a]&&(c=Rv(c)),this.buf.push(" ",o,'="',fS(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=hS(e).toLowerCase();dS.hasOwnProperty(n)&&!nR.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(fS(e))}};function TU(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function SU(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw oR(e);return e}function AU(t){let e=t.firstChild;if(e&&TU(t,e))throw oR(e);return e}function hS(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function oR(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var RU=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,MU=/([^\#-~ |!])/g;function fS(t){return t.replace(/&/g,"&amp;").replace(RU,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(MU,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Sh;function aR(t,e){let n=null;try{Sh=Sh||gU(t);let r=e?String(e):"";n=Sh.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=Sh.getInertBodyElement(r)}while(r!==s);let a=new __().sanitizeChildren(pS(n)||n);return mf(a)}finally{if(n){let r=pS(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function pS(t){return"content"in t&&xU(t)?t.content:null}function xU(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var ol=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ol||{});function cR(t){let e=Mv();return e?lS(e.sanitize(ol.HTML,t)||""):gf(t,"HTML")?lS(Ms(t)):aR(JA(),Xc(t))}function NU(t){let e=Mv();return e?e.sanitize(ol.URL,t)||"":gf(t,"URL")?Ms(t):Rv(Xc(t))}function PU(t){let e=Mv();if(e)return uS(e.sanitize(ol.RESOURCE_URL,t)||"");if(gf(t,"ResourceURL"))return uS(Ms(t));throw new T(904,!1)}function OU(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?PU:NU}function lR(t,e,n){return OU(e,n)(t)}function Mv(){let t=oe();return t&&t[Fn].sanitizer}var kU=/^>|^->|<!--|-->|--!>|<!-$/g,FU=/(<|>)/g,LU="\u200B$1\u200B";function VU(t){return t.replace(kU,e=>e.replace(FU,LU))}function uR(t){return t instanceof Function?t():t}function jU(t){return(t??b(Ne)).get(yn)==="browser"}var ir=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ir||{}),BU;function xv(t,e){return BU(t,e)}function Wo(t,e,n,r,i){if(r!=null){let s,o=!1;Fr(r)?s=r:_s(r)&&(o=!0,r=r[ar]);let a=rr(r);t===0&&n!==null?i==null?mR(e,n,a):Kh(e,n,a,i||null,!0):t===1&&n!==null?Kh(e,n,a,i||null,!0):t===2?n2(e,a,o):t===3&&e.destroyNode(a),s!=null&&i2(e,t,s,n,i)}}function UU(t,e){return t.createText(e)}function $U(t,e,n){t.setValue(e,n)}function HU(t,e){return t.createComment(VU(e))}function dR(t,e,n){return t.createElement(e,n)}function zU(t,e){hR(t,e),e[ar]=null,e[Jt]=null}function qU(t,e,n,r,i,s){r[ar]=i,r[Jt]=e,vf(t,r,n,1,i,s)}function hR(t,e){e[Fn].changeDetectionScheduler?.notify(1),vf(t,e,e[Be],2,null,null)}function GU(t){let e=t[Hc];if(!e)return $y(t[ne],t);for(;e;){let n=null;if(_s(e))n=e[Hc];else{let r=e[Dt];r&&(n=r)}if(!n){for(;e&&!e[kn]&&e!==t;)_s(e)&&$y(e[ne],e),e=e[pt];e===null&&(e=t),_s(e)&&$y(e[ne],e),n=e&&e[kn]}e=n}}function WU(t,e,n,r){let i=Dt+r,s=n.length;r>0&&(n[i-1][kn]=e),r<s-Dt?(e[kn]=n[i],qS(n,Dt+r,e)):(n.push(e),e[kn]=null),e[pt]=n;let o=e[el];o!==null&&n!==o&&KU(o,e);let a=e[Pr];a!==null&&a.insertView(t),a_(e),e[K]|=128}function KU(t,e){let n=t[na],i=e[pt][pt][fn];e[fn]!==i&&(t[K]|=dv.HasTransplantedViews),n===null?t[na]=[e]:n.push(e)}function fR(t,e){let n=t[na],r=n.indexOf(e);n.splice(r,1)}function Gc(t,e){if(t.length<=Dt)return;let n=Dt+e,r=t[n];if(r){let i=r[el];i!==null&&i!==t&&fR(i,r),e>0&&(t[n-1][kn]=r[kn]);let s=jh(t,Dt+e);zU(r[ne],r);let o=s[Pr];o!==null&&o.detachView(s[ne]),r[pt]=null,r[kn]=null,r[K]&=-129}return r}function yf(t,e){if(!(e[K]&256)){let n=e[Be];n.destroyNode&&vf(t,e,n,3,null,null),GU(e)}}function $y(t,e){if(e[K]&256)return;let n=me(null);try{e[K]&=-129,e[K]|=256,e[Es]&&vy(e[Es]),YU(t,e),QU(t,e),e[ne].type===1&&e[Be].destroy();let r=e[el];if(r!==null&&Fr(e[pt])){r!==e[pt]&&fR(r,e);let i=e[Pr];i!==null&&i.detachView(t)}cU(e)}finally{me(n)}}function QU(t,e){let n=t.cleanup,r=e[$c];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[$c]=null);let i=e[pi];if(i!==null){e[pi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function YU(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ds)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];er(4,a,c);try{c.call(a)}finally{er(5,a,c)}}else{er(4,i,s);try{s.call(i)}finally{er(5,i,s)}}}}}function pR(t,e,n){return ZU(t,e.parent,n)}function ZU(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[ar];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===nr.None||s===nr.Emulated)return null}return gn(r,n)}}function Kh(t,e,n,r,i){t.insertBefore(e,n,r,i)}function mR(t,e,n){t.appendChild(e,n)}function mS(t,e,n,r,i){r!==null?Kh(t,e,n,r,i):mR(t,e,n)}function XU(t,e,n,r){t.removeChild(e,n,r)}function Nv(t,e){return t.parentNode(e)}function JU(t,e){return t.nextSibling(e)}function gR(t,e,n){return t2(t,e,n)}function e2(t,e,n){return t.type&40?gn(t,n):null}var t2=e2,gS;function _f(t,e,n,r){let i=pR(t,r,e),s=e[Be],o=r.parent||e[Jt],a=gR(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)mS(s,i,n[c],a,!1);else mS(s,i,n,a,!1);gS!==void 0&&gS(s,r,e,n,i)}function kh(t,e){if(e!==null){let n=e.type;if(n&3)return gn(e,t);if(n&4)return v_(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return kh(t,r);{let i=t[e.index];return Fr(i)?v_(-1,i):rr(i)}}else{if(n&32)return xv(e,t)()||rr(t[e.index]);{let r=yR(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=qc(t[fn]);return kh(i,r)}else return kh(t,e.next)}}}return null}function yR(t,e){if(e!==null){let r=t[fn][Jt],i=e.projection;return r.projection[i]}return null}function v_(t,e){let n=Dt+t+1;if(n<e.length){let r=e[n],i=r[ne].firstChild;if(i!==null)return kh(r,i)}return e[Is]}function n2(t,e,n){let r=Nv(t,e);r&&XU(t,r,e,n)}function Pv(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&gi(rr(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Pv(t,e,n.child,r,i,s,!1),Wo(e,t,i,a,s);else if(c&32){let l=xv(n,r),u;for(;u=l();)Wo(e,t,i,u,s);Wo(e,t,i,a,s)}else c&16?_R(t,e,r,n,i,s):Wo(e,t,i,a,s);n=o?n.projectionNext:n.next}}function vf(t,e,n,r,i,s){Pv(n,r,t.firstChild,e,i,s,!1)}function r2(t,e,n){let r=e[Be],i=pR(t,n,e),s=n.parent||e[Jt],o=gR(s,n,e);_R(r,0,e,n,i,o)}function _R(t,e,n,r,i,s){let o=n[fn],c=o[Jt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Wo(e,t,i,u,s)}else{let l=c,u=o[pt];WA(r)&&(l.flags|=128),Pv(t,e,l,u,i,s,!0)}}function i2(t,e,n,r,i){let s=n[Is],o=rr(n);s!==o&&Wo(e,t,r,s,i);for(let a=Dt;a<n.length;a++){let c=n[a];vf(c[ne],c,t,e,r,s)}}function s2(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:ir.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ir.Important),t.setStyle(n,r,i,s))}}function o2(t,e,n){t.setAttribute(e,"style",n)}function vR(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function wR(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&n_(t,e,r),i!==null&&vR(t,e,i),s!==null&&o2(t,e,s)}var Vr={};function Vn(t=1){ER(Ue(),oe(),wi()+t,!1)}function ER(t,e,n,r){if(!r)if((e[K]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Nh(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Ph(e,s,0,n)}bs(n)}function S(t,e=he.Default){let n=oe();if(n===null)return y(t,e);let r=gt();return $A(r,n,Ot(t),e)}function IR(){let t="invalid";throw new Error(t)}function bR(t,e,n,r,i,s){let o=me(null);try{let a=null;i&fe.SignalBased&&(a=e[r][Rr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&fe.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):hA(e,a,r,s)}finally{me(o)}}function a2(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)bs(~i);else{let s=i,o=n[++r],a=n[++r];PB(o,s);let c=e[s];a(2,c)}}}finally{bs(-1)}}function wf(t,e,n,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[ar]=i,d[K]=r|4|128|8|64,(l!==null||t&&t[K]&2048)&&(d[K]|=2048),vA(d),d[pt]=d[aa]=t,d[bt]=n,d[Fn]=o||t&&t[Fn],d[Be]=a||t&&t[Be],d[ta]=c||t&&t[ta]||null,d[Jt]=s,d[lf]=oU(),d[ea]=u,d[dA]=l,d[fn]=e.type==2?t[fn]:d,d}function la(t,e,n,r,i){let s=t.data[e];if(s===null)s=c2(t,e,n,r,i),NB()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=RB();s.injectorIndex=o===null?-1:o.injectorIndex}return Rs(s,!0),s}function c2(t,e,n,r,i){let s=bA(),o=_v(),a=o?s:s&&s.parent,c=t.data[e]=p2(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function DR(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function CR(t,e,n,r,i){let s=wi(),o=r&2;try{bs(-1),o&&e.length>Ct&&ER(t,e,Ct,!1),er(o?2:0,i),n(r,i)}finally{bs(s),er(o?3:1,i)}}function Ov(t,e,n){if(hv(e)){let r=me(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{me(r)}}}function kv(t,e,n){EA()&&(w2(t,e,n,gn(n,e)),(n.flags&64)===64&&AR(t,e,n))}function Fv(t,e,n=gn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function TR(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Lv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Lv(t,e,n,r,i,s,o,a,c,l,u){let d=Ct+r,h=d+i,f=l2(d,h),m=typeof l=="function"?l():l;return f[ne]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}function l2(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Vr);return n}function u2(t,e,n,r){let s=r.get(fU,eR)||n===nr.ShadowDom,o=t.selectRootElement(e,s);return d2(o),o}function d2(t){h2(t)}var h2=()=>null;function f2(t,e,n,r){let i=xR(e);i.push(n),t.firstCreatePass&&NR(t).push(r,i.length-1)}function p2(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return IA()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function yS(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=fe.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?_S(r,n,l,a,c):_S(r,n,l,a)}return r}function _S(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function m2(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],h=n?n.get(d):null,f=h?h.inputs:null,m=h?h.outputs:null;c=yS(0,d.inputs,u,c,f),l=yS(1,d.outputs,u,l,m);let g=c!==null&&o!==null&&!av(e)?x2(c,u,o):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function g2(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Ef(t,e,n,r,i,s,o,a){let c=gn(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(jv(t,n,u,r,i),uf(e)&&y2(n,e.index)):e.type&3?(r=g2(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function y2(t,e){let n=_i(e,t);n[K]&16||(n[K]|=64)}function Vv(t,e,n,r){if(EA()){let i=r===null?null:{"":-1},s=I2(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&SR(t,e,n,o,i,a),i&&b2(n,r,i)}n.mergedAttrs=Bc(n.mergedAttrs,n.attrs)}function SR(t,e,n,r,i,s){for(let l=0;l<r.length;l++)u_(qh(n,e),t,r[l].type);C2(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=DR(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Bc(n.mergedAttrs,u.hostAttrs),T2(t,n,e,c,u),D2(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}m2(t,n,s)}function _2(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;v2(o)!=a&&o.push(a),o.push(n,r,s)}}function v2(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function w2(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;uf(n)&&S2(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||qh(n,e),gi(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=Cs(e,t,a,n);if(gi(l,e),o!==null&&M2(e,a-i,l,c,n,o),Or(c)){let u=_i(n.index,e);u[bt]=Cs(e,t,a,n)}}}function AR(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=OB();try{bs(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];c_(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&E2(c,l)}}finally{bs(-1),c_(o)}}function E2(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function I2(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(ZS(e,o.selectors,!1))if(r||(r=[]),Or(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;w_(t,e,c)}else r.unshift(o),w_(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function w_(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function b2(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new T(-301,!1);r.push(e[i],s)}}}function D2(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Or(e)&&(n[""]=t)}}function C2(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function T2(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=ws(i.type,!0)),o=new Ds(s,Or(i),S);t.blueprint[r]=o,n[r]=o,_2(t,e,r,DR(t,n,i.hostVars,Vr),i)}function S2(t,e,n){let r=gn(e,t),i=TR(n),s=t[Fn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=If(t,wf(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function A2(t,e,n,r,i,s){let o=gn(t,e);R2(e[Be],o,s,t.value,n,r,i)}function R2(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Xc(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function M2(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];bR(r,n,c,l,u,d)}}function x2(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function RR(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function MR(t,e){let n=t.contentQueries;if(n!==null){let r=me(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Ev(s),a.contentQueries(2,e[o],o)}}}finally{me(r)}}}function If(t,e){return t[Hc]?t[tS][kn]=e:t[Hc]=e,t[tS]=e,e}function E_(t,e,n){Ev(0);let r=me(null);try{e(t,n)}finally{me(r)}}function xR(t){return t[$c]||(t[$c]=[])}function NR(t){return t.cleanup||(t.cleanup=[])}function PR(t,e,n){return(t===null||Or(t))&&(n=_B(n[e.index])),n[Be]}function OR(t,e){let n=t[ta],r=n?n.get(pn,null):null;r&&r.handleError(e)}function jv(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],u=t.data[o];bR(u,l,r,a,c,i)}}function N2(t,e,n){let r=yA(e,t);$U(t[Be],r,n)}function P2(t,e){let n=_i(e,t),r=n[ne];O2(r,n);let i=n[ar];i!==null&&n[ea]===null&&(n[ea]=Av(i,n[ta])),Bv(r,n,n[bt])}function O2(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Bv(t,e,n){Iv(e);try{let r=t.viewQuery;r!==null&&E_(1,r,n);let i=t.template;i!==null&&CR(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Pr]?.finishViewCreation(t),t.staticContentQueries&&MR(t,e),t.staticViewQueries&&E_(2,t.viewQuery,n);let s=t.components;s!==null&&k2(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[K]&=-5,bv()}}function k2(t,e){for(let n=0;n<e.length;n++)P2(t,e[n])}function bf(t,e,n,r){let i=me(null);try{let s=e.tView,a=t[K]&4096?4096:16,c=wf(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[el]=l;let u=t[Pr];return u!==null&&(c[Pr]=u.createEmbeddedView(s)),Bv(s,c,n),c}finally{me(i)}}function kR(t,e){let n=Dt+e;if(n<t.length)return t[n]}function Wc(t,e){return!e||e.firstChild===null||WA(t)}function Df(t,e,n,r=!0){let i=e[ne];if(WU(i,e,t,n),r){let o=v_(n,t),a=e[Be],c=Nv(a,t[Is]);c!==null&&qU(i,t[Jt],a,e,c,o)}let s=e[ea];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function FR(t,e){let n=Gc(t,e);return n!==void 0&&yf(n[ne],n),n}function Qh(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(rr(s)),Fr(s)&&F2(s,r);let o=n.type;if(o&8)Qh(t,e,n.child,r);else if(o&32){let a=xv(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=yR(e,n);if(Array.isArray(a))r.push(...a);else{let c=qc(e[fn]);Qh(c[ne],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function F2(t,e){for(let n=Dt;n<t.length;n++){let r=t[n],i=r[ne].firstChild;i!==null&&Qh(r[ne],r,i,e)}t[Is]!==t[ar]&&e.push(t[Is])}var LR=[];function L2(t){return t[Es]??V2(t)}function V2(t){let e=LR.pop()??Object.create(B2);return e.lView=t,e}function j2(t){t.lView[Es]!==t&&(t.lView=null,LR.push(t))}var B2=pe(I({},Hd),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{zc(t.lView)},consumerOnSignalRead(){this.lView[Es]=this}}),VR=100;function jR(t,e=!0,n=0){let r=t[Fn],i=r.rendererFactory,s=!1;s||i.begin?.();try{U2(t,n)}catch(o){throw e&&OR(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function U2(t,e){I_(t,e);let n=0;for(;mv(t);){if(n===VR)throw new T(103,!1);n++,I_(t,1)}}function $2(t,e,n,r){let i=e[K];if((i&256)===256)return;let s=!1;!s&&e[Fn].inlineEffectRunner?.flush(),Iv(e);let o=null,a=null;!s&&H2(t)&&(a=L2(e),o=yy(a));try{vA(e),xB(t.bindingStartIndex),n!==null&&CR(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&Nh(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Ph(e,d,0,null),Vy(e,0)}if(z2(e),BR(e,0),t.contentQueries!==null&&MR(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&Nh(e,d)}else{let d=t.contentHooks;d!==null&&Ph(e,d,1),Vy(e,1)}a2(t,e);let l=t.components;l!==null&&$R(e,l,0);let u=t.viewQuery;if(u!==null&&E_(2,u,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&Nh(e,d)}else{let d=t.viewHooks;d!==null&&Ph(e,d,2),Vy(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[xh]){for(let d of e[xh])d();e[xh]=null}s||(e[K]&=-73)}catch(c){throw zc(e),c}finally{a!==null&&(_y(a,o),j2(a)),bv()}}function H2(t){return t.type!==2}function BR(t,e){for(let n=QA(t);n!==null;n=YA(n))for(let r=Dt;r<n.length;r++){let i=n[r];UR(i,e)}}function z2(t){for(let e=QA(t);e!==null;e=YA(e)){if(!(e[K]&dv.HasTransplantedViews))continue;let n=e[na];for(let r=0;r<n.length;r++){let i=n[r],s=i[pt];EB(i)}}}function q2(t,e,n){let r=_i(e,t);UR(r,n)}function UR(t,e){pv(t)&&I_(t,e)}function I_(t,e){let r=t[ne],i=t[K],s=t[Es],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&zd(s)),s&&(s.dirty=!1),t[K]&=-9217,o)$2(r,t,r.template,t[bt]);else if(i&8192){BR(t,1);let a=r.components;a!==null&&$R(t,a,1)}}function $R(t,e,n){for(let r=0;r<e.length;r++)q2(t,e[r],n)}function Uv(t){for(t[Fn].changeDetectionScheduler?.notify();t;){t[K]|=64;let e=qc(t);if(dB(t)&&!e)return t;t=e}return null}var Ts=class{get rootNodes(){let e=this._lView,n=e[ne];return Qh(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[bt]}set context(e){this._lView[bt]=e}get destroyed(){return(this._lView[K]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[pt];if(Fr(e)){let n=e[Uh],r=n?n.indexOf(this):-1;r>-1&&(Gc(e,r),jh(n,r))}this._attachedToViewContainer=!1}yf(this._lView[ne],this._lView)}onDestroy(e){wA(this._lView,e)}markForCheck(){Uv(this._cdRefInjectingView||this._lView)}detach(){this._lView[K]&=-129}reattach(){a_(this._lView),this._lView[K]|=128}detectChanges(){this._lView[K]|=1024,jR(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new T(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,hR(this._lView[ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new T(902,!1);this._appRef=e,a_(this._lView)}},Ln=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=K2;let t=e;return t})(),G2=Ln,W2=class extends G2{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=bf(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Ts(i)}};function K2(){return Cf(gt(),oe())}function Cf(t,e){return t.type&4?new W2(e,t,ca(t,e)):null}var ese=new RegExp(`^(\\d+)*(${dU}|${uU})*(.*)`);var Q2=()=>null;function Kc(t,e){return Q2(t,e)}var ia=class{},b_=class{},Yh=class{};function Y2(t){let e=Error(`No component factory found for ${kt(t)}.`);return e[Z2]=t,e}var Z2="ngComponent";var D_=class{resolveComponentFactory(e){throw Y2(e)}},Ei=(()=>{let e=class e{};e.NULL=new D_;let t=e;return t})(),Ss=class{},jn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>X2();let t=e;return t})();function X2(){let t=oe(),e=gt(),n=_i(e.index,t);return(_s(n)?n:t)[Be]}var J2=(()=>{let e=class e{};e.\u0275prov=C({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Hy={};var vS=new Set;function Ii(t){vS.has(t)||(vS.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Ko=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ko||{}),e$={destroy(){}};function Tf(t,e){!e&&uA(Tf);let n=e?.injector??b(Ne);if(!jU(n))return e$;Ii("NgAfterNextRender");let r=n.get($v),i=r.handler??=new T_,s=e?.phase??Ko.MixedReadWrite,o=()=>{i.unregister(c),a()},a=n.get(nl).onDestroy(o),c=kr(n,()=>new C_(s,()=>{o(),t()}));return i.register(c),{destroy:o}}var C_=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.errorHandler=b(pn,{optional:!0}),b(ia,{optional:!0})?.notify(1)}invoke(){try{this.callbackFn()}catch(e){this.errorHandler?.handleError(e)}}},T_=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ko.EarlyRead]:new Set,[Ko.Write]:new Set,[Ko.MixedReadWrite]:new Set,[Ko.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},$v=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=C({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Zh(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Xy(i,a);else if(s==2){let c=a,l=e[++o];r=Xy(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Xh=class extends Ei{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=mi(e);return new sa(n,this.ngModule)}};function wS(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function t$(t){let e=t.toLowerCase();return e==="svg"?gA:e==="math"?mB:null}var S_=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=of(r);let i=this.injector.get(e,Hy,r);return i!==Hy||n===Hy?i:this.parentInjector.get(e,n,r)}},sa=class extends Yh{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=wS(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return wS(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Kj(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=me(null);try{i=i||this.ngModule;let o=i instanceof qt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new S_(e,o):e,c=a.get(Ss,null);if(c===null)throw new T(407,!1);let l=a.get(J2,null),u=a.get($v,null),d=a.get(ia,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",g=r?u2(f,r,this.componentDef.encapsulation,a):dR(f,m,t$(m)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let E=null;g!==null&&(E=Av(g,a,!0));let R=Lv(0,null,null,1,0,null,null,null,null,null,null),M=wf(null,R,null,v,null,null,h,f,a,null,E);Iv(M);let F,ee;try{let j=this.componentDef,te,be=null;j.findHostDirectiveDefs?(te=[],be=new Map,j.findHostDirectiveDefs(j,te,be),te.push(j)):te=[j];let xt=n$(M,g),Qt=r$(xt,g,j,te,M,h,f);ee=fv(R,Ct),g&&o$(f,j,g,r),n!==void 0&&a$(ee,this.ngContentSelectors,n),F=s$(Qt,j,te,be,M,[c$]),Bv(R,M,null)}finally{bv()}return new A_(this.componentType,F,ca(ee,M),M,ee)}finally{me(s)}}},A_=class extends b_{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ts(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;jv(s[ne],s,i,e,n),this.previousInputValues.set(e,n);let o=_i(this._tNode.index,s);Uv(o)}}get injector(){return new vs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function n$(t,e){let n=t[ne],r=Ct;return t[r]=e,la(n,r,2,"#host",null)}function r$(t,e,n,r,i,s,o){let a=i[ne];i$(r,t,e,o);let c=null;e!==null&&(c=Av(e,i[ta]));let l=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=wf(i,TR(n),null,u,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&w_(a,t,r.length-1),If(i,d),i[t.index]=d}function i$(t,e,n,r){for(let i of t)e.mergedAttrs=Bc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Zh(e,e.mergedAttrs,!0),n!==null&&wR(r,n,e))}function s$(t,e,n,r,i,s){let o=gt(),a=i[ne],c=gn(o,i);SR(a,i,o,n,null,r);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,h=Cs(i,a,d,o);gi(h,i)}AR(a,i,o),c&&gi(c,i);let l=Cs(i,a,o.directiveStart+o.componentOffset,o);if(t[bt]=i[bt]=l,s!==null)for(let u of s)u(l,e);return Ov(a,o,i),l}function o$(t,e,n,r){if(r)n_(t,n,["ng-version","17.3.7"]);else{let{attrs:i,classes:s}=Qj(e.selectors[0]);i&&n_(t,n,i),s&&s.length>0&&vR(t,n,s.join(" "))}}function a$(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function c$(){let t=gt();pf(oe()[ne],t)}var _n=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=l$;let t=e;return t})();function l$(){let t=gt();return zR(t,oe())}var u$=_n,HR=class extends u${constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ca(this._hostTNode,this._hostLView)}get injector(){return new vs(this._hostTNode,this._hostLView)}get parentInjector(){let e=Dv(this._hostTNode,this._hostLView);if(FA(e)){let n=Hh(e,this._hostLView),r=$h(e),i=n[ne].data[r+8];return new vs(i,n)}else return new vs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=ES(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Dt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Kc(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Wc(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!uB(e),a;if(o)a=n;else{let m=n||{};a=m.index,r=m.injector,i=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef}let c=o?e:new sa(mi(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let g=(o?l:this.parentInjector).get(qt,null);g&&(s=g)}let u=mi(c.componentType??{}),d=Kc(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,i,h,s);return this.insertImpl(f.hostView,a,Wc(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(wB(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[pt],l=new HR(c,c[Jt],c[pt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Df(o,i,s,r),e.attachToViewContainerRef(),qS(zy(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=ES(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Gc(this._lContainer,n);r&&(jh(zy(this._lContainer),n),yf(r[ne],r))}detach(e){let n=this._adjustIndex(e,-1),r=Gc(this._lContainer,n);return r&&jh(zy(this._lContainer),n)!=null?new Ts(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function ES(t){return t[Uh]}function zy(t){return t[Uh]||(t[Uh]=[])}function zR(t,e){let n,r=e[t.index];return Fr(r)?n=r:(n=RR(r,e,null,t),e[t.index]=n,If(e,n)),h$(n,e,t,r),new HR(n,t,e)}function d$(t,e){let n=t[Be],r=n.createComment(""),i=gn(e,t),s=Nv(n,i);return Kh(n,s,r,JU(n,i),!1),r}var h$=m$,f$=()=>!1;function p$(t,e,n){return f$(t,e,n)}function m$(t,e,n,r){if(t[Is])return;let i;n.type&8?i=rr(r):i=d$(e,n),t[Is]=i}var R_=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},M_=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Hv(e,n).matches!==null&&this.queries[n].setDirty()}},Jh=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=b$(e):this.predicate=e}},x_=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},N_=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,g$(n,s)),this.matchTNodeWithReadOption(e,n,Oh(n,e,s,!1,!1))}else r===Ln?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Oh(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===ve||i===_n||i===Ln&&n.type&4)this.addMatch(n.index,-2);else{let s=Oh(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function g$(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function y$(t,e){return t.type&11?ca(t,e):t.type&4?Cf(t,e):null}function _$(t,e,n,r){return n===-1?y$(e,t):n===-2?v$(t,e,r):Cs(t,t[ne],n,e)}function v$(t,e,n){if(n===ve)return ca(e,t);if(n===Ln)return Cf(e,t);if(n===_n)return zR(e,t)}function qR(t,e,n,r){let i=e[Pr].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(_$(e,u,o[c+1],n.metadata.read))}}i.matches=a}return i.matches}function P_(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=qR(t,e,i,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let d=Dt;d<u.length;d++){let h=u[d];h[el]===h[pt]&&P_(h[ne],h,l,r)}if(u[na]!==null){let d=u[na];for(let h=0;h<d.length;h++){let f=d[h];P_(f[ne],f,l,r)}}}}}return r}function w$(t,e){return t[Pr].queries[e].queryList}function GR(t,e,n){let r=new Gh((n&4)===4);return f2(t,e,r,r.destroy),(e[Pr]??=new M_).queries.push(new R_(r))-1}function E$(t,e,n){let r=Ue();return r.firstCreatePass&&(WR(r,new Jh(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),GR(r,oe(),e)}function I$(t,e,n,r){let i=Ue();if(i.firstCreatePass){let s=gt();WR(i,new Jh(e,n,r),s.index),D$(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return GR(i,oe(),n)}function b$(t){return t.split(",").map(e=>e.trim())}function WR(t,e,n){t.queries===null&&(t.queries=new x_),t.queries.track(new N_(e,n))}function D$(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Hv(t,e){return t.queries.getByIndex(e)}function C$(t,e){let n=t[ne],r=Hv(n,e);return r.crossesNgTemplate?P_(n,t,e,[]):qR(n,t,r,e)}function T$(t){return typeof t=="function"&&t[Rr]!==void 0}function KR(t,e){Ii("NgSignals");let n=dT(t),r=n[Rr];return e?.equal&&(r.equal=e.equal),n.set=i=>Gd(r,i),n.update=i=>hT(r,i),n.asReadonly=S$.bind(n),n}function S$(){let t=this[Rr];if(t.readonlyFn===void 0){let e=()=>this();e[Rr]=t,t.readonlyFn=e}return t.readonlyFn}function QR(t){return T$(t)&&typeof t.set=="function"}function A$(t){return Object.getPrototypeOf(t.prototype).constructor}function Ye(t){let e=A$(t.type),n=!0,r=[t];for(;e;){let i;if(Or(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new T(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Ah(t.inputs),o.inputTransforms=Ah(t.inputTransforms),o.declaredInputs=Ah(t.declaredInputs),o.outputs=Ah(t.outputs);let a=i.hostBindings;a&&P$(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&x$(t,c),l&&N$(t,l),R$(t,i),fj(t.outputs,i.outputs),Or(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Ye&&(n=!1)}}e=Object.getPrototypeOf(e)}M$(r)}function R$(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function M$(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Bc(i.hostAttrs,n=Bc(n,i.hostAttrs))}}function Ah(t){return t===Zo?{}:t===zt?[]:t}function x$(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function N$(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function P$(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function jr(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var yi=class{},Qc=class{};var O_=class extends yi{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Xh(this);let i=nA(e);this._bootstrapComponents=uR(i.bootstrap),this._r3Injector=qA(e,n,[{provide:yi,useValue:this},{provide:Ei,useValue:this.componentFactoryResolver},...r],kt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},k_=class extends Qc{constructor(e){super(),this.moduleType=e}create(e){return new O_(this.moduleType,e,[])}};var ef=class extends yi{constructor(e){super(),this.componentFactoryResolver=new Xh(this),this.instance=null;let n=new Uc([...e.providers,{provide:yi,useValue:this},{provide:Ei,useValue:this.componentFactoryResolver}],e.parent||lv(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Sf(t,e,n=null){return new ef({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var al=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Qe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function YR(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function O$(t,e,n){return t[e]=n}function Bn(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function k$(t){return(t.flags&32)===32}function F$(t,e,n,r,i,s,o,a,c){let l=e.consts,u=la(e,t,4,o||null,ra(l,a));Vv(e,n,u,ra(l,c)),pf(e,u);let d=u.tView=Lv(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Xt(t,e,n,r,i,s,o,a){let c=oe(),l=Ue(),u=t+Ct,d=l.firstCreatePass?F$(u,l,c,e,n,r,i,s,o):l.data[u];Rs(d,!1);let h=L$(l,c,d,t);hf()&&_f(l,c,h,d),gi(h,c);let f=RR(h,c,h,d);return c[u]=f,If(c,f),p$(f,d,c),df(d)&&kv(l,c,d),o!=null&&Fv(c,d,a),Xt}var L$=V$;function V$(t,e,n,r){return ff(!0),e[Be].createComment("")}function IS(...t){}function j$(){let t=typeof tt.requestAnimationFrame=="function",e=tt[t?"requestAnimationFrame":"setTimeout"],n=tt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var L=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ce(!1),this.onMicrotaskEmpty=new Ce(!1),this.onStable=new Ce(!1),this.onError=new Ce(!1),typeof Zone>"u")throw new T(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=j$().nativeRequestAnimationFrame,$$(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new T(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new T(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,B$,IS,IS);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},B$={};function zv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function U$(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(tt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,F_(t),t.isCheckStableRunning=!0,zv(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),F_(t))}function $$(t){let e=()=>{U$(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(H$(a))return n.invokeTask(i,s,o,a);try{return bS(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),DS(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return bS(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),DS(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,F_(t),zv(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function F_(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function bS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function DS(t){t._nesting--,zv(t)}function H$(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function lr(t,e,n,r){let i=oe(),s=vi();if(Bn(i,s,e)){let o=Ue(),a=tl();A2(a,i,t,e,n,r)}return lr}function z$(t,e,n,r){return Bn(t,vi(),n)?e+Xc(n)+r:Vr}function Rh(t,e){return t<<17|e<<2}function As(t){return t>>17&32767}function q$(t){return(t&2)==2}function G$(t,e){return t&131071|e<<17}function L_(t){return t|2}function oa(t){return(t&131068)>>2}function qy(t,e){return t&-131069|e<<2}function W$(t){return(t&1)===1}function V_(t){return t|1}function K$(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=As(o),c=oa(o);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Jc(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let h=As(t[a+1]);t[r+1]=Rh(h,a),h!==0&&(t[h+1]=qy(t[h+1],r)),t[a+1]=G$(t[a+1],r)}else t[r+1]=Rh(a,0),a!==0&&(t[a+1]=qy(t[a+1],r)),a=r;else t[r+1]=Rh(c,0),a===0?a=r:t[c+1]=qy(t[c+1],r),c=r;l&&(t[r+1]=L_(t[r+1])),CS(t,u,r,!0),CS(t,u,r,!1),Q$(e,u,t,r,s),o=Rh(a,c),s?e.classBindings=o:e.styleBindings=o}function Q$(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Jc(s,e)>=0&&(n[r+1]=V_(n[r+1]))}function CS(t,e,n,r){let i=t[n+1],s=e===null,o=r?As(i):oa(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];Y$(c,e)&&(a=!0,t[o+1]=r?V_(l):L_(l)),o=r?As(l):oa(l)}a&&(t[n+1]=r?L_(i):V_(i))}function Y$(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Jc(t,e)>=0:!1}var On={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Z$(t){return t.substring(On.key,On.keyEnd)}function X$(t){return J$(t),ZR(t,XR(t,0,On.textEnd))}function ZR(t,e){let n=On.textEnd;return n===e?-1:(e=On.keyEnd=eH(t,On.key=e,n),XR(t,e,n))}function J$(t){On.key=0,On.keyEnd=0,On.value=0,On.valueEnd=0,On.textEnd=t.length}function XR(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function eH(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function xs(t,e,n){let r=oe(),i=vi();if(Bn(r,i,e)){let s=Ue(),o=tl();Ef(s,o,r,t,e,r[Be],n,!1)}return xs}function j_(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";jv(t,n,s[o],o,r)}function qv(t,e,n){return eM(t,e,n,!1),qv}function Br(t,e){return eM(t,e,null,!0),Br}function JR(t){nH(cH,tH,t,!0)}function tH(t,e){for(let n=X$(e);n>=0;n=ZR(e,n))ov(t,Z$(e),!0)}function eM(t,e,n,r){let i=oe(),s=Ue(),o=CA(2);if(s.firstUpdatePass&&nM(s,t,o,r),e!==Vr&&Bn(i,o,e)){let a=s.data[wi()];rM(s,a,i,i[Be],t,i[o+1]=uH(e,n),r,o)}}function nH(t,e,n,r){let i=Ue(),s=CA(2);i.firstUpdatePass&&nM(i,null,s,r);let o=oe();if(n!==Vr&&Bn(o,s,n)){let a=i.data[wi()];if(iM(a,r)&&!tM(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Xy(c,n||"")),j_(i,a,o,n,r)}else lH(i,a,o,o[Be],o[s+1],o[s+1]=aH(t,e,n),r,s)}}function tM(t,e){return e>=t.expandoStartIndex}function nM(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[wi()],o=tM(t,n);iM(s,r)&&e===null&&!o&&(e=!1),e=rH(i,s,e,r),K$(i,s,e,n,o,r)}}function rH(t,e,n,r){let i=wv(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Gy(null,t,e,n,r),n=Yc(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Gy(i,t,e,n,r),s===null){let c=iH(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Gy(null,t,e,c[1],r),c=Yc(c,e.attrs,r),sH(t,e,r,c))}else s=oH(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function iH(t,e,n){let r=n?e.classBindings:e.styleBindings;if(oa(r)!==0)return t[As(r)]}function sH(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[As(i)]=r}function oH(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Yc(r,o,n)}return Yc(r,e.attrs,n)}function Gy(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Yc(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Yc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),ov(t,o,n?!0:e[++s]))}return t===void 0?null:t}function aH(t,e,n){if(n==null||n==="")return zt;let r=[],i=Ms(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function cH(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&ov(t,r,n)}function lH(t,e,n,r,i,s,o,a){i===Vr&&(i=zt);let c=0,l=0,u=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let h=c<i.length?i[c+1]:void 0,f=l<s.length?s[l+1]:void 0,m=null,g;u===d?(c+=2,l+=2,h!==f&&(m=d,g=f)):d===null||u!==null&&u<d?(c+=2,m=u):(l+=2,m=d,g=f),m!==null&&rM(t,e,n,r,m,g,o,a),u=c<i.length?i[c]:null,d=l<s.length?s[l]:null}}function rM(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=W$(l)?TS(c,e,n,i,oa(l),o):void 0;if(!tf(u)){tf(s)||q$(l)&&(s=TS(c,null,n,i,a,o));let d=yA(wi(),n);s2(r,o,d,i,s)}}function TS(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[i+1];h===Vr&&(h=d?zt:void 0);let f=d?Fy(h,r):u===r?h:void 0;if(l&&!tf(f)&&(f=Fy(c,r)),tf(f)&&(a=f,o))return a;let m=t[i+1];i=o?As(m):oa(m)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Fy(c,r))}return a}function tf(t){return t!==void 0}function uH(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=kt(Ms(t)))),t}function iM(t,e){return(t.flags&(e?8:16))!==0}var B_=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,n){this.attach(n,this.detach(e))}};function Wy(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function dH(t,e,n){let r,i,s=0,o=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;s<=o&&s<=a;){let c=t.at(s),l=e[s],u=Wy(s,c,s,l,n);if(u!==0){u<0&&t.updateValue(s,l),s++;continue}let d=t.at(o),h=e[a],f=Wy(o,d,a,h,n);if(f!==0){f<0&&t.updateValue(o,h),o--,a--;continue}let m=n(s,c),g=n(o,d),v=n(s,l);if(Object.is(v,g)){let E=n(a,h);Object.is(E,m)?(t.swap(s,o),t.updateValue(o,h),a--,o--):t.move(o,s),t.updateValue(s,l),s++;continue}if(r??=new nf,i??=AS(t,s,o,n),U_(t,r,s,v))t.updateValue(s,l),s++,o++;else if(i.has(v))r.set(m,t.detach(s)),o--;else{let E=t.create(s,e[s]);t.attach(s,E),s++,o++}}for(;s<=a;)SS(t,r,n,s,e[s]),s++}else if(e!=null){let a=e[Symbol.iterator](),c=a.next();for(;!c.done&&s<=o;){let l=t.at(s),u=c.value,d=Wy(s,l,s,u,n);if(d!==0)d<0&&t.updateValue(s,u),s++,c=a.next();else{r??=new nf,i??=AS(t,s,o,n);let h=n(s,u);if(U_(t,r,s,h))t.updateValue(s,u),s++,o++,c=a.next();else if(!i.has(h))t.attach(s,t.create(s,u)),s++,o++,c=a.next();else{let f=n(s,l);r.set(f,t.detach(s)),o--}}}for(;!c.done;)SS(t,r,n,t.length,c.value),c=a.next()}for(;s<=o;)t.destroy(t.detach(o--));r?.forEach(a=>{t.destroy(a)})}function U_(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function SS(t,e,n,r,i){if(U_(t,e,r,n(r,i)))t.updateValue(r,i);else{let s=t.create(r,i);t.attach(r,s)}}function AS(t,e,n,r){let i=new Set;for(let s=e;s<=n;s++)i.add(r(s,t.at(s)));return i}var nf=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Gv(t,e,n){Ii("NgControlFlow");let r=oe(),i=vi(),s=q_(r,Ct+t),o=0;if(Bn(r,i,e)){let a=me(null);try{if(FR(s,o),e!==-1){let c=G_(r[ne],Ct+e),l=Kc(s,c.tView.ssrId),u=bf(r,c,n,{dehydratedView:l});Df(s,u,o,Wc(c,l))}}finally{me(a)}}else{let a=kR(s,o);a!==void 0&&(a[bt]=n)}}var $_=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Dt}};function nse(t){return t}function rse(t,e){return e}var H_=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function ise(t,e,n,r,i,s,o,a,c,l,u,d,h){Ii("NgControlFlow");let f=c!==void 0,m=oe(),g=a?o.bind(m[fn][bt]):o,v=new H_(f,g);m[Ct+t]=v,Xt(t+1,e,n,r,i,s),f&&Xt(t+2,c,l,u,d,h)}var z_=class extends B_{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Dt}at(e){return this.getLView(e)[bt].$implicit}attach(e,n){let r=n[ea];this.needsIndexUpdate||=e!==this.length,Df(this.lContainer,n,e,Wc(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,hH(this.lContainer,e)}create(e,n){let r=Kc(this.lContainer,this.templateTNode.tView.ssrId);return bf(this.hostLView,this.templateTNode,new $_(this.lContainer,n,e),{dehydratedView:r})}destroy(e){yf(e[ne],e)}updateValue(e,n){this.getLView(e)[bt].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[bt].$index=e}getLView(e){return fH(this.lContainer,e)}};function sse(t){let e=me(null),n=wi();try{let r=oe(),i=r[ne],s=r[n];if(s.liveCollection===void 0){let a=n+1,c=q_(r,a),l=G_(i,a);s.liveCollection=new z_(c,r,l)}else s.liveCollection.reset();let o=s.liveCollection;if(dH(o,t,s.trackByFn),o.updateIndexes(),s.hasEmptyBlock){let a=vi(),c=o.length===0;if(Bn(r,a,c)){let l=n+2,u=q_(r,l);if(c){let d=G_(i,l),h=Kc(u,d.tView.ssrId),f=bf(r,d,void 0,{dehydratedView:h});Df(u,f,0,Wc(d,h))}else FR(u,0)}}}finally{me(e)}}function q_(t,e){return t[e]}function hH(t,e){return Gc(t,e)}function fH(t,e){return kR(t,e)}function G_(t,e){return fv(t,e)}function pH(t,e,n,r,i,s){let o=e.consts,a=ra(o,i),c=la(e,t,2,r,a);return Vv(e,n,c,ra(o,s)),c.attrs!==null&&Zh(c,c.attrs,!1),c.mergedAttrs!==null&&Zh(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Lt(t,e,n,r){let i=oe(),s=Ue(),o=Ct+t,a=i[Be],c=s.firstCreatePass?pH(o,s,i,e,n,r):s.data[o],l=mH(s,i,c,a,e,t);i[o]=l;let u=df(c);return Rs(c,!0),wR(a,l,c),!k$(c)&&hf()&&_f(s,i,l,c),DB()===0&&gi(l,i),CB(),u&&(kv(s,i,c),Ov(s,c,i)),r!==null&&Fv(i,c),Lt}function Tt(){let t=gt();_v()?vv():(t=t.parent,Rs(t,!1));let e=t;SB(e)&&AB(),TB();let n=Ue();return n.firstCreatePass&&(pf(n,t),hv(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&$B(e)&&j_(n,e,oe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&HB(e)&&j_(n,e,oe(),e.stylesWithoutHost,!1),Tt}function bi(t,e,n,r){return Lt(t,e,n,r),Tt(),bi}var mH=(t,e,n,r,i,s)=>(ff(!0),dR(r,i,VB()));function gH(t,e,n,r,i){let s=e.consts,o=ra(s,r),a=la(e,t,8,"ng-container",o);o!==null&&Zh(a,o,!0);let c=ra(s,i);return Vv(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function sM(t,e,n){let r=oe(),i=Ue(),s=t+Ct,o=i.firstCreatePass?gH(s,i,r,e,n):i.data[s];Rs(o,!0);let a=yH(i,r,o,t);return r[s]=a,hf()&&_f(i,r,a,o),gi(a,r),df(o)&&(kv(i,r,o),Ov(i,o,r)),n!=null&&Fv(r,o),sM}function oM(){let t=gt(),e=Ue();return _v()?vv():(t=t.parent,Rs(t,!1)),e.firstCreatePass&&(pf(e,t),hv(t)&&e.queries.elementEnd(t)),oM}function Wv(t,e,n){return sM(t,e,n),oM(),Wv}var yH=(t,e,n,r)=>(ff(!0),HU(e[Be],""));function Kv(){return oe()}function Af(t,e,n){let r=oe(),i=vi();if(Bn(r,i,e)){let s=Ue(),o=tl();Ef(s,o,r,t,e,r[Be],n,!0)}return Af}function _H(t,e,n){let r=oe(),i=vi();if(Bn(r,i,e)){let s=Ue(),o=tl(),a=wv(s.data),c=PR(a,o,r);Ef(s,o,r,t,e,c,n,!0)}return _H}var ys=void 0;function vH(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var wH=["en",[["a","p"],["AM","PM"],ys],[["AM","PM"],ys,ys],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ys,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ys,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ys,"{1} 'at' {0}",ys],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",vH],Ky={};function Qv(t){let e=EH(t),n=RS(e);if(n)return n;let r=e.split("-")[0];if(n=RS(r),n)return n;if(r==="en")return wH;throw new T(701,!1)}function RS(t){return t in Ky||(Ky[t]=tt.ng&&tt.ng.common&&tt.ng.common.locales&&tt.ng.common.locales[t]),Ky[t]}var ua=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(ua||{});function EH(t){return t.toLowerCase().replace(/_/g,"-")}var rf="en-US";var IH=rf;function bH(t){typeof t=="string"&&(IH=t.toLowerCase().replace(/_/g,"-"))}function ct(t,e,n,r){let i=oe(),s=Ue(),o=gt();return Yv(s,i,i[Be],o,t,e,r),ct}function DH(t,e){let n=gt(),r=oe(),i=Ue(),s=wv(i.data),o=PR(s,n,r);return Yv(i,r,o,n,t,e),DH}function CH(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[$c],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function Yv(t,e,n,r,i,s,o){let a=df(r),l=t.firstCreatePass&&NR(t),u=e[bt],d=xR(e),h=!0;if(r.type&3||o){let g=gn(r,e),v=o?o(g):g,E=d.length,R=o?F=>o(rr(F[r.index])):r.index,M=null;if(!o&&a&&(M=CH(t,e,i,r.index)),M!==null){let F=M.__ngLastListenerFn__||M;F.__ngNextListenerFn__=s,M.__ngLastListenerFn__=s,h=!1}else{s=xS(r,e,u,s,!1);let F=n.listen(v,i,s);d.push(s,F),l&&l.push(i,R,E,E+1)}}else s=xS(r,e,u,s,!1);let f=r.outputs,m;if(h&&f!==null&&(m=f[i])){let g=m.length;if(g)for(let v=0;v<g;v+=2){let E=m[v],R=m[v+1],ee=e[E][R].subscribe(s),j=d.length;d.push(s,ee),l&&l.push(i,r.index,j,-(j+1))}}}function MS(t,e,n,r){let i=me(null);try{return er(6,e,n),n(r)!==!1}catch(s){return OR(t,s),!1}finally{er(7,e,n),me(i)}}function xS(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?_i(t.index,e):e;Uv(a);let c=MS(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)c=MS(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function da(t=1){return FB(t)}function TH(t,e){let n=null,r=Hj(t);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){n=i;continue}if(r===null?ZS(t,s,!0):Gj(r,s))return i}return n}function aM(t){let e=oe()[fn][Jt];if(!e.projection){let n=t?t.length:1,r=e.projection=Oj(n,null),i=r.slice(),s=e.child;for(;s!==null;){let o=t?TH(s,t):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function cM(t,e=0,n){let r=oe(),i=Ue(),s=la(i,Ct+t,16,null,n||null);s.projection===null&&(s.projection=e),vv(),(!r[ea]||IA())&&(s.flags&32)!==32&&r2(i,r,s)}function SH(t,e,n,r){I$(t,e,n,r)}function Rf(t,e,n){E$(t,e,n)}function cl(t){let e=oe(),n=Ue(),r=TA();Ev(r+1);let i=Hv(n,r);if(t.dirty&&vB(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=C$(e,r);t.reset(s,rU),t.notifyOnChanges()}return!0}return!1}function ll(){return w$(oe(),TA())}function AH(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function ose(t){let e=MB();return _A(e,Ct+t)}function ha(t,e=""){let n=oe(),r=Ue(),i=t+Ct,s=r.firstCreatePass?la(r,i,1,e,null):r.data[i],o=RH(r,n,s,e,t);n[i]=o,hf()&&_f(r,n,o,s),Rs(s,!1)}var RH=(t,e,n,r,i)=>(ff(!0),UU(e[Be],r));function MH(t){return Ns("",t,""),MH}function Ns(t,e,n){let r=oe(),i=z$(r,t,e,n);return i!==Vr&&N2(r,wi(),i),Ns}function xH(t,e,n){QR(e)&&(e=e());let r=oe(),i=vi();if(Bn(r,i,e)){let s=Ue(),o=tl();Ef(s,o,r,t,e,r[Be],n,!1)}return xH}function ase(t,e){let n=QR(t);return n&&t.set(e),n}function NH(t,e){let n=oe(),r=Ue(),i=gt();return Yv(r,n,n[Be],i,t,e),NH}function PH(t,e,n){let r=Ue();if(r.firstCreatePass){let i=Or(t);W_(n,r.data,r.blueprint,i,!0),W_(e,r.data,r.blueprint,i,!1)}}function W_(t,e,n,r,i){if(t=Ot(t),Array.isArray(t))for(let s=0;s<t.length;s++)W_(t[s],e,n,r,i);else{let s=Ue(),o=oe(),a=gt(),c=Jo(t)?t:Ot(t.provide),l=cA(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Jo(t)||!t.multi){let f=new Ds(l,i,S),m=Yy(c,e,i?u:u+h,d);m===-1?(u_(qh(a,o),s,c),Qy(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[m]=f,o[m]=f)}else{let f=Yy(c,e,u+h,d),m=Yy(c,e,u,u+h),g=f>=0&&n[f],v=m>=0&&n[m];if(i&&!v||!i&&!g){u_(qh(a,o),s,c);let E=FH(i?kH:OH,n.length,i,r,l);!i&&v&&(n[m].providerFactory=E),Qy(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(E),o.push(E)}else{let E=lM(n[i?m:f],l,!i&&r);Qy(s,t,f>-1?f:m,E)}!i&&r&&v&&n[m].componentProviders++}}}function Qy(t,e,n,r){let i=Jo(e),s=rB(e);if(i||s){let c=(s?Ot(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function lM(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Yy(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function OH(t,e,n,r){return K_(this.multi,[])}function kH(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Cs(n,n[ne],this.providerFactory.index,r);s=a.slice(0,o),K_(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],K_(i,s);return s}function K_(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function FH(t,e,n,r,i){let s=new Ds(t,n,S);return s.multi=[],s.index=e,s.componentProviders=0,lM(s,i,r&&!n),s}function Wt(t,e=[]){return n=>{n.providersResolver=(r,i)=>PH(r,i?i(t):t,e)}}var LH=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=sA(!1,r.type),s=i.length>0?Sf([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=C({token:e,providedIn:"environment",factory:()=>new e(y(qt))});let t=e;return t})();function ur(t){Ii("NgStandalone"),t.getStandaloneInjector=e=>e.get(LH).getOrCreateStandaloneInjector(t)}function uM(t,e,n,r){return dM(oe(),DA(),t,e,n,r)}function VH(t,e){let n=t[e];return n===Vr?void 0:n}function dM(t,e,n,r,i,s){let o=e+n;return Bn(t,o,i)?O$(t,o+1,s?r.call(s,i):r(i)):VH(t,o+1)}function cse(t,e){let n=Ue(),r,i=t+Ct;n.firstCreatePass?(r=jH(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=ws(r.type,!0)),o,a=Ht(S);try{let c=zh(!1),l=s();return zh(c),AH(n,oe(),i,l),l}finally{Ht(a)}}function jH(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function lse(t,e,n){let r=t+Ct,i=oe(),s=_A(i,r);return BH(i,r)?dM(i,DA(),e,s.transform,n,s):s.transform(n)}function BH(t,e){return t[ne].data[e].pure}function use(t,e){return Cf(t,e)}var sr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},hM=new sr("17.3.7"),fa=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Zv=new x(""),ul=new x(""),Mf=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Xv||(UH(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{L.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r()},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(y(L),y(xf),y(ul))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),xf=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Xv?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function UH(t){Xv=t}var Xv;function Ps(t){return!!t&&typeof t.then=="function"}function fM(t){return!!t&&typeof t.subscribe=="function"}var Nf=new x(""),pM=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=b(Nf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Ps(o))r.push(o);else if(fM(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Pf=new x("");function $H(){uT(()=>{throw new T(600,!1)})}function HH(t){return t.isBoundToModule}function zH(t,e,n){try{let r=n();return Ps(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Di=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=b(GA),this.afterRenderEffectManager=b($v),this.externalTestViews=new Set,this.beforeRender=new H,this.afterTick=new H,this.componentTypes=[],this.components=[],this.isStable=b(al).hasPendingTasks.pipe(se(r=>!r)),this._injector=b(qt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Yh;if(!this._injector.get(pM).done){let f=!s&&tA(r),m=!1;throw new T(405,m)}let a;s?a=r:a=this._injector.get(Ei).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=HH(a)?void 0:this._injector.get(yi),l=i||a.selector,u=a.create(Ne.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get(Zv,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Zy(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new T(101,!1);let i=me(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,me(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===VR)throw new T(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)qH(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Q_(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Q_(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Zy(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Pf,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Zy(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new T(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Zy(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function qH(t,e,n){!e&&!Q_(t)||GH(t,n,e)}function Q_(t){return mv(t)}function GH(t,e,n){let r;n?(r=0,t[K]|=1024):t[K]&64?r=0:r=1,jR(t,e,r)}var Y_=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Of=(()=>{let e=class e{compileModuleSync(r){return new k_(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=nA(r),o=uR(s.declarations).reduce((a,c)=>{let l=mi(c);return l&&a.push(new sa(l)),a},[]);return new Y_(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var WH=(()=>{let e=class e{constructor(){this.zone=b(L),this.applicationRef=b(Di)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function KH(t){return[{provide:L,useFactory:t},{provide:Xo,multi:!0,useFactory:()=>{let e=b(WH,{optional:!0});return()=>e.initialize()}},{provide:Xo,multi:!0,useFactory:()=>{let e=b(XH);return()=>{e.initialize()}}},{provide:GA,useFactory:QH}]}function QH(){let t=b(L),e=b(pn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function YH(t){let e=KH(()=>new L(ZH(t)));return af([[],e])}function ZH(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var XH=(()=>{let e=class e{constructor(){this.subscription=new Ae,this.initialized=!1,this.zone=b(L),this.pendingTasks=b(al)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{L.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{L.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function JH(){return typeof $localize<"u"&&$localize.locale||rf}var pa=new x("",{providedIn:"root",factory:()=>b(pa,he.Optional|he.SkipSelf)||JH()});var mM=new x("");var Fh=null;function ez(t=[],e){return Ne.create({name:e,providers:[{provide:cf,useValue:"platform"},{provide:mM,useValue:new Set([()=>Fh=null])},...t]})}function tz(t=[]){if(Fh)return Fh;let e=ez(t);return Fh=e,$H(),nz(e),e}function nz(t){t.get(Sv,null)?.forEach(n=>n())}function dse(){return!1}var vn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=rz;let t=e;return t})();function rz(t){return iz(gt(),oe(),(t&16)===16)}function iz(t,e,n){if(uf(t)&&!n){let r=_i(t.index,e);return new Ts(r,r)}else if(t.type&47){let r=e[fn];return new Ts(r,e)}return null}var Z_=class{constructor(){}supports(e){return e instanceof Map||YR(e)}create(){return new X_}},X_=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||YR(e)))throw new T(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new J_(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},J_=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function NS(){return new Jv([new Z_])}var Jv=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||NS()),deps:[[e,new iv,new mt]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i)return i;throw new T(901,!1)}};e.\u0275prov=C({token:e,providedIn:"root",factory:NS});let t=e;return t})();var gM=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(y(Di))},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({});let t=e;return t})();function yM(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=tz(r),s=[YH(),...n||[]],a=new ef({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(L);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(pn,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:f=>{l.handleError(f)}})});let d=()=>a.destroy(),h=i.get(mM);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),zH(l,c,()=>{let f=a.get(pM);return f.runInitializers(),f.donePromise.then(()=>{let m=a.get(pa,rf);bH(m||rf);let g=a.get(Di);return e!==void 0&&g.bootstrap(e),g})})})}catch(e){return Promise.reject(e)}}function wn(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var sz=new x("",{providedIn:"root",factory:()=>b(oz)}),oz=(()=>{let e=class e{};e.\u0275prov=C({token:e,providedIn:"root",factory:()=>new ev});let t=e;return t})(),ev=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=b(al),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){let n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},tv=class{constructor(e,n,r,i,s,o){this.scheduler=e,this.effectFn=n,this.creationZone=r,this.injector=s,this.watcher=fT(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(pn,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function az(t,e){Ii("NgSignals"),!e?.injector&&uA(az);let n=e?.injector??b(Ne),r=e?.manualCleanup!==!0?n.get(nl):null,i=new tv(n.get(sz),t,typeof Zone>"u"?null:Zone.current,r,n,e?.allowSignalWrites??!1),s=n.get(vn,null,{optional:!0});return!s||!(s._lView[K]&8)?i.watcher.notify():(s._lView[xh]??=[]).push(i.watcher.notify),i}function _M(t){let e=mi(t);if(!e)return null;let n=new sa(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var DM=null;function dr(){return DM}function CM(t){DM??=t}var kf=class{};var Y=new x(""),ow=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>b(lz),providedIn:"platform"});let t=e;return t})(),TM=new x(""),lz=(()=>{let e=class e extends ow{constructor(){super(),this._doc=b(Y),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return dr().getBaseHref(this._doc)}onPopState(r){let i=dr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=dr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function aw(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function vM(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Ur(t){return t&&t[0]!=="?"?"?"+t:t}var Hr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>b(cw),providedIn:"root"});let t=e;return t})(),SM=new x(""),cw=(()=>{let e=class e extends Hr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??b(Y).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return aw(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Ur(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Ur(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Ur(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(y(ow),y(SM,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),AM=(()=>{let e=class e extends Hr{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=aw(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Ur(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Ur(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(y(ow),y(SM,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),hr=(()=>{let e=class e{constructor(r){this._subject=new Ce,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=hz(vM(wM(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Ur(i))}normalize(r){return e.stripTrailingSlash(dz(this._basePath,wM(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ur(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ur(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Ur,e.joinWithSlash=aw,e.stripTrailingSlash=vM,e.\u0275fac=function(i){return new(i||e)(y(Hr))},e.\u0275prov=C({token:e,factory:()=>uz(),providedIn:"root"});let t=e;return t})();function uz(){return new hr(y(Hr))}function dz(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function wM(t){return t.replace(/\/index.html$/,"")}function hz(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var RM=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(RM||{});var $r={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function dl(t,e){let n=Qv(t),r=n[ua.NumberSymbols][e];if(typeof r>"u"){if(e===$r.CurrencyDecimal)return n[ua.NumberSymbols][$r.Decimal];if(e===$r.CurrencyGroup)return n[ua.NumberSymbols][$r.Group]}return r}function fz(t,e){return Qv(t)[ua.NumberFormats][e]}var pz=/^(\d+)?\.((\d+)(-(\d+))?)?$/,EM=22,Ff=".",hl="0",mz=";",gz=",",ew="#";function yz(t,e,n,r,i,s,o=!1){let a="",c=!1;if(!isFinite(t))a=dl(n,$r.Infinity);else{let l=Ez(t);o&&(l=wz(l));let u=e.minInt,d=e.minFrac,h=e.maxFrac;if(s){let R=s.match(pz);if(R===null)throw new Error(`${s} is not a valid digit info`);let M=R[1],F=R[3],ee=R[5];M!=null&&(u=tw(M)),F!=null&&(d=tw(F)),ee!=null?h=tw(ee):F!=null&&d>h&&(h=d)}Iz(l,d,h);let f=l.digits,m=l.integerLen,g=l.exponent,v=[];for(c=f.every(R=>!R);m<u;m++)f.unshift(0);for(;m<0;m++)f.unshift(0);m>0?v=f.splice(m,f.length):(v=f,f=[0]);let E=[];for(f.length>=e.lgSize&&E.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)E.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&E.unshift(f.join("")),a=E.join(dl(n,r)),v.length&&(a+=dl(n,i)+v.join("")),g&&(a+=dl(n,$r.Exponential)+"+"+g)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function _z(t,e,n){let r=fz(e,RM.Decimal),i=vz(r,dl(e,$r.MinusSign));return yz(t,i,e,$r.Group,$r.Decimal,n)}function vz(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(mz),i=r[0],s=r[1],o=i.indexOf(Ff)!==-1?i.split(Ff):[i.substring(0,i.lastIndexOf(hl)+1),i.substring(i.lastIndexOf(hl)+1)],a=o[0],c=o[1]||"";n.posPre=a.substring(0,a.indexOf(ew));for(let u=0;u<c.length;u++){let d=c.charAt(u);d===hl?n.minFrac=n.maxFrac=u+1:d===ew?n.maxFrac=u+1:n.posSuf+=d}let l=a.split(gz);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let u=i.length-n.posPre.length-n.posSuf.length,d=s.indexOf(ew);n.negPre=s.substring(0,d).replace(/'/g,""),n.negSuf=s.slice(d+u).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function wz(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function Ez(t){let e=Math.abs(t)+"",n=0,r,i,s,o,a;for((i=e.indexOf(Ff))>-1&&(e=e.replace(Ff,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===hl;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===hl;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>EM&&(r=r.splice(0,EM-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function Iz(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,s=Math.min(Math.max(e,i),n),o=s+t.integerLen,a=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let d=o;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let d=1;d<o;d++)r[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,l=e+t.integerLen,u=r.reduceRight(function(d,h,f,m){return h=h+d,m[f]=h<10?h:h-10,c&&(m[f]===0&&f>=l?m.pop():c=!1),h>=10?1:0},0);u&&(r.unshift(u),t.integerLen++)}function tw(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function MM(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var nw=/\s+/,IM=[],Nse=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=IM,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(nw):IM}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(nw):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(nw).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(jn))},e.\u0275dir=ye({type:e,selectors:[["","ngClass",""]],inputs:{klass:[fe.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var xM=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new rw,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){bM("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){bM("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(S(_n),S(Ln))},e.\u0275dir=ye({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),rw=class{constructor(){this.$implicit=null,this.ngIf=null}};function bM(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${kt(e)}'.`)}var Pse=(()=>{let e=class e{constructor(r,i,s){this._ngEl=r,this._differs=i,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){let r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,i){let[s,o]=r.split("."),a=s.indexOf("-")===-1?void 0:ir.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${i}${o}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(r){r.forEachRemovedItem(i=>this._setStyle(i.key,null)),r.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),r.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(Jv),S(jn))},e.\u0275dir=ye({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let t=e;return t})(),NM=(()=>{let e=class e{constructor(r){this._viewContainerRef=r,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(r){if(this._shouldRecreateView(r)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let s=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(r){return!!r.ngTemplateOutlet||!!r.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(r,i,s)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,s):!1,get:(r,i,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,s)}})}};e.\u0275fac=function(i){return new(i||e)(S(_n))},e.\u0275dir=ye({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Ft]});let t=e;return t})();function bz(t,e){return new T(2100,!1)}var Ose=(()=>{let e=class e{constructor(r){this._locale=r}transform(r,i,s){if(!Dz(r))return null;s||=this._locale;try{let o=Cz(r);return _z(o,s,i)}catch(o){throw bz(e,o.message)}}};e.\u0275fac=function(i){return new(i||e)(S(pa,16))},e.\u0275pipe=XS({name:"number",type:e,pure:!0,standalone:!0});let t=e;return t})();function Dz(t){return!(t==null||t===""||t!==t)}function Cz(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var Os=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({});let t=e;return t})(),lw="browser",Tz="server";function uw(t){return t===lw}function dw(t){return t===Tz}var PM=(()=>{let e=class e{};e.\u0275prov=C({token:e,providedIn:"root",factory:()=>uw(b(yn))?new iw(b(Y),window):new sw});let t=e;return t})(),iw=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=Sz(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function Sz(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var sw=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Lf=class{};var pw=class extends kf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},mw=class t extends pw{static makeCurrent(){CM(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Az();return n==null?null:Rz(n)}resetBaseElement(){fl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return MM(document.cookie,e)}},fl=null;function Az(){return fl=fl||document.querySelector("base"),fl?fl.getAttribute("href"):null}function Rz(t){return new URL(t,document.baseURI).pathname}var gw=class{addToWindow(e){tt.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new T(5103,!1);return s},tt.getAllAngularTestabilities=()=>e.getAllTestabilities(),tt.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=tt.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};tt.frameworkStabilizers||(tt.frameworkStabilizers=[]),tt.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?dr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},Mz=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),jf=new x(""),FM=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new T(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(y(jf),y(L))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),pl=class{constructor(e){this._doc=e}},hw="ng-app-id",LM=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=dw(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${hw}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(hw),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(hw,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(y(Y),y(rl),y(il,8),y(yn))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),fw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vw=/%COMP%/g,VM="%COMP%",xz=`_nghost-${VM}`,Nz=`_ngcontent-${VM}`,Pz=!0,Oz=new x("",{providedIn:"root",factory:()=>Pz});function kz(t){return Nz.replace(vw,t)}function Fz(t){return xz.replace(vw,t)}function jM(t,e){return e.map(n=>n.replace(vw,t))}var Bf=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=dw(c),this.defaultRenderer=new ml(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===nr.ShadowDom&&(i=pe(I({},i),{encapsulation:nr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Uf?s.applyToHost(r):s instanceof gl&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case nr.Emulated:o=new Uf(l,u,i,this.appId,d,a,c,h);break;case nr.ShadowDom:return new yw(l,u,r,i,a,c,this.nonce,h);default:o=new gl(l,u,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(y(FM),y(LM),y(rl),y(Oz),y(Y),y(yn),y(L),y(il))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),ml=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(fw[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(OM(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(OM(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new T(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=fw[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=fw[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(ir.DashCase|ir.Important)?e.style.setProperty(n,r,i&ir.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&ir.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=dr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function OM(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var yw=class extends ml{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=jM(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},gl=class extends ml{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?jM(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Uf=class extends gl{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=kz(l),this.hostAttr=Fz(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},Lz=(()=>{let e=class e extends pl{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(y(Y))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),kM=["alt","control","meta","shift"],Vz={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jz={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Bz=(()=>{let e=class e extends pl{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>dr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),kM.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=Vz[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),kM.forEach(a=>{if(a!==s){let c=jz[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(y(Y))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function eoe(t,e){return yM(I({rootComponent:t},Uz(e)))}function Uz(t){return{appProviders:[...BM,...t?.providers??[]],platformProviders:qz}}function $z(){mw.makeCurrent()}function Hz(){return new pn}function zz(){return XA(document),document}var qz=[{provide:yn,useValue:lw},{provide:Sv,useValue:$z,multi:!0},{provide:Y,useFactory:zz,deps:[]}];var Gz=new x(""),Wz=[{provide:ul,useClass:gw,deps:[]},{provide:Zv,useClass:Mf,deps:[L,xf,ul]},{provide:Mf,useClass:Mf,deps:[L,xf,ul]}],BM=[{provide:cf,useValue:"root"},{provide:pn,useFactory:Hz,deps:[]},{provide:jf,useClass:Lz,multi:!0,deps:[Y,L,yn]},{provide:jf,useClass:Bz,multi:!0,deps:[Y]},Bf,LM,FM,{provide:Ss,useExisting:Bf},{provide:Lf,useClass:Mz,deps:[]},[]],UM=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:rl,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(y(Gz,12))},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({providers:[...BM,...Wz],imports:[Os,gM]});let t=e;return t})();var $M=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(y(Y))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Kz={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},_w=new x("HammerGestureConfig"),HM=new x("HammerLoader"),Qz=(()=>{let e=class e{constructor(){this.events=[],this.overrides={}}buildHammer(r){let i=new Hammer(r,this.options);i.get("pinch").set({enable:!0}),i.get("rotate").set({enable:!0});for(let s in this.overrides)i.get(s).set(this.overrides[s]);return i}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),Yz=(()=>{let e=class e extends pl{constructor(r,i,s,o){super(r),this._config=i,this.console=s,this.loader=o,this._loaderPromise=null}supports(r){return!(!Kz.hasOwnProperty(r.toLowerCase())&&!this.isCustomEvent(r)||!window.Hammer&&!this.loader)}addEventListener(r,i,s){let o=this.manager.getZone();if(i=i.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||o.runOutsideAngular(()=>this.loader());let a=!1,c=()=>{a=!0};return o.runOutsideAngular(()=>this._loaderPromise.then(()=>{if(!window.Hammer){c=()=>{};return}a||(c=this.addEventListener(r,i,s))}).catch(()=>{c=()=>{}})),()=>{c()}}return o.runOutsideAngular(()=>{let a=this._config.buildHammer(r),c=function(l){o.runGuarded(function(){s(l)})};return a.on(i,c),()=>{a.off(i,c),typeof a.destroy=="function"&&a.destroy()}})}isCustomEvent(r){return this._config.events.indexOf(r)>-1}};e.\u0275fac=function(i){return new(i||e)(y(Y),y(_w),y(fa),y(HM,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),toe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({providers:[{provide:jf,useClass:Yz,multi:!0,deps:[Y,_w,fa,[new mt,HM]]},{provide:_w,useClass:Qz,deps:[]}]});let t=e;return t})();var ue="primary",Nl=Symbol("RouteTitle"),Dw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function va(t){return new Dw(t)}function Xz(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Jz(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!fr(t[n],e[n]))return!1;return!0}function fr(t,e){let n=t?Cw(t):void 0,r=e?Cw(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!XM(t[i],e[i]))return!1;return!0}function Cw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function XM(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function JM(t){return t.length>0?t[t.length-1]:null}function Ri(t){return gh(t)?t:Ps(t)?Oe(Promise.resolve(t)):z(t)}var eq={exact:tx,subset:nx},ex={exact:tq,subset:nq,ignored:()=>!0};function zM(t,e,n){return eq[n.paths](t.root,e.root,n.matrixParams)&&ex[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function tq(t,e){return fr(t,e)}function tx(t,e,n){if(!Fs(t.segments,e.segments)||!zf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!tx(t.children[r],e.children[r],n))return!1;return!0}function nq(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>XM(t[n],e[n]))}function nx(t,e,n){return rx(t,e,e.segments,n)}function rx(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Fs(i,n)||e.hasChildren()||!zf(i,n,r))}else if(t.segments.length===n.length){if(!Fs(t.segments,n)||!zf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!nx(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Fs(t.segments,i)||!zf(t.segments,i,r)||!t.children[ue]?!1:rx(t.children[ue],e,s,r)}}function zf(t,e,n){return e.every((r,i)=>ex[n](t[i].parameters,r.parameters))}var Ci=class{constructor(e=new De([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=va(this.queryParams),this._queryParamMap}toString(){return sq.serialize(this)}},De=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qf(this)}},ks=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=va(this.parameters),this._parameterMap}toString(){return sx(this)}};function rq(t,e){return Fs(t,e)&&t.every((n,r)=>fr(n.parameters,e[r].parameters))}function Fs(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function iq(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ue&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ue&&(n=n.concat(e(i,r)))}),n}var Pl=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>new bl,providedIn:"root"});let t=e;return t})(),bl=class{parse(e){let n=new Sw(e);return new Ci(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${yl(e.root,!0)}`,r=cq(e.queryParams),i=typeof e.fragment=="string"?`#${oq(e.fragment)}`:"";return`${n}${r}${i}`}},sq=new bl;function qf(t){return t.segments.map(e=>sx(e)).join("/")}function yl(t,e){if(!t.hasChildren())return qf(t);if(e){let n=t.children[ue]?yl(t.children[ue],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ue&&r.push(`${i}:${yl(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=iq(t,(r,i)=>i===ue?[yl(t.children[ue],!1)]:[`${i}:${yl(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ue]!=null?`${qf(t)}/${n[0]}`:`${qf(t)}/(${n.join("//")})`}}function ix(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $f(t){return ix(t).replace(/%3B/gi,";")}function oq(t){return encodeURI(t)}function Tw(t){return ix(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gf(t){return decodeURIComponent(t)}function qM(t){return Gf(t.replace(/\+/g,"%20"))}function sx(t){return`${Tw(t.path)}${aq(t.parameters)}`}function aq(t){return Object.entries(t).map(([e,n])=>`;${Tw(e)}=${Tw(n)}`).join("")}function cq(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${$f(n)}=${$f(i)}`).join("&"):`${$f(n)}=${$f(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var lq=/^[^\/()?;#]+/;function ww(t){let e=t.match(lq);return e?e[0]:""}var uq=/^[^\/()?;=#]+/;function dq(t){let e=t.match(uq);return e?e[0]:""}var hq=/^[^=?&#]+/;function fq(t){let e=t.match(hq);return e?e[0]:""}var pq=/^[^&#]+/;function mq(t){let e=t.match(pq);return e?e[0]:""}var Sw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ue]=new De(e,n)),r}parseSegment(){let e=ww(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new T(4009,!1);return this.capture(e),new ks(Gf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=dq(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=ww(this.remaining);i&&(r=i,this.capture(r))}e[Gf(n)]=Gf(r)}parseQueryParam(e){let n=fq(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=mq(this.remaining);o&&(r=o,this.capture(r))}let i=qM(n),s=qM(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ww(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new T(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ue);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ue]:new De([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new T(4011,!1)}};function ox(t){return t.segments.length>0?new De([],{[ue]:t}):t}function ax(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=ax(i);if(r===ue&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new De(t.segments,e);return gq(n)}function gq(t){if(t.numberOfChildren===1&&t.children[ue]){let e=t.children[ue];return new De(t.segments.concat(e.segments),e.children)}return t}function wa(t){return t instanceof Ci}function yq(t,e,n=null,r=null){let i=cx(t);return lx(i,e,n,r)}function cx(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new De(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=ox(r);return e??i}function lx(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Ew(i,i,i,n,r);let s=_q(e);if(s.toRoot())return Ew(i,i,new De([],{}),n,r);let o=vq(s,i,t),a=o.processChildren?wl(o.segmentGroup,o.index,s.commands):dx(o.segmentGroup,o.index,s.commands);return Ew(i,o.segmentGroup,a,n,r)}function Wf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Dl(t){return typeof t=="object"&&t!=null&&t.outlets}function Ew(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;t===e?o=n:o=ux(t,e,n);let a=ox(ax(o));return new Ci(a,s,i)}function ux(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=ux(s,e,n)}),new De(t.segments,r)}var Kf=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Wf(r[0]))throw new T(4003,!1);let i=r.find(Dl);if(i&&i!==JM(r))throw new T(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function _q(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Kf(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Kf(n,e,r)}var ya=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function vq(t,e,n){if(t.isAbsolute)return new ya(e,!0,0);if(!n)return new ya(e,!1,NaN);if(n.parent===null)return new ya(n,!0,0);let r=Wf(t.commands[0])?0:1,i=n.segments.length-1+r;return wq(n,i,t.numberOfDoubleDots)}function wq(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new T(4005,!1);i=r.segments.length}return new ya(r,!1,i-s)}function Eq(t){return Dl(t[0])?t[0].outlets:{[ue]:t}}function dx(t,e,n){if(t??=new De([],{}),t.segments.length===0&&t.hasChildren())return wl(t,e,n);let r=Iq(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new De(t.segments.slice(0,r.pathIndex),{});return s.children[ue]=new De(t.segments.slice(r.pathIndex),t.children),wl(s,0,i)}else return r.match&&i.length===0?new De(t.segments,{}):r.match&&!t.hasChildren()?Aw(t,e,n):r.match?wl(t,0,i):Aw(t,e,n)}function wl(t,e,n){if(n.length===0)return new De(t.segments,{});{let r=Eq(n),i={};if(Object.keys(r).some(s=>s!==ue)&&t.children[ue]&&t.numberOfChildren===1&&t.children[ue].segments.length===0){let s=wl(t.children[ue],e,n);return new De(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=dx(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new De(t.segments,i)}}function Iq(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Dl(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!WM(c,l,o))return s;r+=2}else{if(!WM(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Aw(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Dl(s)){let c=bq(s.outlets);return new De(r,c)}if(i===0&&Wf(n[0])){let c=t.segments[e];r.push(new ks(c.path,GM(n[0]))),i++;continue}let o=Dl(s)?s.outlets[ue]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Wf(a)?(r.push(new ks(o,GM(a))),i+=2):(r.push(new ks(o,{})),i++)}return new De(r,{})}function bq(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Aw(new De([],{}),0,r))}),e}function GM(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function WM(t,e,n){return t==n.path&&fr(e,n.parameters)}var El="imperative",lt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(lt||{}),En=class{constructor(e,n){this.id=e,this.url=n}},Ea=class extends En{constructor(e,n,r="imperative",i=null){super(e,n),this.type=lt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},pr=class extends En{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=lt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},tn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(tn||{}),Qf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Qf||{}),Ti=class extends En{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=lt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Si=class extends En{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=lt.NavigationSkipped}},Cl=class extends En{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=lt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Yf=class extends En{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=lt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rw=class extends En{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=lt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mw=class extends En{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=lt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},xw=class extends En{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=lt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nw=class extends En{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=lt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pw=class{constructor(e){this.route=e,this.type=lt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ow=class{constructor(e){this.route=e,this.type=lt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},kw=class{constructor(e){this.snapshot=e,this.type=lt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fw=class{constructor(e){this.snapshot=e,this.type=lt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Lw=class{constructor(e){this.snapshot=e,this.type=lt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vw=class{constructor(e){this.snapshot=e,this.type=lt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zf=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=lt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Tl=class{},Sl=class{constructor(e){this.url=e}};var jw=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ol,this.attachRef=null}},Ol=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new jw,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Xf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Bw(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Bw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Uw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Uw(e,this._root).map(n=>n.value)}};function Bw(t,e){if(t===e.value)return e;for(let n of e.children){let r=Bw(t,n);if(r)return r}return null}function Uw(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Uw(t,n);if(r.length)return r.unshift(e),r}return[]}var en=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ga(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Jf=class extends Xf{constructor(e,n){super(e),this.snapshot=n,Zw(this,e)}toString(){return this.snapshot.toString()}};function hx(t){let e=Dq(t),n=new Qe([new ks("",{})]),r=new Qe({}),i=new Qe({}),s=new Qe({}),o=new Qe(""),a=new Ai(n,r,s,o,i,ue,t,e.root);return a.snapshot=e.root,new Jf(new en(a,[]),e)}function Dq(t){let e={},n={},r={},i="",s=new Al([],e,r,i,n,ue,t,null,{});return new ep("",new en(s,[]))}var Ai=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(se(l=>l[Nl]))??z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>va(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>va(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Yw(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:I(I({},e.params),t.params),data:I(I({},e.data),t.data),resolve:I(I(I(I({},t.data),e.data),i?.data),t._resolvedData)}:r={params:I({},t.params),data:I({},t.data),resolve:I(I({},t.data),t._resolvedData??{})},i&&px(i)&&(r.resolve[Nl]=i.title),r}var Al=class{get title(){return this.data?.[Nl]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=va(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=va(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ep=class extends Xf{constructor(e,n){super(n),this.url=e,Zw(this,n)}toString(){return fx(this._root)}};function Zw(t,e){e.value._routerState=t,e.children.forEach(n=>Zw(t,n))}function fx(t){let e=t.children.length>0?` { ${t.children.map(fx).join(", ")} } `:"";return`${t.value}${e}`}function Iw(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,fr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),fr(e.params,n.params)||t.paramsSubject.next(n.params),Jz(e.url,n.url)||t.urlSubject.next(n.url),fr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function $w(t,e){let n=fr(t.params,e.params)&&rq(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||$w(t.parent,e.parent))}function px(t){return typeof t.title=="string"||t.title===null}var Cq=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ue,this.activateEvents=new Ce,this.deactivateEvents=new Ce,this.attachEvents=new Ce,this.detachEvents=new Ce,this.parentContexts=b(Ol),this.location=b(_n),this.changeDetector=b(vn),this.environmentInjector=b(qt),this.inputBinder=b(ip,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new T(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new T(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new T(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new T(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Hw(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=ye({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ft]});let t=e;return t})(),Hw=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ai?this.route:e===Ol?this.childContexts:this.parent.get(e,n)}},ip=new x(""),KM=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=ms([i.queryParams,i.params,i.data]).pipe(Zt(([o,a,c],l)=>(c=I(I(I({},o),a),c),l===0?z(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=_M(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function Tq(t,e,n){let r=Rl(t,e._root,n?n._root:void 0);return new Jf(r,e)}function Rl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Sq(t,e,n);return new en(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Rl(t,a)),o}}let r=Aq(e.value),i=e.children.map(s=>Rl(t,s));return new en(r,i)}}function Sq(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Rl(t,r,i);return Rl(t,r)})}function Aq(t){return new Ai(new Qe(t.url),new Qe(t.params),new Qe(t.queryParams),new Qe(t.fragment),new Qe(t.data),t.outlet,t.component,t)}var mx="ngNavigationCancelingError";function gx(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=wa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=yx(!1,tn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function yx(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[mx]=!0,n.cancellationCode=e,n}function Rq(t){return _x(t)&&wa(t.url)}function _x(t){return!!t&&t[mx]}var Mq=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=or({type:e,selectors:[["ng-component"]],standalone:!0,features:[ur],decls:1,vars:0,template:function(i,s){i&1&&bi(0,"router-outlet")},dependencies:[Cq],encapsulation:2});let t=e;return t})();function xq(t,e){return t.providers&&!t._injector&&(t._injector=Sf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Xw(t){let e=t.children&&t.children.map(Xw),n=e?pe(I({},t),{children:e}):I({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ue&&(n.component=Mq),n}function mr(t){return t.outlet||ue}function Nq(t,e){let n=t.filter(r=>mr(r)===e);return n.push(...t.filter(r=>mr(r)!==e)),n}function kl(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Pq=(t,e,n,r)=>se(i=>(new zw(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),zw=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Iw(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ga(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ga(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ga(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ga(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Vw(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Fw(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Iw(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Iw(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=kl(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},tp=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},_a=class{constructor(e,n){this.component=e,this.route=n}};function Oq(t,e,n){let r=t._root,i=e?e._root:null;return _l(r,i,n,[r.value])}function kq(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ba(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!VS(t)?t:e.get(t):r}function _l(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ga(e);return t.children.forEach(o=>{Fq(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Il(a,n.getContext(o),i)),i}function Fq(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Lq(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new tp(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?_l(t,e,a?a.children:null,r,i):_l(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new _a(a.outlet.component,o))}else o&&Il(e,a,i),i.canActivateChecks.push(new tp(r)),s.component?_l(t,null,a?a.children:null,r,i):_l(t,null,n,r,i);return i}function Lq(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Fs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Fs(t.url,e.url)||!fr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$w(t,e)||!fr(t.queryParams,e.queryParams);case"paramsChange":default:return!$w(t,e)}}function Il(t,e,n){let r=ga(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Il(o,e.children.getContext(s),n):Il(o,null,n):Il(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new _a(e.outlet.component,i)):n.canDeactivateChecks.push(new _a(null,i)):n.canDeactivateChecks.push(new _a(null,i))}function Fl(t){return typeof t=="function"}function Vq(t){return typeof t=="boolean"}function jq(t){return t&&Fl(t.canLoad)}function Bq(t){return t&&Fl(t.canActivate)}function Uq(t){return t&&Fl(t.canActivateChild)}function $q(t){return t&&Fl(t.canDeactivate)}function Hq(t){return t&&Fl(t.canMatch)}function vx(t){return t instanceof Nr||t?.name==="EmptyError"}var Hf=Symbol("INITIAL_VALUE");function Ia(){return Zt(t=>ms(t.map(e=>e.pipe(He(1),Nn(Hf)))).pipe(se(e=>{for(let n of e)if(n!==!0){if(n===Hf)return Hf;if(n===!1||n instanceof Ci)return n}return!0}),Fe(e=>e!==Hf),He(1)))}function zq(t,e){return je(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?z(pe(I({},n),{guardsResult:!0})):qq(o,r,i,t).pipe(je(a=>a&&Vq(a)?Gq(r,s,t,e):z(a)),se(a=>pe(I({},n),{guardsResult:a})))})}function qq(t,e,n,r){return Oe(t).pipe(je(i=>Zq(i.component,i.route,n,e,r)),Xn(i=>i!==!0,!0))}function Gq(t,e,n,r){return Oe(e).pipe(gs(i=>Zn(Kq(i.route.parent,r),Wq(i.route,r),Yq(t,i.path,n),Qq(t,i.route,n))),Xn(i=>i!==!0,!0))}function Wq(t,e){return t!==null&&e&&e(new Lw(t)),z(!0)}function Kq(t,e){return t!==null&&e&&e(new kw(t)),z(!0)}function Qq(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return z(!0);let i=r.map(s=>ui(()=>{let o=kl(e)??n,a=ba(s,o),c=Bq(a)?a.canActivate(e,t):kr(o,()=>a(e,t));return Ri(c).pipe(Xn())}));return z(i).pipe(Ia())}function Yq(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>kq(o)).filter(o=>o!==null).map(o=>ui(()=>{let a=o.guards.map(c=>{let l=kl(o.node)??n,u=ba(c,l),d=Uq(u)?u.canActivateChild(r,t):kr(l,()=>u(r,t));return Ri(d).pipe(Xn())});return z(a).pipe(Ia())}));return z(s).pipe(Ia())}function Zq(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return z(!0);let o=s.map(a=>{let c=kl(e)??i,l=ba(a,c),u=$q(l)?l.canDeactivate(t,e,n,r):kr(c,()=>l(t,e,n,r));return Ri(u).pipe(Xn())});return z(o).pipe(Ia())}function Xq(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return z(!0);let s=i.map(o=>{let a=ba(o,t),c=jq(a)?a.canLoad(e,n):kr(t,()=>a(e,n));return Ri(c)});return z(s).pipe(Ia(),wx(r))}function wx(t){return Zd(et(e=>{if(wa(e))throw gx(t,e)}),se(e=>e===!0))}function Jq(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return z(!0);let s=i.map(o=>{let a=ba(o,t),c=Hq(a)?a.canMatch(e,n):kr(t,()=>a(e,n));return Ri(c)});return z(s).pipe(Ia(),wx(r))}var Ml=class{constructor(e){this.segmentGroup=e||null}},np=class extends Error{constructor(e){super(),this.urlTree=e}};function ma(t){return Uo(new Ml(t))}function eG(t){return Uo(new T(4e3,!1))}function tG(t){return Uo(yx(!1,tn.GuardRejected))}var qw=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return z(r);if(i.numberOfChildren>1||!i.children[ue])return eG(e.redirectTo);i=i.children[ue]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new np(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Ci(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new De(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new T(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Gw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nG(t,e,n,r,i){let s=Jw(t,e,n);return s.matched?(r=xq(e,r),Jq(r,e,n,i).pipe(se(o=>o===!0?s:I({},Gw)))):z(s)}function Jw(t,e,n){if(e.path==="**")return rG(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?I({},Gw):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Xz)(n,t,e);if(!i)return I({},Gw);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?I(I({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function rG(t){return{matched:!0,parameters:t.length>0?JM(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function QM(t,e,n,r){return n.length>0&&oG(t,n,r)?{segmentGroup:new De(e,sG(r,new De(n,t.children))),slicedSegments:[]}:n.length===0&&aG(t,n,r)?{segmentGroup:new De(t.segments,iG(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new De(t.segments,t.children),slicedSegments:n}}function iG(t,e,n,r){let i={};for(let s of n)if(sp(t,e,s)&&!r[mr(s)]){let o=new De([],{});i[mr(s)]=o}return I(I({},r),i)}function sG(t,e){let n={};n[ue]=e;for(let r of t)if(r.path===""&&mr(r)!==ue){let i=new De([],{});n[mr(r)]=i}return n}function oG(t,e,n){return n.some(r=>sp(t,e,r)&&mr(r)!==ue)}function aG(t,e,n){return n.some(r=>sp(t,e,r))}function sp(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function cG(t,e,n,r){return mr(t)!==r&&(r===ue||!sp(e,n,t))?!1:Jw(e,t,n).matched}function lG(t,e,n){return e.length===0&&!t.children[n]}var Ww=class{};function uG(t,e,n,r,i,s,o="emptyOnly"){return new Kw(t,e,n,r,i,o,s).recognize()}var dG=31,Kw=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new qw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new T(4002,`'${e.segmentGroup}'`)}recognize(){let e=QM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(n=>{let r=new Al([],Object.freeze({}),Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,{},ue,this.rootComponentType,null,{}),i=new en(r,n),s=new ep("",i),o=yq(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ue).pipe(di(r=>{if(r instanceof np)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ml?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Yw(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(se(s=>s instanceof en?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Oe(i).pipe(gs(s=>{let o=r.children[s],a=Nq(n,s);return this.processSegmentGroup(e,a,o,s)}),bh((s,o)=>(s.push(...o),s)),hi(null),Oy(),je(s=>{if(s===null)return ma(r);let o=Ex(s);return hG(o),z(o)}))}processSegment(e,n,r,i,s,o){return Oe(n).pipe(gs(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(di(c=>{if(c instanceof Ml)return z(null);throw c}))),Xn(a=>!!a),di(a=>{if(vx(a))return lG(r,i,s)?z(new Ww):ma(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return cG(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):ma(i):ma(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=Jw(n,i,s);if(!a)return ma(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>dG&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(je(h=>this.processSegment(e,r,n,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=nG(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(Zt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Zt(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new Al(u,h,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,pG(r),mr(r),r.component??r._loadedComponent??null,r,mG(r)),{segmentGroup:m,slicedSegments:g}=QM(n,u,d,c);if(g.length===0&&m.hasChildren())return this.processChildren(l,c,m).pipe(se(E=>E===null?null:new en(f,E)));if(c.length===0&&g.length===0)return z(new en(f,[]));let v=mr(r)===s;return this.processSegment(l,c,m,g,v?ue:s,!0).pipe(se(E=>new en(f,E instanceof en?[E]:[])))}))):ma(n)))}getChildConfig(e,n,r){return n.children?z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?z({routes:n._loadedRoutes,injector:n._loadedInjector}):Xq(e,n,r,this.urlSerializer).pipe(je(i=>i?this.configLoader.loadChildren(e,n).pipe(et(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):tG(n))):z({routes:[],injector:e})}};function hG(t){t.sort((e,n)=>e.value.outlet===ue?-1:n.value.outlet===ue?1:e.value.outlet.localeCompare(n.value.outlet))}function fG(t){let e=t.value.routeConfig;return e&&e.path===""}function Ex(t){let e=[],n=new Set;for(let r of t){if(!fG(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Ex(r.children);e.push(new en(r.value,i))}return e.filter(r=>!n.has(r))}function pG(t){return t.data||{}}function mG(t){return t.resolve||{}}function gG(t,e,n,r,i,s){return je(o=>uG(t,e,n,r,o.extractedUrl,i,s).pipe(se(({state:a,tree:c})=>pe(I({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function yG(t,e){return je(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return z(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of Ix(c))o.add(l);let a=0;return Oe(o).pipe(gs(c=>s.has(c)?_G(c,r,t,e):(c.data=Yw(c,c.parent,t).resolve,z(void 0))),et(()=>a++),zo(1),je(c=>a===o.size?z(n):Pt))})}function Ix(t){let e=t.children.map(n=>Ix(n)).flat();return[t,...e]}function _G(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!px(i)&&(s[Nl]=i.title),vG(s,t,e,r).pipe(se(o=>(t._resolvedData=o,t.data=Yw(t,t.parent,n).resolve,null)))}function vG(t,e,n,r){let i=Cw(t);if(i.length===0)return z({});let s={};return Oe(i).pipe(je(o=>wG(t[o],e,n,r).pipe(Xn(),et(a=>{s[o]=a}))),zo(1),Oc(s),di(o=>vx(o)?Pt:Uo(o)))}function wG(t,e,n,r){let i=kl(e)??r,s=ba(t,i),o=s.resolve?s.resolve(e,n):kr(i,()=>s(e,n));return Ri(o)}function bw(t){return Zt(e=>{let n=t(e);return n?Oe(n).pipe(se(()=>e)):z(e)})}var bx=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===ue);return i}getResolvedTitleForRoute(r){return r.data[Nl]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>b(EG),providedIn:"root"});let t=e;return t})(),EG=(()=>{let e=class e extends bx{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(y($M))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ll=new x("",{providedIn:"root",factory:()=>({})}),xl=new x(""),eE=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=b(Of)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return z(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ri(r.loadComponent()).pipe(se(Dx),et(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Fc(()=>{this.componentLoaders.delete(r)})),s=new ii(i,()=>new H).pipe(Lo());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return z({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=IG(i,this.compiler,r,this.onLoadEndListener).pipe(Fc(()=>{this.childrenLoaders.delete(i)})),a=new ii(o,()=>new H).pipe(Lo());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function IG(t,e,n,r){return Ri(t.loadChildren()).pipe(se(Dx),je(i=>i instanceof Qc||Array.isArray(i)?z(i):Oe(e.compileModuleAsync(i))),se(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(xl,[],{optional:!0,self:!0}).flat()),{routes:o.map(Xw),injector:s}}))}function bG(t){return t&&typeof t=="object"&&"default"in t}function Dx(t){return bG(t)?t.default:t}var tE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>b(DG),providedIn:"root"});let t=e;return t})(),DG=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Cx=new x(""),Tx=new x("");function CG(t,e,n){let r=t.get(Tx),i=t.get(Y);return t.get(L).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),TG(t))),{onViewTransitionCreated:c}=r;return c&&kr(t,()=>c({transition:a,from:e,to:n})),o})}function TG(t){return new Promise(e=>{Tf(e,{injector:t})})}var nE=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new H,this.transitionAbortSubject=new H,this.configLoader=b(eE),this.environmentInjector=b(qt),this.urlSerializer=b(Pl),this.rootContexts=b(Ol),this.location=b(hr),this.inputBindingEnabled=b(ip,{optional:!0})!==null,this.titleStrategy=b(bx),this.options=b(Ll,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=b(tE),this.createViewTransition=b(Cx,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>z(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Pw(s)),i=s=>this.events.next(new Ow(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(pe(I(I({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Qe({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:El,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Fe(o=>o.id!==0),se(o=>pe(I({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Zt(o=>{let a=!1,c=!1;return z(o).pipe(Zt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",tn.SupersededByNewNavigation),Pt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?pe(I({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Si(l.id,this.urlSerializer.serialize(l.rawUrl),h,Qf.IgnoredSameUrlNavigation)),l.resolve(null),Pt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return z(l).pipe(Zt(h=>{let f=this.transitions?.getValue();return this.events.next(new Ea(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Pt:Promise.resolve(h)}),gG(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),et(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=pe(I({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Yf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:m,restoredState:g,extras:v}=l,E=new Ea(h,this.urlSerializer.serialize(f),m,g);this.events.next(E);let R=hx(this.rootComponentType).snapshot;return this.currentTransition=o=pe(I({},l),{targetSnapshot:R,urlAfterRedirects:f,extras:pe(I({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,z(o)}else{let h="";return this.events.next(new Si(l.id,this.urlSerializer.serialize(l.extractedUrl),h,Qf.IgnoredByUrlHandlingStrategy)),l.resolve(null),Pt}}),et(l=>{let u=new Rw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),se(l=>(this.currentTransition=o=pe(I({},l),{guards:Oq(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),zq(this.environmentInjector,l=>this.events.next(l)),et(l=>{if(o.guardsResult=l.guardsResult,wa(l.guardsResult))throw gx(this.urlSerializer,l.guardsResult);let u=new Mw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Fe(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",tn.GuardRejected),!1)),bw(l=>{if(l.guards.canActivateChecks.length)return z(l).pipe(et(u=>{let d=new xw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Zt(u=>{let d=!1;return z(u).pipe(yG(this.paramsInheritanceStrategy,this.environmentInjector),et({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",tn.NoDataFromResolver)}}))}),et(u=>{let d=new Nw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),bw(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(et(f=>{d.component=f}),se(()=>{})));for(let f of d.children)h.push(...u(f));return h};return ms(u(l.targetSnapshot.root)).pipe(hi(null),He(1))}),bw(()=>this.afterPreactivation()),Zt(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?Oe(d).pipe(se(()=>o)):z(o)}),se(l=>{let u=Tq(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=pe(I({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),et(()=>{this.events.next(new Tl)}),Pq(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),He(1),et({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new pr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Jn(this.transitionAbortSubject.pipe(et(l=>{throw l}))),Fc(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",tn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),di(l=>{if(c=!0,_x(l))this.events.next(new Ti(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),Rq(l)?this.events.next(new Sl(l.url)):o.resolve(!1);else{this.events.next(new Cl(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Pt}))}))}cancelNavigationTransition(r,i,s){let o=new Ti(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function SG(t){return t!==El}var AG=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>b(RG),providedIn:"root"});let t=e;return t})(),Qw=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},RG=(()=>{let e=class e extends Qw{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=cr(e)))(s||e)}})(),e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Sx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>b(MG),providedIn:"root"});let t=e;return t})(),MG=(()=>{let e=class e extends Sx{constructor(){super(...arguments),this.location=b(hr),this.urlSerializer=b(Pl),this.options=b(Ll,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=b(tE),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ci,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=hx(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ea)this.stateMemento=this.createStateMemento();else if(r instanceof Si)this.rawUrlTree=i.initialUrl;else if(r instanceof Yf){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Tl?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Ti&&(r.code===tn.GuardRejected||r.code===tn.NoDataFromResolver)?this.restoreHistory(i):r instanceof Cl?this.restoreHistory(i,!0):r instanceof pr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=I(I({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=I(I({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=cr(e)))(s||e)}})(),e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),vl=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(vl||{});function Ax(t,e){t.events.pipe(Fe(n=>n instanceof pr||n instanceof Ti||n instanceof Cl||n instanceof Si),se(n=>n instanceof pr||n instanceof Si?vl.COMPLETE:(n instanceof Ti?n.code===tn.Redirect||n.code===tn.SupersededByNewNavigation:!1)?vl.REDIRECTING:vl.FAILED),Fe(n=>n!==vl.REDIRECTING),He(1)).subscribe(()=>{e()})}function xG(t){throw t}var NG={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},PG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Un=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=b(fa),this.stateManager=b(Sx),this.options=b(Ll,{optional:!0})||{},this.pendingTasks=b(al),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=b(nE),this.urlSerializer=b(Pl),this.location=b(hr),this.urlHandlingStrategy=b(tE),this._events=new H,this.errorHandler=this.options.errorHandler||xG,this.navigated=!1,this.routeReuseStrategy=b(AG),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=b(xl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!b(ip,{optional:!0}),this.eventsSubscription=new Ae,this.isNgZoneEnabled=b(L)instanceof L&&L.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Ti&&i.code!==tn.Redirect&&i.code!==tn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof pr)this.navigated=!0;else if(i instanceof Sl){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||SG(s.source)};this.scheduleNavigation(a,El,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}kG(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),El,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=I({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Xw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=I(I({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=cx(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return lx(h,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=wa(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,El,null,i)}navigate(r,i={skipLocationChange:!1}){return OG(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=I({},NG):i===!1?s=I({},PG):s=i,wa(r))return zM(this.currentUrlTree,r,s);let o=this.parseUrl(r);return zM(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return Ax(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function OG(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new T(4008,!1)}function kG(t){return!(t instanceof Tl)&&!(t instanceof Sl)}var voe=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new H,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof pr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:lR(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(S(Un),S(Ai),Cv("tabindex"),S(jn),S(ve),S(Hr))},e.\u0275dir=ye({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&ct("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&lr("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[fe.HasDecoratorInputTransform,"preserveFragment","preserveFragment",wn],skipLocationChange:[fe.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",wn],replaceUrl:[fe.HasDecoratorInputTransform,"replaceUrl","replaceUrl",wn],routerLink:"routerLink"},standalone:!0,features:[jr,Ft]});let t=e;return t})();var rp=class{};var FG=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Fe(r=>r instanceof pr),gs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Sf(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Oe(s).pipe(li())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=z(null);let o=s.pipe(je(a=>a===null?z(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Oe([o,a]).pipe(li())}else return o})}};e.\u0275fac=function(i){return new(i||e)(y(Un),y(Of),y(qt),y(rp),y(eE))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Rx=new x(""),LG=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=b(qt),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Ea?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof pr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Si&&r.code===Qf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Zf&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>p(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),Tf(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new Zf(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){IR()},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function woe(t,...e){return af([{provide:xl,multi:!0,useValue:t},[],{provide:Ai,useFactory:Mx,deps:[Un]},{provide:Pf,multi:!0,useFactory:xx},e.map(n=>n.\u0275providers)])}function Mx(t){return t.routerState.root}function Vl(t,e){return{\u0275kind:t,\u0275providers:e}}function xx(){let t=b(Ne);return e=>{let n=t.get(Di);if(e!==n.components[0])return;let r=t.get(Un),i=t.get(Nx);t.get(rE)===1&&r.initialNavigation(),t.get(Px,null,he.Optional)?.setUpPreloading(),t.get(Rx,null,he.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Nx=new x("",{factory:()=>new H}),rE=new x("",{providedIn:"root",factory:()=>1});function VG(){return Vl(2,[{provide:rE,useValue:0},{provide:Nf,multi:!0,deps:[Ne],useFactory:e=>{let n=e.get(TM,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Un),s=e.get(Nx);Ax(i,()=>{r(!0)}),e.get(nE).afterPreactivation=()=>(r(!0),s.closed?z(void 0):s),i.initialNavigation()}))}}])}function jG(){return Vl(3,[{provide:Nf,multi:!0,useFactory:()=>{let e=b(Un);return()=>{e.setUpLocationChangeListener()}}},{provide:rE,useValue:2}])}var Px=new x("");function BG(t){return Vl(0,[{provide:Px,useExisting:FG},{provide:rp,useExisting:t}])}function UG(){return Vl(8,[KM,{provide:ip,useExisting:KM}])}function $G(t){let e=[{provide:Cx,useValue:CG},{provide:Tx,useValue:I({skipNextTransition:!!t?.skipInitialTransition},t)}];return Vl(9,e)}var YM=new x("ROUTER_FORROOT_GUARD"),HG=[hr,{provide:Pl,useClass:bl},Un,Ol,{provide:Ai,useFactory:Mx,deps:[Un]},eE,[]],iE=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[HG,[],{provide:xl,multi:!0,useValue:r},{provide:YM,useFactory:WG,deps:[[Un,new mt,new iv]]},{provide:Ll,useValue:i||{}},i?.useHash?qG():GG(),zG(),i?.preloadingStrategy?BG(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?KG(i):[],i?.bindToComponentInputs?UG().\u0275providers:[],i?.enableViewTransitions?$G().\u0275providers:[],QG()]}}static forChild(r){return{ngModule:e,providers:[{provide:xl,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(y(YM,8))},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({});let t=e;return t})();function zG(){return{provide:Rx,useFactory:()=>{let t=b(PM),e=b(L),n=b(Ll),r=b(nE),i=b(Pl);return n.scrollOffset&&t.setOffset(n.scrollOffset),new LG(i,r,t,e,n)}}}function qG(){return{provide:Hr,useClass:AM}}function GG(){return{provide:Hr,useClass:cw}}function WG(t){return"guarded"}function KG(t){return[t.initialNavigation==="disabled"?jG().\u0275providers:[],t.initialNavigation==="enabledBlocking"?VG().\u0275providers:[]]}var ZM=new x("");function QG(){return[{provide:ZM,useFactory:xx},{provide:Pf,multi:!0,useExisting:ZM}]}var Doe=(()=>{let e=class e{constructor(){this.executingCounter=KR(0),this.loadingStatus$=new Qe(!1)}get loading$(){return this.loadingStatus$.asObservable()}start(){this.executingCounter.update(r=>r+1),this.executingCounter()>0&&this.loadingStatus$.next(!0)}stop(){this.executingCounter()>0&&this.executingCounter.update(r=>r-1),this.executingCounter()<=0&&this.loadingStatus$.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var kx=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ZG=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Fx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZG(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new oE;let h=s<<2|a>>4;if(r.push(h),l!==64){let f=a<<4&240|l>>2;if(r.push(f),d!==64){let m=l<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},oE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},XG=function(t){let e=kx(t);return Fx.encodeByteArray(e,!0)},cE=function(t){return XG(t).replace(/\./g,"")},lE=function(t){try{return Fx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function JG(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var eW=()=>JG().__FIREBASE_DEFAULTS__,tW=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nW=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&lE(t[1]);return e&&JSON.parse(e)},ap=()=>{try{return eW()||tW()||nW()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Lx=t=>{var e,n;return(n=(e=ap())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]};var uE=()=>{var t;return(t=ap())===null||t===void 0?void 0:t.config},dE=t=>{var e;return(e=ap())===null||e===void 0?void 0:e[`_${t}`]};var op=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function rW(){var t;let e=(t=ap())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jx(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Bx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ux(){let t=qe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hE(){return!rW()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cp(){try{return typeof indexedDB=="object"}catch{return!1}}function $x(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var iW="FirebaseError",nn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iW,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zr.prototype.create)}},zr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?sW(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new nn(i,a,r)}};function sW(t,e){return t.replace(oW,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var oW=/\{\$([^}]+)}/g;function Hx(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(Ox(s)&&Ox(o)){if(!Mi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Ox(t){return t!==null&&typeof t=="object"}function Da(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ca(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ta(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function zx(t,e){let n=new aE(t,e);return n.subscribe.bind(n)}var aE=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");aW(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=sE),i.error===void 0&&(i.error=sE),i.complete===void 0&&(i.complete=sE);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function aW(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sE(){}var Toe=4*60*60*1e3;function ze(t){return t&&t._delegate?t._delegate:t}var In=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ls="[DEFAULT]";var fE=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new op;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lW(e))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ls){return this.instances.has(e)}getOptions(e=Ls){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cW(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ls){return this.component?this.component.multipleInstances?e:Ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function cW(t){return t===Ls?void 0:t}function lW(t){return t.instantiationMode==="EAGER"}var lp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new fE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var uW=[],ge=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ge||{}),dW={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},hW=ge.INFO,fW={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},pW=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=fW[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},xi=class{constructor(e){this.name=e,this._logLevel=hW,this._logHandler=pW,this._userLogHandler=null,uW.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dW[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}};var mW=(t,e)=>e.some(n=>t instanceof n),qx,Gx;function gW(){return qx||(qx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yW(){return Gx||(Gx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Wx=new WeakMap,mE=new WeakMap,Kx=new WeakMap,pE=new WeakMap,yE=new WeakMap;function _W(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(gr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Wx.set(n,t)}).catch(()=>{}),yE.set(e,t),e}function vW(t){if(mE.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});mE.set(t,e)}var gE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Kx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Qx(t){gE=t(gE)}function wW(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(up(this),e,...n);return Kx.set(r,e.sort?e.sort():[e]),gr(r)}:yW().includes(t)?function(...e){return t.apply(up(this),e),gr(Wx.get(this))}:function(...e){return gr(t.apply(up(this),e))}}function EW(t){return typeof t=="function"?wW(t):(t instanceof IDBTransaction&&vW(t),mW(t,gW())?new Proxy(t,gE):t)}function gr(t){if(t instanceof IDBRequest)return _W(t);if(pE.has(t))return pE.get(t);let e=EW(t);return e!==t&&(pE.set(t,e),yE.set(e,t)),e}var up=t=>yE.get(t);function Zx(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=gr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(gr(o.result),c.oldVersion,c.newVersion,gr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var IW=["get","getKey","getAll","getAllKeys","count"],bW=["put","add","delete","clear"],_E=new Map;function Yx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_E.get(e))return _E.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=bW.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||IW.includes(n)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return _E.set(e,s),s}Qx(t=>pe(I({},t),{get:(e,n,r)=>Yx(e,n)||t.get(e,n,r),has:(e,n)=>!!Yx(e,n)||t.has(e,n)}));var wE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DW(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function DW(t){let e=t.getComponent();return e?.type==="VERSION"}var EE="@firebase/app",Xx="0.9.26";var Vs=new xi("@firebase/app"),CW="@firebase/app-compat",TW="@firebase/analytics-compat",SW="@firebase/analytics",AW="@firebase/app-check-compat",RW="@firebase/app-check",MW="@firebase/auth",xW="@firebase/auth-compat",NW="@firebase/database",PW="@firebase/database-compat",OW="@firebase/functions",kW="@firebase/functions-compat",FW="@firebase/installations",LW="@firebase/installations-compat",VW="@firebase/messaging",jW="@firebase/messaging-compat",BW="@firebase/performance",UW="@firebase/performance-compat",$W="@firebase/remote-config",HW="@firebase/remote-config-compat",zW="@firebase/storage",qW="@firebase/storage-compat",GW="@firebase/firestore",WW="@firebase/firestore-compat",KW="firebase",QW="10.7.2";var IE="[DEFAULT]",YW={[EE]:"fire-core",[CW]:"fire-core-compat",[SW]:"fire-analytics",[TW]:"fire-analytics-compat",[RW]:"fire-app-check",[AW]:"fire-app-check-compat",[MW]:"fire-auth",[xW]:"fire-auth-compat",[NW]:"fire-rtdb",[PW]:"fire-rtdb-compat",[OW]:"fire-fn",[kW]:"fire-fn-compat",[FW]:"fire-iid",[LW]:"fire-iid-compat",[VW]:"fire-fcm",[jW]:"fire-fcm-compat",[BW]:"fire-perf",[UW]:"fire-perf-compat",[$W]:"fire-rc",[HW]:"fire-rc-compat",[zW]:"fire-gcs",[qW]:"fire-gcs-compat",[GW]:"fire-fst",[WW]:"fire-fst-compat","fire-js":"fire-js",[KW]:"fire-js-all"};var jl=new Map,bE=new Map;function ZW(t,e){try{t.container.addComponent(e)}catch(n){Vs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Pi(t){let e=t.name;if(bE.has(e))return Vs.debug(`There were multiple attempts to register component ${e}.`),!1;bE.set(e,t);for(let n of jl.values())ZW(n,t);return!0}function Ul(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var XW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ni=new zr("app","Firebase",XW);var DE=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new In("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}};var Oi=QW;function SE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:IE,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ni.create("bad-app-name",{appName:String(i)});if(n||(n=uE()),!n)throw Ni.create("no-options");let s=jl.get(i);if(s){if(Mi(n,s.options)&&Mi(r,s.config))return s;throw Ni.create("duplicate-app",{appName:i})}let o=new lp(i);for(let c of bE.values())o.addComponent(c);let a=new DE(n,r,o);return jl.set(i,a),a}function Sa(t=IE){let e=jl.get(t);if(!e&&t===IE&&uE())return SE();if(!e)throw Ni.create("no-app",{appName:t});return e}function dp(){return Array.from(jl.values())}function it(t,e,n){var r;let i=(r=YW[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vs.warn(a.join(" "));return}Pi(new In(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var JW="firebase-heartbeat-database",e4=1,Bl="firebase-heartbeat-store",vE=null;function nN(){return vE||(vE=Zx(JW,e4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ni.create("idb-open",{originalErrorMessage:t.message})})),vE}function t4(t){return p(this,null,function*(){try{return yield(yield nN()).transaction(Bl).objectStore(Bl).get(rN(t))}catch(e){if(e instanceof nn)Vs.warn(e.message);else{let n=Ni.create("idb-get",{originalErrorMessage:e?.message});Vs.warn(n.message)}}})}function Jx(t,e){return p(this,null,function*(){try{let r=(yield nN()).transaction(Bl,"readwrite");yield r.objectStore(Bl).put(e,rN(t)),yield r.done}catch(n){if(n instanceof nn)Vs.warn(n.message);else{let r=Ni.create("idb-set",{originalErrorMessage:n?.message});Vs.warn(r.message)}}})}function rN(t){return`${t.name}!${t.options.appId}`}var n4=1024,r4=30*24*60*60*1e3,CE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new TE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=eN();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=r4}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=eN(),{heartbeatsToSend:r,unsentEntries:i}=i4(this._heartbeatsCache.heartbeats),s=cE(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function eN(){return new Date().toISOString().substring(0,10)}function i4(t,e=n4){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),tN(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var TE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return cp()?$x().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield t4(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Jx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Jx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function tN(t){return cE(JSON.stringify({version:2,heartbeats:t})).length}function s4(t){Pi(new In("platform-logger",e=>new wE(e),"PRIVATE")),Pi(new In("heartbeat",e=>new CE(e),"PRIVATE")),it(EE,Xx,t),it(EE,Xx,"esm2017"),it("fire-js","")}s4("");var o4="firebase",a4="10.7.2";it(o4,a4,"app");var Bs=new sr("ANGULARFIRE2_VERSION");function fp(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var $l=(t,e)=>{let n=e?[e]:dp(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ra=class{constructor(){return $l(c4)}},c4="app-check";function Aa(){}var hp=class{zone;delegate;constructor(e,n=My){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},AE=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Aa,{},Aa,Aa)),n.pipe(et({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ma=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new hp(Zone.current)),this.insideAngular=n.run(()=>new hp(Zone.current,hn)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(y(L))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function pp(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function l4(t){return pp().ngZone.runOutsideAngular(()=>t())}function js(t){return pp().ngZone.run(()=>t())}function u4(t){return d4(pp())(t)}function d4(t){return function(n){return n=n.lift(new AE(t.ngZone)),n.pipe(ci(t.outsideAngular),ai(t.insideAngular))}}var h4=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),js(()=>t.apply(void 0,r))},Re=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=js(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Aa,{},Aa,Aa))),r[s]=h4(r[s],n));let i=l4(()=>t.apply(this,r));if(!e)if(i instanceof W){let s=pp();return i.pipe(ci(s.outsideAngular),ai(s.insideAngular))}else return js(()=>i);return i instanceof W?i.pipe(u4):i instanceof Promise?js(()=>new Promise((s,o)=>i.then(a=>js(()=>s(a)),a=>js(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:js(()=>i)};var qr=class{constructor(e){return e}},Us=class{constructor(){return dp()}};function f4(t){return t&&t.length===1?t[0]:new qr(Sa())}var RE=new x("angularfire2._apps"),p4={provide:qr,useFactory:f4,deps:[[new mt,RE]]},m4={provide:Us,deps:[[new mt,RE]]};function g4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new qr(r)}}var y4=(()=>{class t{constructor(n){it("angularfire",Bs.full,"core"),it("angularfire",Bs.full,"app"),it("angular",hM.full,n.toString())}static \u0275fac=function(r){return new(r||t)(y(yn))};static \u0275mod=ce({type:t});static \u0275inj=ae({providers:[p4,m4]})}return t})();function lae(t,...e){return{ngModule:y4,providers:[{provide:RE,useFactory:g4(t),multi:!0,deps:[L,Ne,Ma,...e]}]}}var uae=Re(Sa,!0);var dae=Re(SE,!0);function vN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var wN=vN,EN=new zr("auth","Firebase",vN());var wp=new xi("@firebase/auth");function _4(t,...e){wp.logLevel<=ge.WARN&&wp.warn(`Auth (${Oi}): ${t}`,...e)}function gp(t,...e){wp.logLevel<=ge.ERROR&&wp.error(`Auth (${Oi}): ${t}`,...e)}function bn(t,...e){throw QE(t,...e)}function yr(t,...e){return QE(t,...e)}function IN(t,e,n){let r=Object.assign(Object.assign({},wN()),{[e]:n});return new zr("auth","Firebase",r).create(e,{appName:t.name})}function v4(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&bn(t,"argument-error"),IN(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function QE(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return EN.create(t,...e)}function Z(t,e,...n){if(!t)throw QE(e,...n)}function Gr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw gp(e),new Error(e)}function Kr(t,e){t||Gr(e)}function NE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function w4(){return iN()==="http:"||iN()==="https:"}function iN(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function E4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(w4()||jx()||"connection"in navigator)?navigator.onLine:!0}function I4(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var $s=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kr(n>e,"Short delay should be less than long delay!"),this.isMobile=Vx()||Bx()}get(){return E4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function YE(t,e){Kr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Ep=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var b4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var D4=new $s(3e4,6e4);function Fi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Li(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){return bN(t,i,()=>p(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=Da(Object.assign({key:t.config.apiKey},u)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),Ep.fetch()(DN(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},l))}))})}function bN(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},b4),e);try{let i=new PE(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw mp(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw mp(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw mp(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw mp(t,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw IN(t,u,l);bn(t,u)}}catch(i){if(i instanceof nn)throw i;bn(t,"network-request-failed",{message:String(i)})}})}function Ql(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){let l=yield Li(t,e,n,r,i);return"mfaPendingCredential"in l&&bn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function DN(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?YE(t.config,i):`${t.config.apiScheme}://${i}`}function C4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var PE=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yr(this.auth,"network-request-failed")),D4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function mp(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=yr(t,e,r);return i.customData._tokenResponse=n,i}function sN(t){return t!==void 0&&t.enterprise!==void 0}var OE=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return C4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function T4(t,e){return p(this,null,function*(){return Li(t,"GET","/v2/recaptchaConfig",Fi(t,e))})}function S4(t,e){return p(this,null,function*(){return Li(t,"POST","/v1/accounts:delete",e)})}function A4(t,e){return p(this,null,function*(){return Li(t,"POST","/v1/accounts:lookup",e)})}function Hl(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ZE(t,e=!1){return p(this,null,function*(){let n=ze(t),r=yield n.getIdToken(e),i=XE(r);Z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Hl(ME(i.auth_time)),issuedAtTime:Hl(ME(i.iat)),expirationTime:Hl(ME(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function ME(t){return Number(t)*1e3}function XE(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return gp("JWT malformed, contained fewer than 3 sections"),null;try{let i=lE(n);return i?JSON.parse(i):(gp("Failed to decode base64 JWT payload"),null)}catch(i){return gp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function R4(t){let e=XE(t);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function zl(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof nn&&M4(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function M4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var kE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ip=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hl(this.lastLoginAt),this.creationTime=Hl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function bp(t){return p(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield zl(t,A4(n,{idToken:r}));Z(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?N4(s.providerUserInfo):[],a=x4(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ip(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function JE(t){return p(this,null,function*(){let e=ze(t);yield bp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function x4(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function N4(t){return t.map(e=>{var{providerId:n}=e,r=oh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function P4(t,e){return p(this,null,function*(){let n=yield bN(t,{},()=>p(this,null,function*(){let r=Da({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=DN(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ep.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function O4(t,e){return p(this,null,function*(){return Li(t,"POST","/v2/accounts:revokeToken",Fi(t,e))})}var Dp=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):R4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return p(this,null,function*(){return Z(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield P4(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(Z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Z(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Gr("not implemented")}};function ki(t,e){Z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var ql=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=oh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ip(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield zl(this,this.stsTokenManager.getToken(this.auth,e));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return ZE(this,e)}reload(){return JE(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield bp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){let e=yield this.getIdToken();return yield zl(this,S4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(l=n.createdAt)!==null&&l!==void 0?l:void 0,R=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:M,emailVerified:F,isAnonymous:ee,providerData:j,stsTokenManager:te}=n;Z(M&&te,e,"internal-error");let be=Dp.fromJSON(this.name,te);Z(typeof M=="string",e,"internal-error"),ki(d,e.name),ki(h,e.name),Z(typeof F=="boolean",e,"internal-error"),Z(typeof ee=="boolean",e,"internal-error"),ki(f,e.name),ki(m,e.name),ki(g,e.name),ki(v,e.name),ki(E,e.name),ki(R,e.name);let xt=new t({uid:M,auth:e,email:h,emailVerified:F,displayName:d,isAnonymous:ee,photoURL:m,phoneNumber:f,tenantId:g,stsTokenManager:be,createdAt:E,lastLoginAt:R});return j&&Array.isArray(j)&&(xt.providerData=j.map(Qt=>Object.assign({},Qt))),v&&(xt._redirectEventId=v),xt}static _fromIdTokenResponse(e,n,r=!1){return p(this,null,function*(){let i=new Dp;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield bp(s),s})}};var oN=new Map;function Wr(t){Kr(t instanceof Function,"Expected a class definition");let e=oN.get(t);return e?(Kr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,oN.set(t,e),e)}var k4=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),FE=k4;function yp(t,e,n){return`firebase:${t}:${e}:${n}`}var Cp=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=yp(this.userKey,i.apiKey,s),this.fullPersistenceKey=yp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ql._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new t(Wr(FE),e,r);let i=(yield Promise.all(n.map(l=>p(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Wr(FE),o=yp(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(o);if(u){let d=ql._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>p(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function aN(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RN(e))return"Blackberry";if(MN(e))return"Webos";if(eI(e))return"Safari";if((e.includes("chrome/")||TN(e))&&!e.includes("edge/"))return"Chrome";if(AN(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function CN(t=qe()){return/firefox\//i.test(t)}function eI(t=qe()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TN(t=qe()){return/crios\//i.test(t)}function SN(t=qe()){return/iemobile/i.test(t)}function AN(t=qe()){return/android/i.test(t)}function RN(t=qe()){return/blackberry/i.test(t)}function MN(t=qe()){return/webos/i.test(t)}function kp(t=qe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function F4(t=qe()){var e;return kp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function L4(){return Ux()&&document.documentMode===10}function xN(t=qe()){return kp(t)||AN(t)||MN(t)||RN(t)||/windows phone/i.test(t)||SN(t)}function V4(){try{return!!(window&&window!==window.top)}catch{return!1}}function NN(t,e=[]){let n;switch(t){case"Browser":n=aN(qe());break;case"Worker":n=`${aN(qe())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oi}/${r}`}var LE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function j4(n){return p(this,arguments,function*(t,e={}){return Li(t,"GET","/v2/passwordPolicy",Fi(t,e))})}var B4=6,VE=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:B4,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var jE=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tp(this),this.idTokenSubscription=new Tp(this),this.beforeStateQueue=new LE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wr(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Cp.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield bp(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=I4()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){let n=e?ze(e):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(Wr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield j4(this),n=new VE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield O4(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Wr(e)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=yield Cp.create(this,[Wr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&_4(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Vi(t){return ze(t)}var Tp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=zx(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};function U4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function PN(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=yr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",U4().appendChild(r)})}function ON(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var $4="https://www.google.com/recaptcha/enterprise.js?render=",H4="recaptcha-enterprise",z4="NO_RECAPTCHA",BE=class{constructor(e){this.type=H4,this.auth=Vi(e)}verify(e="verify",n=!1){return p(this,null,function*(){function r(s){return p(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>p(this,null,function*(){T4(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new OE(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;sN(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(z4)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&sN(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}PN($4+a).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})})}};function cN(t,e,n,r=!1){return p(this,null,function*(){let i=new BE(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function UE(t,e,n,r){return p(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield cN(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>p(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield cN(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function tI(t,e){let n=Ul(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Mi(s,e??{}))return i;bn(i,"already-initialized")}return n.initialize({options:e})}function q4(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Wr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function nI(t,e,n){let r=Vi(t);Z(r._canInitEmulator,r,"emulator-config-failed"),Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=kN(e),{host:o,port:a}=G4(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||W4()}function kN(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function G4(t){let e=kN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:lN(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:lN(o)}}}function lN(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function W4(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Na=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Gr("not implemented")}_getIdTokenResponse(e){return Gr("not implemented")}_linkToIdToken(e,n){return Gr("not implemented")}_getReauthenticationResolver(e){return Gr("not implemented")}};function K4(t,e){return p(this,null,function*(){return Li(t,"POST","/v1/accounts:signUp",e)})}function Q4(t,e){return p(this,null,function*(){return Ql(t,"POST","/v1/accounts:signInWithPassword",Fi(t,e))})}function Y4(t,e){return p(this,null,function*(){return Ql(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))})}function Z4(t,e){return p(this,null,function*(){return Ql(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))})}var Gl=class t extends Na{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return p(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return UE(e,n,"signInWithPassword",Q4);case"emailLink":return Y4(e,{email:this._email,oobCode:this._password});default:bn(e,"internal-error")}})}_linkToIdToken(e,n){return p(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return UE(e,r,"signUpPassword",K4);case"emailLink":return Z4(e,{idToken:n,email:this._email,oobCode:this._password});default:bn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function xa(t,e){return p(this,null,function*(){return Ql(t,"POST","/v1/accounts:signInWithIdp",Fi(t,e))})}var X4="http://localhost",Sp=class t extends Na{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=oh(n,["providerId","signInMethod"]);if(!r||!i)return null;let o=new t(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let n=this.buildRequest();return xa(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,xa(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,xa(e,n)}buildRequest(){let e={requestUri:X4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Da(n)}return e}};function J4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function e3(t){let e=Ca(Ta(t)).link,n=e?Ca(Ta(e)).deep_link_id:null,r=Ca(Ta(t)).deep_link_id;return(r?Ca(Ta(r)).link:null)||r||n||e||t}var Ap=class t{constructor(e){var n,r,i,s,o,a;let c=Ca(Ta(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,d=J4((i=c.mode)!==null&&i!==void 0?i:null);Z(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=e3(e);try{return new t(n)}catch{return null}}};var FN=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Gl._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Ap.parseLink(r);return Z(i,"argument-error"),Gl._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Wl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Rp=class extends Wl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var rI=(()=>{class t extends Rp{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Sp._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();function t3(t,e){return p(this,null,function*(){return Ql(t,"POST","/v1/accounts:signUp",Fi(t,e))})}var Pa=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return p(this,null,function*(){let s=yield ql._fromIdTokenResponse(e,r,i),o=uN(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return p(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=uN(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function uN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var $E=class t extends nn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function LN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$E._fromErrorAndOperation(t,s,e,r):s})}function n3(t,e,n=!1){return p(this,null,function*(){let r=yield zl(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Pa._forOperation(t,"link",r)})}function r3(t,e,n=!1){return p(this,null,function*(){let{auth:r}=t,i="reauthenticate";try{let s=yield zl(t,LN(r,i,e,t),n);Z(s.idToken,r,"internal-error");let o=XE(s.idToken);Z(o,r,"internal-error");let{sub:a}=o;return Z(t.uid===a,r,"user-mismatch"),Pa._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&bn(r,"user-mismatch"),s}})}function VN(t,e,n=!1){return p(this,null,function*(){let r="signIn",i=yield LN(t,r,e),s=yield Pa._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function iI(t,e){return p(this,null,function*(){return VN(Vi(t),e)})}function jN(t){return p(this,null,function*(){let e=Vi(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function sI(t,e,n){return p(this,null,function*(){let r=Vi(t),o=yield UE(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",t3).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&jN(t),c}),a=yield Pa._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function oI(t,e,n){return iI(ze(t),FN.credential(e,n)).catch(r=>p(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&jN(t),r}))}function aI(t,e,n,r){return ze(t).onIdTokenChanged(e,n,r)}function cI(t,e,n){return ze(t).beforeAuthStateChanged(e,n)}function lI(t,e,n,r){return ze(t).onAuthStateChanged(e,n,r)}function uI(t){return ze(t).signOut()}var Mp="__sak";var xp=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Mp,"1"),this.storage.removeItem(Mp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function i3(){let t=qe();return eI(t)||kp(t)}var s3=1e3,o3=10,a3=(()=>{class t extends xp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=i3()&&V4(),this.fallbackToPolling=xN(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);L4()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,o3):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},s3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return p(this,null,function*(){yield Qn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return p(this,null,function*(){let r=yield Qn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return p(this,null,function*(){yield Qn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),BN=a3;var c3=(()=>{class t extends xp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),dI=c3;function l3(t){return Promise.all(t.map(e=>p(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var u3=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return p(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(u=>p(this,null,function*(){return u(r.origin,o)})),l=yield l3(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function hI(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var HE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=hI("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function _r(){return window}function d3(t){_r().location.href=t}function UN(){return typeof _r().WorkerGlobalScope<"u"&&typeof _r().importScripts=="function"}function h3(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function f3(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function p3(){return UN()?self:null}var $N="firebaseLocalStorageDb",m3=1,Np="firebaseLocalStorage",HN="fbase_key",Hs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Fp(t,e){return t.transaction([Np],e?"readwrite":"readonly").objectStore(Np)}function g3(){let t=indexedDB.deleteDatabase($N);return new Hs(t).toPromise()}function zE(){let t=indexedDB.open($N,m3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Np,{keyPath:HN})}catch(i){n(i)}}),t.addEventListener("success",()=>p(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Np)?e(r):(r.close(),yield g3(),e(yield zE()))}))})}function dN(t,e,n){return p(this,null,function*(){let r=Fp(t,!0).put({[HN]:e,value:n});return new Hs(r).toPromise()})}function y3(t,e){return p(this,null,function*(){let n=Fp(t,!1).get(e),r=yield new Hs(n).toPromise();return r===void 0?null:r.value})}function hN(t,e){let n=Fp(t,!0).delete(e);return new Hs(n).toPromise()}var _3=800,v3=3,w3=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield zE(),this.db)})}_withRetries(n){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>v3)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return UN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=u3._getInstance(p3()),this.receiver._subscribe("keyChanged",(n,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){var n,r;if(this.activeServiceWorker=yield h3(),!this.activeServiceWorker)return;this.sender=new HE(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||f3()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let n=yield zE();return yield dN(n,Mp,"1"),yield hN(n,Mp),!0}catch{}return!1})}_withPendingWrite(n){return p(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>dN(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return p(this,null,function*(){let r=yield this._withRetries(i=>y3(i,n));return this.localCache[n]=r,r})}_remove(n){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>hN(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return p(this,null,function*(){let n=yield this._withRetries(s=>{let o=Fp(s,!1).getAll();return new Hs(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),_3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),zN=w3;var vae=ON("rcb"),wae=new $s(3e4,6e4);function qN(t,e){return e?Wr(e):(Z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Kl=class extends Na{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xa(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function E3(t){return VN(t.auth,new Kl(t),t.bypassAuthState)}function I3(t){let{auth:e,user:n}=t;return Z(n,e,"internal-error"),r3(n,new Kl(t),t.bypassAuthState)}function b3(t){return p(this,null,function*(){let{auth:e,user:n}=t;return Z(n,e,"internal-error"),n3(n,new Kl(t),t.bypassAuthState)})}var Pp=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>p(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return p(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return E3;case"linkViaPopup":case"linkViaRedirect":return b3;case"reauthViaPopup":case"reauthViaRedirect":return I3;default:bn(this.auth,"internal-error")}}resolve(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var D3=new $s(2e3,1e4);function fI(t,e,n){return p(this,null,function*(){let r=Vi(t);v4(t,e,Wl);let i=qN(r,n);return new C3(r,"signInViaPopup",e,i).executeNotNull()})}var C3=(()=>{class t extends Pp{constructor(n,r,i,s,o){super(n,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return p(this,null,function*(){let n=yield this.execute();return Z(n,this.auth,"internal-error"),n})}onExecution(){return p(this,null,function*(){Kr(this.filter.length===1,"Popup operations only handle one event");let n=hI();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,D3.get())};n()}}t.currentPopupAction=null;return t})(),T3="pendingRedirect",_p=new Map,qE=class t extends Pp{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let e=_p.get(this.auth._key());if(!e){try{let r=(yield S3(this.resolver,this.auth))?yield Qn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_p.set(this.auth._key(),e)}return this.bypassAuthState||_p.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return p(this,null,function*(){if(e.type==="signInViaRedirect")return Qn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Qn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function S3(t,e){return p(this,null,function*(){let n=M3(e),r=R3(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function A3(t,e){_p.set(t._key(),e)}function R3(t){return Wr(t._redirectPersistence)}function M3(t){return yp(T3,t.config.apiKey,t.name)}function x3(t,e,n=!1){return p(this,null,function*(){let r=Vi(t),i=qN(r,e),o=yield new qE(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var N3=10*60*1e3,GE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!P3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!GN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(yr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=N3&&this.cachedEventUids.clear(),this.cachedEventUids.has(fN(e))}saveEventToCache(e){this.cachedEventUids.add(fN(e)),this.lastProcessedEventTime=Date.now()}};function fN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function GN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function P3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GN(t);default:return!1}}function O3(n){return p(this,arguments,function*(t,e={}){return Li(t,"GET","/v1/projects",e)})}var k3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F3=/^https?/;function L3(t){return p(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield O3(t);for(let n of e)try{if(V3(n))return}catch{}bn(t,"unauthorized-domain")})}function V3(t){let e=NE(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!F3.test(n))return!1;if(k3.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var j3=new $s(3e4,6e4);function pN(){let t=_r().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function B3(t){return new Promise((e,n)=>{var r,i,s;function o(){pN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pN(),n(yr(t,"network-request-failed"))},timeout:j3.get()})}if(!((i=(r=_r().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=_r().gapi)===null||s===void 0)&&s.load)o();else{let a=ON("iframefcb");return _r()[a]=()=>{gapi.load?o():n(yr(t,"network-request-failed"))},PN(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw vp=null,e})}var vp=null;function U3(t){return vp=vp||B3(t),vp}var $3=new $s(5e3,15e3),H3="__/auth/iframe",z3="emulator/auth/iframe",q3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},G3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W3(t){let e=t.config;Z(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?YE(e,z3):`https://${t.config.authDomain}/${H3}`,r={apiKey:e.apiKey,appName:t.name,v:Oi},i=G3.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Da(r).slice(1)}`}function K3(t){return p(this,null,function*(){let e=yield U3(t),n=_r().gapi;return Z(n,t,"internal-error"),e.open({where:document.body,url:W3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:q3,dontclear:!0},r=>new Promise((i,s)=>p(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=yr(t,"network-request-failed"),a=_r().setTimeout(()=>{s(o)},$3.get());function c(){_r().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var Q3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Y3=500,Z3=600,X3="_blank",J3="http://localhost",Op=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function e9(t,e,n,r=Y3,i=Z3){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},Q3),{width:r.toString(),height:i.toString(),top:s,left:o}),l=qe().toLowerCase();n&&(a=TN(l)?X3:n),CN(l)&&(e=e||J3,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[f,m])=>`${h}${f}=${m},`,"");if(F4(l)&&a!=="_self")return t9(e||"",a),new Op(null);let d=window.open(e||"",a,u);Z(d,t,"popup-blocked");try{d.focus()}catch{}return new Op(d)}function t9(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var n9="__/auth/handler",r9="emulator/auth/handler",i9=encodeURIComponent("fac");function mN(t,e,n,r,i,s){return p(this,null,function*(){Z(t.config.authDomain,t,"auth-domain-config-required"),Z(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Oi,eventId:i};if(e instanceof Wl){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Hx(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof Rp){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield t._getAppCheckToken(),l=c?`#${i9}=${encodeURIComponent(c)}`:"";return`${s9(t)}?${Da(a).slice(1)}${l}`})}function s9({config:t}){return t.emulator?YE(t,r9):`https://${t.authDomain}/${n9}`}var xE="webStorageSupport",WE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dI,this._completeRedirectFn=x3,this._overrideRedirectResult=A3}_openPopup(e,n,r,i){return p(this,null,function*(){var s;Kr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield mN(e,n,r,NE(),i);return e9(e,o,hI())})}_openRedirect(e,n,r,i){return p(this,null,function*(){yield this._originValidation(e);let s=yield mN(e,n,r,NE(),i);return d3(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Kr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return p(this,null,function*(){let n=yield K3(e),r=new GE(e);return n.register("authEvent",i=>(Z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xE,{type:xE},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[xE];o!==void 0&&n(!!o),bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=L3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xN()||eI()||kp()}},WN=WE;var gN="@firebase/auth",yN="1.5.1";var KE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function o9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function a9(t){Pi(new In("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NN(t)},l=new jE(r,i,s,c);return q4(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Pi(new In("auth-internal",e=>{let n=Vi(e.getProvider("auth").getImmediate());return(r=>new KE(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),it(gN,yN,o9(t)),it(gN,yN,"esm2017")}var c9=5*60,l9=dE("authIdTokenMaxAge")||c9,_N=null,u9=t=>e=>p(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>l9)return;let i=n?.token;_N!==i&&(_N=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function pI(t=Sa()){let e=Ul(t,"auth");if(e.isInitialized())return e.getImmediate();let n=tI(t,{popupRedirectResolver:WN,persistence:[zN,BN,dI]}),r=dE("authTokenSyncURL");if(r){let s=u9(r);cI(n,s,()=>s(n.currentUser)),aI(n,o=>s(o))}let i=Lx("auth");return i&&nI(n,`http://${i}`),n}a9("Browser");var KN="auth",zs=class{constructor(e){return e}},Yl=class{constructor(){return $l(KN)}};var mI=new x("angularfire2.auth-instances");function X9(t,e){let n=fp(KN,t,e);return n&&new zs(n)}function J9(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new zs(r)}}var e6={provide:Yl,deps:[[new mt,mI]]},t6={provide:zs,useFactory:X9,deps:[[new mt,mI],qr]},n6=(()=>{class t{constructor(){it("angularfire",Bs.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ce({type:t});static \u0275inj=ae({providers:[t6,e6]})}return t})();function tce(t,...e){return{ngModule:n6,providers:[{provide:mI,useFactory:J9(t),multi:!0,deps:[L,Ne,Ma,Us,[new mt,Ra],...e]}]}}var QN=Re(sI,!0);var gI=Re(pI,!0);var YN=Re(lI,!0);var ZN=Re(oI,!0);var XN=Re(fI,!0);var JN=Re(uI,!0);var ice=(()=>{let e=class e{constructor(r,i,s){this.auth=r,this.ngZone=i,this.router=s,YN(this.auth,o=>{o&&(this.UserData=o)})}get userUid(){return gI().currentUser?.uid||""}getAuthFire(){return this.auth.currentUser}Register(r,i){return QN(this.auth,r,i).then(s=>{this.UserData=s.user,this.ngZone.run(()=>{this.sendEmailVerification(),this.router.navigate(["/signIn"])})}).catch(s=>{window.alert(s.message)})}sendEmailVerification(){throw new Error("Method not implemented.")}Login(r,i){return ZN(this.auth,r,i).then(s=>{this.UserData=s.user,this.ngZone.run(()=>{this.router.navigate(["/"])})}).catch(s=>{window.alert(s.message)})}googleSignIn(){return this.loginWithPopup(new rI)}loginWithPopup(r){return XN(this.auth,r).then(i=>(console.log("logged in",i),i)).catch(i=>{console.log(i)})}logout(){JN(this.auth).then(()=>this.router.navigate(["/signIn"]))}isSignedIn(){return gI().currentUser!==null}};e.\u0275fac=function(i){return new(i||e)(y(zs),y(L),y(Un))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var i6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hn={},N,VI=VI||{},J=i6||self;function Yp(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function uu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function s6(t){return Object.prototype.hasOwnProperty.call(t,yI)&&t[yI]||(t[yI]=++o6)}var yI="closure_uid_"+(1e9*Math.random()>>>0),o6=0;function a6(t,e,n){return t.call.apply(t.bind,arguments)}function c6(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function St(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?St=a6:St=c6,St.apply(null,arguments)}function Lp(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function dt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ji(){this.s=this.s,this.o=this.o}var l6=0;ji.prototype.s=!1;ji.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),l6!=0)&&s6(this)};ji.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var hP=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function jI(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function eP(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Yp(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function At(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var u6=function(){if(!J.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};J.addEventListener("test",n,e),J.removeEventListener("test",n,e)}catch{}return t}();function nu(t){return/^[\s\xa0]*$/.test(t)}function Zp(){var t=J.navigator;return t&&(t=t.userAgent)?t:""}function vr(t){return Zp().indexOf(t)!=-1}function BI(t){return BI[" "](t),t}BI[" "]=function(){};function d6(t,e){var n=J6;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var h6=vr("Opera"),La=vr("Trident")||vr("MSIE"),fP=vr("Edge"),II=fP||La,pP=vr("Gecko")&&!(Zp().toLowerCase().indexOf("webkit")!=-1&&!vr("Edge"))&&!(vr("Trident")||vr("MSIE"))&&!vr("Edge"),f6=Zp().toLowerCase().indexOf("webkit")!=-1&&!vr("Edge");function mP(){var t=J.document;return t?t.documentMode:void 0}var bI;e:{if(Vp="",jp=function(){var t=Zp();if(pP)return/rv:([^\);]+)(\)|;)/.exec(t);if(fP)return/Edge\/([\d\.]+)/.exec(t);if(La)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(f6)return/WebKit\/(\S+)/.exec(t);if(h6)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),jp&&(Vp=jp?jp[1]:""),La&&(Bp=mP(),Bp!=null&&Bp>parseFloat(Vp))){bI=String(Bp);break e}bI=Vp}var Vp,jp,Bp,DI;J.document&&La?(_I=mP(),DI=_I||parseInt(bI,10)||void 0):DI=void 0;var _I,p6=DI;function ru(t,e){if(At.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(pP){e:{try{BI(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:m6[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ru.$.h.call(this)}}dt(ru,At);var m6={2:"touch",3:"pen",4:"mouse"};ru.prototype.h=function(){ru.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var du="closure_listenable_"+(1e6*Math.random()|0),g6=0;function y6(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++g6,this.fa=this.ia=!1}function Xp(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function UI(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function _6(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function gP(t){let e={};for(let n in t)e[n]=t[n];return e}var tP="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yP(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<tP.length;s++)n=tP[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Jp(t){this.src=t,this.g={},this.h=0}Jp.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=TI(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new y6(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function CI(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=hP(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Xp(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function TI(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var $I="closure_lm_"+(1e6*Math.random()|0),vI={};function _P(t,e,n,r,i){if(r&&r.once)return wP(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)_P(t,e[s],n,r,i);return null}return n=qI(n),t&&t[du]?t.O(e,n,uu(r)?!!r.capture:!!r,i):vP(t,e,n,!1,r,i)}function vP(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=uu(i)?!!i.capture:!!i,a=zI(t);if(a||(t[$I]=a=new Jp(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=v6(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)u6||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(IP(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function v6(){function t(n){return e.call(t.src,t.listener,n)}let e=w6;return t}function wP(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)wP(t,e[s],n,r,i);return null}return n=qI(n),t&&t[du]?t.P(e,n,uu(r)?!!r.capture:!!r,i):vP(t,e,n,!0,r,i)}function EP(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)EP(t,e[s],n,r,i);else r=uu(r)?!!r.capture:!!r,n=qI(n),t&&t[du]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=TI(s,n,r,i),-1<n&&(Xp(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=zI(t))&&(e=t.g[e.toString()],t=-1,e&&(t=TI(e,n,r,i)),(n=-1<t?e[t]:null)&&HI(n))}function HI(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[du])CI(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(IP(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=zI(e))?(CI(n,t),n.h==0&&(n.src=null,e[$I]=null)):Xp(t)}}}function IP(t){return t in vI?vI[t]:vI[t]="on"+t}function w6(t,e){if(t.fa)t=!0;else{e=new ru(e,this);var n=t.listener,r=t.la||t.src;t.ia&&HI(t),t=n.call(r,e)}return t}function zI(t){return t=t[$I],t instanceof Jp?t:null}var wI="__closure_events_fn_"+(1e9*Math.random()>>>0);function qI(t){return typeof t=="function"?t:(t[wI]||(t[wI]=function(e){return t.handleEvent(e)}),t[wI])}function ut(){ji.call(this),this.i=new Jp(this),this.S=this,this.J=null}dt(ut,ji);ut.prototype[du]=!0;ut.prototype.removeEventListener=function(t,e,n,r){EP(this,t,e,n,r)};function _t(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new At(e,t);else if(e instanceof At)e.target=e.target||t;else{var i=e;e=new At(r,t),yP(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Up(o,r,!0,e)&&i}if(o=e.g=t,i=Up(o,r,!0,e)&&i,i=Up(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Up(o,r,!1,e)&&i}ut.prototype.N=function(){if(ut.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Xp(n[r]);delete t.g[e],t.h--}}this.J=null};ut.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ut.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Up(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&CI(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var GI=J.JSON.stringify,SI=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function E6(){var t=WI;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var AI=class{constructor(){this.h=this.g=null}add(e,n){let r=bP.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},bP=new SI(()=>new RI,t=>t.reset()),RI=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function I6(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function b6(t){J.setTimeout(()=>{throw t},0)}var iu,su=!1,WI=new AI,DP=()=>{let t=J.Promise.resolve(void 0);iu=()=>{t.then(D6)}},D6=()=>{for(var t;t=E6();){try{t.h.call(t.g)}catch(n){b6(n)}var e=bP;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}su=!1};function em(t,e){ut.call(this),this.h=t||1,this.g=e||J,this.j=St(this.qb,this),this.l=Date.now()}dt(em,ut);N=em.prototype;N.ga=!1;N.T=null;N.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),_t(this,"tick"),this.ga&&(KI(this),this.start()))}};N.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function KI(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}N.N=function(){em.$.N.call(this),KI(this),delete this.g};function QI(t,e,n){if(typeof t=="function")n&&(t=St(t,n));else if(t&&typeof t.handleEvent=="function")t=St(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:J.setTimeout(t,e||0)}function CP(t){t.g=QI(()=>{t.g=null,t.i&&(t.i=!1,CP(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var MI=class extends ji{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:CP(this)}N(){super.N(),this.g&&(J.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function ou(t){ji.call(this),this.h=t,this.g={}}dt(ou,ji);var nP=[];function TP(t,e,n,r){Array.isArray(n)||(n&&(nP[0]=n.toString()),n=nP);for(var i=0;i<n.length;i++){var s=_P(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function SP(t){UI(t.g,function(e,n){this.g.hasOwnProperty(n)&&HI(e)},t),t.g={}}ou.prototype.N=function(){ou.$.N.call(this),SP(this)};ou.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function tm(){this.g=!0}tm.prototype.Ea=function(){this.g=!1};function C6(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function T6(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function ka(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+A6(t,n)+(r?" "+r:"")})}function S6(t,e){t.info(function(){return"TIMEOUT: "+e})}tm.prototype.info=function(){};function A6(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return GI(n)}catch{return e}}var Ks={},rP=null;function nm(){return rP=rP||new ut}Ks.Ta="serverreachability";function AP(t){At.call(this,Ks.Ta,t)}dt(AP,At);function au(t){let e=nm();_t(e,new AP(e))}Ks.STAT_EVENT="statevent";function RP(t,e){At.call(this,Ks.STAT_EVENT,t),this.stat=e}dt(RP,At);function Vt(t){let e=nm();_t(e,new RP(e,t))}Ks.Ua="timingevent";function MP(t,e){At.call(this,Ks.Ua,t),this.size=e}dt(MP,At);function hu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return J.setTimeout(function(){t()},e)}var rm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},xP={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function YI(){}YI.prototype.h=null;function iP(t){return t.h||(t.h=t.i())}function NP(){}var fu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ZI(){At.call(this,"d")}dt(ZI,At);function XI(){At.call(this,"c")}dt(XI,At);var xI;function im(){}dt(im,YI);im.prototype.g=function(){return new XMLHttpRequest};im.prototype.i=function(){return{}};xI=new im;function pu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new ou(this),this.P=R6,t=II?125:void 0,this.V=new em(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new PP}function PP(){this.i=null,this.g="",this.h=!1}var R6=45e3,OP={},NI={};N=pu.prototype;N.setTimeout=function(t){this.P=t};function PI(t,e,n){t.L=1,t.A=om(Yr(e)),t.u=n,t.S=!0,kP(t,null)}function kP(t,e){t.G=Date.now(),mu(t),t.B=Yr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),HP(n.i,"t",r),t.o=0,n=t.l.J,t.h=new PP,t.g=uO(t.l,n?e:null,!t.u),0<t.O&&(t.M=new MI(St(t.Pa,t,t.g),t.O)),TP(t.U,t.g,"readystatechange",t.nb),e=t.I?gP(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),au(),C6(t.j,t.v,t.B,t.m,t.W,t.u)}N.nb=function(t){t=t.target;let e=this.M;e&&wr(t)==3?e.l():this.Pa(t)};N.Pa=function(t){try{if(t==this.g)e:{let u=wr(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||II||this.g&&(this.h.h||this.g.ja()||cP(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?au(3):au(2)),sm(this);var n=this.g.da();this.ca=n;t:if(FP(this)){var r=cP(this.g);t="";var i=r.length,s=wr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qs(this),tu(this);var o="";break t}this.h.i=new J.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,T6(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nu(a)){var l=a;break t}}l=null}if(n=l)ka(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,OI(this,n);else{this.i=!1,this.s=3,Vt(12),qs(this),tu(this);break e}}this.S?(LP(this,u,o),II&&this.i&&u==3&&(TP(this.U,this.V,"tick",this.mb),this.V.start())):(ka(this.j,this.m,o,null),OI(this,o)),u==4&&qs(this),this.i&&!this.J&&(u==4?oO(this.l,this):(this.i=!1,mu(this)))}else Y6(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),qs(this),tu(this)}}}catch{}finally{}};function FP(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function LP(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=M6(t,n),i==NI){e==4&&(t.s=4,Vt(14),r=!1),ka(t.j,t.m,null,"[Incomplete Response]");break}else if(i==OP){t.s=4,Vt(15),ka(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ka(t.j,t.m,i,null),OI(t,i);FP(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Vt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ib(e),e.M=!0,Vt(11))):(ka(t.j,t.m,n,"[Invalid Chunked Response]"),qs(t),tu(t))}N.mb=function(){if(this.g){var t=wr(this.g),e=this.g.ja();this.o<e.length&&(sm(this),LP(this,t,e),this.i&&t!=4&&mu(this))}};function M6(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?NI:(n=Number(e.substring(n,r)),isNaN(n)?OP:(r+=1,r+n>e.length?NI:(e=e.slice(r,r+n),t.o=r+n,e)))}N.cancel=function(){this.J=!0,qs(this)};function mu(t){t.Y=Date.now()+t.P,VP(t,t.P)}function VP(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=hu(St(t.lb,t),e)}function sm(t){t.C&&(J.clearTimeout(t.C),t.C=null)}N.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(S6(this.j,this.B),this.L!=2&&(au(),Vt(17)),qs(this),this.s=2,tu(this)):VP(this,this.Y-t)};function tu(t){t.l.H==0||t.J||oO(t.l,t)}function qs(t){sm(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,KI(t.V),SP(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function OI(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||kI(n.i,t))){if(!t.K&&kI(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Gp(n),lm(n);else break e;rb(n),Vt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=hu(St(n.ib,n),6e3));if(1>=GP(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Gs(n,11)}else if((t.K||n.g==t)&&Gp(n),!nu(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var s=r.i;s.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(JI(s,s.h),s.h=null))}if(r.F){let g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,Le(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=lO(r,r.J?r.pa:null,r.Y),o.K){WP(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(sm(a),mu(a)),r.g=o}else iO(r);0<n.j.length&&um(n)}else l[0]!="stop"&&l[0]!="close"||Gs(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Gs(n,7):nb(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}au(4)}catch{}}function x6(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Yp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function N6(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Yp(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function jP(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Yp(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=N6(t),r=x6(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var BP=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function P6(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ws(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ws){this.h=t.h,zp(this,t.j),this.s=t.s,this.g=t.g,qp(this,t.m),this.l=t.l;var e=t.i,n=new cu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),sP(this,n),this.o=t.o}else t&&(e=String(t).match(BP))?(this.h=!1,zp(this,e[1]||"",!0),this.s=Jl(e[2]||""),this.g=Jl(e[3]||"",!0),qp(this,e[4]),this.l=Jl(e[5]||"",!0),sP(this,e[6]||"",!0),this.o=Jl(e[7]||"")):(this.h=!1,this.i=new cu(null,this.h))}Ws.prototype.toString=function(){var t=[],e=this.j;e&&t.push(eu(e,oP,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(eu(e,oP,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(eu(n,n.charAt(0)=="/"?F6:k6,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",eu(n,V6)),t.join("")};function Yr(t){return new Ws(t)}function zp(t,e,n){t.j=n?Jl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function qp(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function sP(t,e,n){e instanceof cu?(t.i=e,j6(t.i,t.h)):(n||(e=eu(e,L6)),t.i=new cu(e,t.h))}function Le(t,e,n){t.i.set(e,n)}function om(t){return Le(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Jl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function eu(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,O6),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function O6(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var oP=/[#\/\?@]/g,k6=/[#\?:]/g,F6=/[#\?]/g,L6=/[#\?@]/g,V6=/#/g;function cu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Bi(t){t.g||(t.g=new Map,t.h=0,t.i&&P6(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}N=cu.prototype;N.add=function(t,e){Bi(this),this.i=null,t=Va(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function UP(t,e){Bi(t),e=Va(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function $P(t,e){return Bi(t),e=Va(t,e),t.g.has(e)}N.forEach=function(t,e){Bi(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};N.ta=function(){Bi(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};N.Z=function(t){Bi(this);let e=[];if(typeof t=="string")$P(this,t)&&(e=e.concat(this.g.get(Va(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};N.set=function(t,e){return Bi(this),this.i=null,t=Va(this,t),$P(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};N.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function HP(t,e,n){UP(t,e),0<n.length&&(t.i=null,t.g.set(Va(t,e),jI(n)),t.h+=n.length)}N.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Va(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function j6(t,e){e&&!t.j&&(Bi(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(UP(this,r),HP(this,i,n))},t)),t.j=e}var B6=class{constructor(t,e){this.g=t,this.map=e}};function zP(t){this.l=t||U6,J.PerformanceNavigationTiming?(t=J.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(J.g&&J.g.Ka&&J.g.Ka()&&J.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var U6=10;function qP(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function GP(t){return t.h?1:t.g?t.g.size:0}function kI(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function JI(t,e){t.g?t.g.add(e):t.h=e}function WP(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}zP.prototype.cancel=function(){if(this.i=KP(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function KP(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return jI(t.i)}var $6=class{stringify(t){return J.JSON.stringify(t,void 0)}parse(t){return J.JSON.parse(t,void 0)}};function H6(){this.g=new $6}function z6(t,e,n){let r=n||"";try{jP(t,function(i,s){let o=i;uu(i)&&(o=GI(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function q6(t,e){let n=new tm;if(J.Image){let r=new Image;r.onload=Lp($p,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Lp($p,n,r,"TestLoadImage: error",!1,e),r.onabort=Lp($p,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Lp($p,n,r,"TestLoadImage: timeout",!1,e),J.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function $p(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function gu(t){this.l=t.ec||null,this.j=t.ob||!1}dt(gu,YI);gu.prototype.g=function(){return new am(this.l,this.j)};gu.prototype.i=function(t){return function(){return t}}({});function am(t,e){ut.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=eb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dt(am,ut);var eb=0;N=am.prototype;N.open=function(t,e){if(this.readyState!=eb)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,lu(this)};N.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||J).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};N.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yu(this)),this.readyState=eb};N.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,lu(this)),this.g&&(this.readyState=3,lu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof J.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;QP(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function QP(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}N.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?yu(this):lu(this),this.readyState==3&&QP(this)}};N.Za=function(t){this.g&&(this.response=this.responseText=t,yu(this))};N.Ya=function(t){this.g&&(this.response=t,yu(this))};N.ka=function(){this.g&&yu(this)};function yu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,lu(t)}N.setRequestHeader=function(t,e){this.v.append(t,e)};N.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};N.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function lu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(am.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var G6=J.JSON.parse;function Ge(t){ut.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=YP,this.L=this.M=!1}dt(Ge,ut);var YP="",W6=/^https?$/i,K6=["POST","PUT"];N=Ge.prototype;N.Oa=function(t){this.M=t};N.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():xI.g(),this.C=this.u?iP(this.u):iP(xI),this.g.onreadystatechange=St(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){aP(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=J.FormData&&t instanceof J.FormData,!(0<=hP(K6,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{JP(this),0<this.B&&((this.L=Q6(this.g))?(this.g.timeout=this.B,this.g.ontimeout=St(this.ua,this)):this.A=QI(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){aP(this,s)}};function Q6(t){return La&&typeof t.timeout=="number"&&t.ontimeout!==void 0}N.ua=function(){typeof VI<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_t(this,"timeout"),this.abort(8))};function aP(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ZP(t),cm(t)}function ZP(t){t.F||(t.F=!0,_t(t,"complete"),_t(t,"error"))}N.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,_t(this,"complete"),_t(this,"abort"),cm(this))};N.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cm(this,!0)),Ge.$.N.call(this)};N.La=function(){this.s||(this.G||this.v||this.l?XP(this):this.kb())};N.kb=function(){XP(this)};function XP(t){if(t.h&&typeof VI<"u"&&(!t.C[1]||wr(t)!=4||t.da()!=2)){if(t.v&&wr(t)==4)QI(t.La,0,t);else if(_t(t,"readystatechange"),wr(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(BP)[1]||null;!i&&J.self&&J.self.location&&(i=J.self.location.protocol.slice(0,-1)),r=!W6.test(i?i.toLowerCase():"")}n=r}if(n)_t(t,"complete"),_t(t,"success");else{t.m=6;try{var s=2<wr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",ZP(t)}}finally{cm(t)}}}}function cm(t,e){if(t.g){JP(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||_t(t,"ready");try{n.onreadystatechange=r}catch{}}}function JP(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(J.clearTimeout(t.A),t.A=null)}N.isActive=function(){return!!this.g};function wr(t){return t.g?t.g.readyState:0}N.da=function(){try{return 2<wr(this)?this.g.status:-1}catch{return-1}};N.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};N.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),G6(e)}};function cP(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case YP:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Y6(t){let e={};t=(t.g&&2<=wr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(nu(t[r]))continue;var n=I6(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}_6(e,function(r){return r.join(", ")})}N.Ia=function(){return this.m};N.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function eO(t){let e="";return UI(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function tb(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=eO(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Le(t,e,n))}function Zl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function tO(t){this.Ga=0,this.j=[],this.l=new tm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Zl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Zl("baseRetryDelayMs",5e3,t),this.hb=Zl("retryDelaySeedMs",1e4,t),this.eb=Zl("forwardChannelMaxRetries",2,t),this.xa=Zl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new zP(t&&t.concurrentRequestLimit),this.Ja=new H6,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}N=tO.prototype;N.ra=8;N.H=1;function nb(t){if(nO(t),t.H==3){var e=t.W++,n=Yr(t.I);if(Le(n,"SID",t.K),Le(n,"RID",e),Le(n,"TYPE","terminate"),_u(t,n),e=new pu(t,t.l,e),e.L=2,e.A=om(Yr(n)),n=!1,J.navigator&&J.navigator.sendBeacon)try{n=J.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&J.Image&&(new Image().src=e.A,n=!0),n||(e.g=uO(e.l,null),e.g.ha(e.A)),e.G=Date.now(),mu(e)}cO(t)}function lm(t){t.g&&(ib(t),t.g.cancel(),t.g=null)}function nO(t){lm(t),t.u&&(J.clearTimeout(t.u),t.u=null),Gp(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&J.clearTimeout(t.m),t.m=null)}function um(t){if(!qP(t.i)&&!t.m){t.m=!0;var e=t.Na;iu||DP(),su||(iu(),su=!0),WI.add(e,t),t.C=0}}function Z6(t,e){return GP(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=hu(St(t.Na,t,e),aO(t,t.C)),t.C++,!0)}N.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new pu(this,this.l,t),s=this.s;if(this.U&&(s?(s=gP(s),yP(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=rO(this,i,e),n=Yr(this.I),Le(n,"RID",t),Le(n,"CVER",22),this.F&&Le(n,"X-HTTP-Session-Id",this.F),_u(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(eO(s)))+"&"+e:this.o&&tb(n,this.o,s)),JI(this.i,i),this.bb&&Le(n,"TYPE","init"),this.P?(Le(n,"$req",e),Le(n,"SID","null"),i.aa=!0,PI(i,n,null)):PI(i,n,e),this.H=2}}else this.H==3&&(t?lP(this,t):this.j.length==0||qP(this.i)||lP(this))};function lP(t,e){var n;e?n=e.m:n=t.W++;let r=Yr(t.I);Le(r,"SID",t.K),Le(r,"RID",n),Le(r,"AID",t.V),_u(t,r),t.o&&t.s&&tb(r,t.o,t.s),n=new pu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=rO(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),JI(t.i,n),PI(n,r,e)}function _u(t,e){t.na&&UI(t.na,function(n,r){Le(e,r,n)}),t.h&&jP({},function(n,r){Le(e,r,n)})}function rO(t,e,n){n=Math.min(t.j.length,n);var r=t.h?St(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let l=i[c].g,u=i[c].map;if(l-=s,0>l)s=Math.max(0,i[c].g-100),a=!1;else try{z6(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function iO(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;iu||DP(),su||(iu(),su=!0),WI.add(e,t),t.A=0}}function rb(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=hu(St(t.Ma,t),aO(t,t.A)),t.A++,!0)}N.Ma=function(){if(this.u=null,sO(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=hu(St(this.jb,this),t)}};N.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Vt(10),lm(this),sO(this))};function ib(t){t.B!=null&&(J.clearTimeout(t.B),t.B=null)}function sO(t){t.g=new pu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Yr(t.wa);Le(e,"RID","rpc"),Le(e,"SID",t.K),Le(e,"AID",t.V),Le(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Le(e,"TO",t.qa),Le(e,"TYPE","xmlhttp"),_u(t,e),t.o&&t.s&&tb(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=om(Yr(e)),n.u=null,n.S=!0,kP(n,t)}N.ib=function(){this.v!=null&&(this.v=null,lm(this),rb(this),Vt(19))};function Gp(t){t.v!=null&&(J.clearTimeout(t.v),t.v=null)}function oO(t,e){var n=null;if(t.g==e){Gp(t),ib(t),t.g=null;var r=2}else if(kI(t.i,e))n=e.F,WP(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=nm(),_t(r,new MP(r,n)),um(t)}else iO(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&Z6(t,e)||r==2&&rb(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Gs(t,5);break;case 4:Gs(t,10);break;case 3:Gs(t,6);break;default:Gs(t,2)}}}function aO(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Gs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=St(t.pb,t);n||(n=new Ws("//www.google.com/images/cleardot.gif"),J.location&&J.location.protocol=="http"||zp(n,"https"),om(n)),q6(n.toString(),r)}else Vt(2);t.H=0,t.h&&t.h.za(e),cO(t),nO(t)}N.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Vt(2)):(this.l.info("Failed to ping google.com"),Vt(1))};function cO(t){if(t.H=0,t.ma=[],t.h){let e=KP(t.i);(e.length!=0||t.j.length!=0)&&(eP(t.ma,e),eP(t.ma,t.j),t.i.i.length=0,jI(t.j),t.j.length=0),t.h.ya()}}function lO(t,e,n){var r=n instanceof Ws?Yr(n):new Ws(n);if(r.g!="")e&&(r.g=e+"."+r.g),qp(r,r.m);else{var i=J.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ws(null);r&&zp(s,r),e&&(s.g=e),i&&qp(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Le(r,n,e),Le(r,"VER",t.ra),_u(t,r),r}function uO(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Ge(new gu({ob:n})):new Ge(t.va),e.Oa(t.J),e}N.isActive=function(){return!!this.h&&this.h.isActive(this)};function dO(){}N=dO.prototype;N.Ba=function(){};N.Aa=function(){};N.za=function(){};N.ya=function(){};N.isActive=function(){return!0};N.Va=function(){};function Wp(){if(La&&!(10<=Number(p6)))throw Error("Environmental error: no available transport.")}Wp.prototype.g=function(t,e){return new rn(t,e)};function rn(t,e){ut.call(this),this.g=new tO(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!nu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!nu(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ja(this)}dt(rn,ut);rn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Vt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=lO(t,null,t.Y),um(t)};rn.prototype.close=function(){nb(this.g)};rn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=GI(t),t=n);e.j.push(new B6(e.fb++,t)),e.H==3&&um(e)};rn.prototype.N=function(){this.g.h=null,delete this.j,nb(this.g),delete this.g,rn.$.N.call(this)};function hO(t){ZI.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}dt(hO,ZI);function fO(){XI.call(this),this.status=1}dt(fO,XI);function ja(t){this.g=t}dt(ja,dO);ja.prototype.Ba=function(){_t(this.g,"a")};ja.prototype.Aa=function(t){_t(this.g,new hO(t))};ja.prototype.za=function(t){_t(this.g,new fO)};ja.prototype.ya=function(){_t(this.g,"b")};function X6(){this.blockSize=-1}function $n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}dt($n,X6);$n.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function EI(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}$n.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)EI(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){EI(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){EI(this,r),i=0;break}}this.h=i,this.i+=e};$n.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Te(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var J6={};function sb(t){return-128<=t&&128>t?d6(t,function(e){return new Te([e|0],0>e?-1:0)}):new Te([t|0],0>t?-1:0)}function Er(t){if(isNaN(t)||!isFinite(t))return Fa;if(0>t)return yt(Er(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=FI;return new Te(e,0)}function pO(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return yt(pO(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Er(Math.pow(e,8)),r=Fa,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Er(Math.pow(e,s)),r=r.R(s).add(Er(o))):(r=r.R(n),r=r.add(Er(o)))}return r}var FI=4294967296,Fa=sb(0),LI=sb(1),uP=sb(16777216);N=Te.prototype;N.ea=function(){if(Dn(this))return-yt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:FI+r)*e,e*=FI}return t};N.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Qr(this))return"0";if(Dn(this))return"-"+yt(this).toString(t);for(var e=Er(Math.pow(t,6)),n=this,r="";;){var i=Qp(n,e).g;n=Kp(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Qr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};N.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Qr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Dn(t){return t.h==-1}N.X=function(t){return t=Kp(this,t),Dn(t)?-1:Qr(t)?0:1};function yt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Te(n,~t.h).add(LI)}N.abs=function(){return Dn(this)?yt(this):this};N.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Te(n,n[n.length-1]&-2147483648?-1:0)};function Kp(t,e){return t.add(yt(e))}N.R=function(t){if(Qr(this)||Qr(t))return Fa;if(Dn(this))return Dn(t)?yt(this).R(yt(t)):yt(yt(this).R(t));if(Dn(t))return yt(this.R(yt(t)));if(0>this.X(uP)&&0>t.X(uP))return Er(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,Hp(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Hp(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Hp(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Hp(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Te(n,0)};function Hp(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Xl(t,e){this.g=t,this.h=e}function Qp(t,e){if(Qr(e))throw Error("division by zero");if(Qr(t))return new Xl(Fa,Fa);if(Dn(t))return e=Qp(yt(t),e),new Xl(yt(e.g),yt(e.h));if(Dn(e))return e=Qp(t,yt(e)),new Xl(yt(e.g),e.h);if(30<t.g.length){if(Dn(t)||Dn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=LI,r=e;0>=r.X(t);)n=dP(n),r=dP(r);var i=Oa(n,1),s=Oa(r,1);for(r=Oa(r,2),n=Oa(n,2);!Qr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Oa(r,1),n=Oa(n,1)}return e=Kp(t,i.R(e)),new Xl(i,e)}for(i=Fa;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Er(n),o=s.R(e);Dn(o)||0<o.X(t);)n-=r,s=Er(n),o=s.R(e);Qr(s)&&(s=LI),i=i.add(s),t=Kp(t,o)}return new Xl(i,t)}N.gb=function(t){return Qp(this,t).h};N.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Te(n,this.h&t.h)};N.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Te(n,this.h|t.h)};N.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Te(n,this.h^t.h)};function dP(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Te(n,t.h)}function Oa(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Te(i,t.h)}Wp.prototype.createWebChannel=Wp.prototype.g;rn.prototype.send=rn.prototype.u;rn.prototype.open=rn.prototype.m;rn.prototype.close=rn.prototype.close;rm.NO_ERROR=0;rm.TIMEOUT=8;rm.HTTP_ERROR=6;xP.COMPLETE="complete";NP.EventType=fu;fu.OPEN="a";fu.CLOSE="b";fu.ERROR="c";fu.MESSAGE="d";ut.prototype.listen=ut.prototype.O;Ge.prototype.listenOnce=Ge.prototype.P;Ge.prototype.getLastError=Ge.prototype.Sa;Ge.prototype.getLastErrorCode=Ge.prototype.Ia;Ge.prototype.getStatus=Ge.prototype.da;Ge.prototype.getResponseJson=Ge.prototype.Wa;Ge.prototype.getResponseText=Ge.prototype.ja;Ge.prototype.send=Ge.prototype.ha;Ge.prototype.setWithCredentials=Ge.prototype.Oa;$n.prototype.digest=$n.prototype.l;$n.prototype.reset=$n.prototype.reset;$n.prototype.update=$n.prototype.j;Te.prototype.add=Te.prototype.add;Te.prototype.multiply=Te.prototype.R;Te.prototype.modulo=Te.prototype.gb;Te.prototype.compare=Te.prototype.X;Te.prototype.toNumber=Te.prototype.ea;Te.prototype.toString=Te.prototype.toString;Te.prototype.getBits=Te.prototype.D;Te.fromNumber=Er;Te.fromString=pO;var mO=Hn.createWebChannelTransport=function(){return new Wp},gO=Hn.getStatEventTarget=function(){return nm()},dm=Hn.ErrorCode=rm,yO=Hn.EventType=xP,_O=Hn.Event=Ks,ob=Hn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},oce=Hn.FetchXmlHttpFactory=gu,vu=Hn.WebChannel=NP,vO=Hn.XhrIo=Ge,wO=Hn.Md5=$n,Qs=Hn.Integer=Te;var EO="@firebase/firestore";var ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");var hc="10.7.2";var oo=new xi("@firebase/firestore");function za(){return oo.logLevel}function D(t,...e){if(oo.logLevel<=ge.DEBUG){let n=e.map(o0);oo.debug(`Firestore (${hc}): ${t}`,...n)}}function Ze(t,...e){if(oo.logLevel<=ge.ERROR){let n=e.map(o0);oo.error(`Firestore (${hc}): ${t}`,...n)}}function Nu(t,...e){if(oo.logLevel<=ge.WARN){let n=e.map(o0);oo.warn(`Firestore (${hc}): ${t}`,...n)}}function o0(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function O(t="Unexpected state"){let e=`FIRESTORE (${hc}) INTERNAL ASSERTION FAILED: `+t;throw Ze(e),new Error(e)}function B(t,e){t||O()}function V(t,e){return t}var w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},A=class extends nn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Tn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var fb=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},pb=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}};var mb=class{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new Tn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(B(typeof r.accessToken=="string"),new fb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return B(e===null||typeof e=="string"),new ht(e)}},gb=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},yb=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new gb(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}},_b=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},vb=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,D("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(B(typeof n.token=="string"),this.R=n.token,new _b(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function e5(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Em=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=e5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function re(t,e){return t<e?-1:t>e?1:0}function Ja(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Ek(t){return t+"\0"}var Xe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new A(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new A(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new A(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new A(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var q=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Xe(0,0))}static max(){return new t(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Im=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&O(),r===void 0?r=e.length-n:r>e.length-n&&O(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Me=class t extends Im{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new A(w.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},t5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,st=class t extends Im{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return t5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new A(w.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new A(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new A(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new A(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var P=class t{constructor(e){this.path=e}static fromPath(e){return new t(Me.fromString(e))}static fromName(e){return new t(Me.fromString(e).popFirst(5))}static empty(){return new t(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Me(e.slice()))}};var ec=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function wb(t){return t.fields.find(e=>e.kind===2)}function Zs(t){return t.fields.filter(e=>e.kind!==2)}ec.UNKNOWN_ID=-1;var Ya=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Pu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Sn.min())}};function Ik(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=q.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Sn(i,P.empty(),e)}function bk(t){return new Sn(t.readTime,t.key,-1)}var Sn=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(q.min(),P.empty(),-1)}static max(){return new t(q.max(),P.empty(),-1)}};function a0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=P.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}var Dk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",bm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ts(t){return p(this,null,function*(){if(t.code!==w.FAILED_PRECONDITION||t.message!==Dk)throw t;D("LocalStore","Unexpectedly lost primary lease")})}var _=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&O(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var Dm=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Tn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new io(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=c0(r.target.error);this.V.reject(new io(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new io(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(D("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Ib(n)}},ao=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(qe())===12.2&&Ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return D("SimpleDb","Removing database:",e),Xs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!cp())return!1;if(t.C())return!0;let e=qe(),n=t.S(e),r=0<n&&n<10,i=t.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return p(this,null,function*(){return this.db||(D("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new io(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new A(w.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new A(w.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new io(e,o))},i.onupgradeneeded=s=>{D("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{D("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return p(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=Dm.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),_.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(D("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Eb=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Xs(this.k.delete())}},io=class extends A{constructor(e,n){super(w.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ns(t){return t.name==="IndexedDbTransactionError"}var Ib=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(D("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(D("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Xs(r)}add(e){return D("SimpleDb","ADD",this.store.name,e,e),Xs(this.store.add(e))}get(e){return Xs(this.store.get(e)).next(n=>(n===void 0&&(n=null),D("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return D("SimpleDb","DELETE",this.store.name,e),Xs(this.store.delete(e))}count(){return D("SimpleDb","COUNT",this.store.name),Xs(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new _((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new _((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){D("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new _((r,i)=>{n.onerror=s=>{let o=c0(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){let r=[];return new _((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new Eb(a),l=n(a.primaryKey,a.value,c);if(l instanceof _){let u=l.catch(d=>(c.done(),_.reject(d)));r.push(u)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>_.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Xs(t){return new _((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=c0(r.target.error);n(i)}})}var IO=!1;function c0(t){let e=ao.S(qe());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new A("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return IO||(IO=!0,setTimeout(()=>{throw r},0)),r}}return t}var bb=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){D("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>p(this,null,function*(){this.task=null;try{D("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){ns(n)?D("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield ts(n)}yield this.ee(6e4)}))}},Db=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return p(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,s=!0;return _.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return D("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(D("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{let o=bk(s);a0(o,r)>0&&(r=o)}),new Sn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var sn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function _g(t){return t==null}function Ou(t){return t===0&&1/t==-1/0}function Ck(t){return typeof t=="number"&&Number.isInteger(t)&&!Ou(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Bt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=bO(e)),e=n5(t.get(n),e);return bO(e)}function n5(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function bO(t){return t+""}function Ir(t){let e=t.length;if(B(e>=2),e===2)return B(t.charAt(0)===""&&t.charAt(1)===""),Me.emptyPath();let n=e-2,r=[],i="";for(let s=0;s<e;){let o=t.indexOf("",s);switch((o<0||o>n)&&O(),t.charAt(o+1)){case"":let a=t.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:O()}s=o+2}return new Me(r)}var DO=["userId","batchId"];function gm(t,e){return[t,Bt(e)]}function Tk(t,e,n){return[t,Bt(e),n]}var r5={},i5=["prefixPath","collectionGroup","readTime","documentId"],s5=["prefixPath","collectionGroup","documentId"],o5=["collectionGroup","readTime","prefixPath","documentId"],a5=["canonicalId","targetId"],c5=["targetId","path"],l5=["path","targetId"],u5=["collectionId","parent"],d5=["indexId","uid"],h5=["uid","sequenceNumber"],f5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],p5=["indexId","uid","orderedDocumentKey"],m5=["userId","collectionPath","documentId"],g5=["userId","collectionPath","largestBatchId"],y5=["userId","collectionGroup","largestBatchId"],Sk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_5=[...Sk,"documentOverlays"],Ak=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Rk=Ak,v5=[...Rk,"indexConfiguration","indexState","indexEntries"];var ku=class extends bm{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function ft(t,e){let n=V(t);return ao.M(n.ae,e)}function CO(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _o(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Mk(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ve=class t{constructor(e,n){this.comparator=e,this.root=n||Dr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Dr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qa(this.root,e,this.comparator,!0)}},Qa=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Dr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw O();let e=this.left.check();if(e!==this.right.check())throw O();return e+(this.isRed()?0:1)}};Dr.EMPTY=null,Dr.RED=!0,Dr.BLACK=!1;Dr.EMPTY=new class{constructor(){this.size=0}get key(){throw O()}get value(){throw O()}get color(){throw O()}get left(){throw O()}get right(){throw O()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Dr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Pe=class t{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Cm(this.data.getIterator())}getIteratorFrom(e){return new Cm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Cm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ba(t){return t.hasNext()?t.getNext():void 0}var on=class t{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new t([])}unionWith(e){let n=new Pe(st.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ja(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Tm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Et=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Tm("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Et.EMPTY_BYTE_STRING=new Et("");var w5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gi(t){if(B(!!t),typeof t=="string"){let e=0,n=w5.exec(t);if(B(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wi(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}function l0(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function u0(t){let e=t.mapValue.fields.__previous_value__;return l0(e)?u0(e):e}function Fu(t){let e=Gi(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}var Cb=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},tc=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var zi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ym={nullValue:"NULL_VALUE"};function co(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?l0(t)?4:xk(t)?9007199254740991:10:O()}function Cr(t,e){if(t===e)return!0;let n=co(t);if(n!==co(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fu(t).isEqual(Fu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Gi(i.timestampValue),a=Gi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Wi(i.bytesValue).isEqual(Wi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return We(i.geoPointValue.latitude)===We(s.geoPointValue.latitude)&&We(i.geoPointValue.longitude)===We(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return We(i.integerValue)===We(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=We(i.doubleValue),a=We(s.doubleValue);return o===a?Ou(o)===Ou(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ja(t.arrayValue.values||[],e.arrayValue.values||[],Cr);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(CO(o)!==CO(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Cr(o[c],a[c])))return!1;return!0}(t,e);default:return O()}}function Lu(t,e){return(t.values||[]).find(n=>Cr(n,e))!==void 0}function Ki(t,e){if(t===e)return 0;let n=co(t),r=co(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=We(s.integerValue||s.doubleValue),c=We(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return TO(t.timestampValue,e.timestampValue);case 4:return TO(Fu(t),Fu(e));case 5:return re(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Wi(s),c=Wi(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=re(a[l],c[l]);if(u!==0)return u}return re(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=re(We(s.latitude),We(o.latitude));return a!==0?a:re(We(s.longitude),We(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=Ki(a[l],c[l]);if(u)return u}return re(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===zi.mapValue&&o===zi.mapValue)return 0;if(s===zi.mapValue)return 1;if(o===zi.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=re(c[d],u[d]);if(h!==0)return h;let f=Ki(a[c[d]],l[u[d]]);if(f!==0)return f}return re(c.length,u.length)}(t.mapValue,e.mapValue);default:throw O()}}function TO(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);let n=Gi(t),r=Gi(e),i=re(n.seconds,r.seconds);return i!==0?i:re(n.nanos,r.nanos)}function nc(t){return Tb(t)}function Tb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Gi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return P.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Tb(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Tb(n.fields[o])}`;return i+"}"}(t.mapValue):O()}function Vu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sb(t){return!!t&&"integerValue"in t}function ju(t){return!!t&&"arrayValue"in t}function SO(t){return!!t&&"nullValue"in t}function AO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _m(t){return!!t&&"mapValue"in t}function Tu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return _o(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Tu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Tu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function E5(t){return"nullValue"in t?ym:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Vu(tc.empty(),P.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:O()}function I5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Vu(tc.empty(),P.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?zi:O()}function RO(t,e){let n=Ki(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function MO(t,e){let n=Ki(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var jt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_m(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tu(n)}setAll(e){let n=st.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Tu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());_m(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];_m(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){_o(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Tu(this.value))}};function Nk(t){let e=[];return _o(t.fields,(n,r)=>{let i=new st([n]);if(_m(r)){let s=Nk(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new on(e)}var wt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,q.min(),q.min(),q.min(),jt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,q.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,q.min(),q.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,q.min(),q.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Qi=class{constructor(e,n){this.position=e,this.inclusive=n}};function xO(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=P.comparator(P.fromName(o.referenceValue),n.key):r=Ki(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function NO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cr(t.position[n],e.position[n]))return!1;return!0}var lo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function b5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Sm=class{},_e=class t extends Sm{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Mb(e,n,r):n==="array-contains"?new Pb(e,r):n==="in"?new Am(e,r):n==="not-in"?new Ob(e,r):n==="array-contains-any"?new kb(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xb(e,r):new Nb(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ki(n,this.value)):n!==null&&co(this.value)===co(n)&&this.matchesComparison(Ki(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return O()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Se=class t extends Sm{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return rc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function rc(t){return t.op==="and"}function Ab(t){return t.op==="or"}function d0(t){return Pk(t)&&rc(t)}function Pk(t){for(let e of t.filters)if(e instanceof Se)return!1;return!0}function Rb(t){if(t instanceof _e)return t.field.canonicalString()+t.op.toString()+nc(t.value);if(d0(t))return t.filters.map(e=>Rb(e)).join(",");{let e=t.filters.map(n=>Rb(n)).join(",");return`${t.op}(${e})`}}function Ok(t,e){return t instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.field.isEqual(i.field)&&Cr(r.value,i.value)}(t,e):t instanceof Se?function(r,i){return i instanceof Se&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Ok(o,i.filters[a]),!0):!1}(t,e):void O()}function kk(t,e){let n=t.filters.concat(e);return Se.create(n,t.op)}function Fk(t){return t instanceof _e?function(n){return`${n.field.canonicalString()} ${n.op} ${nc(n.value)}`}(t):t instanceof Se?function(n){return n.op.toString()+" {"+n.getFilters().map(Fk).join(" ,")+"}"}(t):"Filter"}var Mb=class extends _e{constructor(e,n,r){super(e,n,r),this.key=P.fromName(r.referenceValue)}matches(e){let n=P.comparator(e.key,this.key);return this.matchesComparison(n)}},xb=class extends _e{constructor(e,n){super(e,"in",n),this.keys=Lk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Nb=class extends _e{constructor(e,n){super(e,"not-in",n),this.keys=Lk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Lk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>P.fromName(r.referenceValue))}var Pb=class extends _e{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return ju(n)&&Lu(n.arrayValue,this.value)}},Am=class extends _e{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Lu(this.value.arrayValue,n)}},Ob=class extends _e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Lu(this.value.arrayValue,n)}},kb=class extends _e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!ju(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Lu(this.value.arrayValue,r))}};var Fb=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function Lb(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Fb(t,e,n,r,i,s,o)}function uo(t){let e=V(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),_g(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nc(r)).join(",")),e.ce=n}return e.ce}function sd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!b5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ok(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!NO(t.startAt,e.startAt)&&NO(t.endAt,e.endAt)}function Rm(t){return P.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Mm(t,e){return t.filters.filter(n=>n instanceof _e&&n.field.isEqual(e))}function PO(t,e,n){let r=ym,i=!0;for(let s of Mm(t,e)){let o=ym,a=!0;switch(s.op){case"<":case"<=":o=E5(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=ym}RO({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];RO({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function OO(t,e,n){let r=zi,i=!0;for(let s of Mm(t,e)){let o=zi,a=!0;switch(s.op){case">=":case">":o=I5(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=zi}MO({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];MO({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}var Yi=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function Vk(t,e,n,r,i,s,o,a){return new Yi(t,e,n,r,i,s,o,a)}function od(t){return new Yi(t)}function kO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jk(t){return t.collectionGroup!==null}function Su(t){let e=V(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Pe(st.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new lo(s,r))}),n.has(st.keyField().canonicalString())||e.le.push(new lo(st.keyField(),r))}return e.le}function cn(t){let e=V(t);return e.he||(e.he=D5(e,Su(t))),e.he}function D5(t,e){if(t.limitType==="F")return Lb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new lo(i.field,s)});let n=t.endAt?new Qi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Qi(t.startAt.position,t.startAt.inclusive):null;return Lb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vb(t,e){let n=t.filters.concat([e]);return new Yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xm(t,e,n){return new Yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vg(t,e){return sd(cn(t),cn(e))&&t.limitType===e.limitType}function Bk(t){return`${uo(cn(t))}|lt:${t.limitType}`}function qa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Fk(i)).join(", ")}]`),_g(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>nc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>nc(i)).join(",")),`Target(${r})`}(cn(t))}; limitType=${t.limitType})`}function ad(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):P.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Su(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=xO(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Su(r),i)||r.endAt&&!function(o,a,c){let l=xO(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Su(r),i))}(t,e)}function Uk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $k(t){return(e,n)=>{let r=!1;for(let i of Su(t)){let s=C5(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function C5(t,e,n){let r=t.field.isKeyField()?P.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Ki(c,l):O()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return O()}}var Tr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_o(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Mk(this.inner)}size(){return this.innerSize}};var T5=new Ve(P.comparator);function an(){return T5}var Hk=new Ve(P.comparator);function Du(...t){let e=Hk;for(let n of t)e=e.insert(n.key,n);return e}function zk(t){let e=Hk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function br(){return Au()}function qk(){return Au()}function Au(){return new Tr(t=>t.toString(),(t,e)=>t.isEqual(e))}var S5=new Ve(P.comparator),A5=new Pe(P.comparator);function de(...t){let e=A5;for(let n of t)e=e.add(n);return e}var R5=new Pe(re);function h0(){return R5}function Gk(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ou(e)?"-0":e}}function Wk(t){return{integerValue:""+t}}function M5(t,e){return Ck(e)?Wk(e):Gk(t,e)}var ic=class{constructor(){this._=void 0}};function x5(t,e,n){return t instanceof ho?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&l0(s)&&(s=u0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Zi?Qk(t,e):t instanceof Xi?Yk(t,e):function(i,s){let o=Kk(i,s),a=FO(o)+FO(i.Ie);return Sb(o)&&Sb(i.Ie)?Wk(a):Gk(i.serializer,a)}(t,e)}function N5(t,e,n){return t instanceof Zi?Qk(t,e):t instanceof Xi?Yk(t,e):n}function Kk(t,e){return t instanceof fo?function(r){return Sb(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var ho=class extends ic{},Zi=class extends ic{constructor(e){super(),this.elements=e}};function Qk(t,e){let n=Zk(e);for(let r of t.elements)n.some(i=>Cr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Xi=class extends ic{constructor(e){super(),this.elements=e}};function Yk(t,e){let n=Zk(e);for(let r of t.elements)n=n.filter(i=>!Cr(i,r));return{arrayValue:{values:n}}}var fo=class extends ic{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function FO(t){return We(t.integerValue||t.doubleValue)}function Zk(t){return ju(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var jb=class{constructor(e,n){this.field=e,this.transform=n}};function P5(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Zi&&i instanceof Zi||r instanceof Xi&&i instanceof Xi?Ja(r.elements,i.elements,Cr):r instanceof fo&&i instanceof fo?Cr(r.Ie,i.Ie):r instanceof ho&&i instanceof ho}(t.transform,e.transform)}var Bb=class{constructor(e,n){this.version=e,this.transformResults=n}},vt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function vm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var sc=class{};function Xk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new po(t.key,vt.none()):new Ji(t.key,t.data,vt.none());{let n=t.data,r=jt.empty(),i=new Pe(st.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new zn(t.key,r,new on(i.toArray()),vt.none())}}function O5(t,e,n){t instanceof Ji?function(i,s,o){let a=i.value.clone(),c=VO(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof zn?function(i,s,o){if(!vm(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=VO(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Jk(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ru(t,e,n,r){return t instanceof Ji?function(s,o,a,c){if(!vm(s.precondition,o))return a;let l=s.value.clone(),u=jO(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof zn?function(s,o,a,c){if(!vm(s.precondition,o))return a;let l=jO(s.fieldTransforms,c,o),u=o.data;return u.setAll(Jk(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return vm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function k5(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=Kk(r.transform,i||null);s!=null&&(n===null&&(n=jt.empty()),n.set(r.field,s))}return n||null}function LO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ja(r,i,(s,o)=>P5(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ji=class extends sc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},zn=class extends sc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Jk(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function VO(t,e,n){let r=new Map;B(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,N5(o,a,n[i]))}return r}function jO(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,x5(s,o,e))}return r}var po=class extends sc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Nm=class extends sc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Bu=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&O5(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ru(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ru(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=qk();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=Xk(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(q.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&Ja(this.mutations,e.mutations,(n,r)=>LO(n,r))&&Ja(this.baseMutations,e.baseMutations,(n,r)=>LO(n,r))}},Ub=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){B(e.mutations.length===r.length);let i=function(){return S5}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Uu=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var $b=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var nt,we;function F5(t){switch(t){default:return O();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}function eF(t){if(t===void 0)return Ze("GRPC error has no .code"),w.UNKNOWN;switch(t){case nt.OK:return w.OK;case nt.CANCELLED:return w.CANCELLED;case nt.UNKNOWN:return w.UNKNOWN;case nt.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case nt.INTERNAL:return w.INTERNAL;case nt.UNAVAILABLE:return w.UNAVAILABLE;case nt.UNAUTHENTICATED:return w.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case nt.NOT_FOUND:return w.NOT_FOUND;case nt.ALREADY_EXISTS:return w.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return w.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case nt.ABORTED:return w.ABORTED;case nt.OUT_OF_RANGE:return w.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return w.UNIMPLEMENTED;case nt.DATA_LOSS:return w.DATA_LOSS;default:return O()}}(we=nt||(nt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";var BO=null;function L5(){return new TextEncoder}var V5=new Qs([4294967295,4294967295],0);function UO(t){let e=L5().encode(t),n=new wO;return n.update(e),new Uint8Array(n.digest())}function $O(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qs([n,r],0),new Qs([i,s],0)]}var Hb=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new no(`Invalid padding: ${n}`);if(r<0)throw new no(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new no(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new no(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Qs.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Qs.fromNumber(r)));return i.compare(V5)===1&&(i=new Qs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=UO(e),[r,i]=$O(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=UO(e),[r,i]=$O(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},no=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var $u=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(q.min(),i,new Ve(re),an(),de())}},Hu=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,de(),de(),de())}};var Za=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Pm=class{constructor(e,n){this.targetId=e,this.fe=n}},Om=class{constructor(e,n,r=Et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},km=class{constructor(){this.ge=0,this.pe=zO(),this.ye=Et.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=de(),n=de(),r=de();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:O()}}),new Hu(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=zO()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,B(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},zb=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=an(),this.Qe=HO(),this.Ke=new Ve(re)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:O()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let s=i.target;if(Rm(s))if(r===0){let o=new P(s.path);this.We(n,o,wt.newNoDocument(o,q.min()))}else B(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}BO?.tt(function(u,d,h,f,m){var g,v,E,R,M,F;let ee={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},j=d.unchangedNames;return j&&(ee.bloomFilter={applied:m===0,hashCount:(g=j?.hashCount)!==null&&g!==void 0?g:0,bitmapLength:(R=(E=(v=j?.bits)===null||v===void 0?void 0:v.bitmap)===null||E===void 0?void 0:E.length)!==null&&R!==void 0?R:0,padding:(F=(M=j?.bits)===null||M===void 0?void 0:M.padding)!==null&&F!==void 0?F:0,mightContain:te=>{var be;return(be=f?.mightContain(te))!==null&&be!==void 0&&be}}),ee}(o,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Wi(r).toUint8Array()}catch(c){if(c instanceof Tm)return Nu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Hb(o,i,s)}catch(c){return Nu(c instanceof no?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&Rm(a.target)){let c=new P(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,wt.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=de();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new $u(e,n,this.Ke,this.qe,r);return this.qe=an(),this.Qe=HO(),this.Ke=new Ve(re),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new km,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Pe(re),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||D("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new km),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function HO(){return new Ve(P.comparator)}function zO(){return new Ve(P.comparator)}var j5={asc:"ASCENDING",desc:"DESCENDING"},B5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U5={and:"AND",or:"OR"},qb=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Gb(t,e){return t.useProto3Json||_g(e)?e:{value:e}}function oc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $5(t,e){return oc(t,e.toTimestamp())}function Ut(t){return B(!!t),q.fromTimestamp(function(n){let r=Gi(n);return new Xe(r.seconds,r.nanos)}(t))}function f0(t,e){return Wb(t,e).canonicalString()}function Wb(t,e){let n=function(i){return new Me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function nF(t){let e=Me.fromString(t);return B(dF(e)),e}function Fm(t,e){return f0(t.databaseId,e.path)}function so(t,e){let n=nF(e);if(n.get(1)!==t.databaseId.projectId)throw new A(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new A(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new P(sF(n))}function rF(t,e){return f0(t.databaseId,e)}function iF(t){let e=nF(t);return e.length===4?Me.emptyPath():sF(e)}function Kb(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sF(t){return B(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function qO(t,e,n){return{name:Fm(t,e),fields:n.value.mapValue.fields}}function H5(t,e,n){let r=so(t,e.name),i=Ut(e.updateTime),s=e.createTime?Ut(e.createTime):q.min(),o=new jt({mapValue:{fields:e.fields}}),a=wt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function z5(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:O()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(B(u===void 0||typeof u=="string"),Et.fromBase64String(u||"")):(B(u===void 0||u instanceof Uint8Array),Et.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let u=l.code===void 0?w.UNKNOWN:eF(l.code);return new A(u,l.message||"")}(o);n=new Om(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=so(t,r.document.name),s=Ut(r.document.updateTime),o=r.document.createTime?Ut(r.document.createTime):q.min(),a=new jt({mapValue:{fields:r.document.fields}}),c=wt.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Za(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=so(t,r.document),s=r.readTime?Ut(r.readTime):q.min(),o=wt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Za([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=so(t,r.document),s=r.removedTargetIds||[];n=new Za([],s,i,null)}else{if(!("filter"in e))return O();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new $b(i,s),a=r.targetId;n=new Pm(a,o)}}return n}function Lm(t,e){let n;if(e instanceof Ji)n={update:qO(t,e.key,e.value)};else if(e instanceof po)n={delete:Fm(t,e.key)};else if(e instanceof zn)n={update:qO(t,e.key,e.data),updateMask:Y5(e.fieldMask)};else{if(!(e instanceof Nm))return O();n={verify:Fm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof ho)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Zi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fo)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw O()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:$5(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:O()}(t,e.precondition)),n}function Qb(t,e){let n=e.currentDocument?function(s){return s.updateTime!==void 0?vt.updateTime(Ut(s.updateTime)):s.exists!==void 0?vt.exists(s.exists):vt.none()}(e.currentDocument):vt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)B(a.setToServerValue==="REQUEST_TIME"),c=new ho;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new Zi(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new Xi(u)}else"increment"in a?c=new fo(o,a.increment):O();let l=st.fromServerFormat(a.fieldPath);return new jb(l,c)}(t,i)):[];if(e.update){e.update.name;let i=so(t,e.update.name),s=new jt({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new on(l.map(u=>st.fromServerFormat(u)))}(e.updateMask);return new zn(i,s,o,n,r)}return new Ji(i,s,n,r)}if(e.delete){let i=so(t,e.delete);return new po(i,n)}if(e.verify){let i=so(t,e.verify);return new Nm(i,n)}return O()}function q5(t,e){return t&&t.length>0?(B(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ut(i.updateTime):Ut(s);return o.isEqual(q.min())&&(o=Ut(s)),new Bb(o,i.transformResults||[])}(n,e))):[]}function oF(t,e){return{documents:[rF(t,e.path)]}}function aF(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rF(t,i);let s=function(l){if(l.length!==0)return uF(Se.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:Ga(h.field),direction:W5(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Gb(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:n,parent:i}}function cF(t){let e=iF(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){B(r===1);let u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){let h=lF(d);return h instanceof Se&&d0(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(m){return new lo(Wa(m.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,_g(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Qi(f,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){let h=!d.before,f=d.values||[];return new Qi(f,h)}(n.endAt)),Vk(e,i,o,s,a,"F",c,l)}function G5(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return O()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lF(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Wa(n.unaryFilter.field);return _e.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Wa(n.unaryFilter.field);return _e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Wa(n.unaryFilter.field);return _e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Wa(n.unaryFilter.field);return _e.create(o,"!=",{nullValue:"NULL_VALUE"});default:return O()}}(t):t.fieldFilter!==void 0?function(n){return _e.create(Wa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return O()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Se.create(n.compositeFilter.filters.map(r=>lF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return O()}}(n.compositeFilter.op))}(t):O()}function W5(t){return j5[t]}function K5(t){return B5[t]}function Q5(t){return U5[t]}function Ga(t){return{fieldPath:t.canonicalString()}}function Wa(t){return st.fromServerFormat(t.fieldPath)}function uF(t){return t instanceof _e?function(n){if(n.op==="=="){if(AO(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NAN"}};if(SO(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(AO(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NOT_NAN"}};if(SO(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ga(n.field),op:K5(n.op),value:n.value}}}(t):t instanceof Se?function(n){let r=n.getFilters().map(i=>uF(i));return r.length===1?r[0]:{compositeFilter:{op:Q5(n.op),filters:r}}}(t):O()}function Y5(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function dF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ac=class t{constructor(e,n,r,i,s=q.min(),o=q.min(),a=Et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Vm=class{constructor(e){this.ct=e}};function Z5(t,e){let n;if(e.document)n=H5(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=P.fromSegments(e.noDocument.path),i=go(e.noDocument.readTime);n=wt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return O();{let r=P.fromSegments(e.unknownDocument.path),i=go(e.unknownDocument.version);n=wt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let s=new Xe(i[0],i[1]);return q.fromTimestamp(s)}(e.readTime)),n}function GO(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:jm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Fm(s,o.key),fields:o.data.value.mapValue.fields,updateTime:oc(s,o.version.toTimestamp()),createTime:oc(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:mo(e.version)};else{if(!e.isUnknownDocument())return O();r.unknownDocument={path:n.path.toArray(),version:mo(e.version)}}return r}function jm(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function mo(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function go(t){let e=new Xe(t.seconds,t.nanoseconds);return q.fromTimestamp(e)}function Js(t,e){let n=(e.baseMutations||[]).map(s=>Qb(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>Qb(t.ct,s)),i=Xe.fromMillis(e.localWriteTimeMs);return new Bu(e.batchId,i,n,r)}function Cu(t){let e=go(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?go(t.lastLimboFreeSnapshotVersion):q.min(),r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return B(s.documents.length===1),cn(od(iF(s.documents[0])))}(t.query):function(s){return cn(cF(s))}(t.query),new ac(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Et.fromBase64String(t.resumeToken))}function hF(t,e){let n=mo(e.snapshotVersion),r=mo(e.lastLimboFreeSnapshotVersion),i;i=Rm(e.target)?oF(t.ct,e.target):aF(t.ct,e.target).ut;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function fF(t){let e=cF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xm(e,e.limit,"L"):e}function ab(t,e){return new Uu(e.largestBatchId,Qb(t.ct,e.overlayMutation))}function WO(t,e){let n=e.path.lastSegment();return[t,Bt(e.path.popLast()),n]}function KO(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:mo(r.readTime),documentKey:Bt(r.documentKey.path),largestBatchId:r.largestBatchId}}var Yb=class{getBundleMetadata(e,n){return QO(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:go(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return QO(e).put(function(i){return{bundleId:i.id,createTime:mo(Ut(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return YO(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:fF(s.bundledQuery),readTime:go(s.readTime)}}(r)})}saveNamedQuery(e,n){return YO(e).put(function(i){return{name:i.name,readTime:mo(Ut(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function QO(t){return ft(t,"bundles")}function YO(t){return ft(t,"namedQueries")}var Bm=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return wu(e).get(WO(this.userId,n)).next(r=>r?ab(this.serializer,r):null)}getOverlays(e,n){let r=br();return _.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((s,o)=>{let a=new Uu(n,o);i.push(this.ht(e,a))}),_.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(o=>i.add(Bt(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(wu(e).H("collectionPathOverlayIndex",a))}),_.waitFor(s)}getOverlaysForCollection(e,n,r){let i=br(),s=Bt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return wu(e).W("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=ab(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let s=br(),o,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return wu(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,l,u)=>{let d=ab(this.serializer,l);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ht(e,n){return wu(e).put(function(i,s,o){let[a,c,l]=WO(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Lm(i.ct,o.mutation)}}(this.serializer,this.userId,n))}};function wu(t){return ft(t,"documentOverlays")}var Zr=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(We(e.integerValue));else if("doubleValue"in e){let r=We(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Ou(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Wi(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?xk(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):O()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),P.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Zr.bt=new Zr;function X5(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function ZO(t){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=X5(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}var Zb=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){let n=this.Lt(e),r=ZO(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Lt(e),r=ZO(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){let n=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Xb=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}},Jb=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},eo=class{constructor(){this.Gt=new Zb,this.zt=new Xb(this.Gt),this.jt=new Jb(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var to=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Ui(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=XO(t.arrayValue,e.arrayValue),n!==0?n:(n=XO(t.directionalValue,e.directionalValue),n!==0?n:P.comparator(t.documentKey,e.documentKey)))}function XO(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var Um=class{constructor(e){this.Yt=new Pe((n,r)=>st.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(B(e.collectionGroup===this.collectionId),this.en)return!1;let n=wb(e);if(n!==void 0&&!this.nn(n))return!1;let r=Zs(e),i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new Pe(st.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Ya(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Ya(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Ya(r.field,r.dir==="asc"?0:1)));return new ec(ec.UNKNOWN_ID,this.collectionId,n,Pu.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function pF(t){var e,n;if(B(t instanceof _e||t instanceof Se),t instanceof _e){if(t instanceof Am){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>_e.create(t.field,"==",s)))||[];return Se.create(i,"or")}return t}let r=t.filters.map(i=>pF(i));return Se.create(r,t.op)}function J5(t){if(t.getFilters().length===0)return[];let e=nD(pF(t));return B(mF(e)),eD(e)||tD(e)?[e]:e.getFilters()}function eD(t){return t instanceof _e}function tD(t){return t instanceof Se&&d0(t)}function mF(t){return eD(t)||tD(t)||function(n){if(n instanceof Se&&Ab(n)){for(let r of n.getFilters())if(!eD(r)&&!tD(r))return!1;return!0}return!1}(t)}function nD(t){if(B(t instanceof _e||t instanceof Se),t instanceof _e)return t;if(t.filters.length===1)return nD(t.filters[0]);let e=t.filters.map(r=>nD(r)),n=Se.create(e,t.op);return n=$m(n),mF(n)?n:(B(n instanceof Se),B(rc(n)),B(n.filters.length>1),n.filters.reduce((r,i)=>p0(r,i)))}function p0(t,e){let n;return B(t instanceof _e||t instanceof Se),B(e instanceof _e||e instanceof Se),n=t instanceof _e?e instanceof _e?function(i,s){return Se.create([i,s],"and")}(t,e):JO(t,e):e instanceof _e?JO(e,t):function(i,s){if(B(i.filters.length>0&&s.filters.length>0),rc(i)&&rc(s))return kk(i,s.getFilters());let o=Ab(i)?i:s,a=Ab(i)?s:i,c=o.filters.map(l=>p0(l,a));return Se.create(c,"or")}(t,e),$m(n)}function JO(t,e){if(rc(e))return kk(e,t.getFilters());{let n=e.filters.map(r=>p0(t,r));return Se.create(n,"or")}}function $m(t){if(B(t instanceof _e||t instanceof Se),t instanceof _e)return t;let e=t.getFilters();if(e.length===1)return $m(e[0]);if(Pk(t))return t;let n=e.map(i=>$m(i)),r=[];return n.forEach(i=>{i instanceof _e?r.push(i):i instanceof Se&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Se.create(r,t.op)}var rD=class{constructor(){this._n=new zu}addToCollectionParentIndex(e,n){return this._n.add(n),_.resolve()}getCollectionParents(e,n){return _.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return _.resolve()}deleteFieldIndex(e,n){return _.resolve()}deleteAllFieldIndexes(e){return _.resolve()}createTargetIndexes(e,n){return _.resolve()}getDocumentsMatchingTarget(e,n){return _.resolve(null)}getIndexType(e,n){return _.resolve(0)}getFieldIndexes(e,n){return _.resolve([])}getNextCollectionGroupToUpdate(e){return _.resolve(null)}getMinOffset(e,n){return _.resolve(Sn.min())}getMinOffsetFromCollectionGroup(e,n){return _.resolve(Sn.min())}updateCollectionGroup(e,n,r){return _.resolve()}updateIndexEntries(e,n){return _.resolve()}},zu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Pe(Me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pe(Me.comparator)).toArray()}};var hm=new Uint8Array(0),iD=class{constructor(e,n){this.databaseId=n,this.an=new zu,this.un=new Tr(r=>uo(r),(r,i)=>sd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let s={collectionId:r,parent:Bt(i)};return ek(e).put(s)}return _.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[Ek(n),""],!1,!0);return ek(e).W(i).next(s=>{for(let o of s){if(o.collectionId!==n)break;r.push(Ir(o.parent))}return r})}addFieldIndex(e,n){let r=Eu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let s=r.add(i);if(n.indexState){let o=$a(e);return s.next(a=>{o.put(KO(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){let r=Eu(e),i=$a(e),s=Ua(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Eu(e),r=Ua(e),i=$a(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return _.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new Um(r).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){let r=Ua(e),i=!0,s=new Map;return _.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=de(),a=[];return _.forEach(s,(c,l)=>{D("IndexedDbIndexManager",`Using index ${function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(F=>`${F.fieldPath}:${F.kind}`).join(",")}`}(c)} to execute ${uo(n)}`);let u=function(M,F){let ee=wb(F);if(ee===void 0)return null;for(let j of Mm(M,ee.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(l,c),d=function(M,F){let ee=new Map;for(let j of Zs(F))for(let te of Mm(M,j.fieldPath))switch(te.op){case"==":case"in":ee.set(j.fieldPath.canonicalString(),te.value);break;case"not-in":case"!=":return ee.set(j.fieldPath.canonicalString(),te.value),Array.from(ee.values())}return null}(l,c),h=function(M,F){let ee=[],j=!0;for(let te of Zs(F)){let be=te.kind===0?PO(M,te.fieldPath,M.startAt):OO(M,te.fieldPath,M.startAt);ee.push(be.value),j&&(j=be.inclusive)}return new Qi(ee,j)}(l,c),f=function(M,F){let ee=[],j=!0;for(let te of Zs(F)){let be=te.kind===0?OO(M,te.fieldPath,M.endAt):PO(M,te.fieldPath,M.endAt);ee.push(be.value),j&&(j=be.inclusive)}return new Qi(ee,j)}(l,c),m=this.hn(c,l,h),g=this.hn(c,l,f),v=this.Pn(c,l,d),E=this.In(c.indexId,u,m,h.inclusive,g,f.inclusive,v);return _.forEach(E,R=>r.j(R,n.limit).next(M=>{M.forEach(F=>{let ee=P.fromSegments(F.documentKey);o.has(ee)||(o=o.add(ee),a.push(ee))})}))}).next(()=>a)}return _.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=J5(Se.create(e.filters,"and")).map(r=>Lb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,a){let c=(n!=null?n.length:1)*Math.max(r.length,s.length),l=c/(n!=null?n.length:1),u=[];for(let d=0;d<c;++d){let h=n?this.Tn(n[d/l]):hm,f=this.En(e,h,r[d%l],i),m=this.dn(e,h,s[d%l],o),g=a.map(v=>this.En(e,h,v,!0));u.push(...this.createRange(f,m,g))}return u}En(e,n,r,i){let s=new to(e,P.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){let s=new to(e,P.empty(),n,r);return i?s.Jt():s}ln(e,n){let r=new Um(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2,i=this.cn(n);return _.forEach(i,s=>this.ln(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new Pe(st.comparator),u=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:l=l.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(l=l.add(d.field));return l.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new eo;for(let i of Zs(e)){let s=n.data.field(i.fieldPath);if(s==null)return null;let o=r.Ht(i.kind);Zr.bt.Pt(s,o)}return r.Wt()}Tn(e){let n=new eo;return Zr.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new eo;return Zr.bt.Pt(Vu(this.databaseId,n),r.Ht(function(s){let o=Zs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new eo);let s=0;for(let o of Zs(e)){let a=r[s++];for(let c of i)if(this.Vn(n,o.fieldPath)&&ju(a))i=this.mn(i,o,a);else{let l=c.Ht(o.kind);Zr.bt.Pt(a,l)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new eo;c.seed(a.Wt()),Zr.bt.Pt(o,c.Ht(n.kind)),s.push(c)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof _e&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Eu(e),i=$a(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{let o=[];return _.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(u,d){let h=d?new Pu(d.sequenceNumber,new Sn(go(d.readTime),new P(Ir(d.documentKey)),d.largestBatchId)):Pu.empty(),f=u.fields.map(([m,g])=>new Ya(st.fromServerFormat(m),g));return new ec(u.indexId,u.collectionGroup,f,h)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:re(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Eu(e),s=$a(e);return this.gn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>_.forEach(a,c=>s.put(KO(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){let r=new Map;return _.forEach(n,(i,s)=>{let o=r.get(i.collectionGroup);return(o?_.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),_.forEach(a,c=>this.pn(e,i,c).next(l=>{let u=this.yn(s,c);return l.isEqual(u)?_.resolve():this.wn(e,s,c,l,u)}))))})}Sn(e,n,r,i){return Ua(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Ua(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=Ua(e),s=new Pe(Ui);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,a)=>{s=s.add(new to(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let r=new Pe(Ui),i=this.An(n,e);if(i==null)return r;let s=wb(n);if(s!=null){let o=e.data.field(s.fieldPath);if(ju(o))for(let a of o.arrayValue.values||[])r=r.add(new to(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new to(n.indexId,e.key,hm,i));return r}wn(e,n,r,i,s){D("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let o=[];return function(c,l,u,d,h){let f=c.getIterator(),m=l.getIterator(),g=Ba(f),v=Ba(m);for(;g||v;){let E=!1,R=!1;if(g&&v){let M=u(g,v);M<0?R=!0:M>0&&(E=!0)}else g!=null?R=!0:E=!0;E?(d(v),v=Ba(m)):R?(h(g),g=Ba(f)):(g=Ba(f),v=Ba(m))}}(i,s,Ui,a=>{o.push(this.Sn(e,n,r,a))},a=>{o.push(this.bn(e,n,r,a))}),_.waitFor(o)}gn(e){let n=1;return $a(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ui(o,a)).filter((o,a,c)=>!a||Ui(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Ui(o,e),c=Ui(o,n);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(o),i.push(o.Jt());else if(c>0)break}i.push(n);let s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,hm,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,hm,[]];s.push(IDBKeyRange.bound(a,c))}return s}Dn(e,n){return Ui(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(tk)}getMinOffset(e,n){return _.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||O())).next(tk)}};function ek(t){return ft(t,"collectionParents")}function Ua(t){return ft(t,"indexEntries")}function Eu(t){return ft(t,"indexConfiguration")}function $a(t){return ft(t,"indexState")}function tk(t){B(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;a0(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Sn(e.readTime,e.documentKey,n)}var nk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function gF(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId),a=0,c=r.Y({range:o},(u,d,h)=>(a++,h.delete()));s.push(c.next(()=>{B(a===1)}));let l=[];for(let u of n.mutations){let d=Tk(e,u.key.path,n.batchId);s.push(i.delete(d)),l.push(u.key)}return _.waitFor(s).next(()=>l)}function Hm(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw O();e=t.noDocument}return JSON.stringify(e).length}Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(41943040,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);var zm=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){B(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new t(s,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $i(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let s=Ka(e),o=$i(e);return o.add({}).next(a=>{B(typeof a=="number");let c=new Bu(a,n,r,i),l=function(f,m,g){let v=g.baseMutations.map(R=>Lm(f.ct,R)),E=g.mutations.map(R=>Lm(f.ct,R));return{userId:m,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:v,mutations:E}}(this.serializer,this.userId,c),u=[],d=new Pe((h,f)=>re(h.canonicalString(),f.canonicalString()));for(let h of i){let f=Tk(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(l)),u.push(s.put(f,r5))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),_.waitFor(u).next(()=>c)})}lookupMutationBatch(e,n){return $i(e).get(n).next(r=>r?(B(r.userId===this.userId),Js(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?_.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return $i(e).Y({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(B(a.batchId>=r),s=Js(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return $i(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $i(e).W("userMutationsIndex",n).next(r=>r.map(i=>Js(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=gm(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Ka(e).Y({range:i},(o,a,c)=>{let[l,u,d]=o,h=Ir(u);if(l===this.userId&&n.path.isEqual(h))return $i(e).get(d).next(f=>{if(!f)throw O();B(f.userId===this.userId),s.push(Js(this.serializer,f))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pe(re),i=[];return n.forEach(s=>{let o=gm(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Ka(e).Y({range:a},(l,u,d)=>{let[h,f,m]=l,g=Ir(f);h===this.userId&&s.path.isEqual(g)?r=r.add(m):d.done()});i.push(c)}),_.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=gm(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Pe(re);return Ka(e).Y({range:o},(c,l,u)=>{let[d,h,f]=c,m=Ir(h);d===this.userId&&r.isPrefixOf(m)?m.length===i&&(a=a.add(f)):u.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(s=>{i.push($i(e).get(s).next(o=>{if(o===null)throw O();B(o.userId===this.userId),r.push(Js(this.serializer,o))}))}),_.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return gF(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),_.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return _.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Ka(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=Ir(s[1]);i.push(c)}else a.done()}).next(()=>{B(i.length===0)})})}containsKey(e,n){return yF(e,this.userId,n)}xn(e){return _F(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function yF(t,e,n){let r=gm(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Ka(t).Y({range:s,J:!0},(a,c,l)=>{let[u,d,h]=a;u===e&&d===i&&(o=!0),l.done()}).next(()=>o)}function $i(t){return ft(t,"mutations")}function Ka(t){return ft(t,"documentMutations")}function _F(t){return ft(t,"mutationQueues")}var cc=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};var sD=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{let r=new cc(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>q.fromTimestamp(new Xe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ha(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>(B(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,s=[];return Ha(e).Y((o,a)=>{let c=Cu(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>_.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ha(e).Y((r,i)=>{let s=Cu(i);n(s)})}Ln(e){return rk(e).get("targetGlobalKey").next(n=>(B(n!==null),n))}kn(e,n){return rk(e).put("targetGlobalKey",n)}qn(e,n){return Ha(e).put(hF(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){let r=uo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Ha(e).Y({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let l=Cu(a);sd(n,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,n,r){let i=[],s=Hi(e);return n.forEach(o=>{let a=Bt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),_.waitFor(i)}removeMatchingKeys(e,n,r){let i=Hi(e);return _.forEach(n,s=>{let o=Bt(s.path);return _.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){let r=Hi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Hi(e),s=de();return i.Y({range:r,J:!0},(o,a,c)=>{let l=Ir(o[1]),u=new P(l);s=s.add(u)}).next(()=>s)}containsKey(e,n){let r=Bt(n.path),i=IDBKeyRange.bound([r],[Ek(r)],!1,!0),s=0;return Hi(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}_t(e,n){return Ha(e).get(n).next(r=>r?Cu(r):null)}};function Ha(t){return ft(t,"targets")}function rk(t){return ft(t,"targetGlobal")}function Hi(t){return ft(t,"targetDocuments")}function ik([t,e],[n,r]){let i=re(t,n);return i===0?re(e,r):i}var oD=class{constructor(e){this.Kn=e,this.buffer=new Pe(ik),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();ik(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},aD=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){D("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>p(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ns(n)?D("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield ts(n)}yield this.zn(3e5)}))}},cD=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return _.resolve(sn._e);let r=new oD(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(D("LruGarbageCollector","Garbage collection skipped; disabled"),_.resolve(nk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(D("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nk):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(D("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(l=Date.now(),za()<=ge.DEBUG&&D("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),_.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}};function e8(t,e){return new cD(t,e)}var lD=class{constructor(e,n){this.db=e,this.garbageCollector=e8(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return fm(e,r)}removeReference(e,n,r){return fm(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return fm(e,n)}er(e,n){return function(i,s){let o=!1;return _F(i).Z(a=>yF(i,a,s).next(c=>(c&&(o=!0),_.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.Xn(e,(o,a)=>{if(a<=n){let c=this.er(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,q.min()),Hi(e).delete(function(d){return[0,Bt(d.path)]}(o))))});i.push(c)}}).next(()=>_.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return fm(e,n)}Xn(e,n){let r=Hi(e),i,s=sn._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==sn._e&&n(new P(Ir(i)),s),s=l,i=c):s=sn._e}).next(()=>{s!==sn._e&&n(new P(Ir(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function fm(t,e){return Hi(t).put(function(r,i){return{targetId:0,path:Bt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var qm=class{constructor(){this.changes=new Tr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?_.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var uD=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ys(e).put(r)}removeEntry(e,n,r){return Ys(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],jm(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=wt.newInvalidDocument(n);return Ys(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Iu(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:wt.newInvalidDocument(n)};return Ys(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Iu(n))},(i,s)=>{r={document:this.nr(n,s),size:Hm(s)}}).next(()=>r)}getEntries(e,n){let r=an();return this.ir(e,n,(i,s)=>{let o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=an(),i=new Ve(P.comparator);return this.ir(e,n,(s,o)=>{let a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,Hm(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return _.resolve();let i=new Pe(ak);n.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(Iu(i.first()),Iu(i.last())),o=i.getIterator(),a=o.getNext();return Ys(e).Y({index:"documentKeyIndex",range:s},(c,l,u)=>{let d=P.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&ak(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?u.U(Iu(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),jm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ys(e).W(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let u=an();for(let d of l){let h=this.nr(P.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(ad(n,h)||i.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,n,r,i){let s=an(),o=ok(n,r),a=ok(n,Sn.max());return Ys(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,u)=>{let d=this.nr(P.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(d.key,d),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new dD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return sk(e).get("remoteDocumentGlobalKey").next(n=>(B(!!n),n))}tr(e,n){return sk(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=Z5(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(q.min())))return r}return wt.newInvalidDocument(e)}};function vF(t){return new uD(t)}var dD=class extends qm{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Tr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Pe((s,o)=>re(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=GO(this.ar.serializer,o);i=i.add(s.path.popLast());let l=Hm(c);r+=l-a.size,n.push(this.ar.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=GO(this.ar.serializer,o.convertToNoDocument(q.min()));n.push(this.ar.addEntry(e,s,c))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),_.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function sk(t){return ft(t,"remoteDocumentGlobal")}function Ys(t){return ft(t,"remoteDocumentsV14")}function Iu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ok(t,e){let n=e.documentKey.path.toArray();return[t,jm(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ak(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=re(n[s],r[s]),i)return i;return i=re(n.length,r.length),i||(i=re(n[n.length-2],r[r.length-2]),i||re(n[n.length-1],r[r.length-1]))}var hD=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Gm=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ru(r.mutation,i,on.empty(),Xe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){let i=br();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Du();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=br();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=an(),o=Au(),a=function(){return Au()}();return n.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof zn)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Ru(u.mutation,l,u.mutation.getFieldMask(),Xe.now())):o.set(l.key,on.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var d;return a.set(l,new hD(u,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Au(),i=new Ve((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=r.get(c)||on.empty();u=a.applyToLocalView(l,u),r.set(c,u);let d=(i.get(a.batchId)||de()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=qk();u.forEach(h=>{if(!s.has(h)){let f=Xk(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return _.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return P.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):_.resolve(br()),a=-1,c=s;return o.next(l=>_.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?_.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,de())).next(u=>({batchId:a,changes:zk(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new P(n)).next(r=>{let i=Du();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Du();return this.indexManager.getCollectionParents(e,s).next(a=>_.forEach(a,c=>{let l=function(d,h){return new Yi(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,wt.newInvalidDocument(u)))});let a=Du();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&Ru(u.mutation,l,on.empty(),Xe.now()),ad(n,l)&&(a=a.insert(c,l))}),a})}};var fD=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return _.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ut(i.createTime)}}(n)),_.resolve()}getNamedQuery(e,n){return _.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:fF(i.bundledQuery),readTime:Ut(i.readTime)}}(n)),_.resolve()}};var pD=class{constructor(){this.overlays=new Ve(P.comparator),this.hr=new Map}getOverlay(e,n){return _.resolve(this.overlays.get(n))}getOverlays(e,n){let r=br();return _.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),_.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),_.resolve()}getOverlaysForCollection(e,n,r){let i=br(),s=n.length+1,o=new P(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return _.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ve((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=br(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=br(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return _.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Uu(n,r));let s=this.hr.get(n);s===void 0&&(s=de(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var qu=class{constructor(){this.Pr=new Pe(rt.Ir),this.Tr=new Pe(rt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new rt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new rt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new P(new Me([])),r=new rt(n,e),i=new rt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new P(new Me([])),r=new rt(n,e),i=new rt(n,e+1),s=de();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new rt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},rt=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return P.comparator(e.key,n.key)||re(e.pr,n.pr)}static Er(e,n){return re(e.pr,n.pr)||P.comparator(e.key,n.key)}};var mD=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Pe(rt.Ir)}checkEmpty(e){return _.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Bu(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new rt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return _.resolve(o)}lookupMutationBatch(e,n){return _.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return _.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return _.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return _.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new rt(n,0),i=new rt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),_.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pe(re);return n.forEach(i=>{let s=new rt(i,0),o=new rt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),_.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;P.isDocumentKey(s)||(s=s.child(""));let o=new rt(new P(s),0),a=new Pe(re);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},o),_.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){B(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return _.forEach(n.mutations,i=>{let s=new rt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new rt(n,0),i=this.wr.firstAfterOrEqual(r);return _.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,_.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var gD=class{constructor(e){this.vr=e,this.docs=function(){return new Ve(P.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return _.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let r=an();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wt.newInvalidDocument(i))}),_.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=an(),o=n.path,a=new P(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||a0(bk(u),r)<=0||(i.has(u.key)||ad(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return _.resolve(s)}getAllFromCollectionGroup(e,n,r,i){O()}Fr(e,n){return _.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new yD(this)}getSize(e){return _.resolve(this.size)}},yD=class extends qm{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),_.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var _D=class{constructor(e){this.persistence=e,this.Mr=new Tr(n=>uo(n),sd),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.Or=0,this.Nr=new qu,this.targetCount=0,this.Br=cc.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),_.resolve()}getLastRemoteSnapshotVersion(e){return _.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),_.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),_.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new cc(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,_.resolve()}updateTargetData(e,n){return this.qn(n),_.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,_.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),_.waitFor(s).next(()=>i)}getTargetCount(e){return _.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return _.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),_.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),_.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),_.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return _.resolve(r)}containsKey(e,n){return _.resolve(this.Nr.containsKey(n))}};var Wm=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new sn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new _D(this),this.indexManager=new rD,this.remoteDocumentCache=function(i){return new gD(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Vm(n),this.$r=new fD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new mD(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){D("MemoryPersistence","Starting transaction:",e);let i=new vD(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return _.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},vD=class extends bm{constructor(e){super(),this.currentSequenceNumber=e}},Km=class t{constructor(e){this.persistence=e,this.zr=new qu,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw O()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),_.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),_.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),_.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _.forEach(this.Jr,r=>{let i=P.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,q.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return _.or([()=>_.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var wD=class{constructor(e){this.serializer=e}N(e,n,r,i){let s=new Dm("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DO,{unique:!0}),c.createObjectStore("documentMutations")}(e),ck(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=_.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),ck(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:q.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").W().next(u=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DO,{unique:!0});let d=l.store("mutations"),h=u.map(f=>d.put(f));return _.waitFor(h)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:m5});l.createIndex("collectionPathOverlayIndex",g5,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",y5,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:i5});l.createIndex("documentKeyIndex",s5),l.createIndex("collectionGroupIndex",o5)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:d5}).createIndex("sequenceNumberIndex",h5,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:f5}).createIndex("documentKeyIndex",p5,{unique:!1})}(e))),o}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Hm(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>_.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>_.forEach(a,c=>{B(c.userId===s.userId);let l=Js(this.serializer,c);return gF(e,s.userId,l).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.Y((o,a)=>{let c=new Me(o),l=function(d){return[0,Bt(d)]}(c);s.push(n.get(l).next(u=>u?_.resolve():(d=>n.put({targetId:0,path:Bt(d),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>_.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:u5});let r=n.store("collectionParents"),i=new zu,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Bt(c)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{let c=new Me(o);return s(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,c],l)=>{let u=Ir(a);return s(u.popLast())}))}ri(e){let n=e.store("targets");return n.Y((r,i)=>{let s=Cu(i),o=hF(this.serializer,s);return n.put(o)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new P(Me.fromString(d.document.name).popFirst(5)):d.noDocument?P.fromSegments(d.noDocument.path):d.unknownDocument?P.fromSegments(d.unknownDocument.path):O()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>_.waitFor(i))}si(e,n){let r=n.store("mutations"),i=vF(this.serializer),s=new Wm(Km.Hr,this.serializer.ct);return r.W().next(o=>{let a=new Map;return o.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:de();Js(this.serializer,c).keys().forEach(d=>u=u.add(d)),a.set(c.userId,u)}),_.forEach(a,(c,l)=>{let u=new ht(l),d=Bm.lt(this.serializer,u),h=s.getIndexManager(u),f=zm.lt(u,this.serializer,h,s.referenceDelegate);return new Gm(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new ku(n,sn._e),c).next()})})}};function ck(t){t.createObjectStore("targetDocuments",{keyPath:c5}).createIndex("documentTargetsIndex",l5,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",a5,{unique:!0}),t.createObjectStore("targetGlobal")}var cb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ED=class t{constructor(e,n,r,i,s,o,a,c,l,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=l,this.ai=u,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!t.D())throw new A(w.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lD(this,i),this.Ti=n+"main",this.serializer=new Vm(c),this.Ei=new ao(this.Ti,this.ui,new wD(this.serializer)),this.Qr=new sD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=vF(this.serializer),this.$r=new Yb,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,u===!1&&Ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new A(w.FAILED_PRECONDITION,cb);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new sn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>p(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>p(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>p(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>pm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(ns(e))return D("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return D("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return bu(e).get("owner").next(n=>_.resolve(this.Si(n)))}bi(e){return pm(e).delete(this.clientId)}Di(){return p(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=ft(n,"clientMetadata");return r.W().next(i=>{let s=this.vi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return _.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?_.resolve(!0):bu(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new A(w.FAILED_PRECONDITION,cb);return!1}}return!(!this.networkEnabled||!this.inForeground)||pm(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&D("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return p(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new ku(e,sn._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Bi()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>pm(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return zm.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new iD(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Bm.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){D("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",s=function(c){return c===15?v5:c===14?Rk:c===13?Ak:c===12?_5:c===11?Sk:void O()}(this.ui),o;return this.Ei.runTransaction(e,i,s,a=>(o=new ku(a,this.kr?this.kr.next():sn._e),n==="readwrite-primary"?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw Ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new A(w.FAILED_PRECONDITION,Dk);return r(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return bu(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new A(w.FAILED_PRECONDITION,cb)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bu(e).put("owner",n)}static D(){return ao.D()}yi(e){let n=bu(e);return n.get("owner").next(r=>this.Si(r)?(D("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):_.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Ze(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;hE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return D("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ze("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Ze("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function bu(t){return ft(t,"owner")}function pm(t){return ft(t,"clientMetadata")}function wF(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var ID=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=de(),i=de();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var bD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Qm=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return hE()?8:ao.v(qe())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new bD;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(za()<=ge.DEBUG&&D("QueryEngine","SDK will not create cache indexes for query:",qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),_.resolve()):(za()<=ge.DEBUG&&D("QueryEngine","Query:",qa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(za()<=ge.DEBUG&&D("QueryEngine","The SDK decides to create cache indexes for query:",qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cn(n))):_.resolve())}ji(e,n){if(kO(n))return _.resolve(null);let r=cn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=xm(n,null,"F"),r=cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=de(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,xm(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,r,i){return kO(n)||i.isEqual(q.min())?_.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?_.resolve(null):(za()<=ge.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qa(n)),this.es(e,o,n,Ik(i,-1)).next(a=>a))})}Zi(e,n){let r=new Pe($k(e));return n.forEach((i,s)=>{ad(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return za()<=ge.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",qa(n)),this.zi.getDocumentsMatchingQuery(e,n,Sn.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var DD=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ve(re),this.rs=new Tr(s=>uo(s),sd),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function EF(t,e,n,r){return new DD(t,e,n,r)}function IF(t,e){return p(this,null,function*(){let n=V(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=de();for(let l of i){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function t8(t,e){let n=V(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,h=d.keys(),f=_.resolve();return h.forEach(m=>{f=f.next(()=>u.getEntry(c,m)).next(g=>{let v=l.docVersions.get(m);B(v!==null),g.version.compareTo(v)<0&&(d.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),u.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function bF(t){let e=V(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function n8(t,e){let n=V(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((u,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Et.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),function(g,v,E){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(h,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let c=an(),l=de();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(r8(s,o,e.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!r.isEqual(q.min())){let u=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return _.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.ns=i,s))}function r8(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=an();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(q.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):D("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:i}})}function i8(t,e){let n=V(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ym(t,e){let n=V(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,_.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new ac(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function lc(t,e,n){return p(this,null,function*(){let r=V(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ns(o))throw o;D("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function CD(t,e,n){let r=V(t),i=q.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){let d=V(c),h=d.rs.get(u);return h!==void 0?_.resolve(d.ns.get(h)):d.Qr.getTargetData(l,u)}(r,o,cn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:q.min(),n?s:de())).next(a=>(TF(r,Uk(e),a),{documents:a,hs:s})))}function DF(t,e){let n=V(t),r=V(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function CF(t,e){let n=V(t),r=n.ss.get(e)||q.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,Ik(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(TF(n,e,i),i))}function TF(t,e,n){let r=t.ss.get(e)||q.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}function lk(t,e){return`firestore_clients_${t}_${e}`}function uk(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function lb(t,e){return`firestore_targets_${t}_${e}`}var Zm=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new A(i.error.code,i.error.message))),o?new t(e,n,i.state,s):(Ze("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Mu=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new A(r.error.code,r.error.message))),s?new t(e,r.state,i):(Ze("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Xm=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=h0();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Ck(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(Ze("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},TD=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Ze("SharedClientState",`Failed to parse online state: ${e}`),null)}},Gu=class{constructor(){this.activeTargetIds=h0()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},xu=class{constructor(e,n,r,i,s){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Ve(re),this.started=!1,this.ys=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=lk(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Gu),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return p(this,null,function*(){let e=yield this.syncEngine.Li();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(lk(this.persistenceKey,r));if(i){let s=Xm.Es(r,i);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,r){this.Bs(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(lb(this.persistenceKey,e));if(r){let i=Mu.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(lb(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return D("SharedClientState","READ",e,n),n}setItem(e,n){D("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){D("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(D("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>p(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(s){let o=sn._e;if(s!=null)try{let a=JSON.parse(s);B(typeof a=="number"),o=a}catch(a){Ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==sn._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,r){let i=new Zm(this.currentUser,e,n,r),s=uk(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Ls(e){let n=uk(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=lb(this.persistenceKey,e),s=new Mu(e,n,r);this.setItem(i,s.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return Xm.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Zm.Es(new ht(s),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return Mu.Es(i,n)}xs(e){return TD.Es(e)}Js(e){return JSON.parse(e)}zs(e){return p(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);D("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=h0();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},Jm=class{constructor(){this.no=new Gu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Gu,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var SD=class{io(e){}shutdown(){}};var eg=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var mm=null;function ub(){return mm===null?mm=function(){return 268435456+Math.round(2147483648*Math.random())}():mm++,"0x"+mm.toString(16)}var s8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var AD=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var Rt="WebChannelConnection",RD=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){let a=ub(),c=this.bo(n,r.toUriEncodedString());D("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,s,o),this.Co(n,c,l,i).then(u=>(D("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Nu("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",i),u})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){let i=s8[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let s=ub();return new Promise((o,a)=>{let c=new vO;c.setWithCredentials(!0),c.listenOnce(yO.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case dm.NO_ERROR:let u=c.getResponseJson();D(Rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case dm.TIMEOUT:D(Rt,`RPC '${e}' ${s} timed out`),a(new A(w.DEADLINE_EXCEEDED,"Request time out"));break;case dm.HTTP_ERROR:let d=c.getStatus();if(D(Rt,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let m=function(v){let E=v.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(E)>=0?E:w.UNKNOWN}(f.status);a(new A(m,f.message))}else a(new A(w.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new A(w.UNAVAILABLE,"Connection failed."));break;default:O()}}finally{D(Rt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);D(Rt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Fo(e,n,r){let i=ub(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mO(),a=gO(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let u=s.join("");D(Rt,`Creating RPC '${e}' stream ${i}: ${u}`,c);let d=o.createWebChannel(u,c),h=!1,f=!1,m=new AD({lo:v=>{f?D(Rt,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(h||(D(Rt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),D(Rt,`RPC '${e}' stream ${i} sending:`,v),d.send(v))},ho:()=>d.close()}),g=(v,E,R)=>{v.listen(E,M=>{try{R(M)}catch(F){setTimeout(()=>{throw F},0)}})};return g(d,vu.EventType.OPEN,()=>{f||D(Rt,`RPC '${e}' stream ${i} transport opened.`)}),g(d,vu.EventType.CLOSE,()=>{f||(f=!0,D(Rt,`RPC '${e}' stream ${i} transport closed`),m.Vo())}),g(d,vu.EventType.ERROR,v=>{f||(f=!0,Nu(Rt,`RPC '${e}' stream ${i} transport errored:`,v),m.Vo(new A(w.UNAVAILABLE,"The operation could not be completed")))}),g(d,vu.EventType.MESSAGE,v=>{var E;if(!f){let R=v.data[0];B(!!R);let M=R,F=M.error||((E=M[0])===null||E===void 0?void 0:E.error);if(F){D(Rt,`RPC '${e}' stream ${i} received error:`,F);let ee=F.status,j=function(xt){let Qt=nt[xt];if(Qt!==void 0)return eF(Qt)}(ee),te=F.message;j===void 0&&(j=w.INTERNAL,te="Unknown error status: "+ee+" with message "+F.message),f=!0,m.Vo(new A(j,te)),d.close()}else D(Rt,`RPC '${e}' stream ${i} received:`,R),m.mo(R)}}),g(a,_O.STAT_EVENT,v=>{v.stat===ob.PROXY?D(Rt,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===ob.NOPROXY&&D(Rt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.Ro()},0),m}};function SF(){return typeof window<"u"?window:null}function wm(){return typeof document<"u"?document:null}function wg(t){return new qb(t,!0)}var tg=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&D("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var ng=class{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new tg(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return p(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return p(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return p(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(Ze(n.toString()),Ze("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===w.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new A(w.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>p(this,null,function*(){this.state=0,this.start()}))}__(e){return D("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},MD=class extends ng{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=z5(this.serializer,e),r=function(s){if(!("targetChange"in s))return q.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?q.min():o.readTime?Ut(o.readTime):q.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=Kb(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Rm(c)?{documents:oF(s,c)}:{query:aF(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=tF(s,o.resumeToken);let l=Gb(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(q.min())>0){a.readTime=oc(s,o.snapshotVersion.toTimestamp());let l=Gb(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=G5(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=Kb(this.serializer),n.removeTarget=e,this.t_(n)}},xD=class extends ng{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(B(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=q5(e.writeResults,e.commitTime),r=Ut(e.commitTime);return this.listener.T_(r,n)}return B(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=Kb(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Lm(this.serializer,r))};this.t_(n)}};var ND=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new A(w.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,Wb(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new A(w.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Wb(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new A(w.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var PD=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ze(n),this.g_=!1):D("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var OD=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(()=>p(this,null,function*(){vo(this)&&(D("RemoteStore","Restarting streams for network reachability change."),yield function(c){return p(this,null,function*(){let l=V(c);l.v_.add(4),yield cd(l),l.x_.set("Unknown"),l.v_.delete(4),yield Eg(l)})}(this))}))}),this.x_=new PD(r,i)}};function Eg(t){return p(this,null,function*(){if(vo(t))for(let e of t.F_)yield e(!0)})}function cd(t){return p(this,null,function*(){for(let e of t.F_)yield e(!1)})}function Ig(t,e){let n=V(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),y0(n)?g0(n):pc(n).Jo()&&m0(n,e))}function Wu(t,e){let n=V(t),r=pc(n);n.C_.delete(e),r.Jo()&&AF(n,e),n.C_.size===0&&(r.Jo()?r.Xo():vo(n)&&n.x_.set("Unknown"))}function m0(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(q.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pc(t).c_(e)}function AF(t,e){t.O_.Oe(e),pc(t).l_(e)}function g0(t){t.O_=new zb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),pc(t).start(),t.x_.p_()}function y0(t){return vo(t)&&!pc(t).Ho()&&t.C_.size>0}function vo(t){return V(t).v_.size===0}function RF(t){t.O_=void 0}function o8(t){return p(this,null,function*(){t.C_.forEach((e,n)=>{m0(t,e)})})}function a8(t,e){return p(this,null,function*(){RF(t),y0(t)?(t.x_.S_(e),g0(t)):t.x_.set("Unknown")})}function c8(t,e,n){return p(this,null,function*(){if(t.x_.set("Online"),e instanceof Om&&e.state===2&&e.cause)try{yield function(i,s){return p(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){D("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rg(t,r)}else if(e instanceof Za?t.O_.$e(e):e instanceof Pm?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(q.min()))try{let r=yield bF(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.C_.get(l);u&&s.C_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.C_.get(c);if(!u)return;s.C_.set(c,u.withResumeToken(Et.EMPTY_BYTE_STRING,u.snapshotVersion)),AF(s,c);let d=new ac(u.target,c,l,u.sequenceNumber);m0(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){D("RemoteStore","Failed to raise snapshot:",r),yield rg(t,r)}})}function rg(t,e,n){return p(this,null,function*(){if(!ns(e))throw e;t.v_.add(1),yield cd(t),t.x_.set("Offline"),n||(n=()=>bF(t.localStore)),t.asyncQueue.enqueueRetryable(()=>p(this,null,function*(){D("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Eg(t)}))})}function MF(t,e){return e().catch(n=>rg(t,n,e))}function fc(t){return p(this,null,function*(){let e=V(t),n=es(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;l8(e);)try{let i=yield i8(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,u8(e,i)}catch(i){yield rg(e,i)}xF(e)&&NF(e)})}function l8(t){return vo(t)&&t.D_.length<10}function u8(t,e){t.D_.push(e);let n=es(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function xF(t){return vo(t)&&!es(t).Ho()&&t.D_.length>0}function NF(t){es(t).start()}function d8(t){return p(this,null,function*(){es(t).d_()})}function h8(t){return p(this,null,function*(){let e=es(t);for(let n of t.D_)e.I_(n.mutations)})}function f8(t,e,n){return p(this,null,function*(){let r=t.D_.shift(),i=Ub.from(r,e,n);yield MF(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield fc(t)})}function p8(t,e){return p(this,null,function*(){e&&es(t).P_&&(yield function(r,i){return p(this,null,function*(){if(function(o){return F5(o)&&o!==w.ABORTED}(i.code)){let s=r.D_.shift();es(r).Zo(),yield MF(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield fc(r)}})}(t,e)),xF(t)&&NF(t)})}function dk(t,e){return p(this,null,function*(){let n=V(t);n.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");let r=vo(n);n.v_.add(3),yield cd(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Eg(n)})}function kD(t,e){return p(this,null,function*(){let n=V(t);e?(n.v_.delete(2),yield Eg(n)):e||(n.v_.add(2),yield cd(n),n.x_.set("Unknown"))})}function pc(t){return t.N_||(t.N_=function(n,r,i){let s=V(n);return s.R_(),new MD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:o8.bind(null,t),To:a8.bind(null,t),u_:c8.bind(null,t)}),t.F_.push(e=>p(this,null,function*(){e?(t.N_.Zo(),y0(t)?g0(t):t.x_.set("Unknown")):(yield t.N_.stop(),RF(t))}))),t.N_}function es(t){return t.B_||(t.B_=function(n,r,i){let s=V(n);return s.R_(),new xD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:d8.bind(null,t),To:p8.bind(null,t),E_:h8.bind(null,t),T_:f8.bind(null,t)}),t.F_.push(e=>p(this,null,function*(){e?(t.B_.Zo(),yield fc(t)):(yield t.B_.stop(),t.D_.length>0&&(D("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}var FD=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Tn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new A(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function _0(t,e){if(Ze("AsyncQueue",`${e}: ${t}`),ns(t))return new A(w.UNAVAILABLE,`${e}: ${t}`);throw t}var ig=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||P.comparator(n.key,r.key):(n,r)=>P.comparator(n.key,r.key),this.keyedMap=Du(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var sg=class{constructor(){this.L_=new Ve(P.comparator)}track(e){let n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):O():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}},uc=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,ig.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var LD=class{constructor(){this.q_=void 0,this.Q_=[]}},VD=class{constructor(){this.queries=new Tr(e=>Bk(e),vg),this.onlineState="Unknown",this.K_=new Set}};function v0(t,e){return p(this,null,function*(){let n=V(t),r=e.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new LD),i)try{s.q_=yield n.onListen(r)}catch(o){let a=_0(o,`Initialization of query '${qa(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&E0(n)})}function w0(t,e){return p(this,null,function*(){let n=V(t),r=e.query,i=!1,s=n.queries.get(r);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),i=s.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function m8(t,e){let n=V(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.W_(i)&&(r=!0);o.q_=i}}r&&E0(n)}function g8(t,e,n){let r=V(t),i=r.queries.get(e);if(i)for(let s of i.Q_)s.onError(n);r.queries.delete(e)}function E0(t){t.K_.forEach(e=>{e.next()})}var Ku=class{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new uc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=uc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var og=class{constructor(e){this.key=e}},ag=class{constructor(e){this.key=e}},jD=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=de(),this.mutatedKeys=de(),this.ua=$k(e),this.ca=new ig(this.ua)}get la(){return this.oa}ha(e,n){let r=n?n.Pa:new sg,i=n?n.ca:this.ca,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{let h=i.get(u),f=ad(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;h&&f?h.data.isEqual(f.data)?m!==g&&(r.track({type:3,doc:f}),v=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),v=!0,(c&&this.ua(f,c)>0||l&&this.ua(f,l)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),v=!0):h&&!f&&(r.track({type:1,doc:h}),v=!0,(c||l)&&(a=!0)),v&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{ca:o,Pa:r,Xi:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let o=e.Pa.k_();o.sort((u,d)=>function(f,m){let g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return O()}};return g(f)-g(m)}(u.type,d.type)||this.ua(u.doc,d.doc)),this.Ta(r),i=i!=null&&i;let a=n&&!i?this.Ea():[],c=this.aa.size===0&&this.current&&!i?1:0,l=c!==this._a;return this._a=c,o.length!==0||l?{snapshot:new uc(this.query,e.ca,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new sg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=de(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new ag(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new og(r))}),n}Ra(e){this.oa=e.hs,this.aa=de();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return uc.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},BD=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},UD=class{constructor(e){this.key=e,this.ma=!1}},$D=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Tr(a=>Bk(a),vg),this.pa=new Map,this.ya=new Set,this.wa=new Ve(P.comparator),this.Sa=new Map,this.ba=new qu,this.Da={},this.Ca=new Map,this.va=cc.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function y8(t,e){return p(this,null,function*(){let n=T0(t),r,i,s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{let o=yield Ym(n.localStore,cn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield I0(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&Ig(n.remoteStore,o)}return i})}function I0(t,e,n,r,i){return p(this,null,function*(){t.Ma=(d,h,f)=>function(g,v,E,R){return p(this,null,function*(){let M=v.view.ha(E);M.Xi&&(M=yield CD(g.localStore,v.query,!1).then(({documents:te})=>v.view.ha(te,M)));let F=R&&R.targetChanges.get(v.targetId),ee=R&&R.targetMismatches.get(v.targetId)!=null,j=v.view.applyChanges(M,g.isPrimaryClient,F,ee);return HD(g,v.targetId,j.da),j.snapshot})}(t,d,h,f);let s=yield CD(t.localStore,e,!0),o=new jD(e,s.hs),a=o.ha(s.documents),c=Hu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);HD(t,n,l.da);let u=new BD(e,n,o);return t.ga.set(e,u),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),l.snapshot})}function _8(t,e){return p(this,null,function*(){let n=V(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!vg(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield lc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Wu(n.remoteStore,r.targetId),dc(n,r.targetId)}).catch(ts))):(dc(n,r.targetId),yield lc(n.localStore,r.targetId,!0))})}function v8(t,e,n){return p(this,null,function*(){let r=S0(t);try{let i=yield function(o,a){let c=V(o),l=Xe.now(),u=a.reduce((f,m)=>f.add(m.key),de()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=an(),g=de();return c.os.getEntries(f,u).next(v=>{m=v,m.forEach((E,R)=>{R.isValidDocument()||(g=g.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,m)).next(v=>{d=v;let E=[];for(let R of a){let M=k5(R,d.get(R.key).overlayedDocument);M!=null&&E.push(new zn(R.key,M,Nk(M.value.mapValue),vt.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,E,a)}).next(v=>{h=v;let E=v.applyToLocalDocumentSet(d,g);return c.documentOverlayCache.saveOverlays(f,v.batchId,E)})}).then(()=>({batchId:h.batchId,changes:zk(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Da[o.currentUser.toKey()];l||(l=new Ve(re)),l=l.insert(a,c),o.Da[o.currentUser.toKey()]=l}(r,i.batchId,n),yield rs(r,i.changes),yield fc(r.remoteStore)}catch(i){let s=_0(i,"Failed to persist write");n.reject(s)}})}function PF(t,e){return p(this,null,function*(){let n=V(t);try{let r=yield n8(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Sa.get(s);o&&(B(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?B(o.ma):i.removedDocuments.size>0&&(B(o.ma),o.ma=!1))}),yield rs(n,r,e)}catch(r){yield ts(r)}})}function hk(t,e,n){let r=V(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ga.forEach((s,o)=>{let a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=V(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.Q_)h.U_(a)&&(l=!0)}),l&&E0(c)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function w8(t,e,n){return p(this,null,function*(){let r=V(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Sa.get(e),s=i&&i.key;if(s){let o=new Ve(P.comparator);o=o.insert(s,wt.newNoDocument(s,q.min()));let a=de().add(s),c=new $u(q.min(),new Map,new Ve(re),o,a);yield PF(r,c),r.wa=r.wa.remove(s),r.Sa.delete(e),C0(r)}else yield lc(r.localStore,e,!1).then(()=>dc(r,e,n)).catch(ts)})}function E8(t,e){return p(this,null,function*(){let n=V(t),r=e.batch.batchId;try{let i=yield t8(n.localStore,e);D0(n,r,null),b0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield rs(n,i)}catch(i){yield ts(i)}})}function I8(t,e,n){return p(this,null,function*(){let r=V(t);try{let i=yield function(o,a){let c=V(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(B(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,e);D0(r,e,n),b0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield rs(r,i)}catch(i){yield ts(i)}})}function b0(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function D0(t,e,n){let r=V(t),i=r.Da[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function dc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||OF(t,r)})}function OF(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(Wu(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),C0(t))}function HD(t,e,n){for(let r of n)r instanceof og?(t.ba.addReference(r.key,e),b8(t,r)):r instanceof ag?(D("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||OF(t,r.key)):O()}function b8(t,e){let n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(D("SyncEngine","New document in limbo: "+n),t.ya.add(r),C0(t))}function C0(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new P(Me.fromString(e)),r=t.va.next();t.Sa.set(r,new UD(n)),t.wa=t.wa.insert(n,r),Ig(t.remoteStore,new ac(cn(od(n.path)),r,"TargetPurposeLimboResolution",sn._e))}}function rs(t,e,n){return p(this,null,function*(){let r=V(t),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,c)=>{o.push(r.Ma(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);let u=ID.Ki(c.targetId,l);s.push(u)}}))}),yield Promise.all(o),r.fa.u_(i),yield function(c,l){return p(this,null,function*(){let u=V(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>_.forEach(l,h=>_.forEach(h.qi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>_.forEach(h.Qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!ns(d))throw d;D("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.ns.get(h),m=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(m);u.ns=u.ns.insert(h,g)}}})}(r.localStore,s))})}function D8(t,e){return p(this,null,function*(){let n=V(t);if(!n.currentUser.isEqual(e)){D("SyncEngine","User change. New user:",e.toKey());let r=yield IF(n.localStore,e);n.currentUser=e,function(s,o){s.Ca.forEach(a=>{a.forEach(c=>{c.reject(new A(w.CANCELLED,o))})}),s.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield rs(n,r.us)}})}function C8(t,e){let n=V(t),r=n.Sa.get(e);if(r&&r.ma)return de().add(r.key);{let i=de(),s=n.pa.get(e);if(!s)return i;for(let o of s){let a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}function T8(t,e){return p(this,null,function*(){let n=V(t),r=yield CD(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&HD(n,e.targetId,i.da),i})}function S8(t,e){return p(this,null,function*(){let n=V(t);return CF(n.localStore,e).then(r=>rs(n,r))})}function A8(t,e,n,r){return p(this,null,function*(){let i=V(t),s=yield function(a,c){let l=V(a),u=V(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.vn(d,c).next(h=>h?l.localDocuments.getDocuments(d,h):_.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?yield fc(i.remoteStore):n==="acknowledged"||n==="rejected"?(D0(i,e,r||null),b0(i,e),function(a,c){V(V(a).mutationQueue).Mn(c)}(i.localStore,e)):O(),yield rs(i,s)):D("SyncEngine","Cannot apply mutation batch with id: "+e)})}function R8(t,e){return p(this,null,function*(){let n=V(t);if(T0(n),S0(n),e===!0&&n.Fa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield fk(n,r.toArray());n.Fa=!0,yield kD(n.remoteStore,!0);for(let s of i)Ig(n.remoteStore,s)}else if(e===!1&&n.Fa!==!1){let r=[],i=Promise.resolve();n.pa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(dc(n,o),lc(n.localStore,o,!0))),Wu(n.remoteStore,o)}),yield i,yield fk(n,r),function(o){let a=V(o);a.Sa.forEach((c,l)=>{Wu(a.remoteStore,l)}),a.ba.mr(),a.Sa=new Map,a.wa=new Ve(P.comparator)}(n),n.Fa=!1,yield kD(n.remoteStore,!1)}})}function fk(t,e,n){return p(this,null,function*(){let r=V(t),i=[],s=[];for(let o of e){let a,c=r.pa.get(o);if(c&&c.length!==0){a=yield Ym(r.localStore,cn(c[0]));for(let l of c){let u=r.ga.get(l),d=yield T8(r,u);d.snapshot&&s.push(d.snapshot)}}else{let l=yield DF(r.localStore,o);a=yield Ym(r.localStore,l),yield I0(r,kF(l),o,!1,a.resumeToken)}i.push(a)}return r.fa.u_(s),i})}function kF(t){return Vk(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function M8(t){return function(n){return V(V(n).persistence).Li()}(V(t).localStore)}function x8(t,e,n,r){return p(this,null,function*(){let i=V(t);if(i.Fa)return void D("SyncEngine","Ignoring unexpected query state notification.");let s=i.pa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{let o=yield CF(i.localStore,Uk(s[0])),a=$u.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Et.EMPTY_BYTE_STRING);yield rs(i,o,a);break}case"rejected":yield lc(i.localStore,e,!0),dc(i,e,r);break;default:O()}})}function N8(t,e,n){return p(this,null,function*(){let r=T0(t);if(r.Fa){for(let i of e){if(r.pa.has(i)){D("SyncEngine","Adding an already active target "+i);continue}let s=yield DF(r.localStore,i),o=yield Ym(r.localStore,s);yield I0(r,kF(s),o.targetId,!1,o.resumeToken),Ig(r.remoteStore,o)}for(let i of n)r.pa.has(i)&&(yield lc(r.localStore,i,!1).then(()=>{Wu(r.remoteStore,i),dc(r,i)}).catch(ts))}})}function T0(t){let e=V(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=PF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=C8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w8.bind(null,e),e.fa.u_=m8.bind(null,e.eventManager),e.fa.xa=g8.bind(null,e.eventManager),e}function S0(t){let e=V(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=E8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I8.bind(null,e),e}var Qu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return p(this,null,function*(){this.serializer=wg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return EF(this.persistence,new Qm,e.initialUser,this.serializer)}createPersistence(e){return new Wm(Km.Hr,this.serializer)}createSharedClientState(e){return new Jm}terminate(){return p(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var cg=class t extends Qu{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return p(this,null,function*(){yield Qn(t.prototype,this,"initialize").call(this,e),yield this.Na.initialize(this,e),yield S0(this.Na.syncEngine),yield fc(this.Na.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return EF(this.persistence,new Qm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new aD(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new Db(n,this.persistence);return new bb(e.asyncQueue,r)}createPersistence(e){let n=wF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new ED(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,SF(),wm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Jm}},zD=class t extends cg{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return p(this,null,function*(){yield Qn(t.prototype,this,"initialize").call(this,e);let n=this.Na.syncEngine;this.sharedClientState instanceof xu&&(this.sharedClientState.syncEngine={Zs:A8.bind(null,n),Xs:x8.bind(null,n),eo:N8.bind(null,n),Li:M8.bind(null,n),Ys:S8.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>p(this,null,function*(){yield R8(this.Na.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=SF();if(!xu.D(n))throw new A(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=wF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Yu=class{initialize(e,n){return p(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=D8.bind(null,this.syncEngine),yield kD(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new VD}()}createDatastore(e){let n=wg(e.databaseInfo.databaseId),r=function(s){return new RD(s)}(e.databaseInfo);return function(s,o,a,c){return new ND(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new OD(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>hk(this.syncEngine,n,0),function(){return eg.D()?new eg:new SD}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,u){let d=new $D(i,s,o,a,c,l);return u&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return p(this,null,function*(){var e;yield function(r){return p(this,null,function*(){let i=V(r);D("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield cd(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Zu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Ze("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var qD=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ht.UNAUTHENTICATED,this.clientId=Em.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>p(this,null,function*(){D("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(D("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new A(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Tn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=_0(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function db(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>p(this,null,function*(){r.isEqual(i)||(yield IF(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function pk(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield O8(t);D("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>dk(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>dk(e.remoteStore,i)),t._onlineComponents=e})}function P8(t){return t.name==="FirebaseError"?t.code===w.FAILED_PRECONDITION||t.code===w.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function O8(t){return p(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){D("FirestoreClient","Using user provided OfflineComponentProvider");try{yield db(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!P8(n))throw n;Nu("Error using user provided cache. Falling back to memory cache: "+n),yield db(t,new Qu)}}else D("FirestoreClient","Using default OfflineComponentProvider"),yield db(t,new Qu);return t._offlineComponents})}function FF(t){return p(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(D("FirestoreClient","Using user provided OnlineComponentProvider"),yield pk(t,t._uninitializedComponentsProvider._online)):(D("FirestoreClient","Using default OnlineComponentProvider"),yield pk(t,new Yu))),t._onlineComponents})}function k8(t){return FF(t).then(e=>e.syncEngine)}function lg(t){return p(this,null,function*(){let e=yield FF(t),n=e.eventManager;return n.onListen=y8.bind(null,e.syncEngine),n.onUnlisten=_8.bind(null,e.syncEngine),n})}function F8(t,e,n={}){let r=new Tn;return t.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(s,o,a,c,l){let u=new Zu({next:h=>{o.enqueueAndForget(()=>w0(s,d));let f=h.docs.has(a);!f&&h.fromCache?l.reject(new A(w.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?l.reject(new A(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new Ku(od(a.path),u,{includeMetadataChanges:!0,Z_:!0});return v0(s,d)}(yield lg(t),t.asyncQueue,e,n,r)})),r.promise}function L8(t,e,n={}){let r=new Tn;return t.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(s,o,a,c,l){let u=new Zu({next:h=>{o.enqueueAndForget(()=>w0(s,d)),h.fromCache&&c.source==="server"?l.reject(new A(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new Ku(a,u,{includeMetadataChanges:!0,Z_:!0});return v0(s,d)}(yield lg(t),t.asyncQueue,e,n,r)})),r.promise}function LF(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var mk=new Map;function VF(t,e,n){if(!n)throw new A(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function V8(t,e,n,r){if(e===!0&&r===!0)throw new A(w.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gk(t){if(!P.isDocumentKey(t))throw new A(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yk(t){if(P.isDocumentKey(t))throw new A(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":O()}function Kt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new A(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=bg(t);throw new A(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function j8(t,e){if(e<=0)throw new A(w.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var ug=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new A(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new A(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}V8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LF((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new A(w.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new A(w.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new A(w.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Xu=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ug({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new A(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new A(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ug(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pb;switch(r.type){case"firstParty":return new yb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new A(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=mk.get(n);r&&(D("ComponentProvider","Removing Datastore"),mk.delete(n),r.terminate())}(this),Promise.resolve()}};var Xr=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Mt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},qi=class t extends Xr{constructor(e,n,r){super(e,n,od(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new P(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function jF(t,e,...n){if(t=ze(t),VF("collection","path",e),t instanceof Xu){let r=Me.fromString(e,...n);return yk(r),new qi(t,null,r)}{if(!(t instanceof Mt||t instanceof qi))throw new A(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Me.fromString(e,...n));return yk(r),new qi(t.firestore,null,r)}}function A0(t,e,...n){if(t=ze(t),arguments.length===1&&(e=Em.newId()),VF("doc","path",e),t instanceof Xu){let r=Me.fromString(e,...n);return gk(r),new Mt(t,null,new P(r))}{if(!(t instanceof Mt||t instanceof qi))throw new A(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Me.fromString(e,...n));return gk(r),new Mt(t.firestore,t instanceof qi?t.converter:null,new P(r))}}var GD=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new tg(this,"async_queue_retry"),this._u=()=>{let n=wm();n&&D("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=wm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=wm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new Tn;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return p(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!ns(e))throw e;D("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ze("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);let i=FD.createAndSchedule(this,e,n,r,s=>this.lu(s));return this.nu.push(i),i}au(){this.ru&&O()}verifyOperationInProgress(){}hu(){return p(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};function _k(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var An=class extends Xu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new GD}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||UF(this),this._firestoreClient.terminate()}};function BF(t,e,n){n||(n="(default)");let r=Ul(t,"firestore");if(r.isInitialized(n)){let i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Mi(s,e))return i;throw new A(w.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new A(w.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new A(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function ld(t){return t._firestoreClient||UF(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function UF(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,u){return new Cb(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,LF(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new qD(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Ju=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Et.fromBase64String(e))}catch(n){throw new A(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var yo=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new A(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ed=class{constructor(e){this._methodName=e}};var td=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new A(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new A(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var B8=/^__.*__$/,WD=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ji(e,this.data,n,this.fieldTransforms)}},dg=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function $F(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw O()}}var KD=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return fg(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if($F(this.du)&&B8.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},QD=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wg(e)}Su(e,n,r,i=!1){return new KD({du:e,methodName:n,wu:r,path:st.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ud(t){let e=t._freezeSettings(),n=wg(t._databaseId);return new QD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function R0(t,e,n,r,i,s={}){let o=t.Su(s.merge||s.mergeFields?2:0,e,n,i);M0("Data must be an object, but it was:",o,r);let a=qF(r,o),c,l;if(s.merge)c=new on(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let h=YD(e,d,n);if(!o.contains(h))throw new A(w.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);WF(u,h)||u.push(h)}c=new on(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new WD(new jt(a),c,l)}var hg=class t extends ed{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function HF(t,e,n,r){let i=t.Su(1,e,n);M0("Data must be an object, but it was:",i,r);let s=[],o=jt.empty();_o(r,(c,l)=>{let u=x0(e,c,n);l=ze(l);let d=i.fu(u);if(l instanceof hg)s.push(u);else{let h=dd(l,d);h!=null&&(s.push(u),o.set(u,h))}});let a=new on(s);return new dg(o,a,i.fieldTransforms)}function zF(t,e,n,r,i,s){let o=t.Su(1,e,n),a=[YD(e,r,n)],c=[i];if(s.length%2!=0)throw new A(w.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(YD(e,s[h])),c.push(s[h+1]);let l=[],u=jt.empty();for(let h=a.length-1;h>=0;--h)if(!WF(l,a[h])){let f=a[h],m=c[h];m=ze(m);let g=o.fu(f);if(m instanceof hg)l.push(f);else{let v=dd(m,g);v!=null&&(l.push(f),u.set(f,v))}}let d=new on(l);return new dg(u,d,o.fieldTransforms)}function U8(t,e,n,r=!1){return dd(n,t.Su(r?4:3,e))}function dd(t,e){if(GF(t=ze(t)))return M0("Unsupported field value:",e,t),qF(t,e);if(t instanceof ed)return function(r,i){if(!$F(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=dd(a,i.gu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return M5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Xe.fromDate(r);return{timestampValue:oc(i.serializer,s)}}if(r instanceof Xe){let s=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:oc(i.serializer,s)}}if(r instanceof td)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ju)return{bytesValue:tF(i.serializer,r._byteString)};if(r instanceof Mt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:f0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${bg(r)}`)}(t,e)}function qF(t,e){let n={};return Mk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_o(t,(r,i)=>{let s=dd(i,e.Ru(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function GF(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof td||t instanceof Ju||t instanceof Mt||t instanceof ed)}function M0(t,e,n){if(!GF(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=bg(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function YD(t,e,n){if((e=ze(e))instanceof yo)return e._internalPath;if(typeof e=="string")return x0(t,e);throw fg("Field path arguments must be of type string or ",t,!1,void 0,n)}var $8=new RegExp("[~\\*/\\[\\]]");function x0(t,e,n){if(e.search($8)>=0)throw fg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yo(...e.split("."))._internalPath}catch{throw fg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fg(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new A(w.INVALID_ARGUMENT,a+t+c)}function WF(t,e){return t.some(n=>n.isEqual(e))}var pg=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ZD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Dg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},ZD=class extends pg{data(){return super.data()}};function Dg(t,e){return typeof e=="string"?x0(t,e):e instanceof yo?e._internalPath:e._delegate._internalPath}function KF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new A(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var nd=class{},rd=class extends nd{};function QF(t,e,...n){let r=[];e instanceof nd&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof XD).length,a=s.filter(c=>c instanceof mg).length;if(o>1||o>0&&a>0)throw new A(w.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var mg=class t extends rd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return JF(e._query,n),new Xr(e.firestore,e.converter,Vb(e._query,n))}_parse(e){let n=ud(e.firestore);return function(s,o,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new A(w.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){wk(d,u);let f=[];for(let m of d)f.push(vk(c,s,m));h={arrayValue:{values:f}}}else h=vk(c,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||wk(d,u),h=U8(a,o,d,u==="in"||u==="not-in");return _e.create(l,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function YF(t,e,n){let r=e,i=Dg("where",t);return mg._create(i,r,n)}var XD=class t extends nd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Se.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)JF(o,c),o=Vb(o,c)}(e._query,n),new Xr(e.firestore,e.converter,Vb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var JD=class t extends rd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new A(w.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new A(w.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lo(s,o)}(e._query,this._field,this._direction);return new Xr(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Yi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function ZF(t,e="asc"){let n=e,r=Dg("orderBy",t);return JD._create(r,n)}var e0=class t extends rd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Xr(e.firestore,e.converter,xm(e._query,this._limit,this._limitType))}};function XF(t){return j8("limit",t),e0._create("limit",t,"F")}function vk(t,e,n){if(typeof(n=ze(n))=="string"){if(n==="")throw new A(w.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jk(e)&&n.indexOf("/")!==-1)throw new A(w.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Me.fromString(n));if(!P.isDocumentKey(r))throw new A(w.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vu(t,new P(r))}if(n instanceof Mt)return Vu(t,n._key);throw new A(w.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bg(n)}.`)}function wk(t,e){if(!Array.isArray(t)||t.length===0)throw new A(w.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JF(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new A(w.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new A(w.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var t0=class{convertValue(e,n="none"){switch(co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw O()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return _o(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new td(We(e.latitude),We(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=u0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){let n=Gi(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Me.fromString(e);B(dF(r));let i=new tc(r.get(1),r.get(3)),s=new P(r.popFirst(5));return i.isEqual(n)||Ze(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function N0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ro=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},gg=class extends pg{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Xa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Dg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Xa=class extends gg{data(e={}){return super.data(e)}},yg=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ro(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Xa(this._firestore,this._userDataWriter,r.key,r,new ro(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new A(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Xa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ro(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Xa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ro(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:H8(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function H8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return O()}}function e1(t){t=Kt(t,Mt);let e=Kt(t.firestore,An);return F8(ld(e),t._key).then(n=>o1(e,t,n))}var id=class extends t0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ju(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}};function t1(t){t=Kt(t,Xr);let e=Kt(t.firestore,An),n=ld(e),r=new id(e);return KF(t._query),L8(n,t._query).then(i=>new yg(e,r,t,i))}function n1(t,e,n){t=Kt(t,Mt);let r=Kt(t.firestore,An),i=N0(t.converter,e,n);return hd(r,[R0(ud(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,vt.none())])}function r1(t,e,n,...r){t=Kt(t,Mt);let i=Kt(t.firestore,An),s=ud(i),o;return o=typeof(e=ze(e))=="string"||e instanceof yo?zF(s,"updateDoc",t._key,e,n,r):HF(s,"updateDoc",t._key,e),hd(i,[o.toMutation(t._key,vt.exists(!0))])}function i1(t){return hd(Kt(t.firestore,An),[new po(t._key,vt.none())])}function s1(t,e){let n=Kt(t.firestore,An),r=A0(t),i=N0(t.converter,e);return hd(n,[R0(ud(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,vt.exists(!1))]).then(()=>r)}function P0(t,...e){var n,r,i;t=ze(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||_k(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges};if(_k(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,l,u;if(t instanceof Mt)l=Kt(t.firestore,An),u=od(t._key.path),c={next:d=>{e[o]&&e[o](o1(l,t,d))},error:e[o+1],complete:e[o+2]};else{let d=Kt(t,Xr);l=Kt(d.firestore,An),u=d._query;let h=new id(l);c={next:f=>{e[o]&&e[o](new yg(l,h,d,f))},error:e[o+1],complete:e[o+2]},KF(t._query)}return function(h,f,m,g){let v=new Zu(g),E=new Ku(f,v,m);return h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return v0(yield lg(h),E)})),()=>{v.La(),h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return w0(yield lg(h),E)}))}}(ld(l),u,a,c)}function hd(t,e){return function(r,i){let s=new Tn;return r.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return v8(yield k8(r),i,s)})),s.promise}(ld(t),e)}function o1(t,e,n){let r=n.docs.get(e._key),i=new id(t);return new gg(t,i,e._key,r,new ro(n.hasPendingWrites,n.fromCache),e.converter)}var n0=class{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=c1(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}};function a1(t){return new n0(t)}var r0=class{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new Yu,this._offlineComponentProvider=new cg(this._onlineComponentProvider,e?.cacheSizeBytes,this.forceOwnership)}},i0=class{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new Yu,this._offlineComponentProvider=new zD(this._onlineComponentProvider,e?.cacheSizeBytes)}};function c1(t){return new r0(t?.forceOwnership)}function l1(){return new i0}var s0=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ud(e)}set(e,n,r){this._verifyNotCommitted();let i=hb(e,this._firestore),s=N0(i.converter,n,r),o=R0(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,vt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let s=hb(e,this._firestore),o;return o=typeof(n=ze(n))=="string"||n instanceof yo?zF(this._dataReader,"WriteBatch.update",s._key,n,r,i):HF(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,vt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=hb(e,this._firestore);return this._mutations=this._mutations.concat(new po(n._key,vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new A(w.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function hb(t,e){if((t=ze(t)).firestore!==e)throw new A(w.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function u1(t){return ld(t=Kt(t,An)),new s0(t,e=>hd(t,e))}(function(e,n=!0){(function(i){hc=i})(Oi),Pi(new In("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new An(new mb(r.getProvider("auth-internal")),new vb(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new A(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tc(l.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),it(EO,"4.4.1",e),it(EO,"4.4.1","esm2017")})();var Cg=function(){return Cg=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Cg.apply(this,arguments)};var W8={includeMetadataChanges:!1};function d1(t,e){return e===void 0&&(e=W8),new W(function(n){var r=P0(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function h1(t){return d1(t,{includeMetadataChanges:!0})}function f1(t,e){return e===void 0&&(e={}),h1(t).pipe(se(function(n){return p1(n,e)}))}function p1(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Cg(Cg({},r),(n={},n[e.idField]=t.id,n))}var fd=class{constructor(e){return e}},m1="firestore",O0=class{constructor(){return $l(m1)}};var k0=new x("angularfire2.firestore-instances");function K8(t,e){let n=fp(m1,t,e);return n&&new fd(n)}function Q8(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new fd(r)}}var Y8={provide:O0,deps:[[new mt,k0]]},Z8={provide:fd,useFactory:K8,deps:[[new mt,k0],qr]},X8=(()=>{class t{constructor(){it("angularfire",Bs.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ce({type:t});static \u0275inj=ae({providers:[Z8,Y8]})}return t})();function Vle(t,...e){return{ngModule:X8,providers:[{provide:k0,useFactory:Q8(t),multi:!0,deps:[L,Ne,Ma,Us,[new mt,Yl],[new mt,Ra],...e]}]}}var jle=Re(f1,!0);var Ble=Re(s1,!0);var Ule=Re(jF,!0);var $le=Re(i1,!0);var Hle=Re(A0,!0);var zle=Re(e1,!0);var qle=Re(t1,!0);var Gle=Re(BF,!0),Wle=Re(XF,!0);var Kle=Re(ZF,!0),Qle=Re(a1,!0),Yle=Re(l1,!0);var Zle=Re(QF,!0);var Xle=Re(n1,!0);var Jle=Re(r1,!0);var eue=Re(YF,!0),tue=Re(u1,!0);var ie=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(ie||{}),Sr="*";function iue(t,e){return{type:ie.Trigger,name:t,definitions:e,options:{}}}function sue(t,e=null){return{type:ie.Animate,styles:e,timings:t}}function g1(t,e=null){return{type:ie.Sequence,steps:t,options:e}}function F0(t){return{type:ie.Style,styles:t,offset:null}}function oue(t,e,n){return{type:ie.State,name:t,styles:e,options:n}}function aue(t){return{type:ie.Keyframes,steps:t}}function cue(t,e,n=null){return{type:ie.Transition,expr:t,animation:e,options:n}}var is=class{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},pd=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((n,r)=>n===null||r.totalTime>n.totalTime?r:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},Tg="!";function y1(t){return new T(3e3,!1)}function J8(){return new T(3100,!1)}function eK(){return new T(3101,!1)}function tK(t){return new T(3001,!1)}function nK(t){return new T(3003,!1)}function rK(t){return new T(3004,!1)}function iK(t,e){return new T(3005,!1)}function sK(){return new T(3006,!1)}function oK(){return new T(3007,!1)}function aK(t,e){return new T(3008,!1)}function cK(t){return new T(3002,!1)}function lK(t,e,n,r,i){return new T(3010,!1)}function uK(){return new T(3011,!1)}function dK(){return new T(3012,!1)}function hK(){return new T(3200,!1)}function fK(){return new T(3202,!1)}function pK(){return new T(3013,!1)}function mK(t){return new T(3014,!1)}function gK(t){return new T(3015,!1)}function yK(t){return new T(3016,!1)}function _K(t,e){return new T(3404,!1)}function vK(t){return new T(3502,!1)}function wK(t){return new T(3503,!1)}function EK(){return new T(3300,!1)}function IK(t){return new T(3504,!1)}function bK(t){return new T(3301,!1)}function DK(t,e){return new T(3302,!1)}function CK(t){return new T(3303,!1)}function TK(t,e){return new T(3400,!1)}function SK(t){return new T(3401,!1)}function AK(t){return new T(3402,!1)}function RK(t,e){return new T(3505,!1)}function ss(t){switch(t.length){case 0:return new is;case 1:return t[0];default:return new pd(t)}}function x1(t,e,n=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==o,d=u&&a||new Map;c.forEach((h,f)=>{let m=f,g=h;if(f!=="offset")switch(m=t.normalizePropertyName(m,i),g){case Tg:g=n.get(f);break;case Sr:g=r.get(f);break;default:g=t.normalizeStyleValue(f,m,g,i);break}d.set(m,g)}),u||s.push(d),a=d,o=l}),i.length)throw vK(i);return s}function sC(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&L0(n,"start",t)));break;case"done":t.onDone(()=>r(n&&L0(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&L0(n,"destroy",t)));break}}function L0(t,e,n){let r=n.totalTime,i=!!n.disabled,s=oC(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,r??t.totalTime,i),o=t._data;return o!=null&&(s._data=o),s}function oC(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function un(t,e,n){let r=t.get(e);return r||t.set(e,r=n),r}function _1(t){let e=t.indexOf(":"),n=t.substring(1,e),r=t.slice(e+1);return[n,r]}var MK=typeof document>"u"?null:document.documentElement;function aC(t){let e=t.parentNode||t.host||null;return e===MK?null:e}function xK(t){return t.substring(1,6)=="ebkit"}var wo=null,v1=!1;function NK(t){wo||(wo=PK()||{},v1=wo.style?"WebkitAppearance"in wo.style:!1);let e=!0;return wo.style&&!xK(t)&&(e=t in wo.style,!e&&v1&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in wo.style)),e}function PK(){return typeof document<"u"?document.body:null}function N1(t,e){for(;e;){if(e===t)return!0;e=aC(e)}return!1}function P1(t,e,n){if(n)return Array.from(t.querySelectorAll(e));let r=t.querySelector(e);return r?[r]:[]}var cC=(()=>{let e=class e{validateStyleProperty(r){return NK(r)}matchesElement(r,i){return!1}containsElement(r,i){return N1(r,i)}getParentElement(r){return aC(r)}query(r,i,s){return P1(r,i,s)}computeStyle(r,i,s){return s||""}animate(r,i,s,o,a,c=[],l){return new is(s,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),hC=class hC{};hC.NOOP=new cC;var bo=hC,Do=class{};var OK=1e3,O1="{{",kK="}}",k1="ng-enter",H0="ng-leave",Sg="ng-trigger",Ng=".ng-trigger",w1="ng-animating",z0=".ng-animating";function Jr(t){if(typeof t=="number")return t;let e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:q0(parseFloat(e[1]),e[2])}function q0(t,e){switch(e){case"s":return t*OK;default:return t}}function Pg(t,e,n){return t.hasOwnProperty("duration")?t:FK(t,e,n)}function FK(t,e,n){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof t=="string"){let a=t.match(r);if(a===null)return e.push(y1(t)),{duration:0,delay:0,easing:""};i=q0(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(s=q0(parseFloat(c),a[4]));let l=a[5];l&&(o=l)}else i=t;if(!n){let a=!1,c=e.length;i<0&&(e.push(J8()),a=!0),s<0&&(e.push(eK()),a=!0),a&&e.splice(c,0,y1(t))}return{duration:i,delay:s,easing:o}}function LK(t){return t.length?t[0]instanceof Map?t:t.map(e=>new Map(Object.entries(e))):[]}function Ar(t,e,n){e.forEach((r,i)=>{let s=lC(i);n&&!n.has(i)&&n.set(i,t.style[s]),t.style[s]=r})}function Io(t,e){e.forEach((n,r)=>{let i=lC(r);t.style[i]=""})}function md(t){return Array.isArray(t)?t.length==1?t[0]:g1(t):t}function VK(t,e,n){let r=e.params||{},i=F1(t);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||n.push(tK(s))})}var G0=new RegExp(`${O1}\\s*(.+?)\\s*${kK}`,"g");function F1(t){let e=[];if(typeof t=="string"){let n;for(;n=G0.exec(t);)e.push(n[1]);G0.lastIndex=0}return e}function yd(t,e,n){let r=`${t}`,i=r.replace(G0,(s,o)=>{let a=e[o];return a==null&&(n.push(nK(o)),a=""),a.toString()});return i==r?t:i}var jK=/-+([a-z0-9])/g;function lC(t){return t.replace(jK,(...e)=>e[1].toUpperCase())}function BK(t,e){return t===0||e===0}function UK(t,e,n){if(n.size&&e.length){let r=e[0],i=[];if(n.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,uC(t,a)))}}return e}function ln(t,e,n){switch(e.type){case ie.Trigger:return t.visitTrigger(e,n);case ie.State:return t.visitState(e,n);case ie.Transition:return t.visitTransition(e,n);case ie.Sequence:return t.visitSequence(e,n);case ie.Group:return t.visitGroup(e,n);case ie.Animate:return t.visitAnimate(e,n);case ie.Keyframes:return t.visitKeyframes(e,n);case ie.Style:return t.visitStyle(e,n);case ie.Reference:return t.visitReference(e,n);case ie.AnimateChild:return t.visitAnimateChild(e,n);case ie.AnimateRef:return t.visitAnimateRef(e,n);case ie.Query:return t.visitQuery(e,n);case ie.Stagger:return t.visitStagger(e,n);default:throw rK(e.type)}}function uC(t,e){return window.getComputedStyle(t)[e]}var $K=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Og=class extends Do{normalizePropertyName(e,n){return lC(e)}normalizeStyleValue(e,n,r,i){let s="",o=r.toString().trim();if($K.has(n)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(iK(e,r))}return o+s}};var kg="*";function HK(t,e){let n=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(r=>zK(r,n,e)):n.push(t),n}function zK(t,e,n){if(t[0]==":"){let c=qK(t,n);if(typeof c=="function"){e.push(c);return}t=c}let r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return n.push(gK(t)),e;let i=r[1],s=r[2],o=r[3];e.push(E1(i,o));let a=i==kg&&o==kg;s[0]=="<"&&!a&&e.push(E1(o,i))}function qK(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,r)=>parseFloat(r)>parseFloat(n);case":decrement":return(n,r)=>parseFloat(r)<parseFloat(n);default:return e.push(yK(t)),"* => *"}}var Ag=new Set(["true","1"]),Rg=new Set(["false","0"]);function E1(t,e){let n=Ag.has(t)||Rg.has(t),r=Ag.has(e)||Rg.has(e);return(i,s)=>{let o=t==kg||t==i,a=e==kg||e==s;return!o&&n&&typeof i=="boolean"&&(o=i?Ag.has(t):Rg.has(t)),!a&&r&&typeof s=="boolean"&&(a=s?Ag.has(e):Rg.has(e)),o&&a}}var L1=":self",GK=new RegExp(`s*${L1}s*,?`,"g");function V1(t,e,n,r){return new W0(t).build(e,n,r)}var I1="",W0=class{constructor(e){this._driver=e}build(e,n,r){let i=new K0(n);return this._resetContextStyleTimingState(i),ln(this,md(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=I1,e.collectedStyles=new Map,e.collectedStyles.set(I1,new Map),e.currentTime=0}visitTrigger(e,n){let r=n.queryCount=0,i=n.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&n.errors.push(sK()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),a.type==ie.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,n))}),c.name=l}else if(a.type==ie.Transition){let c=this.visitTransition(a,n);r+=c.queryCount,i+=c.depCount,o.push(c)}else n.errors.push(oK())}),{type:ie.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,n){let r=this.visitStyle(e.styles,n),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{F1(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&n.errors.push(aK(e.name,[...s.values()]))}return{type:ie.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;let r=ln(this,md(e.animation),n),i=HK(e.expr,n.errors);return{type:ie.Transition,matchers:i,animation:r,queryCount:n.queryCount,depCount:n.depCount,options:Eo(e.options)}}visitSequence(e,n){return{type:ie.Sequence,steps:e.steps.map(r=>ln(this,r,n)),options:Eo(e.options)}}visitGroup(e,n){let r=n.currentTime,i=0,s=e.steps.map(o=>{n.currentTime=r;let a=ln(this,o,n);return i=Math.max(i,n.currentTime),a});return n.currentTime=i,{type:ie.Group,steps:s,options:Eo(e.options)}}visitAnimate(e,n){let r=YK(e.timings,n.errors);n.currentAnimateTimings=r;let i,s=e.styles?e.styles:F0({});if(s.type==ie.Keyframes)i=this.visitKeyframes(s,n);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};r.easing&&(l.easing=r.easing),o=F0(l)}n.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,n);c.isEmptyStep=a,i=c}return n.currentAnimateTimings=null,{type:ie.Animate,timings:r,style:i,options:null}}visitStyle(e,n){let r=this._makeStyleAst(e,n);return this._validateStyleAst(r,n),r}_makeStyleAst(e,n){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Sr?r.push(a):n.errors.push(cK(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(O1)>=0){s=!0;break}}}),{type:ie.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,n){let r=n.currentAnimateTimings,i=n.currentTime,s=n.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=n.collectedStyles.get(n.currentQuerySelector),u=l.get(c),d=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(n.errors.push(lK(c,u.startTime,u.endTime,s,i)),d=!1),s=u.startTime),d&&l.set(c,{startTime:s,endTime:i}),n.options&&VK(a,n.options,n.errors)})})}visitKeyframes(e,n){let r={type:ie.Keyframes,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(uK()),r;let i=1,s=0,o=[],a=!1,c=!1,l=0,u=e.steps.map(E=>{let R=this._makeStyleAst(E,n),M=R.offset!=null?R.offset:QK(R.styles),F=0;return M!=null&&(s++,F=R.offset=M),c=c||F<0||F>1,a=a||F<l,l=F,o.push(F),R});c&&n.errors.push(dK()),a&&n.errors.push(hK());let d=e.steps.length,h=0;s>0&&s<d?n.errors.push(fK()):s==0&&(h=i/(d-1));let f=d-1,m=n.currentTime,g=n.currentAnimateTimings,v=g.duration;return u.forEach((E,R)=>{let M=h>0?R==f?1:h*R:o[R],F=M*v;n.currentTime=m+g.delay+F,g.duration=F,this._validateStyleAst(E,n),E.offset=M,r.styles.push(E)}),r}visitReference(e,n){return{type:ie.Reference,animation:ln(this,md(e.animation),n),options:Eo(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:ie.AnimateChild,options:Eo(e.options)}}visitAnimateRef(e,n){return{type:ie.AnimateRef,animation:this.visitReference(e.animation,n),options:Eo(e.options)}}visitQuery(e,n){let r=n.currentQuerySelector,i=e.options||{};n.queryCount++,n.currentQuery=e;let[s,o]=WK(e.selector);n.currentQuerySelector=r.length?r+" "+s:s,un(n.collectedStyles,n.currentQuerySelector,new Map);let a=ln(this,md(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:ie.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Eo(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(pK());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Pg(e.timings,n.errors,!0);return{type:ie.Stagger,animation:ln(this,md(e.animation),n),timings:r,options:null}}};function WK(t){let e=!!t.split(/\s*,\s*/).find(n=>n==L1);return e&&(t=t.replace(GK,"")),t=t.replace(/@\*/g,Ng).replace(/@\w+/g,n=>Ng+"-"+n.slice(1)).replace(/:animating/g,z0),[t,e]}function KK(t){return t?I({},t):null}var K0=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function QK(t){if(typeof t=="string")return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){let r=n;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}function YK(t,e){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let s=Pg(t,e).duration;return V0(s,0,"")}let n=t;if(n.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=V0(0,0,"");return s.dynamic=!0,s.strValue=n,s}let i=Pg(n,e);return V0(i.duration,i.delay,i.easing)}function Eo(t){return t?(t=I({},t),t.params&&(t.params=KK(t.params))):t={},t}function V0(t,e,n){return{duration:t,delay:e,easing:n}}function dC(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var _d=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}},ZK=1,XK=":enter",JK=new RegExp(XK,"g"),eQ=":leave",tQ=new RegExp(eQ,"g");function j1(t,e,n,r,i,s=new Map,o=new Map,a,c,l=[]){return new Q0().buildKeyframes(t,e,n,r,i,s,o,a,c,l)}var Q0=class{buildKeyframes(e,n,r,i,s,o,a,c,l,u=[]){l=l||new _d;let d=new Y0(e,n,l,i,s,u,[]);d.options=c;let h=c.delay?Jr(c.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,c),ln(this,r,d);let f=d.timelines.filter(m=>m.containsAnimation());if(f.length&&a.size){let m;for(let g=f.length-1;g>=0;g--){let v=f[g];if(v.element===n){m=v;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,d.errors,c)}return f.length?f.map(m=>m.buildKeyframes()):[dC(n,[],[],[],0,h,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){let r=n.subInstructions.get(n.element);if(r){let i=n.createSubContext(e.options),s=n.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&n.transformIntoNewTimeline(o)}n.previousNode=e}visitAnimateRef(e,n){let r=n.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,r),this.visitReference(e.animation,r),n.transformIntoNewTimeline(r.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:Jr(yd(s,i?.params??{},n.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,n,r){let s=n.currentTimeline.currentTime,o=r.duration!=null?Jr(r.duration):null,a=r.delay!=null?Jr(r.delay):null;return o!==0&&e.forEach(c=>{let l=n.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,n){n.updateOptions(e.options,!0),ln(this,e.animation,n),n.previousNode=e}visitSequence(e,n){let r=n.subContextCount,i=n,s=e.options;if(s&&(s.params||s.delay)&&(i=n.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==ie.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Fg);let o=Jr(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>ln(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){let r=[],i=n.currentTimeline.currentTime,s=e.options&&e.options.delay?Jr(e.options.delay):0;e.steps.forEach(o=>{let a=n.createSubContext(e.options);s&&a.delayNextStep(s),ln(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>n.currentTimeline.mergeTimelineCollectedStyles(o)),n.transformIntoNewTimeline(i),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){let r=e.strValue,i=n.params?yd(r,n.params,n.errors):r;return Pg(i,n.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){let r=n.currentAnimateTimings=this._visitTiming(e.timings,n),i=n.currentTimeline;r.delay&&(n.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==ie.Keyframes?this.visitKeyframes(s,n):(n.incrementTime(r.duration),this.visitStyle(s,n),i.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){let r=n.currentTimeline,i=n.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){let r=n.currentAnimateTimings,i=n.currentTimeline.duration,s=r.duration,a=n.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(i+s),n.previousNode=e}visitQuery(e,n){let r=n.currentTimeline.currentTime,i=e.options||{},s=i.delay?Jr(i.delay):0;s&&(n.previousNode.type===ie.Style||r==0&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Fg);let o=r,a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,n.errors);n.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{n.currentQueryIndex=u;let d=n.createSubContext(e.options,l);s&&d.delayNextStep(s),l===n.element&&(c=d.currentTimeline),ln(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let h=d.currentTimeline.currentTime;o=Math.max(o,h)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),c&&(n.currentTimeline.mergeTimelineCollectedStyles(c),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){let r=n.parentContext,i=n.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(n.currentQueryTotal-1),c=o*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let u=n.currentTimeline;c&&u.delayNextStep(c);let d=u.currentTime;ln(this,e.animation,n),n.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}},Fg={},Y0=class t{constructor(e,n,r,i,s,o,a,c){this._driver=e,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Fg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Lg(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Jr(r.duration)),r.delay!=null&&(i.delay=Jr(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!n||!o.hasOwnProperty(a))&&(o[a]=yd(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let n=this.options.params;if(n){let r=e.params={};Object.keys(n).forEach(i=>{r[i]=n[i]})}}return e}createSubContext(e=null,n,r){let i=n||this.element,s=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Fg,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,r){let i={duration:n??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new Z0(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(JK,"."+this._enterClassName),e=e.replace(tQ,"."+this._leaveClassName);let c=r!=1,l=this._driver.query(this.element,e,c);r!==0&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&a.length==0&&o.push(mK(n)),a}},Lg=class t{constructor(e,n,r,i){this._driver=e,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let n=this._keyframes.size===1&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=ZK,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,r]of this._globalTimelineStyles)this._backFill.set(n,r||Sr),this._currentKeyframe.set(n,Sr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,r,i){n&&this._previousKeyframe.set("easing",n);let s=i&&i.params||{},o=nQ(e,this._globalTimelineStyles);for(let[a,c]of o){let l=yd(c,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Sr),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,r)=>{let i=this._styleSummary.get(r);(!i||n.time>i.time)&&this._updateStyle(r,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,n=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((u,d)=>{u===Tg?e.add(d):u===Sr&&n.add(d)}),r||l.set("offset",c/this.duration),i.push(l)});let s=[...e.values()],o=[...n.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return dC(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},Z0=class extends Lg{constructor(e,n,r,i,s,o,a=!1){super(e,n,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&n){let s=[],o=r+n,a=n/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",b1(a)),s.push(l);let u=e.length-1;for(let d=1;d<=u;d++){let h=new Map(e[d]),f=h.get("offset"),m=n+f*r;h.set("offset",b1(m/o)),s.push(h)}r=o,n=0,i="",e=s}return dC(this.element,e,this.preStyleProps,this.postStyleProps,r,n,i,!0)}};function b1(t,e=3){let n=Math.pow(10,e-1);return Math.round(t*n)/n}function nQ(t,e){let n=new Map,r;return t.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)n.set(s,Sr)}else for(let[s,o]of i)n.set(s,o)}),n}function D1(t,e,n,r,i,s,o,a,c,l,u,d,h){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:h}}var j0={},Vg=class{constructor(e,n,r){this._triggerName=e,this.ast=n,this._stateStyles=r}match(e,n,r,i){return rQ(this.ast.matchers,e,n,r,i)}buildStyles(e,n,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(n,r):new Map}build(e,n,r,i,s,o,a,c,l,u){let d=[],h=this.ast.options&&this.ast.options.params||j0,f=a&&a.params||j0,m=this.buildStyles(r,f,d),g=c&&c.params||j0,v=this.buildStyles(i,g,d),E=new Set,R=new Map,M=new Map,F=i==="void",ee={params:B1(g,h),delay:this.ast.options?.delay},j=u?[]:j1(e,n,this.ast.animation,s,o,m,v,ee,l,d),te=0;return j.forEach(be=>{te=Math.max(be.duration+be.delay,te)}),d.length?D1(n,this._triggerName,r,i,F,m,v,[],[],R,M,te,d):(j.forEach(be=>{let xt=be.element,Qt=un(R,xt,new Set);be.preStyleProps.forEach(cs=>Qt.add(cs));let QC=un(M,xt,new Set);be.postStyleProps.forEach(cs=>QC.add(cs)),xt!==n&&E.add(xt)}),D1(n,this._triggerName,r,i,F,m,v,j,[...E.values()],R,M,te))}};function rQ(t,e,n,r,i){return t.some(s=>s(e,n,r,i))}function B1(t,e){let n=I({},e);return Object.entries(t).forEach(([r,i])=>{i!=null&&(n[r]=i)}),n}var X0=class{constructor(e,n,r){this.styles=e,this.defaultParams=n,this.normalizer=r}buildStyles(e,n){let r=new Map,i=B1(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=yd(o,i,n));let c=this.normalizer.normalizePropertyName(a,n);o=this.normalizer.normalizeStyleValue(a,c,o,n),r.set(a,o)})}),r}};function iQ(t,e,n){return new J0(t,e,n)}var J0=class{constructor(e,n,r){this.name=e,this.ast=n,this._normalizer=r,this.transitionFactories=[],this.states=new Map,n.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new X0(i.style,s,r))}),C1(this.states,"true","1"),C1(this.states,"false","0"),n.transitions.forEach(i=>{this.transitionFactories.push(new Vg(e,i,this.states))}),this.fallbackTransition=sQ(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,r,i){return this.transitionFactories.find(o=>o.match(e,n,r,i))||null}matchStyles(e,n,r){return this.fallbackTransition.buildStyles(e,n,r)}};function sQ(t,e,n){let r=[(o,a)=>!0],i={type:ie.Sequence,steps:[],options:null},s={type:ie.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new Vg(t,s,e)}function C1(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}var oQ=new _d,eC=class{constructor(e,n,r){this.bodyNode=e,this._driver=n,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){let r=[],i=[],s=V1(this._driver,n,r,i);if(r.length)throw wK(r);i.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,n,r){let i=e.element,s=x1(this._normalizer,e.keyframes,n,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,n,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=j1(this._driver,n,s,k1,H0,new Map,new Map,r,oQ,i),o.forEach(u=>{let d=un(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(i.push(EK()),o=[]),i.length)throw IK(i);a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,Sr))})});let c=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),l=ss(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);let r=this.players.indexOf(n);r>=0&&this.players.splice(r,1)}_getPlayer(e){let n=this._playersById.get(e);if(!n)throw bK(e);return n}listen(e,n,r,i){let s=oC(n,"","","");return sC(this._getPlayer(e),r,s,i),()=>{}}command(e,n,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,n,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},T1="ng-animate-queued",aQ=".ng-animate-queued",B0="ng-animate-disabled",cQ=".ng-animate-disabled",lQ="ng-star-inserted",uQ=".ng-star-inserted",dQ=[],U1={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},hQ={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},qn="__ng_removed",vd=class{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=pQ(i),r){let s=e,{value:o}=s,a=nT(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let n=e.params;if(n){let r=this.options.params;Object.keys(n).forEach(i=>{r[i]==null&&(r[i]=n[i])})}}},gd="void",U0=new vd(gd),tC=class{constructor(e,n,r){this.id=e,this.hostElement=n,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Rn(n,this._hostClassName)}listen(e,n,r,i){if(!this._triggers.has(n))throw DK(r,n);if(r==null||r.length==0)throw CK(n);if(!mQ(r))throw TK(r,n);let s=un(this._elementListeners,e,[]),o={name:n,phase:r,callback:i};s.push(o);let a=un(this._engine.statesByElement,e,new Map);return a.has(n)||(Rn(e,Sg),Rn(e,Sg+"-"+n),a.set(n,U0)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return this._triggers.has(e)?!1:(this._triggers.set(e,n),!0)}_getTrigger(e){let n=this._triggers.get(e);if(!n)throw SK(e);return n}trigger(e,n,r,i=!0){let s=this._getTrigger(n),o=new wd(this.id,n,e),a=this._engine.statesByElement.get(e);a||(Rn(e,Sg),Rn(e,Sg+"-"+n),this._engine.statesByElement.set(e,a=new Map));let c=a.get(n),l=new vd(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(n,l),c||(c=U0),!(l.value===gd)&&c.value===l.value){if(!_Q(c.params,l.params)){let g=[],v=s.matchStyles(c.value,c.params,g),E=s.matchStyles(l.value,l.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{Io(e,v),Ar(e,E)})}return}let h=un(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==n&&g.queued&&g.destroy()});let f=s.matchTransition(c.value,l.value,e,l.params),m=!1;if(!f){if(!i)return;f=s.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:f,fromState:c,toState:l,player:o,isFallbackTransition:m}),m||(Rn(e,T1),o.onStart(()=>{mc(e,T1)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);let v=this._engine.playersByElement.get(e);if(v){let E=v.indexOf(o);E>=0&&v.splice(E,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,r)=>{this._elementListeners.set(r,n.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let n=this._engine.playersByElement.get(e);n&&(n.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){let r=this._engine.driver.query(e,Ng,!0);r.forEach(i=>{if(i[qn])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,n,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,n,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,gd,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,o),r&&ss(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let n=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(n&&r){let i=new Set;n.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,l=r.get(o)||U0,u=new vd(gd),d=new wd(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,n){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,n);else{let s=e[qn];(!s||s===U1)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,n))}}insertNode(e,n){Rn(e,this._hostClassName)}drainQueuedTransitions(e){let n=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=oC(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,sC(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):n.push(r)}),this._queue=[],n.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},nC=class{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,r,i){this.bodyNode=e,this.driver=n,this._normalizer=r,this.scheduler=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,o)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(n=>{n.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,n){let r=new tC(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(r,n):(this.newHostElements.set(n,r),this.collectEnterElement(n)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,n){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(n);for(;a;){let c=i.get(a);if(c){let l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(n,e),e}register(e,n){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,n)),r}registerTrigger(e,n,r){let i=this._namespaceLookup[e];i&&i.register(n,r)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let n=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&n.add(s)}}return n}trigger(e,n,r,i){if(Mg(n)){let s=this._fetchNamespace(e);if(s)return s.trigger(n,r,i),!0}return!1}insertNode(e,n,r,i){if(!Mg(n))return;let s=n[qn];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(n);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(n,r)}i&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Rn(e,B0)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),mc(e,B0))}removeNode(e,n,r){if(Mg(n)){this.scheduler?.notify();let i=e?this._fetchNamespace(e):null;i?i.removeNode(n,r):this.markElementAsRemoved(e,n,!1,r);let s=this.namespacesByHostElement.get(n);s&&s.id!==e&&s.removeNode(n,r)}else this._onRemovalComplete(n,r)}markElementAsRemoved(e,n,r,i,s){this.collectedLeaveElements.push(n),n[qn]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,n,r,i,s){return Mg(n)?this._fetchNamespace(e).listen(n,r,i,s):()=>{}}_buildInstruction(e,n,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,n,s)}destroyInnerAnimations(e){let n=this.driver.query(e,Ng,!0);n.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(n=this.driver.query(e,z0,!0),n.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let n=this.playersByElement.get(e);n&&n.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let n=this.playersByQueriedElement.get(e);n&&n.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ss(this.players).onDone(()=>e());e()})}processLeaveNode(e){let n=e[qn];if(n&&n.setForRemoval){if(e[qn]=U1,n.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(B0)&&this.markElementAsDisabled(e,!1),this.driver.query(e,cQ,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Rn(i,lQ)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{n=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],n.length?ss(n).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw AK(e)}_flushAnimations(e,n){let r=new _d,i=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(k=>{u.add(k);let $=this.driver.query(k,aQ,!0);for(let G=0;G<$.length;G++)u.add($[G])});let d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=R1(h,this.collectedEnterElements),m=new Map,g=0;f.forEach((k,$)=>{let G=k1+g++;m.set($,G),k.forEach(Ee=>Rn(Ee,G))});let v=[],E=new Set,R=new Set;for(let k=0;k<this.collectedLeaveElements.length;k++){let $=this.collectedLeaveElements[k],G=$[qn];G&&G.setForRemoval&&(v.push($),E.add($),G.hasAnimation?this.driver.query($,uQ,!0).forEach(Ee=>E.add(Ee)):R.add($))}let M=new Map,F=R1(h,Array.from(E));F.forEach((k,$)=>{let G=H0+g++;M.set($,G),k.forEach(Ee=>Rn(Ee,G))}),e.push(()=>{f.forEach((k,$)=>{let G=m.get($);k.forEach(Ee=>mc(Ee,G))}),F.forEach((k,$)=>{let G=M.get($);k.forEach(Ee=>mc(Ee,G))}),v.forEach(k=>{this.processLeaveNode(k)})});let ee=[],j=[];for(let k=this._namespaceList.length-1;k>=0;k--)this._namespaceList[k].drainQueuedTransitions(n).forEach(G=>{let Ee=G.player,ot=G.element;if(ee.push(Ee),this.collectedEnterElements.length){let It=ot[qn];if(It&&It.setForMove){if(It.previousTriggersValues&&It.previousTriggersValues.has(G.triggerName)){let ls=It.previousTriggersValues.get(G.triggerName),dn=this.statesByElement.get(G.element);if(dn&&dn.has(G.triggerName)){let Bd=dn.get(G.triggerName);Bd.value=ls,dn.set(G.triggerName,Bd)}}Ee.destroy();return}}let Kn=!d||!this.driver.containsElement(d,ot),Yt=M.get(ot),ri=m.get(ot),$e=this._buildInstruction(G,r,ri,Yt,Kn);if($e.errors&&$e.errors.length){j.push($e);return}if(Kn){Ee.onStart(()=>Io(ot,$e.fromStyles)),Ee.onDestroy(()=>Ar(ot,$e.toStyles)),i.push(Ee);return}if(G.isFallbackTransition){Ee.onStart(()=>Io(ot,$e.fromStyles)),Ee.onDestroy(()=>Ar(ot,$e.toStyles)),i.push(Ee);return}let XC=[];$e.timelines.forEach(It=>{It.stretchStartingKeyframe=!0,this.disabledNodes.has(It.element)||XC.push(It)}),$e.timelines=XC,r.append(ot,$e.timelines);let gV={instruction:$e,player:Ee,element:ot};o.push(gV),$e.queriedElements.forEach(It=>un(a,It,[]).push(Ee)),$e.preStyleProps.forEach((It,ls)=>{if(It.size){let dn=c.get(ls);dn||c.set(ls,dn=new Set),It.forEach((Bd,hy)=>dn.add(hy))}}),$e.postStyleProps.forEach((It,ls)=>{let dn=l.get(ls);dn||l.set(ls,dn=new Set),It.forEach((Bd,hy)=>dn.add(hy))})});if(j.length){let k=[];j.forEach($=>{k.push(RK($.triggerName,$.errors))}),ee.forEach($=>$.destroy()),this.reportError(k)}let te=new Map,be=new Map;o.forEach(k=>{let $=k.element;r.has($)&&(be.set($,$),this._beforeAnimationBuild(k.player.namespaceId,k.instruction,te))}),i.forEach(k=>{let $=k.element;this._getPreviousPlayers($,!1,k.namespaceId,k.triggerName,null).forEach(Ee=>{un(te,$,[]).push(Ee),Ee.destroy()})});let xt=v.filter(k=>M1(k,c,l)),Qt=new Map;A1(Qt,this.driver,R,l,Sr).forEach(k=>{M1(k,c,l)&&xt.push(k)});let cs=new Map;f.forEach((k,$)=>{A1(cs,this.driver,new Set(k),c,Tg)}),xt.forEach(k=>{let $=Qt.get(k),G=cs.get(k);Qt.set(k,new Map([...$?.entries()??[],...G?.entries()??[]]))});let dy=[],YC=[],ZC={};o.forEach(k=>{let{element:$,player:G,instruction:Ee}=k;if(r.has($)){if(u.has($)){G.onDestroy(()=>Ar($,Ee.toStyles)),G.disabled=!0,G.overrideTotalTime(Ee.totalTime),i.push(G);return}let ot=ZC;if(be.size>1){let Yt=$,ri=[];for(;Yt=Yt.parentNode;){let $e=be.get(Yt);if($e){ot=$e;break}ri.push(Yt)}ri.forEach($e=>be.set($e,ot))}let Kn=this._buildAnimation(G.namespaceId,Ee,te,s,cs,Qt);if(G.setRealPlayer(Kn),ot===ZC)dy.push(G);else{let Yt=this.playersByElement.get(ot);Yt&&Yt.length&&(G.parentPlayer=ss(Yt)),i.push(G)}}else Io($,Ee.fromStyles),G.onDestroy(()=>Ar($,Ee.toStyles)),YC.push(G),u.has($)&&i.push(G)}),YC.forEach(k=>{let $=s.get(k.element);if($&&$.length){let G=ss($);k.setRealPlayer(G)}}),i.forEach(k=>{k.parentPlayer?k.syncPlayerEvents(k.parentPlayer):k.destroy()});for(let k=0;k<v.length;k++){let $=v[k],G=$[qn];if(mc($,H0),G&&G.hasAnimation)continue;let Ee=[];if(a.size){let Kn=a.get($);Kn&&Kn.length&&Ee.push(...Kn);let Yt=this.driver.query($,z0,!0);for(let ri=0;ri<Yt.length;ri++){let $e=a.get(Yt[ri]);$e&&$e.length&&Ee.push(...$e)}}let ot=Ee.filter(Kn=>!Kn.destroyed);ot.length?gQ(this,$,ot):this.processLeaveNode($)}return v.length=0,dy.forEach(k=>{this.players.push(k),k.onDone(()=>{k.destroy();let $=this.players.indexOf(k);this.players.splice($,1)}),k.play()}),dy}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,r,i,s){let o=[];if(n){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==gd;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,n,r){let i=n.triggerName,s=n.element,o=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:i;for(let c of n.timelines){let l=c.element,u=l!==s,d=un(r,l,[]);this._getPreviousPlayers(l,u,o,a,n.toState).forEach(f=>{let m=f.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),f.destroy(),d.push(f)})}Io(s,n.fromStyles)}_buildAnimation(e,n,r,i,s,o){let a=n.triggerName,c=n.element,l=[],u=new Set,d=new Set,h=n.timelines.map(m=>{let g=m.element;u.add(g);let v=g[qn];if(v&&v.removedBeforeQueried)return new is(m.duration,m.delay);let E=g!==c,R=yQ((r.get(g)||dQ).map(te=>te.getRealPlayer())).filter(te=>{let be=te;return be.element?be.element===g:!1}),M=s.get(g),F=o.get(g),ee=x1(this._normalizer,m.keyframes,M,F),j=this._buildPlayer(m,ee,R);if(m.subTimeline&&i&&d.add(g),E){let te=new wd(e,a,g);te.setRealPlayer(j),l.push(te)}return j});l.forEach(m=>{un(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>fQ(this.playersByQueriedElement,m.element,m))}),u.forEach(m=>Rn(m,w1));let f=ss(h);return f.onDestroy(()=>{u.forEach(m=>mc(m,w1)),Ar(c,n.toStyles)}),d.forEach(m=>{un(i,m,[]).push(f)}),f}_buildPlayer(e,n,r){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,r):new is(e.duration,e.delay)}},wd=class{constructor(e,n,r){this.namespaceId=e,this.triggerName=n,this.element=r,this._player=new is,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,r)=>{n.forEach(i=>sC(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){un(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let n=this._player;n.triggerCallback&&n.triggerCallback(e)}};function fQ(t,e,n){let r=t.get(e);if(r){if(r.length){let i=r.indexOf(n);r.splice(i,1)}r.length==0&&t.delete(e)}return r}function pQ(t){return t??null}function Mg(t){return t&&t.nodeType===1}function mQ(t){return t=="start"||t=="done"}function S1(t,e){let n=t.style.display;return t.style.display=e??"none",n}function A1(t,e,n,r,i){let s=[];n.forEach(c=>s.push(S1(c)));let o=[];r.forEach((c,l)=>{let u=new Map;c.forEach(d=>{let h=e.computeStyle(l,d,i);u.set(d,h),(!h||h.length==0)&&(l[qn]=hQ,o.push(l))}),t.set(l,u)});let a=0;return n.forEach(c=>S1(c,s[a++])),o}function R1(t,e){let n=new Map;if(t.forEach(a=>n.set(a,[])),e.length==0)return n;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let l=a.parentNode;return n.has(l)?c=l:i.has(l)?c=r:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&n.get(c).push(a)}),n}function Rn(t,e){t.classList?.add(e)}function mc(t,e){t.classList?.remove(e)}function gQ(t,e,n){ss(n).onDone(()=>t.processLeaveNode(e))}function yQ(t){let e=[];return $1(t,e),e}function $1(t,e){for(let n=0;n<t.length;n++){let r=t[n];r instanceof pd?$1(r.players,e):e.push(r)}}function _Q(t,e){let n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){let s=n[i];if(!e.hasOwnProperty(s)||t[s]!==e[s])return!1}return!0}function M1(t,e,n){let r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(s=>i.add(s)):e.set(t,r),n.delete(t),!0}var yc=class{constructor(e,n,r,i){this._driver=n,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(s,o)=>{},this._transitionEngine=new nC(e.body,n,r,i),this._timelineEngine=new eC(e.body,n,r),this._transitionEngine.onRemovalComplete=(s,o)=>this.onRemovalComplete(s,o)}registerTrigger(e,n,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],l=[],u=V1(this._driver,s,c,l);if(c.length)throw _K(i,c);l.length&&void 0,a=iQ(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(n,i,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,r,i){this._transitionEngine.insertNode(e,n,r,i)}onRemove(e,n,r){this._transitionEngine.removeNode(e,n,r)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,r,i){if(r.charAt(0)=="@"){let[s,o]=_1(r),a=i;this._timelineEngine.command(s,n,o,a)}else this._transitionEngine.trigger(e,n,r,i)}listen(e,n,r,i,s){if(r.charAt(0)=="@"){let[o,a]=_1(r);return this._timelineEngine.listen(o,n,a,s)}return this._transitionEngine.listen(e,n,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function vQ(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=$0(e[0]),e.length>1&&(r=$0(e[e.length-1]))):e instanceof Map&&(n=$0(e)),n||r?new rC(t,n,r):null}var gc=class gc{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=gc.initialStylesByElement.get(e);i||gc.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Ar(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ar(this._element,this._initialStyles),this._endStyles&&(Ar(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(gc.initialStylesByElement.delete(this._element),this._startStyles&&(Io(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Io(this._element,this._endStyles),this._endStyles=null),Ar(this._element,this._initialStyles),this._state=3)}};gc.initialStylesByElement=new WeakMap;var rC=gc;function $0(t){let e=null;return t.forEach((n,r)=>{wQ(r)&&(e=e||new Map,e.set(r,n))}),e}function wQ(t){return t==="display"||t==="position"}var jg=class{constructor(e,n,r,i){this.element=e,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let n=()=>this._onFinish();this.domPlayer.addEventListener("finish",n),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",n)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let n=[];return e.forEach(r=>{n.push(Object.fromEntries(r))}),n}_triggerWebAnimation(e,n,r){return e.animate(this._convertKeyframesToObject(n),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:uC(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let n=e==="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},Bg=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return N1(e,n)}getParentElement(e){return aC(e)}query(e,n,r){return P1(e,n,r)}computeStyle(e,n,r){return uC(e,n)}animate(e,n,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let l=new Map,u=o.filter(f=>f instanceof jg);BK(r,i)&&u.forEach(f=>{f.currentSnapshot.forEach((m,g)=>l.set(g,m))});let d=LK(n).map(f=>new Map(f));d=UK(e,d,l);let h=vQ(e,d);return new jg(e,d,c,h)}};var xg="@",H1="@.disabled",Ug=class{constructor(e,n,r,i){this.namespaceId=e,this.delegate=n,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,r,i=!0){this.delegate.insertBefore(e,n,r),this.engine.onInsert(this.namespaceId,n,e,i)}removeChild(e,n,r){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,r,i){this.delegate.setAttribute(e,n,r,i)}removeAttribute(e,n,r){this.delegate.removeAttribute(e,n,r)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,r,i){this.delegate.setStyle(e,n,r,i)}removeStyle(e,n,r){this.delegate.removeStyle(e,n,r)}setProperty(e,n,r){n.charAt(0)==xg&&n==H1?this.disableAnimations(e,!!r):this.delegate.setProperty(e,n,r)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,r){return this.delegate.listen(e,n,r)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}},iC=class extends Ug{constructor(e,n,r,i,s){super(n,r,i,s),this.factory=e,this.namespaceId=n}setProperty(e,n,r){n.charAt(0)==xg?n.charAt(1)=="."&&n==H1?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,n.slice(1),r):this.delegate.setProperty(e,n,r)}listen(e,n,r){if(n.charAt(0)==xg){let i=EQ(e),s=n.slice(1),o="";return s.charAt(0)!=xg&&([s,o]=IQ(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,r,a)})}return this.delegate.listen(e,n,r)}};function EQ(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function IQ(t){let e=t.indexOf("."),n=t.substring(0,e),r=t.slice(e+1);return[n,r]}var $g=class{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,n.onRemovalComplete=(i,s)=>{let o=s?.parentNode(i);o&&s.removeChild(o,i)}}createRenderer(e,n){let r="",i=this.delegate.createRenderer(e,n);if(!e||!n?.data?.animation){let l=this._rendererCache,u=l.get(i);if(!u){let d=()=>l.delete(i);u=new Ug(r,i,this.engine,d),l.set(i,u)}return u}let s=n.id,o=n.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return n.data.animation.forEach(a),new iC(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>n(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([n,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var DQ=(()=>{let e=class e extends yc{constructor(r,i,s){super(r,i,s,b(ia,{optional:!0}))}ngOnDestroy(){this.flush()}};e.\u0275fac=function(i){return new(i||e)(y(Y),y(bo),y(Do))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function CQ(){return new Og}function TQ(t,e,n){return new $g(t,e,n)}var q1=[{provide:Do,useFactory:CQ},{provide:yc,useClass:DQ},{provide:Ss,useFactory:TQ,deps:[Bf,yc,L]}],z1=[{provide:bo,useFactory:()=>new Bg},{provide:Gt,useValue:"BrowserAnimations"},...q1],SQ=[{provide:bo,useClass:cC},{provide:Gt,useValue:"NoopAnimations"},...q1],Eue=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:r.disableAnimations?SQ:z1}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({providers:z1,imports:[UM]});let t=e;return t})();function AQ(t){return t!=null&&`${t}`!="false"}function Ed(t,e=0){return RQ(t)?Number(t):e}function RQ(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function _c(t){return Array.isArray(t)?t:[t]}function Je(t){return t==null?"":typeof t=="string"?t:`${t}px`}function ei(t){return t instanceof ve?t.nativeElement:t}function Cue(t,e=/\s+/){let n=[];if(t!=null){let r=Array.isArray(t)?t:`${t}`.split(e);for(let i of r){let s=`${i}`.trim();s&&n.push(s)}}return n}var pC;try{pC=typeof Intl<"u"&&Intl.v8BreakIterator}catch{pC=!1}var Ke=(()=>{let e=class e{constructor(r){this._platformId=r,this.isBrowser=this._platformId?uw(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||pC)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(i){return new(i||e)(y(yn))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var vc,G1=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Nue(){if(vc)return vc;if(typeof document!="object"||!document)return vc=new Set(G1),vc;let t=document.createElement("input");return vc=new Set(G1.filter(e=>(t.setAttribute("type",e),t.type===e))),vc}var Id;function MQ(){if(Id==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Id=!0}))}finally{Id=Id||!1}return Id}function wc(t){return MQ()?t:!!t.capture}var Co;function W1(){if(Co==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Co=!1,Co;if("scrollBehavior"in document.documentElement.style)Co=!0;else{let t=Element.prototype.scrollTo;t?Co=!/\{\s*\[native code\]\s*\}/.test(t.toString()):Co=!1}}return Co}var fC;function xQ(){if(fC==null){let t=typeof document<"u"?document.head:null;fC=!!(t&&(t.createShadowRoot||t.attachShadow))}return fC}function K1(t){if(xQ()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Ec(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function Gn(t){return t.composedPath?t.composedPath()[0]:t.target}function bd(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var NQ=new x("cdk-dir-doc",{providedIn:"root",factory:PQ});function PQ(){return b(Y)}var OQ=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function kQ(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?OQ.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Cd=(()=>{let e=class e{constructor(r){if(this.value="ltr",this.change=new Ce,r){let i=r.body?r.body.dir:null,s=r.documentElement?r.documentElement.dir:null;this.value=kQ(i||s||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(i){return new(i||e)(y(NQ,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var os=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({});let t=e;return t})();var LQ=20,Y1=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this._platform=i,this._scrolled=new H,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(r){this.scrollContainers.has(r)||this.scrollContainers.set(r,r.elementScrolled().subscribe(()=>this._scrolled.next(r)))}deregister(r){let i=this.scrollContainers.get(r);i&&(i.unsubscribe(),this.scrollContainers.delete(r))}scrolled(r=LQ){return this._platform.isBrowser?new W(i=>{this._globalSubscription||this._addGlobalListener();let s=r>0?this._scrolled.pipe(vh(r)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):z()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((r,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(r,i){let s=this.getAncestorScrollContainers(r);return this.scrolled(i).pipe(Fe(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(r){let i=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,r)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(r,i){let s=ei(i),o=r.getElementRef().nativeElement;do if(s==o)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let r=this._getWindow();return Nc(r.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(i){return new(i||e)(y(L),y(Ke),y(Y,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var VQ=20,mC=(()=>{let e=class e{constructor(r,i,s){this._platform=r,this._change=new H,this._changeListener=o=>{this._change.next(o)},this._document=s,i.runOutsideAngular(()=>{if(r.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let r=this._getWindow();r.removeEventListener("resize",this._changeListener),r.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let r={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),r}getViewportRect(){let r=this.getViewportScrollPosition(),{width:i,height:s}=this.getViewportSize();return{top:r.top,left:r.left,bottom:r.top+s,right:r.left+i,height:s,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let r=this._document,i=this._getWindow(),s=r.documentElement,o=s.getBoundingClientRect(),a=-o.top||r.body.scrollTop||i.scrollY||s.scrollTop||0,c=-o.left||r.body.scrollLeft||i.scrollX||s.scrollLeft||0;return{top:a,left:c}}change(r=VQ){return r>0?this._change.pipe(vh(r)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let r=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:r.innerWidth,height:r.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(i){return new(i||e)(y(Ke),y(L),y(Y,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Q1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({});let t=e;return t})(),gC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({imports:[os,Q1,os,Q1]});let t=e;return t})();var Td=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Ic=class extends Td{constructor(e,n,r,i,s){super(),this.component=e,this.viewContainerRef=n,this.injector=r,this.componentFactoryResolver=i,this.projectableNodes=s}},bc=class extends Td{constructor(e,n,r,i){super(),this.templateRef=e,this.viewContainerRef=n,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},yC=class extends Td{constructor(e){super(),this.element=e instanceof ve?e.nativeElement:e}},Dc=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Ic)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof bc)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof yC)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Hg=class extends Dc{constructor(e,n,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){let r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||Ne.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let n=e.viewContainerRef,r=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=n.indexOf(r);i!==-1&&n.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Sd=(()=>{let e=class e extends Dc{constructor(r,i,s){super(),this._componentFactoryResolver=r,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Ce,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}get portal(){return this._attachedPortal}set portal(r){this.hasAttached()&&!r&&!this._isInitialized||(this.hasAttached()&&super.detach(),r&&super.attach(r),this._attachedPortal=r||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(r){r.setAttachedHost(this);let i=r.viewContainerRef!=null?r.viewContainerRef:this._viewContainerRef,o=(r.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(r.component),a=i.createComponent(o,i.length,r.injector||i.injector,r.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=r,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(r){r.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(r.templateRef,r.context,{injector:r.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=r,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){let r=this._viewContainerRef.element.nativeElement;return r.nodeType===r.ELEMENT_NODE?r:r.parentNode}};e.\u0275fac=function(i){return new(i||e)(S(Ei),S(_n),S(Y))},e.\u0275dir=ye({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[fe.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Ye]});let t=e;return t})();var zg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({});let t=e;return t})();function qg(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var Z1=W1(),_C=class{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Je(-this._previousScrollPosition.left),e.style.top=Je(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,r=e.style,i=n.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Z1&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Z1&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,r=this._viewportRuler.getViewportSize();return n.scrollHeight>r.height||n.scrollWidth>r.width}};var vC=class{constructor(e,n,r,i){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Fe(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Gg=class{enable(){}disable(){}attach(){}};function wC(t,e){return e.some(n=>{let r=t.bottom<n.top,i=t.top>n.bottom,s=t.right<n.left,o=t.left>n.right;return r||i||s||o})}function X1(t,e){return e.some(n=>{let r=t.top<n.top,i=t.bottom>n.bottom,s=t.left<n.left,o=t.right>n.right;return r||i||s||o})}var EC=class{constructor(e,n,r,i){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();wC(n,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},BQ=(()=>{let e=class e{constructor(r,i,s,o){this._scrollDispatcher=r,this._viewportRuler=i,this._ngZone=s,this.noop=()=>new Gg,this.close=a=>new vC(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new _C(this._viewportRuler,this._document),this.reposition=a=>new EC(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}};e.\u0275fac=function(i){return new(i||e)(y(Y1),y(mC),y(L),y(Y))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ad=class{constructor(e){if(this.scrollStrategy=new Gg,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let n=Object.keys(e);for(let r of n)e[r]!==void 0&&(this[r]=e[r])}}};var IC=class{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var rL=(()=>{let e=class e{constructor(r){this._attachedOverlays=[],this._document=r}ngOnDestroy(){this.detach()}add(r){this.remove(r),this._attachedOverlays.push(r)}remove(r){let i=this._attachedOverlays.indexOf(r);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(i){return new(i||e)(y(Y))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),UQ=(()=>{let e=class e extends rL{constructor(r,i){super(r),this._ngZone=i,this._keydownListener=s=>{let o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){let c=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(s)):c.next(s);break}}}add(r){super.add(r),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(i){return new(i||e)(y(Y),y(L,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$Q=(()=>{let e=class e extends rL{constructor(r,i,s){super(r),this._platform=i,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Gn(o)},this._clickListener=o=>{let a=Gn(o),c=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let u=l.length-1;u>-1;u--){let d=l[u];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(a)||d.overlayElement.contains(c))break;let h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(o)):h.next(o)}}}add(r){if(super.add(r),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let r=this._document.body;r.removeEventListener("pointerdown",this._pointerDownListener,!0),r.removeEventListener("click",this._clickListener,!0),r.removeEventListener("auxclick",this._clickListener,!0),r.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(r.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(r){r.addEventListener("pointerdown",this._pointerDownListener,!0),r.addEventListener("click",this._clickListener,!0),r.addEventListener("auxclick",this._clickListener,!0),r.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(i){return new(i||e)(y(Y),y(Ke),y(L,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Cc=(()=>{let e=class e{constructor(r,i){this._platform=i,this._document=r}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let r="cdk-overlay-container";if(this._platform.isBrowser||bd()){let s=this._document.querySelectorAll(`.${r}[platform="server"], .${r}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}let i=this._document.createElement("div");i.classList.add(r),bd()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}};e.\u0275fac=function(i){return new(i||e)(y(Y),y(Ke))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ti=class{constructor(e,n,r,i,s,o,a,c,l,u=!1){this._portalOutlet=e,this._host=n,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new H,this._attachments=new H,this._detachments=new H,this._locationChanges=Ae.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new H,this._outsidePointerEvents=new H,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(He(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=I(I({},this._config),e),this._updateElementSize()}setDirection(e){this._config=pe(I({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Je(this._config.width),e.height=Je(this._config.height),e.minWidth=Je(this._config.minWidth),e.minHeight=Je(this._config.minHeight),e.maxWidth=Je(this._config.maxWidth),e.maxHeight=Je(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,r){let i=_c(n||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let e=this._ngZone.onStable.pipe(Jn(Pc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},J1="cdk-overlay-connected-position-bounding-box",HQ=/([A-Za-z%]+)$/,bC=class{get positions(){return this._preferredPositions}constructor(e,n,r,i,s){this._viewportRuler=n,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new H,this._resizeSubscription=Ae.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(J1),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[],o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,i,a),l=this._getOverlayPoint(c,n,a),u=this._getOverlayFit(l,n,r,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(u,l,r)){s.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(s.length){let a=null,c=-1;for(let l of s){let u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&To(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(J1),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,r){let i;if(r.originX=="center")i=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i=r.originX=="start"?o:a}n.left<0&&(i-=n.left);let s;return r.originY=="center"?s=e.top+e.height/2:s=r.originY=="top"?e.top:e.bottom,n.top<0&&(s-=n.top),{x:i,y:s}}_getOverlayPoint(e,n,r){let i;r.overlayX=="center"?i=-n.width/2:r.overlayX==="start"?i=this._isRtl()?-n.width:0:i=this._isRtl()?0:-n.width;let s;return r.overlayY=="center"?s=-n.height/2:s=r.overlayY=="top"?0:-n.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,n,r,i){let s=tL(n),{x:o,y:a}=e,c=this._getOffset(i,"x"),l=this._getOffset(i,"y");c&&(o+=c),l&&(a+=l);let u=0-o,d=o+s.width-r.width,h=0-a,f=a+s.height-r.height,m=this._subtractOverflows(s.width,u,d),g=this._subtractOverflows(s.height,h,f),v=m*g;return{visibleArea:v,isCompletelyWithinViewport:s.width*s.height===v,fitsInViewportVertically:g===s.height,fitsInViewportHorizontally:m==s.width}}_canFitWithFlexibleDimensions(e,n,r){if(this._hasFlexibleDimensions){let i=r.bottom-n.y,s=r.right-n.x,o=eL(this._overlayRef.getConfig().minHeight),a=eL(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportVertically||o!=null&&o<=i,l=e.fitsInViewportHorizontally||a!=null&&a<=s;return c&&l}return!1}_pushOverlayOnScreen(e,n,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let i=tL(n),s=this._viewportRect,o=Math.max(e.x+i.width-s.width,0),a=Math.max(e.y+i.height-s.height,0),c=Math.max(s.top-r.top-e.y,0),l=Math.max(s.left-r.left-e.x,0),u=0,d=0;return i.width<=s.width?u=l||-o:u=e.x<this._viewportMargin?s.left-r.left-e.x:0,i.height<=s.height?d=c||-a:d=e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){let r=this._getScrollVisibility(),i=new IC(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),r,i=e.overlayY;e.overlayX==="center"?r="center":this._isRtl()?r=e.overlayX==="start"?"right":"left":r=e.overlayX==="start"?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,n){let r=this._viewportRect,i=this._isRtl(),s,o,a;if(n.overlayY==="top")o=e.y,s=r.height-o+this._viewportMargin;else if(n.overlayY==="bottom")a=r.height-e.y+this._viewportMargin*2,s=r.height-a+this._viewportMargin;else{let f=Math.min(r.bottom-e.y+r.top,e.y),m=this._lastBoundingBoxSize.height;s=f*2,o=e.y-f,s>m&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-m/2)}let c=n.overlayX==="start"&&!i||n.overlayX==="end"&&i,l=n.overlayX==="end"&&!i||n.overlayX==="start"&&i,u,d,h;if(l)h=r.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if(c)d=e.x,u=r.right-e.x;else{let f=Math.min(r.right-e.x+r.left,e.x),m=this._lastBoundingBoxSize.width;u=f*2,d=e.x-f,u>m&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-m/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,n){let r=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));let i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=Je(r.height),i.top=Je(r.top),i.bottom=Je(r.bottom),i.width=Je(r.width),i.left=Je(r.left),i.right=Je(r.right),n.overlayX==="center"?i.alignItems="center":i.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?i.justifyContent="center":i.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",s&&(i.maxHeight=Je(s)),o&&(i.maxWidth=Je(o))}this._lastBoundingBoxSize=r,To(this._boundingBox.style,i)}_resetBoundingBoxStyles(){To(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){To(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){let u=this._viewportRuler.getViewportScrollPosition();To(r,this._getExactOverlayY(n,e,u)),To(r,this._getExactOverlayX(n,e,u))}else r.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=Je(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=Je(o.maxWidth):s&&(r.maxWidth="")),To(this._pane.style,r)}_getExactOverlayY(e,n,r){let i={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;i.bottom=`${o-(s.y+this._overlayRect.height)}px`}else i.top=Je(s.y);return i}_getExactOverlayX(e,n,r){let i={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;i.right=`${a-(s.x+this._overlayRect.width)}px`}else i.left=Je(s.x);return i}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:X1(e,r),isOriginOutsideView:wC(e,r),isOverlayClipped:X1(n,r),isOverlayOutsideView:wC(n,r)}}_subtractOverflows(e,...n){return n.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&_c(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof ve)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+n,height:r,width:n}}};function To(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function eL(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(HQ);return!n||n==="px"?parseFloat(e):null}return t||null}function tL(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}var nL="cdk-global-overlay-wrapper",DC=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(nL),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,c=(i==="100%"||i==="100vw")&&(!o||o==="100%"||o==="100vw"),l=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",m="",g="";c?g="flex-start":u==="center"?(g="center",h?m=d:f=d):h?u==="left"||u==="end"?(g="flex-end",f=d):(u==="right"||u==="start")&&(g="flex-start",m=d):u==="left"||u==="start"?(g="flex-start",f=d):(u==="right"||u==="end")&&(g="flex-end",m=d),e.position=this._cssPosition,e.marginLeft=c?"0":f,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":m,n.justifyContent=g,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,r=n.style;n.classList.remove(nL),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},zQ=(()=>{let e=class e{constructor(r,i,s,o){this._viewportRuler=r,this._document=i,this._platform=s,this._overlayContainer=o}global(){return new DC}flexibleConnectedTo(r){return new bC(r,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(i){return new(i||e)(y(mC),y(Y),y(Ke),y(Cc))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qQ=0,Wn=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,u,d,h,f,m){this.scrollStrategies=r,this._overlayContainer=i,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=u,this._directionality=d,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=m}create(r){let i=this._createHostElement(),s=this._createPaneElement(i),o=this._createPortalOutlet(s),a=new Ad(r);return a.direction=a.direction||this._directionality.value,new ti(o,i,s,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(r){let i=this._document.createElement("div");return i.id=`cdk-overlay-${qQ++}`,i.classList.add("cdk-overlay-pane"),r.appendChild(i),i}_createHostElement(){let r=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalOutlet(r){return this._appRef||(this._appRef=this._injector.get(Di)),new Hg(r,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(i){return new(i||e)(y(BQ),y(Cc),y(Ei),y(zQ),y(UQ),y(Ne),y(L),y(Y),y(Cd),y(hr),y($Q),y(Gt,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var GQ=new x("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=b(Wn);return()=>t.scrollStrategies.reposition()}});function WQ(t){return()=>t.scrollStrategies.reposition()}var KQ={provide:GQ,deps:[Wn],useFactory:WQ},iL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({providers:[Wn,KQ],imports:[os,zg,gC,gC]});let t=e;return t})();var QQ=(()=>{let e=class e{create(r){return typeof MutationObserver>"u"?null:new MutationObserver(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var oL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({providers:[QQ]});let t=e;return t})();var aL=new Set,So,YQ=(()=>{let e=class e{constructor(r,i){this._platform=r,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):XQ}matchMedia(r){return(this._platform.WEBKIT||this._platform.BLINK)&&ZQ(r,this._nonce),this._matchMedia(r)}};e.\u0275fac=function(i){return new(i||e)(y(Ke),y(il,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ZQ(t,e){if(!aL.has(t))try{So||(So=document.createElement("style"),e&&(So.nonce=e),So.setAttribute("type","text/css"),document.head.appendChild(So)),So.sheet&&(So.sheet.insertRule(`@media ${t} {body{ }}`,0),aL.add(t))}catch(n){console.error(n)}}function XQ(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var lL=(()=>{let e=class e{constructor(r,i){this._mediaMatcher=r,this._zone=i,this._queries=new Map,this._destroySubject=new H}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(r){return cL(_c(r)).some(s=>this._registerQuery(s).mql.matches)}observe(r){let s=cL(_c(r)).map(a=>this._registerQuery(a).observable),o=ms(s);return o=Zn(o.pipe(He(1)),o.pipe(Lc(1),Eh(0))),o.pipe(se(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(r){if(this._queries.has(r))return this._queries.get(r);let i=this._mediaMatcher.matchMedia(r),o={observable:new W(a=>{let c=l=>this._zone.run(()=>a.next(l));return i.addListener(c),()=>{i.removeListener(c)}}).pipe(Nn(i),se(({matches:a})=>({query:r,matches:a})),Jn(this._destroySubject)),mql:i};return this._queries.set(r,o),o}};e.\u0275fac=function(i){return new(i||e)(y(YQ),y(L))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cL(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var Rd=(()=>{let e=class e{constructor(r){this._platform=r}isDisabled(r){return r.hasAttribute("disabled")}isVisible(r){return e7(r)&&getComputedStyle(r).visibility==="visible"}isTabbable(r){if(!this._platform.isBrowser)return!1;let i=JQ(c7(r));if(i&&(uL(i)===-1||!this.isVisible(i)))return!1;let s=r.nodeName.toLowerCase(),o=uL(r);return r.hasAttribute("contenteditable")?o!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!o7(r)?!1:s==="audio"?r.hasAttribute("controls")?o!==-1:!1:s==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||r.hasAttribute("controls"):r.tabIndex>=0}isFocusable(r,i){return a7(r)&&!this.isDisabled(r)&&(i?.ignoreVisibility||this.isVisible(r))}};e.\u0275fac=function(i){return new(i||e)(y(Ke))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function JQ(t){try{return t.frameElement}catch{return null}}function e7(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function t7(t){let e=t.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function n7(t){return i7(t)&&t.type=="hidden"}function r7(t){return s7(t)&&t.hasAttribute("href")}function i7(t){return t.nodeName.toLowerCase()=="input"}function s7(t){return t.nodeName.toLowerCase()=="a"}function fL(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let e=t.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function uL(t){if(!fL(t))return null;let e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function o7(t){let e=t.nodeName.toLowerCase(),n=e==="input"&&t.type;return n==="text"||n==="password"||e==="select"||e==="textarea"}function a7(t){return n7(t)?!1:t7(t)||r7(t)||t.hasAttribute("contenteditable")||fL(t)}function c7(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var TC=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,r,i,s=!1){this._element=e,this._checker=n,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let r=this._getFirstTabbableElement(n);return r?.focus(e),!!r}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){let n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let r=0;r<n.length;r++){let i=n[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let r=n.length-1;r>=0;r--){let i=n[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[r]):null;if(i)return i}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(He(1)).subscribe(e)}},Md=(()=>{let e=class e{constructor(r,i,s){this._checker=r,this._ngZone=i,this._document=s}create(r,i=!1){return new TC(r,this._checker,this._ngZone,this._document,i)}};e.\u0275fac=function(i){return new(i||e)(y(Rd),y(L),y(Y))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Yde=(()=>{let e=class e{get enabled(){return this.focusTrap?.enabled||!1}set enabled(r){this.focusTrap&&(this.focusTrap.enabled=r)}constructor(r,i,s){this._elementRef=r,this._focusTrapFactory=i,this._previouslyFocusedElement=null,b(Ke).isBrowser&&(this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0))}ngOnDestroy(){this.focusTrap?.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap?.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap&&!this.focusTrap.hasAttached()&&this.focusTrap.attachAnchors()}ngOnChanges(r){let i=r.autoCapture;i&&!i.firstChange&&this.autoCapture&&this.focusTrap?.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=Ec(),this.focusTrap?.focusInitialElementWhenReady()}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(Md),S(Y))},e.\u0275dir=ye({type:e,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:[fe.HasDecoratorInputTransform,"cdkTrapFocus","enabled",wn],autoCapture:[fe.HasDecoratorInputTransform,"cdkTrapFocusAutoCapture","autoCapture",wn]},exportAs:["cdkTrapFocus"],standalone:!0,features:[jr,Ft]});let t=e;return t})();function SC(t){return t.buttons===0||t.detail===0}function AC(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var l7=new x("cdk-input-modality-detector-options"),u7={ignoreKeys:[18,17,224,91,16]},pL=650,Tc=wc({passive:!0,capture:!0}),d7=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(r,i,s,o){this._platform=r,this._mostRecentTarget=null,this._modality=new Qe(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Gn(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<pL||(this._modality.next(SC(a)?"keyboard":"mouse"),this._mostRecentTarget=Gn(a))},this._onTouchstart=a=>{if(AC(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Gn(a)},this._options=I(I({},u7),o),this.modalityDetected=this._modality.pipe(Lc(1)),this.modalityChanged=this.modalityDetected.pipe(kc()),r.isBrowser&&i.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Tc),s.addEventListener("mousedown",this._onMousedown,Tc),s.addEventListener("touchstart",this._onTouchstart,Tc)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Tc),document.removeEventListener("mousedown",this._onMousedown,Tc),document.removeEventListener("touchstart",this._onTouchstart,Tc))}};e.\u0275fac=function(i){return new(i||e)(y(Ke),y(L),y(Y),y(l7,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Kg=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(Kg||{}),h7=new x("cdk-focus-monitor-default-options"),Wg=wc({passive:!0,capture:!0}),xd=(()=>{let e=class e{constructor(r,i,s,o,a){this._ngZone=r,this._platform=i,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new H,this._rootNodeFocusAndBlurListener=c=>{let l=Gn(c);for(let u=l;u;u=u.parentElement)c.type==="focus"?this._onFocus(c,u):this._onBlur(c,u)},this._document=o,this._detectionMode=a?.detectionMode||Kg.IMMEDIATE}monitor(r,i=!1){let s=ei(r);if(!this._platform.isBrowser||s.nodeType!==1)return z();let o=K1(s)||this._getDocument(),a=this._elementInfo.get(s);if(a)return i&&(a.checkChildren=!0),a.subject;let c={checkChildren:i,subject:new H,rootNode:o};return this._elementInfo.set(s,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(r){let i=ei(r),s=this._elementInfo.get(i);s&&(s.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(s))}focusVia(r,i,s){let o=ei(r),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([c,l])=>this._originChanged(c,i,l)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((r,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(r){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(r)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:r&&this._isLastInteractionFromInputLabel(r)?"mouse":"program"}_shouldBeAttributedToTouch(r){return this._detectionMode===Kg.EVENTUAL||!!r?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(r,i){r.classList.toggle("cdk-focused",!!i),r.classList.toggle("cdk-touch-focused",i==="touch"),r.classList.toggle("cdk-keyboard-focused",i==="keyboard"),r.classList.toggle("cdk-mouse-focused",i==="mouse"),r.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(r,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=r,this._originFromTouchInteraction=r==="touch"&&i,this._detectionMode===Kg.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?pL:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(r,i){let s=this._elementInfo.get(i),o=Gn(r);!s||!s.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),s)}_onBlur(r,i){let s=this._elementInfo.get(i);!s||s.checkChildren&&r.relatedTarget instanceof Node&&i.contains(r.relatedTarget)||(this._setClasses(i),this._emitOrigin(s,null))}_emitOrigin(r,i){r.subject.observers.length&&this._ngZone.run(()=>r.subject.next(i))}_registerGlobalListeners(r){if(!this._platform.isBrowser)return;let i=r.rootNode,s=this._rootNodeFocusListenerCount.get(i)||0;s||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Wg),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Wg)}),this._rootNodeFocusListenerCount.set(i,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Jn(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(r){let i=r.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let s=this._rootNodeFocusListenerCount.get(i);s>1?this._rootNodeFocusListenerCount.set(i,s-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Wg),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Wg),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(r,i,s){this._setClasses(r,i),this._emitOrigin(s,i),this._lastFocusOrigin=i}_getClosestElementsInfo(r){let i=[];return this._elementInfo.forEach((s,o)=>{(o===r||s.checkChildren&&o.contains(r))&&i.push([o,s])}),i}_isLastInteractionFromInputLabel(r){let{_mostRecentTarget:i,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!i||i===r||r.nodeName!=="INPUT"&&r.nodeName!=="TEXTAREA"||r.disabled)return!1;let o=r.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(i))return!0}return!1}};e.\u0275fac=function(i){return new(i||e)(y(L),y(Ke),y(d7),y(Y,8),y(h7,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Zde=(()=>{let e=class e{constructor(r,i){this._elementRef=r,this._focusMonitor=i,this._focusOrigin=null,this.cdkFocusChange=new Ce}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let r=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(r,r.nodeType===1&&r.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>{this._focusOrigin=i,this.cdkFocusChange.emit(i)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(xd))},e.\u0275dir=ye({type:e,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"],standalone:!0});let t=e;return t})(),Ao=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(Ao||{}),dL="cdk-high-contrast-black-on-white",hL="cdk-high-contrast-white-on-black",CC="cdk-high-contrast-active",RC=(()=>{let e=class e{constructor(r,i){this._platform=r,this._document=i,this._breakpointSubscription=b(lL).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Ao.NONE;let r=this._document.createElement("div");r.style.backgroundColor="rgb(1,2,3)",r.style.position="absolute",this._document.body.appendChild(r);let i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(r):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(r.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Ao.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Ao.BLACK_ON_WHITE}return Ao.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let r=this._document.body.classList;r.remove(CC,dL,hL),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Ao.BLACK_ON_WHITE?r.add(CC,dL):i===Ao.WHITE_ON_BLACK&&r.add(CC,hL)}}};e.\u0275fac=function(i){return new(i||e)(y(Ke),y(Y))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Xde=(()=>{let e=class e{constructor(r){r._applyBodyHighContrastModeCssClasses()}};e.\u0275fac=function(i){return new(i||e)(y(RC))},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({imports:[oL]});let t=e;return t})();function f7(t,e){}var Ro=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var PC=(()=>{let e=class e extends Dc{constructor(r,i,s,o,a,c,l,u){super(),this._elementRef=r,this._focusTrapFactory=i,this._config=o,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=l,this._focusMonitor=u,this._platform=b(Ke),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=b(vn),this.attachDomPortal=d=>{this._portalOutlet.hasAttached();let h=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),h},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(r){this._ariaLabelledByQueue.push(r),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(r){let i=this._ariaLabelledByQueue.indexOf(r);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(r){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(r);return this._contentAttached(),i}attachTemplatePortal(r){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(r);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(r,i){this._interactivityChecker.isFocusable(r)||(r.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{r.removeEventListener("blur",s),r.removeEventListener("mousedown",s),r.removeAttribute("tabindex")};r.addEventListener("blur",s),r.addEventListener("mousedown",s)})),r.focus(i)}_focusByCssSelector(r,i){let s=this._elementRef.nativeElement.querySelector(r);s&&this._forceFocus(s,i)}_trapFocus(){let r=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||r.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}}_restoreFocus(){let r=this._config.restoreFocus,i=null;if(typeof r=="string"?i=this._document.querySelector(r):typeof r=="boolean"?i=r?this._elementFocusedBeforeDialogWasOpened:null:r&&(i=r),this._config.restoreFocus&&i&&typeof i.focus=="function"){let s=Ec(),o=this._elementRef.nativeElement;(!s||s===this._document.body||s===o||o.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let r=this._elementRef.nativeElement,i=Ec();return r===i||r.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Ec()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(Md),S(Y,8),S(Ro),S(Rd),S(L),S(ti),S(xd))},e.\u0275cmp=or({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(i,s){if(i&1&&Rf(Sd,7),i&2){let o;cl(o=ll())&&(s._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,s){i&2&&lr("id",s._config.id||null)("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null)},standalone:!0,features:[Ye,ur],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,s){i&1&&Xt(0,f7,0,0,"ng-template",0)},dependencies:[Sd],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2});let t=e;return t})(),Nd=class{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new H,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(r=>{r.keyCode===27&&!this.disableClose&&!qg(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(e,n){if(this.containerInstance){let r=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},p7=new x("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=b(Wn);return()=>t.scrollStrategies.block()}}),m7=new x("DialogData"),g7=new x("DefaultDialogConfig");var y7=0,mL=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(r,i,s,o,a,c){this._overlay=r,this._injector=i,this._defaultOptions=s,this._parentDialog=o,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new H,this._afterOpenedAtThisLevel=new H,this._ariaHiddenElements=new Map,this.afterAllClosed=ui(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Nn(void 0))),this._scrollStrategy=c}open(r,i){let s=this._defaultOptions||new Ro;i=I(I({},s),i),i.id=i.id||`cdk-dialog-${y7++}`,i.id&&this.getDialogById(i.id);let o=this._getOverlayConfig(i),a=this._overlay.create(o),c=new Nd(a,i),l=this._attachContainer(a,c,i);return c.containerInstance=l,this._attachDialogContent(r,c,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){xC(this.openDialogs,r=>r.close())}getDialogById(r){return this.openDialogs.find(i=>i.id===r)}ngOnDestroy(){xC(this._openDialogsAtThisLevel,r=>{r.config.closeOnDestroy===!1&&this._removeOpenDialog(r,!1)}),xC(this._openDialogsAtThisLevel,r=>r.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(r){let i=new Ad({positionStrategy:r.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:r.scrollStrategy||this._scrollStrategy(),panelClass:r.panelClass,hasBackdrop:r.hasBackdrop,direction:r.direction,minWidth:r.minWidth,minHeight:r.minHeight,maxWidth:r.maxWidth,maxHeight:r.maxHeight,width:r.width,height:r.height,disposeOnNavigation:r.closeOnNavigation});return r.backdropClass&&(i.backdropClass=r.backdropClass),i}_attachContainer(r,i,s){let o=s.injector||s.viewContainerRef?.injector,a=[{provide:Ro,useValue:s},{provide:Nd,useValue:i},{provide:ti,useValue:r}],c;s.container?typeof s.container=="function"?c=s.container:(c=s.container.type,a.push(...s.container.providers(s))):c=PC;let l=new Ic(c,s.viewContainerRef,Ne.create({parent:o||this._injector,providers:a}),s.componentFactoryResolver);return r.attach(l).instance}_attachDialogContent(r,i,s,o){if(r instanceof Ln){let a=this._createInjector(o,i,s,void 0),c={$implicit:o.data,dialogRef:i};o.templateContext&&(c=I(I({},c),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),s.attachTemplatePortal(new bc(r,null,c,a))}else{let a=this._createInjector(o,i,s,this._injector),c=s.attachComponentPortal(new Ic(r,o.viewContainerRef,a,o.componentFactoryResolver));i.componentRef=c,i.componentInstance=c.instance}}_createInjector(r,i,s,o){let a=r.injector||r.viewContainerRef?.injector,c=[{provide:m7,useValue:r.data},{provide:Nd,useValue:i}];return r.providers&&(typeof r.providers=="function"?c.push(...r.providers(i,r,s)):c.push(...r.providers)),r.direction&&(!a||!a.get(Cd,null,{optional:!0}))&&c.push({provide:Cd,useValue:{value:r.direction,change:z()}}),Ne.create({parent:a||o,providers:c})}_removeOpenDialog(r,i){let s=this.openDialogs.indexOf(r);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let r=this._overlayContainer.getContainerElement();if(r.parentElement){let i=r.parentElement.children;for(let s=i.length-1;s>-1;s--){let o=i[s];o!==r&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}};e.\u0275fac=function(i){return new(i||e)(y(Wn),y(Ne),y(g7,8),y(e,12),y(Cc),y(p7))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function xC(t,e){let n=t.length;for(;n--;)e(t[n])}function _7(){return!0}var v7=new x("mat-sanity-checks",{providedIn:"root",factory:_7}),gL=(()=>{let e=class e{constructor(r,i,s){this._sanityChecks=i,this._document=s,this._hasDoneGlobalChecks=!1,r._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(r){return bd()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[r]}};e.\u0275fac=function(i){return new(i||e)(y(RC),y(v7,8),y(Y))},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({imports:[os,os]});let t=e;return t})();var yL=class{constructor(e,n,r,i,s){this._defaultMatcher=e,this.ngControl=n,this._parentFormGroup=r,this._parentForm=i,this._stateChanges=s,this.errorState=!1}updateErrorState(){let e=this.errorState,n=this._parentFormGroup||this._parentForm,r=this.matcher||this._defaultMatcher,i=this.ngControl?this.ngControl.control:null,s=typeof r?.isErrorState=="function"?r.isErrorState(i,n):!1;s!==e&&(this.errorState=s,this._stateChanges.next())}};var _L=new x("MAT_DATE_LOCALE",{providedIn:"root",factory:w7});function w7(){return b(pa)}var Yg=class{constructor(){this._localeChanges=new H,this.localeChanges=this._localeChanges}getValidDateOrNull(e){return this.isDateInstance(e)&&this.isValid(e)?e:null}deserialize(e){return e==null||this.isDateInstance(e)&&this.isValid(e)?e:this.invalid()}setLocale(e){this.locale=e,this._localeChanges.next()}compareDate(e,n){return this.getYear(e)-this.getYear(n)||this.getMonth(e)-this.getMonth(n)||this.getDate(e)-this.getDate(n)}sameDate(e,n){if(e&&n){let r=this.isValid(e),i=this.isValid(n);return r&&i?!this.compareDate(e,n):r==i}return e==n}clampDate(e,n,r){return n&&this.compareDate(e,n)<0?n:r&&this.compareDate(e,r)>0?r:e}},E7=new x("mat-date-formats"),I7=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function OC(t,e){let n=Array(t);for(let r=0;r<t;r++)n[r]=e(r);return n}var b7=(()=>{let e=class e extends Yg{constructor(r){super(),this.useUtcForDisplay=!1,this._matDateLocale=b(_L,{optional:!0}),r!==void 0&&(this._matDateLocale=r),super.setLocale(this._matDateLocale)}getYear(r){return r.getFullYear()}getMonth(r){return r.getMonth()}getDate(r){return r.getDate()}getDayOfWeek(r){return r.getDay()}getMonthNames(r){let i=new Intl.DateTimeFormat(this.locale,{month:r,timeZone:"utc"});return OC(12,s=>this._format(i,new Date(2017,s,1)))}getDateNames(){let r=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return OC(31,i=>this._format(r,new Date(2017,0,i+1)))}getDayOfWeekNames(r){let i=new Intl.DateTimeFormat(this.locale,{weekday:r,timeZone:"utc"});return OC(7,s=>this._format(i,new Date(2017,0,s+1)))}getYearName(r){let i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,r)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(r){return this.getDate(this._createDateWithOverflow(this.getYear(r),this.getMonth(r)+1,0))}clone(r){return new Date(r.getTime())}createDate(r,i,s){let o=this._createDateWithOverflow(r,i,s);return o.getMonth()!=i,o}today(){return new Date}parse(r,i){return typeof r=="number"?new Date(r):r?new Date(Date.parse(r)):null}format(r,i){if(!this.isValid(r))throw Error("NativeDateAdapter: Cannot format invalid date.");let s=new Intl.DateTimeFormat(this.locale,pe(I({},i),{timeZone:"utc"}));return this._format(s,r)}addCalendarYears(r,i){return this.addCalendarMonths(r,i*12)}addCalendarMonths(r,i){let s=this._createDateWithOverflow(this.getYear(r),this.getMonth(r)+i,this.getDate(r));return this.getMonth(s)!=((this.getMonth(r)+i)%12+12)%12&&(s=this._createDateWithOverflow(this.getYear(s),this.getMonth(s),0)),s}addCalendarDays(r,i){return this._createDateWithOverflow(this.getYear(r),this.getMonth(r),this.getDate(r)+i)}toIso8601(r){return[r.getUTCFullYear(),this._2digit(r.getUTCMonth()+1),this._2digit(r.getUTCDate())].join("-")}deserialize(r){if(typeof r=="string"){if(!r)return null;if(I7.test(r)){let i=new Date(r);if(this.isValid(i))return i}}return super.deserialize(r)}isDateInstance(r){return r instanceof Date}isValid(r){return!isNaN(r.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(r,i,s){let o=new Date;return o.setFullYear(r,i,s),o.setHours(0,0,0,0),o}_2digit(r){return("00"+r).slice(-2)}_format(r,i){let s=new Date;return s.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),s.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),r.format(s)}};e.\u0275fac=function(i){return new(i||e)(y(_L,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),D7={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};function jhe(t=D7){return[{provide:Yg,useClass:b7},{provide:E7,useValue:t}]}var Bhe=(()=>{let e=class e{isErrorState(r,i){return!!(r&&r.invalid&&(r.touched||i&&i.submitted))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Mn=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Mn||{}),LC=class{constructor(e,n,r,i=!1){this._renderer=e,this.element=n,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=Mn.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},vL=wc({passive:!0,capture:!0}),VC=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=Gn(e);n&&this._events.get(e.type)?.forEach((r,i)=>{(i===n||i.contains(n))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,r,i){let s=this._events.get(n);if(s){let o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(n,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,vL)})}removeHandler(e,n,r){let i=this._events.get(e);if(!i)return;let s=i.get(n);s&&(s.delete(r),s.size===0&&i.delete(n),i.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,vL)))}},wL={enterDuration:225,exitDuration:150},C7=800,EL=wc({passive:!0,capture:!0}),IL=["mousedown","touchstart"],bL=["mouseup","mouseleave","touchend","touchcancel"],Pd=class Pd{constructor(e,n,r,i){this._target=e,this._ngZone=n,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=ei(r))}fadeInRipple(e,n,r={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=I(I({},wL),r.animation);r.centered&&(e=i.left+i.width/2,n=i.top+i.height/2);let o=r.radius||T7(e,n,i),a=e-i.left,c=n-i.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-o}px`,u.style.top=`${c-o}px`,u.style.height=`${o*2}px`,u.style.width=`${o*2}px`,r.color!=null&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,f=d.transitionDuration,m=h==="none"||f==="0s"||f==="0s, 0s"||i.width===0&&i.height===0,g=new LC(this,u,r,m);u.style.transform="scale3d(1, 1, 1)",g.state=Mn.FADING_IN,r.persistent||(this._mostRecentTransientRipple=g);let v=null;return!m&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let E=()=>this._finishRippleTransition(g),R=()=>this._destroyRipple(g);u.addEventListener("transitionend",E),u.addEventListener("transitioncancel",R),v={onTransitionEnd:E,onTransitionCancel:R}}),this._activeRipples.set(g,v),(m||!l)&&this._finishRippleTransition(g),g}fadeOutRipple(e){if(e.state===Mn.FADING_OUT||e.state===Mn.HIDDEN)return;let n=e.element,r=I(I({},wL),e.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",e.state=Mn.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=ei(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,IL.forEach(r=>{Pd._eventManager.addHandler(this._ngZone,r,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{bL.forEach(n=>{this._triggerElement.addEventListener(n,this,EL)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Mn.FADING_IN?this._startFadeOutTransition(e):e.state===Mn.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=Mn.VISIBLE,!r&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Mn.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=SC(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+C7;!this._target.rippleDisabled&&!n&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!AC(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let r=0;r<n.length;r++)this.fadeInRipple(n[r].clientX,n[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===Mn.VISIBLE||e.config.terminateOnPointerUp&&e.state===Mn.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(IL.forEach(n=>Pd._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&bL.forEach(n=>e.removeEventListener(n,this,EL)))}};Pd._eventManager=new VC;var jC=Pd;function T7(t,e,n){let r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}var SL=new x("mat-ripple-global-options"),S7=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(r){r&&this.fadeOutAllNonPersistent(),this._disabled=r,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(r){this._trigger=r,this._setupTriggerEventsIfEnabled()}constructor(r,i,s,o,a){this._elementRef=r,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new jC(this,i,r,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:I(I(I({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(r,i=0,s){return typeof r=="number"?this._rippleRenderer.fadeInRipple(r,i,I(I({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,I(I({},this.rippleConfig),r))}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(L),S(Ke),S(SL,8),S(Gt,8))},e.\u0275dir=ye({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,s){i&2&&Br("mat-ripple-unbounded",s.unbounded)},inputs:{color:[fe.None,"matRippleColor","color"],unbounded:[fe.None,"matRippleUnbounded","unbounded"],centered:[fe.None,"matRippleCentered","centered"],radius:[fe.None,"matRippleRadius","radius"],animation:[fe.None,"matRippleAnimation","animation"],disabled:[fe.None,"matRippleDisabled","disabled"],trigger:[fe.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=e;return t})(),Uhe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({imports:[gL,gL]});let t=e;return t})();var DL={capture:!0},CL=["focus","click","mouseenter","touchstart"],kC="mat-ripple-loader-uninitialized",FC="mat-ripple-loader-class-name",TL="mat-ripple-loader-centered",Qg="mat-ripple-loader-disabled",$he=(()=>{let e=class e{constructor(){this._document=b(Y,{optional:!0}),this._animationMode=b(Gt,{optional:!0}),this._globalRippleOptions=b(SL,{optional:!0}),this._platform=b(Ke),this._ngZone=b(L),this._hosts=new Map,this._onInteraction=r=>{if(!(r.target instanceof HTMLElement))return;let s=r.target.closest(`[${kC}]`);s&&this._createRipple(s)},this._ngZone.runOutsideAngular(()=>{for(let r of CL)this._document?.addEventListener(r,this._onInteraction,DL)})}ngOnDestroy(){let r=this._hosts.keys();for(let i of r)this.destroyRipple(i);for(let i of CL)this._document?.removeEventListener(i,this._onInteraction,DL)}configureRipple(r,i){r.setAttribute(kC,""),(i.className||!r.hasAttribute(FC))&&r.setAttribute(FC,i.className||""),i.centered&&r.setAttribute(TL,""),i.disabled&&r.setAttribute(Qg,"")}getRipple(r){return this._hosts.get(r)||this._createRipple(r)}setDisabled(r,i){let s=this._hosts.get(r);if(s){s.disabled=i;return}i?r.setAttribute(Qg,""):r.removeAttribute(Qg)}_createRipple(r){if(!this._document)return;let i=this._hosts.get(r);if(i)return i;r.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",r.getAttribute(FC)),r.append(s);let o=new S7(new ve(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=r,o.centered=r.hasAttribute(TL),o.disabled=r.hasAttribute(Qg),this.attachRipple(r,o),o}attachRipple(r,i){r.removeAttribute(kC),this._hosts.set(r,i)}destroyRipple(r){let i=this._hosts.get(r);i&&(i.ngOnDestroy(),this._hosts.delete(r))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function A7(t,e){}var Od=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},BC="mdc-dialog--open",AL="mdc-dialog--opening",RL="mdc-dialog--closing",R7=150,M7=75,x7=(()=>{let e=class e extends PC{constructor(r,i,s,o,a,c,l,u,d){super(r,i,s,o,a,c,l,d),this._animationMode=u,this._animationStateChanged=new Ce,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?xL(this._config.enterAnimationDuration)??R7:0,this._exitAnimationDuration=this._animationsEnabled?xL(this._config.exitAnimationDuration)??M7:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(ML,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(AL,BC)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(BC),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(BC),this._animationsEnabled?(this._hostElement.style.setProperty(ML,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(RL)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(AL,RL)}_waitForAnimationToComplete(r,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,r)}_requestAnimationFrame(r){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(r):r()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(r){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(r){let i=super.attachComponentPortal(r);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(Md),S(Y,8),S(Od),S(Rd),S(L),S(ti),S(Gt,8),S(xd))},e.\u0275cmp=or({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,s){i&2&&(Af("id",s._config.id),lr("aria-modal",s._config.ariaModal)("role",s._config.role)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null),Br("_mat-animation-noopable",!s._animationsEnabled))},standalone:!0,features:[Ye,ur],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,s){i&1&&(Lt(0,"div",0)(1,"div",1),Xt(2,A7,0,0,"ng-template",2),Tt()())},dependencies:[Sd],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2});let t=e;return t})(),ML="--mat-dialog-transition-duration";function xL(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?Ed(t.substring(0,t.length-2)):t.endsWith("s")?Ed(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var Zg=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(Zg||{}),UC=class{constructor(e,n,r){this._ref=e,this._containerInstance=r,this._afterOpened=new H,this._beforeClosed=new H,this._state=Zg.OPEN,this.disableClose=n.disableClose,this.id=e.id,r._animationStateChanged.pipe(Fe(i=>i.state==="opened"),He(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(Fe(i=>i.state==="closed"),He(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Pc(this.backdropClick(),this.keydownEvents().pipe(Fe(i=>i.keyCode===27&&!this.disableClose&&!qg(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),N7(this,i.type==="keydown"?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Fe(n=>n.state==="closing"),He(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=Zg.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=Zg.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function N7(t,e,n){return t._closeInteractionType=e,t.close(n)}var $C=new x("MatMdcDialogData"),P7=new x("mat-mdc-dialog-default-options"),O7=new x("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=b(Wn);return()=>t.scrollStrategies.block()}});var k7=0,NL=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(r,i,s,o,a,c,l,u){this._overlay=r,this._defaultOptions=o,this._scrollStrategy=a,this._parentDialog=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new H,this._afterOpenedAtThisLevel=new H,this.dialogConfigClass=Od,this.afterAllClosed=ui(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Nn(void 0))),this._dialog=i.get(mL),this._dialogRefConstructor=UC,this._dialogContainerType=x7,this._dialogDataToken=$C}open(r,i){let s;i=I(I({},this._defaultOptions||new Od),i),i.id=i.id||`mat-mdc-dialog-${k7++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(r,pe(I({},i),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:Ro,useValue:i}]},templateContext:()=>({dialogRef:s}),providers:(a,c,l)=>(s=new this._dialogRefConstructor(a,i,l),s.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:s}])}));return s.componentRef=o.componentRef,s.componentInstance=o.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(s);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(r){return this.openDialogs.find(i=>i.id===r)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(r){let i=r.length;for(;i--;)r[i].close()}};e.\u0275fac=function(i){return new(i||e)(y(Wn),y(Ne),y(hr,8),y(P7,8),y(O7),y(e,12),y(Cc),y(Gt,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var L7=t=>({"pb-10":t});function V7(t,e){if(t&1){let n=Kv();Lt(0,"button",12),ct("click",function(){gv(n);let i=da();return yv(i.cancel())}),NA(),Lt(1,"svg",13),bi(2,"path",14),Tt(),PA(),Lt(3,"span",15),ha(4,"Close modal"),Tt()()}}function j7(t,e){t&1&&Wv(0)}function B7(t,e){if(t&1&&Xt(0,j7,1,0,"ng-container",16),t&2){let n=da();xs("ngTemplateOutlet",n.templateRef)}}function U7(t,e){if(t&1){let n=Kv();Lt(0,"button",17),ct("click",function(){gv(n);let i=da();return yv(i.cancel())}),ha(1),Tt()}if(t&2){let n=da();Vn(),Ns(" ",n.cancelText," ")}}var PL=(()=>{let e=class e{constructor(r){if(this.data=r,this.doConfirm=Tv(),this.doCancel=Tv(),this.title="\u901A\u77E5",this.content="",this.okText="\u78BA\u8A8D",this.cancelText="\u53D6\u6D88",this.showCrossBtn=!0,this.outsideClose=!1,this.showCancelBtn=!0,this.btnCenter=!0,this.fullScreen=!1,this.data){let{title:i,content:s,okText:o,cancelText:a,showCrossBtn:c,outsideClose:l,showCancelBtn:u,contentTemplateRef:d,btnCenter:h,fullScreen:f,afterViewInit:m}=r;this.title=i,this.content=s,this.okText=o,this.cancelText=a,this.showCrossBtn=c,this.outsideClose=l,this.showCancelBtn=u,this.btnCenter=h,this.templateRef=d,this.fullScreen=f,this.afterViewInitEvent=m||(()=>{})}}ngOnInit(){}ngAfterViewInit(){this.afterViewInitEvent()}clickOutsideClose(){this.outsideClose&&this.cancel()}cancel(){this.doCancel.emit()}ok(){this.doConfirm.emit()}};e.\u0275fac=function(i){return new(i||e)(S($C))},e.\u0275cmp=or({type:e,selectors:[["app-modal"]],outputs:{doConfirm:"doConfirm",doCancel:"doCancel"},standalone:!0,features:[ur],decls:15,vars:10,consts:[[1,"bg-white","dark:bg-gray-700","min-w-72","min-h-48","flex","overflow-y-auto","overflow-x-hidden","justify-center","items-center","w-full","md:inset-0","h-[calc(100%-1rem)]","max-h-full"],[1,"relative","w-full","max-w-2xl","max-h-screen","overflow-scroll"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button","class","text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide","default-modal",3,"click",4,"ngIf"],[1,"p-4","md:p-5","space-y-4","text-gray-900","dark:text-white","min-h-20"],[3,"innerHTML"],[1,"flex","justify-center","items-center","p-4","md:p-5","border-t","border-gray-200","rounded-b","dark:border-gray-600"],["type","button",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],["type","button","class","ms-3 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600",3,"click",4,"ngIf"],[1,"fixed","h-full","w-full","top-0","left-0","-z-10",3,"click"],["type","button","data-modal-hide","default-modal",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","ms-auto","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[4,"ngTemplateOutlet"],["type","button",1,"ms-3","text-gray-500","bg-white","hover:bg-gray-100","focus:ring-4","focus:outline-none","focus:ring-blue-300","rounded-lg","border","border-gray-200","text-sm","font-medium","px-5","py-2.5","hover:text-gray-900","focus:z-10","dark:bg-gray-700","dark:text-gray-300","dark:border-gray-500","dark:hover:text-white","dark:hover:bg-gray-600","dark:focus:ring-gray-600",3,"click"]],template:function(i,s){i&1&&(Lt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),ha(5),Tt(),Xt(6,V7,5,0,"button",5),Tt(),Lt(7,"div",6),bi(8,"p",7),Xt(9,B7,1,1,"ng-container"),Tt(),Lt(10,"div",8)(11,"button",9),ct("click",function(){return s.ok()}),ha(12),Tt(),Xt(13,U7,2,1,"button",10),Tt()()()(),Lt(14,"div",11),ct("click",function(){return s.clickOutsideClose()}),Tt()),i&2&&(Vn(5),Ns(" ",s.title," "),Vn(),xs("ngIf",s.showCrossBtn&&s.showCancelBtn),Vn(2),xs("innerHTML",s.content,cR),Vn(),Gv(9,s.templateRef?9:-1),Vn(),JR(uM(8,L7,s.fullScreen)),Vn(2),Ns(" ",s.okText," "),Vn(),xs("ngIf",s.showCancelBtn))},dependencies:[Os,xM,NM]});let t=e;return t})();var Efe=(()=>{let e=class e{constructor(r){this.dialog=r,this.modalQueue=[],this.currentModal$=new fs,this.executeStatus$=new H,this.executeModal()}executeModal(){this.executeStatus$.subscribe(()=>{this.modalQueue.length>0&&this.currentModal$.next(this.modalQueue[0])})}openConfirm(r){let i=Date.now();this.pushModalConfig(i);let s=({title:o="\u901A\u77E5",content:a,okText:c="\u78BA\u8A8D",cancelText:l="\u53D6\u6D88",outsideClose:u=!1,showCrossBtn:d=!0,showCancelBtn:h=!0,btnCenter:f=!0,fullScreen:m=!1,contentTemplateRef:g,afterViewInit:v})=>{let E={data:{content:a,title:o,okText:c,cancelText:l,outsideClose:u,showCrossBtn:d,showCancelBtn:h,btnCenter:f,fullScreen:m,contentTemplateRef:g,afterViewInit:v}};return m?I({maxWidth:"100vw",width:"100%"},E):E};return this.modalQueue.length===1&&this.executeStatus$.next(!0),new Promise(o=>{this.currentModal$.subscribe(a=>{if(a===i){let c=this.dialog.open(PL,s(r));o(c),c.componentInstance.doConfirm.subscribe(()=>{r.onOk&&r.onOk(),this.modalQueue.shift(),c.close(),this.executeStatus$.next(!0)}),c.componentInstance.doCancel.subscribe(()=>{r.onCancel&&r.onCancel(),this.modalQueue.shift(),c.close(),this.executeStatus$.next(!0)})}})})}pushModalConfig(r){this.modalQueue.push(r)}cleanQueue(){let r=this.modalQueue[0];this.modalQueue=[r]}};e.\u0275fac=function(i){return new(i||e)(y(NL))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var HL=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(S(jn),S(ve))},e.\u0275dir=ye({type:e});let t=e;return t})(),Vd=(()=>{let e=class e extends HL{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=cr(e)))(s||e)}})(),e.\u0275dir=ye({type:e,features:[Ye]});let t=e;return t})(),xo=new x(""),$7={provide:xo,useExisting:mn(()=>H7),multi:!0},H7=(()=>{let e=class e extends Vd{writeValue(r){this.setProperty("checked",r)}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=cr(e)))(s||e)}})(),e.\u0275dir=ye({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,s){i&1&&ct("change",function(a){return s.onChange(a.target.checked)})("blur",function(){return s.onTouched()})},features:[Wt([$7]),Ye]});let t=e;return t})(),z7={provide:xo,useExisting:mn(()=>zL),multi:!0};function q7(){let t=dr()?dr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var G7=new x(""),zL=(()=>{let e=class e extends HL{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!q7())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(S(jn),S(ve),S(G7,8))},e.\u0275dir=ye({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&ct("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Wt([z7]),Ye]});let t=e;return t})();function as(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function qL(t){return t!=null&&typeof t.length=="number"}var ay=new x(""),cy=new x(""),W7=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,OL=class{static min(e){return K7(e)}static max(e){return Q7(e)}static required(e){return Y7(e)}static requiredTrue(e){return Z7(e)}static email(e){return X7(e)}static minLength(e){return J7(e)}static maxLength(e){return eY(e)}static pattern(e){return tY(e)}static nullValidator(e){return GL(e)}static compose(e){return XL(e)}static composeAsync(e){return JL(e)}};function K7(t){return e=>{if(as(e.value)||as(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function Q7(t){return e=>{if(as(e.value)||as(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function Y7(t){return as(t.value)?{required:!0}:null}function Z7(t){return t.value===!0?null:{required:!0}}function X7(t){return as(t.value)||W7.test(t.value)?null:{email:!0}}function J7(t){return e=>as(e.value)||!qL(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function eY(t){return e=>qL(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function tY(t){if(!t)return GL;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(as(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function GL(t){return null}function WL(t){return t!=null}function KL(t){return Ps(t)?Oe(t):t}function QL(t){let e={};return t.forEach(n=>{e=n!=null?I(I({},e),n):e}),Object.keys(e).length===0?null:e}function YL(t,e){return e.map(n=>n(t))}function nY(t){return!t.validate}function ZL(t){return t.map(e=>nY(e)?e:n=>e.validate(n))}function XL(t){if(!t)return null;let e=t.filter(WL);return e.length==0?null:function(n){return QL(YL(n,e))}}function zC(t){return t!=null?XL(ZL(t)):null}function JL(t){if(!t)return null;let e=t.filter(WL);return e.length==0?null:function(n){let r=YL(n,e).map(KL);return Ny(r).pipe(se(QL))}}function qC(t){return t!=null?JL(ZL(t)):null}function kL(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function eV(t){return t._rawValidators}function tV(t){return t._rawAsyncValidators}function HC(t){return t?Array.isArray(t)?t:[t]:[]}function Jg(t,e){return Array.isArray(t)?t.includes(e):t===e}function FL(t,e){let n=HC(e);return HC(t).forEach(i=>{Jg(n,i)||n.push(i)}),n}function LL(t,e){return HC(e).filter(n=>!Jg(t,n))}var ey=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=zC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=qC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},ni=class extends ey{get formDirective(){return null}get path(){return null}},Mo=class extends ey{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ty=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},rY={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},jfe=pe(I({},rY),{"[class.ng-submitted]":"isSubmitted"}),Bfe=(()=>{let e=class e extends ty{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(S(Mo,2))},e.\u0275dir=ye({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Br("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ye]});let t=e;return t})(),Ufe=(()=>{let e=class e extends ty{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(S(ni,10))},e.\u0275dir=ye({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Br("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Ye]});let t=e;return t})();var kd="VALID",Xg="INVALID",Sc="PENDING",Fd="DISABLED";function nV(t){return(ly(t)?t.validators:t)||null}function iY(t){return Array.isArray(t)?zC(t):t||null}function rV(t,e){return(ly(e)?e.asyncValidators:t)||null}function sY(t){return Array.isArray(t)?qC(t):t||null}function ly(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function oY(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new T(1e3,"");if(!r[n])throw new T(1001,"")}function aY(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new T(1002,"")})}var ny=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===kd}get invalid(){return this.status===Xg}get pending(){return this.status==Sc}get disabled(){return this.status===Fd}get enabled(){return this.status!==Fd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(FL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(FL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(LL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(LL(e,this._rawAsyncValidators))}hasValidator(e){return Jg(this._rawValidators,e)}hasAsyncValidator(e){return Jg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Sc,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Fd,this.errors=null,this._forEachChild(r=>{r.disable(pe(I({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pe(I({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=kd,this._forEachChild(r=>{r.enable(pe(I({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pe(I({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kd||this.status===Sc)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fd:kd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Sc,this._hasOwnPendingAsyncValidator=!0;let n=KL(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ce,this.statusChanges=new Ce}_calculateStatus(){return this._allControlsDisabled()?Fd:this.errors?Xg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sc)?Sc:this._anyControlsHaveStatus(Xg)?Xg:kd}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ly(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=iY(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=sY(this._rawAsyncValidators)}},ry=class extends ny{constructor(e,n,r){super(nV(n),rV(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){aY(this,!0,e),Object.keys(e).forEach(r=>{oY(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var jd=new x("CallSetDisabledState",{providedIn:"root",factory:()=>uy}),uy="always";function iV(t,e){return[...e.path,t]}function iy(t,e,n=uy){GC(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),lY(t,e),dY(t,e),uY(t,e),cY(t,e)}function VL(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),oy(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function sy(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function cY(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function GC(t,e){let n=eV(t);e.validator!==null?t.setValidators(kL(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=tV(t);e.asyncValidator!==null?t.setAsyncValidators(kL(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();sy(e._rawValidators,i),sy(e._rawAsyncValidators,i)}function oy(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=eV(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=tV(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return sy(e._rawValidators,r),sy(e._rawAsyncValidators,r),n}function lY(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&sV(t,e)})}function uY(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&sV(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function sV(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function dY(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function oV(t,e){t==null,GC(t,e)}function hY(t,e){return oy(t,e)}function aV(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function fY(t){return Object.getPrototypeOf(t.constructor)===Vd}function cV(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function lV(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===zL?n=s:fY(s)?r=s:i=s}),i||r||n||null}function pY(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var mY={provide:ni,useExisting:mn(()=>gY)},Ld=Promise.resolve(),gY=(()=>{let e=class e extends ni{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ce,this.form=new ry({},zC(r),qC(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Ld.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),iy(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Ld.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Ld.then(()=>{let i=this._findContainer(r.path),s=new ry({});oV(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Ld.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Ld.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,cV(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(S(ay,10),S(cy,10),S(jd,8))},e.\u0275dir=ye({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&ct("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[fe.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Wt([mY]),Ye]});let t=e;return t})();function jL(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function BL(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var uV=class extends ny{constructor(e=null,n,r){super(nV(n),rV(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ly(n)&&(n.nonNullable||n.initialValueIsDefault)&&(BL(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){jL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){jL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){BL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var yY=t=>t instanceof uV;var _Y={provide:Mo,useExisting:mn(()=>vY)},UL=Promise.resolve(),vY=(()=>{let e=class e extends Mo{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new uV,this._registered=!1,this.name="",this.update=new Ce,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=lV(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),aV(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){iy(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){UL.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&wn(i);UL.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?iV(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(S(ni,9),S(ay,10),S(cy,10),S(xo,10),S(vn,8),S(jd,8))},e.\u0275dir=ye({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[fe.None,"disabled","isDisabled"],model:[fe.None,"ngModel","model"],options:[fe.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Wt([_Y]),Ye,Ft]});let t=e;return t})();var wY={provide:xo,useExisting:mn(()=>EY),multi:!0},EY=(()=>{let e=class e extends Vd{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=cr(e)))(s||e)}})(),e.\u0275dir=ye({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&ct("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[Wt([wY]),Ye]});let t=e;return t})();var dV=new x("");var IY={provide:ni,useExisting:mn(()=>bY)},bY=(()=>{let e=class e extends ni{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ce,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(oy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return iy(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){VL(r.control||null,r,!1),pY(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,cV(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(VL(i||null,r),yY(s)&&(iy(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);oV(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&hY(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){GC(this.form,this),this._oldForm&&oy(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(S(ay,10),S(cy,10),S(jd,8))},e.\u0275dir=ye({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&ct("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[fe.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Wt([IY]),Ye,Ft]});let t=e;return t})();var DY={provide:Mo,useExisting:mn(()=>CY)},CY=(()=>{let e=class e extends Mo{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Ce,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=lV(this,o)}ngOnChanges(r){this._added||this._setUpControl(),aV(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return iV(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(S(ni,13),S(ay,10),S(cy,10),S(xo,10),S(dV,8))},e.\u0275dir=ye({type:e,selectors:[["","formControlName",""]],inputs:{name:[fe.None,"formControlName","name"],isDisabled:[fe.None,"disabled","isDisabled"],model:[fe.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Wt([DY]),Ye,Ft]});let t=e;return t})(),TY={provide:xo,useExisting:mn(()=>fV),multi:!0};function hV(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function SY(t){return t.split(":")[0]}var fV=(()=>{let e=class e extends Vd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=hV(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=SY(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=cr(e)))(s||e)}})(),e.\u0275dir=ye({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&ct("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Wt([TY]),Ye]});let t=e;return t})(),Hfe=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(hV(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(jn),S(fV,9))},e.\u0275dir=ye({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),AY={provide:xo,useExisting:mn(()=>pV),multi:!0};function $L(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function RY(t){return t.split(":")[0]}var pV=(()=>{let e=class e extends Vd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let l=a[c],u=this._getOptionValue(l.value);s.push(u)}}else{let a=i.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let u=this._getOptionValue(l.value);s.push(u)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=RY(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=cr(e)))(s||e)}})(),e.\u0275dir=ye({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&ct("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Wt([AY]),Ye]});let t=e;return t})(),zfe=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue($L(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue($L(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(jn),S(pV,9))},e.\u0275dir=ye({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var mV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({});let t=e;return t})();var WC=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:jd,useValue:r.callSetDisabledState??uy}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({imports:[mV]});let t=e;return t})(),KC=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:dV,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:jd,useValue:r.callSetDisabledState??uy}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({imports:[mV]});let t=e;return t})();var MY=[Os,WC,KC,iE],Yfe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({imports:[MY,Os,WC,KC,iE]});let t=e;return t})();export{I as a,pe as b,xY as c,NY as d,p as e,Ae as f,W as g,H as h,ET as i,Pt as j,NX as k,z as l,Uo as m,se as n,Zn as o,ui as p,Nc as q,ij as r,Pc as s,sj as t,Fe as u,He as v,aj as w,uj as x,qT as y,Nn as z,Zt as A,Jn as B,et as C,mn as D,C as E,ae as F,x as G,vj as H,y as I,b as J,mt as K,iv as L,fe as M,or as N,ce as O,ye as P,af as Q,Jj as R,Ft as S,gv as T,yv as U,NA as V,PA as W,cr as X,Cv as Y,Ne as Z,Tv as _,Xie as $,ve as aa,Ce as ba,yn as ca,Gt as da,Vn as ea,S as fa,IR as ga,Ln as ha,_n as ia,KR as ja,Ye as ka,jr as la,Xt as ma,L as na,lr as oa,xs as pa,qv as qa,Br as ra,JR as sa,Gv as ta,nse as ua,rse as va,ise as wa,sse as xa,Lt as ya,Tt as za,bi as Aa,Kv as Ba,Af as Ca,_H as Da,ct as Ea,DH as Fa,da as Ga,aM as Ha,cM as Ia,SH as Ja,Rf as Ka,cl as La,ll as Ma,ose as Na,ha as Oa,MH as Pa,Ns as Qa,xH as Ra,ase as Sa,NH as Ta,Wt as Ua,ur as Va,uM as Wa,cse as Xa,lse as Ya,use as Za,Nf as _a,Di as $a,dse as ab,vn as bb,wn as cb,az as db,Y as eb,SM as fb,Nse as gb,xM as hb,Pse as ib,NM as jb,Ose as kb,Os as lb,uw as mb,eoe as nb,toe as ob,Ai as pb,Cq as qb,Un as rb,voe as sb,woe as tb,iE as ub,Doe as vb,lae as wb,uae as xb,dae as yb,zs as zb,tce as Ab,gI as Bb,YN as Cb,ice as Db,Xe as Eb,fd as Fb,Vle as Gb,jle as Hb,Ble as Ib,Ule as Jb,$le as Kb,Hle as Lb,zle as Mb,qle as Nb,Gle as Ob,Wle as Pb,Kle as Qb,Qle as Rb,Yle as Sb,Zle as Tb,Xle as Ub,Jle as Vb,eue as Wb,tue as Xb,AQ as Yb,Ed as Zb,_c as _b,ei as $b,Cue as ac,Ke as bc,Nue as cc,wc as dc,K1 as ec,Ec as fc,Gn as gc,Cd as hc,Y1 as ic,mC as jc,Q1 as kc,Ic as lc,bc as mc,Sd as nc,zg as oc,qg as pc,Ad as qc,bC as rc,Wn as sc,iL as tc,oL as uc,Yde as vc,SC as wc,AC as xc,xd as yc,Zde as zc,Xde as Ac,iue as Bc,sue as Cc,F0 as Dc,oue as Ec,aue as Fc,cue as Gc,Eue as Hc,gL as Ic,yL as Jc,Yg as Kc,E7 as Lc,b7 as Mc,jhe as Nc,Bhe as Oc,Uhe as Pc,$he as Qc,Efe as Rc,xo as Sc,H7 as Tc,zL as Uc,ay as Vc,OL as Wc,ni as Xc,Mo as Yc,Bfe as Zc,Ufe as _c,ry as $c,gY as ad,uV as bd,vY as cd,EY as dd,bY as ed,CY as fd,fV as gd,Hfe as hd,zfe as id,WC as jd,Yfe as kd};
