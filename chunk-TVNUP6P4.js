import{a as Je,b as re,c as ti,d as ca,e as _r,f as xr,g as vr,k as yr,l as wr,m as br,n as Sr,o as Dr,p as Cr,q as Tr,r as Er,s as Ir,t as Et}from"./chunk-JW3D34R3.js";import{$a as Jn,$c as an,Aa as p,B as je,Ba as m,C as Gn,Ca as I,Cb as rr,D as Ft,Da as ut,E as jn,Ga as k,H as Xi,Ia as G,K as _t,L as $t,M as Yi,Ma as We,N as M,Na as Xe,O as Q,Oa as yt,Pa as wt,Pc as Qe,Q as Zi,Qa as Qn,R as Un,Ra as w,Rc as ur,S as ot,Sc as ie,T as st,Ta as bt,Ua as Kn,Uc as sn,Va as en,Wa as K,Xa as tt,Xb as nn,Xc as ne,Yb as or,Yc as fr,Zb as j,Zc as hr,a as Qt,ad as Ke,b as Kt,bc as Ze,bd as dr,cc as rn,cd as pr,d as la,db as ge,dd as mr,e as me,ea as Qi,eb as Ye,ec as _e,ed as gr,f as Jt,fc as on,fd as Tt,g as Wi,ga as T,gb as St,gc as sr,h as P,ha as b,hc as ar,i as Vn,ib as tr,ja as Ki,k as te,ka as X,la as Ue,lb as er,na as Ji,o as qe,oa as Wn,pa as ct,pb as ir,qa as Xn,ra as O,rb as Dt,sb as Ct,t as qn,ta as tn,u as Ge,ub as nr,uc as lr,va as Bt,vb as ee,vc as cr,wa as Yn,x as Lt,xa as Zn,ya as xt,za as vt}from"./chunk-OHBUJJEM.js";var kr=(()=>{let t=class t{constructor(i,r){this.modalService=i,this.authService=r}ngOnInit(){}logout(){this.modalService.openConfirm({content:"\u78BA\u5B9A\u8981\u767B\u51FA\u55CE\uFF1F",onOk:()=>{this.authService.logout()}})}};t.\u0275fac=function(r){return new(r||t)(b(Qe),b(rr))},t.\u0275cmp=Q({type:t,selectors:[["app-setting"]],standalone:!0,features:[K],decls:39,vars:0,consts:[[1,"bg-gray-800","text-white","h-dvh"],[1,"py-4"],[1,"flex","justify-between","items-center","px-4","mb-4"],["routerLink","/",1,"text-white"],[1,"fas","fa-arrow-left"],[1,"text-lg","font-semibold"],[1,"space-y-2"],["routerLink","./budget",1,"flex","items-center","justify-between","px-4","py-3","bg-gray-700"],[1,"flex","items-center"],["routerLink","./tagsManage",1,"flex","items-center","justify-between","px-4","py-3","bg-gray-700"],[1,"flex","items-center","justify-between","px-4","py-3","bg-gray-700"],[1,"flex","items-center","justify-between","px-4","py-3","bg-gray-700",3,"click"]],template:function(r,o){r&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),I(4,"i",4),m(),p(5,"h1",5),w(6,"\u8A2D\u5B9A"),m(),I(7,"div"),m(),p(8,"div",6)(9,"div",7)(10,"div",8)(11,"span"),w(12," \u9810\u7B97\u7DE8\u5217 "),m()(),p(13,"span"),w(14," > "),m()(),p(15,"div",9)(16,"div",8)(17,"span"),w(18," \u985E\u5225\u7BA1\u7406 "),m()(),p(19,"span"),w(20," > "),m()(),p(21,"div",10)(22,"div",8)(23,"span"),w(24," \u532F\u51FA\u6A94\u6848 "),m()(),p(25,"span"),w(26," > "),m()(),p(27,"div",10)(28,"div",8)(29,"span"),w(30," \u806F\u7D61\u6211\u5011 "),m()(),p(31,"span"),w(32," > "),m()(),p(33,"div",11),k("click",function(){return o.logout()}),p(34,"div",8)(35,"span"),w(36," \u767B\u51FA "),m()(),p(37,"span"),w(38," > "),m()()()()())},dependencies:[Tt,Ct],styles:["[_nghost-%COMP%]{display:block}"]});let e=t;return e})();function pn(e,t,n){for(let i in t)if(t.hasOwnProperty(i)){let r=t[i];r?e.setProperty(i,r,n?.has(i)?"important":""):e.removeProperty(i)}return e}function se(e,t){let n=t?"":"none";pn(e.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":n,"-ms-user-select":n,"-webkit-user-select":n,"-moz-user-select":n})}function Pr(e,t,n){pn(e.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},n)}function oi(e,t){return t&&t!="none"?e+" "+t:e}function Rr(e){let t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function fa(e){let t=getComputedStyle(e),n=ln(t,"transition-property"),i=n.find(a=>a==="transform"||a==="all");if(!i)return 0;let r=n.indexOf(i),o=ln(t,"transition-duration"),s=ln(t,"transition-delay");return Rr(o[r])+Rr(s[r])}function ln(e,t){return e.getPropertyValue(t).split(",").map(i=>i.trim())}function mn(e){let t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function un(e,t,n){let{top:i,bottom:r,left:o,right:s}=e;return n>=i&&n<=r&&t>=o&&t<=s}function ve(e,t,n){e.top+=t,e.bottom=e.top+e.height,e.left+=n,e.right=e.left+e.width}function Ar(e,t,n,i){let{top:r,right:o,bottom:s,left:a,width:l,height:c}=e,u=l*t,h=c*t;return i>r-h&&i<s+h&&n>a-u&&n<o+u}var si=class{constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(n=>{this.positions.set(n,{scrollPosition:{top:n.scrollTop,left:n.scrollLeft},clientRect:mn(n)})})}handleScroll(t){let n=_e(t),i=this.positions.get(n);if(!i)return null;let r=i.scrollPosition,o,s;if(n===this._document){let c=this.getViewportScrollPosition();o=c.top,s=c.left}else o=n.scrollTop,s=n.scrollLeft;let a=r.top-o,l=r.left-s;return this.positions.forEach((c,u)=>{c.clientRect&&n!==u&&n.contains(u)&&ve(c.clientRect,a,l)}),r.top=o,r.left=s,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function Mr(e){let t=e.cloneNode(!0),n=t.querySelectorAll("[id]"),i=e.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<n.length;r++)n[r].removeAttribute("id");return i==="canvas"?Lr(e,t):(i==="input"||i==="select"||i==="textarea")&&Nr(e,t),Or("canvas",e,t,Lr),Or("input, textarea, select",e,t,Nr),t}function Or(e,t,n,i){let r=t.querySelectorAll(e);if(r.length){let o=n.querySelectorAll(e);for(let s=0;s<r.length;s++)i(r[s],o[s])}}var ha=0;function Nr(e,t){t.type!=="file"&&(t.value=e.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${ha++}`)}function Lr(e,t){let n=t.getContext("2d");if(n)try{n.drawImage(e,0,0)}catch{}}var Fr=Ze({passive:!0}),ii=Ze({passive:!1}),da=800,cn=new Set(["position"]),fn=class{get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(t){t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(n=>se(n,t)))}constructor(t,n,i,r,o,s){this._config=n,this._document=i,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new P,this._pointerMoveSubscription=Jt.EMPTY,this._pointerUpSubscription=Jt.EMPTY,this._scrollSubscription=Jt.EMPTY,this._resizeSubscription=Jt.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new P,this.started=new P,this.released=new P,this.ended=new P,this.entered=new P,this.exited=new P,this.dropped=new P,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){let l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{let l=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){let u=Math.abs(l.x-this._pickupPositionOnPage.x),h=Math.abs(l.y-this._pickupPositionOnPage.y);if(u+h>=this._config.dragStartThreshold){let d=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),g=this._dropContainer;if(!d){this._endDragSequence(a);return}(!g||!g.isDragging()&&!g.isReceiving())&&(a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.preventDefault();let c=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(c),this._dropContainer)this._updateActiveDropContainer(c,l);else{let u=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,h=this._activeTransform;h.x=c.x-u.x+this._passiveTransform.x,h.y=c.y-u.y+this._passiveTransform.y,this._applyRootElementTransform(h.x,h.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:c,event:a,distance:this._getDragDistance(c),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){let l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(t).withParent(n.parentDragRef||null),this._parentPositions=new si(i),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>j(i)),this._handles.forEach(i=>se(i,this.disabled)),this._toggleNativeDragInteractions();let n=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&n.add(i)}),this._disabledHandles=n,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){let n=j(t);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{n.addEventListener("mousedown",this._pointerDown,ii),n.addEventListener("touchstart",this._pointerDown,Fr),n.addEventListener("dragstart",this._nativeDragStart,ii)}),this._initialTransform=void 0,this._rootElement=n),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?j(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),se(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),se(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){let t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){let t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let n=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(n),dropPoint:n,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){xe(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let n=this._dropContainer;if(n){let i=this._rootElement,r=i.parentNode,o=this._placeholder=this._createPlaceholderElement(),s=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();r.insertBefore(s,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),Pr(i,!1,cn),this._document.body.appendChild(r.replaceChild(o,i)),this._getPreviewInsertionPoint(r,a).appendChild(this._preview),this.started.next({source:this,event:t}),n.start(),this._initialContainer=n,this._initialIndex=n.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(n?n.getScrollableParents():[])}_initializeDragSequence(t,n){this._parentDragRef&&n.stopPropagation();let i=this.isDragging(),r=xe(n),o=!r&&n.button!==0,s=this._rootElement,a=_e(n),l=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+da>Date.now(),c=r?cr(n):lr(n);if(a&&a.draggable&&n.type==="mousedown"&&n.preventDefault(),i||o||l||c)return;if(this._handles.length){let f=s.style;this._rootElementTapHighlight=f.webkitTapHighlightColor||"",f.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(f=>this._updateOnScroll(f)),this._boundaryElement&&(this._boundaryRect=mn(this._boundaryElement));let u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,t,n);let h=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(n);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:h.x,y:h.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,n)}_cleanupDragArtifacts(t){Pr(this._rootElement,!0,cn),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let n=this._dropContainer,i=n.getItemIndex(this),r=this._getPointerPositionOnPage(t),o=this._getDragDistance(r),s=n._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:o,dropPoint:r,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:n,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:r,event:t}),n.drop(this,i,this._initialIndex,this._initialContainer,s,o,r,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:n},{x:i,y:r}){let o=this._initialContainer._getSiblingContainerFromPosition(this,t,n);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,n)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,t,n,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,t,n,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,n):this._applyPreviewTransform(t-this._pickupPositionInElement.x,n-this._pickupPositionInElement.y))}_createPreviewElement(){let t=this._previewTemplate,n=this.previewClass,i=t?t.template:null,r;if(i&&t){let o=t.matchSize?this._initialDomRect:null,s=t.viewContainer.createEmbeddedView(i,t.context);s.detectChanges(),r=Br(s,this._document),this._previewRef=s,t.matchSize?zr(r,o):r.style.transform=ri(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=Mr(this._rootElement),zr(r,this._initialDomRect),this._initialTransform&&(r.style.transform=this._initialTransform);return pn(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},cn),se(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach(o=>r.classList.add(o)):r.classList.add(n)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);let n=fa(this._preview);return n===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let r=s=>{(!s||_e(s)===this._preview&&s.propertyName==="transform")&&(this._preview?.removeEventListener("transitionend",r),i(),clearTimeout(o))},o=setTimeout(r,n*1.5);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){let t=this._placeholderTemplate,n=t?t.template:null,i;return n?(this._placeholderRef=t.viewContainer.createEmbeddedView(n,t.context),this._placeholderRef.detectChanges(),i=Br(this._placeholderRef,this._document)):i=Mr(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,n,i){let r=n===this._rootElement?null:n,o=r?r.getBoundingClientRect():t,s=xe(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition(),l=s.pageX-o.left-a.left,c=s.pageY-o.top-a.top;return{x:o.left-t.left+l,y:o.top-t.top+c}}_getPointerPositionOnPage(t){let n=this._getViewportScrollPosition(),i=xe(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,r=i.pageX-n.left,o=i.pageY-n.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let a=this._ownerSVGElement.createSVGPoint();return a.x=r,a.y=o,a.matrixTransform(s.inverse())}}return{x:r,y:o}}_getConstrainedPointerPosition(t){let n=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:r}=this.constrainPosition?this.constrainPosition(t,this,this._initialDomRect,this._pickupPositionInElement):t;if(this.lockAxis==="x"||n==="x"?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||n==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),u=a.top+s,h=a.bottom-(c-s),f=a.left+o,d=a.right-(l-o);i=$r(i,f,d),r=$r(r,u,h)}return{x:i,y:r}}_updatePointerDirectionDelta(t){let{x:n,y:i}=t,r=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(n-o.x),a=Math.abs(i-o.y);return s>this._config.pointerDirectionChangeThreshold&&(r.x=n>o.x?1:-1,o.x=n),a>this._config.pointerDirectionChangeThreshold&&(r.y=i>o.y?1:-1,o.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,se(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,ii),t.removeEventListener("touchstart",this._pointerDown,Fr),t.removeEventListener("dragstart",this._nativeDragStart,ii)}_applyRootElementTransform(t,n){let i=ri(t,n),r=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=r.transform&&r.transform!="none"?r.transform:""),r.transform=oi(i,this._initialTransform)}_applyPreviewTransform(t,n){let i=this._previewTemplate?.template?void 0:this._initialTransform,r=ri(t,n);this._preview.style.transform=oi(r,i)}_getDragDistance(t){let n=this._pickupPositionOnPage;return n?{x:t.x-n.x,y:t.y-n.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:n}=this._passiveTransform;if(t===0&&n===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(r.width===0&&r.height===0||i.width===0&&i.height===0)return;let o=r.left-i.left,s=i.right-r.right,a=r.top-i.top,l=i.bottom-r.bottom;r.width>i.width?(o>0&&(t+=o),s>0&&(t-=s)):t=0,r.height>i.height?(a>0&&(n+=a),l>0&&(n-=l)):n=0,(t!==this._passiveTransform.x||n!==this._passiveTransform.y)&&this.setFreeDragPosition({y:n,x:t})}_getDragStartDelay(t){let n=this.dragStartDelay;return typeof n=="number"?n:xe(t)?n.touch:n?n.mouse:0}_updateOnScroll(t){let n=this._parentPositions.handleScroll(t);if(n){let i=_e(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&ve(this._boundaryRect,n.top,n.left),this._pickupPositionOnPage.x+=n.left,this._pickupPositionOnPage.y+=n.top,this._dropContainer||(this._activeTransform.x-=n.left,this._activeTransform.y-=n.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=rn(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,n){let i=this._previewContainer||"global";if(i==="parent")return t;if(i==="global"){let r=this._document;return n||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return j(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(t){return this._handles.find(n=>t.target&&(t.target===n||n.contains(t.target)))}};function ri(e,t){return`translate3d(${Math.round(e)}px, ${Math.round(t)}px, 0)`}function $r(e,t,n){return Math.max(t,Math.min(n,e))}function xe(e){return e.type[0]==="t"}function Br(e,t){let n=e.rootNodes;if(n.length===1&&n[0].nodeType===t.ELEMENT_NODE)return n[0];let i=t.createElement("div");return n.forEach(r=>i.appendChild(r)),i}function zr(e,t){e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.transform=ri(t.left,t.top)}function pa(e,t,n){let i=Hr(t,e.length-1),r=Hr(n,e.length-1);if(i===r)return;let o=e[i],s=r<i?-1:1;for(let a=i;a!==r;a+=s)e[a]=e[a+s];e[r]=o}function Hr(e,t){return Math.max(0,Math.min(t,e))}var hn=class{constructor(t,n){this._element=t,this._dragDropRegistry=n,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(t){this.withItems(t)}sort(t,n,i,r){let o=this._itemPositions,s=this._getItemIndexFromPointerPosition(t,n,i,r);if(s===-1&&o.length>0)return null;let a=this.orientation==="horizontal",l=o.findIndex(v=>v.drag===t),c=o[s],u=o[l].clientRect,h=c.clientRect,f=l>s?1:-1,d=this._getItemOffsetPx(u,h,f),g=this._getSiblingOffsetPx(l,o,f),x=o.slice();return pa(o,l,s),o.forEach((v,S)=>{if(x[S]===v)return;let _=v.drag===t,D=_?d:g,C=_?t.getPlaceholderElement():v.drag.getRootElement();v.offset+=D,a?(C.style.transform=oi(`translate3d(${Math.round(v.offset)}px, 0, 0)`,v.initialTransform),ve(v.clientRect,0,D)):(C.style.transform=oi(`translate3d(0, ${Math.round(v.offset)}px, 0)`,v.initialTransform),ve(v.clientRect,D,0))}),this._previousSwap.overlaps=un(h,n,i),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?r.x:r.y,{previousIndex:l,currentIndex:s}}enter(t,n,i,r){let o=r==null||r<0?this._getItemIndexFromPointerPosition(t,n,i):r,s=this._activeDraggables,a=s.indexOf(t),l=t.getPlaceholderElement(),c=s[o];if(c===t&&(c=s[o+1]),!c&&(o==null||o===-1||o<s.length-1)&&this._shouldEnterAsFirstChild(n,i)&&(c=s[0]),a>-1&&s.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){let u=c.getRootElement();u.parentElement.insertBefore(l,u),s.splice(o,0,t)}else j(this._element).appendChild(l),s.push(t);l.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables.forEach(t=>{let n=t.getRootElement();if(n){let i=this._itemPositions.find(r=>r.drag===t)?.initialTransform;n.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t)}updateOnScroll(t,n){this._itemPositions.forEach(({clientRect:i})=>{ve(i,t,n)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){let t=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(n=>{let i=n.getVisibleElement();return{drag:n,offset:0,initialTransform:i.style.transform||"",clientRect:mn(i)}}).sort((n,i)=>t?n.clientRect.left-i.clientRect.left:n.clientRect.top-i.clientRect.top)}_getItemOffsetPx(t,n,i){let r=this.orientation==="horizontal",o=r?n.left-t.left:n.top-t.top;return i===-1&&(o+=r?n.width-t.width:n.height-t.height),o}_getSiblingOffsetPx(t,n,i){let r=this.orientation==="horizontal",o=n[t].clientRect,s=n[t+i*-1],a=o[r?"width":"height"]*i;if(s){let l=r?"left":"top",c=r?"right":"bottom";i===-1?a-=s.clientRect[l]-o[c]:a+=o[l]-s.clientRect[c]}return a}_shouldEnterAsFirstChild(t,n){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,r=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let s=i[i.length-1].clientRect;return r?t>=s.right:n>=s.bottom}else{let s=i[0].clientRect;return r?t<=s.left:n<=s.top}}_getItemIndexFromPointerPosition(t,n,i,r){let o=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:a,clientRect:l})=>{if(a===t)return!1;if(r){let c=o?r.x:r.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&c===this._previousSwap.delta)return!1}return o?n>=Math.floor(l.left)&&n<Math.floor(l.right):i>=Math.floor(l.top)&&i<Math.floor(l.bottom)});return s===-1||!this._sortPredicate(s,t)?-1:s}},Vr=.05,Ur=.05,J=function(e){return e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.DOWN=2]="DOWN",e}(J||{}),B=function(e){return e[e.NONE=0]="NONE",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e}(B||{}),dn=class{constructor(t,n,i,r,o){this._dragDropRegistry=n,this._ngZone=r,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new P,this.entered=new P,this.exited=new P,this.dropped=new P,this.sorted=new P,this.receivingStarted=new P,this.receivingStopped=new P,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Jt.EMPTY,this._verticalScrollDirection=J.NONE,this._horizontalScrollDirection=B.NONE,this._stopScrollTimers=new P,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),qn(0,Vn).pipe(Ft(this._stopScrollTimers)).subscribe(()=>{let s=this._scrollNode,a=this.autoScrollStep;this._verticalScrollDirection===J.UP?s.scrollBy(0,-a):this._verticalScrollDirection===J.DOWN&&s.scrollBy(0,a),this._horizontalScrollDirection===B.LEFT?s.scrollBy(-a,0):this._horizontalScrollDirection===B.RIGHT&&s.scrollBy(a,0)})},this.element=j(t),this._document=i,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new si(i),this._sortStrategy=new hn(this.element,n),this._sortStrategy.withSortPredicate((s,a)=>this.sortPredicate(s,a,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,n,i,r){this._draggingStarted(),r==null&&this.sortingDisabled&&(r=this._draggables.indexOf(t)),this._sortStrategy.enter(t,n,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,n,i,r,o,s,a,l={}){this._reset(),this.dropped.next({item:t,currentIndex:n,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:o,distance:s,dropPoint:a,event:l})}withItems(t){let n=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(n.filter(r=>r.isDragging()).every(r=>t.indexOf(r)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._sortStrategy.direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._sortStrategy.orientation=t,this}withScrollableParents(t){let n=j(this.element);return this._scrollableElements=t.indexOf(n)===-1?[n,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,n,i,r){if(this.sortingDisabled||!this._domRect||!Ar(this._domRect,Vr,n,i))return;let o=this._sortStrategy.sort(t,n,i,r);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,n){if(this.autoScrollDisabled)return;let i,r=J.NONE,o=B.NONE;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||i||Ar(s.clientRect,Vr,t,n)&&([r,o]=ma(a,s.clientRect,this._sortStrategy.direction,t,n),(r||o)&&(i=a))}),!r&&!o){let{width:s,height:a}=this._viewportRuler.getViewportSize(),l={width:s,height:a,top:0,right:s,bottom:a,left:0};r=Wr(l,n),o=Xr(l,t),i=window}i&&(r!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=o,this._scrollNode=i,(r||o)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let t=j(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){let t=j(this.element);this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(t).clientRect}_reset(){this._isDragging=!1;let t=j(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(n=>n._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(t,n){return this._domRect!=null&&un(this._domRect,t,n)}_getSiblingContainerFromPosition(t,n,i){return this._siblings.find(r=>r._canReceive(t,n,i))}_canReceive(t,n,i){if(!this._domRect||!un(this._domRect,n,i)||!this.enterPredicate(t,this))return!1;let r=this._getShadowRoot().elementFromPoint(n,i);if(!r)return!1;let o=j(this.element);return r===o||o.contains(r)}_startReceiving(t,n){let i=this._activeSiblings;!i.has(t)&&n.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:n}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){let n=this._parentPositions.handleScroll(t);n&&this._sortStrategy.updateOnScroll(n.top,n.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let t=rn(j(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let t=this._sortStrategy.getActiveItemsSnapshot().filter(n=>n.isDragging());this._siblings.forEach(n=>n._startReceiving(this,t))}};function Wr(e,t){let{top:n,bottom:i,height:r}=e,o=r*Ur;return t>=n-o&&t<=n+o?J.UP:t>=i-o&&t<=i+o?J.DOWN:J.NONE}function Xr(e,t){let{left:n,right:i,width:r}=e,o=r*Ur;return t>=n-o&&t<=n+o?B.LEFT:t>=i-o&&t<=i+o?B.RIGHT:B.NONE}function ma(e,t,n,i,r){let o=Wr(t,r),s=Xr(t,i),a=J.NONE,l=B.NONE;if(o){let c=e.scrollTop;o===J.UP?c>0&&(a=J.UP):e.scrollHeight-c>e.clientHeight&&(a=J.DOWN)}if(s){let c=e.scrollLeft;n==="rtl"?s===B.RIGHT?c<0&&(l=B.RIGHT):e.scrollWidth+c>e.clientWidth&&(l=B.LEFT):s===B.LEFT?c>0&&(l=B.LEFT):e.scrollWidth-c>e.clientWidth&&(l=B.RIGHT)}return[a,l]}var ni=Ze({passive:!1,capture:!0}),ga=(()=>{let t=class t{constructor(i,r){this._ngZone=i,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new P,this.pointerUp=new P,this.scroll=new P,this._preventDefaultWhileDragging=o=>{this._activeDragInstances.length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=r}registerDropContainer(i){this._dropInstances.has(i)||this._dropInstances.add(i)}registerDragItem(i){this._dragInstances.add(i),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,ni)})}removeDropContainer(i){this._dropInstances.delete(i)}removeDragItem(i){this._dragInstances.delete(i),this.stopDragging(i),this._dragInstances.size===0&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,ni)}startDragging(i,r){if(!(this._activeDragInstances.indexOf(i)>-1)&&(this._activeDragInstances.push(i),this._activeDragInstances.length===1)){let o=r.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:ni}),o||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:ni}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,a)=>{this._document.addEventListener(a,s.handler,s.options)})})}}stopDragging(i){let r=this._activeDragInstances.indexOf(i);r>-1&&(this._activeDragInstances.splice(r,1),this._activeDragInstances.length===0&&this._clearGlobalListeners())}isDragging(i){return this._activeDragInstances.indexOf(i)>-1}scrolled(i){let r=[this.scroll];return i&&i!==this._document&&r.push(new Wi(o=>this._ngZone.runOutsideAngular(()=>{let a=l=>{this._activeDragInstances.length&&o.next(l)};return i.addEventListener("scroll",a,!0),()=>{i.removeEventListener("scroll",a,!0)}}))),Ge(...r)}ngOnDestroy(){this._dragInstances.forEach(i=>this.removeDragItem(i)),this._dropInstances.forEach(i=>this.removeDropContainer(i)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((i,r)=>{this._document.removeEventListener(r,i.handler,i.options)}),this._globalListeners.clear()}};t.\u0275fac=function(r){return new(r||t)($t(Ue),$t(Ye))},t.\u0275prov=Xi({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),_a={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Yr=(()=>{let t=class t{constructor(i,r,o,s){this._document=i,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=s}createDrag(i,r=_a){return new fn(i,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(i){return new dn(i,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}};t.\u0275fac=function(r){return new(r||t)($t(Ye),$t(Ue),$t(ar),$t(ga))},t.\u0275prov=Xi({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),qr=new _t("CDK_DRAG_PARENT");var Gr=new _t("CdkDragHandle");var xa=new _t("CdkDragPlaceholder");var va=new _t("CdkDragPreview");var Zr=new _t("CDK_DRAG_CONFIG"),ya="cdk-drag",Qr=new _t("CdkDropList"),Kr=(()=>{let t=class t{get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(i){this._disabled=i,this._dragRef.disabled=this._disabled}constructor(i,r,o,s,a,l,c,u,h,f,d){this.element=i,this.dropContainer=r,this._ngZone=s,this._viewContainerRef=a,this._dir=c,this._changeDetectorRef=h,this._selfHandle=f,this._parentDrag=d,this._destroyed=new P,this.started=new X,this.released=new X,this.ended=new X,this.entered=new X,this.exited=new X,this.dropped=new X,this.moved=new Wi(g=>{let x=this._dragRef.moved.pipe(qe(v=>({source:this,pointerPosition:v.pointerPosition,event:v.event,delta:v.delta,distance:v.distance}))).subscribe(g);return()=>{x.unsubscribe()}}),this._dragRef=u.createDrag(i,{dragStartThreshold:l&&l.dragStartThreshold!=null?l.dragStartThreshold:5,pointerDirectionChangeThreshold:l&&l.pointerDirectionChangeThreshold!=null?l.pointerDirectionChangeThreshold:5,zIndex:l?.zIndex}),this._dragRef.data=this,t._dragInstances.push(this),l&&this._assignDefaults(l),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(i){this._dragRef.setFreeDragPosition(i)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Lt(1),Ft(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(i){let r=i.rootElementSelector,o=i.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);let i=t._dragInstances.indexOf(this);i>-1&&t._dragInstances.splice(i,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){let i=this.element.nativeElement,r=i;this.rootElementSelector&&(r=i.closest!==void 0?i.closest(this.rootElementSelector):i.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||i)}_getBoundaryElement(){let i=this.boundaryElement;return i?typeof i=="string"?this.element.nativeElement.closest(i):j(i):null}_syncInputs(i){i.beforeStarted.subscribe(()=>{if(!i.isDragging()){let r=this._dir,o=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;i.disabled=this.disabled,i.lockAxis=this.lockAxis,i.dragStartDelay=typeof o=="object"&&o?o:nn(o),i.constrainPosition=this.constrainPosition,i.previewClass=this.previewClass,i.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),r&&i.withDirection(r.value)}}),i.beforeStarted.pipe(Lt(1)).subscribe(()=>{if(this._parentDrag){i.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){if(r.classList.contains(ya)){i.withParent(t._dragInstances.find(o=>o.element.nativeElement===r)?._dragRef||null);break}r=r.parentElement}})}_handleEvents(i){i.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),i.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),i.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),i.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),i.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),i.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(i){let{lockAxis:r,dragStartDelay:o,constrainPosition:s,previewClass:a,boundaryElement:l,draggingDisabled:c,rootElementSelector:u,previewContainer:h}=i;this.disabled=c??!1,this.dragStartDelay=o||0,r&&(this.lockAxis=r),s&&(this.constrainPosition=s),a&&(this.previewClass=a),l&&(this.boundaryElement=l),u&&(this.rootElementSelector=u),h&&(this.previewContainer=h)}_setupHandlesListener(){this._handles.changes.pipe(je(this._handles),jn(i=>{let r=i.filter(o=>o._parentDrag===this).map(o=>o.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),Gn(i=>Ge(...i.map(r=>r._stateChanges.pipe(je(r))))),Ft(this._destroyed)).subscribe(i=>{let r=this._dragRef,o=i.element.nativeElement;i.disabled?r.disableHandle(o):r.enableHandle(o)})}};t._dragInstances=[],t.\u0275fac=function(r){return new(r||t)(b(Qi),b(Qr,12),b(Ye),b(Ue),b(Wn),b(Zr,8),b(on,8),b(Yr),b(Ki),b(Gr,10),b(qr,12))},t.\u0275dir=Zi({type:t,selectors:[["","cdkDrag",""]],contentQueries:function(r,o,s){if(r&1&&(We(s,va,5),We(s,xa,5),We(s,Gr,5)),r&2){let a;yt(a=wt())&&(o._previewTemplate=a.first),yt(a=wt())&&(o._placeholderTemplate=a.first),yt(a=wt())&&(o._handles=a)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,o){r&2&&tn("cdk-drag-disabled",o.disabled)("cdk-drag-dragging",o._dragRef.isDragging())},inputs:{data:[M.None,"cdkDragData","data"],lockAxis:[M.None,"cdkDragLockAxis","lockAxis"],rootElementSelector:[M.None,"cdkDragRootElement","rootElementSelector"],boundaryElement:[M.None,"cdkDragBoundary","boundaryElement"],dragStartDelay:[M.None,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[M.None,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[M.HasDecoratorInputTransform,"cdkDragDisabled","disabled",ge],constrainPosition:[M.None,"cdkDragConstrainPosition","constrainPosition"],previewClass:[M.None,"cdkDragPreviewClass","previewClass"],previewContainer:[M.None,"cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[en([{provide:qr,useExisting:t}]),Ji,Un]});let e=t;return e})(),jr=new _t("CdkDropListGroup");var wa=0,Jr=(()=>{let t=class t{get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(i){this._dropListRef.disabled=this._disabled=i}constructor(i,r,o,s,a,l,c){this.element=i,this._changeDetectorRef=o,this._scrollDispatcher=s,this._dir=a,this._group=l,this._destroyed=new P,this.connectedTo=[],this.id=`cdk-drop-list-${wa++}`,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new X,this.entered=new X,this.exited=new X,this.sorted=new X,this._unsortedItems=new Set,this._dropListRef=r.createDropList(i),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=(u,h)=>this.enterPredicate(u.data,h.data),this._dropListRef.sortPredicate=(u,h,f)=>this.sortPredicate(u,h.data,f.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),t._dropLists.push(this),l&&l._items.add(this)}addItem(i){this._unsortedItems.add(i),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(i){this._unsortedItems.delete(i),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((i,r)=>i._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let i=t._dropLists.indexOf(this);i>-1&&t._dropLists.splice(i,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(i){this._dir&&this._dir.change.pipe(je(this._dir.value),Ft(this._destroyed)).subscribe(r=>i.withDirection(r)),i.beforeStarted.subscribe(()=>{let r=or(this.connectedTo).map(o=>{if(typeof o=="string"){let s=t._dropLists.find(a=>a.id===o);return s}return o});if(this._group&&this._group._items.forEach(o=>{r.indexOf(o)===-1&&r.push(o)}),!this._scrollableParentsResolved){let o=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(o),this._scrollableParentsResolved=!0}i.disabled=this.disabled,i.lockAxis=this.lockAxis,i.sortingDisabled=this.sortingDisabled,i.autoScrollDisabled=this.autoScrollDisabled,i.autoScrollStep=nn(this.autoScrollStep,2),i.connectedTo(r.filter(o=>o&&o!==this).map(o=>o._dropListRef)).withOrientation(this.orientation)})}_handleEvents(i){i.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),i.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),i.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),i.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),i.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),Ge(i.receivingStarted,i.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(i){let{lockAxis:r,draggingDisabled:o,sortingDisabled:s,listAutoScrollDisabled:a,listOrientation:l}=i;this.disabled=o??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=a??!1,this.orientation=l||"vertical",r&&(this.lockAxis=r)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(i=>i._dragRef))}};t._dropLists=[],t.\u0275fac=function(r){return new(r||t)(b(Qi),b(Yr),b(Ki),b(sr),b(on,8),b(jr,12),b(Zr,8))},t.\u0275dir=Zi({type:t,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(r,o){r&2&&(Xn("id",o.id),tn("cdk-drop-list-disabled",o.disabled)("cdk-drop-list-dragging",o._dropListRef.isDragging())("cdk-drop-list-receiving",o._dropListRef.isReceiving()))},inputs:{connectedTo:[M.None,"cdkDropListConnectedTo","connectedTo"],data:[M.None,"cdkDropListData","data"],orientation:[M.None,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[M.None,"cdkDropListLockAxis","lockAxis"],disabled:[M.HasDecoratorInputTransform,"cdkDropListDisabled","disabled",ge],sortingDisabled:[M.HasDecoratorInputTransform,"cdkDropListSortingDisabled","sortingDisabled",ge],enterPredicate:[M.None,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[M.None,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[M.HasDecoratorInputTransform,"cdkDropListAutoScrollDisabled","autoScrollDisabled",ge],autoScrollStep:[M.None,"cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[en([{provide:jr,useValue:void 0},{provide:Qr,useExisting:t}]),Ji]});let e=t;return e})();var U=function(e){return e.Add="add",e.Edit="edit",e}(U||{});var ba=(e,t)=>t.id;function Sa(e,t){e&1&&w(0," > ")}function Da(e,t){e&1&&I(0,"i",8)}function Ca(e,t){if(e&1){let n=ut();p(0,"div",18),k("click",function(){let o=ot(n).$implicit,s=G();return st(s.goToEditTag(o.id))}),p(1,"div",19),I(2,"i",20),m(),p(3,"span",21),w(4),ct(5,Sa,1,0)(6,Da,1,0),m()()}if(e&2){let n=t.$implicit,i=G();T(2),O("ngClass",n.tagIconName),T(),O("cdkDragDisabled",!i.isDrop),T(),bt(" ",n.tagName," "),T(),Bt(5,i.isDrop?6:5)}}function Ta(e,t){if(e&1){let n=ut();p(0,"button",22),k("click",function(){ot(n);let r=G();return st(r.onClickAddTag())}),I(1,"i",23),m()}}function Ea(e,t){if(e&1){let n=ut();p(0,"button",24),k("click",function(){ot(n);let r=G();return st(r.onConfirm())}),w(1,"\u78BA\u8A8D"),m(),p(2,"button",25),k("click",function(){ot(n);let r=G();return st(r.doDropList())}),w(3," \u53D6\u6D88 "),m()}}var to=e=>({"bg-gray-600":e}),It,ai=(It=class{get TransactionTypeEnum(){return Je}constructor(t,n,i){this.router=t,this.loaderService=n,this.ledgerService=i,this.transactionType=this.TransactionTypeEnum.Expense,this.destroy$=new P,this.tagList=[],this.keepTagList=[],this.isDrop=!1,this.transactionType=this.router?.getCurrentNavigation()?.extras.state?.transactionType||this.TransactionTypeEnum.Expense,this.onChangeTransactionType(this.transactionType)}ngOnInit(){}onChangeTransactionType(t){this.loaderService.start(),this.destroy$.next(!0),this.transactionType=t,this.tagList$=this.ledgerService.getTagList(this.transactionType).pipe(ti(this)),this.tagList$.pipe(Ft(this.destroy$)).subscribe(n=>{this.loaderService.stop(),this.tagList=n})}goToEditTag(t){this.router.navigate(["/setting/addTag"],{state:{docId:t,transactionType:this.transactionType,tagStatus:U.Edit}})}onClickAddTag(){this.router.navigate(["/setting/addTag"],{state:{transactionType:this.transactionType,tagStatus:U.Add}})}doDropList(){this.isDrop?(this.tagList=this.keepTagList,this.isDrop=!1):(this.keepTagList=structuredClone(this.tagList),this.isDrop=!0)}dropTag(t){let n=structuredClone(this.tagList),i=n[t.previousIndex],r=[...n.slice(0,t.previousIndex),...n.slice(t.previousIndex+1)],o=[...r.slice(0,t.currentIndex),i,...r.slice(t.currentIndex)];this.tagList=o.map((s,a)=>Kt(Qt({},s),{sort:a}))}onConfirm(){return me(this,null,function*(){this.loaderService.start(),yield this.ledgerService.updateTagsSort(this.tagList).then(()=>{this.isDrop=!1,this.keepTagList=[]}).catch(t=>{this.doDropList(),console.error("Error in batch update:",t)}).finally(()=>{this.loaderService.stop()})})}},It.\u0275fac=function(n){return new(n||It)(b(Dt),b(ee),b(Et))},It.\u0275cmp=Q({type:It,selectors:[["app-tags-manage"]],standalone:!0,features:[K],decls:28,vars:7,consts:[[1,"bg-gray-800","text-white","h-dvh"],[1,"bg-gray-800","py-4"],[1,"sticky","top-0","bg-gray-800"],[1,"flex","justify-between","items-center","px-4","mb-4"],["routerLink","/setting",1,"text-white"],[1,"fas","fa-arrow-left"],[1,"text-lg","font-semibold"],[3,"click"],[1,"fas","fa-bars","me-1"],[1,"flex","justify-around","items-center","mb-3"],[1,"w-1/2","p-4","border-y-2","border-gray-900",3,"ngClass","click"],[1,"fas","fa-arrow-up"],[1,"block","text-xs"],[1,"fas","fa-arrow-down"],["cdkDropList","",1,"space-y-2",3,"cdkDropListDropped"],[1,"sticky","bottom-0"],[1,"flex","justify-around","items-center","bg-gray-500"],["class","p-4 flex-1"],[1,"flex","items-center","justify-between","px-4","py-3","bg-gray-700",3,"click"],[1,"flex","items-center"],[3,"ngClass"],["cdkDrag","",3,"cdkDragDisabled"],[1,"p-4","flex-1",3,"click"],[1,"fas","fa-plus"],[1,"flex-1","p-4",3,"click"],[1,"flex-1","p-4","bg-gray-600",3,"click"],["class","flex items-center justify-between px-4 py-3 bg-gray-700"]],template:function(n,i){n&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),I(5,"i",5),m(),p(6,"h1",6),w(7,"\u985E\u5225\u7BA1\u7406"),m(),p(8,"button",7),k("click",function(){return i.doDropList()}),I(9,"i",8),p(10,"span"),w(11,"\u6392\u5E8F"),m()()(),p(12,"div",9)(13,"button",10),k("click",function(){return i.onChangeTransactionType(i.TransactionTypeEnum.Expense)}),I(14,"i",11),p(15,"span",12),w(16,"\u652F\u51FA"),m()(),p(17,"button",10),k("click",function(){return i.onChangeTransactionType(i.TransactionTypeEnum.Income)}),I(18,"i",13),p(19,"span",12),w(20,"\u6536\u5165"),m()()()(),p(21,"div",14),k("cdkDropListDropped",function(o){return i.dropTag(o)}),xt(22,Ca,7,4,"div",26,ba),m()(),p(24,"div",15)(25,"div",16),ct(26,Ta,2,0,"button",17)(27,Ea,4,0),m()()()),n&2&&(T(13),O("ngClass",tt(3,to,i.transactionType===i.TransactionTypeEnum.Expense)),T(4),O("ngClass",tt(5,to,i.transactionType===i.TransactionTypeEnum.Income)),T(5),vt(i.tagList),T(4),Bt(26,i.isDrop?27:26))},dependencies:[Tt,St,Ct,Jr,Kr],styles:["[_nghost-%COMP%]{display:block}"]}),It);ai=te([re()],ai);var Ia=e=>({"bg-gray-500":e});function ka(e,t){if(e&1){let n=ut();p(0,"button",14),k("click",function(){let o=ot(n).$implicit,s=G();return st(s.onClickTag(o))}),I(1,"i",15),m()}if(e&2){let n=t.$implicit,i=G();O("ngClass",tt(2,Ia,i.selectedTag===n)),T(),O("ngClass",n)}}function Pa(e,t){if(e&1){let n=ut();p(0,"button",16),k("click",function(){ot(n);let r=G();return st(r.onClickRemoveTag())}),I(1,"i",17),m()}}var kt,li=(kt=class{constructor(t,n,i,r){this.router=t,this.loaderService=n,this.route=i,this.ledgerService=r,this.selectedTag="",this.tagname="",this.lastSort=0,this.docId="",this.tagList=["fas fa-bread-slice","fas fa-tshirt","fas fa-candy-cane","fas fa-bus","fas fa-shopping-cart","fas fa-coffee","fas fa-headphones","fas fa-utensils","fas fa-book","fas fa-hospital","fas fa-tag","fas fa-phone","fas fa-user","fas fa-home","fas fa-hamburger","far fa-credit-card","fas fa-gift","fas fa-hand-holding-heart","fas fa-landmark","fas fa-comment-dollar","fas fa-wine-glass-alt","fas fa-store"];let o=this.route.snapshot.data.data;this.tagStatus=o.tagStatus,o.tagStatus===U.Edit?(this.docId=o.docId,this.lastSort=o.lastSort,this.selectedTag=o.selectedTag,this.tagname=o.tagName):o.tagStatus===U.Add?(this.transactionType=o.transactionType,this.lastSort=o.lastSort):this.router.navigateByUrl("/setting/tagsManage")}ngOnInit(){}onClickTag(t){if(this.selectedTag===t){this.selectedTag="";return}this.selectedTag=t}onClickAddTag(){let t=this.tagname.trim();if(!t||!this.selectedTag){alert("Tag name is empty");return}if(!this.selectedTag){alert("Tag icon is empty");return}this.addTag(t,this.selectedTag)}addTag(t,n){return me(this,null,function*(){this.loaderService.start(),this.tagStatus===U.Add?yield this.ledgerService.addTagDoc({tagName:t,tagIconName:n,sort:this.lastSort,transactionType:this.transactionType}).catch(i=>{console.error("Error adding document: ",i)}).then(()=>{this.router.navigateByUrl("/setting/tagsManage",{state:{transactionType:this.transactionType}})}).finally(()=>this.loaderService.stop()):this.tagStatus===U.Edit?yield this.ledgerService.updateTagDoc(this.docId,n,t).catch(i=>{console.error("Error adding document: ",i)}).then(()=>{this.router.navigateByUrl("/setting/tagsManage",{state:{transactionType:this.transactionType}})}).finally(()=>this.loaderService.stop()):this.loaderService.stop()})}onClickRemoveTag(){return me(this,null,function*(){this.tagStatus!==U.Add&&this.tagStatus===U.Edit&&(this.loaderService.start(),yield this.ledgerService.removeTagDoc(this.docId).then(()=>{this.router.navigateByUrl("/setting/tagsManage",{state:{transactionType:this.transactionType}})}).catch(t=>{console.error("Error removing document: ",t)}).finally(()=>this.loaderService.stop()))})}},kt.\u0275fac=function(n){return new(n||kt)(b(Dt),b(ee),b(ir),b(Et))},kt.\u0275cmp=Q({type:kt,selectors:[["app-add-tag"]],standalone:!0,features:[K],decls:19,vars:2,consts:[[1,"bg-gray-800","text-white","h-dvh"],[1,"py-4"],[1,"flex","justify-between","items-center","px-4","mb-4"],["routerLink","/setting/tagsManage",1,"text-white"],[1,"fas","fa-arrow-left"],[1,"text-lg","font-semibold"],[1,"relative","m-5","mb-4"],["for","tagName",1,"leading-7","text-sm","text-gray-200"],["autocomplete","off","id","tagName","type","text",1,"w-full","bg-gray-800","rounded","border","border-gray-700","focus:border-indigo-500","focus:ring-2","focus:ring-indigo-900","text-base","outline-none","text-gray-100","py-1","px-3","leading-8","transition-colors","duration-200","ease-in-out",3,"ngModel","ngModelChange"],[1,"m-5","border-2","p-1","flex","flex-wrap"],[1,"flex","w-full"],[1,"bg-gray-600","p-4","flex-1",3,"click"],[1,"fas","fa-check"],["class","bg-gray-700 p-4 flex-1"],[1,"p-4","w-1/5",3,"ngClass","click"],[3,"ngClass"],[1,"bg-gray-700","p-4","flex-1",3,"click"],[1,"fas","fa-trash"],["class","p-4 w-1/5",3,"ngClass"]],template:function(n,i){n&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),I(4,"i",4),m(),p(5,"h1",5),w(6,"\u65B0\u589E\u985E\u5225"),m(),I(7,"div"),m(),p(8,"div",6)(9,"label",7),w(10,"\u8ACB\u81EA\u5B9A\u7FA9\u6A19\u7C64\u540D\u7A31"),m(),p(11,"input",8),k("ngModelChange",function(o){return i.tagname=o}),m()(),p(12,"div",9),xt(13,ka,2,4,"button",18,Zn),m(),p(15,"div",10)(16,"button",11),k("click",function(){return i.onClickAddTag()}),I(17,"i",12),m(),ct(18,Pa,2,0,"button",13),m()()()),n&2&&(T(11),O("ngModel",i.tagname),T(2),vt(i.tagList),T(5),Bt(18,i.docId?18:-1))},dependencies:[er,St,nr,Ct,gr,ie,ne,Ke],styles:["[_nghost-%COMP%]{display:block}"]}),kt);li=te([re()],li);var ro=()=>{let e=Yi(Et),t=Yi(Dt),n=t?.getCurrentNavigation()?.extras.state?.docId,i=t?.getCurrentNavigation()?.extras.state?.transactionType,r=t?.getCurrentNavigation()?.extras.state?.tagStatus;if(r===U.Edit)return e.getTagInfo(n).then(o=>{if(o.exists()){let s=o.data();return{tagStatus:r,docId:n,lastSort:s.sort,selectedTag:s.tagIconName,tagName:s.tagName}}else t.navigate(["/setting/tags-manage"])});if(r===U.Add&&i)return e.getTagLastSort(Je.Expense).pipe(Lt(1)).pipe(qe(o=>({tagStatus:r,transactionType:i,lastSort:o})));t.navigate(["/setting/tags-manage"])};var Ra=["templateRef"],Aa=e=>({"bg-slate-600":e});function Ma(e,t){if(e&1){let n=ut();p(0,"div",20),k("click",function(){let o=ot(n).$implicit,s=G(2);return st(s.onClickDate(o))}),w(1),m()}if(e&2){let n=t.$implicit,i=G(2);O("ngClass",tt(2,Aa,i.selectedDate===n)),T(),bt(" ",n," ")}}function Oa(e,t){if(e&1&&(p(0,"div",19),xt(1,Ma,2,4,"div",21,Yn),m()),e&2){let n=G();T(),vt(n.dateNumList)}}var oo=(()=>{let t=class t{constructor(i){this.modalService=i,this.dateNumList=Array.from({length:31}).map((r,o)=>o+1),this.selectedDate=parseInt(localStorage.getItem("selectedDate")||"0"),this.showBudget=localStorage.getItem("showBudget")==="1",this.showBudgetDisabled=!1,this.budgetAmount=parseInt(localStorage.getItem("budgetAmount")||"0")}ngOnInit(){this.showBudgetDisabled=!this.selectedDate}onChangeBudgetAmount(){localStorage.setItem("budgetAmount",`${this.budgetAmount}`),!this.budgetAmount||this.budgetAmount===0?(this.showBudget=!1,this.showBudgetDisabled=!0,this.onChangeShowBudget()):this.showBudgetDisabled=!1}onChangeShowBudget(){localStorage.setItem("showBudget",this.showBudget?"1":"0")}onClickDate(i){i===this.selectedDate?(this.selectedDate=0,localStorage.setItem("selectedDate",""),this.showBudgetDisabled=!0):(this.selectedDate=i,localStorage.setItem("selectedDate",`${i}`),this.showBudgetDisabled=!1)}onSelectDate(){this.modalService.openConfirm({title:"\u9078\u64C7\u65E5\u671F",okText:"\u78BA\u8A8D",showCancelBtn:!1,outsideClose:!1,contentTemplateRef:this.templateRef,onOk:()=>{this.showBudget=this.selectedDate!==0,this.onChangeShowBudget()}})}};t.\u0275fac=function(r){return new(r||t)(b(Qe))},t.\u0275cmp=Q({type:t,selectors:[["app-budget"]],viewQuery:function(r,o){if(r&1&&Xe(Ra,5),r&2){let s;yt(s=wt())&&(o.templateRef=s.first)}},standalone:!0,features:[K],decls:28,vars:4,consts:[[1,"bg-orange-200"],[1,"bg-orange-600","p-4"],["routerLink","/",1,"text-white"],[1,"fas","fa-arrow-left"],[1,"bg-orange-500","p-4","justify-center","items-center","text-white","flex"],[1,"text-3xl","me-3"],["autocomplete","off","type","number","inputmode","numeric",1,"w-full","text-right","bg-red-600","rounded","border","border-red-700","focus:border-red-500","focus:ring-2","focus:ring-red-900","text-3xl","outline-none","text-gray-100","py-1","px-3","leading-8","transition-colors","duration-200","ease-in-out",3,"ngModel","ngModelChange"],["priceInput",""],[1,"bg-orange-300","p-4","flex","justify-between","text-white",3,"click"],[1,"flex","items-center"],[1,"fas","fa-calendar-alt"],[1,"ml-2"],[1,"bg-white","p-4","flex","justify-between","items-center"],[1,"fas","fa-piggy-bank","text-gray-600"],[1,"ml-2","text-gray-600"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox",1,"sr-only","peer",3,"ngModel","disabled","ngModelChange"],[1,"w-11","h-6","bg-gray-200","rounded-full","peer","dark:bg-gray-300","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-0.5","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-blue-600"],["templateRef",""],[1,"flex","flex-wrap"],[1,"w-1/6","p-2","text-2xl","bg-slate-500","flex","justify-center","items-center","border","border-slate-700",3,"ngClass","click"],["class","w-1/6 p-2 text-2xl bg-slate-500 flex justify-center items-center border border-slate-700",3,"ngClass"]],template:function(r,o){r&1&&(p(0,"div",0)(1,"div",1)(2,"button",2),I(3,"i",3),m()(),p(4,"div",4)(5,"div",5),w(6,"TWD"),m(),p(7,"div")(8,"input",6,7),k("ngModelChange",function(a){return o.budgetAmount=a})("ngModelChange",function(){return o.onChangeBudgetAmount()}),m()()(),p(10,"div",8),k("click",function(){return o.onSelectDate()}),p(11,"button",9),I(12,"i",10),p(13,"span",11),w(14,"\u9810\u7B97\u9031\u671F"),m()(),p(15,"button",9)(16,"span"),w(17),m()()(),p(18,"div",12)(19,"div",9),I(20,"i",13),p(21,"span",14),w(22,"\u986F\u793A\u9810\u7B97"),m()(),p(23,"label",15)(24,"input",16),k("ngModelChange",function(a){return o.showBudget=a})("ngModelChange",function(){return o.onChangeShowBudget()}),m(),I(25,"div",17),m()()(),ct(26,Oa,3,0,"ng-template",null,18,Jn)),r&2&&(T(8),O("ngModel",o.budgetAmount),T(9),bt("\u8D77\u59CB\u65BC\u6BCF\u6708\u7B2C",o.selectedDate," \u5929"),T(7),O("ngModel",o.showBudget)("disabled",o.showBudgetDisabled))},dependencies:[Tt,St,ie,dr,ur,ne,Ke,Ct],styles:["[_nghost-%COMP%]{display:block}"]});let e=t;return e})();var Bi=la(ca());var ae=function(e){return e.Range_TAB="range",e.CUSTOM_TAB="custom",e}(ae||{});var le=class extends Map{constructor(t,n=Fa){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(let[i,r]of t)this.set(i,r)}get(t){return super.get(so(this,t))}has(t){return super.has(so(this,t))}set(t,n){return super.set(Na(this,t),n)}delete(t){return super.delete(La(this,t))}};function so({_intern:e,_key:t},n){let i=t(n);return e.has(i)?e.get(i):n}function Na({_intern:e,_key:t},n){let i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function La({_intern:e,_key:t},n){let i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function Fa(e){return e!==null&&typeof e=="object"?e.valueOf():e}var $a={value:()=>{}};function lo(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new ci(n)}function ci(e){this._=e}function Ba(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}ci.prototype=lo.prototype={constructor:ci,on:function(e,t){var n=this._,i=Ba(e+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(e=i[o]).type)&&(r=za(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(r=(e=i[o]).type)n[r]=ao(n[r],e.name,t);else if(t==null)for(r in n)n[r]=ao(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ci(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};function za(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function ao(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=$a,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var _n=lo;var ui="http://www.w3.org/1999/xhtml",xn={svg:"http://www.w3.org/2000/svg",xhtml:ui,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ft(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),xn.hasOwnProperty(t)?{space:xn[t],local:e}:e}function Ha(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ui&&t.documentElement.namespaceURI===ui?t.createElement(e):t.createElementNS(n,e)}}function Va(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function fi(e){var t=ft(e);return(t.local?Va:Ha)(t)}function qa(){}function zt(e){return e==null?qa:function(){return this.querySelector(e)}}function co(e){typeof e!="function"&&(e=zt(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=new Array(s),l,c,u=0;u<s;++u)(l=o[u])&&(c=e.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new A(i,this._parents)}function vn(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ga(){return[]}function ye(e){return e==null?Ga:function(){return this.querySelectorAll(e)}}function ja(e){return function(){return vn(e.apply(this,arguments))}}function uo(e){typeof e=="function"?e=ja(e):e=ye(e);for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(i.push(e.call(l,l.__data__,c,s)),r.push(l));return new A(i,r)}function we(e){return function(){return this.matches(e)}}function hi(e){return function(t){return t.matches(e)}}var Ua=Array.prototype.find;function Wa(e){return function(){return Ua.call(this.children,e)}}function Xa(){return this.firstElementChild}function fo(e){return this.select(e==null?Xa:Wa(typeof e=="function"?e:hi(e)))}var Ya=Array.prototype.filter;function Za(){return Array.from(this.children)}function Qa(e){return function(){return Ya.call(this.children,e)}}function ho(e){return this.selectAll(e==null?Za:Qa(typeof e=="function"?e:hi(e)))}function po(e){typeof e!="function"&&(e=we(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=[],l,c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new A(i,this._parents)}function di(e){return new Array(e.length)}function mo(){return new A(this._enter||this._groups.map(di),this._parents)}function be(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}be.prototype={constructor:be,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function go(e){return function(){return e}}function Ka(e,t,n,i,r,o){for(var s=0,a,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],i[s]=a):n[s]=new be(e,o[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function Ja(e,t,n,i,r,o,s){var a,l,c=new Map,u=t.length,h=o.length,f=new Array(u),d;for(a=0;a<u;++a)(l=t[a])&&(f[a]=d=s.call(l,l.__data__,a,t)+"",c.has(d)?r[a]=l:c.set(d,l));for(a=0;a<h;++a)d=s.call(e,o[a],a,o)+"",(l=c.get(d))?(i[a]=l,l.__data__=o[a],c.delete(d)):n[a]=new be(e,o[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(f[a])===l&&(r[a]=l)}function tl(e){return e.__data__}function _o(e,t){if(!arguments.length)return Array.from(this,tl);var n=t?Ja:Ka,i=this._parents,r=this._groups;typeof e!="function"&&(e=go(e));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=i[c],h=r[c],f=h.length,d=el(e.call(u,u&&u.__data__,c,i)),g=d.length,x=a[c]=new Array(g),v=s[c]=new Array(g),S=l[c]=new Array(f);n(u,h,x,v,S,d,t);for(var _=0,D=0,C,R;_<g;++_)if(C=x[_]){for(_>=D&&(D=_+1);!(R=v[D])&&++D<g;);C._next=R||null}}return s=new A(s,i),s._enter=a,s._exit=l,s}function el(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xo(){return new A(this._exit||this._groups.map(di),this._parents)}function vo(e,t,n){var i=this.enter(),r=this,o=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function yo(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var c=n[l],u=i[l],h=c.length,f=a[l]=new Array(h),d,g=0;g<h;++g)(d=c[g]||u[g])&&(f[g]=d);for(;l<r;++l)a[l]=n[l];return new A(a,this._parents)}function wo(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function bo(e){e||(e=il);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],a=s.length,l=r[o]=new Array(a),c,u=0;u<a;++u)(c=s[u])&&(l[u]=c);l.sort(t)}return new A(r,this._parents).order()}function il(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function So(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Do(){return Array.from(this)}function Co(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function To(){let e=0;for(let t of this)++e;return e}function Eo(){return!this.node()}function Io(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],o=0,s=r.length,a;o<s;++o)(a=r[o])&&e.call(a,a.__data__,o,r);return this}function nl(e){return function(){this.removeAttribute(e)}}function rl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ol(e,t){return function(){this.setAttribute(e,t)}}function sl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function al(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ll(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ko(e,t){var n=ft(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?rl:nl:typeof t=="function"?n.local?ll:al:n.local?sl:ol)(n,t))}function pi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function cl(e){return function(){this.style.removeProperty(e)}}function ul(e,t,n){return function(){this.style.setProperty(e,t,n)}}function fl(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Po(e,t,n){return arguments.length>1?this.each((t==null?cl:typeof t=="function"?fl:ul)(e,t,n??"")):Pt(this.node(),e)}function Pt(e,t){return e.style.getPropertyValue(t)||pi(e).getComputedStyle(e,null).getPropertyValue(t)}function hl(e){return function(){delete this[e]}}function dl(e,t){return function(){this[e]=t}}function pl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ro(e,t){return arguments.length>1?this.each((t==null?hl:typeof t=="function"?pl:dl)(e,t)):this.node()[e]}function Ao(e){return e.trim().split(/^|\s+/)}function yn(e){return e.classList||new Mo(e)}function Mo(e){this._node=e,this._names=Ao(e.getAttribute("class")||"")}Mo.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Oo(e,t){for(var n=yn(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function No(e,t){for(var n=yn(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function ml(e){return function(){Oo(this,e)}}function gl(e){return function(){No(this,e)}}function _l(e,t){return function(){(t.apply(this,arguments)?Oo:No)(this,e)}}function Lo(e,t){var n=Ao(e+"");if(arguments.length<2){for(var i=yn(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?_l:t?ml:gl)(n,t))}function xl(){this.textContent=""}function vl(e){return function(){this.textContent=e}}function yl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Fo(e){return arguments.length?this.each(e==null?xl:(typeof e=="function"?yl:vl)(e)):this.node().textContent}function wl(){this.innerHTML=""}function bl(e){return function(){this.innerHTML=e}}function Sl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function $o(e){return arguments.length?this.each(e==null?wl:(typeof e=="function"?Sl:bl)(e)):this.node().innerHTML}function Dl(){this.nextSibling&&this.parentNode.appendChild(this)}function Bo(){return this.each(Dl)}function Cl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zo(){return this.each(Cl)}function Ho(e){var t=typeof e=="function"?e:fi(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Tl(){return null}function Vo(e,t){var n=typeof e=="function"?e:fi(e),i=t==null?Tl:typeof t=="function"?t:zt(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function El(){var e=this.parentNode;e&&e.removeChild(this)}function qo(){return this.each(El)}function Il(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Go(e){return this.select(e?kl:Il)}function jo(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Pl(e){return function(t){e.call(this,t,this.__data__)}}function Rl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Al(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,o;n<r;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++i]=o;++i?t.length=i:delete this.__on}}}function Ml(e,t,n){return function(){var i=this.__on,r,o=Pl(t);if(i){for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=t;return}}this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Uo(e,t,n){var i=Rl(e+""),r,o=i.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<o;++r)if((s=i[r]).type===u.type&&s.name===u.name)return u.value}return}for(a=t?Ml:Al,r=0;r<o;++r)this.each(a(i[r],t,n));return this}function Wo(e,t,n){var i=pi(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Ol(e,t){return function(){return Wo(this,e,t)}}function Nl(e,t){return function(){return Wo(this,e,t.apply(this,arguments))}}function Xo(e,t){return this.each((typeof t=="function"?Nl:Ol)(e,t))}function*Yo(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var wn=[null];function A(e,t){this._groups=e,this._parents=t}function Zo(){return new A([[document.documentElement]],wn)}function Ll(){return this}A.prototype=Zo.prototype={constructor:A,select:co,selectAll:uo,selectChild:fo,selectChildren:ho,filter:po,data:_o,enter:mo,exit:xo,join:vo,merge:yo,selection:Ll,order:wo,sort:bo,call:So,nodes:Do,node:Co,size:To,empty:Eo,each:Io,attr:ko,style:Po,property:Ro,classed:Lo,text:Fo,html:$o,raise:Bo,lower:zo,append:Ho,insert:Vo,remove:qo,clone:Go,datum:jo,on:Uo,dispatch:Xo,[Symbol.iterator]:Yo};var ht=Zo;function mi(e){return typeof e=="string"?new A([[document.querySelector(e)]],[document.documentElement]):new A([[e]],wn)}function gi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function bn(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Ce(){}var Se=.7,vi=1/Se,ce="\\s*([+-]?\\d+)\\s*",De="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",at="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fl=/^#([0-9a-f]{3,8})$/,$l=new RegExp(`^rgb\\(${ce},${ce},${ce}\\)$`),Bl=new RegExp(`^rgb\\(${at},${at},${at}\\)$`),zl=new RegExp(`^rgba\\(${ce},${ce},${ce},${De}\\)$`),Hl=new RegExp(`^rgba\\(${at},${at},${at},${De}\\)$`),Vl=new RegExp(`^hsl\\(${De},${at},${at}\\)$`),ql=new RegExp(`^hsla\\(${De},${at},${at},${De}\\)$`),Qo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gi(Ce,it,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ko,formatHex:Ko,formatHex8:Gl,formatHsl:jl,formatRgb:Jo,toString:Jo});function Ko(){return this.rgb().formatHex()}function Gl(){return this.rgb().formatHex8()}function jl(){return os(this).formatHsl()}function Jo(){return this.rgb().formatRgb()}function it(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Fl.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ts(t):n===3?new W(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?_i(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?_i(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$l.exec(e))?new W(t[1],t[2],t[3],1):(t=Bl.exec(e))?new W(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=zl.exec(e))?_i(t[1],t[2],t[3],t[4]):(t=Hl.exec(e))?_i(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Vl.exec(e))?ns(t[1],t[2]/100,t[3]/100,1):(t=ql.exec(e))?ns(t[1],t[2]/100,t[3]/100,t[4]):Qo.hasOwnProperty(e)?ts(Qo[e]):e==="transparent"?new W(NaN,NaN,NaN,0):null}function ts(e){return new W(e>>16&255,e>>8&255,e&255,1)}function _i(e,t,n,i){return i<=0&&(e=t=n=NaN),new W(e,t,n,i)}function Ul(e){return e instanceof Ce||(e=it(e)),e?(e=e.rgb(),new W(e.r,e.g,e.b,e.opacity)):new W}function ue(e,t,n,i){return arguments.length===1?Ul(e):new W(e,t,n,i??1)}function W(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}gi(W,ue,bn(Ce,{brighter(e){return e=e==null?vi:Math.pow(vi,e),new W(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Se:Math.pow(Se,e),new W(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new W(Vt(this.r),Vt(this.g),Vt(this.b),yi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:es,formatHex:es,formatHex8:Wl,formatRgb:is,toString:is}));function es(){return`#${Ht(this.r)}${Ht(this.g)}${Ht(this.b)}`}function Wl(){return`#${Ht(this.r)}${Ht(this.g)}${Ht(this.b)}${Ht((isNaN(this.opacity)?1:this.opacity)*255)}`}function is(){let e=yi(this.opacity);return`${e===1?"rgb(":"rgba("}${Vt(this.r)}, ${Vt(this.g)}, ${Vt(this.b)}${e===1?")":`, ${e})`}`}function yi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Vt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ht(e){return e=Vt(e),(e<16?"0":"")+e.toString(16)}function ns(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new et(e,t,n,i)}function os(e){if(e instanceof et)return new et(e.h,e.s,e.l,e.opacity);if(e instanceof Ce||(e=it(e)),!e)return new et;if(e instanceof et)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(t===o?s=(n-i)/a+(n<i)*6:n===o?s=(i-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new et(s,a,l,e.opacity)}function ss(e,t,n,i){return arguments.length===1?os(e):new et(e,t,n,i??1)}function et(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}gi(et,ss,bn(Ce,{brighter(e){return e=e==null?vi:Math.pow(vi,e),new et(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Se:Math.pow(Se,e),new et(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new W(Sn(e>=240?e-240:e+120,r,i),Sn(e,r,i),Sn(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new et(rs(this.h),xi(this.s),xi(this.l),yi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=yi(this.opacity);return`${e===1?"hsl(":"hsla("}${rs(this.h)}, ${xi(this.s)*100}%, ${xi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rs(e){return e=(e||0)%360,e<0?e+360:e}function xi(e){return Math.max(0,Math.min(1,e||0))}function Sn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function Dn(e,t,n,i,r){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*i+s*r)/6}function as(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],o=e[i+1],s=i>0?e[i-1]:2*r-o,a=i<t-1?e[i+2]:2*o-r;return Dn((n-i/t)*t,s,r,o,a)}}function ls(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],o=e[i%t],s=e[(i+1)%t],a=e[(i+2)%t];return Dn((n-i/t)*t,r,o,s,a)}}var Te=e=>()=>e;function Xl(e,t){return function(n){return e+n*t}}function Yl(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function cs(e){return(e=+e)==1?wi:function(t,n){return n-t?Yl(t,n,e):Te(isNaN(t)?n:t)}}function wi(e,t){var n=t-e;return n?Xl(e,n):Te(isNaN(e)?t:e)}var qt=function e(t){var n=cs(t);function i(r,o){var s=n((r=ue(r)).r,(o=ue(o)).r),a=n(r.g,o.g),l=n(r.b,o.b),c=wi(r.opacity,o.opacity);return function(u){return r.r=s(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=e,i}(1);function us(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=ue(t[s]),i[s]=a.r||0,r[s]=a.g||0,o[s]=a.b||0;return i=e(i),r=e(r),o=e(o),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=o(l),a+""}}}var Zl=us(as),Ql=us(ls);function fs(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=e[r]*(1-o)+t[r]*o;return i}}function hs(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ds(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),o=new Array(n),s;for(s=0;s<i;++s)r[s]=Gt(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<i;++s)o[s]=r[s](a);return o}}function ps(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function z(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ms(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Gt(e[r],t[r]):i[r]=t[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var Tn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cn=new RegExp(Tn.source,"g");function Kl(e){return function(){return e}}function Jl(e){return function(t){return e(t)+""}}function Ee(e,t){var n=Tn.lastIndex=Cn.lastIndex=0,i,r,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(i=Tn.exec(e))&&(r=Cn.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:z(i,r)})),n=Cn.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Jl(l[0].x):Kl(t):(t=l.length,function(c){for(var u=0,h;u<t;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}function Gt(e,t){var n=typeof t,i;return t==null||n==="boolean"?Te(t):(n==="number"?z:n==="string"?(i=it(t))?(t=i,qt):Ee:t instanceof it?qt:t instanceof Date?ps:hs(t)?fs:Array.isArray(t)?ds:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ms:z)(e,t)}var gs=180/Math.PI,bi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function En(e,t,n,i,r,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*gs,skewX:Math.atan(l)*gs,scaleX:s,scaleY:a}}var Si;function _s(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?bi:En(t.a,t.b,t.c,t.d,t.e,t.f)}function xs(e){return e==null?bi:(Si||(Si=document.createElementNS("http://www.w3.org/2000/svg","g")),Si.setAttribute("transform",e),(e=Si.transform.baseVal.consolidate())?(e=e.matrix,En(e.a,e.b,e.c,e.d,e.e,e.f)):bi)}function vs(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}function o(c,u,h,f,d,g){if(c!==h||u!==f){var x=d.push("translate(",null,t,null,n);g.push({i:x-4,x:z(c,h)},{i:x-2,x:z(u,f)})}else(h||f)&&d.push("translate("+h+t+f+n)}function s(c,u,h,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:h.push(r(h)+"rotate(",null,i)-2,x:z(c,u)})):u&&h.push(r(h)+"rotate("+u+i)}function a(c,u,h,f){c!==u?f.push({i:h.push(r(h)+"skewX(",null,i)-2,x:z(c,u)}):u&&h.push(r(h)+"skewX("+u+i)}function l(c,u,h,f,d,g){if(c!==h||u!==f){var x=d.push(r(d)+"scale(",null,",",null,")");g.push({i:x-4,x:z(c,h)},{i:x-2,x:z(u,f)})}else(h!==1||f!==1)&&d.push(r(d)+"scale("+h+","+f+")")}return function(c,u){var h=[],f=[];return c=e(c),u=e(u),o(c.translateX,c.translateY,u.translateX,u.translateY,h,f),s(c.rotate,u.rotate,h,f),a(c.skewX,u.skewX,h,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,f),c=u=null,function(d){for(var g=-1,x=f.length,v;++g<x;)h[(v=f[g]).i]=v.x(d);return h.join("")}}}var In=vs(_s,"px, ","px)","deg)"),kn=vs(xs,", ",")",")");var fe=0,ke=0,Ie=0,ws=1e3,Di,Pe,Ci=0,jt=0,Ti=0,Re=typeof performance=="object"&&performance.now?performance:Date,bs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Me(){return jt||(bs(tc),jt=Re.now()+Ti)}function tc(){jt=0}function Ae(){this._call=this._time=this._next=null}Ae.prototype=Ei.prototype={constructor:Ae,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Me():+n)+(t==null?0:+t),!this._next&&Pe!==this&&(Pe?Pe._next=this:Di=this,Pe=this),this._call=e,this._time=n,Pn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Pn())}};function Ei(e,t,n){var i=new Ae;return i.restart(e,t,n),i}function Ss(){Me(),++fe;for(var e=Di,t;e;)(t=jt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fe}function ys(){jt=(Ci=Re.now())+Ti,fe=ke=0;try{Ss()}finally{fe=0,ic(),jt=0}}function ec(){var e=Re.now(),t=e-Ci;t>ws&&(Ti-=t,Ci=e)}function ic(){for(var e,t=Di,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Di=n);Pe=e,Pn(i)}function Pn(e){if(!fe){ke&&(ke=clearTimeout(ke));var t=e-jt;t>24?(e<1/0&&(ke=setTimeout(ys,e-Re.now()-Ti)),Ie&&(Ie=clearInterval(Ie))):(Ie||(Ci=Re.now(),Ie=setInterval(ec,ws)),fe=1,bs(ys))}}function Ii(e,t,n){var i=new Ae;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var nc=_n("start","end","cancel","interrupt"),rc=[],Ts=0,Ds=1,Pi=2,ki=3,Cs=4,Ri=5,Oe=6;function Rt(e,t,n,i,r,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;oc(e,n,{name:t,index:i,group:r,on:nc,tween:rc,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ts})}function Ne(e,t){var n=N(e,t);if(n.state>Ts)throw new Error("too late; already scheduled");return n}function L(e,t){var n=N(e,t);if(n.state>ki)throw new Error("too late; already running");return n}function N(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function oc(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=Ei(o,0,n.time);function o(c){n.state=Ds,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var u,h,f,d;if(n.state!==Ds)return l();for(u in i)if(d=i[u],d.name===n.name){if(d.state===ki)return Ii(s);d.state===Cs?(d.state=Oe,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[u]):+u<t&&(d.state=Oe,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[u])}if(Ii(function(){n.state===ki&&(n.state=Cs,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Pi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Pi){for(n.state=ki,r=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=d);r.length=h+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Ri,1),h=-1,f=r.length;++h<f;)r[h].call(e,u);n.state===Ri&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Oe,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function Ai(e,t){var n=e.__transition,i,r,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((i=n[s]).name!==t){o=!1;continue}r=i.state>Pi&&i.state<Ri,i.state=Oe,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[s]}o&&delete e.__transition}}function Es(e){return this.each(function(){Ai(this,e)})}function sc(e,t){var n,i;return function(){var r=L(this,e),o=r.tween;if(o!==n){i=n=o;for(var s=0,a=i.length;s<a;++s)if(i[s].name===t){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function ac(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=L(this,e),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}o.tween=r}}function Is(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=N(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===e)return s.value;return null}return this.each((t==null?sc:ac)(n,e,t))}function he(e,t,n){var i=e._id;return e.each(function(){var r=L(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return N(r,i).value[t]}}function Mi(e,t){var n;return(typeof t=="number"?z:t instanceof it?qt:(n=it(t))?(t=n,qt):Ee)(e,t)}function lc(e){return function(){this.removeAttribute(e)}}function cc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function uc(e,t,n){var i,r=n+"",o;return function(){var s=this.getAttribute(e);return s===r?null:s===i?o:o=t(i=s,n)}}function fc(e,t,n){var i,r=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===i?o:o=t(i=s,n)}}function hc(e,t,n){var i,r,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=t(i=s,a)))}}function dc(e,t,n){var i,r,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=t(i=s,a)))}}function ks(e,t){var n=ft(e),i=n==="transform"?kn:Mi;return this.attrTween(e,typeof t=="function"?(n.local?dc:hc)(n,i,he(this,"attr."+e,t)):t==null?(n.local?cc:lc)(n):(n.local?fc:uc)(n,i,t))}function pc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function mc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function gc(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&mc(e,o)),n}return r._value=t,r}function _c(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&pc(e,o)),n}return r._value=t,r}function Ps(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=ft(e);return this.tween(n,(i.local?gc:_c)(i,t))}function xc(e,t){return function(){Ne(this,e).delay=+t.apply(this,arguments)}}function vc(e,t){return t=+t,function(){Ne(this,e).delay=t}}function Rs(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xc:vc)(t,e)):N(this.node(),t).delay}function yc(e,t){return function(){L(this,e).duration=+t.apply(this,arguments)}}function wc(e,t){return t=+t,function(){L(this,e).duration=t}}function As(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yc:wc)(t,e)):N(this.node(),t).duration}function bc(e,t){if(typeof t!="function")throw new Error;return function(){L(this,e).ease=t}}function Ms(e){var t=this._id;return arguments.length?this.each(bc(t,e)):N(this.node(),t).ease}function Sc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;L(this,e).ease=n}}function Os(e){if(typeof e!="function")throw new Error;return this.each(Sc(this._id,e))}function Ns(e){typeof e!="function"&&(e=we(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=[],l,c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new H(i,this._parents,this._name,this._id)}function Ls(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l=t[a],c=n[a],u=l.length,h=s[a]=new Array(u),f,d=0;d<u;++d)(f=l[d]||c[d])&&(h[d]=f);for(;a<i;++a)s[a]=t[a];return new H(s,this._parents,this._name,this._id)}function Dc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Cc(e,t,n){var i,r,o=Dc(t)?Ne:L;return function(){var s=o(this,e),a=s.on;a!==i&&(r=(i=a).copy()).on(t,n),s.on=r}}function Fs(e,t){var n=this._id;return arguments.length<2?N(this.node(),n).on.on(e):this.each(Cc(n,e,t))}function Tc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function $s(){return this.on("end.remove",Tc(this._id))}function Bs(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zt(e));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a=i[s],l=a.length,c=o[s]=new Array(l),u,h,f=0;f<l;++f)(u=a[f])&&(h=e.call(u,u.__data__,f,a))&&("__data__"in u&&(h.__data__=u.__data__),c[f]=h,Rt(c[f],t,n,f,c,N(u,n)));return new H(o,this._parents,t,n)}function zs(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ye(e));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var l=i[a],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var f=e.call(u,u.__data__,h,l),d,g=N(u,n),x=0,v=f.length;x<v;++x)(d=f[x])&&Rt(d,t,n,x,f,g);o.push(f),s.push(u)}return new H(o,s,t,n)}var Ec=ht.prototype.constructor;function Hs(){return new Ec(this._groups,this._parents)}function Ic(e,t){var n,i,r;return function(){var o=Pt(this,e),s=(this.style.removeProperty(e),Pt(this,e));return o===s?null:o===n&&s===i?r:r=t(n=o,i=s)}}function Vs(e){return function(){this.style.removeProperty(e)}}function kc(e,t,n){var i,r=n+"",o;return function(){var s=Pt(this,e);return s===r?null:s===i?o:o=t(i=s,n)}}function Pc(e,t,n){var i,r,o;return function(){var s=Pt(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Pt(this,e))),s===l?null:s===i&&l===r?o:(r=l,o=t(i=s,a))}}function Rc(e,t){var n,i,r,o="style."+t,s="end."+o,a;return function(){var l=L(this,e),c=l.on,u=l.value[o]==null?a||(a=Vs(t)):void 0;(c!==n||r!==u)&&(i=(n=c).copy()).on(s,r=u),l.on=i}}function qs(e,t,n){var i=(e+="")=="transform"?In:Mi;return t==null?this.styleTween(e,Ic(e,i)).on("end.style."+e,Vs(e)):typeof t=="function"?this.styleTween(e,Pc(e,i,he(this,"style."+e,t))).each(Rc(this._id,e)):this.styleTween(e,kc(e,i,t),n).on("end.style."+e,null)}function Ac(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Mc(e,t,n){var i,r;function o(){var s=t.apply(this,arguments);return s!==r&&(i=(r=s)&&Ac(e,s,n)),i}return o._value=t,o}function Gs(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Mc(e,t,n??""))}function Oc(e){return function(){this.textContent=e}}function Nc(e){return function(){var t=e(this);this.textContent=t??""}}function js(e){return this.tween("text",typeof e=="function"?Nc(he(this,"text",e)):Oc(e==null?"":e+""))}function Lc(e){return function(t){this.textContent=e.call(this,t)}}function Fc(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Lc(r)),t}return i._value=e,i}function Us(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Fc(e))}function Ws(){for(var e=this._name,t=this._id,n=Oi(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var u=N(l,t);Rt(l,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new H(i,this._parents,e,n)}function Xs(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--r===0&&o()}};n.each(function(){var c=L(this,i),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),r===0&&o()})}var $c=0;function H(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Ys(e){return ht().transition(e)}function Oi(){return++$c}var dt=ht.prototype;H.prototype=Ys.prototype={constructor:H,select:Bs,selectAll:zs,selectChild:dt.selectChild,selectChildren:dt.selectChildren,filter:Ns,merge:Ls,selection:Hs,transition:Ws,call:dt.call,nodes:dt.nodes,node:dt.node,size:dt.size,empty:dt.empty,each:dt.each,on:Fs,attr:ks,attrTween:Ps,style:qs,styleTween:Gs,text:js,textTween:Us,remove:$s,tween:Is,delay:Rs,duration:As,ease:Ms,easeVarying:Os,end:Xs,[Symbol.iterator]:dt[Symbol.iterator]};function Ni(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Bc={time:null,delay:0,duration:250,ease:Ni};function zc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Zs(e){var t,n;e instanceof H?(t=e._id,e=e._name):(t=Oi(),(n=Bc).time=Me(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&Rt(l,e,t,c,s,n||zc(l,t));return new H(i,this._parents,e,t)}ht.prototype.interrupt=Es;ht.prototype.transition=Zs;var{abs:yg,max:wg,min:bg}=Math;function Qs(e){return[+e[0],+e[1]]}function Hc(e){return[Qs(e[0]),Qs(e[1])]}var Sg={name:"x",handles:["w","e"].map(Rn),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Dg={name:"y",handles:["n","s"].map(Rn),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Cg={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Rn),input:function(e){return e==null?null:Hc(e)},output:function(e){return e}};function Rn(e){return{type:e}}var An=Math.PI,Mn=2*An,Ut=1e-6,Vc=Mn-Ut;function Ks(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function qc(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Ks;let n=10**t;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}var Wt=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Ks:qc(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,o,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,i,r,o){if(t=+t,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=i-t,c=r-n,u=s-t,h=a-n,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Ut)if(!(Math.abs(h*l-c*u)>Ut)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let d=i-s,g=r-a,x=l*l+c*c,v=d*d+g*g,S=Math.sqrt(x),_=Math.sqrt(f),D=o*Math.tan((An-Math.acos((x+f-v)/(2*S*_)))/2),C=D/_,R=D/S;Math.abs(C-1)>Ut&&this._append`L${t+C*u},${n+C*h}`,this._append`A${o},${o},0,0,${+(h*d>u*g)},${this._x1=t+R*l},${this._y1=n+R*c}`}}arc(t,n,i,r,o,s){if(t=+t,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),c=t+a,u=n+l,h=1^s,f=s?r-o:o-r;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Ut||Math.abs(this._y1-u)>Ut)&&this._append`L${c},${u}`,i&&(f<0&&(f=f%Mn+Mn),f>Vc?this._append`A${i},${i},0,1,${h},${t-a},${n-l}A${i},${i},0,1,${h},${this._x1=c},${this._y1=u}`:f>Ut&&this._append`A${i},${i},0,${+(f>=An)},${h},${this._x1=t+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Js(){return new Wt}Js.prototype=Wt.prototype;function ta(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}var On=Symbol("implicit");function Le(){var e=new le,t=[],n=[],i=On;function r(o){let s=e.get(o);if(s===void 0){if(i!==On)return i;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return r.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new le;for(let s of o)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return Le(t,n).unknown(i)},ta.apply(r,arguments),r}function F(e){return function(){return e}}var Nn=Math.abs,$=Math.atan2,At=Math.cos,ea=Math.max,Li=Math.min,nt=Math.sin,Xt=Math.sqrt,V=1e-12,de=Math.PI,Fe=de/2,pe=2*de;function ia(e){return e>1?0:e<-1?de:Math.acos(e)}function Ln(e){return e>=1?Fe:e<=-1?-Fe:Math.asin(e)}function na(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{let i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new Wt(t)}function Gc(e){return e.innerRadius}function jc(e){return e.outerRadius}function Uc(e){return e.startAngle}function Wc(e){return e.endAngle}function Xc(e){return e&&e.padAngle}function Yc(e,t,n,i,r,o,s,a){var l=n-e,c=i-t,u=s-r,h=a-o,f=h*l-u*c;if(!(f*f<V))return f=(u*(t-o)-h*(e-r))/f,[e+f*l,t+f*c]}function Fi(e,t,n,i,r,o,s){var a=e-n,l=t-i,c=(s?o:-o)/Xt(a*a+l*l),u=c*l,h=-c*a,f=e+u,d=t+h,g=n+u,x=i+h,v=(f+g)/2,S=(d+x)/2,_=g-f,D=x-d,C=_*_+D*D,R=r-o,q=f*x-g*d,pt=(D<0?-1:1)*Xt(ea(0,R*R*C-q*q)),mt=(q*D-_*pt)/C,gt=(-q*_-D*pt)/C,rt=(q*D+_*pt)/C,Y=(-q*_+D*pt)/C,Z=mt-v,y=gt-S,E=rt-v,Nt=Y-S;return Z*Z+y*y>E*E+Nt*Nt&&(mt=rt,gt=Y),{cx:mt,cy:gt,x01:-u,y01:-h,x11:mt*(r/R-1),y11:gt*(r/R-1)}}function $i(){var e=Gc,t=jc,n=F(0),i=null,r=Uc,o=Wc,s=Xc,a=null,l=na(c);function c(){var u,h,f=+e.apply(this,arguments),d=+t.apply(this,arguments),g=r.apply(this,arguments)-Fe,x=o.apply(this,arguments)-Fe,v=Nn(x-g),S=x>g;if(a||(a=u=l()),d<f&&(h=d,d=f,f=h),!(d>V))a.moveTo(0,0);else if(v>pe-V)a.moveTo(d*At(g),d*nt(g)),a.arc(0,0,d,g,x,!S),f>V&&(a.moveTo(f*At(x),f*nt(x)),a.arc(0,0,f,x,g,S));else{var _=g,D=x,C=g,R=x,q=v,pt=v,mt=s.apply(this,arguments)/2,gt=mt>V&&(i?+i.apply(this,arguments):Xt(f*f+d*d)),rt=Li(Nn(d-f)/2,+n.apply(this,arguments)),Y=rt,Z=rt,y,E;if(gt>V){var Nt=Ln(gt/f*nt(mt)),$e=Ln(gt/d*nt(mt));(q-=Nt*2)>V?(Nt*=S?1:-1,C+=Nt,R-=Nt):(q=0,C=R=(g+x)/2),(pt-=$e*2)>V?($e*=S?1:-1,_+=$e,D-=$e):(pt=0,_=D=(g+x)/2)}var Yt=d*At(_),Zt=d*nt(_),Be=f*At(R),ze=f*nt(R);if(rt>V){var He=d*At(D),Ve=d*nt(D),Hi=f*At(C),Vi=f*nt(C),lt;if(v<de)if(lt=Yc(Yt,Zt,Hi,Vi,He,Ve,Be,ze)){var qi=Yt-lt[0],Gi=Zt-lt[1],ji=He-lt[0],Ui=Ve-lt[1],zn=1/nt(ia((qi*ji+Gi*Ui)/(Xt(qi*qi+Gi*Gi)*Xt(ji*ji+Ui*Ui)))/2),Hn=Xt(lt[0]*lt[0]+lt[1]*lt[1]);Y=Li(rt,(f-Hn)/(zn-1)),Z=Li(rt,(d-Hn)/(zn+1))}else Y=Z=0}pt>V?Z>V?(y=Fi(Hi,Vi,Yt,Zt,d,Z,S),E=Fi(He,Ve,Be,ze,d,Z,S),a.moveTo(y.cx+y.x01,y.cy+y.y01),Z<rt?a.arc(y.cx,y.cy,Z,$(y.y01,y.x01),$(E.y01,E.x01),!S):(a.arc(y.cx,y.cy,Z,$(y.y01,y.x01),$(y.y11,y.x11),!S),a.arc(0,0,d,$(y.cy+y.y11,y.cx+y.x11),$(E.cy+E.y11,E.cx+E.x11),!S),a.arc(E.cx,E.cy,Z,$(E.y11,E.x11),$(E.y01,E.x01),!S))):(a.moveTo(Yt,Zt),a.arc(0,0,d,_,D,!S)):a.moveTo(Yt,Zt),!(f>V)||!(q>V)?a.lineTo(Be,ze):Y>V?(y=Fi(Be,ze,He,Ve,f,-Y,S),E=Fi(Yt,Zt,Hi,Vi,f,-Y,S),a.lineTo(y.cx+y.x01,y.cy+y.y01),Y<rt?a.arc(y.cx,y.cy,Y,$(y.y01,y.x01),$(E.y01,E.x01),!S):(a.arc(y.cx,y.cy,Y,$(y.y01,y.x01),$(y.y11,y.x11),!S),a.arc(0,0,f,$(y.cy+y.y11,y.cx+y.x11),$(E.cy+E.y11,E.cx+E.x11),S),a.arc(E.cx,E.cy,Y,$(E.y11,E.x11),$(E.y01,E.x01),!S))):a.arc(0,0,f,R,C,S)}if(a.closePath(),u)return a=null,u+""||null}return c.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-de/2;return[At(h)*u,nt(h)*u]},c.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:F(+u),c):e},c.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:F(+u),c):t},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:F(+u),c):n},c.padRadius=function(u){return arguments.length?(i=u==null?null:typeof u=="function"?u:F(+u),c):i},c.startAngle=function(u){return arguments.length?(r=typeof u=="function"?u:F(+u),c):r},c.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:F(+u),c):o},c.padAngle=function(u){return arguments.length?(s=typeof u=="function"?u:F(+u),c):s},c.context=function(u){return arguments.length?(a=u??null,c):a},c}var Qg=Array.prototype.slice;function ra(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function oa(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function sa(e){return e}function Fn(){var e=sa,t=oa,n=null,i=F(0),r=F(pe),o=F(0);function s(a){var l,c=(a=ra(a)).length,u,h,f=0,d=new Array(c),g=new Array(c),x=+i.apply(this,arguments),v=Math.min(pe,Math.max(-pe,r.apply(this,arguments)-x)),S,_=Math.min(Math.abs(v)/c,o.apply(this,arguments)),D=_*(v<0?-1:1),C;for(l=0;l<c;++l)(C=g[d[l]=l]=+e(a[l],l,a))>0&&(f+=C);for(t!=null?d.sort(function(R,q){return t(g[R],g[q])}):n!=null&&d.sort(function(R,q){return n(a[R],a[q])}),l=0,h=f?(v-c*D)/f:0;l<c;++l,x=S)u=d[l],C=g[u],S=x+(C>0?C*h:0)+D,g[u]={data:a[u],index:l,value:C,startAngle:x,endAngle:S,padAngle:_};return g}return s.value=function(a){return arguments.length?(e=typeof a=="function"?a:F(+a),s):e},s.sortValues=function(a){return arguments.length?(t=a,n=null,s):t},s.sort=function(a){return arguments.length?(n=a,t=null,s):n},s.startAngle=function(a){return arguments.length?(i=typeof a=="function"?a:F(+a),s):i},s.endAngle=function(a){return arguments.length?(r=typeof a=="function"?a:F(+a),s):r},s.padAngle=function(a){return arguments.length?(o=typeof a=="function"?a:F(+a),s):o},s}function Mt(e,t,n){this.k=e,this.x=t,this.y=n}Mt.prototype={constructor:Mt,scale:function(e){return e===1?this:new Mt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Mt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $n=new Mt(1,0,0);Bn.prototype=Mt.prototype;function Bn(e){for(;!e.__zoom;)if(!(e=e.parentNode))return $n;return e.__zoom}var aa=(()=>{let t=class t{set pieChartItems(i){this.pieChartItemsSubject.next(i)}constructor(){this.onEmitPieChartWithColorItems=new X,this.pieChartItemsSubject=new P}ngOnInit(){this.pieChartItemsSubject.subscribe(i=>{this.init(),this.drawChart(i)})}init(){mi("#pieChart > svg").remove();let i=window.innerWidth,r=window.innerWidth;this.svg=mi("#pieChart").append("svg").attr("width",i).attr("height",r).append("g"),this.svg.append("g").attr("class","slices"),this.svg.append("g").attr("class","labels"),this.svg.append("g").attr("class","lines"),this.svg.append("g").attr("class","centerText"),this.svg.attr("transform",`translate(${i/2}, ${r/2})`)}drawChart(i){console.log("list",i);let r=window.innerWidth,o=window.innerWidth,s=Math.min(r,o)/2,a=this.enhanceArrayWithBackgroundColor(i);this.onEmitPieChartWithColorItems.emit(a);let l=Le().domain(a.map(_=>_.label)).range(a.map(_=>_.backgroundColor)),c=()=>i,u=Fn().sort(null).value(_=>_.value),h=$i().outerRadius(s*.9).innerRadius(s*.4),f=$i().outerRadius(s*.8).innerRadius(s*.8),d=c(),g=_=>_.data.label,x=this.svg.select(".slices").selectAll("path.slice").data(u(d),g);x.enter().insert("path").style("fill",function(_){return l(_.data.label)}).attr("class","slice").transition().duration(1e3).attrTween("d",function(_){let D=_,C=Gt(D,_);return D=C(0),function(R){return h(C(R))}}),x.enter().insert("text").text(_=>`${_.index}`).attr("transform",_=>"translate("+h.centroid(_)+")").style("text-anchor","middle").style("font-size",17);let v=this.svg.select(".centerText"),S=i.reduce((_,D)=>_+D.value,0);v.insert("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform","translate(0,0)").style("fill","white").style("font-size","2em").text(`$ ${S}`)}enhanceArrayWithBackgroundColor(i){let r=190,o=60,s=55;return i.map(a=>{r=(r+35)%360;let l=`hsl(${r}, ${o}%, ${s}%)`;return typeof a=="object"?Kt(Qt({},a),{backgroundColor:l}):{label:a,backgroundColor:l}})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Q({type:t,selectors:[["app-pie-chart"]],inputs:{pieChartItems:"pieChartItems"},outputs:{onEmitPieChartWithColorItems:"onEmitPieChartWithColorItems"},standalone:!0,features:[K],decls:1,vars:0,consts:[["id","pieChart",1,"flex","justify-center"]],template:function(r,o){r&1&&I(0,"div",0)},styles:["[_nghost-%COMP%]{display:block}"]});let e=t;return e})();var Qc=["rangeInput"],Kc=(e,t)=>e+t.label+t.percent+t.value;function Jc(e,t){e&1&&(p(0,"mat-error"),w(1,"\u8ACB\u9078\u64C7\u65E5\u671F"),m())}var tu=e=>({color:e});function eu(e,t){if(e&1&&(p(0,"div",21)(1,"span",22),w(2),m(),p(3,"span",23),w(4),m(),p(5,"span",24),w(6),m()()),e&2){let n=t.$implicit,i=t.$index;O("ngStyle",tt(5,tu,n.backgroundColor)),T(2),Kn("",i," ",n.label," "),T(2),bt(" ",n.percent,""),T(2),bt("$ ",n.value,"")}}var iu=e=>({selectedTab:e}),nu=e=>({selectedTab:e}),Ot,zi=(Ot=class{get DateTabsEnum(){return ae}constructor(t,n,i){this.router=t,this.ledgerService=n,this.loaderService=i,this.range=new hr({start:new an(null,[sn.required]),end:new an(null,[sn.required])}),this.dateTab=ae.Range_TAB,this.groupList=[],this.pieChartItems=[],this.rangeList=[],this.totalPriceText="";let r=this.router?.getCurrentNavigation()?.extras.state?.date||new Date;r?(this.previousDate=r,this.setRange(),this.getRangeItems()):this.dateTab=ae.CUSTOM_TAB}ngOnInit(){}onDateChange(){this.range.valid&&this.getRangeItems()}setRange(){let t=parseInt(localStorage.getItem("selectedDate")||"0"),n=(0,Bi.default)(this.previousDate),i,r;n.date()>=t?(i=n.date(t),r=n.add(1,"month").date(t).subtract(1,"day")):(i=n.subtract(1,"month").date(t),r=n.date(t).subtract(1,"day")),this.range.setValue({start:i.toDate(),end:r.toDate()})}onSwipeLeft(){this.previousDate=(0,Bi.default)(this.previousDate).add(1,"month").toDate(),this.setRange(),this.onDateChange()}onSwipeRight(){this.previousDate=(0,Bi.default)(this.previousDate).subtract(1,"month").toDate(),this.setRange(),this.onDateChange()}onClickBack(){this.router.navigateByUrl("/")}onClickTab(t){this.dateTab=t,t===ae.Range_TAB&&this.setRange()}getRangeItems(){let t=this.range.getRawValue().start,n=this.range.getRawValue().end;t&&n&&(this.loaderService.start(),this.ledgerService.getRangeItems(t,n).pipe(Lt(1),ti(this)).subscribe(i=>{this.loaderService.stop();let r=i.reduce((o,s)=>{if(o.find(l=>l.tagId===s.tagId)){let l=o.findIndex(c=>c.tagId===s.tagId);o[l].price+=parseInt(s.price)}else{let l={tagId:s.tagId,price:parseInt(s.price),tagName:s.tagInfo.tagName};o.push(l)}return o},[]).sort((o,s)=>s.price-o.price);this.groupList=r,this.totalPriceText=`$ ${r.reduce((o,s)=>o+s.price,0)}`,this.pieChartItems=r.map(o=>({label:o.tagName,value:o.price}))}))}setLedgerList(t){let n=t.reduce((i,r)=>i+r.value,0);this.rangeList=t.map(i=>Kt(Qt({},i),{percent:`${(i.value/n*100).toFixed(2)}%`}))}},Ot.\u0275fac=function(n){return new(n||Ot)(b(Dt),b(Et),b(ee))},Ot.\u0275cmp=Q({type:Ot,selectors:[["app-statistics-charts"]],viewQuery:function(n,i){if(n&1&&Xe(Qc,5),n&2){let r;yt(r=wt())&&(i.rangeInput=r.first)}},standalone:!0,features:[K],decls:32,vars:12,consts:[[1,"bg-gray-800","text-white","min-h-dvh"],[1,"sticky","top-0","bg-gray-800"],[1,"py-4"],[1,"flex","justify-between","items-center","px-4","mb-4"],[1,"text-white",3,"click"],[1,"fas","fa-arrow-left"],[1,"w-full","text-center"],[3,"disabled","formGroup","rangePicker"],["rangeInput",""],["matStartDate","","formControlName","start","placeholder","\u8D77\u65E5"],["matEndDate","","formControlName","end","placeholder","\u8A16\u65E5"],["matIconSuffix","",3,"for"],["touchUi",""],["picker",""],["mat-button","","matDatepickerCancel","",1,"btn"],["mat-button","","matDatepickerApply","",1,"btn",3,"click"],[1,"flex","mb-4"],[1,"flex-grow","text-center","border-b-2","border-gray-300","py-2","text-lg","px-1",3,"ngClass","click"],[1,"wrapper",3,"swipeLeft","swipeRight"],[3,"pieChartItems","onEmitPieChartWithColorItems"],[1,"bg-gray-700","p-2"],[1,"text-2xl","px-2","py-2","flex","justify-between",3,"ngStyle"],[1,"flex-1","pl-2"],[1,"flex-1"],[1,"flex-1","pr-2","flex","justify-end"],["class","text-2xl px-2 py-2 flex justify-between",3,"ngStyle"]],template:function(n,i){if(n&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1)(4,"div",3)(5,"button",4),k("click",function(){return i.onClickBack()}),I(6,"i",5),m()()()(),p(7,"div",6)(8,"mat-form-field")(9,"mat-date-range-input",7,8),I(11,"input",9)(12,"input",10),m(),I(13,"mat-datepicker-toggle",11),p(14,"mat-date-range-picker",12,13)(16,"mat-datepicker-actions")(17,"button",14),w(18,"\u53D6\u6D88"),m(),p(19,"button",15),k("click",function(){return i.onDateChange()}),w(20,"\u78BA\u5B9A"),m()()(),ct(21,Jc,2,0,"mat-error"),m()(),p(22,"div",16)(23,"div",17),k("click",function(){return i.onClickTab(i.DateTabsEnum.Range_TAB)}),w(24," \u9031\u671F\u7D71\u8A08 "),m(),p(25,"div",17),k("click",function(){return i.onClickTab(i.DateTabsEnum.CUSTOM_TAB)}),w(26," \u81EA\u8A02\u5340\u9593 "),m()()(),p(27,"div",18),k("swipeLeft",function(){return i.onSwipeLeft()})("swipeRight",function(){return i.onSwipeRight()}),p(28,"app-pie-chart",19),k("onEmitPieChartWithColorItems",function(o){return i.setLedgerList(o)}),m()(),p(29,"div",20),xt(30,eu,7,7,"div",25,Kc),m()()),n&2){let r=Qn(15);T(9),O("disabled",i.dateTab===i.DateTabsEnum.Range_TAB)("formGroup",i.range)("rangePicker",r),T(4),O("for",r),T(8),Bt(21,i.range.controls.start.hasError("required")||i.range.controls.end.hasError("required")?21:-1),T(2),O("ngClass",tt(8,iu,i.dateTab===i.DateTabsEnum.Range_TAB)),T(2),O("ngClass",tt(10,nu,i.dateTab===i.DateTabsEnum.CUSTOM_TAB)),T(3),O("pieChartItems",i.pieChartItems),T(2),vt(i.rangeList)}},dependencies:[Tt,St,tr,ie,ne,fr,pr,mr,Ir,vr,_r,xr,yr,Sr,wr,br,Dr,Er,Tr,Cr,aa],styles:["[_nghost-%COMP%]{display:block}.selectedTab[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(99 102 241 / var(--tw-border-opacity));--tw-text-opacity: 1;color:rgb(99 102 241 / var(--tw-text-opacity))}.btn[_ngcontent-%COMP%]{margin-right:.25rem;margin-top:2.5rem;flex-shrink:0;border-radius:.25rem;border-width:0px;--tw-bg-opacity: 1;background-color:rgb(99 102 241 / var(--tw-bg-opacity));padding:.5rem 1rem;font-size:1.125rem;line-height:1.75rem;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.btn[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(79 70 229 / var(--tw-bg-opacity))}.btn[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px}@media (min-width: 640px){.btn[_ngcontent-%COMP%]{margin-top:0}}.wrapper[_ngcontent-%COMP%]{overflow-y:auto;touch-action:pan-y!important}"]}),Ot);zi=te([re()],zi);var k_=[{path:"",children:[{path:"",component:kr},{path:"tagsManage",component:ai},{path:"addTag",component:li,resolve:{data:ro}},{path:"budget",component:oo},{path:"statisticsCharts",component:zi}]}];export{k_ as SETTING_ROUTES};
