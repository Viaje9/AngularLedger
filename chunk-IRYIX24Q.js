var RV=Object.create;var _y=Object.defineProperty,MV=Object.defineProperties,xV=Object.getOwnPropertyDescriptor,NV=Object.getOwnPropertyDescriptors,PV=Object.getOwnPropertyNames,$d=Object.getOwnPropertySymbols,oT=Object.getPrototypeOf,vy=Object.prototype.hasOwnProperty,aT=Object.prototype.propertyIsEnumerable,OV=Reflect.get;var sT=(t,e,n)=>e in t?_y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I=(t,e)=>{for(var n in e||={})vy.call(e,n)&&sT(t,n,e[n]);if($d)for(var n of $d(e))aT.call(e,n)&&sT(t,n,e[n]);return t},he=(t,e)=>MV(t,NV(e));var cT=(t,e)=>{var n={};for(var r in t)vy.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&$d)for(var r of $d(t))e.indexOf(r)<0&&aT.call(t,r)&&(n[r]=t[r]);return n};var HY=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var kV=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of PV(e))!vy.call(t,i)&&i!==n&&_y(t,i,{get:()=>e[i],enumerable:!(r=xV(e,i))||r.enumerable});return t};var zY=(t,e,n)=>(n=t!=null?RV(oT(t)):{},kV(e||!t||!t.__esModule?_y(n,"default",{value:t,enumerable:!0}):n,t));var Yn=(t,e,n)=>OV(oT(t),n,e);var p=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});function lT(t,e){return Object.is(t,e)}var at=null,Ac=!1,Hd=1,hn=Symbol("SIGNAL");function me(t){let e=at;return at=t,e}function FV(){return Ac}var Mc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function qd(t){if(Ac)throw new Error("");if(at===null)return;at.consumerOnSignalRead(t);let e=at.nextProducerIndex++;if(No(at),e<at.producerNode.length&&at.producerNode[e]!==t&&Rc(at)){let n=at.producerNode[e];Qd(n,at.producerIndexOfThis[e])}at.producerNode[e]!==t&&(at.producerNode[e]=t,at.producerIndexOfThis[e]=Rc(at)?pT(t,at,e):0),at.producerLastReadVersion[e]=t.version}function LV(){Hd++}function uT(t){if(!(Rc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Hd)){if(!t.producerMustRecompute(t)&&!Kd(t)){t.dirty=!1,t.lastCleanEpoch=Hd;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Hd}}function dT(t){if(t.liveConsumerNode===void 0)return;let e=Ac;Ac=!0;try{for(let n of t.liveConsumerNode)n.dirty||fT(n)}finally{Ac=e}}function hT(){return at?.consumerAllowSignalWrites!==!1}function fT(t){t.dirty=!0,dT(t),t.consumerMarkedDirty?.(t)}function Gd(t){return t&&(t.nextProducerIndex=0),me(t)}function Wd(t,e){if(me(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Rc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Qd(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Kd(t){No(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(uT(n),r!==n.version))return!0}return!1}function by(t){if(No(t),Rc(t))for(let e=0;e<t.producerNode.length;e++)Qd(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function pT(t,e,n){if(mT(t),No(t),t.liveConsumerNode.length===0)for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=pT(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Qd(t,e){if(mT(t),No(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Qd(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];No(i),i.producerIndexOfThis[r]=e}}function Rc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function No(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function mT(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function gT(t){let e=Object.create(VV);e.computation=t;let n=()=>{if(uT(e),qd(e),e.value===zd)throw e.error;return e.value};return n[hn]=e,n}var wy=Symbol("UNSET"),Ey=Symbol("COMPUTING"),zd=Symbol("ERRORED"),VV=he(I({},Mc),{value:wy,dirty:!0,error:null,equal:lT,producerMustRecompute(t){return t.value===wy||t.value===Ey},producerRecomputeValue(t){if(t.value===Ey)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Ey;let n=Gd(t),r;try{r=t.computation()}catch(i){r=zd,t.error=i}finally{Wd(t,n)}if(e!==wy&&e!==zd&&r!==zd&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function jV(){throw new Error}var yT=jV;function _T(){yT()}function vT(t){yT=t}var BV=null;function wT(t){let e=Object.create(Dy);e.value=t;let n=()=>(qd(e),e.value);return n[hn]=e,n}function Yd(t,e){hT()||_T(),t.equal(t.value,e)||(t.value=e,UV(t))}function ET(t,e){hT()||_T(),Yd(t,e(t.value))}var Dy=he(I({},Mc),{equal:lT,value:void 0});function UV(t){t.version++,LV(),dT(t),BV?.()}function IT(t,e,n){let r=Object.create($V);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;let i=c=>{r.cleanupFn=c};function s(c){return c.fn===null&&c.schedule===null}function o(c){s(c)||(by(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=Iy)}let a=()=>{if(r.fn===null)return;if(FV())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Kd(r))return;r.hasRun=!0;let c=Gd(r);try{r.cleanupFn(),r.cleanupFn=Iy,r.fn(i)}finally{Wd(r,c)}};return r.ref={notify:()=>fT(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>o(r),[hn]:r},r.ref}var Iy=()=>{},$V=he(I({},Mc),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:Iy});function U(t){return typeof t=="function"}function Po(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Zd=Po(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function us(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ae=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(U(r))try{r()}catch(s){e=s instanceof Zd?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{bT(s)}catch(o){e=e??[],o instanceof Zd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Zd(e)}}add(e){var n;if(e&&e!==this)if(this.closed)bT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&us(n,e)}remove(e){let{_finalizers:n}=this;n&&us(n,e),e instanceof t&&e._removeParent(this)}};Ae.EMPTY=(()=>{let t=new Ae;return t.closed=!0,t})();var Cy=Ae.EMPTY;function Xd(t){return t instanceof Ae||t&&"closed"in t&&U(t.remove)&&U(t.add)&&U(t.unsubscribe)}function bT(t){U(t)?t():t.unsubscribe()}var Nn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Oo={setTimeout(t,e,...n){let{delegate:r}=Oo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Oo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Jd(t){Oo.setTimeout(()=>{let{onUnhandledError:e}=Nn;if(e)e(t);else throw t})}function Mr(){}var DT=Ty("C",void 0,void 0);function CT(t){return Ty("E",void 0,t)}function TT(t){return Ty("N",t,void 0)}function Ty(t,e,n){return{kind:t,value:e,error:n}}var ds=null;function ko(t){if(Nn.useDeprecatedSynchronousErrorHandling){let e=!ds;if(e&&(ds={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ds;if(ds=null,n)throw r}}else t()}function ST(t){Nn.useDeprecatedSynchronousErrorHandling&&ds&&(ds.errorThrown=!0,ds.error=t)}var hs=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Xd(e)&&e.add(this)):this.destination=qV}static create(e,n,r){return new xr(e,n,r)}next(e){this.isStopped?Ay(TT(e),this):this._next(e)}error(e){this.isStopped?Ay(CT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ay(DT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},HV=Function.prototype.bind;function Sy(t,e){return HV.call(t,e)}var Ry=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){eh(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){eh(r)}else eh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){eh(n)}}},xr=class extends hs{constructor(e,n,r){super();let i;if(U(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Nn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Sy(e.next,s),error:e.error&&Sy(e.error,s),complete:e.complete&&Sy(e.complete,s)}):i=e}this.destination=new Ry(i)}};function eh(t){Nn.useDeprecatedSynchronousErrorHandling?ST(t):Jd(t)}function zV(t){throw t}function Ay(t,e){let{onStoppedNotification:n}=Nn;n&&Oo.setTimeout(()=>n(t,e))}var qV={closed:!0,next:Mr,error:zV,complete:Mr};var Fo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nt(t){return t}function th(...t){return My(t)}function My(t){return t.length===0?Nt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var W=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=WV(n)?n:new xr(n,r,i);return ko(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=AT(r),new r((i,s)=>{let o=new xr({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Fo](){return this}pipe(...n){return My(n)(this)}toPromise(n){return n=AT(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function AT(t){var e;return(e=t??Nn.Promise)!==null&&e!==void 0?e:Promise}function GV(t){return t&&U(t.next)&&U(t.error)&&U(t.complete)}function WV(t){return t&&t instanceof hs||GV(t)&&Xd(t)}function xy(t){return U(t?.lift)}function Q(t){return e=>{if(xy(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function X(t,e,n,r,i){return new Ny(t,e,n,r,i)}var Ny=class extends hs{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Lo(){return Q((t,e)=>{let n=null;t._refCount++;let r=X(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ii=class extends W{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,xy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ae;let n=this.getSubject();e.add(this.source.subscribe(X(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ae.EMPTY)}return e}refCount(){return Lo()(this)}};var Vo={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame,{delegate:r}=Vo;r&&(e=r.requestAnimationFrame,n=r.cancelAnimationFrame);let i=e(s=>{n=void 0,t(s)});return new Ae(()=>n?.(i))},requestAnimationFrame(...t){let{delegate:e}=Vo;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){let{delegate:e}=Vo;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};var RT=Po(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var H=(()=>{class t extends W{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new nh(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new RT}next(n){ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Cy:(this.currentObservers=null,s.push(n),new Ae(()=>{this.currentObservers=null,us(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new W;return n.source=this,n}}return t.create=(e,n)=>new nh(e,n),t})(),nh=class extends H{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Cy}};var Qe=class extends H{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var xc={now(){return(xc.delegate||Date).now()},delegate:void 0};var fs=class extends H{constructor(e=1/0,n=1/0,r=xc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var rh=class extends Ae{constructor(e,n){super()}schedule(e,n=0){return this}};var Nc={setInterval(t,e,...n){let{delegate:r}=Nc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Nc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var si=class extends rh{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Nc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Nc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,us(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var jo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};jo.now=xc.now;var oi=class extends jo{constructor(e,n=jo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var fn=new oi(si),Py=fn;var ih=class extends si{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var sh=class extends oi{};var Oy=new sh(ih);var oh=class extends si{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,r=0){return r!==null&&r>0?super.requestAsyncId(e,n,r):(e.actions.push(this),e._scheduled||(e._scheduled=Vo.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,n,r);let{actions:s}=e;n!=null&&((i=s[s.length-1])===null||i===void 0?void 0:i.id)!==n&&(Vo.cancelAnimationFrame(n),e._scheduled=void 0)}};var ah=class extends oi{flush(e){this._active=!0;let n=this._scheduled;this._scheduled=void 0;let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===n&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===n&&r.shift();)e.unsubscribe();throw i}}};var MT=new ah(oh);var Pt=new W(t=>t.complete());function ch(t){return t&&U(t.schedule)}function ky(t){return t[t.length-1]}function lh(t){return U(ky(t))?t.pop():void 0}function Zn(t){return ch(ky(t))?t.pop():void 0}function xT(t,e){return typeof ky(t)=="number"?t.pop():e}function uh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function zX(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function PT(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function NT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ps(t){return this instanceof ps?(this.v=t,this):new ps(t)}function OT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(m,g){s.push([h,f,m,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(m){d(s[0][3],m)}}function c(h){h.value instanceof ps?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function kT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof NT=="function"?NT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Bo=t=>t&&typeof t.length=="number"&&typeof t!="function";function dh(t){return U(t?.then)}function hh(t){return U(t[Fo])}function fh(t){return Symbol.asyncIterator&&U(t?.[Symbol.asyncIterator])}function ph(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function KV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var mh=KV();function gh(t){return U(t?.[mh])}function yh(t){return OT(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ps(n.read());if(i)return yield ps(void 0);yield yield ps(r)}}finally{n.releaseLock()}})}function _h(t){return U(t?.getReader)}function Ie(t){if(t instanceof W)return t;if(t!=null){if(hh(t))return QV(t);if(Bo(t))return YV(t);if(dh(t))return ZV(t);if(fh(t))return FT(t);if(gh(t))return XV(t);if(_h(t))return JV(t)}throw ph(t)}function QV(t){return new W(e=>{let n=t[Fo]();if(U(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function YV(t){return new W(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function ZV(t){return new W(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Jd)})}function XV(t){return new W(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function FT(t){return new W(e=>{ej(t,e).catch(n=>e.error(n))})}function JV(t){return FT(yh(t))}function ej(t,e){var n,r,i,s;return PT(this,void 0,void 0,function*(){try{for(n=kT(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Ht(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function ai(t,e=0){return Q((n,r)=>{n.subscribe(X(r,i=>Ht(r,t,()=>r.next(i),e),()=>Ht(r,t,()=>r.complete(),e),i=>Ht(r,t,()=>r.error(i),e)))})}function ci(t,e=0){return Q((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function LT(t,e){return Ie(t).pipe(ci(e),ai(e))}function VT(t,e){return Ie(t).pipe(ci(e),ai(e))}function jT(t,e){return new W(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function BT(t,e){return new W(n=>{let r;return Ht(n,e,()=>{r=t[mh](),Ht(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>U(r?.return)&&r.return()})}function vh(t,e){if(!t)throw new Error("Iterable cannot be null");return new W(n=>{Ht(n,e,()=>{let r=t[Symbol.asyncIterator]();Ht(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function UT(t,e){return vh(yh(t),e)}function $T(t,e){if(t!=null){if(hh(t))return LT(t,e);if(Bo(t))return jT(t,e);if(dh(t))return VT(t,e);if(fh(t))return vh(t,e);if(gh(t))return BT(t,e);if(_h(t))return UT(t,e)}throw ph(t)}function Oe(t,e){return e?$T(t,e):Ie(t)}function z(...t){let e=Zn(t);return Oe(t,e)}function Uo(t,e){let n=U(t)?t:()=>t,r=i=>i.error(n());return new W(e?i=>e.schedule(r,0,i):r)}function wh(t){return!!t&&(t instanceof W||U(t.lift)&&U(t.subscribe))}var Nr=Po(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function HT(t){return t instanceof Date&&!isNaN(t)}function oe(t,e){return Q((n,r)=>{let i=0;n.subscribe(X(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:tj}=Array;function nj(t,e){return tj(e)?t(...e):t(e)}function $o(t){return oe(e=>nj(t,e))}var{isArray:rj}=Array,{getPrototypeOf:ij,prototype:sj,keys:oj}=Object;function Eh(t){if(t.length===1){let e=t[0];if(rj(e))return{args:e,keys:null};if(aj(e)){let n=oj(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function aj(t){return t&&typeof t=="object"&&ij(t)===sj}function Ih(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function ms(...t){let e=Zn(t),n=lh(t),{args:r,keys:i}=Eh(t);if(r.length===0)return Oe([],e);let s=new W(cj(r,e,i?o=>Ih(i,o):Nt));return n?s.pipe($o(n)):s}function cj(t,e,n=Nt){return r=>{zT(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)zT(e,()=>{let l=Oe(t[c],e),u=!1;l.subscribe(X(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function zT(t,e,n){t?Ht(n,t,e):e()}function qT(t,e,n,r,i,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=g=>l<r?m(g):c.push(g),m=g=>{s&&e.next(g),l++;let v=!1;Ie(n(g,u++)).subscribe(X(e,E=>{i?.(E),s?f(E):e.next(E)},()=>{v=!0},void 0,()=>{if(v)try{for(l--;c.length&&l<r;){let E=c.shift();o?Ht(e,o,()=>m(E)):m(E)}h()}catch(E){e.error(E)}}))};return t.subscribe(X(e,f,()=>{d=!0,h()})),()=>{a?.()}}function je(t,e,n=1/0){return U(e)?je((r,i)=>oe((s,o)=>e(r,s,i,o))(Ie(t(r,i))),n):(typeof e=="number"&&(n=e),Q((r,i)=>qT(r,i,t,n)))}function li(t=1/0){return je(Nt,t)}function GT(){return li(1)}function Xn(...t){return GT()(Oe(t,Zn(t)))}function ui(t){return new W(e=>{Ie(t()).subscribe(e)})}function Fy(...t){let e=lh(t),{args:n,keys:r}=Eh(t),i=new W(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;Ie(n[u]).subscribe(X(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(r?Ih(r,a):a),s.complete())}))}});return e?i.pipe($o(e)):i}var lj=["addListener","removeListener"],uj=["addEventListener","removeEventListener"],dj=["on","off"];function Pc(t,e,n,r){if(U(n)&&(r=n,n=void 0),r)return Pc(t,e,n).pipe($o(r));let[i,s]=pj(t)?uj.map(o=>a=>t[o](e,a,n)):hj(t)?lj.map(WT(t,e)):fj(t)?dj.map(WT(t,e)):[];if(!i&&Bo(t))return je(o=>Pc(o,e,n))(Ie(t));if(!i)throw new TypeError("Invalid event target");return new W(o=>{let a=(...c)=>o.next(1<c.length?c:c[0]);return i(a),()=>s(a)})}function WT(t,e){return n=>r=>t[n](e,r)}function hj(t){return U(t.addListener)&&U(t.removeListener)}function fj(t){return U(t.on)&&U(t.off)}function pj(t){return U(t.addEventListener)&&U(t.removeEventListener)}function Ho(t=0,e,n=Py){let r=-1;return e!=null&&(ch(e)?n=e:r=e),new W(i=>{let s=HT(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function mj(t=0,e=fn){return t<0&&(t=0),Ho(t,t,e)}function Oc(...t){let e=Zn(t),n=xT(t,1/0),r=t;return r.length?r.length===1?Ie(r[0]):li(n)(Oe(r,e)):Pt}var gj=new W(Mr);function Fe(t,e){return Q((n,r)=>{let i=0;n.subscribe(X(r,s=>t.call(e,s,i++)&&r.next(s)))})}function KT(t){return Q((e,n)=>{let r=!1,i=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;let l=i;i=null,n.next(l)}o&&n.complete()},c=()=>{s=null,o&&n.complete()};e.subscribe(X(n,l=>{r=!0,i=l,s||Ie(t(l)).subscribe(s=X(n,a,c))},()=>{o=!0,(!r||!s||s.closed)&&n.complete()}))})}function bh(t,e=fn){return KT(()=>Ho(t,e))}function di(t){return Q((e,n)=>{let r=null,i=!1,s;r=e.subscribe(X(n,void 0,void 0,o=>{s=Ie(t(o,di(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function QT(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(X(o,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function gs(t,e){return U(e)?je(t,e,1):je(t,1)}function YT(t){return new W(e=>t.subscribe(e))}var yj={connector:()=>new H};function Dh(t,e=yj){let{connector:n}=e;return Q((r,i)=>{let s=n();Ie(t(YT(s))).subscribe(i),i.add(r.subscribe(s))})}function Ch(t,e=fn){return Q((n,r)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=s;s=null,r.next(l)}};function c(){let l=o+t,u=e.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}n.subscribe(X(r,l=>{s=l,o=e.now(),i||(i=e.schedule(c,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function hi(t){return Q((e,n)=>{let r=!1;e.subscribe(X(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function He(t){return t<=0?()=>Pt:Q((e,n)=>{let r=0;e.subscribe(X(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function ZT(){return Q((t,e)=>{t.subscribe(X(e,Mr))})}function kc(t){return oe(()=>t)}function Ly(t,e){return e?n=>Xn(e.pipe(He(1),ZT()),n.pipe(Ly(t))):je((n,r)=>Ie(t(n,r)).pipe(He(1),kc(n)))}function _j(t,e=fn){let n=Ho(t,e);return Ly(()=>n)}function Fc(t,e=Nt){return t=t??vj,Q((n,r)=>{let i,s=!0;n.subscribe(X(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function vj(t,e){return t===e}function Th(t=wj){return Q((e,n)=>{let r=!1;e.subscribe(X(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function wj(){return new Nr}function Lc(t){return Q((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Jn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Fe((i,s)=>t(i,s,r)):Nt,He(1),n?hi(e):Th(()=>new Nr))}function zo(t){return t<=0?()=>Pt:Q((e,n)=>{let r=[];e.subscribe(X(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Vy(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Fe((i,s)=>t(i,s,r)):Nt,zo(1),n?hi(e):Th(()=>new Nr))}function XT(t,e){let n=U(t)?t:()=>t;return U(e)?Dh(e,{connector:n}):r=>new ii(r,n)}function Ej(t){return t?e=>Dh(t)(e):e=>XT(new H)(e)}function Sh(t,e){return Q(QT(t,e,arguments.length>=2,!0))}function JT(t={}){let{connector:e=()=>new H,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,c,l=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=c=void 0,u=d=!1},m=()=>{let g=o;f(),g?.unsubscribe()};return Q((g,v)=>{l++,!d&&!u&&h();let E=c=c??e();v.add(()=>{l--,l===0&&!d&&!u&&(a=jy(m,i))}),E.subscribe(v),!o&&l>0&&(o=new xr({next:R=>E.next(R),error:R=>{d=!0,h(),a=jy(f,n,R),E.error(R)},complete:()=>{u=!0,h(),a=jy(f,r),E.complete()}}),Ie(g).subscribe(o))})(s)}}function jy(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new xr({next:()=>{r.unsubscribe(),t()}});return Ie(e(...n)).subscribe(r)}function eS(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,JT({connector:()=>new fs(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Vc(t){return Fe((e,n)=>t<=n)}function Pn(...t){let e=Zn(t);return Q((n,r)=>{(e?Xn(t,n,e):Xn(t,n)).subscribe(r)})}function Zt(t,e){return Q((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(X(r,c=>{i?.unsubscribe();let l=0,u=s++;Ie(t(c,u)).subscribe(i=X(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function er(t){return Q((e,n)=>{Ie(t).subscribe(X(n,()=>n.complete(),Mr)),!n.closed&&e.subscribe(n)})}function et(t,e,n){let r=U(t)||e||n?{next:t,error:e,complete:n}:t;return r?Q((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(X(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Nt}var HS="https://g.co/ng/security#xss",T=class extends Error{constructor(e,n){super(ov(e,n)),this.code=e}};function ov(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var zS=Symbol("InputSignalNode#UNSET"),Ij=he(I({},Dy),{transformFn:void 0,applyValueToInputSignal(t,e){Yd(t,e)}});function qS(t,e){let n=Object.create(Ij);n.value=t,n.transformFn=e?.transform;function r(){if(qd(n),n.value===zS)throw new T(-950,!1);return n.value}return r[hn]=n,r}function Xc(t){return{toString:t}.toString()}var Ah="__parameters__";function bj(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function GS(t,e,n){return Xc(()=>{let r=bj(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Ah)?c[Ah]:Object.defineProperty(c,Ah,{value:[]})[Ah];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var tt=globalThis;function xe(t){for(let e in t)if(t[e]===xe)return e;throw Error("Could not find renamed property on target object.")}function Dj(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ft(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ft).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function n_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var Cj=xe({__forward_ref__:xe});function gn(t){return t.__forward_ref__=gn,t.toString=function(){return Ft(this())},t}function Ot(t){return WS(t)?t():t}function WS(t){return typeof t=="function"&&t.hasOwnProperty(Cj)&&t.__forward_ref__===gn}function C(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ae(t){return{providers:t.providers||[],imports:t.imports||[]}}function lf(t){return tS(t,QS)||tS(t,YS)}function KS(t){return lf(t)!==null}function tS(t,e){return t.hasOwnProperty(e)?t[e]:null}function Tj(t){let e=t&&(t[QS]||t[YS]);return e||null}function nS(t){return t&&(t.hasOwnProperty(rS)||t.hasOwnProperty(Sj))?t[rS]:null}var QS=xe({\u0275prov:xe}),rS=xe({\u0275inj:xe}),YS=xe({ngInjectableDef:xe}),Sj=xe({ngInjectorDef:xe}),x=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=C({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ZS(t){return t&&!!t.\u0275providers}var Aj=xe({\u0275cmp:xe}),Rj=xe({\u0275dir:xe}),Mj=xe({\u0275pipe:xe}),xj=xe({\u0275mod:xe}),Uh=xe({\u0275fac:xe}),jc=xe({__NG_ELEMENT_ID__:xe}),iS=xe({__NG_ENV_ID__:xe});function Jc(t){return typeof t=="string"?t:t==null?"":String(t)}function Nj(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Jc(t)}function Pj(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new T(-200,t)}function av(t,e){throw new T(-201,!1)}var fe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(fe||{}),r_;function XS(){return r_}function zt(t){let e=r_;return r_=t,e}function JS(t,e,n){let r=lf(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&fe.Optional)return null;if(e!==void 0)return e;av(t,"Injector")}var Oj={},Bc=Oj,i_="__NG_DI_FLAG__",$h="ngTempTokenPath",kj="ngTokenPath",Fj=/\n/gm,Lj="\u0275",sS="__source",Qo;function Vj(){return Qo}function fi(t){let e=Qo;return Qo=t,e}function jj(t,e=fe.Default){if(Qo===void 0)throw new T(-203,!1);return Qo===null?JS(t,void 0,e):Qo.get(t,e&fe.Optional?null:void 0,e)}function y(t,e=fe.Default){return(XS()||jj)(Ot(t),e)}function b(t,e=fe.Default){return y(t,uf(e))}function uf(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function s_(t){let e=[];for(let n=0;n<t.length;n++){let r=Ot(t[n]);if(Array.isArray(r)){if(r.length===0)throw new T(900,!1);let i,s=fe.Default;for(let o=0;o<r.length;o++){let a=r[o],c=Bj(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(y(i,s))}else e.push(y(r))}return e}function eA(t,e){return t[i_]=e,t.prototype[i_]=e,t}function Bj(t){return t[i_]}function Uj(t,e,n,r){let i=t[$h];throw e[sS]&&i.unshift(e[sS]),t.message=$j(`
`+t.message,i,n,r),t[kj]=i,t[$h]=null,t}function $j(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Lj?t.slice(2):t;let i=Ft(e);if(Array.isArray(e))i=e.map(Ft).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ft(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Fj,`
  `)}`}var mt=eA(GS("Optional"),8);var cv=eA(GS("SkipSelf"),4);function ws(t,e){let n=t.hasOwnProperty(Uh);return n?t[Uh]:null}function Hj(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function zj(t){return t.flat(Number.POSITIVE_INFINITY)}function lv(t,e){t.forEach(n=>Array.isArray(n)?lv(n,e):e(n))}function tA(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Hh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function qj(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function Gj(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function uv(t,e,n){let r=el(t,e);return r>=0?t[r|1]=n:(r=~r,Gj(t,r,e,n)),r}function By(t,e){let n=el(t,e);if(n>=0)return t[n|1]}function el(t,e){return Wj(t,e,1)}function Wj(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Zo={},kt=[],Xo=new x(""),nA=new x("",-1),rA=new x(""),zh=class{get(e,n=Bc){if(n===Bc){let r=new Error(`NullInjectorError: No provider for ${Ft(e)}!`);throw r.name="NullInjectorError",r}return n}},iA=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(iA||{}),rr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(rr||{}),pe=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(pe||{});function Kj(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function o_(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];Qj(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function sA(t){return t===3||t===4||t===6}function Qj(t){return t.charCodeAt(0)===64}function Uc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?oS(t,n,i,null,e[++r]):oS(t,n,i,null,null))}}return t}function oS(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var oA="ng-template";function Yj(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Kj(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(dv(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function dv(t){return t.type===4&&t.value!==oA}function Zj(t,e,n){let r=t.type===4&&!n?oA:t.value;return e===r}function Xj(t,e,n){let r=4,i=t.attrs,s=i!==null?tB(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!On(r)&&!On(c))return!1;if(o&&On(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!Zj(t,c,n)||c===""&&e.length===1){if(On(r))return!1;o=!0}}else if(r&8){if(i===null||!Yj(t,i,c,n)){if(On(r))return!1;o=!0}}else{let l=e[++a],u=Jj(c,i,dv(t),n);if(u===-1){if(On(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(On(r))return!1;o=!0}}}}return On(r)||o}function On(t){return(t&1)===0}function Jj(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return nB(e,t)}function aA(t,e,n=!1){for(let r=0;r<e.length;r++)if(Xj(t,e[r],n))return!0;return!1}function eB(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function tB(t){for(let e=0;e<t.length;e++){let n=t[e];if(sA(n))return e}return t.length}function nB(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function rB(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function aS(t,e){return t?":not("+e.trim()+")":e}function iB(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!On(o)&&(e+=aS(s,i),i=""),r=o,s=s||!On(r);n++}return i!==""&&(e+=aS(s,i)),e}function sB(t){return t.map(iB).join(",")}function oB(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!On(i))break;i=s}r++}return{attrs:e,classes:n}}function ar(t){return Xc(()=>{let e=fA(t),n=he(I({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===iA.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||rr.Emulated,styles:t.styles||kt,_:null,schemas:t.schemas||null,tView:null,id:""});pA(n);let r=t.dependencies;return n.directiveDefs=lS(r,!1),n.pipeDefs=lS(r,!0),n.id=lB(n),n})}function aB(t){return mi(t)||lA(t)}function cB(t){return t!==null}function ce(t){return Xc(()=>({type:t.type,bootstrap:t.bootstrap||kt,declarations:t.declarations||kt,imports:t.imports||kt,exports:t.exports||kt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function cS(t,e){if(t==null)return Zo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=pe.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==pe.None?[r,a]:r,e[s]=o):n[s]=r}return n}function ye(t){return Xc(()=>{let e=fA(t);return pA(e),e})}function cA(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function mi(t){return t[Aj]||null}function lA(t){return t[Rj]||null}function uA(t){return t[Mj]||null}function dA(t){let e=mi(t)||lA(t)||uA(t);return e!==null?e.standalone:!1}function hA(t,e){let n=t[xj]||null;if(!n&&e===!0)throw new Error(`Type ${Ft(t)} does not have '\u0275mod' property.`);return n}function fA(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Zo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||kt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:cS(t.inputs,e),outputs:cS(t.outputs),debugInfo:null}}function pA(t){t.features?.forEach(e=>e(t))}function lS(t,e){if(!t)return null;let n=e?uA:aB;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(cB)}function lB(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function df(t){return{\u0275providers:t}}function uB(...t){return{\u0275providers:mA(!0,t),\u0275fromNgModule:!0}}function mA(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return lv(e,o=>{let a=o;a_(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&gA(i,s),n}function gA(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];hv(i,s=>{e(s,r)})}}function a_(t,e,n,r){if(t=Ot(t),!t)return!1;let i=null,s=nS(t),o=!s&&mi(t);if(!s&&!o){let c=t.ngModule;if(s=nS(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)a_(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{lv(s.imports,u=>{a_(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&gA(l,e)}if(!a){let l=ws(i)||(()=>new i);e({provide:i,useFactory:l,deps:kt},i),e({provide:rA,useValue:i,multi:!0},i),e({provide:Xo,useValue:()=>y(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;hv(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function hv(t,e){for(let n of t)ZS(n)&&(n=n.\u0275providers),Array.isArray(n)?hv(n,e):e(n)}var dB=xe({provide:String,useValue:xe});function yA(t){return t!==null&&typeof t=="object"&&dB in t}function hB(t){return!!(t&&t.useExisting)}function fB(t){return!!(t&&t.useFactory)}function Jo(t){return typeof t=="function"}function pB(t){return!!t.useClass}var hf=new x(""),Oh={},mB={},Uy;function fv(){return Uy===void 0&&(Uy=new zh),Uy}var qt=class{},$c=class extends qt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,l_(e,o=>this.processProvider(o)),this.records.set(nA,qo(void 0,this)),i.has("environment")&&this.records.set(qt,qo(void 0,this));let s=this.records.get(hf);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(rA,kt,fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=fi(this),r=zt(void 0),i;try{return e()}finally{fi(n),zt(r)}}get(e,n=Bc,r=fe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(iS))return e[iS](this);r=uf(r);let i,s=fi(this),o=zt(void 0);try{if(!(r&fe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=wB(e)&&lf(e);l&&this.injectableDefInScope(l)?c=qo(c_(e),Oh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&fe.Self?fv():this.parent;return n=r&fe.Optional&&n===Bc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[$h]=a[$h]||[]).unshift(Ft(e)),s)throw a;return Uj(a,e,"R3InjectorError",this.source)}else throw a}finally{zt(o),fi(s)}}resolveInjectorInitializers(){let e=me(null),n=fi(this),r=zt(void 0),i;try{let s=this.get(Xo,kt,fe.Self);for(let o of s)o()}finally{fi(n),zt(r),me(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ft(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new T(205,!1)}processProvider(e){e=Ot(e);let n=Jo(e)?e:Ot(e&&e.provide),r=yB(e);if(!Jo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=qo(void 0,Oh,!0),i.factory=()=>s_(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=me(null);try{return n.value===Oh&&(n.value=mB,n.value=n.factory()),typeof n.value=="object"&&n.value&&vB(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{me(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ot(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function c_(t){let e=lf(t),n=e!==null?e.factory:ws(t);if(n!==null)return n;if(t instanceof x)throw new T(204,!1);if(t instanceof Function)return gB(t);throw new T(204,!1)}function gB(t){if(t.length>0)throw new T(204,!1);let n=Tj(t);return n!==null?()=>n.factory(t):()=>new t}function yB(t){if(yA(t))return qo(void 0,t.useValue);{let e=_A(t);return qo(e,Oh)}}function _A(t,e,n){let r;if(Jo(t)){let i=Ot(t);return ws(i)||c_(i)}else if(yA(t))r=()=>Ot(t.useValue);else if(fB(t))r=()=>t.useFactory(...s_(t.deps||[]));else if(hB(t))r=()=>y(Ot(t.useExisting));else{let i=Ot(t&&(t.useClass||t.provide));if(_B(t))r=()=>new i(...s_(t.deps));else return ws(i)||c_(i)}return r}function qo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function _B(t){return!!t.deps}function vB(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function wB(t){return typeof t=="function"||typeof t=="object"&&t instanceof x}function l_(t,e){for(let n of t)Array.isArray(n)?l_(n,e):n&&ZS(n)?l_(n.\u0275providers,e):e(n)}function kr(t,e){t instanceof $c&&t.assertNotDestroyed();let n,r=fi(t),i=zt(void 0);try{return e()}finally{fi(r),zt(i)}}function vA(){return XS()!==void 0||Vj()!=null}function wA(t){if(!vA())throw new T(-203,!1)}function EB(t){return typeof t=="function"}var cr=0,ne=1,K=2,pt=3,Fn=4,Jt=5,ea=6,Hc=7,bt=8,ta=9,Ln=10,Be=11,zc=12,uS=13,aa=14,pn=15,tl=16,Go=17,Pr=18,ff=19,EA=20,pi=21,kh=22,Es=23,Ct=25,pv=1;var Is=7,qh=8,na=9,Dt=10,mv=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(mv||{});function _s(t){return Array.isArray(t)&&typeof t[pv]=="object"}function Fr(t){return Array.isArray(t)&&t[pv]===!0}function gv(t){return(t.flags&4)!==0}function pf(t){return t.componentOffset>-1}function mf(t){return(t.flags&1)===1}function Or(t){return!!t.template}function IB(t){return(t[K]&512)!==0}var u_=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function IA(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Lt(){return bA}function bA(t){return t.type.prototype.ngOnChanges&&(t.setInput=DB),bB}Lt.ngInherit=!0;function bB(){let t=CA(this),e=t?.current;if(e){let n=t.previous;if(n===Zo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function DB(t,e,n,r,i){let s=this.declaredInputs[r],o=CA(t)||CB(t,{previous:Zo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new u_(l&&l.currentValue,n,c===Zo),IA(t,e,i,n)}var DA="__ngSimpleChanges__";function CA(t){return t[DA]||null}function CB(t,e){return t[DA]=e}var dS=null;var tr=function(t,e,n){dS?.(t,e,n)},TA="svg",TB="math",SB=!1;function AB(){return SB}function ir(t){for(;Array.isArray(t);)t=t[cr];return t}function RB(t){for(;Array.isArray(t);){if(typeof t[pv]=="object")return t;t=t[cr]}return null}function SA(t,e){return ir(e[t])}function yn(t,e){return ir(e[t.index])}function yv(t,e){return t.data[e]}function AA(t,e){return t[e]}function _i(t,e){let n=e[t];return _s(n)?n:n[cr]}function MB(t){return(t[K]&4)===4}function _v(t){return(t[K]&128)===128}function xB(t){return Fr(t[pt])}function ra(t,e){return e==null?null:t[e]}function RA(t){t[Go]=0}function NB(t){t[K]&1024||(t[K]|=1024,_v(t)&&qc(t))}function PB(t,e){for(;t>0;)e=e[aa],t--;return e}function vv(t){return!!(t[K]&9216||t[Es]?.dirty)}function d_(t){t[Ln].changeDetectionScheduler?.notify(1),vv(t)?qc(t):t[K]&64&&(AB()?(t[K]|=1024,qc(t)):t[Ln].changeDetectionScheduler?.notify())}function qc(t){t[Ln].changeDetectionScheduler?.notify();let e=Gc(t);for(;e!==null&&!(e[K]&8192||(e[K]|=8192,!_v(e)));)e=Gc(e)}function MA(t,e){if((t[K]&256)===256)throw new T(911,!1);t[pi]===null&&(t[pi]=[]),t[pi].push(e)}function OB(t,e){if(t[pi]===null)return;let n=t[pi].indexOf(e);n!==-1&&t[pi].splice(n,1)}function Gc(t){let e=t[pt];return Fr(e)?e[pt]:e}var le={lFrame:VA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function kB(){return le.lFrame.elementDepthCount}function FB(){le.lFrame.elementDepthCount++}function LB(){le.lFrame.elementDepthCount--}function xA(){return le.bindingsEnabled}function NA(){return le.skipHydrationRootTNode!==null}function VB(t){return le.skipHydrationRootTNode===t}function jB(){le.skipHydrationRootTNode=null}function re(){return le.lFrame.lView}function Ue(){return le.lFrame.tView}function wv(t){return le.lFrame.contextLView=t,t[bt]}function Ev(t){return le.lFrame.contextLView=null,t}function gt(){let t=PA();for(;t!==null&&t.type===64;)t=t.parent;return t}function PA(){return le.lFrame.currentTNode}function BB(){let t=le.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Rs(t,e){let n=le.lFrame;n.currentTNode=t,n.isParent=e}function Iv(){return le.lFrame.isParent}function bv(){le.lFrame.isParent=!1}function UB(){return le.lFrame.contextLView}function OA(){let t=le.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function $B(t){return le.lFrame.bindingIndex=t}function vi(){return le.lFrame.bindingIndex++}function kA(t){let e=le.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function HB(){return le.lFrame.inI18n}function zB(t,e){let n=le.lFrame;n.bindingIndex=n.bindingRootIndex=t,h_(e)}function qB(){return le.lFrame.currentDirectiveIndex}function h_(t){le.lFrame.currentDirectiveIndex=t}function Dv(t){let e=le.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Cv(){return le.lFrame.currentQueryIndex}function gf(t){le.lFrame.currentQueryIndex=t}function GB(t){let e=t[ne];return e.type===2?e.declTNode:e.type===1?t[Jt]:null}function FA(t,e,n){if(n&fe.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&fe.Host);)if(i=GB(s),i===null||(s=s[aa],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=le.lFrame=LA();return r.currentTNode=e,r.lView=t,!0}function Tv(t){let e=LA(),n=t[ne];le.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function LA(){let t=le.lFrame,e=t===null?null:t.child;return e===null?VA(t):e}function VA(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function jA(){let t=le.lFrame;return le.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var BA=jA;function Sv(){let t=jA();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function WB(t){return(le.lFrame.contextLView=PB(t,le.lFrame.contextLView))[bt]}function wi(){return le.lFrame.selectedIndex}function bs(t){le.lFrame.selectedIndex=t}function nl(){let t=le.lFrame;return yv(t.tView,t.selectedIndex)}function UA(){le.lFrame.currentNamespace=TA}function $A(){KB()}function KB(){le.lFrame.currentNamespace=null}function QB(){return le.lFrame.currentNamespace}var HA=!0;function yf(){return HA}function _f(t){HA=t}function YB(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=bA(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function vf(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Fh(t,e,n){zA(t,e,3,n)}function Lh(t,e,n,r){(t[K]&3)===n&&zA(t,e,n,r)}function $y(t,e){let n=t[K];(n&3)===e&&(n&=16383,n+=1,t[K]=n)}function zA(t,e,n,r){let i=r!==void 0?t[Go]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Go]+=65536),(a<s||s==-1)&&(ZB(t,n,e,c),t[Go]=(t[Go]&4294901760)+c+2),c++}function hS(t,e){tr(4,t,e);let n=me(null);try{e.call(t)}finally{me(n),tr(5,t,e)}}function ZB(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[K]>>14<t[Go]>>16&&(t[K]&3)===e&&(t[K]+=16384,hS(a,s)):hS(a,s)}var Yo=-1,Ds=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function XB(t){return t instanceof Ds}function JB(t){return(t.flags&8)!==0}function eU(t){return(t.flags&16)!==0}function qA(t){return t!==Yo}function Gh(t){return t&32767}function tU(t){return t>>16}function Wh(t,e){let n=tU(t),r=e;for(;n>0;)r=r[aa],n--;return r}var f_=!0;function Kh(t){let e=f_;return f_=t,e}var nU=256,GA=nU-1,WA=5,rU=0,nr={};function iU(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(jc)&&(r=n[jc]),r==null&&(r=n[jc]=rU++);let i=r&GA,s=1<<i;e.data[t+(i>>WA)]|=s}function Qh(t,e){let n=KA(t,e);if(n!==-1)return n;let r=e[ne];r.firstCreatePass&&(t.injectorIndex=e.length,Hy(r.data,t),Hy(e,null),Hy(r.blueprint,null));let i=Av(t,e),s=t.injectorIndex;if(qA(i)){let o=Gh(i),a=Wh(i,e),c=a[ne].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Hy(t,e){t.push(0,0,0,0,0,0,0,0,e)}function KA(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Av(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=JA(i),r===null)return Yo;if(n++,i=i[aa],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Yo}function p_(t,e,n){iU(t,e,n)}function sU(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(sA(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function QA(t,e,n){if(n&fe.Optional||t!==void 0)return t;av(e,"NodeInjector")}function YA(t,e,n,r){if(n&fe.Optional&&r===void 0&&(r=null),!(n&(fe.Self|fe.Host))){let i=t[ta],s=zt(void 0);try{return i?i.get(e,r,n&fe.Optional):JS(e,r,n&fe.Optional)}finally{zt(s)}}return QA(r,e,n)}function ZA(t,e,n,r=fe.Default,i){if(t!==null){if(e[K]&2048&&!(r&fe.Self)){let o=lU(t,e,n,r,nr);if(o!==nr)return o}let s=XA(t,e,n,r,nr);if(s!==nr)return s}return YA(e,n,r,i)}function XA(t,e,n,r,i){let s=aU(n);if(typeof s=="function"){if(!FA(e,t,r))return r&fe.Host?QA(i,n,r):YA(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&fe.Optional))av(n);else return o}finally{BA()}}else if(typeof s=="number"){let o=null,a=KA(t,e),c=Yo,l=r&fe.Host?e[pn][Jt]:null;for((a===-1||r&fe.SkipSelf)&&(c=a===-1?Av(t,e):e[a+8],c===Yo||!pS(r,!1)?a=-1:(o=e[ne],a=Gh(c),e=Wh(c,e)));a!==-1;){let u=e[ne];if(fS(s,a,u.data)){let d=oU(a,e,n,o,r,l);if(d!==nr)return d}c=e[a+8],c!==Yo&&pS(r,e[ne].data[a+8]===l)&&fS(s,a,e)?(o=u,a=Gh(c),e=Wh(c,e)):a=-1}}return i}function oU(t,e,n,r,i,s){let o=e[ne],a=o.data[t+8],c=r==null?pf(a)&&f_:r!=o&&(a.type&3)!==0,l=i&fe.Host&&s===a,u=Vh(a,o,n,c,l);return u!==null?Cs(e,o,u,a):nr}function Vh(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,u=s>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let m=o[f];if(f<c&&n===m||f>=c&&m.type===n)return f}if(i){let f=o[c];if(f&&Or(f)&&f.type===n)return c}return null}function Cs(t,e,n,r){let i=t[n],s=e.data;if(XB(i)){let o=i;o.resolving&&Pj(Nj(s[n]));let a=Kh(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?zt(o.injectImpl):null,u=FA(t,r,fe.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&YB(n,s[n],e)}finally{l!==null&&zt(l),Kh(a),o.resolving=!1,BA()}}return i}function aU(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(jc)?t[jc]:void 0;return typeof e=="number"?e>=0?e&GA:cU:e}function fS(t,e,n){let r=1<<t;return!!(n[e+(t>>WA)]&r)}function pS(t,e){return!(t&fe.Self)&&!(t&fe.Host&&e)}var vs=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ZA(this._tNode,this._lView,e,uf(r),n)}};function cU(){return new vs(gt(),re())}function lr(t){return Xc(()=>{let e=t.prototype.constructor,n=e[Uh]||m_(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Uh]||m_(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function m_(t){return WS(t)?()=>{let e=m_(Ot(t));return e&&e()}:ws(t)}function lU(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[K]&2048&&!(o[K]&512);){let a=XA(s,o,n,r|fe.Self,nr);if(a!==nr)return a;let c=s.parent;if(!c){let l=o[EA];if(l){let u=l.get(n,nr,r);if(u!==nr)return u}c=JA(o),o=o[aa]}s=c}return i}function JA(t){let e=t[ne],n=e.type;return n===2?e.declTNode:n===1?t[Jt]:null}function Rv(t){return sU(gt(),t)}function mS(t,e=null,n=null,r){let i=eR(t,e,n,r);return i.resolveInjectorInitializers(),i}function eR(t,e=null,n=null,r,i=new Set){let s=[n||kt,uB(t)];return r=r||(typeof t=="object"?void 0:Ft(t)),new $c(s,e||fv(),r||null,i)}var Ne=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return mS({name:""},i,r,"");{let s=r.name??"";return mS({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Bc,e.NULL=new zh,e.\u0275prov=C({token:e,providedIn:"any",factory:()=>y(nA)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var uU="ngOriginalError";function zy(t){return t[uU]}var mn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&zy(e);for(;n&&zy(n);)n=zy(n);return n||null}},tR=new x("",{providedIn:"root",factory:()=>b(mn).handleError.bind(void 0)}),rl=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=dU,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),g_=class extends rl{constructor(e){super(),this._lView=e}onDestroy(e){return MA(this._lView,e),()=>OB(this._lView,e)}};function dU(){return new g_(re())}var y_=class{constructor(){this.destroyed=!1,this.listeners=null,this.errorHandler=b(mn,{optional:!0}),this.destroyRef=b(rl),this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new T(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let n=this.listeners?.indexOf(e);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(e){if(this.destroyed)throw new T(953,!1);if(this.listeners===null)return;let n=me(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{me(n)}}};function Mv(t){return new y_}function gS(t,e){return qS(t,e)}function hU(t){return qS(zS,t)}var lse=(gS.required=hU,gS);function fU(){return ca(gt(),re())}function ca(t,e){return new ve(yn(t,e))}var ve=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=fU;let t=e;return t})();function nR(t){return t instanceof ve?t.nativeElement:t}var __=class extends H{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,vA()&&(this.destroyRef=b(rl,{optional:!0})??void 0)}emit(e){let n=me(null);try{super.next(e)}finally{me(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=qy(s),i&&(i=qy(i)),o&&(o=qy(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ae&&e.add(a),a}};function qy(t){return e=>{setTimeout(t,void 0,e)}}var Ce=__;function pU(){return this._results[Symbol.iterator]()}var Yh=class t{get changes(){return this._changes??=new Ce}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=pU)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=zj(e);(this._changesDetected=!Hj(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function rR(t){return(t.flags&128)===128}var iR=new Map,mU=0;function gU(){return mU++}function yU(t){iR.set(t[ff],t)}function _U(t){iR.delete(t[ff])}var yS="__ngContext__";function gi(t,e){_s(e)?(t[yS]=e[ff],yU(e)):t[yS]=e}function sR(t){return aR(t[zc])}function oR(t){return aR(t[Fn])}function aR(t){for(;t!==null&&!Fr(t);)t=t[Fn];return t}var v_;function cR(t){v_=t}function lR(){if(v_!==void 0)return v_;if(typeof document<"u")return document;throw new T(210,!1)}var il=new x("",{providedIn:"root",factory:()=>vU}),vU="ng",xv=new x(""),_n=new x("",{providedIn:"platform",factory:()=>"unknown"});var Gt=new x(""),sl=new x("",{providedIn:"root",factory:()=>lR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var wU="h",EU="b";var IU=()=>null;function Nv(t,e,n=!1){return IU(t,e,n)}var uR=!1,bU=new x("",{providedIn:"root",factory:()=>uR});var Rh;function DU(){if(Rh===void 0&&(Rh=null,tt.trustedTypes))try{Rh=tt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Rh}function wf(t){return DU()?.createHTML(t)||t}var Mh;function dR(){if(Mh===void 0&&(Mh=null,tt.trustedTypes))try{Mh=tt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Mh}function _S(t){return dR()?.createHTML(t)||t}function vS(t){return dR()?.createScriptURL(t)||t}var Zh=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${HS})`}};function Ms(t){return t instanceof Zh?t.changingThisBreaksApplicationSecurity:t}function Ef(t,e){let n=CU(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${HS})`)}return n===e}function CU(t){return t instanceof Zh&&t.getTypeName()||null}function TU(t){let e=new E_(t);return SU()?new w_(e):e}var w_=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(wf(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},E_=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=wf(e),n}};function SU(){try{return!!new window.DOMParser().parseFromString(wf(""),"text/html")}catch{return!1}}var AU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Pv(t){return t=String(t),t.match(AU)?t:"unsafe:"+t}function Lr(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function ol(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var hR=Lr("area,br,col,hr,img,wbr"),fR=Lr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),pR=Lr("rp,rt"),RU=ol(pR,fR),MU=ol(fR,Lr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xU=ol(pR,Lr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),wS=ol(hR,MU,xU,RU),mR=Lr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),NU=Lr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),PU=Lr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),OU=ol(mR,NU,PU),kU=Lr("script,style,template"),I_=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=VU(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let s=LU(n);if(s){n=s;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=ES(e).toLowerCase();if(!wS.hasOwnProperty(n))return this.sanitizedSomething=!0,!kU.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!OU.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;mR[a]&&(c=Pv(c)),this.buf.push(" ",o,'="',IS(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=ES(e).toLowerCase();wS.hasOwnProperty(n)&&!hR.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(IS(e))}};function FU(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function LU(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw gR(e);return e}function VU(t){let e=t.firstChild;if(e&&FU(t,e))throw gR(e);return e}function ES(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function gR(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var jU=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,BU=/([^\#-~ |!])/g;function IS(t){return t.replace(/&/g,"&amp;").replace(jU,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(BU,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var xh;function yR(t,e){let n=null;try{xh=xh||TU(t);let r=e?String(e):"";n=xh.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=xh.getInertBodyElement(r)}while(r!==s);let a=new I_().sanitizeChildren(bS(n)||n);return wf(a)}finally{if(n){let r=bS(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function bS(t){return"content"in t&&UU(t)?t.content:null}function UU(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var al=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(al||{});function _R(t){let e=Ov();return e?_S(e.sanitize(al.HTML,t)||""):Ef(t,"HTML")?_S(Ms(t)):yR(lR(),Jc(t))}function $U(t){let e=Ov();return e?e.sanitize(al.URL,t)||"":Ef(t,"URL")?Ms(t):Pv(Jc(t))}function HU(t){let e=Ov();if(e)return vS(e.sanitize(al.RESOURCE_URL,t)||"");if(Ef(t,"ResourceURL"))return vS(Ms(t));throw new T(904,!1)}function zU(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?HU:$U}function vR(t,e,n){return zU(e,n)(t)}function Ov(){let t=re();return t&&t[Ln].sanitizer}var qU=/^>|^->|<!--|-->|--!>|<!-$/g,GU=/(<|>)/g,WU="\u200B$1\u200B";function KU(t){return t.replace(qU,e=>e.replace(GU,WU))}function wR(t){return t instanceof Function?t():t}function QU(t){return(t??b(Ne)).get(_n)==="browser"}var sr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(sr||{}),YU;function kv(t,e){return YU(t,e)}function Wo(t,e,n,r,i){if(r!=null){let s,o=!1;Fr(r)?s=r:_s(r)&&(o=!0,r=r[cr]);let a=ir(r);t===0&&n!==null?i==null?CR(e,n,a):Xh(e,n,a,i||null,!0):t===1&&n!==null?Xh(e,n,a,i||null,!0):t===2?h2(e,a,o):t===3&&e.destroyNode(a),s!=null&&p2(e,t,s,n,i)}}function ZU(t,e){return t.createText(e)}function XU(t,e,n){t.setValue(e,n)}function JU(t,e){return t.createComment(KU(e))}function ER(t,e,n){return t.createElement(e,n)}function e2(t,e){IR(t,e),e[cr]=null,e[Jt]=null}function t2(t,e,n,r,i,s){r[cr]=i,r[Jt]=e,Df(t,r,n,1,i,s)}function IR(t,e){e[Ln].changeDetectionScheduler?.notify(1),Df(t,e,e[Be],2,null,null)}function n2(t){let e=t[zc];if(!e)return Gy(t[ne],t);for(;e;){let n=null;if(_s(e))n=e[zc];else{let r=e[Dt];r&&(n=r)}if(!n){for(;e&&!e[Fn]&&e!==t;)_s(e)&&Gy(e[ne],e),e=e[pt];e===null&&(e=t),_s(e)&&Gy(e[ne],e),n=e&&e[Fn]}e=n}}function r2(t,e,n,r){let i=Dt+r,s=n.length;r>0&&(n[i-1][Fn]=e),r<s-Dt?(e[Fn]=n[i],tA(n,Dt+r,e)):(n.push(e),e[Fn]=null),e[pt]=n;let o=e[tl];o!==null&&n!==o&&i2(o,e);let a=e[Pr];a!==null&&a.insertView(t),d_(e),e[K]|=128}function i2(t,e){let n=t[na],i=e[pt][pt][pn];e[pn]!==i&&(t[K]|=mv.HasTransplantedViews),n===null?t[na]=[e]:n.push(e)}function bR(t,e){let n=t[na],r=n.indexOf(e);n.splice(r,1)}function Wc(t,e){if(t.length<=Dt)return;let n=Dt+e,r=t[n];if(r){let i=r[tl];i!==null&&i!==t&&bR(i,r),e>0&&(t[n-1][Fn]=r[Fn]);let s=Hh(t,Dt+e);e2(r[ne],r);let o=s[Pr];o!==null&&o.detachView(s[ne]),r[pt]=null,r[Fn]=null,r[K]&=-129}return r}function If(t,e){if(!(e[K]&256)){let n=e[Be];n.destroyNode&&Df(t,e,n,3,null,null),n2(e)}}function Gy(t,e){if(e[K]&256)return;let n=me(null);try{e[K]&=-129,e[K]|=256,e[Es]&&by(e[Es]),o2(t,e),s2(t,e),e[ne].type===1&&e[Be].destroy();let r=e[tl];if(r!==null&&Fr(e[pt])){r!==e[pt]&&bR(r,e);let i=e[Pr];i!==null&&i.detachView(t)}_U(e)}finally{me(n)}}function s2(t,e){let n=t.cleanup,r=e[Hc];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Hc]=null);let i=e[pi];if(i!==null){e[pi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function o2(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ds)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];tr(4,a,c);try{c.call(a)}finally{tr(5,a,c)}}else{tr(4,i,s);try{s.call(i)}finally{tr(5,i,s)}}}}}function DR(t,e,n){return a2(t,e.parent,n)}function a2(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[cr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===rr.None||s===rr.Emulated)return null}return yn(r,n)}}function Xh(t,e,n,r,i){t.insertBefore(e,n,r,i)}function CR(t,e,n){t.appendChild(e,n)}function DS(t,e,n,r,i){r!==null?Xh(t,e,n,r,i):CR(t,e,n)}function c2(t,e,n,r){t.removeChild(e,n,r)}function Fv(t,e){return t.parentNode(e)}function l2(t,e){return t.nextSibling(e)}function TR(t,e,n){return d2(t,e,n)}function u2(t,e,n){return t.type&40?yn(t,n):null}var d2=u2,CS;function bf(t,e,n,r){let i=DR(t,r,e),s=e[Be],o=r.parent||e[Jt],a=TR(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)DS(s,i,n[c],a,!1);else DS(s,i,n,a,!1);CS!==void 0&&CS(s,r,e,n,i)}function jh(t,e){if(e!==null){let n=e.type;if(n&3)return yn(e,t);if(n&4)return b_(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return jh(t,r);{let i=t[e.index];return Fr(i)?b_(-1,i):ir(i)}}else{if(n&32)return kv(e,t)()||ir(t[e.index]);{let r=SR(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Gc(t[pn]);return jh(i,r)}else return jh(t,e.next)}}}return null}function SR(t,e){if(e!==null){let r=t[pn][Jt],i=e.projection;return r.projection[i]}return null}function b_(t,e){let n=Dt+t+1;if(n<e.length){let r=e[n],i=r[ne].firstChild;if(i!==null)return jh(r,i)}return e[Is]}function h2(t,e,n){let r=Fv(t,e);r&&c2(t,r,e,n)}function Lv(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&gi(ir(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Lv(t,e,n.child,r,i,s,!1),Wo(e,t,i,a,s);else if(c&32){let l=kv(n,r),u;for(;u=l();)Wo(e,t,i,u,s);Wo(e,t,i,a,s)}else c&16?AR(t,e,r,n,i,s):Wo(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Df(t,e,n,r,i,s){Lv(n,r,t.firstChild,e,i,s,!1)}function f2(t,e,n){let r=e[Be],i=DR(t,n,e),s=n.parent||e[Jt],o=TR(s,n,e);AR(r,0,e,n,i,o)}function AR(t,e,n,r,i,s){let o=n[pn],c=o[Jt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Wo(e,t,i,u,s)}else{let l=c,u=o[pt];rR(r)&&(l.flags|=128),Lv(t,e,l,u,i,s,!0)}}function p2(t,e,n,r,i){let s=n[Is],o=ir(n);s!==o&&Wo(e,t,r,s,i);for(let a=Dt;a<n.length;a++){let c=n[a];Df(c[ne],c,t,e,r,s)}}function m2(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:sr.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=sr.Important),t.setStyle(n,r,i,s))}}function g2(t,e,n){t.setAttribute(e,"style",n)}function RR(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function MR(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&o_(t,e,r),i!==null&&RR(t,e,i),s!==null&&g2(t,e,s)}var Vr={};function jn(t=1){xR(Ue(),re(),wi()+t,!1)}function xR(t,e,n,r){if(!r)if((e[K]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Fh(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Lh(e,s,0,n)}bs(n)}function S(t,e=fe.Default){let n=re();if(n===null)return y(t,e);let r=gt();return ZA(r,n,Ot(t),e)}function NR(){let t="invalid";throw new Error(t)}function PR(t,e,n,r,i,s){let o=me(null);try{let a=null;i&pe.SignalBased&&(a=e[r][hn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&pe.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):IA(e,a,r,s)}finally{me(o)}}function y2(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)bs(~i);else{let s=i,o=n[++r],a=n[++r];zB(o,s);let c=e[s];a(2,c)}}}finally{bs(-1)}}function Cf(t,e,n,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[cr]=i,d[K]=r|4|128|8|64,(l!==null||t&&t[K]&2048)&&(d[K]|=2048),RA(d),d[pt]=d[aa]=t,d[bt]=n,d[Ln]=o||t&&t[Ln],d[Be]=a||t&&t[Be],d[ta]=c||t&&t[ta]||null,d[Jt]=s,d[ff]=gU(),d[ea]=u,d[EA]=l,d[pn]=e.type==2?t[pn]:d,d}function la(t,e,n,r,i){let s=t.data[e];if(s===null)s=_2(t,e,n,r,i),HB()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=BB();s.injectorIndex=o===null?-1:o.injectorIndex}return Rs(s,!0),s}function _2(t,e,n,r,i){let s=PA(),o=Iv(),a=o?s:s&&s.parent,c=t.data[e]=D2(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function OR(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function kR(t,e,n,r,i){let s=wi(),o=r&2;try{bs(-1),o&&e.length>Ct&&xR(t,e,Ct,!1),tr(o?2:0,i),n(r,i)}finally{bs(s),tr(o?3:1,i)}}function Vv(t,e,n){if(gv(e)){let r=me(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{me(r)}}}function jv(t,e,n){xA()&&(M2(t,e,n,yn(n,e)),(n.flags&64)===64&&VR(t,e,n))}function Bv(t,e,n=yn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function FR(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Uv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Uv(t,e,n,r,i,s,o,a,c,l,u){let d=Ct+r,h=d+i,f=v2(d,h),m=typeof l=="function"?l():l;return f[ne]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}function v2(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Vr);return n}function w2(t,e,n,r){let s=r.get(bU,uR)||n===rr.ShadowDom,o=t.selectRootElement(e,s);return E2(o),o}function E2(t){I2(t)}var I2=()=>null;function b2(t,e,n,r){let i=UR(e);i.push(n),t.firstCreatePass&&$R(t).push(r,i.length-1)}function D2(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return NA()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function TS(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=pe.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?SS(r,n,l,a,c):SS(r,n,l,a)}return r}function SS(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function C2(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],h=n?n.get(d):null,f=h?h.inputs:null,m=h?h.outputs:null;c=TS(0,d.inputs,u,c,f),l=TS(1,d.outputs,u,l,m);let g=c!==null&&o!==null&&!dv(e)?U2(c,u,o):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function T2(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Tf(t,e,n,r,i,s,o,a){let c=yn(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(Hv(t,n,u,r,i),pf(e)&&S2(n,e.index)):e.type&3?(r=T2(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function S2(t,e){let n=_i(e,t);n[K]&16||(n[K]|=64)}function $v(t,e,n,r){if(xA()){let i=r===null?null:{"":-1},s=N2(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&LR(t,e,n,o,i,a),i&&P2(n,r,i)}n.mergedAttrs=Uc(n.mergedAttrs,n.attrs)}function LR(t,e,n,r,i,s){for(let l=0;l<r.length;l++)p_(Qh(n,e),t,r[l].type);k2(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=OR(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Uc(n.mergedAttrs,u.hostAttrs),F2(t,n,e,c,u),O2(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}C2(t,n,s)}function A2(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;R2(o)!=a&&o.push(a),o.push(n,r,s)}}function R2(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function M2(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;pf(n)&&L2(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Qh(n,e),gi(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=Cs(e,t,a,n);if(gi(l,e),o!==null&&B2(e,a-i,l,c,n,o),Or(c)){let u=_i(n.index,e);u[bt]=Cs(e,t,a,n)}}}function VR(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=qB();try{bs(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];h_(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&x2(c,l)}}finally{bs(-1),h_(o)}}function x2(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function N2(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(aA(e,o.selectors,!1))if(r||(r=[]),Or(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;D_(t,e,c)}else r.unshift(o),D_(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function D_(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function P2(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new T(-301,!1);r.push(e[i],s)}}}function O2(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Or(e)&&(n[""]=t)}}function k2(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function F2(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=ws(i.type,!0)),o=new Ds(s,Or(i),S);t.blueprint[r]=o,n[r]=o,A2(t,e,r,OR(t,n,i.hostVars,Vr),i)}function L2(t,e,n){let r=yn(e,t),i=FR(n),s=t[Ln].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Sf(t,Cf(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function V2(t,e,n,r,i,s){let o=yn(t,e);j2(e[Be],o,s,t.value,n,r,i)}function j2(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Jc(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function B2(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];PR(r,n,c,l,u,d)}}function U2(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function jR(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function BR(t,e){let n=t.contentQueries;if(n!==null){let r=me(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];gf(s),a.contentQueries(2,e[o],o)}}}finally{me(r)}}}function Sf(t,e){return t[zc]?t[uS][Fn]=e:t[zc]=e,t[uS]=e,e}function C_(t,e,n){gf(0);let r=me(null);try{e(t,n)}finally{me(r)}}function UR(t){return t[Hc]||(t[Hc]=[])}function $R(t){return t.cleanup||(t.cleanup=[])}function HR(t,e,n){return(t===null||Or(t))&&(n=RB(n[e.index])),n[Be]}function zR(t,e){let n=t[ta],r=n?n.get(mn,null):null;r&&r.handleError(e)}function Hv(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],u=t.data[o];PR(u,l,r,a,c,i)}}function $2(t,e,n){let r=SA(e,t);XU(t[Be],r,n)}function H2(t,e){let n=_i(e,t),r=n[ne];z2(r,n);let i=n[cr];i!==null&&n[ea]===null&&(n[ea]=Nv(i,n[ta])),zv(r,n,n[bt])}function z2(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function zv(t,e,n){Tv(e);try{let r=t.viewQuery;r!==null&&C_(1,r,n);let i=t.template;i!==null&&kR(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Pr]?.finishViewCreation(t),t.staticContentQueries&&BR(t,e),t.staticViewQueries&&C_(2,t.viewQuery,n);let s=t.components;s!==null&&q2(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[K]&=-5,Sv()}}function q2(t,e){for(let n=0;n<e.length;n++)H2(t,e[n])}function Af(t,e,n,r){let i=me(null);try{let s=e.tView,a=t[K]&4096?4096:16,c=Cf(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[tl]=l;let u=t[Pr];return u!==null&&(c[Pr]=u.createEmbeddedView(s)),zv(s,c,n),c}finally{me(i)}}function qR(t,e){let n=Dt+e;if(n<t.length)return t[n]}function Kc(t,e){return!e||e.firstChild===null||rR(t)}function Rf(t,e,n,r=!0){let i=e[ne];if(r2(i,e,t,n),r){let o=b_(n,t),a=e[Be],c=Fv(a,t[Is]);c!==null&&t2(i,t[Jt],a,e,c,o)}let s=e[ea];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function GR(t,e){let n=Wc(t,e);return n!==void 0&&If(n[ne],n),n}function Jh(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(ir(s)),Fr(s)&&G2(s,r);let o=n.type;if(o&8)Jh(t,e,n.child,r);else if(o&32){let a=kv(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=SR(e,n);if(Array.isArray(a))r.push(...a);else{let c=Gc(e[pn]);Jh(c[ne],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function G2(t,e){for(let n=Dt;n<t.length;n++){let r=t[n],i=r[ne].firstChild;i!==null&&Jh(r[ne],r,i,e)}t[Is]!==t[cr]&&e.push(t[Is])}var WR=[];function W2(t){return t[Es]??K2(t)}function K2(t){let e=WR.pop()??Object.create(Y2);return e.lView=t,e}function Q2(t){t.lView[Es]!==t&&(t.lView=null,WR.push(t))}var Y2=he(I({},Mc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{qc(t.lView)},consumerOnSignalRead(){this.lView[Es]=this}}),KR=100;function QR(t,e=!0,n=0){let r=t[Ln],i=r.rendererFactory,s=!1;s||i.begin?.();try{Z2(t,n)}catch(o){throw e&&zR(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Z2(t,e){T_(t,e);let n=0;for(;vv(t);){if(n===KR)throw new T(103,!1);n++,T_(t,1)}}function X2(t,e,n,r){let i=e[K];if((i&256)===256)return;let s=!1;!s&&e[Ln].inlineEffectRunner?.flush(),Tv(e);let o=null,a=null;!s&&J2(t)&&(a=W2(e),o=Gd(a));try{RA(e),$B(t.bindingStartIndex),n!==null&&kR(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&Fh(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Lh(e,d,0,null),$y(e,0)}if(e$(e),YR(e,0),t.contentQueries!==null&&BR(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&Fh(e,d)}else{let d=t.contentHooks;d!==null&&Lh(e,d,1),$y(e,1)}y2(t,e);let l=t.components;l!==null&&XR(e,l,0);let u=t.viewQuery;if(u!==null&&C_(2,u,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&Fh(e,d)}else{let d=t.viewHooks;d!==null&&Lh(e,d,2),$y(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[kh]){for(let d of e[kh])d();e[kh]=null}s||(e[K]&=-73)}catch(c){throw qc(e),c}finally{a!==null&&(Wd(a,o),Q2(a)),Sv()}}function J2(t){return t.type!==2}function YR(t,e){for(let n=sR(t);n!==null;n=oR(n))for(let r=Dt;r<n.length;r++){let i=n[r];ZR(i,e)}}function e$(t){for(let e=sR(t);e!==null;e=oR(e)){if(!(e[K]&mv.HasTransplantedViews))continue;let n=e[na];for(let r=0;r<n.length;r++){let i=n[r],s=i[pt];NB(i)}}}function t$(t,e,n){let r=_i(e,t);ZR(r,n)}function ZR(t,e){_v(t)&&T_(t,e)}function T_(t,e){let r=t[ne],i=t[K],s=t[Es],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Kd(s)),s&&(s.dirty=!1),t[K]&=-9217,o)X2(r,t,r.template,t[bt]);else if(i&8192){YR(t,1);let a=r.components;a!==null&&XR(t,a,1)}}function XR(t,e,n){for(let r=0;r<e.length;r++)t$(t,e[r],n)}function qv(t){for(t[Ln].changeDetectionScheduler?.notify();t;){t[K]|=64;let e=Gc(t);if(IB(t)&&!e)return t;t=e}return null}var Ts=class{get rootNodes(){let e=this._lView,n=e[ne];return Jh(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[bt]}set context(e){this._lView[bt]=e}get destroyed(){return(this._lView[K]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[pt];if(Fr(e)){let n=e[qh],r=n?n.indexOf(this):-1;r>-1&&(Wc(e,r),Hh(n,r))}this._attachedToViewContainer=!1}If(this._lView[ne],this._lView)}onDestroy(e){MA(this._lView,e)}markForCheck(){qv(this._cdRefInjectingView||this._lView)}detach(){this._lView[K]&=-129}reattach(){d_(this._lView),this._lView[K]|=128}detectChanges(){this._lView[K]|=1024,QR(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new T(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,IR(this._lView[ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new T(902,!1);this._appRef=e,d_(this._lView)}},Vn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=i$;let t=e;return t})(),n$=Vn,r$=class extends n${constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Af(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Ts(i)}};function i$(){return Mf(gt(),re())}function Mf(t,e){return t.type&4?new r$(e,t,ca(t,e)):null}var dse=new RegExp(`^(\\d+)*(${EU}|${wU})*(.*)`);var s$=()=>null;function Qc(t,e){return s$(t,e)}var ia=class{},S_=class{},ef=class{};function o$(t){let e=Error(`No component factory found for ${Ft(t)}.`);return e[a$]=t,e}var a$="ngComponent";var A_=class{resolveComponentFactory(e){throw o$(e)}},Ei=(()=>{let e=class e{};e.NULL=new A_;let t=e;return t})(),Ss=class{},Bn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>c$();let t=e;return t})();function c$(){let t=re(),e=gt(),n=_i(e.index,t);return(_s(n)?n:t)[Be]}var l$=(()=>{let e=class e{};e.\u0275prov=C({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Wy={};var AS=new Set;function Ii(t){AS.has(t)||(AS.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Ko=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ko||{}),u$={destroy(){}};function xf(t,e){!e&&wA(xf);let n=e?.injector??b(Ne);if(!QU(n))return u$;Ii("NgAfterNextRender");let r=n.get(Gv),i=r.handler??=new M_,s=e?.phase??Ko.MixedReadWrite,o=()=>{i.unregister(c),a()},a=n.get(rl).onDestroy(o),c=kr(n,()=>new R_(s,()=>{o(),t()}));return i.register(c),{destroy:o}}var R_=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.errorHandler=b(mn,{optional:!0}),b(ia,{optional:!0})?.notify(1)}invoke(){try{this.callbackFn()}catch(e){this.errorHandler?.handleError(e)}}},M_=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ko.EarlyRead]:new Set,[Ko.Write]:new Set,[Ko.MixedReadWrite]:new Set,[Ko.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Gv=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=C({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function tf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=n_(i,a);else if(s==2){let c=a,l=e[++o];r=n_(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var nf=class extends Ei{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=mi(e);return new sa(n,this.ngModule)}};function RS(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function d$(t){let e=t.toLowerCase();return e==="svg"?TA:e==="math"?TB:null}var x_=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=uf(r);let i=this.injector.get(e,Wy,r);return i!==Wy||n===Wy?i:this.parentInjector.get(e,n,r)}},sa=class extends ef{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=RS(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return RS(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=sB(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=me(null);try{i=i||this.ngModule;let o=i instanceof qt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new x_(e,o):e,c=a.get(Ss,null);if(c===null)throw new T(407,!1);let l=a.get(l$,null),u=a.get(Gv,null),d=a.get(ia,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",g=r?w2(f,r,this.componentDef.encapsulation,a):ER(f,m,d$(m)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let E=null;g!==null&&(E=Nv(g,a,!0));let R=Uv(0,null,null,1,0,null,null,null,null,null,null),M=Cf(null,R,null,v,null,null,h,f,a,null,E);Tv(M);let F,ee;try{let j=this.componentDef,te,be=null;j.findHostDirectiveDefs?(te=[],be=new Map,j.findHostDirectiveDefs(j,te,be),te.push(j)):te=[j];let xt=h$(M,g),Qt=f$(xt,g,j,te,M,h,f);ee=yv(R,Ct),g&&g$(f,j,g,r),n!==void 0&&y$(ee,this.ngContentSelectors,n),F=m$(Qt,j,te,be,M,[_$]),zv(R,M,null)}finally{Sv()}return new N_(this.componentType,F,ca(ee,M),M,ee)}finally{me(s)}}},N_=class extends S_{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ts(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Hv(s[ne],s,i,e,n),this.previousInputValues.set(e,n);let o=_i(this._tNode.index,s);qv(o)}}get injector(){return new vs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function h$(t,e){let n=t[ne],r=Ct;return t[r]=e,la(n,r,2,"#host",null)}function f$(t,e,n,r,i,s,o){let a=i[ne];p$(r,t,e,o);let c=null;e!==null&&(c=Nv(e,i[ta]));let l=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Cf(i,FR(n),null,u,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&D_(a,t,r.length-1),Sf(i,d),i[t.index]=d}function p$(t,e,n,r){for(let i of t)e.mergedAttrs=Uc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(tf(e,e.mergedAttrs,!0),n!==null&&MR(r,n,e))}function m$(t,e,n,r,i,s){let o=gt(),a=i[ne],c=yn(o,i);LR(a,i,o,n,null,r);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,h=Cs(i,a,d,o);gi(h,i)}VR(a,i,o),c&&gi(c,i);let l=Cs(i,a,o.directiveStart+o.componentOffset,o);if(t[bt]=i[bt]=l,s!==null)for(let u of s)u(l,e);return Vv(a,o,i),l}function g$(t,e,n,r){if(r)o_(t,n,["ng-version","17.3.7"]);else{let{attrs:i,classes:s}=oB(e.selectors[0]);i&&o_(t,n,i),s&&s.length>0&&RR(t,n,s.join(" "))}}function y$(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function _$(){let t=gt();vf(re()[ne],t)}var vn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=v$;let t=e;return t})();function v$(){let t=gt();return eM(t,re())}var w$=vn,JR=class extends w${constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ca(this._hostTNode,this._hostLView)}get injector(){return new vs(this._hostTNode,this._hostLView)}get parentInjector(){let e=Av(this._hostTNode,this._hostLView);if(qA(e)){let n=Wh(e,this._hostLView),r=Gh(e),i=n[ne].data[r+8];return new vs(i,n)}else return new vs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=MS(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Dt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Qc(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Kc(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!EB(e),a;if(o)a=n;else{let m=n||{};a=m.index,r=m.injector,i=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef}let c=o?e:new sa(mi(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let g=(o?l:this.parentInjector).get(qt,null);g&&(s=g)}let u=mi(c.componentType??{}),d=Qc(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,i,h,s);return this.insertImpl(f.hostView,a,Kc(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(xB(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[pt],l=new JR(c,c[Jt],c[pt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Rf(o,i,s,r),e.attachToViewContainerRef(),tA(Ky(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=MS(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Wc(this._lContainer,n);r&&(Hh(Ky(this._lContainer),n),If(r[ne],r))}detach(e){let n=this._adjustIndex(e,-1),r=Wc(this._lContainer,n);return r&&Hh(Ky(this._lContainer),n)!=null?new Ts(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function MS(t){return t[qh]}function Ky(t){return t[qh]||(t[qh]=[])}function eM(t,e){let n,r=e[t.index];return Fr(r)?n=r:(n=jR(r,e,null,t),e[t.index]=n,Sf(e,n)),I$(n,e,t,r),new JR(n,t,e)}function E$(t,e){let n=t[Be],r=n.createComment(""),i=yn(e,t),s=Fv(n,i);return Xh(n,s,r,l2(n,i),!1),r}var I$=C$,b$=()=>!1;function D$(t,e,n){return b$(t,e,n)}function C$(t,e,n,r){if(t[Is])return;let i;n.type&8?i=ir(r):i=E$(e,n),t[Is]=i}var P_=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},O_=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Kv(e,n).matches!==null&&this.queries[n].setDirty()}},rf=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=x$(e):this.predicate=e}},k_=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},F_=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,T$(n,s)),this.matchTNodeWithReadOption(e,n,Vh(n,e,s,!1,!1))}else r===Vn?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Vh(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===ve||i===vn||i===Vn&&n.type&4)this.addMatch(n.index,-2);else{let s=Vh(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function T$(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function S$(t,e){return t.type&11?ca(t,e):t.type&4?Mf(t,e):null}function A$(t,e,n,r){return n===-1?S$(e,t):n===-2?R$(t,e,r):Cs(t,t[ne],n,e)}function R$(t,e,n){if(n===ve)return ca(e,t);if(n===Vn)return Mf(e,t);if(n===vn)return eM(e,t)}function tM(t,e,n,r){let i=e[Pr].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(A$(e,u,o[c+1],n.metadata.read))}}i.matches=a}return i.matches}function L_(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=tM(t,e,i,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let d=Dt;d<u.length;d++){let h=u[d];h[tl]===h[pt]&&L_(h[ne],h,l,r)}if(u[na]!==null){let d=u[na];for(let h=0;h<d.length;h++){let f=d[h];L_(f[ne],f,l,r)}}}}}return r}function Wv(t,e){return t[Pr].queries[e].queryList}function nM(t,e,n){let r=new Yh((n&4)===4);return b2(t,e,r,r.destroy),(e[Pr]??=new O_).queries.push(new P_(r))-1}function rM(t,e,n){let r=Ue();return r.firstCreatePass&&(iM(r,new rf(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),nM(r,re(),e)}function M$(t,e,n,r){let i=Ue();if(i.firstCreatePass){let s=gt();iM(i,new rf(e,n,r),s.index),N$(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return nM(i,re(),n)}function x$(t){return t.split(",").map(e=>e.trim())}function iM(t,e,n){t.queries===null&&(t.queries=new k_),t.queries.track(new F_(e,n))}function N$(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Kv(t,e){return t.queries.getByIndex(e)}function sM(t,e){let n=t[ne],r=Kv(n,e);return r.crossesNgTemplate?L_(n,t,e,[]):tM(n,t,r,e)}function P$(t){return typeof t=="function"&&t[hn]!==void 0}function Qv(t,e){Ii("NgSignals");let n=wT(t),r=n[hn];return e?.equal&&(r.equal=e.equal),n.set=i=>Yd(r,i),n.update=i=>ET(r,i),n.asReadonly=O$.bind(n),n}function O$(){let t=this[hn];if(t.readonlyFn===void 0){let e=()=>this();e[hn]=t,t.readonlyFn=e}return t.readonlyFn}function oM(t){return P$(t)&&typeof t.set=="function"}function aM(t,e){let n,r=gT(()=>{n._dirtyCounter();let i=V$(n,t);if(e&&i===void 0)throw new T(-951,!1);return i});return n=r[hn],n._dirtyCounter=Qv(0),n._flatValue=void 0,r}function k$(){return aM(!0,!1)}function F$(){return aM(!0,!0)}function L$(t,e){let n=t[hn];n._lView=re(),n._queryIndex=e,n._queryList=Wv(n._lView,e),n._queryList.onDirty(()=>n._dirtyCounter.update(r=>r+1))}function V$(t,e){let n=t._lView,r=t._queryIndex;if(n===void 0||r===void 0||n[K]&4)return e?void 0:kt;let i=Wv(n,r),s=sM(n,r);return i.reset(s,nR),e?i.first:i._changesDetected||t._flatValue===void 0?t._flatValue=i.toArray():t._flatValue}function xS(t,e){return k$()}function j$(t,e){return F$()}var fse=(xS.required=j$,xS);function B$(t){return Object.getPrototypeOf(t.prototype).constructor}function Ye(t){let e=B$(t.type),n=!0,r=[t];for(;e;){let i;if(Or(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new T(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Nh(t.inputs),o.inputTransforms=Nh(t.inputTransforms),o.declaredInputs=Nh(t.declaredInputs),o.outputs=Nh(t.outputs);let a=i.hostBindings;a&&q$(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&H$(t,c),l&&z$(t,l),U$(t,i),Dj(t.outputs,i.outputs),Or(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Ye&&(n=!1)}}e=Object.getPrototypeOf(e)}$$(r)}function U$(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function $$(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Uc(i.hostAttrs,n=Uc(n,i.hostAttrs))}}function Nh(t){return t===Zo?{}:t===kt?[]:t}function H$(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function z$(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function q$(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function jr(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var yi=class{},Yc=class{};var V_=class extends yi{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new nf(this);let i=hA(e);this._bootstrapComponents=wR(i.bootstrap),this._r3Injector=eR(e,n,[{provide:yi,useValue:this},{provide:Ei,useValue:this.componentFactoryResolver},...r],Ft(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},j_=class extends Yc{constructor(e){super(),this.moduleType=e}create(e){return new V_(this.moduleType,e,[])}};var sf=class extends yi{constructor(e){super(),this.componentFactoryResolver=new nf(this),this.instance=null;let n=new $c([...e.providers,{provide:yi,useValue:this},{provide:Ei,useValue:this.componentFactoryResolver}],e.parent||fv(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Nf(t,e,n=null){return new sf({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var cl=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Qe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cM(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function G$(t,e,n){return t[e]=n}function Un(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function W$(t){return(t.flags&32)===32}function K$(t,e,n,r,i,s,o,a,c){let l=e.consts,u=la(e,t,4,o||null,ra(l,a));$v(e,n,u,ra(l,c)),vf(e,u);let d=u.tView=Uv(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Xt(t,e,n,r,i,s,o,a){let c=re(),l=Ue(),u=t+Ct,d=l.firstCreatePass?K$(u,l,c,e,n,r,i,s,o):l.data[u];Rs(d,!1);let h=Q$(l,c,d,t);yf()&&bf(l,c,h,d),gi(h,c);let f=jR(h,c,h,d);return c[u]=f,Sf(c,f),D$(f,d,c),mf(d)&&jv(l,c,d),o!=null&&Bv(c,d,a),Xt}var Q$=Y$;function Y$(t,e,n,r){return _f(!0),e[Be].createComment("")}function NS(...t){}function Z$(){let t=typeof tt.requestAnimationFrame=="function",e=tt[t?"requestAnimationFrame":"setTimeout"],n=tt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var L=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ce(!1),this.onMicrotaskEmpty=new Ce(!1),this.onStable=new Ce(!1),this.onError=new Ce(!1),typeof Zone>"u")throw new T(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=Z$().nativeRequestAnimationFrame,eH(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new T(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new T(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,X$,NS,NS);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},X$={};function Yv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function J$(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(tt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,B_(t),t.isCheckStableRunning=!0,Yv(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),B_(t))}function eH(t){let e=()=>{J$(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(tH(a))return n.invokeTask(i,s,o,a);try{return PS(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),OS(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return PS(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),OS(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,B_(t),Yv(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function B_(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function PS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function OS(t){t._nesting--,Yv(t)}function tH(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function ur(t,e,n,r){let i=re(),s=vi();if(Un(i,s,e)){let o=Ue(),a=nl();V2(a,i,t,e,n,r)}return ur}function nH(t,e,n,r){return Un(t,vi(),n)?e+Jc(n)+r:Vr}function Ph(t,e){return t<<17|e<<2}function As(t){return t>>17&32767}function rH(t){return(t&2)==2}function iH(t,e){return t&131071|e<<17}function U_(t){return t|2}function oa(t){return(t&131068)>>2}function Qy(t,e){return t&-131069|e<<2}function sH(t){return(t&1)===1}function $_(t){return t|1}function oH(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=As(o),c=oa(o);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||el(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let h=As(t[a+1]);t[r+1]=Ph(h,a),h!==0&&(t[h+1]=Qy(t[h+1],r)),t[a+1]=iH(t[a+1],r)}else t[r+1]=Ph(a,0),a!==0&&(t[a+1]=Qy(t[a+1],r)),a=r;else t[r+1]=Ph(c,0),a===0?a=r:t[c+1]=Qy(t[c+1],r),c=r;l&&(t[r+1]=U_(t[r+1])),kS(t,u,r,!0),kS(t,u,r,!1),aH(e,u,t,r,s),o=Ph(a,c),s?e.classBindings=o:e.styleBindings=o}function aH(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&el(s,e)>=0&&(n[r+1]=$_(n[r+1]))}function kS(t,e,n,r){let i=t[n+1],s=e===null,o=r?As(i):oa(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];cH(c,e)&&(a=!0,t[o+1]=r?$_(l):U_(l)),o=r?As(l):oa(l)}a&&(t[n+1]=r?U_(i):$_(i))}function cH(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?el(t,e)>=0:!1}var kn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function lH(t){return t.substring(kn.key,kn.keyEnd)}function uH(t){return dH(t),lM(t,uM(t,0,kn.textEnd))}function lM(t,e){let n=kn.textEnd;return n===e?-1:(e=kn.keyEnd=hH(t,kn.key=e,n),uM(t,e,n))}function dH(t){kn.key=0,kn.keyEnd=0,kn.value=0,kn.valueEnd=0,kn.textEnd=t.length}function uM(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function hH(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function xs(t,e,n){let r=re(),i=vi();if(Un(r,i,e)){let s=Ue(),o=nl();Tf(s,o,r,t,e,r[Be],n,!1)}return xs}function H_(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Hv(t,n,s[o],o,r)}function Zv(t,e,n){return hM(t,e,n,!1),Zv}function Br(t,e){return hM(t,e,null,!0),Br}function dM(t){pH(wH,fH,t,!0)}function fH(t,e){for(let n=uH(e);n>=0;n=lM(e,n))uv(t,lH(e),!0)}function hM(t,e,n,r){let i=re(),s=Ue(),o=kA(2);if(s.firstUpdatePass&&pM(s,t,o,r),e!==Vr&&Un(i,o,e)){let a=s.data[wi()];mM(s,a,i,i[Be],t,i[o+1]=IH(e,n),r,o)}}function pH(t,e,n,r){let i=Ue(),s=kA(2);i.firstUpdatePass&&pM(i,null,s,r);let o=re();if(n!==Vr&&Un(o,s,n)){let a=i.data[wi()];if(gM(a,r)&&!fM(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=n_(c,n||"")),H_(i,a,o,n,r)}else EH(i,a,o,o[Be],o[s+1],o[s+1]=vH(t,e,n),r,s)}}function fM(t,e){return e>=t.expandoStartIndex}function pM(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[wi()],o=fM(t,n);gM(s,r)&&e===null&&!o&&(e=!1),e=mH(i,s,e,r),oH(i,s,e,n,o,r)}}function mH(t,e,n,r){let i=Dv(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Yy(null,t,e,n,r),n=Zc(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Yy(i,t,e,n,r),s===null){let c=gH(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Yy(null,t,e,c[1],r),c=Zc(c,e.attrs,r),yH(t,e,r,c))}else s=_H(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function gH(t,e,n){let r=n?e.classBindings:e.styleBindings;if(oa(r)!==0)return t[As(r)]}function yH(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[As(i)]=r}function _H(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Zc(r,o,n)}return Zc(r,e.attrs,n)}function Yy(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Zc(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Zc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),uv(t,o,n?!0:e[++s]))}return t===void 0?null:t}function vH(t,e,n){if(n==null||n==="")return kt;let r=[],i=Ms(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function wH(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&uv(t,r,n)}function EH(t,e,n,r,i,s,o,a){i===Vr&&(i=kt);let c=0,l=0,u=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let h=c<i.length?i[c+1]:void 0,f=l<s.length?s[l+1]:void 0,m=null,g;u===d?(c+=2,l+=2,h!==f&&(m=d,g=f)):d===null||u!==null&&u<d?(c+=2,m=u):(l+=2,m=d,g=f),m!==null&&mM(t,e,n,r,m,g,o,a),u=c<i.length?i[c]:null,d=l<s.length?s[l]:null}}function mM(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=sH(l)?FS(c,e,n,i,oa(l),o):void 0;if(!of(u)){of(s)||rH(l)&&(s=FS(c,null,n,i,a,o));let d=SA(wi(),n);m2(r,o,d,i,s)}}function FS(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[i+1];h===Vr&&(h=d?kt:void 0);let f=d?By(h,r):u===r?h:void 0;if(l&&!of(f)&&(f=By(c,r)),of(f)&&(a=f,o))return a;let m=t[i+1];i=o?As(m):oa(m)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=By(c,r))}return a}function of(t){return t!==void 0}function IH(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ft(Ms(t)))),t}function gM(t,e){return(t.flags&(e?8:16))!==0}var z_=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,n){this.attach(n,this.detach(e))}};function Zy(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function bH(t,e,n){let r,i,s=0,o=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;s<=o&&s<=a;){let c=t.at(s),l=e[s],u=Zy(s,c,s,l,n);if(u!==0){u<0&&t.updateValue(s,l),s++;continue}let d=t.at(o),h=e[a],f=Zy(o,d,a,h,n);if(f!==0){f<0&&t.updateValue(o,h),o--,a--;continue}let m=n(s,c),g=n(o,d),v=n(s,l);if(Object.is(v,g)){let E=n(a,h);Object.is(E,m)?(t.swap(s,o),t.updateValue(o,h),a--,o--):t.move(o,s),t.updateValue(s,l),s++;continue}if(r??=new af,i??=VS(t,s,o,n),q_(t,r,s,v))t.updateValue(s,l),s++,o++;else if(i.has(v))r.set(m,t.detach(s)),o--;else{let E=t.create(s,e[s]);t.attach(s,E),s++,o++}}for(;s<=a;)LS(t,r,n,s,e[s]),s++}else if(e!=null){let a=e[Symbol.iterator](),c=a.next();for(;!c.done&&s<=o;){let l=t.at(s),u=c.value,d=Zy(s,l,s,u,n);if(d!==0)d<0&&t.updateValue(s,u),s++,c=a.next();else{r??=new af,i??=VS(t,s,o,n);let h=n(s,u);if(q_(t,r,s,h))t.updateValue(s,u),s++,o++,c=a.next();else if(!i.has(h))t.attach(s,t.create(s,u)),s++,o++,c=a.next();else{let f=n(s,l);r.set(f,t.detach(s)),o--}}}for(;!c.done;)LS(t,r,n,t.length,c.value),c=a.next()}for(;s<=o;)t.destroy(t.detach(o--));r?.forEach(a=>{t.destroy(a)})}function q_(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function LS(t,e,n,r,i){if(q_(t,e,r,n(r,i)))t.updateValue(r,i);else{let s=t.create(r,i);t.attach(r,s)}}function VS(t,e,n,r){let i=new Set;for(let s=e;s<=n;s++)i.add(r(s,t.at(s)));return i}var af=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Xv(t,e,n){Ii("NgControlFlow");let r=re(),i=vi(),s=Q_(r,Ct+t),o=0;if(Un(r,i,e)){let a=me(null);try{if(GR(s,o),e!==-1){let c=Y_(r[ne],Ct+e),l=Qc(s,c.tView.ssrId),u=Af(r,c,n,{dehydratedView:l});Rf(s,u,o,Kc(c,l))}}finally{me(a)}}else{let a=qR(s,o);a!==void 0&&(a[bt]=n)}}var G_=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Dt}};function pse(t){return t}function mse(t,e){return e}var W_=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function gse(t,e,n,r,i,s,o,a,c,l,u,d,h){Ii("NgControlFlow");let f=c!==void 0,m=re(),g=a?o.bind(m[pn][bt]):o,v=new W_(f,g);m[Ct+t]=v,Xt(t+1,e,n,r,i,s),f&&Xt(t+2,c,l,u,d,h)}var K_=class extends z_{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Dt}at(e){return this.getLView(e)[bt].$implicit}attach(e,n){let r=n[ea];this.needsIndexUpdate||=e!==this.length,Rf(this.lContainer,n,e,Kc(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,DH(this.lContainer,e)}create(e,n){let r=Qc(this.lContainer,this.templateTNode.tView.ssrId);return Af(this.hostLView,this.templateTNode,new G_(this.lContainer,n,e),{dehydratedView:r})}destroy(e){If(e[ne],e)}updateValue(e,n){this.getLView(e)[bt].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[bt].$index=e}getLView(e){return CH(this.lContainer,e)}};function yse(t){let e=me(null),n=wi();try{let r=re(),i=r[ne],s=r[n];if(s.liveCollection===void 0){let a=n+1,c=Q_(r,a),l=Y_(i,a);s.liveCollection=new K_(c,r,l)}else s.liveCollection.reset();let o=s.liveCollection;if(bH(o,t,s.trackByFn),o.updateIndexes(),s.hasEmptyBlock){let a=vi(),c=o.length===0;if(Un(r,a,c)){let l=n+2,u=Q_(r,l);if(c){let d=Y_(i,l),h=Qc(u,d.tView.ssrId),f=Af(r,d,void 0,{dehydratedView:h});Rf(u,f,0,Kc(d,h))}else GR(u,0)}}}finally{me(e)}}function Q_(t,e){return t[e]}function DH(t,e){return Wc(t,e)}function CH(t,e){return qR(t,e)}function Y_(t,e){return yv(t,e)}function TH(t,e,n,r,i,s){let o=e.consts,a=ra(o,i),c=la(e,t,2,r,a);return $v(e,n,c,ra(o,s)),c.attrs!==null&&tf(c,c.attrs,!1),c.mergedAttrs!==null&&tf(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Vt(t,e,n,r){let i=re(),s=Ue(),o=Ct+t,a=i[Be],c=s.firstCreatePass?TH(o,s,i,e,n,r):s.data[o],l=SH(s,i,c,a,e,t);i[o]=l;let u=mf(c);return Rs(c,!0),MR(a,l,c),!W$(c)&&yf()&&bf(s,i,l,c),kB()===0&&gi(l,i),FB(),u&&(jv(s,i,c),Vv(s,c,i)),r!==null&&Bv(i,c),Vt}function Tt(){let t=gt();Iv()?bv():(t=t.parent,Rs(t,!1));let e=t;VB(e)&&jB(),LB();let n=Ue();return n.firstCreatePass&&(vf(n,t),gv(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&JB(e)&&H_(n,e,re(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&eU(e)&&H_(n,e,re(),e.stylesWithoutHost,!1),Tt}function bi(t,e,n,r){return Vt(t,e,n,r),Tt(),bi}var SH=(t,e,n,r,i,s)=>(_f(!0),ER(r,i,QB()));function AH(t,e,n,r,i){let s=e.consts,o=ra(s,r),a=la(e,t,8,"ng-container",o);o!==null&&tf(a,o,!0);let c=ra(s,i);return $v(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function yM(t,e,n){let r=re(),i=Ue(),s=t+Ct,o=i.firstCreatePass?AH(s,i,r,e,n):i.data[s];Rs(o,!0);let a=RH(i,r,o,t);return r[s]=a,yf()&&bf(i,r,a,o),gi(a,r),mf(o)&&(jv(i,r,o),Vv(i,o,r)),n!=null&&Bv(r,o),yM}function _M(){let t=gt(),e=Ue();return Iv()?bv():(t=t.parent,Rs(t,!1)),e.firstCreatePass&&(vf(e,t),gv(t)&&e.queries.elementEnd(t)),_M}function Jv(t,e,n){return yM(t,e,n),_M(),Jv}var RH=(t,e,n,r)=>(_f(!0),JU(e[Be],""));function ew(){return re()}function Pf(t,e,n){let r=re(),i=vi();if(Un(r,i,e)){let s=Ue(),o=nl();Tf(s,o,r,t,e,r[Be],n,!0)}return Pf}function MH(t,e,n){let r=re(),i=vi();if(Un(r,i,e)){let s=Ue(),o=nl(),a=Dv(s.data),c=HR(a,o,r);Tf(s,o,r,t,e,c,n,!0)}return MH}var ys=void 0;function xH(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var NH=["en",[["a","p"],["AM","PM"],ys],[["AM","PM"],ys,ys],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ys,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ys,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ys,"{1} 'at' {0}",ys],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",xH],Xy={};function tw(t){let e=PH(t),n=jS(e);if(n)return n;let r=e.split("-")[0];if(n=jS(r),n)return n;if(r==="en")return NH;throw new T(701,!1)}function jS(t){return t in Xy||(Xy[t]=tt.ng&&tt.ng.common&&tt.ng.common.locales&&tt.ng.common.locales[t]),Xy[t]}var ua=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(ua||{});function PH(t){return t.toLowerCase().replace(/_/g,"-")}var cf="en-US";var OH=cf;function kH(t){typeof t=="string"&&(OH=t.toLowerCase().replace(/_/g,"-"))}function ct(t,e,n,r){let i=re(),s=Ue(),o=gt();return nw(s,i,i[Be],o,t,e,r),ct}function FH(t,e){let n=gt(),r=re(),i=Ue(),s=Dv(i.data),o=HR(s,n,r);return nw(i,r,o,n,t,e),FH}function LH(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Hc],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function nw(t,e,n,r,i,s,o){let a=mf(r),l=t.firstCreatePass&&$R(t),u=e[bt],d=UR(e),h=!0;if(r.type&3||o){let g=yn(r,e),v=o?o(g):g,E=d.length,R=o?F=>o(ir(F[r.index])):r.index,M=null;if(!o&&a&&(M=LH(t,e,i,r.index)),M!==null){let F=M.__ngLastListenerFn__||M;F.__ngNextListenerFn__=s,M.__ngLastListenerFn__=s,h=!1}else{s=US(r,e,u,s,!1);let F=n.listen(v,i,s);d.push(s,F),l&&l.push(i,R,E,E+1)}}else s=US(r,e,u,s,!1);let f=r.outputs,m;if(h&&f!==null&&(m=f[i])){let g=m.length;if(g)for(let v=0;v<g;v+=2){let E=m[v],R=m[v+1],ee=e[E][R].subscribe(s),j=d.length;d.push(s,ee),l&&l.push(i,r.index,j,-(j+1))}}}function BS(t,e,n,r){let i=me(null);try{return tr(6,e,n),n(r)!==!1}catch(s){return zR(t,s),!1}finally{tr(7,e,n),me(i)}}function US(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?_i(t.index,e):e;qv(a);let c=BS(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)c=BS(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function da(t=1){return WB(t)}function VH(t,e){let n=null,r=eB(t);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){n=i;continue}if(r===null?aA(t,s,!0):rB(r,s))return i}return n}function vM(t){let e=re()[pn][Jt];if(!e.projection){let n=t?t.length:1,r=e.projection=qj(n,null),i=r.slice(),s=e.child;for(;s!==null;){let o=t?VH(s,t):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function wM(t,e=0,n){let r=re(),i=Ue(),s=la(i,Ct+t,16,null,n||null);s.projection===null&&(s.projection=e),bv(),(!r[ea]||NA())&&(s.flags&32)!==32&&f2(i,r,s)}function jH(t,e,n,r){M$(t,e,n,r)}function Of(t,e,n){rM(t,e,n)}function ll(t){let e=re(),n=Ue(),r=Cv();gf(r+1);let i=Kv(n,r);if(t.dirty&&MB(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=sM(e,r);t.reset(s,nR),t.notifyOnChanges()}return!0}return!1}function ul(){return Wv(re(),Cv())}function _se(t,e,n,r){L$(t,rM(e,n,r))}function vse(t=1){gf(Cv()+t)}function BH(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function wse(t){let e=UB();return AA(e,Ct+t)}function ha(t,e=""){let n=re(),r=Ue(),i=t+Ct,s=r.firstCreatePass?la(r,i,1,e,null):r.data[i],o=UH(r,n,s,e,t);n[i]=o,yf()&&bf(r,n,o,s),Rs(s,!1)}var UH=(t,e,n,r,i)=>(_f(!0),ZU(e[Be],r));function $H(t){return Ns("",t,""),$H}function Ns(t,e,n){let r=re(),i=nH(r,t,e,n);return i!==Vr&&$2(r,wi(),i),Ns}function HH(t,e,n){oM(e)&&(e=e());let r=re(),i=vi();if(Un(r,i,e)){let s=Ue(),o=nl();Tf(s,o,r,t,e,r[Be],n,!1)}return HH}function Ese(t,e){let n=oM(t);return n&&t.set(e),n}function zH(t,e){let n=re(),r=Ue(),i=gt();return nw(r,n,n[Be],i,t,e),zH}function qH(t,e,n){let r=Ue();if(r.firstCreatePass){let i=Or(t);Z_(n,r.data,r.blueprint,i,!0),Z_(e,r.data,r.blueprint,i,!1)}}function Z_(t,e,n,r,i){if(t=Ot(t),Array.isArray(t))for(let s=0;s<t.length;s++)Z_(t[s],e,n,r,i);else{let s=Ue(),o=re(),a=gt(),c=Jo(t)?t:Ot(t.provide),l=_A(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Jo(t)||!t.multi){let f=new Ds(l,i,S),m=e_(c,e,i?u:u+h,d);m===-1?(p_(Qh(a,o),s,c),Jy(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[m]=f,o[m]=f)}else{let f=e_(c,e,u+h,d),m=e_(c,e,u,u+h),g=f>=0&&n[f],v=m>=0&&n[m];if(i&&!v||!i&&!g){p_(Qh(a,o),s,c);let E=KH(i?WH:GH,n.length,i,r,l);!i&&v&&(n[m].providerFactory=E),Jy(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(E),o.push(E)}else{let E=EM(n[i?m:f],l,!i&&r);Jy(s,t,f>-1?f:m,E)}!i&&r&&v&&n[m].componentProviders++}}}function Jy(t,e,n,r){let i=Jo(e),s=pB(e);if(i||s){let c=(s?Ot(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function EM(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function e_(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function GH(t,e,n,r){return X_(this.multi,[])}function WH(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Cs(n,n[ne],this.providerFactory.index,r);s=a.slice(0,o),X_(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],X_(i,s);return s}function X_(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function KH(t,e,n,r,i){let s=new Ds(t,n,S);return s.multi=[],s.index=e,s.componentProviders=0,EM(s,i,r&&!n),s}function Wt(t,e=[]){return n=>{n.providersResolver=(r,i)=>qH(r,i?i(t):t,e)}}var QH=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=mA(!1,r.type),s=i.length>0?Nf([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=C({token:e,providedIn:"environment",factory:()=>new e(y(qt))});let t=e;return t})();function dr(t){Ii("NgStandalone"),t.getStandaloneInjector=e=>e.get(QH).getOrCreateStandaloneInjector(t)}function IM(t,e,n,r){return bM(re(),OA(),t,e,n,r)}function YH(t,e){let n=t[e];return n===Vr?void 0:n}function bM(t,e,n,r,i,s){let o=e+n;return Un(t,o,i)?G$(t,o+1,s?r.call(s,i):r(i)):YH(t,o+1)}function Ise(t,e){let n=Ue(),r,i=t+Ct;n.firstCreatePass?(r=ZH(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=ws(r.type,!0)),o,a=zt(S);try{let c=Kh(!1),l=s();return Kh(c),BH(n,re(),i,l),l}finally{zt(a)}}function ZH(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function bse(t,e,n){let r=t+Ct,i=re(),s=AA(i,r);return XH(i,r)?bM(i,OA(),e,s.transform,n,s):s.transform(n)}function XH(t,e){return t[ne].data[e].pure}function Dse(t,e){return Mf(t,e)}var or=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},DM=new or("17.3.7"),fa=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var rw=new x(""),dl=new x(""),kf=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,iw||(JH(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{L.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r()},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(y(L),y(Ff),y(dl))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),Ff=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return iw?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function JH(t){iw=t}var iw;function Ps(t){return!!t&&typeof t.then=="function"}function CM(t){return!!t&&typeof t.subscribe=="function"}var Lf=new x(""),TM=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=b(Lf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Ps(o))r.push(o);else if(CM(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Vf=new x("");function ez(){vT(()=>{throw new T(600,!1)})}function tz(t){return t.isBoundToModule}function nz(t,e,n){try{let r=n();return Ps(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Di=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=b(tR),this.afterRenderEffectManager=b(Gv),this.externalTestViews=new Set,this.beforeRender=new H,this.afterTick=new H,this.componentTypes=[],this.components=[],this.isStable=b(cl).hasPendingTasks.pipe(oe(r=>!r)),this._injector=b(qt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof ef;if(!this._injector.get(TM).done){let f=!s&&dA(r),m=!1;throw new T(405,m)}let a;s?a=r:a=this._injector.get(Ei).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=tz(a)?void 0:this._injector.get(yi),l=i||a.selector,u=a.create(Ne.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get(rw,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),t_(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new T(101,!1);let i=me(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,me(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===KR)throw new T(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)rz(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>J_(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>J_(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;t_(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Vf,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>t_(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new T(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function t_(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function rz(t,e,n){!e&&!J_(t)||iz(t,n,e)}function J_(t){return vv(t)}function iz(t,e,n){let r;n?(r=0,t[K]|=1024):t[K]&64?r=0:r=1,QR(t,e,r)}var ev=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},jf=(()=>{let e=class e{compileModuleSync(r){return new j_(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=hA(r),o=wR(s.declarations).reduce((a,c)=>{let l=mi(c);return l&&a.push(new sa(l)),a},[]);return new ev(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var sz=(()=>{let e=class e{constructor(){this.zone=b(L),this.applicationRef=b(Di)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function oz(t){return[{provide:L,useFactory:t},{provide:Xo,multi:!0,useFactory:()=>{let e=b(sz,{optional:!0});return()=>e.initialize()}},{provide:Xo,multi:!0,useFactory:()=>{let e=b(uz);return()=>{e.initialize()}}},{provide:tR,useFactory:az}]}function az(){let t=b(L),e=b(mn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function cz(t){let e=oz(()=>new L(lz(t)));return df([[],e])}function lz(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var uz=(()=>{let e=class e{constructor(){this.subscription=new Ae,this.initialized=!1,this.zone=b(L),this.pendingTasks=b(cl)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{L.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{L.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function dz(){return typeof $localize<"u"&&$localize.locale||cf}var pa=new x("",{providedIn:"root",factory:()=>b(pa,fe.Optional|fe.SkipSelf)||dz()});var SM=new x("");var Bh=null;function hz(t=[],e){return Ne.create({name:e,providers:[{provide:hf,useValue:"platform"},{provide:SM,useValue:new Set([()=>Bh=null])},...t]})}function fz(t=[]){if(Bh)return Bh;let e=hz(t);return Bh=e,ez(),pz(e),e}function pz(t){t.get(xv,null)?.forEach(n=>n())}function Cse(){return!1}var wn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=mz;let t=e;return t})();function mz(t){return gz(gt(),re(),(t&16)===16)}function gz(t,e,n){if(pf(t)&&!n){let r=_i(t.index,e);return new Ts(r,r)}else if(t.type&47){let r=e[pn];return new Ts(r,e)}return null}var tv=class{constructor(){}supports(e){return e instanceof Map||cM(e)}create(){return new nv}},nv=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||cM(e)))throw new T(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new rv(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},rv=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function $S(){return new sw([new tv])}var sw=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||$S()),deps:[[e,new cv,new mt]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i)return i;throw new T(901,!1)}};e.\u0275prov=C({token:e,providedIn:"root",factory:$S});let t=e;return t})();var AM=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(y(Di))},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({});let t=e;return t})();function RM(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=fz(r),s=[cz(),...n||[]],a=new sf({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(L);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(mn,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:f=>{l.handleError(f)}})});let d=()=>a.destroy(),h=i.get(SM);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),nz(l,c,()=>{let f=a.get(TM);return f.runInitializers(),f.donePromise.then(()=>{let m=a.get(pa,cf);kH(m||cf);let g=a.get(Di);return e!==void 0&&g.bootstrap(e),g})})})}catch(e){return Promise.reject(e)}}function En(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var yz=new x("",{providedIn:"root",factory:()=>b(_z)}),_z=(()=>{let e=class e{};e.\u0275prov=C({token:e,providedIn:"root",factory:()=>new iv});let t=e;return t})(),iv=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=b(cl),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){let n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},sv=class{constructor(e,n,r,i,s,o){this.scheduler=e,this.effectFn=n,this.creationZone=r,this.injector=s,this.watcher=IT(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(mn,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function vz(t,e){Ii("NgSignals"),!e?.injector&&wA(vz);let n=e?.injector??b(Ne),r=e?.manualCleanup!==!0?n.get(rl):null,i=new sv(n.get(yz),t,typeof Zone>"u"?null:Zone.current,r,n,e?.allowSignalWrites??!1),s=n.get(wn,null,{optional:!0});return!s||!(s._lView[K]&8)?i.watcher.notify():(s._lView[kh]??=[]).push(i.watcher.notify),i}function MM(t){let e=mi(t);if(!e)return null;let n=new sa(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var FM=null;function hr(){return FM}function LM(t){FM??=t}var Bf=class{};var Y=new x(""),hw=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>b(Ez),providedIn:"platform"});let t=e;return t})(),VM=new x(""),Ez=(()=>{let e=class e extends hw{constructor(){super(),this._doc=b(Y),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return hr().getBaseHref(this._doc)}onPopState(r){let i=hr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=hr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function fw(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function xM(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Ur(t){return t&&t[0]!=="?"?"?"+t:t}var Hr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>b(pw),providedIn:"root"});let t=e;return t})(),jM=new x(""),pw=(()=>{let e=class e extends Hr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??b(Y).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return fw(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Ur(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Ur(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Ur(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(y(hw),y(jM,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),BM=(()=>{let e=class e extends Hr{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=fw(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Ur(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Ur(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(y(hw),y(jM,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),fr=(()=>{let e=class e{constructor(r){this._subject=new Ce,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=Dz(xM(NM(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Ur(i))}normalize(r){return e.stripTrailingSlash(bz(this._basePath,NM(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ur(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ur(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Ur,e.joinWithSlash=fw,e.stripTrailingSlash=xM,e.\u0275fac=function(i){return new(i||e)(y(Hr))},e.\u0275prov=C({token:e,factory:()=>Iz(),providedIn:"root"});let t=e;return t})();function Iz(){return new fr(y(Hr))}function bz(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function NM(t){return t.replace(/\/index.html$/,"")}function Dz(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var UM=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(UM||{});var $r={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function hl(t,e){let n=tw(t),r=n[ua.NumberSymbols][e];if(typeof r>"u"){if(e===$r.CurrencyDecimal)return n[ua.NumberSymbols][$r.Decimal];if(e===$r.CurrencyGroup)return n[ua.NumberSymbols][$r.Group]}return r}function Cz(t,e){return tw(t)[ua.NumberFormats][e]}var Tz=/^(\d+)?\.((\d+)(-(\d+))?)?$/,PM=22,Uf=".",fl="0",Sz=";",Az=",",ow="#";function Rz(t,e,n,r,i,s,o=!1){let a="",c=!1;if(!isFinite(t))a=hl(n,$r.Infinity);else{let l=Pz(t);o&&(l=Nz(l));let u=e.minInt,d=e.minFrac,h=e.maxFrac;if(s){let R=s.match(Tz);if(R===null)throw new Error(`${s} is not a valid digit info`);let M=R[1],F=R[3],ee=R[5];M!=null&&(u=aw(M)),F!=null&&(d=aw(F)),ee!=null?h=aw(ee):F!=null&&d>h&&(h=d)}Oz(l,d,h);let f=l.digits,m=l.integerLen,g=l.exponent,v=[];for(c=f.every(R=>!R);m<u;m++)f.unshift(0);for(;m<0;m++)f.unshift(0);m>0?v=f.splice(m,f.length):(v=f,f=[0]);let E=[];for(f.length>=e.lgSize&&E.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)E.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&E.unshift(f.join("")),a=E.join(hl(n,r)),v.length&&(a+=hl(n,i)+v.join("")),g&&(a+=hl(n,$r.Exponential)+"+"+g)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function Mz(t,e,n){let r=Cz(e,UM.Decimal),i=xz(r,hl(e,$r.MinusSign));return Rz(t,i,e,$r.Group,$r.Decimal,n)}function xz(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(Sz),i=r[0],s=r[1],o=i.indexOf(Uf)!==-1?i.split(Uf):[i.substring(0,i.lastIndexOf(fl)+1),i.substring(i.lastIndexOf(fl)+1)],a=o[0],c=o[1]||"";n.posPre=a.substring(0,a.indexOf(ow));for(let u=0;u<c.length;u++){let d=c.charAt(u);d===fl?n.minFrac=n.maxFrac=u+1:d===ow?n.maxFrac=u+1:n.posSuf+=d}let l=a.split(Az);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let u=i.length-n.posPre.length-n.posSuf.length,d=s.indexOf(ow);n.negPre=s.substring(0,d).replace(/'/g,""),n.negSuf=s.slice(d+u).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function Nz(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function Pz(t){let e=Math.abs(t)+"",n=0,r,i,s,o,a;for((i=e.indexOf(Uf))>-1&&(e=e.replace(Uf,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===fl;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===fl;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>PM&&(r=r.splice(0,PM-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function Oz(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,s=Math.min(Math.max(e,i),n),o=s+t.integerLen,a=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let d=o;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let d=1;d<o;d++)r[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,l=e+t.integerLen,u=r.reduceRight(function(d,h,f,m){return h=h+d,m[f]=h<10?h:h-10,c&&(m[f]===0&&f>=l?m.pop():c=!1),h>=10?1:0},0);u&&(r.unshift(u),t.integerLen++)}function aw(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function $M(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var cw=/\s+/,OM=[],Gse=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=OM,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(cw):OM}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(cw):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(cw).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(Bn))},e.\u0275dir=ye({type:e,selectors:[["","ngClass",""]],inputs:{klass:[pe.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var HM=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new lw,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){kM("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){kM("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(S(vn),S(Vn))},e.\u0275dir=ye({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),lw=class{constructor(){this.$implicit=null,this.ngIf=null}};function kM(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Ft(e)}'.`)}var Wse=(()=>{let e=class e{constructor(r,i,s){this._ngEl=r,this._differs=i,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){let r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,i){let[s,o]=r.split("."),a=s.indexOf("-")===-1?void 0:sr.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${i}${o}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(r){r.forEachRemovedItem(i=>this._setStyle(i.key,null)),r.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),r.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(sw),S(Bn))},e.\u0275dir=ye({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let t=e;return t})(),zM=(()=>{let e=class e{constructor(r){this._viewContainerRef=r,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(r){if(this._shouldRecreateView(r)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let s=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(r){return!!r.ngTemplateOutlet||!!r.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(r,i,s)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,s):!1,get:(r,i,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,s)}})}};e.\u0275fac=function(i){return new(i||e)(S(vn))},e.\u0275dir=ye({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Lt]});let t=e;return t})();function kz(t,e){return new T(2100,!1)}var Kse=(()=>{let e=class e{constructor(r){this._locale=r}transform(r,i,s){if(!Fz(r))return null;s||=this._locale;try{let o=Lz(r);return Mz(o,s,i)}catch(o){throw kz(e,o.message)}}};e.\u0275fac=function(i){return new(i||e)(S(pa,16))},e.\u0275pipe=cA({name:"number",type:e,pure:!0,standalone:!0});let t=e;return t})();function Fz(t){return!(t==null||t===""||t!==t)}function Lz(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var Os=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({});let t=e;return t})(),mw="browser",Vz="server";function gw(t){return t===mw}function yw(t){return t===Vz}var qM=(()=>{let e=class e{};e.\u0275prov=C({token:e,providedIn:"root",factory:()=>gw(b(_n))?new uw(b(Y),window):new dw});let t=e;return t})(),uw=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=jz(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function jz(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var dw=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},$f=class{};var ww=class extends Bf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ew=class t extends ww{static makeCurrent(){LM(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Bz();return n==null?null:Uz(n)}resetBaseElement(){pl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return $M(document.cookie,e)}},pl=null;function Bz(){return pl=pl||document.querySelector("base"),pl?pl.getAttribute("href"):null}function Uz(t){return new URL(t,document.baseURI).pathname}var Iw=class{addToWindow(e){tt.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new T(5103,!1);return s},tt.getAllAngularTestabilities=()=>e.getAllTestabilities(),tt.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=tt.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};tt.frameworkStabilizers||(tt.frameworkStabilizers=[]),tt.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?hr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},$z=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),zf=new x(""),KM=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new T(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(y(zf),y(L))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),ml=class{constructor(e){this._doc=e}},_w="ng-app-id",QM=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=yw(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${_w}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(_w),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(_w,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(y(Y),y(il),y(sl,8),y(_n))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),vw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Cw=/%COMP%/g,YM="%COMP%",Hz=`_nghost-${YM}`,zz=`_ngcontent-${YM}`,qz=!0,Gz=new x("",{providedIn:"root",factory:()=>qz});function Wz(t){return zz.replace(Cw,t)}function Kz(t){return Hz.replace(Cw,t)}function ZM(t,e){return e.map(n=>n.replace(Cw,t))}var qf=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=yw(c),this.defaultRenderer=new gl(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===rr.ShadowDom&&(i=he(I({},i),{encapsulation:rr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Gf?s.applyToHost(r):s instanceof yl&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case rr.Emulated:o=new Gf(l,u,i,this.appId,d,a,c,h);break;case rr.ShadowDom:return new bw(l,u,r,i,a,c,this.nonce,h);default:o=new yl(l,u,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(y(KM),y(QM),y(il),y(Gz),y(Y),y(_n),y(L),y(sl))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),gl=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(vw[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(GM(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(GM(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new T(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=vw[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=vw[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(sr.DashCase|sr.Important)?e.style.setProperty(n,r,i&sr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&sr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=hr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function GM(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var bw=class extends gl{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=ZM(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},yl=class extends gl{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?ZM(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Gf=class extends yl{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=Wz(l),this.hostAttr=Kz(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},Qz=(()=>{let e=class e extends ml{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(y(Y))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),WM=["alt","control","meta","shift"],Yz={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zz={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Xz=(()=>{let e=class e extends ml{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>hr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),WM.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=Yz[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),WM.forEach(a=>{if(a!==s){let c=Zz[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(y(Y))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function poe(t,e){return RM(I({rootComponent:t},Jz(e)))}function Jz(t){return{appProviders:[...XM,...t?.providers??[]],platformProviders:rq}}function eq(){Ew.makeCurrent()}function tq(){return new mn}function nq(){return cR(document),document}var rq=[{provide:_n,useValue:mw},{provide:xv,useValue:eq,multi:!0},{provide:Y,useFactory:nq,deps:[]}];var iq=new x(""),sq=[{provide:dl,useClass:Iw,deps:[]},{provide:rw,useClass:kf,deps:[L,Ff,dl]},{provide:kf,useClass:kf,deps:[L,Ff,dl]}],XM=[{provide:hf,useValue:"root"},{provide:mn,useFactory:tq,deps:[]},{provide:zf,useClass:Qz,multi:!0,deps:[Y,L,_n]},{provide:zf,useClass:Xz,multi:!0,deps:[Y]},qf,QM,KM,{provide:Ss,useExisting:qf},{provide:$f,useClass:$z,deps:[]},[]],JM=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:il,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(y(iq,12))},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({providers:[...XM,...sq],imports:[Os,AM]});let t=e;return t})();var ex=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(y(Y))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var oq={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},Dw=new x("HammerGestureConfig"),tx=new x("HammerLoader"),aq=(()=>{let e=class e{constructor(){this.events=[],this.overrides={}}buildHammer(r){let i=new Hammer(r,this.options);i.get("pinch").set({enable:!0}),i.get("rotate").set({enable:!0});for(let s in this.overrides)i.get(s).set(this.overrides[s]);return i}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),cq=(()=>{let e=class e extends ml{constructor(r,i,s,o){super(r),this._config=i,this.console=s,this.loader=o,this._loaderPromise=null}supports(r){return!(!oq.hasOwnProperty(r.toLowerCase())&&!this.isCustomEvent(r)||!window.Hammer&&!this.loader)}addEventListener(r,i,s){let o=this.manager.getZone();if(i=i.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||o.runOutsideAngular(()=>this.loader());let a=!1,c=()=>{a=!0};return o.runOutsideAngular(()=>this._loaderPromise.then(()=>{if(!window.Hammer){c=()=>{};return}a||(c=this.addEventListener(r,i,s))}).catch(()=>{c=()=>{}})),()=>{c()}}return o.runOutsideAngular(()=>{let a=this._config.buildHammer(r),c=function(l){o.runGuarded(function(){s(l)})};return a.on(i,c),()=>{a.off(i,c),typeof a.destroy=="function"&&a.destroy()}})}isCustomEvent(r){return this._config.events.indexOf(r)>-1}};e.\u0275fac=function(i){return new(i||e)(y(Y),y(Dw),y(fa),y(tx,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),moe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({providers:[{provide:zf,useClass:cq,multi:!0,deps:[Y,Dw,fa,[new mt,tx]]},{provide:Dw,useClass:aq,deps:[]}]});let t=e;return t})();var ue="primary",Pl=Symbol("RouteTitle"),Mw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function va(t){return new Mw(t)}function uq(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function dq(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!pr(t[n],e[n]))return!1;return!0}function pr(t,e){let n=t?xw(t):void 0,r=e?xw(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!ux(t[i],e[i]))return!1;return!0}function xw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function ux(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function dx(t){return t.length>0?t[t.length-1]:null}function Ri(t){return wh(t)?t:Ps(t)?Oe(Promise.resolve(t)):z(t)}var hq={exact:fx,subset:px},hx={exact:fq,subset:pq,ignored:()=>!0};function nx(t,e,n){return hq[n.paths](t.root,e.root,n.matrixParams)&&hx[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function fq(t,e){return pr(t,e)}function fx(t,e,n){if(!Fs(t.segments,e.segments)||!Qf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!fx(t.children[r],e.children[r],n))return!1;return!0}function pq(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>ux(t[n],e[n]))}function px(t,e,n){return mx(t,e,e.segments,n)}function mx(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Fs(i,n)||e.hasChildren()||!Qf(i,n,r))}else if(t.segments.length===n.length){if(!Fs(t.segments,n)||!Qf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!px(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Fs(t.segments,i)||!Qf(t.segments,i,r)||!t.children[ue]?!1:mx(t.children[ue],e,s,r)}}function Qf(t,e,n){return e.every((r,i)=>hx[n](t[i].parameters,r.parameters))}var Ci=class{constructor(e=new De([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=va(this.queryParams),this._queryParamMap}toString(){return yq.serialize(this)}},De=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yf(this)}},ks=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=va(this.parameters),this._parameterMap}toString(){return yx(this)}};function mq(t,e){return Fs(t,e)&&t.every((n,r)=>pr(n.parameters,e[r].parameters))}function Fs(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function gq(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ue&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ue&&(n=n.concat(e(i,r)))}),n}var Ol=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>new Dl,providedIn:"root"});let t=e;return t})(),Dl=class{parse(e){let n=new Pw(e);return new Ci(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${_l(e.root,!0)}`,r=wq(e.queryParams),i=typeof e.fragment=="string"?`#${_q(e.fragment)}`:"";return`${n}${r}${i}`}},yq=new Dl;function Yf(t){return t.segments.map(e=>yx(e)).join("/")}function _l(t,e){if(!t.hasChildren())return Yf(t);if(e){let n=t.children[ue]?_l(t.children[ue],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ue&&r.push(`${i}:${_l(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=gq(t,(r,i)=>i===ue?[_l(t.children[ue],!1)]:[`${i}:${_l(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ue]!=null?`${Yf(t)}/${n[0]}`:`${Yf(t)}/(${n.join("//")})`}}function gx(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wf(t){return gx(t).replace(/%3B/gi,";")}function _q(t){return encodeURI(t)}function Nw(t){return gx(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zf(t){return decodeURIComponent(t)}function rx(t){return Zf(t.replace(/\+/g,"%20"))}function yx(t){return`${Nw(t.path)}${vq(t.parameters)}`}function vq(t){return Object.entries(t).map(([e,n])=>`;${Nw(e)}=${Nw(n)}`).join("")}function wq(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Wf(n)}=${Wf(i)}`).join("&"):`${Wf(n)}=${Wf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Eq=/^[^\/()?;#]+/;function Tw(t){let e=t.match(Eq);return e?e[0]:""}var Iq=/^[^\/()?;=#]+/;function bq(t){let e=t.match(Iq);return e?e[0]:""}var Dq=/^[^=?&#]+/;function Cq(t){let e=t.match(Dq);return e?e[0]:""}var Tq=/^[^&#]+/;function Sq(t){let e=t.match(Tq);return e?e[0]:""}var Pw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ue]=new De(e,n)),r}parseSegment(){let e=Tw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new T(4009,!1);return this.capture(e),new ks(Zf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=bq(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Tw(this.remaining);i&&(r=i,this.capture(r))}e[Zf(n)]=Zf(r)}parseQueryParam(e){let n=Cq(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Sq(this.remaining);o&&(r=o,this.capture(r))}let i=rx(n),s=rx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Tw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new T(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ue);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ue]:new De([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new T(4011,!1)}};function _x(t){return t.segments.length>0?new De([],{[ue]:t}):t}function vx(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=vx(i);if(r===ue&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new De(t.segments,e);return Aq(n)}function Aq(t){if(t.numberOfChildren===1&&t.children[ue]){let e=t.children[ue];return new De(t.segments.concat(e.segments),e.children)}return t}function wa(t){return t instanceof Ci}function Rq(t,e,n=null,r=null){let i=wx(t);return Ex(i,e,n,r)}function wx(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new De(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=_x(r);return e??i}function Ex(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Sw(i,i,i,n,r);let s=Mq(e);if(s.toRoot())return Sw(i,i,new De([],{}),n,r);let o=xq(s,i,t),a=o.processChildren?El(o.segmentGroup,o.index,s.commands):bx(o.segmentGroup,o.index,s.commands);return Sw(i,o.segmentGroup,a,n,r)}function Xf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Cl(t){return typeof t=="object"&&t!=null&&t.outlets}function Sw(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;t===e?o=n:o=Ix(t,e,n);let a=_x(vx(o));return new Ci(a,s,i)}function Ix(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=Ix(s,e,n)}),new De(t.segments,r)}var Jf=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Xf(r[0]))throw new T(4003,!1);let i=r.find(Cl);if(i&&i!==dx(r))throw new T(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Mq(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Jf(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Jf(n,e,r)}var ya=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function xq(t,e,n){if(t.isAbsolute)return new ya(e,!0,0);if(!n)return new ya(e,!1,NaN);if(n.parent===null)return new ya(n,!0,0);let r=Xf(t.commands[0])?0:1,i=n.segments.length-1+r;return Nq(n,i,t.numberOfDoubleDots)}function Nq(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new T(4005,!1);i=r.segments.length}return new ya(r,!1,i-s)}function Pq(t){return Cl(t[0])?t[0].outlets:{[ue]:t}}function bx(t,e,n){if(t??=new De([],{}),t.segments.length===0&&t.hasChildren())return El(t,e,n);let r=Oq(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new De(t.segments.slice(0,r.pathIndex),{});return s.children[ue]=new De(t.segments.slice(r.pathIndex),t.children),El(s,0,i)}else return r.match&&i.length===0?new De(t.segments,{}):r.match&&!t.hasChildren()?Ow(t,e,n):r.match?El(t,0,i):Ow(t,e,n)}function El(t,e,n){if(n.length===0)return new De(t.segments,{});{let r=Pq(n),i={};if(Object.keys(r).some(s=>s!==ue)&&t.children[ue]&&t.numberOfChildren===1&&t.children[ue].segments.length===0){let s=El(t.children[ue],e,n);return new De(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=bx(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new De(t.segments,i)}}function Oq(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Cl(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!sx(c,l,o))return s;r+=2}else{if(!sx(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ow(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Cl(s)){let c=kq(s.outlets);return new De(r,c)}if(i===0&&Xf(n[0])){let c=t.segments[e];r.push(new ks(c.path,ix(n[0]))),i++;continue}let o=Cl(s)?s.outlets[ue]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Xf(a)?(r.push(new ks(o,ix(a))),i+=2):(r.push(new ks(o,{})),i++)}return new De(r,{})}function kq(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Ow(new De([],{}),0,r))}),e}function ix(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function sx(t,e,n){return t==n.path&&pr(e,n.parameters)}var Il="imperative",lt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(lt||{}),In=class{constructor(e,n){this.id=e,this.url=n}},Ea=class extends In{constructor(e,n,r="imperative",i=null){super(e,n),this.type=lt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},mr=class extends In{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=lt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},tn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(tn||{}),ep=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ep||{}),Ti=class extends In{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=lt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Si=class extends In{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=lt.NavigationSkipped}},Tl=class extends In{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=lt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},tp=class extends In{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=lt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kw=class extends In{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=lt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fw=class extends In{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=lt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Lw=class extends In{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=lt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vw=class extends In{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=lt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jw=class{constructor(e){this.route=e,this.type=lt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Bw=class{constructor(e){this.route=e,this.type=lt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Uw=class{constructor(e){this.snapshot=e,this.type=lt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$w=class{constructor(e){this.snapshot=e,this.type=lt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hw=class{constructor(e){this.snapshot=e,this.type=lt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zw=class{constructor(e){this.snapshot=e,this.type=lt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},np=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=lt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Sl=class{},Al=class{constructor(e){this.url=e}};var qw=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new kl,this.attachRef=null}},kl=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new qw,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Gw(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Gw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Ww(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ww(e,this._root).map(n=>n.value)}};function Gw(t,e){if(t===e.value)return e;for(let n of e.children){let r=Gw(t,n);if(r)return r}return null}function Ww(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Ww(t,n);if(r.length)return r.unshift(e),r}return[]}var en=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ga(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ip=class extends rp{constructor(e,n){super(e),this.snapshot=n,rE(this,e)}toString(){return this.snapshot.toString()}};function Dx(t){let e=Fq(t),n=new Qe([new ks("",{})]),r=new Qe({}),i=new Qe({}),s=new Qe({}),o=new Qe(""),a=new Ai(n,r,s,o,i,ue,t,e.root);return a.snapshot=e.root,new ip(new en(a,[]),e)}function Fq(t){let e={},n={},r={},i="",s=new Rl([],e,r,i,n,ue,t,null,{});return new sp("",new en(s,[]))}var Ai=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(oe(l=>l[Pl]))??z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>va(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>va(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function nE(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:I(I({},e.params),t.params),data:I(I({},e.data),t.data),resolve:I(I(I(I({},t.data),e.data),i?.data),t._resolvedData)}:r={params:I({},t.params),data:I({},t.data),resolve:I(I({},t.data),t._resolvedData??{})},i&&Tx(i)&&(r.resolve[Pl]=i.title),r}var Rl=class{get title(){return this.data?.[Pl]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=va(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=va(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},sp=class extends rp{constructor(e,n){super(n),this.url=e,rE(this,n)}toString(){return Cx(this._root)}};function rE(t,e){e.value._routerState=t,e.children.forEach(n=>rE(t,n))}function Cx(t){let e=t.children.length>0?` { ${t.children.map(Cx).join(", ")} } `:"";return`${t.value}${e}`}function Aw(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,pr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),pr(e.params,n.params)||t.paramsSubject.next(n.params),dq(e.url,n.url)||t.urlSubject.next(n.url),pr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Kw(t,e){let n=pr(t.params,e.params)&&mq(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Kw(t.parent,e.parent))}function Tx(t){return typeof t.title=="string"||t.title===null}var Lq=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ue,this.activateEvents=new Ce,this.deactivateEvents=new Ce,this.attachEvents=new Ce,this.detachEvents=new Ce,this.parentContexts=b(kl),this.location=b(vn),this.changeDetector=b(wn),this.environmentInjector=b(qt),this.inputBinder=b(lp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new T(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new T(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new T(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new T(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Qw(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=ye({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Lt]});let t=e;return t})(),Qw=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ai?this.route:e===kl?this.childContexts:this.parent.get(e,n)}},lp=new x(""),ox=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=ms([i.queryParams,i.params,i.data]).pipe(Zt(([o,a,c],l)=>(c=I(I(I({},o),a),c),l===0?z(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=MM(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function Vq(t,e,n){let r=Ml(t,e._root,n?n._root:void 0);return new ip(r,e)}function Ml(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=jq(t,e,n);return new en(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ml(t,a)),o}}let r=Bq(e.value),i=e.children.map(s=>Ml(t,s));return new en(r,i)}}function jq(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ml(t,r,i);return Ml(t,r)})}function Bq(t){return new Ai(new Qe(t.url),new Qe(t.params),new Qe(t.queryParams),new Qe(t.fragment),new Qe(t.data),t.outlet,t.component,t)}var Sx="ngNavigationCancelingError";function Ax(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=wa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Rx(!1,tn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Rx(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Sx]=!0,n.cancellationCode=e,n}function Uq(t){return Mx(t)&&wa(t.url)}function Mx(t){return!!t&&t[Sx]}var $q=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ar({type:e,selectors:[["ng-component"]],standalone:!0,features:[dr],decls:1,vars:0,template:function(i,s){i&1&&bi(0,"router-outlet")},dependencies:[Lq],encapsulation:2});let t=e;return t})();function Hq(t,e){return t.providers&&!t._injector&&(t._injector=Nf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function iE(t){let e=t.children&&t.children.map(iE),n=e?he(I({},t),{children:e}):I({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ue&&(n.component=$q),n}function gr(t){return t.outlet||ue}function zq(t,e){let n=t.filter(r=>gr(r)===e);return n.push(...t.filter(r=>gr(r)!==e)),n}function Fl(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var qq=(t,e,n,r)=>oe(i=>(new Yw(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Yw=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Aw(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ga(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ga(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ga(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ga(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new zw(s.value.snapshot))}),e.children.length&&this.forwardEvent(new $w(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Aw(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Aw(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Fl(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},op=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},_a=class{constructor(e,n){this.component=e,this.route=n}};function Gq(t,e,n){let r=t._root,i=e?e._root:null;return vl(r,i,n,[r.value])}function Wq(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ba(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!KS(t)?t:e.get(t):r}function vl(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ga(e);return t.children.forEach(o=>{Kq(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>bl(a,n.getContext(o),i)),i}function Kq(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Qq(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new op(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?vl(t,e,a?a.children:null,r,i):vl(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new _a(a.outlet.component,o))}else o&&bl(e,a,i),i.canActivateChecks.push(new op(r)),s.component?vl(t,null,a?a.children:null,r,i):vl(t,null,n,r,i);return i}function Qq(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Fs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Fs(t.url,e.url)||!pr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kw(t,e)||!pr(t.queryParams,e.queryParams);case"paramsChange":default:return!Kw(t,e)}}function bl(t,e,n){let r=ga(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?bl(o,e.children.getContext(s),n):bl(o,null,n):bl(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new _a(e.outlet.component,i)):n.canDeactivateChecks.push(new _a(null,i)):n.canDeactivateChecks.push(new _a(null,i))}function Ll(t){return typeof t=="function"}function Yq(t){return typeof t=="boolean"}function Zq(t){return t&&Ll(t.canLoad)}function Xq(t){return t&&Ll(t.canActivate)}function Jq(t){return t&&Ll(t.canActivateChild)}function eG(t){return t&&Ll(t.canDeactivate)}function tG(t){return t&&Ll(t.canMatch)}function xx(t){return t instanceof Nr||t?.name==="EmptyError"}var Kf=Symbol("INITIAL_VALUE");function Ia(){return Zt(t=>ms(t.map(e=>e.pipe(He(1),Pn(Kf)))).pipe(oe(e=>{for(let n of e)if(n!==!0){if(n===Kf)return Kf;if(n===!1||n instanceof Ci)return n}return!0}),Fe(e=>e!==Kf),He(1)))}function nG(t,e){return je(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?z(he(I({},n),{guardsResult:!0})):rG(o,r,i,t).pipe(je(a=>a&&Yq(a)?iG(r,s,t,e):z(a)),oe(a=>he(I({},n),{guardsResult:a})))})}function rG(t,e,n,r){return Oe(t).pipe(je(i=>lG(i.component,i.route,n,e,r)),Jn(i=>i!==!0,!0))}function iG(t,e,n,r){return Oe(e).pipe(gs(i=>Xn(oG(i.route.parent,r),sG(i.route,r),cG(t,i.path,n),aG(t,i.route,n))),Jn(i=>i!==!0,!0))}function sG(t,e){return t!==null&&e&&e(new Hw(t)),z(!0)}function oG(t,e){return t!==null&&e&&e(new Uw(t)),z(!0)}function aG(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return z(!0);let i=r.map(s=>ui(()=>{let o=Fl(e)??n,a=ba(s,o),c=Xq(a)?a.canActivate(e,t):kr(o,()=>a(e,t));return Ri(c).pipe(Jn())}));return z(i).pipe(Ia())}function cG(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Wq(o)).filter(o=>o!==null).map(o=>ui(()=>{let a=o.guards.map(c=>{let l=Fl(o.node)??n,u=ba(c,l),d=Jq(u)?u.canActivateChild(r,t):kr(l,()=>u(r,t));return Ri(d).pipe(Jn())});return z(a).pipe(Ia())}));return z(s).pipe(Ia())}function lG(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return z(!0);let o=s.map(a=>{let c=Fl(e)??i,l=ba(a,c),u=eG(l)?l.canDeactivate(t,e,n,r):kr(c,()=>l(t,e,n,r));return Ri(u).pipe(Jn())});return z(o).pipe(Ia())}function uG(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return z(!0);let s=i.map(o=>{let a=ba(o,t),c=Zq(a)?a.canLoad(e,n):kr(t,()=>a(e,n));return Ri(c)});return z(s).pipe(Ia(),Nx(r))}function Nx(t){return th(et(e=>{if(wa(e))throw Ax(t,e)}),oe(e=>e===!0))}function dG(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return z(!0);let s=i.map(o=>{let a=ba(o,t),c=tG(a)?a.canMatch(e,n):kr(t,()=>a(e,n));return Ri(c)});return z(s).pipe(Ia(),Nx(r))}var xl=class{constructor(e){this.segmentGroup=e||null}},ap=class extends Error{constructor(e){super(),this.urlTree=e}};function ma(t){return Uo(new xl(t))}function hG(t){return Uo(new T(4e3,!1))}function fG(t){return Uo(Rx(!1,tn.GuardRejected))}var Zw=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return z(r);if(i.numberOfChildren>1||!i.children[ue])return hG(e.redirectTo);i=i.children[ue]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new ap(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Ci(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new De(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new T(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Xw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pG(t,e,n,r,i){let s=sE(t,e,n);return s.matched?(r=Hq(e,r),dG(r,e,n,i).pipe(oe(o=>o===!0?s:I({},Xw)))):z(s)}function sE(t,e,n){if(e.path==="**")return mG(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?I({},Xw):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||uq)(n,t,e);if(!i)return I({},Xw);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?I(I({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function mG(t){return{matched:!0,parameters:t.length>0?dx(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function ax(t,e,n,r){return n.length>0&&_G(t,n,r)?{segmentGroup:new De(e,yG(r,new De(n,t.children))),slicedSegments:[]}:n.length===0&&vG(t,n,r)?{segmentGroup:new De(t.segments,gG(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new De(t.segments,t.children),slicedSegments:n}}function gG(t,e,n,r){let i={};for(let s of n)if(up(t,e,s)&&!r[gr(s)]){let o=new De([],{});i[gr(s)]=o}return I(I({},r),i)}function yG(t,e){let n={};n[ue]=e;for(let r of t)if(r.path===""&&gr(r)!==ue){let i=new De([],{});n[gr(r)]=i}return n}function _G(t,e,n){return n.some(r=>up(t,e,r)&&gr(r)!==ue)}function vG(t,e,n){return n.some(r=>up(t,e,r))}function up(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function wG(t,e,n,r){return gr(t)!==r&&(r===ue||!up(e,n,t))?!1:sE(e,t,n).matched}function EG(t,e,n){return e.length===0&&!t.children[n]}var Jw=class{};function IG(t,e,n,r,i,s,o="emptyOnly"){return new eE(t,e,n,r,i,o,s).recognize()}var bG=31,eE=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Zw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new T(4002,`'${e.segmentGroup}'`)}recognize(){let e=ax(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(n=>{let r=new Rl([],Object.freeze({}),Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,{},ue,this.rootComponentType,null,{}),i=new en(r,n),s=new sp("",i),o=Rq(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ue).pipe(di(r=>{if(r instanceof ap)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof xl?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=nE(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(oe(s=>s instanceof en?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Oe(i).pipe(gs(s=>{let o=r.children[s],a=zq(n,s);return this.processSegmentGroup(e,a,o,s)}),Sh((s,o)=>(s.push(...o),s)),hi(null),Vy(),je(s=>{if(s===null)return ma(r);let o=Px(s);return DG(o),z(o)}))}processSegment(e,n,r,i,s,o){return Oe(n).pipe(gs(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(di(c=>{if(c instanceof xl)return z(null);throw c}))),Jn(a=>!!a),di(a=>{if(xx(a))return EG(r,i,s)?z(new Jw):ma(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return wG(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):ma(i):ma(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=sE(n,i,s);if(!a)return ma(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>bG&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(je(h=>this.processSegment(e,r,n,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=pG(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(Zt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Zt(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new Rl(u,h,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,TG(r),gr(r),r.component??r._loadedComponent??null,r,SG(r)),{segmentGroup:m,slicedSegments:g}=ax(n,u,d,c);if(g.length===0&&m.hasChildren())return this.processChildren(l,c,m).pipe(oe(E=>E===null?null:new en(f,E)));if(c.length===0&&g.length===0)return z(new en(f,[]));let v=gr(r)===s;return this.processSegment(l,c,m,g,v?ue:s,!0).pipe(oe(E=>new en(f,E instanceof en?[E]:[])))}))):ma(n)))}getChildConfig(e,n,r){return n.children?z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?z({routes:n._loadedRoutes,injector:n._loadedInjector}):uG(e,n,r,this.urlSerializer).pipe(je(i=>i?this.configLoader.loadChildren(e,n).pipe(et(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):fG(n))):z({routes:[],injector:e})}};function DG(t){t.sort((e,n)=>e.value.outlet===ue?-1:n.value.outlet===ue?1:e.value.outlet.localeCompare(n.value.outlet))}function CG(t){let e=t.value.routeConfig;return e&&e.path===""}function Px(t){let e=[],n=new Set;for(let r of t){if(!CG(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Px(r.children);e.push(new en(r.value,i))}return e.filter(r=>!n.has(r))}function TG(t){return t.data||{}}function SG(t){return t.resolve||{}}function AG(t,e,n,r,i,s){return je(o=>IG(t,e,n,r,o.extractedUrl,i,s).pipe(oe(({state:a,tree:c})=>he(I({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function RG(t,e){return je(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return z(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of Ox(c))o.add(l);let a=0;return Oe(o).pipe(gs(c=>s.has(c)?MG(c,r,t,e):(c.data=nE(c,c.parent,t).resolve,z(void 0))),et(()=>a++),zo(1),je(c=>a===o.size?z(n):Pt))})}function Ox(t){let e=t.children.map(n=>Ox(n)).flat();return[t,...e]}function MG(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!Tx(i)&&(s[Pl]=i.title),xG(s,t,e,r).pipe(oe(o=>(t._resolvedData=o,t.data=nE(t,t.parent,n).resolve,null)))}function xG(t,e,n,r){let i=xw(t);if(i.length===0)return z({});let s={};return Oe(i).pipe(je(o=>NG(t[o],e,n,r).pipe(Jn(),et(a=>{s[o]=a}))),zo(1),kc(s),di(o=>xx(o)?Pt:Uo(o)))}function NG(t,e,n,r){let i=Fl(e)??r,s=ba(t,i),o=s.resolve?s.resolve(e,n):kr(i,()=>s(e,n));return Ri(o)}function Rw(t){return Zt(e=>{let n=t(e);return n?Oe(n).pipe(oe(()=>e)):z(e)})}var kx=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===ue);return i}getResolvedTitleForRoute(r){return r.data[Pl]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>b(PG),providedIn:"root"});let t=e;return t})(),PG=(()=>{let e=class e extends kx{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(y(ex))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Vl=new x("",{providedIn:"root",factory:()=>({})}),Nl=new x(""),oE=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=b(jf)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return z(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ri(r.loadComponent()).pipe(oe(Fx),et(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Lc(()=>{this.componentLoaders.delete(r)})),s=new ii(i,()=>new H).pipe(Lo());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return z({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=OG(i,this.compiler,r,this.onLoadEndListener).pipe(Lc(()=>{this.childrenLoaders.delete(i)})),a=new ii(o,()=>new H).pipe(Lo());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function OG(t,e,n,r){return Ri(t.loadChildren()).pipe(oe(Fx),je(i=>i instanceof Yc||Array.isArray(i)?z(i):Oe(e.compileModuleAsync(i))),oe(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Nl,[],{optional:!0,self:!0}).flat()),{routes:o.map(iE),injector:s}}))}function kG(t){return t&&typeof t=="object"&&"default"in t}function Fx(t){return kG(t)?t.default:t}var aE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>b(FG),providedIn:"root"});let t=e;return t})(),FG=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Lx=new x(""),Vx=new x("");function LG(t,e,n){let r=t.get(Vx),i=t.get(Y);return t.get(L).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),VG(t))),{onViewTransitionCreated:c}=r;return c&&kr(t,()=>c({transition:a,from:e,to:n})),o})}function VG(t){return new Promise(e=>{xf(e,{injector:t})})}var cE=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new H,this.transitionAbortSubject=new H,this.configLoader=b(oE),this.environmentInjector=b(qt),this.urlSerializer=b(Ol),this.rootContexts=b(kl),this.location=b(fr),this.inputBindingEnabled=b(lp,{optional:!0})!==null,this.titleStrategy=b(kx),this.options=b(Vl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=b(aE),this.createViewTransition=b(Lx,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>z(void 0),this.rootComponentType=null;let r=s=>this.events.next(new jw(s)),i=s=>this.events.next(new Bw(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(he(I(I({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Qe({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Il,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Fe(o=>o.id!==0),oe(o=>he(I({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Zt(o=>{let a=!1,c=!1;return z(o).pipe(Zt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",tn.SupersededByNewNavigation),Pt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?he(I({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Si(l.id,this.urlSerializer.serialize(l.rawUrl),h,ep.IgnoredSameUrlNavigation)),l.resolve(null),Pt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return z(l).pipe(Zt(h=>{let f=this.transitions?.getValue();return this.events.next(new Ea(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Pt:Promise.resolve(h)}),AG(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),et(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=he(I({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new tp(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:m,restoredState:g,extras:v}=l,E=new Ea(h,this.urlSerializer.serialize(f),m,g);this.events.next(E);let R=Dx(this.rootComponentType).snapshot;return this.currentTransition=o=he(I({},l),{targetSnapshot:R,urlAfterRedirects:f,extras:he(I({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,z(o)}else{let h="";return this.events.next(new Si(l.id,this.urlSerializer.serialize(l.extractedUrl),h,ep.IgnoredByUrlHandlingStrategy)),l.resolve(null),Pt}}),et(l=>{let u=new kw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),oe(l=>(this.currentTransition=o=he(I({},l),{guards:Gq(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),nG(this.environmentInjector,l=>this.events.next(l)),et(l=>{if(o.guardsResult=l.guardsResult,wa(l.guardsResult))throw Ax(this.urlSerializer,l.guardsResult);let u=new Fw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Fe(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",tn.GuardRejected),!1)),Rw(l=>{if(l.guards.canActivateChecks.length)return z(l).pipe(et(u=>{let d=new Lw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Zt(u=>{let d=!1;return z(u).pipe(RG(this.paramsInheritanceStrategy,this.environmentInjector),et({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",tn.NoDataFromResolver)}}))}),et(u=>{let d=new Vw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Rw(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(et(f=>{d.component=f}),oe(()=>{})));for(let f of d.children)h.push(...u(f));return h};return ms(u(l.targetSnapshot.root)).pipe(hi(null),He(1))}),Rw(()=>this.afterPreactivation()),Zt(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?Oe(d).pipe(oe(()=>o)):z(o)}),oe(l=>{let u=Vq(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=he(I({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),et(()=>{this.events.next(new Sl)}),qq(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),He(1),et({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new mr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),er(this.transitionAbortSubject.pipe(et(l=>{throw l}))),Lc(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",tn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),di(l=>{if(c=!0,Mx(l))this.events.next(new Ti(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),Uq(l)?this.events.next(new Al(l.url)):o.resolve(!1);else{this.events.next(new Tl(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Pt}))}))}cancelNavigationTransition(r,i,s){let o=new Ti(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jG(t){return t!==Il}var BG=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>b(UG),providedIn:"root"});let t=e;return t})(),tE=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},UG=(()=>{let e=class e extends tE{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=lr(e)))(s||e)}})(),e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),jx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>b($G),providedIn:"root"});let t=e;return t})(),$G=(()=>{let e=class e extends jx{constructor(){super(...arguments),this.location=b(fr),this.urlSerializer=b(Ol),this.options=b(Vl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=b(aE),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ci,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Dx(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ea)this.stateMemento=this.createStateMemento();else if(r instanceof Si)this.rawUrlTree=i.initialUrl;else if(r instanceof tp){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Sl?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Ti&&(r.code===tn.GuardRejected||r.code===tn.NoDataFromResolver)?this.restoreHistory(i):r instanceof Tl?this.restoreHistory(i,!0):r instanceof mr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=I(I({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=I(I({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=lr(e)))(s||e)}})(),e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wl=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(wl||{});function Bx(t,e){t.events.pipe(Fe(n=>n instanceof mr||n instanceof Ti||n instanceof Tl||n instanceof Si),oe(n=>n instanceof mr||n instanceof Si?wl.COMPLETE:(n instanceof Ti?n.code===tn.Redirect||n.code===tn.SupersededByNewNavigation:!1)?wl.REDIRECTING:wl.FAILED),Fe(n=>n!==wl.REDIRECTING),He(1)).subscribe(()=>{e()})}function HG(t){throw t}var zG={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},$n=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=b(fa),this.stateManager=b(jx),this.options=b(Vl,{optional:!0})||{},this.pendingTasks=b(cl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=b(cE),this.urlSerializer=b(Ol),this.location=b(fr),this.urlHandlingStrategy=b(aE),this._events=new H,this.errorHandler=this.options.errorHandler||HG,this.navigated=!1,this.routeReuseStrategy=b(BG),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=b(Nl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!b(lp,{optional:!0}),this.eventsSubscription=new Ae,this.isNgZoneEnabled=b(L)instanceof L&&L.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Ti&&i.code!==tn.Redirect&&i.code!==tn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof mr)this.navigated=!0;else if(i instanceof Al){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||jG(s.source)};this.scheduleNavigation(a,Il,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}WG(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Il,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=I({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(iE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=I(I({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=wx(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return Ex(h,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=wa(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Il,null,i)}navigate(r,i={skipLocationChange:!1}){return GG(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=I({},zG):i===!1?s=I({},qG):s=i,wa(r))return nx(this.currentUrlTree,r,s);let o=this.parseUrl(r);return nx(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return Bx(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function GG(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new T(4008,!1)}function WG(t){return!(t instanceof Sl)&&!(t instanceof Al)}var Poe=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new H,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof mr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:vR(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(S($n),S(Ai),Rv("tabindex"),S(Bn),S(ve),S(Hr))},e.\u0275dir=ye({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&ct("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&ur("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[pe.HasDecoratorInputTransform,"preserveFragment","preserveFragment",En],skipLocationChange:[pe.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",En],replaceUrl:[pe.HasDecoratorInputTransform,"replaceUrl","replaceUrl",En],routerLink:"routerLink"},standalone:!0,features:[jr,Lt]});let t=e;return t})();var cp=class{};var KG=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Fe(r=>r instanceof mr),gs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Nf(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Oe(s).pipe(li())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=z(null);let o=s.pipe(je(a=>a===null?z(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Oe([o,a]).pipe(li())}else return o})}};e.\u0275fac=function(i){return new(i||e)(y($n),y(jf),y(qt),y(cp),y(oE))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ux=new x(""),QG=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=b(qt),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Ea?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof mr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Si&&r.code===ep.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof np&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>p(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),xf(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new np(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){NR()},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function Ooe(t,...e){return df([{provide:Nl,multi:!0,useValue:t},[],{provide:Ai,useFactory:$x,deps:[$n]},{provide:Vf,multi:!0,useFactory:Hx},e.map(n=>n.\u0275providers)])}function $x(t){return t.routerState.root}function jl(t,e){return{\u0275kind:t,\u0275providers:e}}function Hx(){let t=b(Ne);return e=>{let n=t.get(Di);if(e!==n.components[0])return;let r=t.get($n),i=t.get(zx);t.get(lE)===1&&r.initialNavigation(),t.get(qx,null,fe.Optional)?.setUpPreloading(),t.get(Ux,null,fe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var zx=new x("",{factory:()=>new H}),lE=new x("",{providedIn:"root",factory:()=>1});function YG(){return jl(2,[{provide:lE,useValue:0},{provide:Lf,multi:!0,deps:[Ne],useFactory:e=>{let n=e.get(VM,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get($n),s=e.get(zx);Bx(i,()=>{r(!0)}),e.get(cE).afterPreactivation=()=>(r(!0),s.closed?z(void 0):s),i.initialNavigation()}))}}])}function ZG(){return jl(3,[{provide:Lf,multi:!0,useFactory:()=>{let e=b($n);return()=>{e.setUpLocationChangeListener()}}},{provide:lE,useValue:2}])}var qx=new x("");function XG(t){return jl(0,[{provide:qx,useExisting:KG},{provide:cp,useExisting:t}])}function JG(){return jl(8,[ox,{provide:lp,useExisting:ox}])}function eW(t){let e=[{provide:Lx,useValue:LG},{provide:Vx,useValue:I({skipNextTransition:!!t?.skipInitialTransition},t)}];return jl(9,e)}var cx=new x("ROUTER_FORROOT_GUARD"),tW=[fr,{provide:Ol,useClass:Dl},$n,kl,{provide:Ai,useFactory:$x,deps:[$n]},oE,[]],uE=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[tW,[],{provide:Nl,multi:!0,useValue:r},{provide:cx,useFactory:sW,deps:[[$n,new mt,new cv]]},{provide:Vl,useValue:i||{}},i?.useHash?rW():iW(),nW(),i?.preloadingStrategy?XG(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?oW(i):[],i?.bindToComponentInputs?JG().\u0275providers:[],i?.enableViewTransitions?eW().\u0275providers:[],aW()]}}static forChild(r){return{ngModule:e,providers:[{provide:Nl,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(y(cx,8))},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({});let t=e;return t})();function nW(){return{provide:Ux,useFactory:()=>{let t=b(qM),e=b(L),n=b(Vl),r=b(cE),i=b(Ol);return n.scrollOffset&&t.setOffset(n.scrollOffset),new QG(i,r,t,e,n)}}}function rW(){return{provide:Hr,useClass:BM}}function iW(){return{provide:Hr,useClass:pw}}function sW(t){return"guarded"}function oW(t){return[t.initialNavigation==="disabled"?ZG().\u0275providers:[],t.initialNavigation==="enabledBlocking"?YG().\u0275providers:[]]}var lx=new x("");function aW(){return[{provide:lx,useFactory:Hx},{provide:Vf,multi:!0,useExisting:lx}]}var Voe=(()=>{let e=class e{constructor(){this.executingCounter=Qv(0),this.loadingStatus$=new Qe(!1)}get loading$(){return this.loadingStatus$.asObservable()}start(){this.executingCounter.update(r=>r+1),this.executingCounter()>0&&this.loadingStatus$.next(!0)}stop(){this.executingCounter()>0&&this.executingCounter.update(r=>r-1),this.executingCounter()<=0&&this.loadingStatus$.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Wx=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},lW=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Kx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Wx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lW(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new hE;let h=s<<2|a>>4;if(r.push(h),l!==64){let f=a<<4&240|l>>2;if(r.push(f),d!==64){let m=l<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},hE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},uW=function(t){let e=Wx(t);return Kx.encodeByteArray(e,!0)},pE=function(t){return uW(t).replace(/\./g,"")},mE=function(t){try{return Kx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function dW(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var hW=()=>dW().__FIREBASE_DEFAULTS__,fW=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pW=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&mE(t[1]);return e&&JSON.parse(e)},hp=()=>{try{return hW()||fW()||pW()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Qx=t=>{var e,n;return(n=(e=hp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]};var gE=()=>{var t;return(t=hp())===null||t===void 0?void 0:t.config},yE=t=>{var e;return(e=hp())===null||e===void 0?void 0:e[`_${t}`]};var dp=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Yx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function mW(){var t;let e=(t=hp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Zx(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Xx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Jx(){let t=qe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _E(){return!mW()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fp(){try{return typeof indexedDB=="object"}catch{return!1}}function eN(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var gW="FirebaseError",nn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gW,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zr.prototype.create)}},zr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?yW(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new nn(i,a,r)}};function yW(t,e){return t.replace(_W,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var _W=/\{\$([^}]+)}/g;function tN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(Gx(s)&&Gx(o)){if(!Mi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Gx(t){return t!==null&&typeof t=="object"}function Da(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ca(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ta(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function nN(t,e){let n=new fE(t,e);return n.subscribe.bind(n)}var fE=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");vW(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=dE),i.error===void 0&&(i.error=dE),i.complete===void 0&&(i.complete=dE);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function vW(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dE(){}var Boe=4*60*60*1e3;function ze(t){return t&&t._delegate?t._delegate:t}var bn=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ls="[DEFAULT]";var vE=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new dp;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EW(e))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ls){return this.instances.has(e)}getOptions(e=Ls){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wW(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ls){return this.component?this.component.multipleInstances?e:Ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function wW(t){return t===Ls?void 0:t}function EW(t){return t.instantiationMode==="EAGER"}var pp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new vE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var IW=[],ge=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ge||{}),bW={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},DW=ge.INFO,CW={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},TW=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=CW[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},xi=class{constructor(e){this.name=e,this._logLevel=DW,this._logHandler=TW,this._userLogHandler=null,IW.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bW[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}};var SW=(t,e)=>e.some(n=>t instanceof n),rN,iN;function AW(){return rN||(rN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RW(){return iN||(iN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var sN=new WeakMap,EE=new WeakMap,oN=new WeakMap,wE=new WeakMap,bE=new WeakMap;function MW(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(yr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&sN.set(n,t)}).catch(()=>{}),bE.set(e,t),e}function xW(t){if(EE.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});EE.set(t,e)}var IE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return EE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||oN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aN(t){IE=t(IE)}function NW(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(mp(this),e,...n);return oN.set(r,e.sort?e.sort():[e]),yr(r)}:RW().includes(t)?function(...e){return t.apply(mp(this),e),yr(sN.get(this))}:function(...e){return yr(t.apply(mp(this),e))}}function PW(t){return typeof t=="function"?NW(t):(t instanceof IDBTransaction&&xW(t),SW(t,AW())?new Proxy(t,IE):t)}function yr(t){if(t instanceof IDBRequest)return MW(t);if(wE.has(t))return wE.get(t);let e=PW(t);return e!==t&&(wE.set(t,e),bE.set(e,t)),e}var mp=t=>bE.get(t);function lN(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=yr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(yr(o.result),c.oldVersion,c.newVersion,yr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var OW=["get","getKey","getAll","getAllKeys","count"],kW=["put","add","delete","clear"],DE=new Map;function cN(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(DE.get(e))return DE.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=kW.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||OW.includes(n)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return DE.set(e,s),s}aN(t=>he(I({},t),{get:(e,n,r)=>cN(e,n)||t.get(e,n,r),has:(e,n)=>!!cN(e,n)||t.has(e,n)}));var TE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FW(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function FW(t){let e=t.getComponent();return e?.type==="VERSION"}var SE="@firebase/app",uN="0.9.26";var Vs=new xi("@firebase/app"),LW="@firebase/app-compat",VW="@firebase/analytics-compat",jW="@firebase/analytics",BW="@firebase/app-check-compat",UW="@firebase/app-check",$W="@firebase/auth",HW="@firebase/auth-compat",zW="@firebase/database",qW="@firebase/database-compat",GW="@firebase/functions",WW="@firebase/functions-compat",KW="@firebase/installations",QW="@firebase/installations-compat",YW="@firebase/messaging",ZW="@firebase/messaging-compat",XW="@firebase/performance",JW="@firebase/performance-compat",e4="@firebase/remote-config",t4="@firebase/remote-config-compat",n4="@firebase/storage",r4="@firebase/storage-compat",i4="@firebase/firestore",s4="@firebase/firestore-compat",o4="firebase",a4="10.7.2";var AE="[DEFAULT]",c4={[SE]:"fire-core",[LW]:"fire-core-compat",[jW]:"fire-analytics",[VW]:"fire-analytics-compat",[UW]:"fire-app-check",[BW]:"fire-app-check-compat",[$W]:"fire-auth",[HW]:"fire-auth-compat",[zW]:"fire-rtdb",[qW]:"fire-rtdb-compat",[GW]:"fire-fn",[WW]:"fire-fn-compat",[KW]:"fire-iid",[QW]:"fire-iid-compat",[YW]:"fire-fcm",[ZW]:"fire-fcm-compat",[XW]:"fire-perf",[JW]:"fire-perf-compat",[e4]:"fire-rc",[t4]:"fire-rc-compat",[n4]:"fire-gcs",[r4]:"fire-gcs-compat",[i4]:"fire-fst",[s4]:"fire-fst-compat","fire-js":"fire-js",[o4]:"fire-js-all"};var Bl=new Map,RE=new Map;function l4(t,e){try{t.container.addComponent(e)}catch(n){Vs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Pi(t){let e=t.name;if(RE.has(e))return Vs.debug(`There were multiple attempts to register component ${e}.`),!1;RE.set(e,t);for(let n of Bl.values())l4(n,t);return!0}function $l(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var u4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ni=new zr("app","Firebase",u4);var ME=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}};var Oi=a4;function PE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:AE,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ni.create("bad-app-name",{appName:String(i)});if(n||(n=gE()),!n)throw Ni.create("no-options");let s=Bl.get(i);if(s){if(Mi(n,s.options)&&Mi(r,s.config))return s;throw Ni.create("duplicate-app",{appName:i})}let o=new pp(i);for(let c of RE.values())o.addComponent(c);let a=new ME(n,r,o);return Bl.set(i,a),a}function Sa(t=AE){let e=Bl.get(t);if(!e&&t===AE&&gE())return PE();if(!e)throw Ni.create("no-app",{appName:t});return e}function gp(){return Array.from(Bl.values())}function it(t,e,n){var r;let i=(r=c4[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vs.warn(a.join(" "));return}Pi(new bn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var d4="firebase-heartbeat-database",h4=1,Ul="firebase-heartbeat-store",CE=null;function pN(){return CE||(CE=lN(d4,h4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ul)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ni.create("idb-open",{originalErrorMessage:t.message})})),CE}function f4(t){return p(this,null,function*(){try{return yield(yield pN()).transaction(Ul).objectStore(Ul).get(mN(t))}catch(e){if(e instanceof nn)Vs.warn(e.message);else{let n=Ni.create("idb-get",{originalErrorMessage:e?.message});Vs.warn(n.message)}}})}function dN(t,e){return p(this,null,function*(){try{let r=(yield pN()).transaction(Ul,"readwrite");yield r.objectStore(Ul).put(e,mN(t)),yield r.done}catch(n){if(n instanceof nn)Vs.warn(n.message);else{let r=Ni.create("idb-set",{originalErrorMessage:n?.message});Vs.warn(r.message)}}})}function mN(t){return`${t.name}!${t.options.appId}`}var p4=1024,m4=30*24*60*60*1e3,xE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new NE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=hN();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=m4}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=hN(),{heartbeatsToSend:r,unsentEntries:i}=g4(this._heartbeatsCache.heartbeats),s=pE(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function hN(){return new Date().toISOString().substring(0,10)}function g4(t,e=p4){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),fN(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),fN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var NE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return fp()?eN().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield f4(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return dN(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return dN(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function fN(t){return pE(JSON.stringify({version:2,heartbeats:t})).length}function y4(t){Pi(new bn("platform-logger",e=>new TE(e),"PRIVATE")),Pi(new bn("heartbeat",e=>new xE(e),"PRIVATE")),it(SE,uN,t),it(SE,uN,"esm2017"),it("fire-js","")}y4("");var _4="firebase",v4="10.7.2";it(_4,v4,"app");var Bs=new or("ANGULARFIRE2_VERSION");function _p(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Hl=(t,e)=>{let n=e?[e]:gp(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ra=class{constructor(){return Hl(w4)}},w4="app-check";function Aa(){}var yp=class{zone;delegate;constructor(e,n=Oy){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},OE=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Aa,{},Aa,Aa)),n.pipe(et({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ma=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new yp(Zone.current)),this.insideAngular=n.run(()=>new yp(Zone.current,fn)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(y(L))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function vp(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function E4(t){return vp().ngZone.runOutsideAngular(()=>t())}function js(t){return vp().ngZone.run(()=>t())}function I4(t){return b4(vp())(t)}function b4(t){return function(n){return n=n.lift(new OE(t.ngZone)),n.pipe(ci(t.outsideAngular),ai(t.insideAngular))}}var D4=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),js(()=>t.apply(void 0,r))},Re=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=js(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Aa,{},Aa,Aa))),r[s]=D4(r[s],n));let i=E4(()=>t.apply(this,r));if(!e)if(i instanceof W){let s=vp();return i.pipe(ci(s.outsideAngular),ai(s.insideAngular))}else return js(()=>i);return i instanceof W?i.pipe(I4):i instanceof Promise?js(()=>new Promise((s,o)=>i.then(a=>js(()=>s(a)),a=>js(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:js(()=>i)};var qr=class{constructor(e){return e}},Us=class{constructor(){return gp()}};function C4(t){return t&&t.length===1?t[0]:new qr(Sa())}var kE=new x("angularfire2._apps"),T4={provide:qr,useFactory:C4,deps:[[new mt,kE]]},S4={provide:Us,deps:[[new mt,kE]]};function A4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new qr(r)}}var R4=(()=>{class t{constructor(n){it("angularfire",Bs.full,"core"),it("angularfire",Bs.full,"app"),it("angular",DM.full,n.toString())}static \u0275fac=function(r){return new(r||t)(y(_n))};static \u0275mod=ce({type:t});static \u0275inj=ae({providers:[T4,S4]})}return t})();function bae(t,...e){return{ngModule:R4,providers:[{provide:kE,useFactory:A4(t),multi:!0,deps:[L,Ne,Ma,...e]}]}}var Dae=Re(Sa,!0);var Cae=Re(PE,!0);function xN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var NN=xN,PN=new zr("auth","Firebase",xN());var Cp=new xi("@firebase/auth");function M4(t,...e){Cp.logLevel<=ge.WARN&&Cp.warn(`Auth (${Oi}): ${t}`,...e)}function Ep(t,...e){Cp.logLevel<=ge.ERROR&&Cp.error(`Auth (${Oi}): ${t}`,...e)}function Dn(t,...e){throw tI(t,...e)}function _r(t,...e){return tI(t,...e)}function ON(t,e,n){let r=Object.assign(Object.assign({},NN()),{[e]:n});return new zr("auth","Firebase",r).create(e,{appName:t.name})}function x4(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Dn(t,"argument-error"),ON(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tI(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return PN.create(t,...e)}function Z(t,e,...n){if(!t)throw tI(e,...n)}function Gr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ep(e),new Error(e)}function Kr(t,e){t||Gr(e)}function VE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function N4(){return gN()==="http:"||gN()==="https:"}function gN(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function P4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(N4()||Zx()||"connection"in navigator)?navigator.onLine:!0}function O4(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var $s=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kr(n>e,"Short delay should be less than long delay!"),this.isMobile=Yx()||Xx()}get(){return P4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function nI(t,e){Kr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Tp=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var k4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var F4=new $s(3e4,6e4);function Fi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Li(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){return kN(t,i,()=>p(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=Da(Object.assign({key:t.config.apiKey},u)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),Tp.fetch()(FN(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},l))}))})}function kN(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},k4),e);try{let i=new jE(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw wp(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw wp(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw wp(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw wp(t,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw ON(t,u,l);Dn(t,u)}}catch(i){if(i instanceof nn)throw i;Dn(t,"network-request-failed",{message:String(i)})}})}function Yl(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){let l=yield Li(t,e,n,r,i);return"mfaPendingCredential"in l&&Dn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function FN(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?nI(t.config,i):`${t.config.apiScheme}://${i}`}function L4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var jE=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_r(this.auth,"network-request-failed")),F4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function wp(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=_r(t,e,r);return i.customData._tokenResponse=n,i}function yN(t){return t!==void 0&&t.enterprise!==void 0}var BE=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return L4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function V4(t,e){return p(this,null,function*(){return Li(t,"GET","/v2/recaptchaConfig",Fi(t,e))})}function j4(t,e){return p(this,null,function*(){return Li(t,"POST","/v1/accounts:delete",e)})}function B4(t,e){return p(this,null,function*(){return Li(t,"POST","/v1/accounts:lookup",e)})}function zl(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function rI(t,e=!1){return p(this,null,function*(){let n=ze(t),r=yield n.getIdToken(e),i=iI(r);Z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:zl(FE(i.auth_time)),issuedAtTime:zl(FE(i.iat)),expirationTime:zl(FE(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function FE(t){return Number(t)*1e3}function iI(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ep("JWT malformed, contained fewer than 3 sections"),null;try{let i=mE(n);return i?JSON.parse(i):(Ep("Failed to decode base64 JWT payload"),null)}catch(i){return Ep("Caught error parsing JWT payload as JSON",i?.toString()),null}}function U4(t){let e=iI(t);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ql(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof nn&&$4(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function $4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var UE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Sp=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zl(this.lastLoginAt),this.creationTime=zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ap(t){return p(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield ql(t,B4(n,{idToken:r}));Z(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?z4(s.providerUserInfo):[],a=H4(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Sp(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function sI(t){return p(this,null,function*(){let e=ze(t);yield Ap(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function H4(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function z4(t){return t.map(e=>{var{providerId:n}=e,r=uh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function q4(t,e){return p(this,null,function*(){let n=yield kN(t,{},()=>p(this,null,function*(){let r=Da({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=FN(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Tp.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function G4(t,e){return p(this,null,function*(){return Li(t,"POST","/v2/accounts:revokeToken",Fi(t,e))})}var Rp=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):U4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return p(this,null,function*(){return Z(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield q4(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(Z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Z(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Gr("not implemented")}};function ki(t,e){Z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Gl=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=uh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Sp(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield ql(this,this.stsTokenManager.getToken(this.auth,e));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return rI(this,e)}reload(){return sI(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Ap(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){let e=yield this.getIdToken();return yield ql(this,j4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(l=n.createdAt)!==null&&l!==void 0?l:void 0,R=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:M,emailVerified:F,isAnonymous:ee,providerData:j,stsTokenManager:te}=n;Z(M&&te,e,"internal-error");let be=Rp.fromJSON(this.name,te);Z(typeof M=="string",e,"internal-error"),ki(d,e.name),ki(h,e.name),Z(typeof F=="boolean",e,"internal-error"),Z(typeof ee=="boolean",e,"internal-error"),ki(f,e.name),ki(m,e.name),ki(g,e.name),ki(v,e.name),ki(E,e.name),ki(R,e.name);let xt=new t({uid:M,auth:e,email:h,emailVerified:F,displayName:d,isAnonymous:ee,photoURL:m,phoneNumber:f,tenantId:g,stsTokenManager:be,createdAt:E,lastLoginAt:R});return j&&Array.isArray(j)&&(xt.providerData=j.map(Qt=>Object.assign({},Qt))),v&&(xt._redirectEventId=v),xt}static _fromIdTokenResponse(e,n,r=!1){return p(this,null,function*(){let i=new Rp;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ap(s),s})}};var _N=new Map;function Wr(t){Kr(t instanceof Function,"Expected a class definition");let e=_N.get(t);return e?(Kr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_N.set(t,e),e)}var W4=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),$E=W4;function Ip(t,e,n){return`firebase:${t}:${e}:${n}`}var Mp=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Ip(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ip("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Gl._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new t(Wr($E),e,r);let i=(yield Promise.all(n.map(l=>p(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Wr($E),o=Ip(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(o);if(u){let d=Gl._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>p(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function vN(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UN(e))return"Blackberry";if($N(e))return"Webos";if(oI(e))return"Safari";if((e.includes("chrome/")||VN(e))&&!e.includes("edge/"))return"Chrome";if(BN(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function LN(t=qe()){return/firefox\//i.test(t)}function oI(t=qe()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VN(t=qe()){return/crios\//i.test(t)}function jN(t=qe()){return/iemobile/i.test(t)}function BN(t=qe()){return/android/i.test(t)}function UN(t=qe()){return/blackberry/i.test(t)}function $N(t=qe()){return/webos/i.test(t)}function Bp(t=qe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function K4(t=qe()){var e;return Bp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Q4(){return Jx()&&document.documentMode===10}function HN(t=qe()){return Bp(t)||BN(t)||$N(t)||UN(t)||/windows phone/i.test(t)||jN(t)}function Y4(){try{return!!(window&&window!==window.top)}catch{return!1}}function zN(t,e=[]){let n;switch(t){case"Browser":n=vN(qe());break;case"Worker":n=`${vN(qe())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oi}/${r}`}var HE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Z4(n){return p(this,arguments,function*(t,e={}){return Li(t,"GET","/v2/passwordPolicy",Fi(t,e))})}var X4=6,zE=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:X4,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var qE=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xp(this),this.idTokenSubscription=new xp(this),this.beforeStateQueue=new HE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wr(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Mp.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield Ap(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=O4()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){let n=e?ze(e):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(Wr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield Z4(this),n=new zE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield G4(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Wr(e)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=yield Mp.create(this,[Wr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&M4(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Vi(t){return ze(t)}var xp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=nN(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};function J4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function qN(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=_r("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",J4().appendChild(r)})}function GN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var e3="https://www.google.com/recaptcha/enterprise.js?render=",t3="recaptcha-enterprise",n3="NO_RECAPTCHA",GE=class{constructor(e){this.type=t3,this.auth=Vi(e)}verify(e="verify",n=!1){return p(this,null,function*(){function r(s){return p(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>p(this,null,function*(){V4(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new BE(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;yN(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(n3)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&yN(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}qN(e3+a).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})})}};function wN(t,e,n,r=!1){return p(this,null,function*(){let i=new GE(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function WE(t,e,n,r){return p(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield wN(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>p(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield wN(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function aI(t,e){let n=$l(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Mi(s,e??{}))return i;Dn(i,"already-initialized")}return n.initialize({options:e})}function r3(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Wr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function cI(t,e,n){let r=Vi(t);Z(r._canInitEmulator,r,"emulator-config-failed"),Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=WN(e),{host:o,port:a}=i3(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||s3()}function WN(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function i3(t){let e=WN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:EN(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:EN(o)}}}function EN(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function s3(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Na=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Gr("not implemented")}_getIdTokenResponse(e){return Gr("not implemented")}_linkToIdToken(e,n){return Gr("not implemented")}_getReauthenticationResolver(e){return Gr("not implemented")}};function o3(t,e){return p(this,null,function*(){return Li(t,"POST","/v1/accounts:signUp",e)})}function a3(t,e){return p(this,null,function*(){return Yl(t,"POST","/v1/accounts:signInWithPassword",Fi(t,e))})}function c3(t,e){return p(this,null,function*(){return Yl(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))})}function l3(t,e){return p(this,null,function*(){return Yl(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))})}var Wl=class t extends Na{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return p(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return WE(e,n,"signInWithPassword",a3);case"emailLink":return c3(e,{email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}})}_linkToIdToken(e,n){return p(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return WE(e,r,"signUpPassword",o3);case"emailLink":return l3(e,{idToken:n,email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function xa(t,e){return p(this,null,function*(){return Yl(t,"POST","/v1/accounts:signInWithIdp",Fi(t,e))})}var u3="http://localhost",Np=class t extends Na{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=uh(n,["providerId","signInMethod"]);if(!r||!i)return null;let o=new t(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let n=this.buildRequest();return xa(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,xa(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,xa(e,n)}buildRequest(){let e={requestUri:u3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Da(n)}return e}};function d3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function h3(t){let e=Ca(Ta(t)).link,n=e?Ca(Ta(e)).deep_link_id:null,r=Ca(Ta(t)).deep_link_id;return(r?Ca(Ta(r)).link:null)||r||n||e||t}var Pp=class t{constructor(e){var n,r,i,s,o,a;let c=Ca(Ta(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,d=d3((i=c.mode)!==null&&i!==void 0?i:null);Z(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=h3(e);try{return new t(n)}catch{return null}}};var KN=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Wl._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Pp.parseLink(r);return Z(i,"argument-error"),Wl._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Kl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Op=class extends Kl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var lI=(()=>{class t extends Op{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Np._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();function f3(t,e){return p(this,null,function*(){return Yl(t,"POST","/v1/accounts:signUp",Fi(t,e))})}var Pa=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return p(this,null,function*(){let s=yield Gl._fromIdTokenResponse(e,r,i),o=IN(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return p(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=IN(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function IN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var KE=class t extends nn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function QN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?KE._fromErrorAndOperation(t,s,e,r):s})}function p3(t,e,n=!1){return p(this,null,function*(){let r=yield ql(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Pa._forOperation(t,"link",r)})}function m3(t,e,n=!1){return p(this,null,function*(){let{auth:r}=t,i="reauthenticate";try{let s=yield ql(t,QN(r,i,e,t),n);Z(s.idToken,r,"internal-error");let o=iI(s.idToken);Z(o,r,"internal-error");let{sub:a}=o;return Z(t.uid===a,r,"user-mismatch"),Pa._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Dn(r,"user-mismatch"),s}})}function YN(t,e,n=!1){return p(this,null,function*(){let r="signIn",i=yield QN(t,r,e),s=yield Pa._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function uI(t,e){return p(this,null,function*(){return YN(Vi(t),e)})}function ZN(t){return p(this,null,function*(){let e=Vi(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function dI(t,e,n){return p(this,null,function*(){let r=Vi(t),o=yield WE(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",f3).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&ZN(t),c}),a=yield Pa._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function hI(t,e,n){return uI(ze(t),KN.credential(e,n)).catch(r=>p(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&ZN(t),r}))}function fI(t,e,n,r){return ze(t).onIdTokenChanged(e,n,r)}function pI(t,e,n){return ze(t).beforeAuthStateChanged(e,n)}function mI(t,e,n,r){return ze(t).onAuthStateChanged(e,n,r)}function gI(t){return ze(t).signOut()}var kp="__sak";var Fp=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kp,"1"),this.storage.removeItem(kp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function g3(){let t=qe();return oI(t)||Bp(t)}var y3=1e3,_3=10,v3=(()=>{class t extends Fp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=g3()&&Y4(),this.fallbackToPolling=HN(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);Q4()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,_3):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},y3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return p(this,null,function*(){yield Yn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return p(this,null,function*(){let r=yield Yn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return p(this,null,function*(){yield Yn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),XN=v3;var w3=(()=>{class t extends Fp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),yI=w3;function E3(t){return Promise.all(t.map(e=>p(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var I3=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return p(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(u=>p(this,null,function*(){return u(r.origin,o)})),l=yield E3(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function _I(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var QE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=_I("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function vr(){return window}function b3(t){vr().location.href=t}function JN(){return typeof vr().WorkerGlobalScope<"u"&&typeof vr().importScripts=="function"}function D3(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function C3(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function T3(){return JN()?self:null}var eP="firebaseLocalStorageDb",S3=1,Lp="firebaseLocalStorage",tP="fbase_key",Hs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Up(t,e){return t.transaction([Lp],e?"readwrite":"readonly").objectStore(Lp)}function A3(){let t=indexedDB.deleteDatabase(eP);return new Hs(t).toPromise()}function YE(){let t=indexedDB.open(eP,S3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Lp,{keyPath:tP})}catch(i){n(i)}}),t.addEventListener("success",()=>p(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Lp)?e(r):(r.close(),yield A3(),e(yield YE()))}))})}function bN(t,e,n){return p(this,null,function*(){let r=Up(t,!0).put({[tP]:e,value:n});return new Hs(r).toPromise()})}function R3(t,e){return p(this,null,function*(){let n=Up(t,!1).get(e),r=yield new Hs(n).toPromise();return r===void 0?null:r.value})}function DN(t,e){let n=Up(t,!0).delete(e);return new Hs(n).toPromise()}var M3=800,x3=3,N3=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield YE(),this.db)})}_withRetries(n){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>x3)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return JN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=I3._getInstance(T3()),this.receiver._subscribe("keyChanged",(n,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){var n,r;if(this.activeServiceWorker=yield D3(),!this.activeServiceWorker)return;this.sender=new QE(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||C3()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let n=yield YE();return yield bN(n,kp,"1"),yield DN(n,kp),!0}catch{}return!1})}_withPendingWrite(n){return p(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>bN(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return p(this,null,function*(){let r=yield this._withRetries(i=>R3(i,n));return this.localCache[n]=r,r})}_remove(n){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>DN(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return p(this,null,function*(){let n=yield this._withRetries(s=>{let o=Up(s,!1).getAll();return new Hs(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),M3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),nP=N3;var Pae=GN("rcb"),Oae=new $s(3e4,6e4);function rP(t,e){return e?Wr(e):(Z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Ql=class extends Na{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xa(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function P3(t){return YN(t.auth,new Ql(t),t.bypassAuthState)}function O3(t){let{auth:e,user:n}=t;return Z(n,e,"internal-error"),m3(n,new Ql(t),t.bypassAuthState)}function k3(t){return p(this,null,function*(){let{auth:e,user:n}=t;return Z(n,e,"internal-error"),p3(n,new Ql(t),t.bypassAuthState)})}var Vp=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>p(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return p(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return P3;case"linkViaPopup":case"linkViaRedirect":return k3;case"reauthViaPopup":case"reauthViaRedirect":return O3;default:Dn(this.auth,"internal-error")}}resolve(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var F3=new $s(2e3,1e4);function vI(t,e,n){return p(this,null,function*(){let r=Vi(t);x4(t,e,Kl);let i=rP(r,n);return new L3(r,"signInViaPopup",e,i).executeNotNull()})}var L3=(()=>{class t extends Vp{constructor(n,r,i,s,o){super(n,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return p(this,null,function*(){let n=yield this.execute();return Z(n,this.auth,"internal-error"),n})}onExecution(){return p(this,null,function*(){Kr(this.filter.length===1,"Popup operations only handle one event");let n=_I();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(_r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(_r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,F3.get())};n()}}t.currentPopupAction=null;return t})(),V3="pendingRedirect",bp=new Map,ZE=class t extends Vp{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let e=bp.get(this.auth._key());if(!e){try{let r=(yield j3(this.resolver,this.auth))?yield Yn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}bp.set(this.auth._key(),e)}return this.bypassAuthState||bp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return p(this,null,function*(){if(e.type==="signInViaRedirect")return Yn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Yn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function j3(t,e){return p(this,null,function*(){let n=$3(e),r=U3(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function B3(t,e){bp.set(t._key(),e)}function U3(t){return Wr(t._redirectPersistence)}function $3(t){return Ip(V3,t.config.apiKey,t.name)}function H3(t,e,n=!1){return p(this,null,function*(){let r=Vi(t),i=rP(r,e),o=yield new ZE(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var z3=10*60*1e3,XE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!q3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!iP(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(_r(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=z3&&this.cachedEventUids.clear(),this.cachedEventUids.has(CN(e))}saveEventToCache(e){this.cachedEventUids.add(CN(e)),this.lastProcessedEventTime=Date.now()}};function CN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iP({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function q3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iP(t);default:return!1}}function G3(n){return p(this,arguments,function*(t,e={}){return Li(t,"GET","/v1/projects",e)})}var W3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K3=/^https?/;function Q3(t){return p(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield G3(t);for(let n of e)try{if(Y3(n))return}catch{}Dn(t,"unauthorized-domain")})}function Y3(t){let e=VE(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!K3.test(n))return!1;if(W3.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Z3=new $s(3e4,6e4);function TN(){let t=vr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function X3(t){return new Promise((e,n)=>{var r,i,s;function o(){TN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TN(),n(_r(t,"network-request-failed"))},timeout:Z3.get()})}if(!((i=(r=vr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=vr().gapi)===null||s===void 0)&&s.load)o();else{let a=GN("iframefcb");return vr()[a]=()=>{gapi.load?o():n(_r(t,"network-request-failed"))},qN(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Dp=null,e})}var Dp=null;function J3(t){return Dp=Dp||X3(t),Dp}var e9=new $s(5e3,15e3),t9="__/auth/iframe",n9="emulator/auth/iframe",r9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},i9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function s9(t){let e=t.config;Z(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?nI(e,n9):`https://${t.config.authDomain}/${t9}`,r={apiKey:e.apiKey,appName:t.name,v:Oi},i=i9.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Da(r).slice(1)}`}function o9(t){return p(this,null,function*(){let e=yield J3(t),n=vr().gapi;return Z(n,t,"internal-error"),e.open({where:document.body,url:s9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r9,dontclear:!0},r=>new Promise((i,s)=>p(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=_r(t,"network-request-failed"),a=vr().setTimeout(()=>{s(o)},e9.get());function c(){vr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var a9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},c9=500,l9=600,u9="_blank",d9="http://localhost",jp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function h9(t,e,n,r=c9,i=l9){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},a9),{width:r.toString(),height:i.toString(),top:s,left:o}),l=qe().toLowerCase();n&&(a=VN(l)?u9:n),LN(l)&&(e=e||d9,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[f,m])=>`${h}${f}=${m},`,"");if(K4(l)&&a!=="_self")return f9(e||"",a),new jp(null);let d=window.open(e||"",a,u);Z(d,t,"popup-blocked");try{d.focus()}catch{}return new jp(d)}function f9(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var p9="__/auth/handler",m9="emulator/auth/handler",g9=encodeURIComponent("fac");function SN(t,e,n,r,i,s){return p(this,null,function*(){Z(t.config.authDomain,t,"auth-domain-config-required"),Z(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Oi,eventId:i};if(e instanceof Kl){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",tN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof Op){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield t._getAppCheckToken(),l=c?`#${g9}=${encodeURIComponent(c)}`:"";return`${y9(t)}?${Da(a).slice(1)}${l}`})}function y9({config:t}){return t.emulator?nI(t,m9):`https://${t.authDomain}/${p9}`}var LE="webStorageSupport",JE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yI,this._completeRedirectFn=H3,this._overrideRedirectResult=B3}_openPopup(e,n,r,i){return p(this,null,function*(){var s;Kr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield SN(e,n,r,VE(),i);return h9(e,o,_I())})}_openRedirect(e,n,r,i){return p(this,null,function*(){yield this._originValidation(e);let s=yield SN(e,n,r,VE(),i);return b3(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Kr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return p(this,null,function*(){let n=yield o9(e),r=new XE(e);return n.register("authEvent",i=>(Z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(LE,{type:LE},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[LE];o!==void 0&&n(!!o),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Q3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return HN()||oI()||Bp()}},sP=JE;var AN="@firebase/auth",RN="1.5.1";var eI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function _9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function v9(t){Pi(new bn("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zN(t)},l=new qE(r,i,s,c);return r3(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Pi(new bn("auth-internal",e=>{let n=Vi(e.getProvider("auth").getImmediate());return(r=>new eI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),it(AN,RN,_9(t)),it(AN,RN,"esm2017")}var w9=5*60,E9=yE("authIdTokenMaxAge")||w9,MN=null,I9=t=>e=>p(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>E9)return;let i=n?.token;MN!==i&&(MN=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function wI(t=Sa()){let e=$l(t,"auth");if(e.isInitialized())return e.getImmediate();let n=aI(t,{popupRedirectResolver:sP,persistence:[nP,XN,yI]}),r=yE("authTokenSyncURL");if(r){let s=I9(r);pI(n,s,()=>s(n.currentUser)),fI(n,o=>s(o))}let i=Qx("auth");return i&&cI(n,`http://${i}`),n}v9("Browser");var oP="auth",zs=class{constructor(e){return e}},Zl=class{constructor(){return Hl(oP)}};var EI=new x("angularfire2.auth-instances");function u6(t,e){let n=_p(oP,t,e);return n&&new zs(n)}function d6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new zs(r)}}var h6={provide:Zl,deps:[[new mt,EI]]},f6={provide:zs,useFactory:u6,deps:[[new mt,EI],qr]},p6=(()=>{class t{constructor(){it("angularfire",Bs.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ce({type:t});static \u0275inj=ae({providers:[f6,h6]})}return t})();function mce(t,...e){return{ngModule:p6,providers:[{provide:EI,useFactory:d6(t),multi:!0,deps:[L,Ne,Ma,Us,[new mt,Ra],...e]}]}}var aP=Re(dI,!0);var II=Re(wI,!0);var cP=Re(mI,!0);var lP=Re(hI,!0);var uP=Re(vI,!0);var dP=Re(gI,!0);var _ce=(()=>{let e=class e{constructor(r,i,s){this.auth=r,this.ngZone=i,this.router=s,cP(this.auth,o=>{o&&(this.UserData=o)})}get userUid(){return II().currentUser?.uid||""}getAuthFire(){return this.auth.currentUser}Register(r,i){return aP(this.auth,r,i).then(s=>{this.UserData=s.user,this.ngZone.run(()=>{this.sendEmailVerification(),this.router.navigate(["/signIn"])})}).catch(s=>{window.alert(s.message)})}sendEmailVerification(){throw new Error("Method not implemented.")}Login(r,i){return lP(this.auth,r,i).then(s=>{this.UserData=s.user,this.ngZone.run(()=>{this.router.navigate(["/"])})}).catch(s=>{window.alert(s.message)})}googleSignIn(){return this.loginWithPopup(new lI)}loginWithPopup(r){return uP(this.auth,r).then(i=>(console.log("logged in",i),i)).catch(i=>{console.log(i)})}logout(){dP(this.auth).then(()=>this.router.navigate(["/signIn"]))}isSignedIn(){return II().currentUser!==null}};e.\u0275fac=function(i){return new(i||e)(y(zs),y(L),y($n))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var g6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zn={},N,zI=zI||{},J=g6||self;function tm(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function du(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function y6(t){return Object.prototype.hasOwnProperty.call(t,bI)&&t[bI]||(t[bI]=++_6)}var bI="closure_uid_"+(1e9*Math.random()>>>0),_6=0;function v6(t,e,n){return t.call.apply(t.bind,arguments)}function w6(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function St(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?St=v6:St=w6,St.apply(null,arguments)}function $p(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function dt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ji(){this.s=this.s,this.o=this.o}var E6=0;ji.prototype.s=!1;ji.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),E6!=0)&&y6(this)};ji.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var DP=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function qI(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function hP(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(tm(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function At(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var I6=function(){if(!J.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};J.addEventListener("test",n,e),J.removeEventListener("test",n,e)}catch{}return t}();function ru(t){return/^[\s\xa0]*$/.test(t)}function nm(){var t=J.navigator;return t&&(t=t.userAgent)?t:""}function wr(t){return nm().indexOf(t)!=-1}function GI(t){return GI[" "](t),t}GI[" "]=function(){};function b6(t,e){var n=d5;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var D6=wr("Opera"),La=wr("Trident")||wr("MSIE"),CP=wr("Edge"),AI=CP||La,TP=wr("Gecko")&&!(nm().toLowerCase().indexOf("webkit")!=-1&&!wr("Edge"))&&!(wr("Trident")||wr("MSIE"))&&!wr("Edge"),C6=nm().toLowerCase().indexOf("webkit")!=-1&&!wr("Edge");function SP(){var t=J.document;return t?t.documentMode:void 0}var RI;e:{if(Hp="",zp=function(){var t=nm();if(TP)return/rv:([^\);]+)(\)|;)/.exec(t);if(CP)return/Edge\/([\d\.]+)/.exec(t);if(La)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(C6)return/WebKit\/(\S+)/.exec(t);if(D6)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),zp&&(Hp=zp?zp[1]:""),La&&(qp=SP(),qp!=null&&qp>parseFloat(Hp))){RI=String(qp);break e}RI=Hp}var Hp,zp,qp,MI;J.document&&La?(DI=SP(),MI=DI||parseInt(RI,10)||void 0):MI=void 0;var DI,T6=MI;function iu(t,e){if(At.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(TP){e:{try{GI(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:S6[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&iu.$.h.call(this)}}dt(iu,At);var S6={2:"touch",3:"pen",4:"mouse"};iu.prototype.h=function(){iu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var hu="closure_listenable_"+(1e6*Math.random()|0),A6=0;function R6(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++A6,this.fa=this.ia=!1}function rm(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function WI(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function M6(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function AP(t){let e={};for(let n in t)e[n]=t[n];return e}var fP="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function RP(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<fP.length;s++)n=fP[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function im(t){this.src=t,this.g={},this.h=0}im.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=NI(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new R6(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function xI(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=DP(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(rm(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function NI(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var KI="closure_lm_"+(1e6*Math.random()|0),CI={};function MP(t,e,n,r,i){if(r&&r.once)return NP(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)MP(t,e[s],n,r,i);return null}return n=ZI(n),t&&t[hu]?t.O(e,n,du(r)?!!r.capture:!!r,i):xP(t,e,n,!1,r,i)}function xP(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=du(i)?!!i.capture:!!i,a=YI(t);if(a||(t[KI]=a=new im(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=x6(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)I6||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(OP(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function x6(){function t(n){return e.call(t.src,t.listener,n)}let e=N6;return t}function NP(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)NP(t,e[s],n,r,i);return null}return n=ZI(n),t&&t[hu]?t.P(e,n,du(r)?!!r.capture:!!r,i):xP(t,e,n,!0,r,i)}function PP(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)PP(t,e[s],n,r,i);else r=du(r)?!!r.capture:!!r,n=ZI(n),t&&t[hu]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=NI(s,n,r,i),-1<n&&(rm(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=YI(t))&&(e=t.g[e.toString()],t=-1,e&&(t=NI(e,n,r,i)),(n=-1<t?e[t]:null)&&QI(n))}function QI(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[hu])xI(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(OP(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=YI(e))?(xI(n,t),n.h==0&&(n.src=null,e[KI]=null)):rm(t)}}}function OP(t){return t in CI?CI[t]:CI[t]="on"+t}function N6(t,e){if(t.fa)t=!0;else{e=new iu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&QI(t),t=n.call(r,e)}return t}function YI(t){return t=t[KI],t instanceof im?t:null}var TI="__closure_events_fn_"+(1e9*Math.random()>>>0);function ZI(t){return typeof t=="function"?t:(t[TI]||(t[TI]=function(e){return t.handleEvent(e)}),t[TI])}function ut(){ji.call(this),this.i=new im(this),this.S=this,this.J=null}dt(ut,ji);ut.prototype[hu]=!0;ut.prototype.removeEventListener=function(t,e,n,r){PP(this,t,e,n,r)};function _t(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new At(e,t);else if(e instanceof At)e.target=e.target||t;else{var i=e;e=new At(r,t),RP(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Gp(o,r,!0,e)&&i}if(o=e.g=t,i=Gp(o,r,!0,e)&&i,i=Gp(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Gp(o,r,!1,e)&&i}ut.prototype.N=function(){if(ut.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)rm(n[r]);delete t.g[e],t.h--}}this.J=null};ut.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ut.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Gp(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&xI(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var XI=J.JSON.stringify,PI=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function P6(){var t=JI;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var OI=class{constructor(){this.h=this.g=null}add(e,n){let r=kP.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},kP=new PI(()=>new kI,t=>t.reset()),kI=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function O6(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function k6(t){J.setTimeout(()=>{throw t},0)}var su,ou=!1,JI=new OI,FP=()=>{let t=J.Promise.resolve(void 0);su=()=>{t.then(F6)}},F6=()=>{for(var t;t=P6();){try{t.h.call(t.g)}catch(n){k6(n)}var e=kP;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ou=!1};function sm(t,e){ut.call(this),this.h=t||1,this.g=e||J,this.j=St(this.qb,this),this.l=Date.now()}dt(sm,ut);N=sm.prototype;N.ga=!1;N.T=null;N.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),_t(this,"tick"),this.ga&&(eb(this),this.start()))}};N.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function eb(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}N.N=function(){sm.$.N.call(this),eb(this),delete this.g};function tb(t,e,n){if(typeof t=="function")n&&(t=St(t,n));else if(t&&typeof t.handleEvent=="function")t=St(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:J.setTimeout(t,e||0)}function LP(t){t.g=tb(()=>{t.g=null,t.i&&(t.i=!1,LP(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var FI=class extends ji{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:LP(this)}N(){super.N(),this.g&&(J.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function au(t){ji.call(this),this.h=t,this.g={}}dt(au,ji);var pP=[];function VP(t,e,n,r){Array.isArray(n)||(n&&(pP[0]=n.toString()),n=pP);for(var i=0;i<n.length;i++){var s=MP(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function jP(t){WI(t.g,function(e,n){this.g.hasOwnProperty(n)&&QI(e)},t),t.g={}}au.prototype.N=function(){au.$.N.call(this),jP(this)};au.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function om(){this.g=!0}om.prototype.Ea=function(){this.g=!1};function L6(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function V6(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function ka(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+B6(t,n)+(r?" "+r:"")})}function j6(t,e){t.info(function(){return"TIMEOUT: "+e})}om.prototype.info=function(){};function B6(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return XI(n)}catch{return e}}var Ks={},mP=null;function am(){return mP=mP||new ut}Ks.Ta="serverreachability";function BP(t){At.call(this,Ks.Ta,t)}dt(BP,At);function cu(t){let e=am();_t(e,new BP(e))}Ks.STAT_EVENT="statevent";function UP(t,e){At.call(this,Ks.STAT_EVENT,t),this.stat=e}dt(UP,At);function jt(t){let e=am();_t(e,new UP(e,t))}Ks.Ua="timingevent";function $P(t,e){At.call(this,Ks.Ua,t),this.size=e}dt($P,At);function fu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return J.setTimeout(function(){t()},e)}var cm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},HP={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function nb(){}nb.prototype.h=null;function gP(t){return t.h||(t.h=t.i())}function zP(){}var pu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function rb(){At.call(this,"d")}dt(rb,At);function ib(){At.call(this,"c")}dt(ib,At);var LI;function lm(){}dt(lm,nb);lm.prototype.g=function(){return new XMLHttpRequest};lm.prototype.i=function(){return{}};LI=new lm;function mu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new au(this),this.P=U6,t=AI?125:void 0,this.V=new sm(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new qP}function qP(){this.i=null,this.g="",this.h=!1}var U6=45e3,GP={},VI={};N=mu.prototype;N.setTimeout=function(t){this.P=t};function jI(t,e,n){t.L=1,t.A=dm(Yr(e)),t.u=n,t.S=!0,WP(t,null)}function WP(t,e){t.G=Date.now(),gu(t),t.B=Yr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),tO(n.i,"t",r),t.o=0,n=t.l.J,t.h=new qP,t.g=IO(t.l,n?e:null,!t.u),0<t.O&&(t.M=new FI(St(t.Pa,t,t.g),t.O)),VP(t.U,t.g,"readystatechange",t.nb),e=t.I?AP(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),cu(),L6(t.j,t.v,t.B,t.m,t.W,t.u)}N.nb=function(t){t=t.target;let e=this.M;e&&Er(t)==3?e.l():this.Pa(t)};N.Pa=function(t){try{if(t==this.g)e:{let u=Er(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||AI||this.g&&(this.h.h||this.g.ja()||wP(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?cu(3):cu(2)),um(this);var n=this.g.da();this.ca=n;t:if(KP(this)){var r=wP(this.g);t="";var i=r.length,s=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qs(this),nu(this);var o="";break t}this.h.i=new J.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,V6(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ru(a)){var l=a;break t}}l=null}if(n=l)ka(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,BI(this,n);else{this.i=!1,this.s=3,jt(12),qs(this),nu(this);break e}}this.S?(QP(this,u,o),AI&&this.i&&u==3&&(VP(this.U,this.V,"tick",this.mb),this.V.start())):(ka(this.j,this.m,o,null),BI(this,o)),u==4&&qs(this),this.i&&!this.J&&(u==4?_O(this.l,this):(this.i=!1,gu(this)))}else c5(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),qs(this),nu(this)}}}catch{}finally{}};function KP(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function QP(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=$6(t,n),i==VI){e==4&&(t.s=4,jt(14),r=!1),ka(t.j,t.m,null,"[Incomplete Response]");break}else if(i==GP){t.s=4,jt(15),ka(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ka(t.j,t.m,i,null),BI(t,i);KP(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,jt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ub(e),e.M=!0,jt(11))):(ka(t.j,t.m,n,"[Invalid Chunked Response]"),qs(t),nu(t))}N.mb=function(){if(this.g){var t=Er(this.g),e=this.g.ja();this.o<e.length&&(um(this),QP(this,t,e),this.i&&t!=4&&gu(this))}};function $6(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?VI:(n=Number(e.substring(n,r)),isNaN(n)?GP:(r+=1,r+n>e.length?VI:(e=e.slice(r,r+n),t.o=r+n,e)))}N.cancel=function(){this.J=!0,qs(this)};function gu(t){t.Y=Date.now()+t.P,YP(t,t.P)}function YP(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=fu(St(t.lb,t),e)}function um(t){t.C&&(J.clearTimeout(t.C),t.C=null)}N.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(j6(this.j,this.B),this.L!=2&&(cu(),jt(17)),qs(this),this.s=2,nu(this)):YP(this,this.Y-t)};function nu(t){t.l.H==0||t.J||_O(t.l,t)}function qs(t){um(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,eb(t.V),jP(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function BI(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||UI(n.i,t))){if(!t.K&&UI(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Zp(n),pm(n);else break e;lb(n),jt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=fu(St(n.ib,n),6e3));if(1>=iO(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Gs(n,11)}else if((t.K||n.g==t)&&Zp(n),!ru(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var s=r.i;s.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(sb(s,s.h),s.h=null))}if(r.F){let g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,Le(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=EO(r,r.J?r.pa:null,r.Y),o.K){sO(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(um(a),gu(a)),r.g=o}else gO(r);0<n.j.length&&mm(n)}else l[0]!="stop"&&l[0]!="close"||Gs(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Gs(n,7):cb(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}cu(4)}catch{}}function H6(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(tm(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function z6(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(tm(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function ZP(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(tm(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=z6(t),r=H6(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var XP=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function q6(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ws(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ws){this.h=t.h,Qp(this,t.j),this.s=t.s,this.g=t.g,Yp(this,t.m),this.l=t.l;var e=t.i,n=new lu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),yP(this,n),this.o=t.o}else t&&(e=String(t).match(XP))?(this.h=!1,Qp(this,e[1]||"",!0),this.s=eu(e[2]||""),this.g=eu(e[3]||"",!0),Yp(this,e[4]),this.l=eu(e[5]||"",!0),yP(this,e[6]||"",!0),this.o=eu(e[7]||"")):(this.h=!1,this.i=new lu(null,this.h))}Ws.prototype.toString=function(){var t=[],e=this.j;e&&t.push(tu(e,_P,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(tu(e,_P,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(tu(n,n.charAt(0)=="/"?K6:W6,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",tu(n,Y6)),t.join("")};function Yr(t){return new Ws(t)}function Qp(t,e,n){t.j=n?eu(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Yp(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function yP(t,e,n){e instanceof lu?(t.i=e,Z6(t.i,t.h)):(n||(e=tu(e,Q6)),t.i=new lu(e,t.h))}function Le(t,e,n){t.i.set(e,n)}function dm(t){return Le(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function eu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function tu(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,G6),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function G6(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var _P=/[#\/\?@]/g,W6=/[#\?:]/g,K6=/[#\?]/g,Q6=/[#\?@]/g,Y6=/#/g;function lu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Bi(t){t.g||(t.g=new Map,t.h=0,t.i&&q6(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}N=lu.prototype;N.add=function(t,e){Bi(this),this.i=null,t=Va(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function JP(t,e){Bi(t),e=Va(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function eO(t,e){return Bi(t),e=Va(t,e),t.g.has(e)}N.forEach=function(t,e){Bi(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};N.ta=function(){Bi(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};N.Z=function(t){Bi(this);let e=[];if(typeof t=="string")eO(this,t)&&(e=e.concat(this.g.get(Va(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};N.set=function(t,e){return Bi(this),this.i=null,t=Va(this,t),eO(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};N.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function tO(t,e,n){JP(t,e),0<n.length&&(t.i=null,t.g.set(Va(t,e),qI(n)),t.h+=n.length)}N.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Va(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Z6(t,e){e&&!t.j&&(Bi(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(JP(this,r),tO(this,i,n))},t)),t.j=e}var X6=class{constructor(t,e){this.g=t,this.map=e}};function nO(t){this.l=t||J6,J.PerformanceNavigationTiming?(t=J.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(J.g&&J.g.Ka&&J.g.Ka()&&J.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var J6=10;function rO(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function iO(t){return t.h?1:t.g?t.g.size:0}function UI(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function sb(t,e){t.g?t.g.add(e):t.h=e}function sO(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}nO.prototype.cancel=function(){if(this.i=oO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function oO(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return qI(t.i)}var e5=class{stringify(t){return J.JSON.stringify(t,void 0)}parse(t){return J.JSON.parse(t,void 0)}};function t5(){this.g=new e5}function n5(t,e,n){let r=n||"";try{ZP(t,function(i,s){let o=i;du(i)&&(o=XI(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function r5(t,e){let n=new om;if(J.Image){let r=new Image;r.onload=$p(Wp,n,r,"TestLoadImage: loaded",!0,e),r.onerror=$p(Wp,n,r,"TestLoadImage: error",!1,e),r.onabort=$p(Wp,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=$p(Wp,n,r,"TestLoadImage: timeout",!1,e),J.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Wp(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function yu(t){this.l=t.ec||null,this.j=t.ob||!1}dt(yu,nb);yu.prototype.g=function(){return new hm(this.l,this.j)};yu.prototype.i=function(t){return function(){return t}}({});function hm(t,e){ut.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=ob,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dt(hm,ut);var ob=0;N=hm.prototype;N.open=function(t,e){if(this.readyState!=ob)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,uu(this)};N.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||J).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};N.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_u(this)),this.readyState=ob};N.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,uu(this)),this.g&&(this.readyState=3,uu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof J.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;aO(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function aO(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}N.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?_u(this):uu(this),this.readyState==3&&aO(this)}};N.Za=function(t){this.g&&(this.response=this.responseText=t,_u(this))};N.Ya=function(t){this.g&&(this.response=t,_u(this))};N.ka=function(){this.g&&_u(this)};function _u(t){t.readyState=4,t.l=null,t.j=null,t.A=null,uu(t)}N.setRequestHeader=function(t,e){this.v.append(t,e)};N.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};N.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function uu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(hm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var i5=J.JSON.parse;function Ge(t){ut.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=cO,this.L=this.M=!1}dt(Ge,ut);var cO="",s5=/^https?$/i,o5=["POST","PUT"];N=Ge.prototype;N.Oa=function(t){this.M=t};N.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():LI.g(),this.C=this.u?gP(this.u):gP(LI),this.g.onreadystatechange=St(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){vP(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=J.FormData&&t instanceof J.FormData,!(0<=DP(o5,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{dO(this),0<this.B&&((this.L=a5(this.g))?(this.g.timeout=this.B,this.g.ontimeout=St(this.ua,this)):this.A=tb(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){vP(this,s)}};function a5(t){return La&&typeof t.timeout=="number"&&t.ontimeout!==void 0}N.ua=function(){typeof zI<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_t(this,"timeout"),this.abort(8))};function vP(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,lO(t),fm(t)}function lO(t){t.F||(t.F=!0,_t(t,"complete"),_t(t,"error"))}N.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,_t(this,"complete"),_t(this,"abort"),fm(this))};N.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fm(this,!0)),Ge.$.N.call(this)};N.La=function(){this.s||(this.G||this.v||this.l?uO(this):this.kb())};N.kb=function(){uO(this)};function uO(t){if(t.h&&typeof zI<"u"&&(!t.C[1]||Er(t)!=4||t.da()!=2)){if(t.v&&Er(t)==4)tb(t.La,0,t);else if(_t(t,"readystatechange"),Er(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(XP)[1]||null;!i&&J.self&&J.self.location&&(i=J.self.location.protocol.slice(0,-1)),r=!s5.test(i?i.toLowerCase():"")}n=r}if(n)_t(t,"complete"),_t(t,"success");else{t.m=6;try{var s=2<Er(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",lO(t)}}finally{fm(t)}}}}function fm(t,e){if(t.g){dO(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||_t(t,"ready");try{n.onreadystatechange=r}catch{}}}function dO(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(J.clearTimeout(t.A),t.A=null)}N.isActive=function(){return!!this.g};function Er(t){return t.g?t.g.readyState:0}N.da=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}};N.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};N.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),i5(e)}};function wP(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case cO:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function c5(t){let e={};t=(t.g&&2<=Er(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(ru(t[r]))continue;var n=O6(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}M6(e,function(r){return r.join(", ")})}N.Ia=function(){return this.m};N.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function hO(t){let e="";return WI(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function ab(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=hO(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Le(t,e,n))}function Xl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function fO(t){this.Ga=0,this.j=[],this.l=new om,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Xl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Xl("baseRetryDelayMs",5e3,t),this.hb=Xl("retryDelaySeedMs",1e4,t),this.eb=Xl("forwardChannelMaxRetries",2,t),this.xa=Xl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new nO(t&&t.concurrentRequestLimit),this.Ja=new t5,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}N=fO.prototype;N.ra=8;N.H=1;function cb(t){if(pO(t),t.H==3){var e=t.W++,n=Yr(t.I);if(Le(n,"SID",t.K),Le(n,"RID",e),Le(n,"TYPE","terminate"),vu(t,n),e=new mu(t,t.l,e),e.L=2,e.A=dm(Yr(n)),n=!1,J.navigator&&J.navigator.sendBeacon)try{n=J.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&J.Image&&(new Image().src=e.A,n=!0),n||(e.g=IO(e.l,null),e.g.ha(e.A)),e.G=Date.now(),gu(e)}wO(t)}function pm(t){t.g&&(ub(t),t.g.cancel(),t.g=null)}function pO(t){pm(t),t.u&&(J.clearTimeout(t.u),t.u=null),Zp(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&J.clearTimeout(t.m),t.m=null)}function mm(t){if(!rO(t.i)&&!t.m){t.m=!0;var e=t.Na;su||FP(),ou||(su(),ou=!0),JI.add(e,t),t.C=0}}function l5(t,e){return iO(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=fu(St(t.Na,t,e),vO(t,t.C)),t.C++,!0)}N.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new mu(this,this.l,t),s=this.s;if(this.U&&(s?(s=AP(s),RP(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=mO(this,i,e),n=Yr(this.I),Le(n,"RID",t),Le(n,"CVER",22),this.F&&Le(n,"X-HTTP-Session-Id",this.F),vu(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(hO(s)))+"&"+e:this.o&&ab(n,this.o,s)),sb(this.i,i),this.bb&&Le(n,"TYPE","init"),this.P?(Le(n,"$req",e),Le(n,"SID","null"),i.aa=!0,jI(i,n,null)):jI(i,n,e),this.H=2}}else this.H==3&&(t?EP(this,t):this.j.length==0||rO(this.i)||EP(this))};function EP(t,e){var n;e?n=e.m:n=t.W++;let r=Yr(t.I);Le(r,"SID",t.K),Le(r,"RID",n),Le(r,"AID",t.V),vu(t,r),t.o&&t.s&&ab(r,t.o,t.s),n=new mu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=mO(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),sb(t.i,n),jI(n,r,e)}function vu(t,e){t.na&&WI(t.na,function(n,r){Le(e,r,n)}),t.h&&ZP({},function(n,r){Le(e,r,n)})}function mO(t,e,n){n=Math.min(t.j.length,n);var r=t.h?St(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let l=i[c].g,u=i[c].map;if(l-=s,0>l)s=Math.max(0,i[c].g-100),a=!1;else try{n5(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function gO(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;su||FP(),ou||(su(),ou=!0),JI.add(e,t),t.A=0}}function lb(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=fu(St(t.Ma,t),vO(t,t.A)),t.A++,!0)}N.Ma=function(){if(this.u=null,yO(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=fu(St(this.jb,this),t)}};N.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,jt(10),pm(this),yO(this))};function ub(t){t.B!=null&&(J.clearTimeout(t.B),t.B=null)}function yO(t){t.g=new mu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Yr(t.wa);Le(e,"RID","rpc"),Le(e,"SID",t.K),Le(e,"AID",t.V),Le(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Le(e,"TO",t.qa),Le(e,"TYPE","xmlhttp"),vu(t,e),t.o&&t.s&&ab(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=dm(Yr(e)),n.u=null,n.S=!0,WP(n,t)}N.ib=function(){this.v!=null&&(this.v=null,pm(this),lb(this),jt(19))};function Zp(t){t.v!=null&&(J.clearTimeout(t.v),t.v=null)}function _O(t,e){var n=null;if(t.g==e){Zp(t),ub(t),t.g=null;var r=2}else if(UI(t.i,e))n=e.F,sO(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=am(),_t(r,new $P(r,n)),mm(t)}else gO(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&l5(t,e)||r==2&&lb(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Gs(t,5);break;case 4:Gs(t,10);break;case 3:Gs(t,6);break;default:Gs(t,2)}}}function vO(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Gs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=St(t.pb,t);n||(n=new Ws("//www.google.com/images/cleardot.gif"),J.location&&J.location.protocol=="http"||Qp(n,"https"),dm(n)),r5(n.toString(),r)}else jt(2);t.H=0,t.h&&t.h.za(e),wO(t),pO(t)}N.pb=function(t){t?(this.l.info("Successfully pinged google.com"),jt(2)):(this.l.info("Failed to ping google.com"),jt(1))};function wO(t){if(t.H=0,t.ma=[],t.h){let e=oO(t.i);(e.length!=0||t.j.length!=0)&&(hP(t.ma,e),hP(t.ma,t.j),t.i.i.length=0,qI(t.j),t.j.length=0),t.h.ya()}}function EO(t,e,n){var r=n instanceof Ws?Yr(n):new Ws(n);if(r.g!="")e&&(r.g=e+"."+r.g),Yp(r,r.m);else{var i=J.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ws(null);r&&Qp(s,r),e&&(s.g=e),i&&Yp(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Le(r,n,e),Le(r,"VER",t.ra),vu(t,r),r}function IO(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Ge(new yu({ob:n})):new Ge(t.va),e.Oa(t.J),e}N.isActive=function(){return!!this.h&&this.h.isActive(this)};function bO(){}N=bO.prototype;N.Ba=function(){};N.Aa=function(){};N.za=function(){};N.ya=function(){};N.isActive=function(){return!0};N.Va=function(){};function Xp(){if(La&&!(10<=Number(T6)))throw Error("Environmental error: no available transport.")}Xp.prototype.g=function(t,e){return new rn(t,e)};function rn(t,e){ut.call(this),this.g=new fO(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ru(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ru(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ja(this)}dt(rn,ut);rn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;jt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=EO(t,null,t.Y),mm(t)};rn.prototype.close=function(){cb(this.g)};rn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=XI(t),t=n);e.j.push(new X6(e.fb++,t)),e.H==3&&mm(e)};rn.prototype.N=function(){this.g.h=null,delete this.j,cb(this.g),delete this.g,rn.$.N.call(this)};function DO(t){rb.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}dt(DO,rb);function CO(){ib.call(this),this.status=1}dt(CO,ib);function ja(t){this.g=t}dt(ja,bO);ja.prototype.Ba=function(){_t(this.g,"a")};ja.prototype.Aa=function(t){_t(this.g,new DO(t))};ja.prototype.za=function(t){_t(this.g,new CO)};ja.prototype.ya=function(){_t(this.g,"b")};function u5(){this.blockSize=-1}function Hn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}dt(Hn,u5);Hn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function SI(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Hn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)SI(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){SI(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){SI(this,r),i=0;break}}this.h=i,this.i+=e};Hn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Te(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var d5={};function db(t){return-128<=t&&128>t?b6(t,function(e){return new Te([e|0],0>e?-1:0)}):new Te([t|0],0>t?-1:0)}function Ir(t){if(isNaN(t)||!isFinite(t))return Fa;if(0>t)return yt(Ir(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=$I;return new Te(e,0)}function TO(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return yt(TO(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ir(Math.pow(e,8)),r=Fa,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Ir(Math.pow(e,s)),r=r.R(s).add(Ir(o))):(r=r.R(n),r=r.add(Ir(o)))}return r}var $I=4294967296,Fa=db(0),HI=db(1),IP=db(16777216);N=Te.prototype;N.ea=function(){if(Cn(this))return-yt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:$I+r)*e,e*=$I}return t};N.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Qr(this))return"0";if(Cn(this))return"-"+yt(this).toString(t);for(var e=Ir(Math.pow(t,6)),n=this,r="";;){var i=em(n,e).g;n=Jp(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Qr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};N.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Qr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Cn(t){return t.h==-1}N.X=function(t){return t=Jp(this,t),Cn(t)?-1:Qr(t)?0:1};function yt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Te(n,~t.h).add(HI)}N.abs=function(){return Cn(this)?yt(this):this};N.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Te(n,n[n.length-1]&-2147483648?-1:0)};function Jp(t,e){return t.add(yt(e))}N.R=function(t){if(Qr(this)||Qr(t))return Fa;if(Cn(this))return Cn(t)?yt(this).R(yt(t)):yt(yt(this).R(t));if(Cn(t))return yt(this.R(yt(t)));if(0>this.X(IP)&&0>t.X(IP))return Ir(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,Kp(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Kp(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Kp(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Kp(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Te(n,0)};function Kp(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Jl(t,e){this.g=t,this.h=e}function em(t,e){if(Qr(e))throw Error("division by zero");if(Qr(t))return new Jl(Fa,Fa);if(Cn(t))return e=em(yt(t),e),new Jl(yt(e.g),yt(e.h));if(Cn(e))return e=em(t,yt(e)),new Jl(yt(e.g),e.h);if(30<t.g.length){if(Cn(t)||Cn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=HI,r=e;0>=r.X(t);)n=bP(n),r=bP(r);var i=Oa(n,1),s=Oa(r,1);for(r=Oa(r,2),n=Oa(n,2);!Qr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Oa(r,1),n=Oa(n,1)}return e=Jp(t,i.R(e)),new Jl(i,e)}for(i=Fa;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Ir(n),o=s.R(e);Cn(o)||0<o.X(t);)n-=r,s=Ir(n),o=s.R(e);Qr(s)&&(s=HI),i=i.add(s),t=Jp(t,o)}return new Jl(i,t)}N.gb=function(t){return em(this,t).h};N.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Te(n,this.h&t.h)};N.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Te(n,this.h|t.h)};N.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Te(n,this.h^t.h)};function bP(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Te(n,t.h)}function Oa(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Te(i,t.h)}Xp.prototype.createWebChannel=Xp.prototype.g;rn.prototype.send=rn.prototype.u;rn.prototype.open=rn.prototype.m;rn.prototype.close=rn.prototype.close;cm.NO_ERROR=0;cm.TIMEOUT=8;cm.HTTP_ERROR=6;HP.COMPLETE="complete";zP.EventType=pu;pu.OPEN="a";pu.CLOSE="b";pu.ERROR="c";pu.MESSAGE="d";ut.prototype.listen=ut.prototype.O;Ge.prototype.listenOnce=Ge.prototype.P;Ge.prototype.getLastError=Ge.prototype.Sa;Ge.prototype.getLastErrorCode=Ge.prototype.Ia;Ge.prototype.getStatus=Ge.prototype.da;Ge.prototype.getResponseJson=Ge.prototype.Wa;Ge.prototype.getResponseText=Ge.prototype.ja;Ge.prototype.send=Ge.prototype.ha;Ge.prototype.setWithCredentials=Ge.prototype.Oa;Hn.prototype.digest=Hn.prototype.l;Hn.prototype.reset=Hn.prototype.reset;Hn.prototype.update=Hn.prototype.j;Te.prototype.add=Te.prototype.add;Te.prototype.multiply=Te.prototype.R;Te.prototype.modulo=Te.prototype.gb;Te.prototype.compare=Te.prototype.X;Te.prototype.toNumber=Te.prototype.ea;Te.prototype.toString=Te.prototype.toString;Te.prototype.getBits=Te.prototype.D;Te.fromNumber=Ir;Te.fromString=TO;var SO=zn.createWebChannelTransport=function(){return new Xp},AO=zn.getStatEventTarget=function(){return am()},gm=zn.ErrorCode=cm,RO=zn.EventType=HP,MO=zn.Event=Ks,hb=zn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},wce=zn.FetchXmlHttpFactory=yu,wu=zn.WebChannel=zP,xO=zn.XhrIo=Ge,NO=zn.Md5=Hn,Qs=zn.Integer=Te;var PO="@firebase/firestore";var ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");var hc="10.7.2";var oo=new xi("@firebase/firestore");function za(){return oo.logLevel}function D(t,...e){if(oo.logLevel<=ge.DEBUG){let n=e.map(h0);oo.debug(`Firestore (${hc}): ${t}`,...n)}}function Ze(t,...e){if(oo.logLevel<=ge.ERROR){let n=e.map(h0);oo.error(`Firestore (${hc}): ${t}`,...n)}}function Pu(t,...e){if(oo.logLevel<=ge.WARN){let n=e.map(h0);oo.warn(`Firestore (${hc}): ${t}`,...n)}}function h0(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function O(t="Unexpected state"){let e=`FIRESTORE (${hc}) INTERNAL ASSERTION FAILED: `+t;throw Ze(e),new Error(e)}function B(t,e){t||O()}function V(t,e){return t}var w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},A=class extends nn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Sn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var vb=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},wb=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}};var Eb=class{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new Sn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Sn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Sn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(B(typeof r.accessToken=="string"),new vb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return B(e===null||typeof e=="string"),new ht(e)}},Ib=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},bb=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Ib(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Db=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Cb=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,D("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(B(typeof n.token=="string"),this.R=n.token,new Db(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function h5(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Tm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=h5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ie(t,e){return t<e?-1:t>e?1:0}function Ja(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Pk(t){return t+"\0"}var Xe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new A(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new A(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new A(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new A(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var q=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Xe(0,0))}static max(){return new t(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Sm=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&O(),r===void 0?r=e.length-n:r>e.length-n&&O(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Me=class t extends Sm{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new A(w.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},f5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,st=class t extends Sm{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return f5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new A(w.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new A(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new A(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new A(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var P=class t{constructor(e){this.path=e}static fromPath(e){return new t(Me.fromString(e))}static fromName(e){return new t(Me.fromString(e).popFirst(5))}static empty(){return new t(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Me(e.slice()))}};var ec=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function Tb(t){return t.fields.find(e=>e.kind===2)}function Zs(t){return t.fields.filter(e=>e.kind!==2)}ec.UNKNOWN_ID=-1;var Ya=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Ou=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,An.min())}};function Ok(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=q.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new An(i,P.empty(),e)}function kk(t){return new An(t.readTime,t.key,-1)}var An=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(q.min(),P.empty(),-1)}static max(){return new t(q.max(),P.empty(),-1)}};function f0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=P.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}var Fk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Am=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ts(t){return p(this,null,function*(){if(t.code!==w.FAILED_PRECONDITION||t.message!==Fk)throw t;D("LocalStore","Unexpectedly lost primary lease")})}var _=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&O(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var Rm=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Sn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new io(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=p0(r.target.error);this.V.reject(new io(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new io(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(D("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Ab(n)}},ao=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(qe())===12.2&&Ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return D("SimpleDb","Removing database:",e),Xs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!fp())return!1;if(t.C())return!0;let e=qe(),n=t.S(e),r=0<n&&n<10,i=t.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return p(this,null,function*(){return this.db||(D("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new io(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new A(w.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new A(w.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new io(e,o))},i.onupgradeneeded=s=>{D("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{D("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return p(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=Rm.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),_.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(D("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Sb=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Xs(this.k.delete())}},io=class extends A{constructor(e,n){super(w.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ns(t){return t.name==="IndexedDbTransactionError"}var Ab=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(D("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(D("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Xs(r)}add(e){return D("SimpleDb","ADD",this.store.name,e,e),Xs(this.store.add(e))}get(e){return Xs(this.store.get(e)).next(n=>(n===void 0&&(n=null),D("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return D("SimpleDb","DELETE",this.store.name,e),Xs(this.store.delete(e))}count(){return D("SimpleDb","COUNT",this.store.name),Xs(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new _((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new _((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){D("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new _((r,i)=>{n.onerror=s=>{let o=p0(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){let r=[];return new _((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new Sb(a),l=n(a.primaryKey,a.value,c);if(l instanceof _){let u=l.catch(d=>(c.done(),_.reject(d)));r.push(u)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>_.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Xs(t){return new _((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=p0(r.target.error);n(i)}})}var OO=!1;function p0(t){let e=ao.S(qe());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new A("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return OO||(OO=!0,setTimeout(()=>{throw r},0)),r}}return t}var Rb=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){D("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>p(this,null,function*(){this.task=null;try{D("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){ns(n)?D("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield ts(n)}yield this.ee(6e4)}))}},Mb=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return p(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,s=!0;return _.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return D("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(D("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{let o=kk(s);f0(o,r)>0&&(r=o)}),new An(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var sn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function bg(t){return t==null}function ku(t){return t===0&&1/t==-1/0}function Lk(t){return typeof t=="number"&&Number.isInteger(t)&&!ku(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Ut(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=kO(e)),e=p5(t.get(n),e);return kO(e)}function p5(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function kO(t){return t+""}function br(t){let e=t.length;if(B(e>=2),e===2)return B(t.charAt(0)===""&&t.charAt(1)===""),Me.emptyPath();let n=e-2,r=[],i="";for(let s=0;s<e;){let o=t.indexOf("",s);switch((o<0||o>n)&&O(),t.charAt(o+1)){case"":let a=t.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:O()}s=o+2}return new Me(r)}var FO=["userId","batchId"];function Em(t,e){return[t,Ut(e)]}function Vk(t,e,n){return[t,Ut(e),n]}var m5={},g5=["prefixPath","collectionGroup","readTime","documentId"],y5=["prefixPath","collectionGroup","documentId"],_5=["collectionGroup","readTime","prefixPath","documentId"],v5=["canonicalId","targetId"],w5=["targetId","path"],E5=["path","targetId"],I5=["collectionId","parent"],b5=["indexId","uid"],D5=["uid","sequenceNumber"],C5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],T5=["indexId","uid","orderedDocumentKey"],S5=["userId","collectionPath","documentId"],A5=["userId","collectionPath","largestBatchId"],R5=["userId","collectionGroup","largestBatchId"],jk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],M5=[...jk,"documentOverlays"],Bk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Uk=Bk,x5=[...Uk,"indexConfiguration","indexState","indexEntries"];var Fu=class extends Am{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function ft(t,e){let n=V(t);return ao.M(n.ae,e)}function LO(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _o(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $k(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ve=class t{constructor(e,n){this.comparator=e,this.root=n||Cr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Cr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qa(this.root,e,this.comparator,!0)}},Qa=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Cr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw O();let e=this.left.check();if(e!==this.right.check())throw O();return e+(this.isRed()?0:1)}};Cr.EMPTY=null,Cr.RED=!0,Cr.BLACK=!1;Cr.EMPTY=new class{constructor(){this.size=0}get key(){throw O()}get value(){throw O()}get color(){throw O()}get left(){throw O()}get right(){throw O()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Cr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Pe=class t{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mm(this.data.getIterator())}getIteratorFrom(e){return new Mm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Mm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ba(t){return t.hasNext()?t.getNext():void 0}var on=class t{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new t([])}unionWith(e){let n=new Pe(st.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ja(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var xm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Et=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new xm("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Et.EMPTY_BYTE_STRING=new Et("");var N5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gi(t){if(B(!!t),typeof t=="string"){let e=0,n=N5.exec(t);if(B(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wi(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}function m0(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function g0(t){let e=t.mapValue.fields.__previous_value__;return m0(e)?g0(e):e}function Lu(t){let e=Gi(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}var xb=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},tc=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var zi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Im={nullValue:"NULL_VALUE"};function co(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?m0(t)?4:Hk(t)?9007199254740991:10:O()}function Tr(t,e){if(t===e)return!0;let n=co(t);if(n!==co(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lu(t).isEqual(Lu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Gi(i.timestampValue),a=Gi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Wi(i.bytesValue).isEqual(Wi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return We(i.geoPointValue.latitude)===We(s.geoPointValue.latitude)&&We(i.geoPointValue.longitude)===We(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return We(i.integerValue)===We(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=We(i.doubleValue),a=We(s.doubleValue);return o===a?ku(o)===ku(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ja(t.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(LO(o)!==LO(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Tr(o[c],a[c])))return!1;return!0}(t,e);default:return O()}}function Vu(t,e){return(t.values||[]).find(n=>Tr(n,e))!==void 0}function Ki(t,e){if(t===e)return 0;let n=co(t),r=co(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=We(s.integerValue||s.doubleValue),c=We(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return VO(t.timestampValue,e.timestampValue);case 4:return VO(Lu(t),Lu(e));case 5:return ie(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Wi(s),c=Wi(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=ie(a[l],c[l]);if(u!==0)return u}return ie(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ie(We(s.latitude),We(o.latitude));return a!==0?a:ie(We(s.longitude),We(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=Ki(a[l],c[l]);if(u)return u}return ie(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===zi.mapValue&&o===zi.mapValue)return 0;if(s===zi.mapValue)return 1;if(o===zi.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=ie(c[d],u[d]);if(h!==0)return h;let f=Ki(a[c[d]],l[u[d]]);if(f!==0)return f}return ie(c.length,u.length)}(t.mapValue,e.mapValue);default:throw O()}}function VO(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);let n=Gi(t),r=Gi(e),i=ie(n.seconds,r.seconds);return i!==0?i:ie(n.nanos,r.nanos)}function nc(t){return Nb(t)}function Nb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Gi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return P.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Nb(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Nb(n.fields[o])}`;return i+"}"}(t.mapValue):O()}function ju(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Pb(t){return!!t&&"integerValue"in t}function Bu(t){return!!t&&"arrayValue"in t}function jO(t){return!!t&&"nullValue"in t}function BO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bm(t){return!!t&&"mapValue"in t}function Su(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return _o(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Su(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Su(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Hk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function P5(t){return"nullValue"in t?Im:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ju(tc.empty(),P.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:O()}function O5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ju(tc.empty(),P.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?zi:O()}function UO(t,e){let n=Ki(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function $O(t,e){let n=Ki(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Bt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Su(n)}setAll(e){let n=st.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Su(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());bm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];bm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){_o(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Su(this.value))}};function zk(t){let e=[];return _o(t.fields,(n,r)=>{let i=new st([n]);if(bm(r)){let s=zk(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new on(e)}var wt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,q.min(),q.min(),q.min(),Bt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,q.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,q.min(),q.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,q.min(),q.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Qi=class{constructor(e,n){this.position=e,this.inclusive=n}};function HO(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=P.comparator(P.fromName(o.referenceValue),n.key):r=Ki(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function zO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tr(t.position[n],e.position[n]))return!1;return!0}var lo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function k5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Nm=class{},_e=class t extends Nm{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Fb(e,n,r):n==="array-contains"?new jb(e,r):n==="in"?new Pm(e,r):n==="not-in"?new Bb(e,r):n==="array-contains-any"?new Ub(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Lb(e,r):new Vb(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ki(n,this.value)):n!==null&&co(this.value)===co(n)&&this.matchesComparison(Ki(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return O()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Se=class t extends Nm{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return rc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function rc(t){return t.op==="and"}function Ob(t){return t.op==="or"}function y0(t){return qk(t)&&rc(t)}function qk(t){for(let e of t.filters)if(e instanceof Se)return!1;return!0}function kb(t){if(t instanceof _e)return t.field.canonicalString()+t.op.toString()+nc(t.value);if(y0(t))return t.filters.map(e=>kb(e)).join(",");{let e=t.filters.map(n=>kb(n)).join(",");return`${t.op}(${e})`}}function Gk(t,e){return t instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.field.isEqual(i.field)&&Tr(r.value,i.value)}(t,e):t instanceof Se?function(r,i){return i instanceof Se&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Gk(o,i.filters[a]),!0):!1}(t,e):void O()}function Wk(t,e){let n=t.filters.concat(e);return Se.create(n,t.op)}function Kk(t){return t instanceof _e?function(n){return`${n.field.canonicalString()} ${n.op} ${nc(n.value)}`}(t):t instanceof Se?function(n){return n.op.toString()+" {"+n.getFilters().map(Kk).join(" ,")+"}"}(t):"Filter"}var Fb=class extends _e{constructor(e,n,r){super(e,n,r),this.key=P.fromName(r.referenceValue)}matches(e){let n=P.comparator(e.key,this.key);return this.matchesComparison(n)}},Lb=class extends _e{constructor(e,n){super(e,"in",n),this.keys=Qk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Vb=class extends _e{constructor(e,n){super(e,"not-in",n),this.keys=Qk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Qk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>P.fromName(r.referenceValue))}var jb=class extends _e{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Bu(n)&&Vu(n.arrayValue,this.value)}},Pm=class extends _e{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Vu(this.value.arrayValue,n)}},Bb=class extends _e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Vu(this.value.arrayValue,n)}},Ub=class extends _e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Bu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Vu(this.value.arrayValue,r))}};var $b=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function Hb(t,e=null,n=[],r=[],i=null,s=null,o=null){return new $b(t,e,n,r,i,s,o)}function uo(t){let e=V(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>kb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),bg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nc(r)).join(",")),e.ce=n}return e.ce}function od(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!k5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Gk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zO(t.startAt,e.startAt)&&zO(t.endAt,e.endAt)}function Om(t){return P.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function km(t,e){return t.filters.filter(n=>n instanceof _e&&n.field.isEqual(e))}function qO(t,e,n){let r=Im,i=!0;for(let s of km(t,e)){let o=Im,a=!0;switch(s.op){case"<":case"<=":o=P5(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Im}UO({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];UO({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function GO(t,e,n){let r=zi,i=!0;for(let s of km(t,e)){let o=zi,a=!0;switch(s.op){case">=":case">":o=O5(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=zi}$O({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];$O({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}var Yi=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function Yk(t,e,n,r,i,s,o,a){return new Yi(t,e,n,r,i,s,o,a)}function ad(t){return new Yi(t)}function WO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Zk(t){return t.collectionGroup!==null}function Au(t){let e=V(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Pe(st.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new lo(s,r))}),n.has(st.keyField().canonicalString())||e.le.push(new lo(st.keyField(),r))}return e.le}function cn(t){let e=V(t);return e.he||(e.he=F5(e,Au(t))),e.he}function F5(t,e){if(t.limitType==="F")return Hb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new lo(i.field,s)});let n=t.endAt?new Qi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Qi(t.startAt.position,t.startAt.inclusive):null;return Hb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function zb(t,e){let n=t.filters.concat([e]);return new Yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fm(t,e,n){return new Yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dg(t,e){return od(cn(t),cn(e))&&t.limitType===e.limitType}function Xk(t){return`${uo(cn(t))}|lt:${t.limitType}`}function qa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Kk(i)).join(", ")}]`),bg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>nc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>nc(i)).join(",")),`Target(${r})`}(cn(t))}; limitType=${t.limitType})`}function cd(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):P.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Au(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=HO(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Au(r),i)||r.endAt&&!function(o,a,c){let l=HO(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Au(r),i))}(t,e)}function Jk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function eF(t){return(e,n)=>{let r=!1;for(let i of Au(t)){let s=L5(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function L5(t,e,n){let r=t.field.isKeyField()?P.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Ki(c,l):O()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return O()}}var Sr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_o(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return $k(this.inner)}size(){return this.innerSize}};var V5=new Ve(P.comparator);function an(){return V5}var tF=new Ve(P.comparator);function Cu(...t){let e=tF;for(let n of t)e=e.insert(n.key,n);return e}function nF(t){let e=tF;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Dr(){return Ru()}function rF(){return Ru()}function Ru(){return new Sr(t=>t.toString(),(t,e)=>t.isEqual(e))}var j5=new Ve(P.comparator),B5=new Pe(P.comparator);function de(...t){let e=B5;for(let n of t)e=e.add(n);return e}var U5=new Pe(ie);function _0(){return U5}function iF(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ku(e)?"-0":e}}function sF(t){return{integerValue:""+t}}function $5(t,e){return Lk(e)?sF(e):iF(t,e)}var ic=class{constructor(){this._=void 0}};function H5(t,e,n){return t instanceof ho?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&m0(s)&&(s=g0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Zi?aF(t,e):t instanceof Xi?cF(t,e):function(i,s){let o=oF(i,s),a=KO(o)+KO(i.Ie);return Pb(o)&&Pb(i.Ie)?sF(a):iF(i.serializer,a)}(t,e)}function z5(t,e,n){return t instanceof Zi?aF(t,e):t instanceof Xi?cF(t,e):n}function oF(t,e){return t instanceof fo?function(r){return Pb(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var ho=class extends ic{},Zi=class extends ic{constructor(e){super(),this.elements=e}};function aF(t,e){let n=lF(e);for(let r of t.elements)n.some(i=>Tr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Xi=class extends ic{constructor(e){super(),this.elements=e}};function cF(t,e){let n=lF(e);for(let r of t.elements)n=n.filter(i=>!Tr(i,r));return{arrayValue:{values:n}}}var fo=class extends ic{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function KO(t){return We(t.integerValue||t.doubleValue)}function lF(t){return Bu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var qb=class{constructor(e,n){this.field=e,this.transform=n}};function q5(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Zi&&i instanceof Zi||r instanceof Xi&&i instanceof Xi?Ja(r.elements,i.elements,Tr):r instanceof fo&&i instanceof fo?Tr(r.Ie,i.Ie):r instanceof ho&&i instanceof ho}(t.transform,e.transform)}var Gb=class{constructor(e,n){this.version=e,this.transformResults=n}},vt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Dm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var sc=class{};function uF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new po(t.key,vt.none()):new Ji(t.key,t.data,vt.none());{let n=t.data,r=Bt.empty(),i=new Pe(st.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new qn(t.key,r,new on(i.toArray()),vt.none())}}function G5(t,e,n){t instanceof Ji?function(i,s,o){let a=i.value.clone(),c=YO(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof qn?function(i,s,o){if(!Dm(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=YO(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(dF(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Mu(t,e,n,r){return t instanceof Ji?function(s,o,a,c){if(!Dm(s.precondition,o))return a;let l=s.value.clone(),u=ZO(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof qn?function(s,o,a,c){if(!Dm(s.precondition,o))return a;let l=ZO(s.fieldTransforms,c,o),u=o.data;return u.setAll(dF(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Dm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function W5(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=oF(r.transform,i||null);s!=null&&(n===null&&(n=Bt.empty()),n.set(r.field,s))}return n||null}function QO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ja(r,i,(s,o)=>q5(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ji=class extends sc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},qn=class extends sc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function dF(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function YO(t,e,n){let r=new Map;B(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,z5(o,a,n[i]))}return r}function ZO(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,H5(s,o,e))}return r}var po=class extends sc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Lm=class extends sc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Uu=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&G5(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Mu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=rF();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=uF(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(q.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&Ja(this.mutations,e.mutations,(n,r)=>QO(n,r))&&Ja(this.baseMutations,e.baseMutations,(n,r)=>QO(n,r))}},Wb=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){B(e.mutations.length===r.length);let i=function(){return j5}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var $u=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Kb=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var nt,we;function K5(t){switch(t){default:return O();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}function hF(t){if(t===void 0)return Ze("GRPC error has no .code"),w.UNKNOWN;switch(t){case nt.OK:return w.OK;case nt.CANCELLED:return w.CANCELLED;case nt.UNKNOWN:return w.UNKNOWN;case nt.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case nt.INTERNAL:return w.INTERNAL;case nt.UNAVAILABLE:return w.UNAVAILABLE;case nt.UNAUTHENTICATED:return w.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case nt.NOT_FOUND:return w.NOT_FOUND;case nt.ALREADY_EXISTS:return w.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return w.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case nt.ABORTED:return w.ABORTED;case nt.OUT_OF_RANGE:return w.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return w.UNIMPLEMENTED;case nt.DATA_LOSS:return w.DATA_LOSS;default:return O()}}(we=nt||(nt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";var XO=null;function Q5(){return new TextEncoder}var Y5=new Qs([4294967295,4294967295],0);function JO(t){let e=Q5().encode(t),n=new NO;return n.update(e),new Uint8Array(n.digest())}function ek(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qs([n,r],0),new Qs([i,s],0)]}var Qb=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new no(`Invalid padding: ${n}`);if(r<0)throw new no(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new no(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new no(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Qs.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Qs.fromNumber(r)));return i.compare(Y5)===1&&(i=new Qs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=JO(e),[r,i]=ek(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=JO(e),[r,i]=ek(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},no=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Hu=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,zu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(q.min(),i,new Ve(ie),an(),de())}},zu=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,de(),de(),de())}};var Za=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Vm=class{constructor(e,n){this.targetId=e,this.fe=n}},jm=class{constructor(e,n,r=Et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Bm=class{constructor(){this.ge=0,this.pe=nk(),this.ye=Et.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=de(),n=de(),r=de();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:O()}}),new zu(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=nk()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,B(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},Yb=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=an(),this.Qe=tk(),this.Ke=new Ve(ie)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:O()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let s=i.target;if(Om(s))if(r===0){let o=new P(s.path);this.We(n,o,wt.newNoDocument(o,q.min()))}else B(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}XO?.tt(function(u,d,h,f,m){var g,v,E,R,M,F;let ee={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},j=d.unchangedNames;return j&&(ee.bloomFilter={applied:m===0,hashCount:(g=j?.hashCount)!==null&&g!==void 0?g:0,bitmapLength:(R=(E=(v=j?.bits)===null||v===void 0?void 0:v.bitmap)===null||E===void 0?void 0:E.length)!==null&&R!==void 0?R:0,padding:(F=(M=j?.bits)===null||M===void 0?void 0:M.padding)!==null&&F!==void 0?F:0,mightContain:te=>{var be;return(be=f?.mightContain(te))!==null&&be!==void 0&&be}}),ee}(o,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Wi(r).toUint8Array()}catch(c){if(c instanceof xm)return Pu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Qb(o,i,s)}catch(c){return Pu(c instanceof no?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&Om(a.target)){let c=new P(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,wt.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=de();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new Hu(e,n,this.Ke,this.qe,r);return this.qe=an(),this.Qe=tk(),this.Ke=new Ve(ie),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Bm,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Pe(ie),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||D("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Bm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function tk(){return new Ve(P.comparator)}function nk(){return new Ve(P.comparator)}var Z5={asc:"ASCENDING",desc:"DESCENDING"},X5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J5={and:"AND",or:"OR"},Zb=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Xb(t,e){return t.useProto3Json||bg(e)?e:{value:e}}function oc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function e8(t,e){return oc(t,e.toTimestamp())}function $t(t){return B(!!t),q.fromTimestamp(function(n){let r=Gi(n);return new Xe(r.seconds,r.nanos)}(t))}function v0(t,e){return Jb(t,e).canonicalString()}function Jb(t,e){let n=function(i){return new Me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pF(t){let e=Me.fromString(t);return B(bF(e)),e}function Um(t,e){return v0(t.databaseId,e.path)}function so(t,e){let n=pF(e);if(n.get(1)!==t.databaseId.projectId)throw new A(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new A(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new P(yF(n))}function mF(t,e){return v0(t.databaseId,e)}function gF(t){let e=pF(t);return e.length===4?Me.emptyPath():yF(e)}function eD(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yF(t){return B(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function rk(t,e,n){return{name:Um(t,e),fields:n.value.mapValue.fields}}function t8(t,e,n){let r=so(t,e.name),i=$t(e.updateTime),s=e.createTime?$t(e.createTime):q.min(),o=new Bt({mapValue:{fields:e.fields}}),a=wt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function n8(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:O()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(B(u===void 0||typeof u=="string"),Et.fromBase64String(u||"")):(B(u===void 0||u instanceof Uint8Array),Et.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let u=l.code===void 0?w.UNKNOWN:hF(l.code);return new A(u,l.message||"")}(o);n=new jm(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=so(t,r.document.name),s=$t(r.document.updateTime),o=r.document.createTime?$t(r.document.createTime):q.min(),a=new Bt({mapValue:{fields:r.document.fields}}),c=wt.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Za(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=so(t,r.document),s=r.readTime?$t(r.readTime):q.min(),o=wt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Za([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=so(t,r.document),s=r.removedTargetIds||[];n=new Za([],s,i,null)}else{if(!("filter"in e))return O();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Kb(i,s),a=r.targetId;n=new Vm(a,o)}}return n}function $m(t,e){let n;if(e instanceof Ji)n={update:rk(t,e.key,e.value)};else if(e instanceof po)n={delete:Um(t,e.key)};else if(e instanceof qn)n={update:rk(t,e.key,e.data),updateMask:c8(e.fieldMask)};else{if(!(e instanceof Lm))return O();n={verify:Um(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof ho)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Zi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fo)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw O()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:e8(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:O()}(t,e.precondition)),n}function tD(t,e){let n=e.currentDocument?function(s){return s.updateTime!==void 0?vt.updateTime($t(s.updateTime)):s.exists!==void 0?vt.exists(s.exists):vt.none()}(e.currentDocument):vt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)B(a.setToServerValue==="REQUEST_TIME"),c=new ho;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new Zi(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new Xi(u)}else"increment"in a?c=new fo(o,a.increment):O();let l=st.fromServerFormat(a.fieldPath);return new qb(l,c)}(t,i)):[];if(e.update){e.update.name;let i=so(t,e.update.name),s=new Bt({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new on(l.map(u=>st.fromServerFormat(u)))}(e.updateMask);return new qn(i,s,o,n,r)}return new Ji(i,s,n,r)}if(e.delete){let i=so(t,e.delete);return new po(i,n)}if(e.verify){let i=so(t,e.verify);return new Lm(i,n)}return O()}function r8(t,e){return t&&t.length>0?(B(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?$t(i.updateTime):$t(s);return o.isEqual(q.min())&&(o=$t(s)),new Gb(o,i.transformResults||[])}(n,e))):[]}function _F(t,e){return{documents:[mF(t,e.path)]}}function vF(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mF(t,i);let s=function(l){if(l.length!==0)return IF(Se.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:Ga(h.field),direction:s8(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Xb(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:n,parent:i}}function wF(t){let e=gF(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){B(r===1);let u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){let h=EF(d);return h instanceof Se&&y0(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(m){return new lo(Wa(m.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,bg(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Qi(f,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){let h=!d.before,f=d.values||[];return new Qi(f,h)}(n.endAt)),Yk(e,i,o,s,a,"F",c,l)}function i8(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return O()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function EF(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Wa(n.unaryFilter.field);return _e.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Wa(n.unaryFilter.field);return _e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Wa(n.unaryFilter.field);return _e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Wa(n.unaryFilter.field);return _e.create(o,"!=",{nullValue:"NULL_VALUE"});default:return O()}}(t):t.fieldFilter!==void 0?function(n){return _e.create(Wa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return O()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Se.create(n.compositeFilter.filters.map(r=>EF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return O()}}(n.compositeFilter.op))}(t):O()}function s8(t){return Z5[t]}function o8(t){return X5[t]}function a8(t){return J5[t]}function Ga(t){return{fieldPath:t.canonicalString()}}function Wa(t){return st.fromServerFormat(t.fieldPath)}function IF(t){return t instanceof _e?function(n){if(n.op==="=="){if(BO(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NAN"}};if(jO(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BO(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NOT_NAN"}};if(jO(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ga(n.field),op:o8(n.op),value:n.value}}}(t):t instanceof Se?function(n){let r=n.getFilters().map(i=>IF(i));return r.length===1?r[0]:{compositeFilter:{op:a8(n.op),filters:r}}}(t):O()}function c8(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ac=class t{constructor(e,n,r,i,s=q.min(),o=q.min(),a=Et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Hm=class{constructor(e){this.ct=e}};function l8(t,e){let n;if(e.document)n=t8(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=P.fromSegments(e.noDocument.path),i=go(e.noDocument.readTime);n=wt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return O();{let r=P.fromSegments(e.unknownDocument.path),i=go(e.unknownDocument.version);n=wt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let s=new Xe(i[0],i[1]);return q.fromTimestamp(s)}(e.readTime)),n}function ik(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:zm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Um(s,o.key),fields:o.data.value.mapValue.fields,updateTime:oc(s,o.version.toTimestamp()),createTime:oc(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:mo(e.version)};else{if(!e.isUnknownDocument())return O();r.unknownDocument={path:n.path.toArray(),version:mo(e.version)}}return r}function zm(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function mo(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function go(t){let e=new Xe(t.seconds,t.nanoseconds);return q.fromTimestamp(e)}function Js(t,e){let n=(e.baseMutations||[]).map(s=>tD(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>tD(t.ct,s)),i=Xe.fromMillis(e.localWriteTimeMs);return new Uu(e.batchId,i,n,r)}function Tu(t){let e=go(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?go(t.lastLimboFreeSnapshotVersion):q.min(),r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return B(s.documents.length===1),cn(ad(gF(s.documents[0])))}(t.query):function(s){return cn(wF(s))}(t.query),new ac(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Et.fromBase64String(t.resumeToken))}function DF(t,e){let n=mo(e.snapshotVersion),r=mo(e.lastLimboFreeSnapshotVersion),i;i=Om(e.target)?_F(t.ct,e.target):vF(t.ct,e.target).ut;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function CF(t){let e=wF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fm(e,e.limit,"L"):e}function fb(t,e){return new $u(e.largestBatchId,tD(t.ct,e.overlayMutation))}function sk(t,e){let n=e.path.lastSegment();return[t,Ut(e.path.popLast()),n]}function ok(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:mo(r.readTime),documentKey:Ut(r.documentKey.path),largestBatchId:r.largestBatchId}}var nD=class{getBundleMetadata(e,n){return ak(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:go(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return ak(e).put(function(i){return{bundleId:i.id,createTime:mo($t(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return ck(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:CF(s.bundledQuery),readTime:go(s.readTime)}}(r)})}saveNamedQuery(e,n){return ck(e).put(function(i){return{name:i.name,readTime:mo($t(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function ak(t){return ft(t,"bundles")}function ck(t){return ft(t,"namedQueries")}var qm=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Eu(e).get(sk(this.userId,n)).next(r=>r?fb(this.serializer,r):null)}getOverlays(e,n){let r=Dr();return _.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((s,o)=>{let a=new $u(n,o);i.push(this.ht(e,a))}),_.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(o=>i.add(Ut(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Eu(e).H("collectionPathOverlayIndex",a))}),_.waitFor(s)}getOverlaysForCollection(e,n,r){let i=Dr(),s=Ut(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Eu(e).W("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=fb(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let s=Dr(),o,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Eu(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,l,u)=>{let d=fb(this.serializer,l);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ht(e,n){return Eu(e).put(function(i,s,o){let[a,c,l]=sk(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:$m(i.ct,o.mutation)}}(this.serializer,this.userId,n))}};function Eu(t){return ft(t,"documentOverlays")}var Zr=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(We(e.integerValue));else if("doubleValue"in e){let r=We(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),ku(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Wi(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?Hk(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):O()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),P.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Zr.bt=new Zr;function u8(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function lk(t){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=u8(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}var rD=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){let n=this.Lt(e),r=lk(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Lt(e),r=lk(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){let n=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},iD=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}},sD=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},eo=class{constructor(){this.Gt=new rD,this.zt=new iD(this.Gt),this.jt=new sD(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var to=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Ui(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=uk(t.arrayValue,e.arrayValue),n!==0?n:(n=uk(t.directionalValue,e.directionalValue),n!==0?n:P.comparator(t.documentKey,e.documentKey)))}function uk(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var Gm=class{constructor(e){this.Yt=new Pe((n,r)=>st.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(B(e.collectionGroup===this.collectionId),this.en)return!1;let n=Tb(e);if(n!==void 0&&!this.nn(n))return!1;let r=Zs(e),i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new Pe(st.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Ya(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Ya(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Ya(r.field,r.dir==="asc"?0:1)));return new ec(ec.UNKNOWN_ID,this.collectionId,n,Ou.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function TF(t){var e,n;if(B(t instanceof _e||t instanceof Se),t instanceof _e){if(t instanceof Pm){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>_e.create(t.field,"==",s)))||[];return Se.create(i,"or")}return t}let r=t.filters.map(i=>TF(i));return Se.create(r,t.op)}function d8(t){if(t.getFilters().length===0)return[];let e=cD(TF(t));return B(SF(e)),oD(e)||aD(e)?[e]:e.getFilters()}function oD(t){return t instanceof _e}function aD(t){return t instanceof Se&&y0(t)}function SF(t){return oD(t)||aD(t)||function(n){if(n instanceof Se&&Ob(n)){for(let r of n.getFilters())if(!oD(r)&&!aD(r))return!1;return!0}return!1}(t)}function cD(t){if(B(t instanceof _e||t instanceof Se),t instanceof _e)return t;if(t.filters.length===1)return cD(t.filters[0]);let e=t.filters.map(r=>cD(r)),n=Se.create(e,t.op);return n=Wm(n),SF(n)?n:(B(n instanceof Se),B(rc(n)),B(n.filters.length>1),n.filters.reduce((r,i)=>w0(r,i)))}function w0(t,e){let n;return B(t instanceof _e||t instanceof Se),B(e instanceof _e||e instanceof Se),n=t instanceof _e?e instanceof _e?function(i,s){return Se.create([i,s],"and")}(t,e):dk(t,e):e instanceof _e?dk(e,t):function(i,s){if(B(i.filters.length>0&&s.filters.length>0),rc(i)&&rc(s))return Wk(i,s.getFilters());let o=Ob(i)?i:s,a=Ob(i)?s:i,c=o.filters.map(l=>w0(l,a));return Se.create(c,"or")}(t,e),Wm(n)}function dk(t,e){if(rc(e))return Wk(e,t.getFilters());{let n=e.filters.map(r=>w0(t,r));return Se.create(n,"or")}}function Wm(t){if(B(t instanceof _e||t instanceof Se),t instanceof _e)return t;let e=t.getFilters();if(e.length===1)return Wm(e[0]);if(qk(t))return t;let n=e.map(i=>Wm(i)),r=[];return n.forEach(i=>{i instanceof _e?r.push(i):i instanceof Se&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Se.create(r,t.op)}var lD=class{constructor(){this._n=new qu}addToCollectionParentIndex(e,n){return this._n.add(n),_.resolve()}getCollectionParents(e,n){return _.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return _.resolve()}deleteFieldIndex(e,n){return _.resolve()}deleteAllFieldIndexes(e){return _.resolve()}createTargetIndexes(e,n){return _.resolve()}getDocumentsMatchingTarget(e,n){return _.resolve(null)}getIndexType(e,n){return _.resolve(0)}getFieldIndexes(e,n){return _.resolve([])}getNextCollectionGroupToUpdate(e){return _.resolve(null)}getMinOffset(e,n){return _.resolve(An.min())}getMinOffsetFromCollectionGroup(e,n){return _.resolve(An.min())}updateCollectionGroup(e,n,r){return _.resolve()}updateIndexEntries(e,n){return _.resolve()}},qu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Pe(Me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pe(Me.comparator)).toArray()}};var ym=new Uint8Array(0),uD=class{constructor(e,n){this.databaseId=n,this.an=new qu,this.un=new Sr(r=>uo(r),(r,i)=>od(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let s={collectionId:r,parent:Ut(i)};return hk(e).put(s)}return _.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[Pk(n),""],!1,!0);return hk(e).W(i).next(s=>{for(let o of s){if(o.collectionId!==n)break;r.push(br(o.parent))}return r})}addFieldIndex(e,n){let r=Iu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let s=r.add(i);if(n.indexState){let o=$a(e);return s.next(a=>{o.put(ok(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){let r=Iu(e),i=$a(e),s=Ua(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Iu(e),r=Ua(e),i=$a(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return _.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new Gm(r).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){let r=Ua(e),i=!0,s=new Map;return _.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=de(),a=[];return _.forEach(s,(c,l)=>{D("IndexedDbIndexManager",`Using index ${function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(F=>`${F.fieldPath}:${F.kind}`).join(",")}`}(c)} to execute ${uo(n)}`);let u=function(M,F){let ee=Tb(F);if(ee===void 0)return null;for(let j of km(M,ee.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(l,c),d=function(M,F){let ee=new Map;for(let j of Zs(F))for(let te of km(M,j.fieldPath))switch(te.op){case"==":case"in":ee.set(j.fieldPath.canonicalString(),te.value);break;case"not-in":case"!=":return ee.set(j.fieldPath.canonicalString(),te.value),Array.from(ee.values())}return null}(l,c),h=function(M,F){let ee=[],j=!0;for(let te of Zs(F)){let be=te.kind===0?qO(M,te.fieldPath,M.startAt):GO(M,te.fieldPath,M.startAt);ee.push(be.value),j&&(j=be.inclusive)}return new Qi(ee,j)}(l,c),f=function(M,F){let ee=[],j=!0;for(let te of Zs(F)){let be=te.kind===0?GO(M,te.fieldPath,M.endAt):qO(M,te.fieldPath,M.endAt);ee.push(be.value),j&&(j=be.inclusive)}return new Qi(ee,j)}(l,c),m=this.hn(c,l,h),g=this.hn(c,l,f),v=this.Pn(c,l,d),E=this.In(c.indexId,u,m,h.inclusive,g,f.inclusive,v);return _.forEach(E,R=>r.j(R,n.limit).next(M=>{M.forEach(F=>{let ee=P.fromSegments(F.documentKey);o.has(ee)||(o=o.add(ee),a.push(ee))})}))}).next(()=>a)}return _.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=d8(Se.create(e.filters,"and")).map(r=>Hb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,a){let c=(n!=null?n.length:1)*Math.max(r.length,s.length),l=c/(n!=null?n.length:1),u=[];for(let d=0;d<c;++d){let h=n?this.Tn(n[d/l]):ym,f=this.En(e,h,r[d%l],i),m=this.dn(e,h,s[d%l],o),g=a.map(v=>this.En(e,h,v,!0));u.push(...this.createRange(f,m,g))}return u}En(e,n,r,i){let s=new to(e,P.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){let s=new to(e,P.empty(),n,r);return i?s.Jt():s}ln(e,n){let r=new Gm(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2,i=this.cn(n);return _.forEach(i,s=>this.ln(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new Pe(st.comparator),u=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:l=l.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(l=l.add(d.field));return l.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new eo;for(let i of Zs(e)){let s=n.data.field(i.fieldPath);if(s==null)return null;let o=r.Ht(i.kind);Zr.bt.Pt(s,o)}return r.Wt()}Tn(e){let n=new eo;return Zr.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new eo;return Zr.bt.Pt(ju(this.databaseId,n),r.Ht(function(s){let o=Zs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new eo);let s=0;for(let o of Zs(e)){let a=r[s++];for(let c of i)if(this.Vn(n,o.fieldPath)&&Bu(a))i=this.mn(i,o,a);else{let l=c.Ht(o.kind);Zr.bt.Pt(a,l)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new eo;c.seed(a.Wt()),Zr.bt.Pt(o,c.Ht(n.kind)),s.push(c)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof _e&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Iu(e),i=$a(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{let o=[];return _.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(u,d){let h=d?new Ou(d.sequenceNumber,new An(go(d.readTime),new P(br(d.documentKey)),d.largestBatchId)):Ou.empty(),f=u.fields.map(([m,g])=>new Ya(st.fromServerFormat(m),g));return new ec(u.indexId,u.collectionGroup,f,h)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ie(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Iu(e),s=$a(e);return this.gn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>_.forEach(a,c=>s.put(ok(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){let r=new Map;return _.forEach(n,(i,s)=>{let o=r.get(i.collectionGroup);return(o?_.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),_.forEach(a,c=>this.pn(e,i,c).next(l=>{let u=this.yn(s,c);return l.isEqual(u)?_.resolve():this.wn(e,s,c,l,u)}))))})}Sn(e,n,r,i){return Ua(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Ua(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=Ua(e),s=new Pe(Ui);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,a)=>{s=s.add(new to(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let r=new Pe(Ui),i=this.An(n,e);if(i==null)return r;let s=Tb(n);if(s!=null){let o=e.data.field(s.fieldPath);if(Bu(o))for(let a of o.arrayValue.values||[])r=r.add(new to(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new to(n.indexId,e.key,ym,i));return r}wn(e,n,r,i,s){D("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let o=[];return function(c,l,u,d,h){let f=c.getIterator(),m=l.getIterator(),g=Ba(f),v=Ba(m);for(;g||v;){let E=!1,R=!1;if(g&&v){let M=u(g,v);M<0?R=!0:M>0&&(E=!0)}else g!=null?R=!0:E=!0;E?(d(v),v=Ba(m)):R?(h(g),g=Ba(f)):(g=Ba(f),v=Ba(m))}}(i,s,Ui,a=>{o.push(this.Sn(e,n,r,a))},a=>{o.push(this.bn(e,n,r,a))}),_.waitFor(o)}gn(e){let n=1;return $a(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ui(o,a)).filter((o,a,c)=>!a||Ui(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Ui(o,e),c=Ui(o,n);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(o),i.push(o.Jt());else if(c>0)break}i.push(n);let s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,ym,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,ym,[]];s.push(IDBKeyRange.bound(a,c))}return s}Dn(e,n){return Ui(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(fk)}getMinOffset(e,n){return _.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||O())).next(fk)}};function hk(t){return ft(t,"collectionParents")}function Ua(t){return ft(t,"indexEntries")}function Iu(t){return ft(t,"indexConfiguration")}function $a(t){return ft(t,"indexState")}function fk(t){B(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;f0(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new An(e.readTime,e.documentKey,n)}var pk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function AF(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId),a=0,c=r.Y({range:o},(u,d,h)=>(a++,h.delete()));s.push(c.next(()=>{B(a===1)}));let l=[];for(let u of n.mutations){let d=Vk(e,u.key.path,n.batchId);s.push(i.delete(d)),l.push(u.key)}return _.waitFor(s).next(()=>l)}function Km(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw O();e=t.noDocument}return JSON.stringify(e).length}Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(41943040,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);var Qm=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){B(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new t(s,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $i(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let s=Ka(e),o=$i(e);return o.add({}).next(a=>{B(typeof a=="number");let c=new Uu(a,n,r,i),l=function(f,m,g){let v=g.baseMutations.map(R=>$m(f.ct,R)),E=g.mutations.map(R=>$m(f.ct,R));return{userId:m,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:v,mutations:E}}(this.serializer,this.userId,c),u=[],d=new Pe((h,f)=>ie(h.canonicalString(),f.canonicalString()));for(let h of i){let f=Vk(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(l)),u.push(s.put(f,m5))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),_.waitFor(u).next(()=>c)})}lookupMutationBatch(e,n){return $i(e).get(n).next(r=>r?(B(r.userId===this.userId),Js(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?_.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return $i(e).Y({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(B(a.batchId>=r),s=Js(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return $i(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $i(e).W("userMutationsIndex",n).next(r=>r.map(i=>Js(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Em(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Ka(e).Y({range:i},(o,a,c)=>{let[l,u,d]=o,h=br(u);if(l===this.userId&&n.path.isEqual(h))return $i(e).get(d).next(f=>{if(!f)throw O();B(f.userId===this.userId),s.push(Js(this.serializer,f))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pe(ie),i=[];return n.forEach(s=>{let o=Em(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Ka(e).Y({range:a},(l,u,d)=>{let[h,f,m]=l,g=br(f);h===this.userId&&s.path.isEqual(g)?r=r.add(m):d.done()});i.push(c)}),_.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=Em(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Pe(ie);return Ka(e).Y({range:o},(c,l,u)=>{let[d,h,f]=c,m=br(h);d===this.userId&&r.isPrefixOf(m)?m.length===i&&(a=a.add(f)):u.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(s=>{i.push($i(e).get(s).next(o=>{if(o===null)throw O();B(o.userId===this.userId),r.push(Js(this.serializer,o))}))}),_.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return AF(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),_.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return _.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Ka(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=br(s[1]);i.push(c)}else a.done()}).next(()=>{B(i.length===0)})})}containsKey(e,n){return RF(e,this.userId,n)}xn(e){return MF(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function RF(t,e,n){let r=Em(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Ka(t).Y({range:s,J:!0},(a,c,l)=>{let[u,d,h]=a;u===e&&d===i&&(o=!0),l.done()}).next(()=>o)}function $i(t){return ft(t,"mutations")}function Ka(t){return ft(t,"documentMutations")}function MF(t){return ft(t,"mutationQueues")}var cc=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};var dD=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{let r=new cc(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>q.fromTimestamp(new Xe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ha(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>(B(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,s=[];return Ha(e).Y((o,a)=>{let c=Tu(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>_.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ha(e).Y((r,i)=>{let s=Tu(i);n(s)})}Ln(e){return mk(e).get("targetGlobalKey").next(n=>(B(n!==null),n))}kn(e,n){return mk(e).put("targetGlobalKey",n)}qn(e,n){return Ha(e).put(DF(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){let r=uo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Ha(e).Y({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let l=Tu(a);od(n,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,n,r){let i=[],s=Hi(e);return n.forEach(o=>{let a=Ut(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),_.waitFor(i)}removeMatchingKeys(e,n,r){let i=Hi(e);return _.forEach(n,s=>{let o=Ut(s.path);return _.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){let r=Hi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Hi(e),s=de();return i.Y({range:r,J:!0},(o,a,c)=>{let l=br(o[1]),u=new P(l);s=s.add(u)}).next(()=>s)}containsKey(e,n){let r=Ut(n.path),i=IDBKeyRange.bound([r],[Pk(r)],!1,!0),s=0;return Hi(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}_t(e,n){return Ha(e).get(n).next(r=>r?Tu(r):null)}};function Ha(t){return ft(t,"targets")}function mk(t){return ft(t,"targetGlobal")}function Hi(t){return ft(t,"targetDocuments")}function gk([t,e],[n,r]){let i=ie(t,n);return i===0?ie(e,r):i}var hD=class{constructor(e){this.Kn=e,this.buffer=new Pe(gk),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();gk(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},fD=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){D("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>p(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ns(n)?D("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield ts(n)}yield this.zn(3e5)}))}},pD=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return _.resolve(sn._e);let r=new hD(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(D("LruGarbageCollector","Garbage collection skipped; disabled"),_.resolve(pk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(D("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pk):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(D("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(l=Date.now(),za()<=ge.DEBUG&&D("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),_.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}};function h8(t,e){return new pD(t,e)}var mD=class{constructor(e,n){this.db=e,this.garbageCollector=h8(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return _m(e,r)}removeReference(e,n,r){return _m(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return _m(e,n)}er(e,n){return function(i,s){let o=!1;return MF(i).Z(a=>RF(i,a,s).next(c=>(c&&(o=!0),_.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.Xn(e,(o,a)=>{if(a<=n){let c=this.er(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,q.min()),Hi(e).delete(function(d){return[0,Ut(d.path)]}(o))))});i.push(c)}}).next(()=>_.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return _m(e,n)}Xn(e,n){let r=Hi(e),i,s=sn._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==sn._e&&n(new P(br(i)),s),s=l,i=c):s=sn._e}).next(()=>{s!==sn._e&&n(new P(br(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function _m(t,e){return Hi(t).put(function(r,i){return{targetId:0,path:Ut(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Ym=class{constructor(){this.changes=new Sr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?_.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var gD=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ys(e).put(r)}removeEntry(e,n,r){return Ys(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],zm(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=wt.newInvalidDocument(n);return Ys(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(bu(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:wt.newInvalidDocument(n)};return Ys(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(bu(n))},(i,s)=>{r={document:this.nr(n,s),size:Km(s)}}).next(()=>r)}getEntries(e,n){let r=an();return this.ir(e,n,(i,s)=>{let o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=an(),i=new Ve(P.comparator);return this.ir(e,n,(s,o)=>{let a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,Km(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return _.resolve();let i=new Pe(vk);n.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(bu(i.first()),bu(i.last())),o=i.getIterator(),a=o.getNext();return Ys(e).Y({index:"documentKeyIndex",range:s},(c,l,u)=>{let d=P.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&vk(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?u.U(bu(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),zm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ys(e).W(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let u=an();for(let d of l){let h=this.nr(P.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(cd(n,h)||i.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,n,r,i){let s=an(),o=_k(n,r),a=_k(n,An.max());return Ys(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,u)=>{let d=this.nr(P.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(d.key,d),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new yD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return yk(e).get("remoteDocumentGlobalKey").next(n=>(B(!!n),n))}tr(e,n){return yk(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=l8(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(q.min())))return r}return wt.newInvalidDocument(e)}};function xF(t){return new gD(t)}var yD=class extends Ym{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Sr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Pe((s,o)=>ie(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=ik(this.ar.serializer,o);i=i.add(s.path.popLast());let l=Km(c);r+=l-a.size,n.push(this.ar.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=ik(this.ar.serializer,o.convertToNoDocument(q.min()));n.push(this.ar.addEntry(e,s,c))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),_.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function yk(t){return ft(t,"remoteDocumentGlobal")}function Ys(t){return ft(t,"remoteDocumentsV14")}function bu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _k(t,e){let n=e.documentKey.path.toArray();return[t,zm(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function vk(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ie(n[s],r[s]),i)return i;return i=ie(n.length,r.length),i||(i=ie(n[n.length-2],r[r.length-2]),i||ie(n[n.length-1],r[r.length-1]))}var _D=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Zm=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Mu(r.mutation,i,on.empty(),Xe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){let i=Dr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Cu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Dr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=an(),o=Ru(),a=function(){return Ru()}();return n.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof qn)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Mu(u.mutation,l,u.mutation.getFieldMask(),Xe.now())):o.set(l.key,on.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var d;return a.set(l,new _D(u,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Ru(),i=new Ve((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=r.get(c)||on.empty();u=a.applyToLocalView(l,u),r.set(c,u);let d=(i.get(a.batchId)||de()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=rF();u.forEach(h=>{if(!s.has(h)){let f=uF(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return _.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return P.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Zk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):_.resolve(Dr()),a=-1,c=s;return o.next(l=>_.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?_.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,de())).next(u=>({batchId:a,changes:nF(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new P(n)).next(r=>{let i=Cu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Cu();return this.indexManager.getCollectionParents(e,s).next(a=>_.forEach(a,c=>{let l=function(d,h){return new Yi(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,wt.newInvalidDocument(u)))});let a=Cu();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&Mu(u.mutation,l,on.empty(),Xe.now()),cd(n,l)&&(a=a.insert(c,l))}),a})}};var vD=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return _.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$t(i.createTime)}}(n)),_.resolve()}getNamedQuery(e,n){return _.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:CF(i.bundledQuery),readTime:$t(i.readTime)}}(n)),_.resolve()}};var wD=class{constructor(){this.overlays=new Ve(P.comparator),this.hr=new Map}getOverlay(e,n){return _.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Dr();return _.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),_.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),_.resolve()}getOverlaysForCollection(e,n,r){let i=Dr(),s=n.length+1,o=new P(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return _.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ve((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=Dr(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Dr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return _.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $u(n,r));let s=this.hr.get(n);s===void 0&&(s=de(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var Gu=class{constructor(){this.Pr=new Pe(rt.Ir),this.Tr=new Pe(rt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new rt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new rt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new P(new Me([])),r=new rt(n,e),i=new rt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new P(new Me([])),r=new rt(n,e),i=new rt(n,e+1),s=de();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new rt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},rt=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return P.comparator(e.key,n.key)||ie(e.pr,n.pr)}static Er(e,n){return ie(e.pr,n.pr)||P.comparator(e.key,n.key)}};var ED=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Pe(rt.Ir)}checkEmpty(e){return _.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Uu(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new rt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return _.resolve(o)}lookupMutationBatch(e,n){return _.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return _.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return _.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return _.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new rt(n,0),i=new rt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),_.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pe(ie);return n.forEach(i=>{let s=new rt(i,0),o=new rt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),_.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;P.isDocumentKey(s)||(s=s.child(""));let o=new rt(new P(s),0),a=new Pe(ie);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},o),_.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){B(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return _.forEach(n.mutations,i=>{let s=new rt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new rt(n,0),i=this.wr.firstAfterOrEqual(r);return _.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,_.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var ID=class{constructor(e){this.vr=e,this.docs=function(){return new Ve(P.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return _.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let r=an();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wt.newInvalidDocument(i))}),_.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=an(),o=n.path,a=new P(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||f0(kk(u),r)<=0||(i.has(u.key)||cd(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return _.resolve(s)}getAllFromCollectionGroup(e,n,r,i){O()}Fr(e,n){return _.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new bD(this)}getSize(e){return _.resolve(this.size)}},bD=class extends Ym{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),_.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var DD=class{constructor(e){this.persistence=e,this.Mr=new Sr(n=>uo(n),od),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Gu,this.targetCount=0,this.Br=cc.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),_.resolve()}getLastRemoteSnapshotVersion(e){return _.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),_.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),_.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new cc(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,_.resolve()}updateTargetData(e,n){return this.qn(n),_.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,_.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),_.waitFor(s).next(()=>i)}getTargetCount(e){return _.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return _.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),_.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),_.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),_.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return _.resolve(r)}containsKey(e,n){return _.resolve(this.Nr.containsKey(n))}};var Xm=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new sn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new DD(this),this.indexManager=new lD,this.remoteDocumentCache=function(i){return new ID(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Hm(n),this.$r=new vD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new ED(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){D("MemoryPersistence","Starting transaction:",e);let i=new CD(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return _.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},CD=class extends Am{constructor(e){super(),this.currentSequenceNumber=e}},Jm=class t{constructor(e){this.persistence=e,this.zr=new Gu,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw O()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),_.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),_.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),_.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _.forEach(this.Jr,r=>{let i=P.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,q.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return _.or([()=>_.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var TD=class{constructor(e){this.serializer=e}N(e,n,r,i){let s=new Rm("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FO,{unique:!0}),c.createObjectStore("documentMutations")}(e),wk(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=_.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),wk(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:q.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").W().next(u=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FO,{unique:!0});let d=l.store("mutations"),h=u.map(f=>d.put(f));return _.waitFor(h)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:S5});l.createIndex("collectionPathOverlayIndex",A5,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",R5,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:g5});l.createIndex("documentKeyIndex",y5),l.createIndex("collectionGroupIndex",_5)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:b5}).createIndex("sequenceNumberIndex",D5,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:C5}).createIndex("documentKeyIndex",T5,{unique:!1})}(e))),o}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Km(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>_.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>_.forEach(a,c=>{B(c.userId===s.userId);let l=Js(this.serializer,c);return AF(e,s.userId,l).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.Y((o,a)=>{let c=new Me(o),l=function(d){return[0,Ut(d)]}(c);s.push(n.get(l).next(u=>u?_.resolve():(d=>n.put({targetId:0,path:Ut(d),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>_.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:I5});let r=n.store("collectionParents"),i=new qu,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Ut(c)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{let c=new Me(o);return s(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,c],l)=>{let u=br(a);return s(u.popLast())}))}ri(e){let n=e.store("targets");return n.Y((r,i)=>{let s=Tu(i),o=DF(this.serializer,s);return n.put(o)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new P(Me.fromString(d.document.name).popFirst(5)):d.noDocument?P.fromSegments(d.noDocument.path):d.unknownDocument?P.fromSegments(d.unknownDocument.path):O()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>_.waitFor(i))}si(e,n){let r=n.store("mutations"),i=xF(this.serializer),s=new Xm(Jm.Hr,this.serializer.ct);return r.W().next(o=>{let a=new Map;return o.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:de();Js(this.serializer,c).keys().forEach(d=>u=u.add(d)),a.set(c.userId,u)}),_.forEach(a,(c,l)=>{let u=new ht(l),d=qm.lt(this.serializer,u),h=s.getIndexManager(u),f=Qm.lt(u,this.serializer,h,s.referenceDelegate);return new Zm(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new Fu(n,sn._e),c).next()})})}};function wk(t){t.createObjectStore("targetDocuments",{keyPath:w5}).createIndex("documentTargetsIndex",E5,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",v5,{unique:!0}),t.createObjectStore("targetGlobal")}var pb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",SD=class t{constructor(e,n,r,i,s,o,a,c,l,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=l,this.ai=u,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!t.D())throw new A(w.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mD(this,i),this.Ti=n+"main",this.serializer=new Hm(c),this.Ei=new ao(this.Ti,this.ui,new TD(this.serializer)),this.Qr=new dD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xF(this.serializer),this.$r=new nD,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,u===!1&&Ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new A(w.FAILED_PRECONDITION,pb);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new sn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>p(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>p(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>p(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(ns(e))return D("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return D("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Du(e).get("owner").next(n=>_.resolve(this.Si(n)))}bi(e){return vm(e).delete(this.clientId)}Di(){return p(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=ft(n,"clientMetadata");return r.W().next(i=>{let s=this.vi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return _.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?_.resolve(!0):Du(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new A(w.FAILED_PRECONDITION,pb);return!1}}return!(!this.networkEnabled||!this.inForeground)||vm(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&D("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return p(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Fu(e,sn._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Bi()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>vm(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Qm.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new uD(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return qm.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){D("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",s=function(c){return c===15?x5:c===14?Uk:c===13?Bk:c===12?M5:c===11?jk:void O()}(this.ui),o;return this.Ei.runTransaction(e,i,s,a=>(o=new Fu(a,this.kr?this.kr.next():sn._e),n==="readwrite-primary"?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw Ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new A(w.FAILED_PRECONDITION,Fk);return r(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return Du(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new A(w.FAILED_PRECONDITION,pb)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Du(e).put("owner",n)}static D(){return ao.D()}yi(e){let n=Du(e);return n.get("owner").next(r=>this.Si(r)?(D("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):_.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Ze(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;_E()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return D("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ze("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Ze("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Du(t){return ft(t,"owner")}function vm(t){return ft(t,"clientMetadata")}function NF(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var AD=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=de(),i=de();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var RD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var eg=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return _E()?8:ao.v(qe())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new RD;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(za()<=ge.DEBUG&&D("QueryEngine","SDK will not create cache indexes for query:",qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),_.resolve()):(za()<=ge.DEBUG&&D("QueryEngine","Query:",qa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(za()<=ge.DEBUG&&D("QueryEngine","The SDK decides to create cache indexes for query:",qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cn(n))):_.resolve())}ji(e,n){if(WO(n))return _.resolve(null);let r=cn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Fm(n,null,"F"),r=cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=de(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,Fm(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,r,i){return WO(n)||i.isEqual(q.min())?_.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?_.resolve(null):(za()<=ge.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qa(n)),this.es(e,o,n,Ok(i,-1)).next(a=>a))})}Zi(e,n){let r=new Pe(eF(e));return n.forEach((i,s)=>{cd(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return za()<=ge.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",qa(n)),this.zi.getDocumentsMatchingQuery(e,n,An.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var MD=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ve(ie),this.rs=new Sr(s=>uo(s),od),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function PF(t,e,n,r){return new MD(t,e,n,r)}function OF(t,e){return p(this,null,function*(){let n=V(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=de();for(let l of i){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function f8(t,e){let n=V(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,h=d.keys(),f=_.resolve();return h.forEach(m=>{f=f.next(()=>u.getEntry(c,m)).next(g=>{let v=l.docVersions.get(m);B(v!==null),g.version.compareTo(v)<0&&(d.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),u.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function kF(t){let e=V(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function p8(t,e){let n=V(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((u,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Et.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),function(g,v,E){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(h,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let c=an(),l=de();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(m8(s,o,e.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!r.isEqual(q.min())){let u=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return _.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.ns=i,s))}function m8(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=an();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(q.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):D("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:i}})}function g8(t,e){let n=V(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tg(t,e){let n=V(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,_.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new ac(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function lc(t,e,n){return p(this,null,function*(){let r=V(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ns(o))throw o;D("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function xD(t,e,n){let r=V(t),i=q.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){let d=V(c),h=d.rs.get(u);return h!==void 0?_.resolve(d.ns.get(h)):d.Qr.getTargetData(l,u)}(r,o,cn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:q.min(),n?s:de())).next(a=>(VF(r,Jk(e),a),{documents:a,hs:s})))}function FF(t,e){let n=V(t),r=V(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function LF(t,e){let n=V(t),r=n.ss.get(e)||q.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,Ok(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(VF(n,e,i),i))}function VF(t,e,n){let r=t.ss.get(e)||q.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}function Ek(t,e){return`firestore_clients_${t}_${e}`}function Ik(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function mb(t,e){return`firestore_targets_${t}_${e}`}var ng=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new A(i.error.code,i.error.message))),o?new t(e,n,i.state,s):(Ze("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},xu=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new A(r.error.code,r.error.message))),s?new t(e,r.state,i):(Ze("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},rg=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=_0();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Lk(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(Ze("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},ND=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Ze("SharedClientState",`Failed to parse online state: ${e}`),null)}},Wu=class{constructor(){this.activeTargetIds=_0()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Nu=class{constructor(e,n,r,i,s){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Ve(ie),this.started=!1,this.ys=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=Ek(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Wu),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return p(this,null,function*(){let e=yield this.syncEngine.Li();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(Ek(this.persistenceKey,r));if(i){let s=rg.Es(r,i);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,r){this.Bs(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(mb(this.persistenceKey,e));if(r){let i=xu.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(mb(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return D("SharedClientState","READ",e,n),n}setItem(e,n){D("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){D("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(D("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>p(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(s){let o=sn._e;if(s!=null)try{let a=JSON.parse(s);B(typeof a=="number"),o=a}catch(a){Ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==sn._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,r){let i=new ng(this.currentUser,e,n,r),s=Ik(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Ls(e){let n=Ik(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=mb(this.persistenceKey,e),s=new xu(e,n,r);this.setItem(i,s.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return rg.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return ng.Es(new ht(s),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return xu.Es(i,n)}xs(e){return ND.Es(e)}Js(e){return JSON.parse(e)}zs(e){return p(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);D("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=_0();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},ig=class{constructor(){this.no=new Wu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Wu,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var PD=class{io(e){}shutdown(){}};var sg=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var wm=null;function gb(){return wm===null?wm=function(){return 268435456+Math.round(2147483648*Math.random())}():wm++,"0x"+wm.toString(16)}var y8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var OD=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var Rt="WebChannelConnection",kD=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){let a=gb(),c=this.bo(n,r.toUriEncodedString());D("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,s,o),this.Co(n,c,l,i).then(u=>(D("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Pu("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",i),u})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){let i=y8[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let s=gb();return new Promise((o,a)=>{let c=new xO;c.setWithCredentials(!0),c.listenOnce(RO.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case gm.NO_ERROR:let u=c.getResponseJson();D(Rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case gm.TIMEOUT:D(Rt,`RPC '${e}' ${s} timed out`),a(new A(w.DEADLINE_EXCEEDED,"Request time out"));break;case gm.HTTP_ERROR:let d=c.getStatus();if(D(Rt,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let m=function(v){let E=v.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(E)>=0?E:w.UNKNOWN}(f.status);a(new A(m,f.message))}else a(new A(w.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new A(w.UNAVAILABLE,"Connection failed."));break;default:O()}}finally{D(Rt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);D(Rt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Fo(e,n,r){let i=gb(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=SO(),a=AO(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let u=s.join("");D(Rt,`Creating RPC '${e}' stream ${i}: ${u}`,c);let d=o.createWebChannel(u,c),h=!1,f=!1,m=new OD({lo:v=>{f?D(Rt,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(h||(D(Rt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),D(Rt,`RPC '${e}' stream ${i} sending:`,v),d.send(v))},ho:()=>d.close()}),g=(v,E,R)=>{v.listen(E,M=>{try{R(M)}catch(F){setTimeout(()=>{throw F},0)}})};return g(d,wu.EventType.OPEN,()=>{f||D(Rt,`RPC '${e}' stream ${i} transport opened.`)}),g(d,wu.EventType.CLOSE,()=>{f||(f=!0,D(Rt,`RPC '${e}' stream ${i} transport closed`),m.Vo())}),g(d,wu.EventType.ERROR,v=>{f||(f=!0,Pu(Rt,`RPC '${e}' stream ${i} transport errored:`,v),m.Vo(new A(w.UNAVAILABLE,"The operation could not be completed")))}),g(d,wu.EventType.MESSAGE,v=>{var E;if(!f){let R=v.data[0];B(!!R);let M=R,F=M.error||((E=M[0])===null||E===void 0?void 0:E.error);if(F){D(Rt,`RPC '${e}' stream ${i} received error:`,F);let ee=F.status,j=function(xt){let Qt=nt[xt];if(Qt!==void 0)return hF(Qt)}(ee),te=F.message;j===void 0&&(j=w.INTERNAL,te="Unknown error status: "+ee+" with message "+F.message),f=!0,m.Vo(new A(j,te)),d.close()}else D(Rt,`RPC '${e}' stream ${i} received:`,R),m.mo(R)}}),g(a,MO.STAT_EVENT,v=>{v.stat===hb.PROXY?D(Rt,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===hb.NOPROXY&&D(Rt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.Ro()},0),m}};function jF(){return typeof window<"u"?window:null}function Cm(){return typeof document<"u"?document:null}function Cg(t){return new Zb(t,!0)}var og=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&D("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var ag=class{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new og(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return p(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return p(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return p(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(Ze(n.toString()),Ze("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===w.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new A(w.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>p(this,null,function*(){this.state=0,this.start()}))}__(e){return D("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},FD=class extends ag{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=n8(this.serializer,e),r=function(s){if(!("targetChange"in s))return q.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?q.min():o.readTime?$t(o.readTime):q.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=eD(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Om(c)?{documents:_F(s,c)}:{query:vF(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=fF(s,o.resumeToken);let l=Xb(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(q.min())>0){a.readTime=oc(s,o.snapshotVersion.toTimestamp());let l=Xb(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=i8(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=eD(this.serializer),n.removeTarget=e,this.t_(n)}},LD=class extends ag{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(B(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=r8(e.writeResults,e.commitTime),r=$t(e.commitTime);return this.listener.T_(r,n)}return B(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=eD(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>$m(this.serializer,r))};this.t_(n)}};var VD=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new A(w.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,Jb(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new A(w.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Jb(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new A(w.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var jD=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ze(n),this.g_=!1):D("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var BD=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(()=>p(this,null,function*(){vo(this)&&(D("RemoteStore","Restarting streams for network reachability change."),yield function(c){return p(this,null,function*(){let l=V(c);l.v_.add(4),yield ld(l),l.x_.set("Unknown"),l.v_.delete(4),yield Tg(l)})}(this))}))}),this.x_=new jD(r,i)}};function Tg(t){return p(this,null,function*(){if(vo(t))for(let e of t.F_)yield e(!0)})}function ld(t){return p(this,null,function*(){for(let e of t.F_)yield e(!1)})}function Sg(t,e){let n=V(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),b0(n)?I0(n):pc(n).Jo()&&E0(n,e))}function Ku(t,e){let n=V(t),r=pc(n);n.C_.delete(e),r.Jo()&&BF(n,e),n.C_.size===0&&(r.Jo()?r.Xo():vo(n)&&n.x_.set("Unknown"))}function E0(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(q.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pc(t).c_(e)}function BF(t,e){t.O_.Oe(e),pc(t).l_(e)}function I0(t){t.O_=new Yb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),pc(t).start(),t.x_.p_()}function b0(t){return vo(t)&&!pc(t).Ho()&&t.C_.size>0}function vo(t){return V(t).v_.size===0}function UF(t){t.O_=void 0}function _8(t){return p(this,null,function*(){t.C_.forEach((e,n)=>{E0(t,e)})})}function v8(t,e){return p(this,null,function*(){UF(t),b0(t)?(t.x_.S_(e),I0(t)):t.x_.set("Unknown")})}function w8(t,e,n){return p(this,null,function*(){if(t.x_.set("Online"),e instanceof jm&&e.state===2&&e.cause)try{yield function(i,s){return p(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){D("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield cg(t,r)}else if(e instanceof Za?t.O_.$e(e):e instanceof Vm?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(q.min()))try{let r=yield kF(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.C_.get(l);u&&s.C_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.C_.get(c);if(!u)return;s.C_.set(c,u.withResumeToken(Et.EMPTY_BYTE_STRING,u.snapshotVersion)),BF(s,c);let d=new ac(u.target,c,l,u.sequenceNumber);E0(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){D("RemoteStore","Failed to raise snapshot:",r),yield cg(t,r)}})}function cg(t,e,n){return p(this,null,function*(){if(!ns(e))throw e;t.v_.add(1),yield ld(t),t.x_.set("Offline"),n||(n=()=>kF(t.localStore)),t.asyncQueue.enqueueRetryable(()=>p(this,null,function*(){D("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Tg(t)}))})}function $F(t,e){return e().catch(n=>cg(t,n,e))}function fc(t){return p(this,null,function*(){let e=V(t),n=es(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;E8(e);)try{let i=yield g8(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,I8(e,i)}catch(i){yield cg(e,i)}HF(e)&&zF(e)})}function E8(t){return vo(t)&&t.D_.length<10}function I8(t,e){t.D_.push(e);let n=es(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function HF(t){return vo(t)&&!es(t).Ho()&&t.D_.length>0}function zF(t){es(t).start()}function b8(t){return p(this,null,function*(){es(t).d_()})}function D8(t){return p(this,null,function*(){let e=es(t);for(let n of t.D_)e.I_(n.mutations)})}function C8(t,e,n){return p(this,null,function*(){let r=t.D_.shift(),i=Wb.from(r,e,n);yield $F(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield fc(t)})}function T8(t,e){return p(this,null,function*(){e&&es(t).P_&&(yield function(r,i){return p(this,null,function*(){if(function(o){return K5(o)&&o!==w.ABORTED}(i.code)){let s=r.D_.shift();es(r).Zo(),yield $F(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield fc(r)}})}(t,e)),HF(t)&&zF(t)})}function bk(t,e){return p(this,null,function*(){let n=V(t);n.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");let r=vo(n);n.v_.add(3),yield ld(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Tg(n)})}function UD(t,e){return p(this,null,function*(){let n=V(t);e?(n.v_.delete(2),yield Tg(n)):e||(n.v_.add(2),yield ld(n),n.x_.set("Unknown"))})}function pc(t){return t.N_||(t.N_=function(n,r,i){let s=V(n);return s.R_(),new FD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:_8.bind(null,t),To:v8.bind(null,t),u_:w8.bind(null,t)}),t.F_.push(e=>p(this,null,function*(){e?(t.N_.Zo(),b0(t)?I0(t):t.x_.set("Unknown")):(yield t.N_.stop(),UF(t))}))),t.N_}function es(t){return t.B_||(t.B_=function(n,r,i){let s=V(n);return s.R_(),new LD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:b8.bind(null,t),To:T8.bind(null,t),E_:D8.bind(null,t),T_:C8.bind(null,t)}),t.F_.push(e=>p(this,null,function*(){e?(t.B_.Zo(),yield fc(t)):(yield t.B_.stop(),t.D_.length>0&&(D("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}var $D=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new A(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function D0(t,e){if(Ze("AsyncQueue",`${e}: ${t}`),ns(t))return new A(w.UNAVAILABLE,`${e}: ${t}`);throw t}var lg=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||P.comparator(n.key,r.key):(n,r)=>P.comparator(n.key,r.key),this.keyedMap=Cu(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var ug=class{constructor(){this.L_=new Ve(P.comparator)}track(e){let n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):O():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}},uc=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,lg.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var HD=class{constructor(){this.q_=void 0,this.Q_=[]}},zD=class{constructor(){this.queries=new Sr(e=>Xk(e),Dg),this.onlineState="Unknown",this.K_=new Set}};function C0(t,e){return p(this,null,function*(){let n=V(t),r=e.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new HD),i)try{s.q_=yield n.onListen(r)}catch(o){let a=D0(o,`Initialization of query '${qa(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&S0(n)})}function T0(t,e){return p(this,null,function*(){let n=V(t),r=e.query,i=!1,s=n.queries.get(r);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),i=s.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function S8(t,e){let n=V(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.W_(i)&&(r=!0);o.q_=i}}r&&S0(n)}function A8(t,e,n){let r=V(t),i=r.queries.get(e);if(i)for(let s of i.Q_)s.onError(n);r.queries.delete(e)}function S0(t){t.K_.forEach(e=>{e.next()})}var Qu=class{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new uc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=uc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var dg=class{constructor(e){this.key=e}},hg=class{constructor(e){this.key=e}},qD=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=de(),this.mutatedKeys=de(),this.ua=eF(e),this.ca=new lg(this.ua)}get la(){return this.oa}ha(e,n){let r=n?n.Pa:new ug,i=n?n.ca:this.ca,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{let h=i.get(u),f=cd(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;h&&f?h.data.isEqual(f.data)?m!==g&&(r.track({type:3,doc:f}),v=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),v=!0,(c&&this.ua(f,c)>0||l&&this.ua(f,l)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),v=!0):h&&!f&&(r.track({type:1,doc:h}),v=!0,(c||l)&&(a=!0)),v&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{ca:o,Pa:r,Xi:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let o=e.Pa.k_();o.sort((u,d)=>function(f,m){let g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return O()}};return g(f)-g(m)}(u.type,d.type)||this.ua(u.doc,d.doc)),this.Ta(r),i=i!=null&&i;let a=n&&!i?this.Ea():[],c=this.aa.size===0&&this.current&&!i?1:0,l=c!==this._a;return this._a=c,o.length!==0||l?{snapshot:new uc(this.query,e.ca,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new ug,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=de(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new hg(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new dg(r))}),n}Ra(e){this.oa=e.hs,this.aa=de();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return uc.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},GD=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},WD=class{constructor(e){this.key=e,this.ma=!1}},KD=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Sr(a=>Xk(a),Dg),this.pa=new Map,this.ya=new Set,this.wa=new Ve(P.comparator),this.Sa=new Map,this.ba=new Gu,this.Da={},this.Ca=new Map,this.va=cc.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function R8(t,e){return p(this,null,function*(){let n=N0(t),r,i,s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{let o=yield tg(n.localStore,cn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield A0(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&Sg(n.remoteStore,o)}return i})}function A0(t,e,n,r,i){return p(this,null,function*(){t.Ma=(d,h,f)=>function(g,v,E,R){return p(this,null,function*(){let M=v.view.ha(E);M.Xi&&(M=yield xD(g.localStore,v.query,!1).then(({documents:te})=>v.view.ha(te,M)));let F=R&&R.targetChanges.get(v.targetId),ee=R&&R.targetMismatches.get(v.targetId)!=null,j=v.view.applyChanges(M,g.isPrimaryClient,F,ee);return QD(g,v.targetId,j.da),j.snapshot})}(t,d,h,f);let s=yield xD(t.localStore,e,!0),o=new qD(e,s.hs),a=o.ha(s.documents),c=zu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);QD(t,n,l.da);let u=new GD(e,n,o);return t.ga.set(e,u),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),l.snapshot})}function M8(t,e){return p(this,null,function*(){let n=V(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!Dg(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield lc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Ku(n.remoteStore,r.targetId),dc(n,r.targetId)}).catch(ts))):(dc(n,r.targetId),yield lc(n.localStore,r.targetId,!0))})}function x8(t,e,n){return p(this,null,function*(){let r=P0(t);try{let i=yield function(o,a){let c=V(o),l=Xe.now(),u=a.reduce((f,m)=>f.add(m.key),de()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=an(),g=de();return c.os.getEntries(f,u).next(v=>{m=v,m.forEach((E,R)=>{R.isValidDocument()||(g=g.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,m)).next(v=>{d=v;let E=[];for(let R of a){let M=W5(R,d.get(R.key).overlayedDocument);M!=null&&E.push(new qn(R.key,M,zk(M.value.mapValue),vt.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,E,a)}).next(v=>{h=v;let E=v.applyToLocalDocumentSet(d,g);return c.documentOverlayCache.saveOverlays(f,v.batchId,E)})}).then(()=>({batchId:h.batchId,changes:nF(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Da[o.currentUser.toKey()];l||(l=new Ve(ie)),l=l.insert(a,c),o.Da[o.currentUser.toKey()]=l}(r,i.batchId,n),yield rs(r,i.changes),yield fc(r.remoteStore)}catch(i){let s=D0(i,"Failed to persist write");n.reject(s)}})}function qF(t,e){return p(this,null,function*(){let n=V(t);try{let r=yield p8(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Sa.get(s);o&&(B(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?B(o.ma):i.removedDocuments.size>0&&(B(o.ma),o.ma=!1))}),yield rs(n,r,e)}catch(r){yield ts(r)}})}function Dk(t,e,n){let r=V(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ga.forEach((s,o)=>{let a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=V(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.Q_)h.U_(a)&&(l=!0)}),l&&S0(c)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function N8(t,e,n){return p(this,null,function*(){let r=V(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Sa.get(e),s=i&&i.key;if(s){let o=new Ve(P.comparator);o=o.insert(s,wt.newNoDocument(s,q.min()));let a=de().add(s),c=new Hu(q.min(),new Map,new Ve(ie),o,a);yield qF(r,c),r.wa=r.wa.remove(s),r.Sa.delete(e),x0(r)}else yield lc(r.localStore,e,!1).then(()=>dc(r,e,n)).catch(ts)})}function P8(t,e){return p(this,null,function*(){let n=V(t),r=e.batch.batchId;try{let i=yield f8(n.localStore,e);M0(n,r,null),R0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield rs(n,i)}catch(i){yield ts(i)}})}function O8(t,e,n){return p(this,null,function*(){let r=V(t);try{let i=yield function(o,a){let c=V(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(B(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,e);M0(r,e,n),R0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield rs(r,i)}catch(i){yield ts(i)}})}function R0(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function M0(t,e,n){let r=V(t),i=r.Da[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function dc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||GF(t,r)})}function GF(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(Ku(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),x0(t))}function QD(t,e,n){for(let r of n)r instanceof dg?(t.ba.addReference(r.key,e),k8(t,r)):r instanceof hg?(D("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||GF(t,r.key)):O()}function k8(t,e){let n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(D("SyncEngine","New document in limbo: "+n),t.ya.add(r),x0(t))}function x0(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new P(Me.fromString(e)),r=t.va.next();t.Sa.set(r,new WD(n)),t.wa=t.wa.insert(n,r),Sg(t.remoteStore,new ac(cn(ad(n.path)),r,"TargetPurposeLimboResolution",sn._e))}}function rs(t,e,n){return p(this,null,function*(){let r=V(t),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,c)=>{o.push(r.Ma(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);let u=AD.Ki(c.targetId,l);s.push(u)}}))}),yield Promise.all(o),r.fa.u_(i),yield function(c,l){return p(this,null,function*(){let u=V(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>_.forEach(l,h=>_.forEach(h.qi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>_.forEach(h.Qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!ns(d))throw d;D("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.ns.get(h),m=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(m);u.ns=u.ns.insert(h,g)}}})}(r.localStore,s))})}function F8(t,e){return p(this,null,function*(){let n=V(t);if(!n.currentUser.isEqual(e)){D("SyncEngine","User change. New user:",e.toKey());let r=yield OF(n.localStore,e);n.currentUser=e,function(s,o){s.Ca.forEach(a=>{a.forEach(c=>{c.reject(new A(w.CANCELLED,o))})}),s.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield rs(n,r.us)}})}function L8(t,e){let n=V(t),r=n.Sa.get(e);if(r&&r.ma)return de().add(r.key);{let i=de(),s=n.pa.get(e);if(!s)return i;for(let o of s){let a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}function V8(t,e){return p(this,null,function*(){let n=V(t),r=yield xD(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&QD(n,e.targetId,i.da),i})}function j8(t,e){return p(this,null,function*(){let n=V(t);return LF(n.localStore,e).then(r=>rs(n,r))})}function B8(t,e,n,r){return p(this,null,function*(){let i=V(t),s=yield function(a,c){let l=V(a),u=V(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.vn(d,c).next(h=>h?l.localDocuments.getDocuments(d,h):_.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?yield fc(i.remoteStore):n==="acknowledged"||n==="rejected"?(M0(i,e,r||null),R0(i,e),function(a,c){V(V(a).mutationQueue).Mn(c)}(i.localStore,e)):O(),yield rs(i,s)):D("SyncEngine","Cannot apply mutation batch with id: "+e)})}function U8(t,e){return p(this,null,function*(){let n=V(t);if(N0(n),P0(n),e===!0&&n.Fa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield Ck(n,r.toArray());n.Fa=!0,yield UD(n.remoteStore,!0);for(let s of i)Sg(n.remoteStore,s)}else if(e===!1&&n.Fa!==!1){let r=[],i=Promise.resolve();n.pa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(dc(n,o),lc(n.localStore,o,!0))),Ku(n.remoteStore,o)}),yield i,yield Ck(n,r),function(o){let a=V(o);a.Sa.forEach((c,l)=>{Ku(a.remoteStore,l)}),a.ba.mr(),a.Sa=new Map,a.wa=new Ve(P.comparator)}(n),n.Fa=!1,yield UD(n.remoteStore,!1)}})}function Ck(t,e,n){return p(this,null,function*(){let r=V(t),i=[],s=[];for(let o of e){let a,c=r.pa.get(o);if(c&&c.length!==0){a=yield tg(r.localStore,cn(c[0]));for(let l of c){let u=r.ga.get(l),d=yield V8(r,u);d.snapshot&&s.push(d.snapshot)}}else{let l=yield FF(r.localStore,o);a=yield tg(r.localStore,l),yield A0(r,WF(l),o,!1,a.resumeToken)}i.push(a)}return r.fa.u_(s),i})}function WF(t){return Yk(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function $8(t){return function(n){return V(V(n).persistence).Li()}(V(t).localStore)}function H8(t,e,n,r){return p(this,null,function*(){let i=V(t);if(i.Fa)return void D("SyncEngine","Ignoring unexpected query state notification.");let s=i.pa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{let o=yield LF(i.localStore,Jk(s[0])),a=Hu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Et.EMPTY_BYTE_STRING);yield rs(i,o,a);break}case"rejected":yield lc(i.localStore,e,!0),dc(i,e,r);break;default:O()}})}function z8(t,e,n){return p(this,null,function*(){let r=N0(t);if(r.Fa){for(let i of e){if(r.pa.has(i)){D("SyncEngine","Adding an already active target "+i);continue}let s=yield FF(r.localStore,i),o=yield tg(r.localStore,s);yield A0(r,WF(s),o.targetId,!1,o.resumeToken),Sg(r.remoteStore,o)}for(let i of n)r.pa.has(i)&&(yield lc(r.localStore,i,!1).then(()=>{Ku(r.remoteStore,i),dc(r,i)}).catch(ts))}})}function N0(t){let e=V(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N8.bind(null,e),e.fa.u_=S8.bind(null,e.eventManager),e.fa.xa=A8.bind(null,e.eventManager),e}function P0(t){let e=V(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O8.bind(null,e),e}var Yu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return p(this,null,function*(){this.serializer=Cg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return PF(this.persistence,new eg,e.initialUser,this.serializer)}createPersistence(e){return new Xm(Jm.Hr,this.serializer)}createSharedClientState(e){return new ig}terminate(){return p(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var fg=class t extends Yu{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return p(this,null,function*(){yield Yn(t.prototype,this,"initialize").call(this,e),yield this.Na.initialize(this,e),yield P0(this.Na.syncEngine),yield fc(this.Na.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return PF(this.persistence,new eg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new fD(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new Mb(n,this.persistence);return new Rb(e.asyncQueue,r)}createPersistence(e){let n=NF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new SD(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,jF(),Cm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new ig}},YD=class t extends fg{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return p(this,null,function*(){yield Yn(t.prototype,this,"initialize").call(this,e);let n=this.Na.syncEngine;this.sharedClientState instanceof Nu&&(this.sharedClientState.syncEngine={Zs:B8.bind(null,n),Xs:H8.bind(null,n),eo:z8.bind(null,n),Li:$8.bind(null,n),Ys:j8.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>p(this,null,function*(){yield U8(this.Na.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=jF();if(!Nu.D(n))throw new A(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=NF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Nu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Zu=class{initialize(e,n){return p(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Dk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=F8.bind(null,this.syncEngine),yield UD(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new zD}()}createDatastore(e){let n=Cg(e.databaseInfo.databaseId),r=function(s){return new kD(s)}(e.databaseInfo);return function(s,o,a,c){return new VD(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new BD(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Dk(this.syncEngine,n,0),function(){return sg.D()?new sg:new PD}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,u){let d=new KD(i,s,o,a,c,l);return u&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return p(this,null,function*(){var e;yield function(r){return p(this,null,function*(){let i=V(r);D("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield ld(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Xu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Ze("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var ZD=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ht.UNAUTHENTICATED,this.clientId=Tm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>p(this,null,function*(){D("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(D("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new A(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=D0(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function yb(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>p(this,null,function*(){r.isEqual(i)||(yield OF(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Tk(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield G8(t);D("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>bk(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>bk(e.remoteStore,i)),t._onlineComponents=e})}function q8(t){return t.name==="FirebaseError"?t.code===w.FAILED_PRECONDITION||t.code===w.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function G8(t){return p(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){D("FirestoreClient","Using user provided OfflineComponentProvider");try{yield yb(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!q8(n))throw n;Pu("Error using user provided cache. Falling back to memory cache: "+n),yield yb(t,new Yu)}}else D("FirestoreClient","Using default OfflineComponentProvider"),yield yb(t,new Yu);return t._offlineComponents})}function KF(t){return p(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(D("FirestoreClient","Using user provided OnlineComponentProvider"),yield Tk(t,t._uninitializedComponentsProvider._online)):(D("FirestoreClient","Using default OnlineComponentProvider"),yield Tk(t,new Zu))),t._onlineComponents})}function W8(t){return KF(t).then(e=>e.syncEngine)}function pg(t){return p(this,null,function*(){let e=yield KF(t),n=e.eventManager;return n.onListen=R8.bind(null,e.syncEngine),n.onUnlisten=M8.bind(null,e.syncEngine),n})}function K8(t,e,n={}){let r=new Sn;return t.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(s,o,a,c,l){let u=new Xu({next:h=>{o.enqueueAndForget(()=>T0(s,d));let f=h.docs.has(a);!f&&h.fromCache?l.reject(new A(w.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?l.reject(new A(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new Qu(ad(a.path),u,{includeMetadataChanges:!0,Z_:!0});return C0(s,d)}(yield pg(t),t.asyncQueue,e,n,r)})),r.promise}function Q8(t,e,n={}){let r=new Sn;return t.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(s,o,a,c,l){let u=new Xu({next:h=>{o.enqueueAndForget(()=>T0(s,d)),h.fromCache&&c.source==="server"?l.reject(new A(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new Qu(a,u,{includeMetadataChanges:!0,Z_:!0});return C0(s,d)}(yield pg(t),t.asyncQueue,e,n,r)})),r.promise}function QF(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Sk=new Map;function YF(t,e,n){if(!n)throw new A(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Y8(t,e,n,r){if(e===!0&&r===!0)throw new A(w.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ak(t){if(!P.isDocumentKey(t))throw new A(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Rk(t){if(P.isDocumentKey(t))throw new A(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ag(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":O()}function Kt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new A(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Ag(t);throw new A(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Z8(t,e){if(e<=0)throw new A(w.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var mg=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new A(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new A(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Y8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QF((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new A(w.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new A(w.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new A(w.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ju=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new A(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new A(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wb;switch(r.type){case"firstParty":return new bb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new A(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=Sk.get(n);r&&(D("ComponentProvider","Removing Datastore"),Sk.delete(n),r.terminate())}(this),Promise.resolve()}};var Xr=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Mt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},qi=class t extends Xr{constructor(e,n,r){super(e,n,ad(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new P(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function ZF(t,e,...n){if(t=ze(t),YF("collection","path",e),t instanceof Ju){let r=Me.fromString(e,...n);return Rk(r),new qi(t,null,r)}{if(!(t instanceof Mt||t instanceof qi))throw new A(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Me.fromString(e,...n));return Rk(r),new qi(t.firestore,null,r)}}function O0(t,e,...n){if(t=ze(t),arguments.length===1&&(e=Tm.newId()),YF("doc","path",e),t instanceof Ju){let r=Me.fromString(e,...n);return Ak(r),new Mt(t,null,new P(r))}{if(!(t instanceof Mt||t instanceof qi))throw new A(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Me.fromString(e,...n));return Ak(r),new Mt(t.firestore,t instanceof qi?t.converter:null,new P(r))}}var XD=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new og(this,"async_queue_retry"),this._u=()=>{let n=Cm();n&&D("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Cm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=Cm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new Sn;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return p(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!ns(e))throw e;D("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ze("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);let i=$D.createAndSchedule(this,e,n,r,s=>this.lu(s));return this.nu.push(i),i}au(){this.ru&&O()}verifyOperationInProgress(){}hu(){return p(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};function Mk(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Rn=class extends Ju{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new XD}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||JF(this),this._firestoreClient.terminate()}};function XF(t,e,n){n||(n="(default)");let r=$l(t,"firestore");if(r.isInitialized(n)){let i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Mi(s,e))return i;throw new A(w.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new A(w.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new A(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function ud(t){return t._firestoreClient||JF(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function JF(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,u){return new xb(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,QF(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new ZD(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var ed=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Et.fromBase64String(e))}catch(n){throw new A(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var yo=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new A(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var td=class{constructor(e){this._methodName=e}};var nd=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new A(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new A(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}};var X8=/^__.*__$/,JD=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ji(e,this.data,n,this.fieldTransforms)}},gg=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function e1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw O()}}var e0=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return _g(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(e1(this.du)&&X8.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},t0=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cg(e)}Su(e,n,r,i=!1){return new e0({du:e,methodName:n,wu:r,path:st.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function dd(t){let e=t._freezeSettings(),n=Cg(t._databaseId);return new t0(t._databaseId,!!e.ignoreUndefinedProperties,n)}function k0(t,e,n,r,i,s={}){let o=t.Su(s.merge||s.mergeFields?2:0,e,n,i);F0("Data must be an object, but it was:",o,r);let a=r1(r,o),c,l;if(s.merge)c=new on(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let h=n0(e,d,n);if(!o.contains(h))throw new A(w.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);s1(u,h)||u.push(h)}c=new on(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new JD(new Bt(a),c,l)}var yg=class t extends td{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function t1(t,e,n,r){let i=t.Su(1,e,n);F0("Data must be an object, but it was:",i,r);let s=[],o=Bt.empty();_o(r,(c,l)=>{let u=L0(e,c,n);l=ze(l);let d=i.fu(u);if(l instanceof yg)s.push(u);else{let h=hd(l,d);h!=null&&(s.push(u),o.set(u,h))}});let a=new on(s);return new gg(o,a,i.fieldTransforms)}function n1(t,e,n,r,i,s){let o=t.Su(1,e,n),a=[n0(e,r,n)],c=[i];if(s.length%2!=0)throw new A(w.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(n0(e,s[h])),c.push(s[h+1]);let l=[],u=Bt.empty();for(let h=a.length-1;h>=0;--h)if(!s1(l,a[h])){let f=a[h],m=c[h];m=ze(m);let g=o.fu(f);if(m instanceof yg)l.push(f);else{let v=hd(m,g);v!=null&&(l.push(f),u.set(f,v))}}let d=new on(l);return new gg(u,d,o.fieldTransforms)}function J8(t,e,n,r=!1){return hd(n,t.Su(r?4:3,e))}function hd(t,e){if(i1(t=ze(t)))return F0("Unsupported field value:",e,t),r1(t,e);if(t instanceof td)return function(r,i){if(!e1(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=hd(a,i.gu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Xe.fromDate(r);return{timestampValue:oc(i.serializer,s)}}if(r instanceof Xe){let s=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:oc(i.serializer,s)}}if(r instanceof nd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ed)return{bytesValue:fF(i.serializer,r._byteString)};if(r instanceof Mt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:v0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Ag(r)}`)}(t,e)}function r1(t,e){let n={};return $k(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_o(t,(r,i)=>{let s=hd(i,e.Ru(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function i1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof nd||t instanceof ed||t instanceof Mt||t instanceof td)}function F0(t,e,n){if(!i1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Ag(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function n0(t,e,n){if((e=ze(e))instanceof yo)return e._internalPath;if(typeof e=="string")return L0(t,e);throw _g("Field path arguments must be of type string or ",t,!1,void 0,n)}var eK=new RegExp("[~\\*/\\[\\]]");function L0(t,e,n){if(e.search(eK)>=0)throw _g(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yo(...e.split("."))._internalPath}catch{throw _g(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _g(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new A(w.INVALID_ARGUMENT,a+t+c)}function s1(t,e){return t.some(n=>n.isEqual(e))}var vg=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new r0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Rg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},r0=class extends vg{data(){return super.data()}};function Rg(t,e){return typeof e=="string"?L0(t,e):e instanceof yo?e._internalPath:e._delegate._internalPath}function o1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new A(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rd=class{},id=class extends rd{};function a1(t,e,...n){let r=[];e instanceof rd&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof i0).length,a=s.filter(c=>c instanceof wg).length;if(o>1||o>0&&a>0)throw new A(w.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var wg=class t extends id{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return d1(e._query,n),new Xr(e.firestore,e.converter,zb(e._query,n))}_parse(e){let n=dd(e.firestore);return function(s,o,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new A(w.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Nk(d,u);let f=[];for(let m of d)f.push(xk(c,s,m));h={arrayValue:{values:f}}}else h=xk(c,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Nk(d,u),h=J8(a,o,d,u==="in"||u==="not-in");return _e.create(l,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function c1(t,e,n){let r=e,i=Rg("where",t);return wg._create(i,r,n)}var i0=class t extends rd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Se.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)d1(o,c),o=zb(o,c)}(e._query,n),new Xr(e.firestore,e.converter,zb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var s0=class t extends id{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new A(w.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new A(w.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lo(s,o)}(e._query,this._field,this._direction);return new Xr(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Yi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function l1(t,e="asc"){let n=e,r=Rg("orderBy",t);return s0._create(r,n)}var o0=class t extends id{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Xr(e.firestore,e.converter,Fm(e._query,this._limit,this._limitType))}};function u1(t){return Z8("limit",t),o0._create("limit",t,"F")}function xk(t,e,n){if(typeof(n=ze(n))=="string"){if(n==="")throw new A(w.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zk(e)&&n.indexOf("/")!==-1)throw new A(w.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Me.fromString(n));if(!P.isDocumentKey(r))throw new A(w.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ju(t,new P(r))}if(n instanceof Mt)return ju(t,n._key);throw new A(w.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ag(n)}.`)}function Nk(t,e){if(!Array.isArray(t)||t.length===0)throw new A(w.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function d1(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new A(w.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new A(w.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var a0=class{convertValue(e,n="none"){switch(co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw O()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return _o(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new nd(We(e.latitude),We(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=g0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Lu(e));default:return null}}convertTimestamp(e){let n=Gi(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Me.fromString(e);B(bF(r));let i=new tc(r.get(1),r.get(3)),s=new P(r.popFirst(5));return i.isEqual(n)||Ze(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function V0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ro=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Eg=class extends vg{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Xa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Rg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Xa=class extends Eg{data(e={}){return super.data(e)}},Ig=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ro(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Xa(this._firestore,this._userDataWriter,r.key,r,new ro(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new A(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Xa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ro(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Xa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ro(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:tK(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function tK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return O()}}function h1(t){t=Kt(t,Mt);let e=Kt(t.firestore,Rn);return K8(ud(e),t._key).then(n=>_1(e,t,n))}var sd=class extends a0{constructor(e){super(),this.firestore=e}convertBytes(e){return new ed(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}};function f1(t){t=Kt(t,Xr);let e=Kt(t.firestore,Rn),n=ud(e),r=new sd(e);return o1(t._query),Q8(n,t._query).then(i=>new Ig(e,r,t,i))}function p1(t,e,n){t=Kt(t,Mt);let r=Kt(t.firestore,Rn),i=V0(t.converter,e,n);return fd(r,[k0(dd(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,vt.none())])}function m1(t,e,n,...r){t=Kt(t,Mt);let i=Kt(t.firestore,Rn),s=dd(i),o;return o=typeof(e=ze(e))=="string"||e instanceof yo?n1(s,"updateDoc",t._key,e,n,r):t1(s,"updateDoc",t._key,e),fd(i,[o.toMutation(t._key,vt.exists(!0))])}function g1(t){return fd(Kt(t.firestore,Rn),[new po(t._key,vt.none())])}function y1(t,e){let n=Kt(t.firestore,Rn),r=O0(t),i=V0(t.converter,e);return fd(n,[k0(dd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,vt.exists(!1))]).then(()=>r)}function j0(t,...e){var n,r,i;t=ze(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Mk(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges};if(Mk(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,l,u;if(t instanceof Mt)l=Kt(t.firestore,Rn),u=ad(t._key.path),c={next:d=>{e[o]&&e[o](_1(l,t,d))},error:e[o+1],complete:e[o+2]};else{let d=Kt(t,Xr);l=Kt(d.firestore,Rn),u=d._query;let h=new sd(l);c={next:f=>{e[o]&&e[o](new Ig(l,h,d,f))},error:e[o+1],complete:e[o+2]},o1(t._query)}return function(h,f,m,g){let v=new Xu(g),E=new Qu(f,v,m);return h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return C0(yield pg(h),E)})),()=>{v.La(),h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return T0(yield pg(h),E)}))}}(ud(l),u,a,c)}function fd(t,e){return function(r,i){let s=new Sn;return r.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return x8(yield W8(r),i,s)})),s.promise}(ud(t),e)}function _1(t,e,n){let r=n.docs.get(e._key),i=new sd(t);return new Eg(t,i,e._key,r,new ro(n.hasPendingWrites,n.fromCache),e.converter)}var c0=class{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=w1(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}};function v1(t){return new c0(t)}var l0=class{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new Zu,this._offlineComponentProvider=new fg(this._onlineComponentProvider,e?.cacheSizeBytes,this.forceOwnership)}},u0=class{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new Zu,this._offlineComponentProvider=new YD(this._onlineComponentProvider,e?.cacheSizeBytes)}};function w1(t){return new l0(t?.forceOwnership)}function E1(){return new u0}var d0=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=dd(e)}set(e,n,r){this._verifyNotCommitted();let i=_b(e,this._firestore),s=V0(i.converter,n,r),o=k0(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,vt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let s=_b(e,this._firestore),o;return o=typeof(n=ze(n))=="string"||n instanceof yo?n1(this._dataReader,"WriteBatch.update",s._key,n,r,i):t1(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,vt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=_b(e,this._firestore);return this._mutations=this._mutations.concat(new po(n._key,vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new A(w.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function _b(t,e){if((t=ze(t)).firestore!==e)throw new A(w.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function I1(t){return ud(t=Kt(t,Rn)),new d0(t,e=>fd(t,e))}(function(e,n=!0){(function(i){hc=i})(Oi),Pi(new bn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Rn(new Eb(r.getProvider("auth-internal")),new Cb(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new A(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tc(l.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),it(PO,"4.4.1",e),it(PO,"4.4.1","esm2017")})();var Mg=function(){return Mg=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Mg.apply(this,arguments)};var sK={includeMetadataChanges:!1};function b1(t,e){return e===void 0&&(e=sK),new W(function(n){var r=j0(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function D1(t){return b1(t,{includeMetadataChanges:!0})}function C1(t,e){return e===void 0&&(e={}),D1(t).pipe(oe(function(n){return T1(n,e)}))}function T1(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Mg(Mg({},r),(n={},n[e.idField]=t.id,n))}var pd=class{constructor(e){return e}},S1="firestore",B0=class{constructor(){return Hl(S1)}};var U0=new x("angularfire2.firestore-instances");function oK(t,e){let n=_p(S1,t,e);return n&&new pd(n)}function aK(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new pd(r)}}var cK={provide:B0,deps:[[new mt,U0]]},lK={provide:pd,useFactory:oK,deps:[[new mt,U0],qr]},uK=(()=>{class t{constructor(){it("angularfire",Bs.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ce({type:t});static \u0275inj=ae({providers:[lK,cK]})}return t})();function Xle(t,...e){return{ngModule:uK,providers:[{provide:U0,useFactory:aK(t),multi:!0,deps:[L,Ne,Ma,Us,[new mt,Zl],[new mt,Ra],...e]}]}}var Jle=Re(C1,!0);var eue=Re(y1,!0);var tue=Re(ZF,!0);var nue=Re(g1,!0);var rue=Re(O0,!0);var iue=Re(h1,!0);var sue=Re(f1,!0);var oue=Re(XF,!0),aue=Re(u1,!0);var cue=Re(l1,!0),lue=Re(v1,!0),uue=Re(E1,!0);var due=Re(a1,!0);var hue=Re(p1,!0);var fue=Re(m1,!0);var pue=Re(c1,!0),mue=Re(I1,!0);var se=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(se||{}),Ar="*";function _ue(t,e){return{type:se.Trigger,name:t,definitions:e,options:{}}}function vue(t,e=null){return{type:se.Animate,styles:e,timings:t}}function A1(t,e=null){return{type:se.Sequence,steps:t,options:e}}function $0(t){return{type:se.Style,styles:t,offset:null}}function wue(t,e,n){return{type:se.State,name:t,styles:e,options:n}}function Eue(t){return{type:se.Keyframes,steps:t}}function Iue(t,e,n=null){return{type:se.Transition,expr:t,animation:e,options:n}}var is=class{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},md=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((n,r)=>n===null||r.totalTime>n.totalTime?r:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},xg="!";function R1(t){return new T(3e3,!1)}function dK(){return new T(3100,!1)}function hK(){return new T(3101,!1)}function fK(t){return new T(3001,!1)}function pK(t){return new T(3003,!1)}function mK(t){return new T(3004,!1)}function gK(t,e){return new T(3005,!1)}function yK(){return new T(3006,!1)}function _K(){return new T(3007,!1)}function vK(t,e){return new T(3008,!1)}function wK(t){return new T(3002,!1)}function EK(t,e,n,r,i){return new T(3010,!1)}function IK(){return new T(3011,!1)}function bK(){return new T(3012,!1)}function DK(){return new T(3200,!1)}function CK(){return new T(3202,!1)}function TK(){return new T(3013,!1)}function SK(t){return new T(3014,!1)}function AK(t){return new T(3015,!1)}function RK(t){return new T(3016,!1)}function MK(t,e){return new T(3404,!1)}function xK(t){return new T(3502,!1)}function NK(t){return new T(3503,!1)}function PK(){return new T(3300,!1)}function OK(t){return new T(3504,!1)}function kK(t){return new T(3301,!1)}function FK(t,e){return new T(3302,!1)}function LK(t){return new T(3303,!1)}function VK(t,e){return new T(3400,!1)}function jK(t){return new T(3401,!1)}function BK(t){return new T(3402,!1)}function UK(t,e){return new T(3505,!1)}function ss(t){switch(t.length){case 0:return new is;case 1:return t[0];default:return new md(t)}}function H1(t,e,n=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==o,d=u&&a||new Map;c.forEach((h,f)=>{let m=f,g=h;if(f!=="offset")switch(m=t.normalizePropertyName(m,i),g){case xg:g=n.get(f);break;case Ar:g=r.get(f);break;default:g=t.normalizeStyleValue(f,m,g,i);break}d.set(m,g)}),u||s.push(d),a=d,o=l}),i.length)throw xK(i);return s}function dC(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&H0(n,"start",t)));break;case"done":t.onDone(()=>r(n&&H0(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&H0(n,"destroy",t)));break}}function H0(t,e,n){let r=n.totalTime,i=!!n.disabled,s=hC(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,r??t.totalTime,i),o=t._data;return o!=null&&(s._data=o),s}function hC(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function un(t,e,n){let r=t.get(e);return r||t.set(e,r=n),r}function M1(t){let e=t.indexOf(":"),n=t.substring(1,e),r=t.slice(e+1);return[n,r]}var $K=typeof document>"u"?null:document.documentElement;function fC(t){let e=t.parentNode||t.host||null;return e===$K?null:e}function HK(t){return t.substring(1,6)=="ebkit"}var wo=null,x1=!1;function zK(t){wo||(wo=qK()||{},x1=wo.style?"WebkitAppearance"in wo.style:!1);let e=!0;return wo.style&&!HK(t)&&(e=t in wo.style,!e&&x1&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in wo.style)),e}function qK(){return typeof document<"u"?document.body:null}function z1(t,e){for(;e;){if(e===t)return!0;e=fC(e)}return!1}function q1(t,e,n){if(n)return Array.from(t.querySelectorAll(e));let r=t.querySelector(e);return r?[r]:[]}var pC=(()=>{let e=class e{validateStyleProperty(r){return zK(r)}matchesElement(r,i){return!1}containsElement(r,i){return z1(r,i)}getParentElement(r){return fC(r)}query(r,i,s){return q1(r,i,s)}computeStyle(r,i,s){return s||""}animate(r,i,s,o,a,c=[],l){return new is(s,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),_C=class _C{};_C.NOOP=new pC;var bo=_C,Do=class{};var GK=1e3,G1="{{",WK="}}",W1="ng-enter",Q0="ng-leave",Ng="ng-trigger",Lg=".ng-trigger",N1="ng-animating",Y0=".ng-animating";function Jr(t){if(typeof t=="number")return t;let e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Z0(parseFloat(e[1]),e[2])}function Z0(t,e){switch(e){case"s":return t*GK;default:return t}}function Vg(t,e,n){return t.hasOwnProperty("duration")?t:KK(t,e,n)}function KK(t,e,n){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof t=="string"){let a=t.match(r);if(a===null)return e.push(R1(t)),{duration:0,delay:0,easing:""};i=Z0(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(s=Z0(parseFloat(c),a[4]));let l=a[5];l&&(o=l)}else i=t;if(!n){let a=!1,c=e.length;i<0&&(e.push(dK()),a=!0),s<0&&(e.push(hK()),a=!0),a&&e.splice(c,0,R1(t))}return{duration:i,delay:s,easing:o}}function QK(t){return t.length?t[0]instanceof Map?t:t.map(e=>new Map(Object.entries(e))):[]}function Rr(t,e,n){e.forEach((r,i)=>{let s=mC(i);n&&!n.has(i)&&n.set(i,t.style[s]),t.style[s]=r})}function Io(t,e){e.forEach((n,r)=>{let i=mC(r);t.style[i]=""})}function gd(t){return Array.isArray(t)?t.length==1?t[0]:A1(t):t}function YK(t,e,n){let r=e.params||{},i=K1(t);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||n.push(fK(s))})}var X0=new RegExp(`${G1}\\s*(.+?)\\s*${WK}`,"g");function K1(t){let e=[];if(typeof t=="string"){let n;for(;n=X0.exec(t);)e.push(n[1]);X0.lastIndex=0}return e}function _d(t,e,n){let r=`${t}`,i=r.replace(X0,(s,o)=>{let a=e[o];return a==null&&(n.push(pK(o)),a=""),a.toString()});return i==r?t:i}var ZK=/-+([a-z0-9])/g;function mC(t){return t.replace(ZK,(...e)=>e[1].toUpperCase())}function XK(t,e){return t===0||e===0}function JK(t,e,n){if(n.size&&e.length){let r=e[0],i=[];if(n.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,gC(t,a)))}}return e}function ln(t,e,n){switch(e.type){case se.Trigger:return t.visitTrigger(e,n);case se.State:return t.visitState(e,n);case se.Transition:return t.visitTransition(e,n);case se.Sequence:return t.visitSequence(e,n);case se.Group:return t.visitGroup(e,n);case se.Animate:return t.visitAnimate(e,n);case se.Keyframes:return t.visitKeyframes(e,n);case se.Style:return t.visitStyle(e,n);case se.Reference:return t.visitReference(e,n);case se.AnimateChild:return t.visitAnimateChild(e,n);case se.AnimateRef:return t.visitAnimateRef(e,n);case se.Query:return t.visitQuery(e,n);case se.Stagger:return t.visitStagger(e,n);default:throw mK(e.type)}}function gC(t,e){return window.getComputedStyle(t)[e]}var eQ=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),jg=class extends Do{normalizePropertyName(e,n){return mC(e)}normalizeStyleValue(e,n,r,i){let s="",o=r.toString().trim();if(eQ.has(n)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(gK(e,r))}return o+s}};var Bg="*";function tQ(t,e){let n=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(r=>nQ(r,n,e)):n.push(t),n}function nQ(t,e,n){if(t[0]==":"){let c=rQ(t,n);if(typeof c=="function"){e.push(c);return}t=c}let r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return n.push(AK(t)),e;let i=r[1],s=r[2],o=r[3];e.push(P1(i,o));let a=i==Bg&&o==Bg;s[0]=="<"&&!a&&e.push(P1(o,i))}function rQ(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,r)=>parseFloat(r)>parseFloat(n);case":decrement":return(n,r)=>parseFloat(r)<parseFloat(n);default:return e.push(RK(t)),"* => *"}}var Pg=new Set(["true","1"]),Og=new Set(["false","0"]);function P1(t,e){let n=Pg.has(t)||Og.has(t),r=Pg.has(e)||Og.has(e);return(i,s)=>{let o=t==Bg||t==i,a=e==Bg||e==s;return!o&&n&&typeof i=="boolean"&&(o=i?Pg.has(t):Og.has(t)),!a&&r&&typeof s=="boolean"&&(a=s?Pg.has(e):Og.has(e)),o&&a}}var Q1=":self",iQ=new RegExp(`s*${Q1}s*,?`,"g");function Y1(t,e,n,r){return new J0(t).build(e,n,r)}var O1="",J0=class{constructor(e){this._driver=e}build(e,n,r){let i=new eC(n);return this._resetContextStyleTimingState(i),ln(this,gd(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=O1,e.collectedStyles=new Map,e.collectedStyles.set(O1,new Map),e.currentTime=0}visitTrigger(e,n){let r=n.queryCount=0,i=n.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&n.errors.push(yK()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),a.type==se.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,n))}),c.name=l}else if(a.type==se.Transition){let c=this.visitTransition(a,n);r+=c.queryCount,i+=c.depCount,o.push(c)}else n.errors.push(_K())}),{type:se.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,n){let r=this.visitStyle(e.styles,n),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{K1(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&n.errors.push(vK(e.name,[...s.values()]))}return{type:se.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;let r=ln(this,gd(e.animation),n),i=tQ(e.expr,n.errors);return{type:se.Transition,matchers:i,animation:r,queryCount:n.queryCount,depCount:n.depCount,options:Eo(e.options)}}visitSequence(e,n){return{type:se.Sequence,steps:e.steps.map(r=>ln(this,r,n)),options:Eo(e.options)}}visitGroup(e,n){let r=n.currentTime,i=0,s=e.steps.map(o=>{n.currentTime=r;let a=ln(this,o,n);return i=Math.max(i,n.currentTime),a});return n.currentTime=i,{type:se.Group,steps:s,options:Eo(e.options)}}visitAnimate(e,n){let r=cQ(e.timings,n.errors);n.currentAnimateTimings=r;let i,s=e.styles?e.styles:$0({});if(s.type==se.Keyframes)i=this.visitKeyframes(s,n);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};r.easing&&(l.easing=r.easing),o=$0(l)}n.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,n);c.isEmptyStep=a,i=c}return n.currentAnimateTimings=null,{type:se.Animate,timings:r,style:i,options:null}}visitStyle(e,n){let r=this._makeStyleAst(e,n);return this._validateStyleAst(r,n),r}_makeStyleAst(e,n){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Ar?r.push(a):n.errors.push(wK(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(G1)>=0){s=!0;break}}}),{type:se.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,n){let r=n.currentAnimateTimings,i=n.currentTime,s=n.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=n.collectedStyles.get(n.currentQuerySelector),u=l.get(c),d=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(n.errors.push(EK(c,u.startTime,u.endTime,s,i)),d=!1),s=u.startTime),d&&l.set(c,{startTime:s,endTime:i}),n.options&&YK(a,n.options,n.errors)})})}visitKeyframes(e,n){let r={type:se.Keyframes,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(IK()),r;let i=1,s=0,o=[],a=!1,c=!1,l=0,u=e.steps.map(E=>{let R=this._makeStyleAst(E,n),M=R.offset!=null?R.offset:aQ(R.styles),F=0;return M!=null&&(s++,F=R.offset=M),c=c||F<0||F>1,a=a||F<l,l=F,o.push(F),R});c&&n.errors.push(bK()),a&&n.errors.push(DK());let d=e.steps.length,h=0;s>0&&s<d?n.errors.push(CK()):s==0&&(h=i/(d-1));let f=d-1,m=n.currentTime,g=n.currentAnimateTimings,v=g.duration;return u.forEach((E,R)=>{let M=h>0?R==f?1:h*R:o[R],F=M*v;n.currentTime=m+g.delay+F,g.duration=F,this._validateStyleAst(E,n),E.offset=M,r.styles.push(E)}),r}visitReference(e,n){return{type:se.Reference,animation:ln(this,gd(e.animation),n),options:Eo(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:se.AnimateChild,options:Eo(e.options)}}visitAnimateRef(e,n){return{type:se.AnimateRef,animation:this.visitReference(e.animation,n),options:Eo(e.options)}}visitQuery(e,n){let r=n.currentQuerySelector,i=e.options||{};n.queryCount++,n.currentQuery=e;let[s,o]=sQ(e.selector);n.currentQuerySelector=r.length?r+" "+s:s,un(n.collectedStyles,n.currentQuerySelector,new Map);let a=ln(this,gd(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:se.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Eo(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(TK());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Vg(e.timings,n.errors,!0);return{type:se.Stagger,animation:ln(this,gd(e.animation),n),timings:r,options:null}}};function sQ(t){let e=!!t.split(/\s*,\s*/).find(n=>n==Q1);return e&&(t=t.replace(iQ,"")),t=t.replace(/@\*/g,Lg).replace(/@\w+/g,n=>Lg+"-"+n.slice(1)).replace(/:animating/g,Y0),[t,e]}function oQ(t){return t?I({},t):null}var eC=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function aQ(t){if(typeof t=="string")return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){let r=n;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}function cQ(t,e){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let s=Vg(t,e).duration;return z0(s,0,"")}let n=t;if(n.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=z0(0,0,"");return s.dynamic=!0,s.strValue=n,s}let i=Vg(n,e);return z0(i.duration,i.delay,i.easing)}function Eo(t){return t?(t=I({},t),t.params&&(t.params=oQ(t.params))):t={},t}function z0(t,e,n){return{duration:t,delay:e,easing:n}}function yC(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var vd=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}},lQ=1,uQ=":enter",dQ=new RegExp(uQ,"g"),hQ=":leave",fQ=new RegExp(hQ,"g");function Z1(t,e,n,r,i,s=new Map,o=new Map,a,c,l=[]){return new tC().buildKeyframes(t,e,n,r,i,s,o,a,c,l)}var tC=class{buildKeyframes(e,n,r,i,s,o,a,c,l,u=[]){l=l||new vd;let d=new nC(e,n,l,i,s,u,[]);d.options=c;let h=c.delay?Jr(c.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,c),ln(this,r,d);let f=d.timelines.filter(m=>m.containsAnimation());if(f.length&&a.size){let m;for(let g=f.length-1;g>=0;g--){let v=f[g];if(v.element===n){m=v;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,d.errors,c)}return f.length?f.map(m=>m.buildKeyframes()):[yC(n,[],[],[],0,h,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){let r=n.subInstructions.get(n.element);if(r){let i=n.createSubContext(e.options),s=n.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&n.transformIntoNewTimeline(o)}n.previousNode=e}visitAnimateRef(e,n){let r=n.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,r),this.visitReference(e.animation,r),n.transformIntoNewTimeline(r.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:Jr(_d(s,i?.params??{},n.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,n,r){let s=n.currentTimeline.currentTime,o=r.duration!=null?Jr(r.duration):null,a=r.delay!=null?Jr(r.delay):null;return o!==0&&e.forEach(c=>{let l=n.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,n){n.updateOptions(e.options,!0),ln(this,e.animation,n),n.previousNode=e}visitSequence(e,n){let r=n.subContextCount,i=n,s=e.options;if(s&&(s.params||s.delay)&&(i=n.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==se.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Ug);let o=Jr(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>ln(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){let r=[],i=n.currentTimeline.currentTime,s=e.options&&e.options.delay?Jr(e.options.delay):0;e.steps.forEach(o=>{let a=n.createSubContext(e.options);s&&a.delayNextStep(s),ln(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>n.currentTimeline.mergeTimelineCollectedStyles(o)),n.transformIntoNewTimeline(i),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){let r=e.strValue,i=n.params?_d(r,n.params,n.errors):r;return Vg(i,n.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){let r=n.currentAnimateTimings=this._visitTiming(e.timings,n),i=n.currentTimeline;r.delay&&(n.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==se.Keyframes?this.visitKeyframes(s,n):(n.incrementTime(r.duration),this.visitStyle(s,n),i.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){let r=n.currentTimeline,i=n.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){let r=n.currentAnimateTimings,i=n.currentTimeline.duration,s=r.duration,a=n.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(i+s),n.previousNode=e}visitQuery(e,n){let r=n.currentTimeline.currentTime,i=e.options||{},s=i.delay?Jr(i.delay):0;s&&(n.previousNode.type===se.Style||r==0&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Ug);let o=r,a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,n.errors);n.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{n.currentQueryIndex=u;let d=n.createSubContext(e.options,l);s&&d.delayNextStep(s),l===n.element&&(c=d.currentTimeline),ln(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let h=d.currentTimeline.currentTime;o=Math.max(o,h)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),c&&(n.currentTimeline.mergeTimelineCollectedStyles(c),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){let r=n.parentContext,i=n.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(n.currentQueryTotal-1),c=o*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let u=n.currentTimeline;c&&u.delayNextStep(c);let d=u.currentTime;ln(this,e.animation,n),n.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}},Ug={},nC=class t{constructor(e,n,r,i,s,o,a,c){this._driver=e,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ug,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new $g(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Jr(r.duration)),r.delay!=null&&(i.delay=Jr(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!n||!o.hasOwnProperty(a))&&(o[a]=_d(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let n=this.options.params;if(n){let r=e.params={};Object.keys(n).forEach(i=>{r[i]=n[i]})}}return e}createSubContext(e=null,n,r){let i=n||this.element,s=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Ug,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,r){let i={duration:n??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new rC(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(dQ,"."+this._enterClassName),e=e.replace(fQ,"."+this._leaveClassName);let c=r!=1,l=this._driver.query(this.element,e,c);r!==0&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&a.length==0&&o.push(SK(n)),a}},$g=class t{constructor(e,n,r,i){this._driver=e,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let n=this._keyframes.size===1&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=lQ,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,r]of this._globalTimelineStyles)this._backFill.set(n,r||Ar),this._currentKeyframe.set(n,Ar);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,r,i){n&&this._previousKeyframe.set("easing",n);let s=i&&i.params||{},o=pQ(e,this._globalTimelineStyles);for(let[a,c]of o){let l=_d(c,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ar),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,r)=>{let i=this._styleSummary.get(r);(!i||n.time>i.time)&&this._updateStyle(r,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,n=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((u,d)=>{u===xg?e.add(d):u===Ar&&n.add(d)}),r||l.set("offset",c/this.duration),i.push(l)});let s=[...e.values()],o=[...n.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return yC(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},rC=class extends $g{constructor(e,n,r,i,s,o,a=!1){super(e,n,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&n){let s=[],o=r+n,a=n/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",k1(a)),s.push(l);let u=e.length-1;for(let d=1;d<=u;d++){let h=new Map(e[d]),f=h.get("offset"),m=n+f*r;h.set("offset",k1(m/o)),s.push(h)}r=o,n=0,i="",e=s}return yC(this.element,e,this.preStyleProps,this.postStyleProps,r,n,i,!0)}};function k1(t,e=3){let n=Math.pow(10,e-1);return Math.round(t*n)/n}function pQ(t,e){let n=new Map,r;return t.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)n.set(s,Ar)}else for(let[s,o]of i)n.set(s,o)}),n}function F1(t,e,n,r,i,s,o,a,c,l,u,d,h){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:h}}var q0={},Hg=class{constructor(e,n,r){this._triggerName=e,this.ast=n,this._stateStyles=r}match(e,n,r,i){return mQ(this.ast.matchers,e,n,r,i)}buildStyles(e,n,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(n,r):new Map}build(e,n,r,i,s,o,a,c,l,u){let d=[],h=this.ast.options&&this.ast.options.params||q0,f=a&&a.params||q0,m=this.buildStyles(r,f,d),g=c&&c.params||q0,v=this.buildStyles(i,g,d),E=new Set,R=new Map,M=new Map,F=i==="void",ee={params:X1(g,h),delay:this.ast.options?.delay},j=u?[]:Z1(e,n,this.ast.animation,s,o,m,v,ee,l,d),te=0;return j.forEach(be=>{te=Math.max(be.duration+be.delay,te)}),d.length?F1(n,this._triggerName,r,i,F,m,v,[],[],R,M,te,d):(j.forEach(be=>{let xt=be.element,Qt=un(R,xt,new Set);be.preStyleProps.forEach(cs=>Qt.add(cs));let tT=un(M,xt,new Set);be.postStyleProps.forEach(cs=>tT.add(cs)),xt!==n&&E.add(xt)}),F1(n,this._triggerName,r,i,F,m,v,j,[...E.values()],R,M,te))}};function mQ(t,e,n,r,i){return t.some(s=>s(e,n,r,i))}function X1(t,e){let n=I({},e);return Object.entries(t).forEach(([r,i])=>{i!=null&&(n[r]=i)}),n}var iC=class{constructor(e,n,r){this.styles=e,this.defaultParams=n,this.normalizer=r}buildStyles(e,n){let r=new Map,i=X1(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=_d(o,i,n));let c=this.normalizer.normalizePropertyName(a,n);o=this.normalizer.normalizeStyleValue(a,c,o,n),r.set(a,o)})}),r}};function gQ(t,e,n){return new sC(t,e,n)}var sC=class{constructor(e,n,r){this.name=e,this.ast=n,this._normalizer=r,this.transitionFactories=[],this.states=new Map,n.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new iC(i.style,s,r))}),L1(this.states,"true","1"),L1(this.states,"false","0"),n.transitions.forEach(i=>{this.transitionFactories.push(new Hg(e,i,this.states))}),this.fallbackTransition=yQ(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,r,i){return this.transitionFactories.find(o=>o.match(e,n,r,i))||null}matchStyles(e,n,r){return this.fallbackTransition.buildStyles(e,n,r)}};function yQ(t,e,n){let r=[(o,a)=>!0],i={type:se.Sequence,steps:[],options:null},s={type:se.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new Hg(t,s,e)}function L1(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}var _Q=new vd,oC=class{constructor(e,n,r){this.bodyNode=e,this._driver=n,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){let r=[],i=[],s=Y1(this._driver,n,r,i);if(r.length)throw NK(r);i.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,n,r){let i=e.element,s=H1(this._normalizer,e.keyframes,n,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,n,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=Z1(this._driver,n,s,W1,Q0,new Map,new Map,r,_Q,i),o.forEach(u=>{let d=un(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(i.push(PK()),o=[]),i.length)throw OK(i);a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,Ar))})});let c=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),l=ss(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);let r=this.players.indexOf(n);r>=0&&this.players.splice(r,1)}_getPlayer(e){let n=this._playersById.get(e);if(!n)throw kK(e);return n}listen(e,n,r,i){let s=hC(n,"","","");return dC(this._getPlayer(e),r,s,i),()=>{}}command(e,n,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,n,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},V1="ng-animate-queued",vQ=".ng-animate-queued",G0="ng-animate-disabled",wQ=".ng-animate-disabled",EQ="ng-star-inserted",IQ=".ng-star-inserted",bQ=[],J1={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},DQ={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Gn="__ng_removed",wd=class{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=TQ(i),r){let s=e,{value:o}=s,a=cT(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let n=e.params;if(n){let r=this.options.params;Object.keys(n).forEach(i=>{r[i]==null&&(r[i]=n[i])})}}},yd="void",W0=new wd(yd),aC=class{constructor(e,n,r){this.id=e,this.hostElement=n,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Mn(n,this._hostClassName)}listen(e,n,r,i){if(!this._triggers.has(n))throw FK(r,n);if(r==null||r.length==0)throw LK(n);if(!SQ(r))throw VK(r,n);let s=un(this._elementListeners,e,[]),o={name:n,phase:r,callback:i};s.push(o);let a=un(this._engine.statesByElement,e,new Map);return a.has(n)||(Mn(e,Ng),Mn(e,Ng+"-"+n),a.set(n,W0)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return this._triggers.has(e)?!1:(this._triggers.set(e,n),!0)}_getTrigger(e){let n=this._triggers.get(e);if(!n)throw jK(e);return n}trigger(e,n,r,i=!0){let s=this._getTrigger(n),o=new Ed(this.id,n,e),a=this._engine.statesByElement.get(e);a||(Mn(e,Ng),Mn(e,Ng+"-"+n),this._engine.statesByElement.set(e,a=new Map));let c=a.get(n),l=new wd(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(n,l),c||(c=W0),!(l.value===yd)&&c.value===l.value){if(!MQ(c.params,l.params)){let g=[],v=s.matchStyles(c.value,c.params,g),E=s.matchStyles(l.value,l.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{Io(e,v),Rr(e,E)})}return}let h=un(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==n&&g.queued&&g.destroy()});let f=s.matchTransition(c.value,l.value,e,l.params),m=!1;if(!f){if(!i)return;f=s.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:f,fromState:c,toState:l,player:o,isFallbackTransition:m}),m||(Mn(e,V1),o.onStart(()=>{mc(e,V1)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);let v=this._engine.playersByElement.get(e);if(v){let E=v.indexOf(o);E>=0&&v.splice(E,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,r)=>{this._elementListeners.set(r,n.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let n=this._engine.playersByElement.get(e);n&&(n.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){let r=this._engine.driver.query(e,Lg,!0);r.forEach(i=>{if(i[Gn])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,n,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,n,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,yd,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,o),r&&ss(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let n=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(n&&r){let i=new Set;n.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,l=r.get(o)||W0,u=new wd(yd),d=new Ed(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,n){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,n);else{let s=e[Gn];(!s||s===J1)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,n))}}insertNode(e,n){Mn(e,this._hostClassName)}drainQueuedTransitions(e){let n=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=hC(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,dC(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):n.push(r)}),this._queue=[],n.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},cC=class{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,r,i){this.bodyNode=e,this.driver=n,this._normalizer=r,this.scheduler=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,o)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(n=>{n.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,n){let r=new aC(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(r,n):(this.newHostElements.set(n,r),this.collectEnterElement(n)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,n){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(n);for(;a;){let c=i.get(a);if(c){let l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(n,e),e}register(e,n){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,n)),r}registerTrigger(e,n,r){let i=this._namespaceLookup[e];i&&i.register(n,r)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let n=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&n.add(s)}}return n}trigger(e,n,r,i){if(kg(n)){let s=this._fetchNamespace(e);if(s)return s.trigger(n,r,i),!0}return!1}insertNode(e,n,r,i){if(!kg(n))return;let s=n[Gn];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(n);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(n,r)}i&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Mn(e,G0)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),mc(e,G0))}removeNode(e,n,r){if(kg(n)){this.scheduler?.notify();let i=e?this._fetchNamespace(e):null;i?i.removeNode(n,r):this.markElementAsRemoved(e,n,!1,r);let s=this.namespacesByHostElement.get(n);s&&s.id!==e&&s.removeNode(n,r)}else this._onRemovalComplete(n,r)}markElementAsRemoved(e,n,r,i,s){this.collectedLeaveElements.push(n),n[Gn]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,n,r,i,s){return kg(n)?this._fetchNamespace(e).listen(n,r,i,s):()=>{}}_buildInstruction(e,n,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,n,s)}destroyInnerAnimations(e){let n=this.driver.query(e,Lg,!0);n.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(n=this.driver.query(e,Y0,!0),n.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let n=this.playersByElement.get(e);n&&n.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let n=this.playersByQueriedElement.get(e);n&&n.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ss(this.players).onDone(()=>e());e()})}processLeaveNode(e){let n=e[Gn];if(n&&n.setForRemoval){if(e[Gn]=J1,n.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(G0)&&this.markElementAsDisabled(e,!1),this.driver.query(e,wQ,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Mn(i,EQ)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{n=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],n.length?ss(n).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw BK(e)}_flushAnimations(e,n){let r=new vd,i=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(k=>{u.add(k);let $=this.driver.query(k,vQ,!0);for(let G=0;G<$.length;G++)u.add($[G])});let d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=U1(h,this.collectedEnterElements),m=new Map,g=0;f.forEach((k,$)=>{let G=W1+g++;m.set($,G),k.forEach(Ee=>Mn(Ee,G))});let v=[],E=new Set,R=new Set;for(let k=0;k<this.collectedLeaveElements.length;k++){let $=this.collectedLeaveElements[k],G=$[Gn];G&&G.setForRemoval&&(v.push($),E.add($),G.hasAnimation?this.driver.query($,IQ,!0).forEach(Ee=>E.add(Ee)):R.add($))}let M=new Map,F=U1(h,Array.from(E));F.forEach((k,$)=>{let G=Q0+g++;M.set($,G),k.forEach(Ee=>Mn(Ee,G))}),e.push(()=>{f.forEach((k,$)=>{let G=m.get($);k.forEach(Ee=>mc(Ee,G))}),F.forEach((k,$)=>{let G=M.get($);k.forEach(Ee=>mc(Ee,G))}),v.forEach(k=>{this.processLeaveNode(k)})});let ee=[],j=[];for(let k=this._namespaceList.length-1;k>=0;k--)this._namespaceList[k].drainQueuedTransitions(n).forEach(G=>{let Ee=G.player,ot=G.element;if(ee.push(Ee),this.collectedEnterElements.length){let It=ot[Gn];if(It&&It.setForMove){if(It.previousTriggersValues&&It.previousTriggersValues.has(G.triggerName)){let ls=It.previousTriggersValues.get(G.triggerName),dn=this.statesByElement.get(G.element);if(dn&&dn.has(G.triggerName)){let Ud=dn.get(G.triggerName);Ud.value=ls,dn.set(G.triggerName,Ud)}}Ee.destroy();return}}let Qn=!d||!this.driver.containsElement(d,ot),Yt=M.get(ot),ri=m.get(ot),$e=this._buildInstruction(G,r,ri,Yt,Qn);if($e.errors&&$e.errors.length){j.push($e);return}if(Qn){Ee.onStart(()=>Io(ot,$e.fromStyles)),Ee.onDestroy(()=>Rr(ot,$e.toStyles)),i.push(Ee);return}if(G.isFallbackTransition){Ee.onStart(()=>Io(ot,$e.fromStyles)),Ee.onDestroy(()=>Rr(ot,$e.toStyles)),i.push(Ee);return}let iT=[];$e.timelines.forEach(It=>{It.stretchStartingKeyframe=!0,this.disabledNodes.has(It.element)||iT.push(It)}),$e.timelines=iT,r.append(ot,$e.timelines);let AV={instruction:$e,player:Ee,element:ot};o.push(AV),$e.queriedElements.forEach(It=>un(a,It,[]).push(Ee)),$e.preStyleProps.forEach((It,ls)=>{if(It.size){let dn=c.get(ls);dn||c.set(ls,dn=new Set),It.forEach((Ud,yy)=>dn.add(yy))}}),$e.postStyleProps.forEach((It,ls)=>{let dn=l.get(ls);dn||l.set(ls,dn=new Set),It.forEach((Ud,yy)=>dn.add(yy))})});if(j.length){let k=[];j.forEach($=>{k.push(UK($.triggerName,$.errors))}),ee.forEach($=>$.destroy()),this.reportError(k)}let te=new Map,be=new Map;o.forEach(k=>{let $=k.element;r.has($)&&(be.set($,$),this._beforeAnimationBuild(k.player.namespaceId,k.instruction,te))}),i.forEach(k=>{let $=k.element;this._getPreviousPlayers($,!1,k.namespaceId,k.triggerName,null).forEach(Ee=>{un(te,$,[]).push(Ee),Ee.destroy()})});let xt=v.filter(k=>$1(k,c,l)),Qt=new Map;B1(Qt,this.driver,R,l,Ar).forEach(k=>{$1(k,c,l)&&xt.push(k)});let cs=new Map;f.forEach((k,$)=>{B1(cs,this.driver,new Set(k),c,xg)}),xt.forEach(k=>{let $=Qt.get(k),G=cs.get(k);Qt.set(k,new Map([...$?.entries()??[],...G?.entries()??[]]))});let gy=[],nT=[],rT={};o.forEach(k=>{let{element:$,player:G,instruction:Ee}=k;if(r.has($)){if(u.has($)){G.onDestroy(()=>Rr($,Ee.toStyles)),G.disabled=!0,G.overrideTotalTime(Ee.totalTime),i.push(G);return}let ot=rT;if(be.size>1){let Yt=$,ri=[];for(;Yt=Yt.parentNode;){let $e=be.get(Yt);if($e){ot=$e;break}ri.push(Yt)}ri.forEach($e=>be.set($e,ot))}let Qn=this._buildAnimation(G.namespaceId,Ee,te,s,cs,Qt);if(G.setRealPlayer(Qn),ot===rT)gy.push(G);else{let Yt=this.playersByElement.get(ot);Yt&&Yt.length&&(G.parentPlayer=ss(Yt)),i.push(G)}}else Io($,Ee.fromStyles),G.onDestroy(()=>Rr($,Ee.toStyles)),nT.push(G),u.has($)&&i.push(G)}),nT.forEach(k=>{let $=s.get(k.element);if($&&$.length){let G=ss($);k.setRealPlayer(G)}}),i.forEach(k=>{k.parentPlayer?k.syncPlayerEvents(k.parentPlayer):k.destroy()});for(let k=0;k<v.length;k++){let $=v[k],G=$[Gn];if(mc($,Q0),G&&G.hasAnimation)continue;let Ee=[];if(a.size){let Qn=a.get($);Qn&&Qn.length&&Ee.push(...Qn);let Yt=this.driver.query($,Y0,!0);for(let ri=0;ri<Yt.length;ri++){let $e=a.get(Yt[ri]);$e&&$e.length&&Ee.push(...$e)}}let ot=Ee.filter(Qn=>!Qn.destroyed);ot.length?AQ(this,$,ot):this.processLeaveNode($)}return v.length=0,gy.forEach(k=>{this.players.push(k),k.onDone(()=>{k.destroy();let $=this.players.indexOf(k);this.players.splice($,1)}),k.play()}),gy}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,r,i,s){let o=[];if(n){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==yd;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,n,r){let i=n.triggerName,s=n.element,o=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:i;for(let c of n.timelines){let l=c.element,u=l!==s,d=un(r,l,[]);this._getPreviousPlayers(l,u,o,a,n.toState).forEach(f=>{let m=f.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),f.destroy(),d.push(f)})}Io(s,n.fromStyles)}_buildAnimation(e,n,r,i,s,o){let a=n.triggerName,c=n.element,l=[],u=new Set,d=new Set,h=n.timelines.map(m=>{let g=m.element;u.add(g);let v=g[Gn];if(v&&v.removedBeforeQueried)return new is(m.duration,m.delay);let E=g!==c,R=RQ((r.get(g)||bQ).map(te=>te.getRealPlayer())).filter(te=>{let be=te;return be.element?be.element===g:!1}),M=s.get(g),F=o.get(g),ee=H1(this._normalizer,m.keyframes,M,F),j=this._buildPlayer(m,ee,R);if(m.subTimeline&&i&&d.add(g),E){let te=new Ed(e,a,g);te.setRealPlayer(j),l.push(te)}return j});l.forEach(m=>{un(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>CQ(this.playersByQueriedElement,m.element,m))}),u.forEach(m=>Mn(m,N1));let f=ss(h);return f.onDestroy(()=>{u.forEach(m=>mc(m,N1)),Rr(c,n.toStyles)}),d.forEach(m=>{un(i,m,[]).push(f)}),f}_buildPlayer(e,n,r){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,r):new is(e.duration,e.delay)}},Ed=class{constructor(e,n,r){this.namespaceId=e,this.triggerName=n,this.element=r,this._player=new is,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,r)=>{n.forEach(i=>dC(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){un(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let n=this._player;n.triggerCallback&&n.triggerCallback(e)}};function CQ(t,e,n){let r=t.get(e);if(r){if(r.length){let i=r.indexOf(n);r.splice(i,1)}r.length==0&&t.delete(e)}return r}function TQ(t){return t??null}function kg(t){return t&&t.nodeType===1}function SQ(t){return t=="start"||t=="done"}function j1(t,e){let n=t.style.display;return t.style.display=e??"none",n}function B1(t,e,n,r,i){let s=[];n.forEach(c=>s.push(j1(c)));let o=[];r.forEach((c,l)=>{let u=new Map;c.forEach(d=>{let h=e.computeStyle(l,d,i);u.set(d,h),(!h||h.length==0)&&(l[Gn]=DQ,o.push(l))}),t.set(l,u)});let a=0;return n.forEach(c=>j1(c,s[a++])),o}function U1(t,e){let n=new Map;if(t.forEach(a=>n.set(a,[])),e.length==0)return n;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let l=a.parentNode;return n.has(l)?c=l:i.has(l)?c=r:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&n.get(c).push(a)}),n}function Mn(t,e){t.classList?.add(e)}function mc(t,e){t.classList?.remove(e)}function AQ(t,e,n){ss(n).onDone(()=>t.processLeaveNode(e))}function RQ(t){let e=[];return eL(t,e),e}function eL(t,e){for(let n=0;n<t.length;n++){let r=t[n];r instanceof md?eL(r.players,e):e.push(r)}}function MQ(t,e){let n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){let s=n[i];if(!e.hasOwnProperty(s)||t[s]!==e[s])return!1}return!0}function $1(t,e,n){let r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(s=>i.add(s)):e.set(t,r),n.delete(t),!0}var yc=class{constructor(e,n,r,i){this._driver=n,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(s,o)=>{},this._transitionEngine=new cC(e.body,n,r,i),this._timelineEngine=new oC(e.body,n,r),this._transitionEngine.onRemovalComplete=(s,o)=>this.onRemovalComplete(s,o)}registerTrigger(e,n,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],l=[],u=Y1(this._driver,s,c,l);if(c.length)throw MK(i,c);l.length&&void 0,a=gQ(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(n,i,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,r,i){this._transitionEngine.insertNode(e,n,r,i)}onRemove(e,n,r){this._transitionEngine.removeNode(e,n,r)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,r,i){if(r.charAt(0)=="@"){let[s,o]=M1(r),a=i;this._timelineEngine.command(s,n,o,a)}else this._transitionEngine.trigger(e,n,r,i)}listen(e,n,r,i,s){if(r.charAt(0)=="@"){let[o,a]=M1(r);return this._timelineEngine.listen(o,n,a,s)}return this._transitionEngine.listen(e,n,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function xQ(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=K0(e[0]),e.length>1&&(r=K0(e[e.length-1]))):e instanceof Map&&(n=K0(e)),n||r?new lC(t,n,r):null}var gc=class gc{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=gc.initialStylesByElement.get(e);i||gc.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Rr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Rr(this._element,this._initialStyles),this._endStyles&&(Rr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(gc.initialStylesByElement.delete(this._element),this._startStyles&&(Io(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Io(this._element,this._endStyles),this._endStyles=null),Rr(this._element,this._initialStyles),this._state=3)}};gc.initialStylesByElement=new WeakMap;var lC=gc;function K0(t){let e=null;return t.forEach((n,r)=>{NQ(r)&&(e=e||new Map,e.set(r,n))}),e}function NQ(t){return t==="display"||t==="position"}var zg=class{constructor(e,n,r,i){this.element=e,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let n=()=>this._onFinish();this.domPlayer.addEventListener("finish",n),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",n)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let n=[];return e.forEach(r=>{n.push(Object.fromEntries(r))}),n}_triggerWebAnimation(e,n,r){return e.animate(this._convertKeyframesToObject(n),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:gC(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let n=e==="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},qg=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return z1(e,n)}getParentElement(e){return fC(e)}query(e,n,r){return q1(e,n,r)}computeStyle(e,n,r){return gC(e,n)}animate(e,n,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let l=new Map,u=o.filter(f=>f instanceof zg);XK(r,i)&&u.forEach(f=>{f.currentSnapshot.forEach((m,g)=>l.set(g,m))});let d=QK(n).map(f=>new Map(f));d=JK(e,d,l);let h=xQ(e,d);return new zg(e,d,c,h)}};var Fg="@",tL="@.disabled",Gg=class{constructor(e,n,r,i){this.namespaceId=e,this.delegate=n,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,r,i=!0){this.delegate.insertBefore(e,n,r),this.engine.onInsert(this.namespaceId,n,e,i)}removeChild(e,n,r){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,r,i){this.delegate.setAttribute(e,n,r,i)}removeAttribute(e,n,r){this.delegate.removeAttribute(e,n,r)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,r,i){this.delegate.setStyle(e,n,r,i)}removeStyle(e,n,r){this.delegate.removeStyle(e,n,r)}setProperty(e,n,r){n.charAt(0)==Fg&&n==tL?this.disableAnimations(e,!!r):this.delegate.setProperty(e,n,r)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,r){return this.delegate.listen(e,n,r)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}},uC=class extends Gg{constructor(e,n,r,i,s){super(n,r,i,s),this.factory=e,this.namespaceId=n}setProperty(e,n,r){n.charAt(0)==Fg?n.charAt(1)=="."&&n==tL?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,n.slice(1),r):this.delegate.setProperty(e,n,r)}listen(e,n,r){if(n.charAt(0)==Fg){let i=PQ(e),s=n.slice(1),o="";return s.charAt(0)!=Fg&&([s,o]=OQ(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,r,a)})}return this.delegate.listen(e,n,r)}};function PQ(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function OQ(t){let e=t.indexOf("."),n=t.substring(0,e),r=t.slice(e+1);return[n,r]}var Wg=class{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,n.onRemovalComplete=(i,s)=>{let o=s?.parentNode(i);o&&s.removeChild(o,i)}}createRenderer(e,n){let r="",i=this.delegate.createRenderer(e,n);if(!e||!n?.data?.animation){let l=this._rendererCache,u=l.get(i);if(!u){let d=()=>l.delete(i);u=new Gg(r,i,this.engine,d),l.set(i,u)}return u}let s=n.id,o=n.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return n.data.animation.forEach(a),new uC(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>n(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([n,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var FQ=(()=>{let e=class e extends yc{constructor(r,i,s){super(r,i,s,b(ia,{optional:!0}))}ngOnDestroy(){this.flush()}};e.\u0275fac=function(i){return new(i||e)(y(Y),y(bo),y(Do))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function LQ(){return new jg}function VQ(t,e,n){return new Wg(t,e,n)}var rL=[{provide:Do,useFactory:LQ},{provide:yc,useClass:FQ},{provide:Ss,useFactory:VQ,deps:[qf,yc,L]}],nL=[{provide:bo,useFactory:()=>new qg},{provide:Gt,useValue:"BrowserAnimations"},...rL],jQ=[{provide:bo,useClass:pC},{provide:Gt,useValue:"NoopAnimations"},...rL],kue=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:r.disableAnimations?jQ:nL}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({providers:nL,imports:[JM]});let t=e;return t})();function BQ(t){return t!=null&&`${t}`!="false"}function Id(t,e=0){return UQ(t)?Number(t):e}function UQ(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function _c(t){return Array.isArray(t)?t:[t]}function Je(t){return t==null?"":typeof t=="string"?t:`${t}px`}function ei(t){return t instanceof ve?t.nativeElement:t}function jue(t,e=/\s+/){let n=[];if(t!=null){let r=Array.isArray(t)?t:`${t}`.split(e);for(let i of r){let s=`${i}`.trim();s&&n.push(s)}}return n}var wC;try{wC=typeof Intl<"u"&&Intl.v8BreakIterator}catch{wC=!1}var Ke=(()=>{let e=class e{constructor(r){this._platformId=r,this.isBrowser=this._platformId?gw(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||wC)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(i){return new(i||e)(y(_n))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var vc,iL=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Gue(){if(vc)return vc;if(typeof document!="object"||!document)return vc=new Set(iL),vc;let t=document.createElement("input");return vc=new Set(iL.filter(e=>(t.setAttribute("type",e),t.type===e))),vc}var bd;function $Q(){if(bd==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>bd=!0}))}finally{bd=bd||!1}return bd}function wc(t){return $Q()?t:!!t.capture}var Co;function sL(){if(Co==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Co=!1,Co;if("scrollBehavior"in document.documentElement.style)Co=!0;else{let t=Element.prototype.scrollTo;t?Co=!/\{\s*\[native code\]\s*\}/.test(t.toString()):Co=!1}}return Co}var vC;function HQ(){if(vC==null){let t=typeof document<"u"?document.head:null;vC=!!(t&&(t.createShadowRoot||t.attachShadow))}return vC}function oL(t){if(HQ()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Ec(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function Wn(t){return t.composedPath?t.composedPath()[0]:t.target}function Dd(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var zQ=new x("cdk-dir-doc",{providedIn:"root",factory:qQ});function qQ(){return b(Y)}var GQ=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function WQ(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?GQ.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Td=(()=>{let e=class e{constructor(r){if(this.value="ltr",this.change=new Ce,r){let i=r.body?r.body.dir:null,s=r.documentElement?r.documentElement.dir:null;this.value=WQ(i||s||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(i){return new(i||e)(y(zQ,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var os=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({});let t=e;return t})();var QQ=20,cL=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this._platform=i,this._scrolled=new H,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(r){this.scrollContainers.has(r)||this.scrollContainers.set(r,r.elementScrolled().subscribe(()=>this._scrolled.next(r)))}deregister(r){let i=this.scrollContainers.get(r);i&&(i.unsubscribe(),this.scrollContainers.delete(r))}scrolled(r=QQ){return this._platform.isBrowser?new W(i=>{this._globalSubscription||this._addGlobalListener();let s=r>0?this._scrolled.pipe(bh(r)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):z()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((r,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(r,i){let s=this.getAncestorScrollContainers(r);return this.scrolled(i).pipe(Fe(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(r){let i=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,r)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(r,i){let s=ei(i),o=r.getElementRef().nativeElement;do if(s==o)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let r=this._getWindow();return Pc(r.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(i){return new(i||e)(y(L),y(Ke),y(Y,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var YQ=20,EC=(()=>{let e=class e{constructor(r,i,s){this._platform=r,this._change=new H,this._changeListener=o=>{this._change.next(o)},this._document=s,i.runOutsideAngular(()=>{if(r.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let r=this._getWindow();r.removeEventListener("resize",this._changeListener),r.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let r={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),r}getViewportRect(){let r=this.getViewportScrollPosition(),{width:i,height:s}=this.getViewportSize();return{top:r.top,left:r.left,bottom:r.top+s,right:r.left+i,height:s,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let r=this._document,i=this._getWindow(),s=r.documentElement,o=s.getBoundingClientRect(),a=-o.top||r.body.scrollTop||i.scrollY||s.scrollTop||0,c=-o.left||r.body.scrollLeft||i.scrollX||s.scrollLeft||0;return{top:a,left:c}}change(r=YQ){return r>0?this._change.pipe(bh(r)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let r=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:r.innerWidth,height:r.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(i){return new(i||e)(y(Ke),y(L),y(Y,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var aL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({});let t=e;return t})(),IC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({imports:[os,aL,os,aL]});let t=e;return t})();var Sd=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Ic=class extends Sd{constructor(e,n,r,i,s){super(),this.component=e,this.viewContainerRef=n,this.injector=r,this.componentFactoryResolver=i,this.projectableNodes=s}},bc=class extends Sd{constructor(e,n,r,i){super(),this.templateRef=e,this.viewContainerRef=n,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},bC=class extends Sd{constructor(e){super(),this.element=e instanceof ve?e.nativeElement:e}},Dc=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Ic)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof bc)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof bC)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Kg=class extends Dc{constructor(e,n,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){let r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||Ne.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let n=e.viewContainerRef,r=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=n.indexOf(r);i!==-1&&n.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Ad=(()=>{let e=class e extends Dc{constructor(r,i,s){super(),this._componentFactoryResolver=r,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Ce,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}get portal(){return this._attachedPortal}set portal(r){this.hasAttached()&&!r&&!this._isInitialized||(this.hasAttached()&&super.detach(),r&&super.attach(r),this._attachedPortal=r||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(r){r.setAttachedHost(this);let i=r.viewContainerRef!=null?r.viewContainerRef:this._viewContainerRef,o=(r.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(r.component),a=i.createComponent(o,i.length,r.injector||i.injector,r.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=r,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(r){r.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(r.templateRef,r.context,{injector:r.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=r,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){let r=this._viewContainerRef.element.nativeElement;return r.nodeType===r.ELEMENT_NODE?r:r.parentNode}};e.\u0275fac=function(i){return new(i||e)(S(Ei),S(vn),S(Y))},e.\u0275dir=ye({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[pe.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Ye]});let t=e;return t})();var Qg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({});let t=e;return t})();function Yg(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var lL=sL(),DC=class{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Je(-this._previousScrollPosition.left),e.style.top=Je(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,r=e.style,i=n.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),lL&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),lL&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,r=this._viewportRuler.getViewportSize();return n.scrollHeight>r.height||n.scrollWidth>r.width}};var CC=class{constructor(e,n,r,i){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Fe(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Zg=class{enable(){}disable(){}attach(){}};function TC(t,e){return e.some(n=>{let r=t.bottom<n.top,i=t.top>n.bottom,s=t.right<n.left,o=t.left>n.right;return r||i||s||o})}function uL(t,e){return e.some(n=>{let r=t.top<n.top,i=t.bottom>n.bottom,s=t.left<n.left,o=t.right>n.right;return r||i||s||o})}var SC=class{constructor(e,n,r,i){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();TC(n,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},XQ=(()=>{let e=class e{constructor(r,i,s,o){this._scrollDispatcher=r,this._viewportRuler=i,this._ngZone=s,this.noop=()=>new Zg,this.close=a=>new CC(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new DC(this._viewportRuler,this._document),this.reposition=a=>new SC(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}};e.\u0275fac=function(i){return new(i||e)(y(cL),y(EC),y(L),y(Y))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Rd=class{constructor(e){if(this.scrollStrategy=new Zg,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let n=Object.keys(e);for(let r of n)e[r]!==void 0&&(this[r]=e[r])}}};var AC=class{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var mL=(()=>{let e=class e{constructor(r){this._attachedOverlays=[],this._document=r}ngOnDestroy(){this.detach()}add(r){this.remove(r),this._attachedOverlays.push(r)}remove(r){let i=this._attachedOverlays.indexOf(r);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(i){return new(i||e)(y(Y))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),JQ=(()=>{let e=class e extends mL{constructor(r,i){super(r),this._ngZone=i,this._keydownListener=s=>{let o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){let c=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(s)):c.next(s);break}}}add(r){super.add(r),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(i){return new(i||e)(y(Y),y(L,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),e7=(()=>{let e=class e extends mL{constructor(r,i,s){super(r),this._platform=i,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Wn(o)},this._clickListener=o=>{let a=Wn(o),c=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let u=l.length-1;u>-1;u--){let d=l[u];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(a)||d.overlayElement.contains(c))break;let h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(o)):h.next(o)}}}add(r){if(super.add(r),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let r=this._document.body;r.removeEventListener("pointerdown",this._pointerDownListener,!0),r.removeEventListener("click",this._clickListener,!0),r.removeEventListener("auxclick",this._clickListener,!0),r.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(r.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(r){r.addEventListener("pointerdown",this._pointerDownListener,!0),r.addEventListener("click",this._clickListener,!0),r.addEventListener("auxclick",this._clickListener,!0),r.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(i){return new(i||e)(y(Y),y(Ke),y(L,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Cc=(()=>{let e=class e{constructor(r,i){this._platform=i,this._document=r}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let r="cdk-overlay-container";if(this._platform.isBrowser||Dd()){let s=this._document.querySelectorAll(`.${r}[platform="server"], .${r}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}let i=this._document.createElement("div");i.classList.add(r),Dd()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}};e.\u0275fac=function(i){return new(i||e)(y(Y),y(Ke))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ti=class{constructor(e,n,r,i,s,o,a,c,l,u=!1){this._portalOutlet=e,this._host=n,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new H,this._attachments=new H,this._detachments=new H,this._locationChanges=Ae.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new H,this._outsidePointerEvents=new H,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(He(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=I(I({},this._config),e),this._updateElementSize()}setDirection(e){this._config=he(I({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Je(this._config.width),e.height=Je(this._config.height),e.minWidth=Je(this._config.minWidth),e.minHeight=Je(this._config.minHeight),e.maxWidth=Je(this._config.maxWidth),e.maxHeight=Je(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,r){let i=_c(n||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let e=this._ngZone.onStable.pipe(er(Oc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},dL="cdk-overlay-connected-position-bounding-box",t7=/([A-Za-z%]+)$/,RC=class{get positions(){return this._preferredPositions}constructor(e,n,r,i,s){this._viewportRuler=n,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new H,this._resizeSubscription=Ae.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(dL),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[],o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,i,a),l=this._getOverlayPoint(c,n,a),u=this._getOverlayFit(l,n,r,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(u,l,r)){s.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(s.length){let a=null,c=-1;for(let l of s){let u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&To(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(dL),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,r){let i;if(r.originX=="center")i=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i=r.originX=="start"?o:a}n.left<0&&(i-=n.left);let s;return r.originY=="center"?s=e.top+e.height/2:s=r.originY=="top"?e.top:e.bottom,n.top<0&&(s-=n.top),{x:i,y:s}}_getOverlayPoint(e,n,r){let i;r.overlayX=="center"?i=-n.width/2:r.overlayX==="start"?i=this._isRtl()?-n.width:0:i=this._isRtl()?0:-n.width;let s;return r.overlayY=="center"?s=-n.height/2:s=r.overlayY=="top"?0:-n.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,n,r,i){let s=fL(n),{x:o,y:a}=e,c=this._getOffset(i,"x"),l=this._getOffset(i,"y");c&&(o+=c),l&&(a+=l);let u=0-o,d=o+s.width-r.width,h=0-a,f=a+s.height-r.height,m=this._subtractOverflows(s.width,u,d),g=this._subtractOverflows(s.height,h,f),v=m*g;return{visibleArea:v,isCompletelyWithinViewport:s.width*s.height===v,fitsInViewportVertically:g===s.height,fitsInViewportHorizontally:m==s.width}}_canFitWithFlexibleDimensions(e,n,r){if(this._hasFlexibleDimensions){let i=r.bottom-n.y,s=r.right-n.x,o=hL(this._overlayRef.getConfig().minHeight),a=hL(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportVertically||o!=null&&o<=i,l=e.fitsInViewportHorizontally||a!=null&&a<=s;return c&&l}return!1}_pushOverlayOnScreen(e,n,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let i=fL(n),s=this._viewportRect,o=Math.max(e.x+i.width-s.width,0),a=Math.max(e.y+i.height-s.height,0),c=Math.max(s.top-r.top-e.y,0),l=Math.max(s.left-r.left-e.x,0),u=0,d=0;return i.width<=s.width?u=l||-o:u=e.x<this._viewportMargin?s.left-r.left-e.x:0,i.height<=s.height?d=c||-a:d=e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){let r=this._getScrollVisibility(),i=new AC(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),r,i=e.overlayY;e.overlayX==="center"?r="center":this._isRtl()?r=e.overlayX==="start"?"right":"left":r=e.overlayX==="start"?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,n){let r=this._viewportRect,i=this._isRtl(),s,o,a;if(n.overlayY==="top")o=e.y,s=r.height-o+this._viewportMargin;else if(n.overlayY==="bottom")a=r.height-e.y+this._viewportMargin*2,s=r.height-a+this._viewportMargin;else{let f=Math.min(r.bottom-e.y+r.top,e.y),m=this._lastBoundingBoxSize.height;s=f*2,o=e.y-f,s>m&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-m/2)}let c=n.overlayX==="start"&&!i||n.overlayX==="end"&&i,l=n.overlayX==="end"&&!i||n.overlayX==="start"&&i,u,d,h;if(l)h=r.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if(c)d=e.x,u=r.right-e.x;else{let f=Math.min(r.right-e.x+r.left,e.x),m=this._lastBoundingBoxSize.width;u=f*2,d=e.x-f,u>m&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-m/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,n){let r=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));let i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=Je(r.height),i.top=Je(r.top),i.bottom=Je(r.bottom),i.width=Je(r.width),i.left=Je(r.left),i.right=Je(r.right),n.overlayX==="center"?i.alignItems="center":i.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?i.justifyContent="center":i.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",s&&(i.maxHeight=Je(s)),o&&(i.maxWidth=Je(o))}this._lastBoundingBoxSize=r,To(this._boundingBox.style,i)}_resetBoundingBoxStyles(){To(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){To(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){let u=this._viewportRuler.getViewportScrollPosition();To(r,this._getExactOverlayY(n,e,u)),To(r,this._getExactOverlayX(n,e,u))}else r.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=Je(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=Je(o.maxWidth):s&&(r.maxWidth="")),To(this._pane.style,r)}_getExactOverlayY(e,n,r){let i={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;i.bottom=`${o-(s.y+this._overlayRect.height)}px`}else i.top=Je(s.y);return i}_getExactOverlayX(e,n,r){let i={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;i.right=`${a-(s.x+this._overlayRect.width)}px`}else i.left=Je(s.x);return i}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:uL(e,r),isOriginOutsideView:TC(e,r),isOverlayClipped:uL(n,r),isOverlayOutsideView:TC(n,r)}}_subtractOverflows(e,...n){return n.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&_c(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof ve)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+n,height:r,width:n}}};function To(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function hL(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(t7);return!n||n==="px"?parseFloat(e):null}return t||null}function fL(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}var pL="cdk-global-overlay-wrapper",MC=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(pL),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,c=(i==="100%"||i==="100vw")&&(!o||o==="100%"||o==="100vw"),l=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",m="",g="";c?g="flex-start":u==="center"?(g="center",h?m=d:f=d):h?u==="left"||u==="end"?(g="flex-end",f=d):(u==="right"||u==="start")&&(g="flex-start",m=d):u==="left"||u==="start"?(g="flex-start",f=d):(u==="right"||u==="end")&&(g="flex-end",m=d),e.position=this._cssPosition,e.marginLeft=c?"0":f,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":m,n.justifyContent=g,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,r=n.style;n.classList.remove(pL),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},n7=(()=>{let e=class e{constructor(r,i,s,o){this._viewportRuler=r,this._document=i,this._platform=s,this._overlayContainer=o}global(){return new MC}flexibleConnectedTo(r){return new RC(r,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(i){return new(i||e)(y(EC),y(Y),y(Ke),y(Cc))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),r7=0,Kn=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,u,d,h,f,m){this.scrollStrategies=r,this._overlayContainer=i,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=u,this._directionality=d,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=m}create(r){let i=this._createHostElement(),s=this._createPaneElement(i),o=this._createPortalOutlet(s),a=new Rd(r);return a.direction=a.direction||this._directionality.value,new ti(o,i,s,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(r){let i=this._document.createElement("div");return i.id=`cdk-overlay-${r7++}`,i.classList.add("cdk-overlay-pane"),r.appendChild(i),i}_createHostElement(){let r=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalOutlet(r){return this._appRef||(this._appRef=this._injector.get(Di)),new Kg(r,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(i){return new(i||e)(y(XQ),y(Cc),y(Ei),y(n7),y(JQ),y(Ne),y(L),y(Y),y(Td),y(fr),y(e7),y(Gt,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var i7=new x("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=b(Kn);return()=>t.scrollStrategies.reposition()}});function s7(t){return()=>t.scrollStrategies.reposition()}var o7={provide:i7,deps:[Kn],useFactory:s7},gL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({providers:[Kn,o7],imports:[os,Qg,IC,IC]});let t=e;return t})();var a7=(()=>{let e=class e{create(r){return typeof MutationObserver>"u"?null:new MutationObserver(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var _L=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({providers:[a7]});let t=e;return t})();var vL=new Set,So,c7=(()=>{let e=class e{constructor(r,i){this._platform=r,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):u7}matchMedia(r){return(this._platform.WEBKIT||this._platform.BLINK)&&l7(r,this._nonce),this._matchMedia(r)}};e.\u0275fac=function(i){return new(i||e)(y(Ke),y(sl,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function l7(t,e){if(!vL.has(t))try{So||(So=document.createElement("style"),e&&(So.nonce=e),So.setAttribute("type","text/css"),document.head.appendChild(So)),So.sheet&&(So.sheet.insertRule(`@media ${t} {body{ }}`,0),vL.add(t))}catch(n){console.error(n)}}function u7(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var EL=(()=>{let e=class e{constructor(r,i){this._mediaMatcher=r,this._zone=i,this._queries=new Map,this._destroySubject=new H}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(r){return wL(_c(r)).some(s=>this._registerQuery(s).mql.matches)}observe(r){let s=wL(_c(r)).map(a=>this._registerQuery(a).observable),o=ms(s);return o=Xn(o.pipe(He(1)),o.pipe(Vc(1),Ch(0))),o.pipe(oe(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(r){if(this._queries.has(r))return this._queries.get(r);let i=this._mediaMatcher.matchMedia(r),o={observable:new W(a=>{let c=l=>this._zone.run(()=>a.next(l));return i.addListener(c),()=>{i.removeListener(c)}}).pipe(Pn(i),oe(({matches:a})=>({query:r,matches:a})),er(this._destroySubject)),mql:i};return this._queries.set(r,o),o}};e.\u0275fac=function(i){return new(i||e)(y(c7),y(L))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wL(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var Md=(()=>{let e=class e{constructor(r){this._platform=r}isDisabled(r){return r.hasAttribute("disabled")}isVisible(r){return h7(r)&&getComputedStyle(r).visibility==="visible"}isTabbable(r){if(!this._platform.isBrowser)return!1;let i=d7(w7(r));if(i&&(IL(i)===-1||!this.isVisible(i)))return!1;let s=r.nodeName.toLowerCase(),o=IL(r);return r.hasAttribute("contenteditable")?o!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!_7(r)?!1:s==="audio"?r.hasAttribute("controls")?o!==-1:!1:s==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||r.hasAttribute("controls"):r.tabIndex>=0}isFocusable(r,i){return v7(r)&&!this.isDisabled(r)&&(i?.ignoreVisibility||this.isVisible(r))}};e.\u0275fac=function(i){return new(i||e)(y(Ke))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function d7(t){try{return t.frameElement}catch{return null}}function h7(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function f7(t){let e=t.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function p7(t){return g7(t)&&t.type=="hidden"}function m7(t){return y7(t)&&t.hasAttribute("href")}function g7(t){return t.nodeName.toLowerCase()=="input"}function y7(t){return t.nodeName.toLowerCase()=="a"}function CL(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let e=t.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function IL(t){if(!CL(t))return null;let e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function _7(t){let e=t.nodeName.toLowerCase(),n=e==="input"&&t.type;return n==="text"||n==="password"||e==="select"||e==="textarea"}function v7(t){return p7(t)?!1:f7(t)||m7(t)||t.hasAttribute("contenteditable")||CL(t)}function w7(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var NC=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,r,i,s=!1){this._element=e,this._checker=n,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let r=this._getFirstTabbableElement(n);return r?.focus(e),!!r}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){let n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let r=0;r<n.length;r++){let i=n[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let r=n.length-1;r>=0;r--){let i=n[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[r]):null;if(i)return i}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(He(1)).subscribe(e)}},xd=(()=>{let e=class e{constructor(r,i,s){this._checker=r,this._ngZone=i,this._document=s}create(r,i=!1){return new NC(r,this._checker,this._ngZone,this._document,i)}};e.\u0275fac=function(i){return new(i||e)(y(Md),y(L),y(Y))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),uhe=(()=>{let e=class e{get enabled(){return this.focusTrap?.enabled||!1}set enabled(r){this.focusTrap&&(this.focusTrap.enabled=r)}constructor(r,i,s){this._elementRef=r,this._focusTrapFactory=i,this._previouslyFocusedElement=null,b(Ke).isBrowser&&(this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0))}ngOnDestroy(){this.focusTrap?.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap?.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap&&!this.focusTrap.hasAttached()&&this.focusTrap.attachAnchors()}ngOnChanges(r){let i=r.autoCapture;i&&!i.firstChange&&this.autoCapture&&this.focusTrap?.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=Ec(),this.focusTrap?.focusInitialElementWhenReady()}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(xd),S(Y))},e.\u0275dir=ye({type:e,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:[pe.HasDecoratorInputTransform,"cdkTrapFocus","enabled",En],autoCapture:[pe.HasDecoratorInputTransform,"cdkTrapFocusAutoCapture","autoCapture",En]},exportAs:["cdkTrapFocus"],standalone:!0,features:[jr,Lt]});let t=e;return t})();function PC(t){return t.buttons===0||t.detail===0}function OC(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var E7=new x("cdk-input-modality-detector-options"),I7={ignoreKeys:[18,17,224,91,16]},TL=650,Tc=wc({passive:!0,capture:!0}),b7=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(r,i,s,o){this._platform=r,this._mostRecentTarget=null,this._modality=new Qe(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Wn(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<TL||(this._modality.next(PC(a)?"keyboard":"mouse"),this._mostRecentTarget=Wn(a))},this._onTouchstart=a=>{if(OC(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Wn(a)},this._options=I(I({},I7),o),this.modalityDetected=this._modality.pipe(Vc(1)),this.modalityChanged=this.modalityDetected.pipe(Fc()),r.isBrowser&&i.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Tc),s.addEventListener("mousedown",this._onMousedown,Tc),s.addEventListener("touchstart",this._onTouchstart,Tc)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Tc),document.removeEventListener("mousedown",this._onMousedown,Tc),document.removeEventListener("touchstart",this._onTouchstart,Tc))}};e.\u0275fac=function(i){return new(i||e)(y(Ke),y(L),y(Y),y(E7,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Jg=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(Jg||{}),D7=new x("cdk-focus-monitor-default-options"),Xg=wc({passive:!0,capture:!0}),Nd=(()=>{let e=class e{constructor(r,i,s,o,a){this._ngZone=r,this._platform=i,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new H,this._rootNodeFocusAndBlurListener=c=>{let l=Wn(c);for(let u=l;u;u=u.parentElement)c.type==="focus"?this._onFocus(c,u):this._onBlur(c,u)},this._document=o,this._detectionMode=a?.detectionMode||Jg.IMMEDIATE}monitor(r,i=!1){let s=ei(r);if(!this._platform.isBrowser||s.nodeType!==1)return z();let o=oL(s)||this._getDocument(),a=this._elementInfo.get(s);if(a)return i&&(a.checkChildren=!0),a.subject;let c={checkChildren:i,subject:new H,rootNode:o};return this._elementInfo.set(s,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(r){let i=ei(r),s=this._elementInfo.get(i);s&&(s.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(s))}focusVia(r,i,s){let o=ei(r),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([c,l])=>this._originChanged(c,i,l)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((r,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(r){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(r)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:r&&this._isLastInteractionFromInputLabel(r)?"mouse":"program"}_shouldBeAttributedToTouch(r){return this._detectionMode===Jg.EVENTUAL||!!r?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(r,i){r.classList.toggle("cdk-focused",!!i),r.classList.toggle("cdk-touch-focused",i==="touch"),r.classList.toggle("cdk-keyboard-focused",i==="keyboard"),r.classList.toggle("cdk-mouse-focused",i==="mouse"),r.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(r,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=r,this._originFromTouchInteraction=r==="touch"&&i,this._detectionMode===Jg.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?TL:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(r,i){let s=this._elementInfo.get(i),o=Wn(r);!s||!s.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),s)}_onBlur(r,i){let s=this._elementInfo.get(i);!s||s.checkChildren&&r.relatedTarget instanceof Node&&i.contains(r.relatedTarget)||(this._setClasses(i),this._emitOrigin(s,null))}_emitOrigin(r,i){r.subject.observers.length&&this._ngZone.run(()=>r.subject.next(i))}_registerGlobalListeners(r){if(!this._platform.isBrowser)return;let i=r.rootNode,s=this._rootNodeFocusListenerCount.get(i)||0;s||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Xg),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Xg)}),this._rootNodeFocusListenerCount.set(i,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(er(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(r){let i=r.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let s=this._rootNodeFocusListenerCount.get(i);s>1?this._rootNodeFocusListenerCount.set(i,s-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Xg),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Xg),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(r,i,s){this._setClasses(r,i),this._emitOrigin(s,i),this._lastFocusOrigin=i}_getClosestElementsInfo(r){let i=[];return this._elementInfo.forEach((s,o)=>{(o===r||s.checkChildren&&o.contains(r))&&i.push([o,s])}),i}_isLastInteractionFromInputLabel(r){let{_mostRecentTarget:i,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!i||i===r||r.nodeName!=="INPUT"&&r.nodeName!=="TEXTAREA"||r.disabled)return!1;let o=r.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(i))return!0}return!1}};e.\u0275fac=function(i){return new(i||e)(y(L),y(Ke),y(b7),y(Y,8),y(D7,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dhe=(()=>{let e=class e{constructor(r,i){this._elementRef=r,this._focusMonitor=i,this._focusOrigin=null,this.cdkFocusChange=new Ce}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let r=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(r,r.nodeType===1&&r.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>{this._focusOrigin=i,this.cdkFocusChange.emit(i)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(Nd))},e.\u0275dir=ye({type:e,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"],standalone:!0});let t=e;return t})(),Ao=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(Ao||{}),bL="cdk-high-contrast-black-on-white",DL="cdk-high-contrast-white-on-black",xC="cdk-high-contrast-active",kC=(()=>{let e=class e{constructor(r,i){this._platform=r,this._document=i,this._breakpointSubscription=b(EL).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Ao.NONE;let r=this._document.createElement("div");r.style.backgroundColor="rgb(1,2,3)",r.style.position="absolute",this._document.body.appendChild(r);let i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(r):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(r.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Ao.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Ao.BLACK_ON_WHITE}return Ao.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let r=this._document.body.classList;r.remove(xC,bL,DL),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Ao.BLACK_ON_WHITE?r.add(xC,bL):i===Ao.WHITE_ON_BLACK&&r.add(xC,DL)}}};e.\u0275fac=function(i){return new(i||e)(y(Ke),y(Y))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hhe=(()=>{let e=class e{constructor(r){r._applyBodyHighContrastModeCssClasses()}};e.\u0275fac=function(i){return new(i||e)(y(kC))},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({imports:[_L]});let t=e;return t})();function C7(t,e){}var Ro=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var jC=(()=>{let e=class e extends Dc{constructor(r,i,s,o,a,c,l,u){super(),this._elementRef=r,this._focusTrapFactory=i,this._config=o,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=l,this._focusMonitor=u,this._platform=b(Ke),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=b(wn),this.attachDomPortal=d=>{this._portalOutlet.hasAttached();let h=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),h},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(r){this._ariaLabelledByQueue.push(r),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(r){let i=this._ariaLabelledByQueue.indexOf(r);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(r){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(r);return this._contentAttached(),i}attachTemplatePortal(r){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(r);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(r,i){this._interactivityChecker.isFocusable(r)||(r.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{r.removeEventListener("blur",s),r.removeEventListener("mousedown",s),r.removeAttribute("tabindex")};r.addEventListener("blur",s),r.addEventListener("mousedown",s)})),r.focus(i)}_focusByCssSelector(r,i){let s=this._elementRef.nativeElement.querySelector(r);s&&this._forceFocus(s,i)}_trapFocus(){let r=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||r.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}}_restoreFocus(){let r=this._config.restoreFocus,i=null;if(typeof r=="string"?i=this._document.querySelector(r):typeof r=="boolean"?i=r?this._elementFocusedBeforeDialogWasOpened:null:r&&(i=r),this._config.restoreFocus&&i&&typeof i.focus=="function"){let s=Ec(),o=this._elementRef.nativeElement;(!s||s===this._document.body||s===o||o.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let r=this._elementRef.nativeElement,i=Ec();return r===i||r.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Ec()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(xd),S(Y,8),S(Ro),S(Md),S(L),S(ti),S(Nd))},e.\u0275cmp=ar({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(i,s){if(i&1&&Of(Ad,7),i&2){let o;ll(o=ul())&&(s._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,s){i&2&&ur("id",s._config.id||null)("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null)},standalone:!0,features:[Ye,dr],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,s){i&1&&Xt(0,C7,0,0,"ng-template",0)},dependencies:[Ad],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2});let t=e;return t})(),Pd=class{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new H,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(r=>{r.keyCode===27&&!this.disableClose&&!Yg(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(e,n){if(this.containerInstance){let r=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},T7=new x("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=b(Kn);return()=>t.scrollStrategies.block()}}),S7=new x("DialogData"),A7=new x("DefaultDialogConfig");var R7=0,SL=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(r,i,s,o,a,c){this._overlay=r,this._injector=i,this._defaultOptions=s,this._parentDialog=o,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new H,this._afterOpenedAtThisLevel=new H,this._ariaHiddenElements=new Map,this.afterAllClosed=ui(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Pn(void 0))),this._scrollStrategy=c}open(r,i){let s=this._defaultOptions||new Ro;i=I(I({},s),i),i.id=i.id||`cdk-dialog-${R7++}`,i.id&&this.getDialogById(i.id);let o=this._getOverlayConfig(i),a=this._overlay.create(o),c=new Pd(a,i),l=this._attachContainer(a,c,i);return c.containerInstance=l,this._attachDialogContent(r,c,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){LC(this.openDialogs,r=>r.close())}getDialogById(r){return this.openDialogs.find(i=>i.id===r)}ngOnDestroy(){LC(this._openDialogsAtThisLevel,r=>{r.config.closeOnDestroy===!1&&this._removeOpenDialog(r,!1)}),LC(this._openDialogsAtThisLevel,r=>r.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(r){let i=new Rd({positionStrategy:r.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:r.scrollStrategy||this._scrollStrategy(),panelClass:r.panelClass,hasBackdrop:r.hasBackdrop,direction:r.direction,minWidth:r.minWidth,minHeight:r.minHeight,maxWidth:r.maxWidth,maxHeight:r.maxHeight,width:r.width,height:r.height,disposeOnNavigation:r.closeOnNavigation});return r.backdropClass&&(i.backdropClass=r.backdropClass),i}_attachContainer(r,i,s){let o=s.injector||s.viewContainerRef?.injector,a=[{provide:Ro,useValue:s},{provide:Pd,useValue:i},{provide:ti,useValue:r}],c;s.container?typeof s.container=="function"?c=s.container:(c=s.container.type,a.push(...s.container.providers(s))):c=jC;let l=new Ic(c,s.viewContainerRef,Ne.create({parent:o||this._injector,providers:a}),s.componentFactoryResolver);return r.attach(l).instance}_attachDialogContent(r,i,s,o){if(r instanceof Vn){let a=this._createInjector(o,i,s,void 0),c={$implicit:o.data,dialogRef:i};o.templateContext&&(c=I(I({},c),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),s.attachTemplatePortal(new bc(r,null,c,a))}else{let a=this._createInjector(o,i,s,this._injector),c=s.attachComponentPortal(new Ic(r,o.viewContainerRef,a,o.componentFactoryResolver));i.componentRef=c,i.componentInstance=c.instance}}_createInjector(r,i,s,o){let a=r.injector||r.viewContainerRef?.injector,c=[{provide:S7,useValue:r.data},{provide:Pd,useValue:i}];return r.providers&&(typeof r.providers=="function"?c.push(...r.providers(i,r,s)):c.push(...r.providers)),r.direction&&(!a||!a.get(Td,null,{optional:!0}))&&c.push({provide:Td,useValue:{value:r.direction,change:z()}}),Ne.create({parent:a||o,providers:c})}_removeOpenDialog(r,i){let s=this.openDialogs.indexOf(r);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let r=this._overlayContainer.getContainerElement();if(r.parentElement){let i=r.parentElement.children;for(let s=i.length-1;s>-1;s--){let o=i[s];o!==r&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}};e.\u0275fac=function(i){return new(i||e)(y(Kn),y(Ne),y(A7,8),y(e,12),y(Cc),y(T7))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function LC(t,e){let n=t.length;for(;n--;)e(t[n])}function M7(){return!0}var x7=new x("mat-sanity-checks",{providedIn:"root",factory:M7}),AL=(()=>{let e=class e{constructor(r,i,s){this._sanityChecks=i,this._document=s,this._hasDoneGlobalChecks=!1,r._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(r){return Dd()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[r]}};e.\u0275fac=function(i){return new(i||e)(y(kC),y(x7,8),y(Y))},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({imports:[os,os]});let t=e;return t})();var RL=class{constructor(e,n,r,i,s){this._defaultMatcher=e,this.ngControl=n,this._parentFormGroup=r,this._parentForm=i,this._stateChanges=s,this.errorState=!1}updateErrorState(){let e=this.errorState,n=this._parentFormGroup||this._parentForm,r=this.matcher||this._defaultMatcher,i=this.ngControl?this.ngControl.control:null,s=typeof r?.isErrorState=="function"?r.isErrorState(i,n):!1;s!==e&&(this.errorState=s,this._stateChanges.next())}};var ML=new x("MAT_DATE_LOCALE",{providedIn:"root",factory:N7});function N7(){return b(pa)}var ty=class{constructor(){this._localeChanges=new H,this.localeChanges=this._localeChanges}getValidDateOrNull(e){return this.isDateInstance(e)&&this.isValid(e)?e:null}deserialize(e){return e==null||this.isDateInstance(e)&&this.isValid(e)?e:this.invalid()}setLocale(e){this.locale=e,this._localeChanges.next()}compareDate(e,n){return this.getYear(e)-this.getYear(n)||this.getMonth(e)-this.getMonth(n)||this.getDate(e)-this.getDate(n)}sameDate(e,n){if(e&&n){let r=this.isValid(e),i=this.isValid(n);return r&&i?!this.compareDate(e,n):r==i}return e==n}clampDate(e,n,r){return n&&this.compareDate(e,n)<0?n:r&&this.compareDate(e,r)>0?r:e}},P7=new x("mat-date-formats"),O7=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function BC(t,e){let n=Array(t);for(let r=0;r<t;r++)n[r]=e(r);return n}var k7=(()=>{let e=class e extends ty{constructor(r){super(),this.useUtcForDisplay=!1,this._matDateLocale=b(ML,{optional:!0}),r!==void 0&&(this._matDateLocale=r),super.setLocale(this._matDateLocale)}getYear(r){return r.getFullYear()}getMonth(r){return r.getMonth()}getDate(r){return r.getDate()}getDayOfWeek(r){return r.getDay()}getMonthNames(r){let i=new Intl.DateTimeFormat(this.locale,{month:r,timeZone:"utc"});return BC(12,s=>this._format(i,new Date(2017,s,1)))}getDateNames(){let r=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return BC(31,i=>this._format(r,new Date(2017,0,i+1)))}getDayOfWeekNames(r){let i=new Intl.DateTimeFormat(this.locale,{weekday:r,timeZone:"utc"});return BC(7,s=>this._format(i,new Date(2017,0,s+1)))}getYearName(r){let i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,r)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(r){return this.getDate(this._createDateWithOverflow(this.getYear(r),this.getMonth(r)+1,0))}clone(r){return new Date(r.getTime())}createDate(r,i,s){let o=this._createDateWithOverflow(r,i,s);return o.getMonth()!=i,o}today(){return new Date}parse(r,i){return typeof r=="number"?new Date(r):r?new Date(Date.parse(r)):null}format(r,i){if(!this.isValid(r))throw Error("NativeDateAdapter: Cannot format invalid date.");let s=new Intl.DateTimeFormat(this.locale,he(I({},i),{timeZone:"utc"}));return this._format(s,r)}addCalendarYears(r,i){return this.addCalendarMonths(r,i*12)}addCalendarMonths(r,i){let s=this._createDateWithOverflow(this.getYear(r),this.getMonth(r)+i,this.getDate(r));return this.getMonth(s)!=((this.getMonth(r)+i)%12+12)%12&&(s=this._createDateWithOverflow(this.getYear(s),this.getMonth(s),0)),s}addCalendarDays(r,i){return this._createDateWithOverflow(this.getYear(r),this.getMonth(r),this.getDate(r)+i)}toIso8601(r){return[r.getUTCFullYear(),this._2digit(r.getUTCMonth()+1),this._2digit(r.getUTCDate())].join("-")}deserialize(r){if(typeof r=="string"){if(!r)return null;if(O7.test(r)){let i=new Date(r);if(this.isValid(i))return i}}return super.deserialize(r)}isDateInstance(r){return r instanceof Date}isValid(r){return!isNaN(r.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(r,i,s){let o=new Date;return o.setFullYear(r,i,s),o.setHours(0,0,0,0),o}_2digit(r){return("00"+r).slice(-2)}_format(r,i){let s=new Date;return s.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),s.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),r.format(s)}};e.\u0275fac=function(i){return new(i||e)(y(ML,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),F7={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};function Jhe(t=F7){return[{provide:ty,useClass:k7},{provide:P7,useValue:t}]}var efe=(()=>{let e=class e{isErrorState(r,i){return!!(r&&r.invalid&&(r.touched||i&&i.submitted))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var xn=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(xn||{}),HC=class{constructor(e,n,r,i=!1){this._renderer=e,this.element=n,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=xn.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},xL=wc({passive:!0,capture:!0}),zC=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=Wn(e);n&&this._events.get(e.type)?.forEach((r,i)=>{(i===n||i.contains(n))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,r,i){let s=this._events.get(n);if(s){let o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(n,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,xL)})}removeHandler(e,n,r){let i=this._events.get(e);if(!i)return;let s=i.get(n);s&&(s.delete(r),s.size===0&&i.delete(n),i.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,xL)))}},NL={enterDuration:225,exitDuration:150},L7=800,PL=wc({passive:!0,capture:!0}),OL=["mousedown","touchstart"],kL=["mouseup","mouseleave","touchend","touchcancel"],Od=class Od{constructor(e,n,r,i){this._target=e,this._ngZone=n,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=ei(r))}fadeInRipple(e,n,r={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=I(I({},NL),r.animation);r.centered&&(e=i.left+i.width/2,n=i.top+i.height/2);let o=r.radius||V7(e,n,i),a=e-i.left,c=n-i.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-o}px`,u.style.top=`${c-o}px`,u.style.height=`${o*2}px`,u.style.width=`${o*2}px`,r.color!=null&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,f=d.transitionDuration,m=h==="none"||f==="0s"||f==="0s, 0s"||i.width===0&&i.height===0,g=new HC(this,u,r,m);u.style.transform="scale3d(1, 1, 1)",g.state=xn.FADING_IN,r.persistent||(this._mostRecentTransientRipple=g);let v=null;return!m&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let E=()=>this._finishRippleTransition(g),R=()=>this._destroyRipple(g);u.addEventListener("transitionend",E),u.addEventListener("transitioncancel",R),v={onTransitionEnd:E,onTransitionCancel:R}}),this._activeRipples.set(g,v),(m||!l)&&this._finishRippleTransition(g),g}fadeOutRipple(e){if(e.state===xn.FADING_OUT||e.state===xn.HIDDEN)return;let n=e.element,r=I(I({},NL),e.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",e.state=xn.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=ei(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,OL.forEach(r=>{Od._eventManager.addHandler(this._ngZone,r,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{kL.forEach(n=>{this._triggerElement.addEventListener(n,this,PL)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===xn.FADING_IN?this._startFadeOutTransition(e):e.state===xn.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=xn.VISIBLE,!r&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=xn.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=PC(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+L7;!this._target.rippleDisabled&&!n&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!OC(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let r=0;r<n.length;r++)this.fadeInRipple(n[r].clientX,n[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===xn.VISIBLE||e.config.terminateOnPointerUp&&e.state===xn.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(OL.forEach(n=>Od._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&kL.forEach(n=>e.removeEventListener(n,this,PL)))}};Od._eventManager=new zC;var qC=Od;function V7(t,e,n){let r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}var jL=new x("mat-ripple-global-options"),j7=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(r){r&&this.fadeOutAllNonPersistent(),this._disabled=r,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(r){this._trigger=r,this._setupTriggerEventsIfEnabled()}constructor(r,i,s,o,a){this._elementRef=r,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new qC(this,i,r,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:I(I(I({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(r,i=0,s){return typeof r=="number"?this._rippleRenderer.fadeInRipple(r,i,I(I({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,I(I({},this.rippleConfig),r))}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(L),S(Ke),S(jL,8),S(Gt,8))},e.\u0275dir=ye({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,s){i&2&&Br("mat-ripple-unbounded",s.unbounded)},inputs:{color:[pe.None,"matRippleColor","color"],unbounded:[pe.None,"matRippleUnbounded","unbounded"],centered:[pe.None,"matRippleCentered","centered"],radius:[pe.None,"matRippleRadius","radius"],animation:[pe.None,"matRippleAnimation","animation"],disabled:[pe.None,"matRippleDisabled","disabled"],trigger:[pe.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=e;return t})(),tfe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({imports:[AL,AL]});let t=e;return t})();var FL={capture:!0},LL=["focus","click","mouseenter","touchstart"],UC="mat-ripple-loader-uninitialized",$C="mat-ripple-loader-class-name",VL="mat-ripple-loader-centered",ey="mat-ripple-loader-disabled",nfe=(()=>{let e=class e{constructor(){this._document=b(Y,{optional:!0}),this._animationMode=b(Gt,{optional:!0}),this._globalRippleOptions=b(jL,{optional:!0}),this._platform=b(Ke),this._ngZone=b(L),this._hosts=new Map,this._onInteraction=r=>{if(!(r.target instanceof HTMLElement))return;let s=r.target.closest(`[${UC}]`);s&&this._createRipple(s)},this._ngZone.runOutsideAngular(()=>{for(let r of LL)this._document?.addEventListener(r,this._onInteraction,FL)})}ngOnDestroy(){let r=this._hosts.keys();for(let i of r)this.destroyRipple(i);for(let i of LL)this._document?.removeEventListener(i,this._onInteraction,FL)}configureRipple(r,i){r.setAttribute(UC,""),(i.className||!r.hasAttribute($C))&&r.setAttribute($C,i.className||""),i.centered&&r.setAttribute(VL,""),i.disabled&&r.setAttribute(ey,"")}getRipple(r){return this._hosts.get(r)||this._createRipple(r)}setDisabled(r,i){let s=this._hosts.get(r);if(s){s.disabled=i;return}i?r.setAttribute(ey,""):r.removeAttribute(ey)}_createRipple(r){if(!this._document)return;let i=this._hosts.get(r);if(i)return i;r.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",r.getAttribute($C)),r.append(s);let o=new j7(new ve(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=r,o.centered=r.hasAttribute(VL),o.disabled=r.hasAttribute(ey),this.attachRipple(r,o),o}attachRipple(r,i){r.removeAttribute(UC),this._hosts.set(r,i)}destroyRipple(r){let i=this._hosts.get(r);i&&(i.ngOnDestroy(),this._hosts.delete(r))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function B7(t,e){}var kd=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},GC="mdc-dialog--open",BL="mdc-dialog--opening",UL="mdc-dialog--closing",U7=150,$7=75,H7=(()=>{let e=class e extends jC{constructor(r,i,s,o,a,c,l,u,d){super(r,i,s,o,a,c,l,d),this._animationMode=u,this._animationStateChanged=new Ce,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?HL(this._config.enterAnimationDuration)??U7:0,this._exitAnimationDuration=this._animationsEnabled?HL(this._config.exitAnimationDuration)??$7:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty($L,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(BL,GC)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(GC),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(GC),this._animationsEnabled?(this._hostElement.style.setProperty($L,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(UL)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(BL,UL)}_waitForAnimationToComplete(r,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,r)}_requestAnimationFrame(r){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(r):r()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(r){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(r){let i=super.attachComponentPortal(r);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(xd),S(Y,8),S(kd),S(Md),S(L),S(ti),S(Gt,8),S(Nd))},e.\u0275cmp=ar({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,s){i&2&&(Pf("id",s._config.id),ur("aria-modal",s._config.ariaModal)("role",s._config.role)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null),Br("_mat-animation-noopable",!s._animationsEnabled))},standalone:!0,features:[Ye,dr],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,s){i&1&&(Vt(0,"div",0)(1,"div",1),Xt(2,B7,0,0,"ng-template",2),Tt()())},dependencies:[Ad],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2});let t=e;return t})(),$L="--mat-dialog-transition-duration";function HL(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?Id(t.substring(0,t.length-2)):t.endsWith("s")?Id(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var ny=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(ny||{}),WC=class{constructor(e,n,r){this._ref=e,this._containerInstance=r,this._afterOpened=new H,this._beforeClosed=new H,this._state=ny.OPEN,this.disableClose=n.disableClose,this.id=e.id,r._animationStateChanged.pipe(Fe(i=>i.state==="opened"),He(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(Fe(i=>i.state==="closed"),He(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Oc(this.backdropClick(),this.keydownEvents().pipe(Fe(i=>i.keyCode===27&&!this.disableClose&&!Yg(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),z7(this,i.type==="keydown"?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Fe(n=>n.state==="closing"),He(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=ny.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=ny.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function z7(t,e,n){return t._closeInteractionType=e,t.close(n)}var KC=new x("MatMdcDialogData"),q7=new x("mat-mdc-dialog-default-options"),G7=new x("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=b(Kn);return()=>t.scrollStrategies.block()}});var W7=0,zL=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(r,i,s,o,a,c,l,u){this._overlay=r,this._defaultOptions=o,this._scrollStrategy=a,this._parentDialog=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new H,this._afterOpenedAtThisLevel=new H,this.dialogConfigClass=kd,this.afterAllClosed=ui(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Pn(void 0))),this._dialog=i.get(SL),this._dialogRefConstructor=WC,this._dialogContainerType=H7,this._dialogDataToken=KC}open(r,i){let s;i=I(I({},this._defaultOptions||new kd),i),i.id=i.id||`mat-mdc-dialog-${W7++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(r,he(I({},i),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:Ro,useValue:i}]},templateContext:()=>({dialogRef:s}),providers:(a,c,l)=>(s=new this._dialogRefConstructor(a,i,l),s.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:s}])}));return s.componentRef=o.componentRef,s.componentInstance=o.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(s);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(r){return this.openDialogs.find(i=>i.id===r)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(r){let i=r.length;for(;i--;)r[i].close()}};e.\u0275fac=function(i){return new(i||e)(y(Kn),y(Ne),y(fr,8),y(q7,8),y(G7),y(e,12),y(Cc),y(Gt,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Q7=t=>({"pb-10":t});function Y7(t,e){if(t&1){let n=ew();Vt(0,"button",12),ct("click",function(){wv(n);let i=da();return Ev(i.cancel())}),UA(),Vt(1,"svg",13),bi(2,"path",14),Tt(),$A(),Vt(3,"span",15),ha(4,"Close modal"),Tt()()}}function Z7(t,e){t&1&&Jv(0)}function X7(t,e){if(t&1&&Xt(0,Z7,1,0,"ng-container",16),t&2){let n=da();xs("ngTemplateOutlet",n.contentTemplateRef)}}function J7(t,e){if(t&1){let n=ew();Vt(0,"button",17),ct("click",function(){wv(n);let i=da();return Ev(i.cancel())}),ha(1),Tt()}if(t&2){let n=da();jn(),Ns(" ",n.cancelText," ")}}var qL=(()=>{let e=class e{constructor(r){if(this.data=r,this.doConfirm=Mv(),this.doCancel=Mv(),this.title="\u901A\u77E5",this.content="",this.okText="\u78BA\u8A8D",this.cancelText="\u53D6\u6D88",this.outsideClose=!1,this.showCrossBtn=!0,this.showCancelBtn=!0,this.btnCenter=!0,this.fullScreen=!1,this.data){let{title:i,content:s,okText:o,cancelText:a,showCrossBtn:c,outsideClose:l,showCancelBtn:u,contentTemplateRef:d,btnCenter:h,fullScreen:f,afterViewInit:m}=r;this.title=i||this.title,this.content=s||this.content,this.okText=o||this.okText,this.cancelText=a||this.cancelText,this.showCrossBtn=c||this.showCrossBtn,this.outsideClose=l||this.outsideClose,this.showCancelBtn=u||this.showCancelBtn,this.btnCenter=h||this.btnCenter,this.contentTemplateRef=d,this.fullScreen=f||this.fullScreen,this.afterViewInitEvent=m||(()=>{})}}ngOnInit(){}ngAfterViewInit(){this.afterViewInitEvent()}clickOutsideClose(){this.outsideClose&&this.cancel()}cancel(){this.doCancel.emit()}ok(){this.doConfirm.emit()}};e.\u0275fac=function(i){return new(i||e)(S(KC))},e.\u0275cmp=ar({type:e,selectors:[["app-modal"]],outputs:{doConfirm:"doConfirm",doCancel:"doCancel"},standalone:!0,features:[dr],decls:15,vars:10,consts:[[1,"bg-white","dark:bg-gray-700","min-w-72","min-h-48","flex","overflow-y-auto","overflow-x-hidden","justify-center","items-center","w-full","md:inset-0","h-[calc(100%-1rem)]","max-h-full"],[1,"relative","w-full","max-w-2xl","max-h-screen","overflow-scroll"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button","class","text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide","default-modal",3,"click",4,"ngIf"],[1,"p-4","md:p-5","space-y-4","text-gray-900","dark:text-white","min-h-20"],[3,"innerHTML"],[1,"flex","justify-center","items-center","p-4","md:p-5","border-t","border-gray-200","rounded-b","dark:border-gray-600"],["type","button",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],["type","button","class","ms-3 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600",3,"click",4,"ngIf"],[1,"fixed","h-full","w-full","top-0","left-0","-z-10",3,"click"],["type","button","data-modal-hide","default-modal",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","ms-auto","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[4,"ngTemplateOutlet"],["type","button",1,"ms-3","text-gray-500","bg-white","hover:bg-gray-100","focus:ring-4","focus:outline-none","focus:ring-blue-300","rounded-lg","border","border-gray-200","text-sm","font-medium","px-5","py-2.5","hover:text-gray-900","focus:z-10","dark:bg-gray-700","dark:text-gray-300","dark:border-gray-500","dark:hover:text-white","dark:hover:bg-gray-600","dark:focus:ring-gray-600",3,"click"]],template:function(i,s){i&1&&(Vt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),ha(5),Tt(),Xt(6,Y7,5,0,"button",5),Tt(),Vt(7,"div",6),bi(8,"p",7),Xt(9,X7,1,1,"ng-container"),Tt(),Vt(10,"div",8)(11,"button",9),ct("click",function(){return s.ok()}),ha(12),Tt(),Xt(13,J7,2,1,"button",10),Tt()()()(),Vt(14,"div",11),ct("click",function(){return s.clickOutsideClose()}),Tt()),i&2&&(jn(5),Ns(" ",s.title," "),jn(),xs("ngIf",s.showCrossBtn&&s.showCancelBtn),jn(2),xs("innerHTML",s.content,_R),jn(),Xv(9,s.contentTemplateRef?9:-1),jn(),dM(IM(8,Q7,s.fullScreen)),jn(2),Ns(" ",s.okText," "),jn(),xs("ngIf",s.showCancelBtn))},dependencies:[Os,HM,zM]});let t=e;return t})();var kfe=(()=>{let e=class e{constructor(r){this.dialog=r,this.modalQueue=[],this.currentModal$=new fs,this.executeStatus$=new H,this.executeModal()}executeModal(){this.executeStatus$.subscribe(()=>{this.modalQueue.length>0&&this.currentModal$.next(this.modalQueue[0])})}openConfirm(r){let i=Date.now();this.pushModalConfig(i);let s=o=>{let a={data:I({},o)};return o.fullScreen?I({maxWidth:"100vw",width:"100%"},a):a};return this.modalQueue.length===1&&this.executeStatus$.next(!0),new Promise(o=>{this.currentModal$.subscribe(a=>{if(a===i){let c=this.dialog.open(qL,s(r));o(c),c.componentInstance.doConfirm.subscribe(()=>{r.onOk&&r.onOk(),this.modalQueue.shift(),c.close(),this.executeStatus$.next(!0)}),c.componentInstance.doCancel.subscribe(()=>{r.onCancel&&r.onCancel(),this.modalQueue.shift(),c.close(),this.executeStatus$.next(!0)})}})})}pushModalConfig(r){this.modalQueue.push(r)}cleanQueue(){let r=this.modalQueue[0];this.modalQueue=[r]}};e.\u0275fac=function(i){return new(i||e)(y(zL))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var tV=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(S(Bn),S(ve))},e.\u0275dir=ye({type:e});let t=e;return t})(),jd=(()=>{let e=class e extends tV{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=lr(e)))(s||e)}})(),e.\u0275dir=ye({type:e,features:[Ye]});let t=e;return t})(),xo=new x(""),eY={provide:xo,useExisting:gn(()=>tY),multi:!0},tY=(()=>{let e=class e extends jd{writeValue(r){this.setProperty("checked",r)}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=lr(e)))(s||e)}})(),e.\u0275dir=ye({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,s){i&1&&ct("change",function(a){return s.onChange(a.target.checked)})("blur",function(){return s.onTouched()})},features:[Wt([eY]),Ye]});let t=e;return t})(),nY={provide:xo,useExisting:gn(()=>nV),multi:!0};function rY(){let t=hr()?hr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var iY=new x(""),nV=(()=>{let e=class e extends tV{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!rY())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(S(Bn),S(ve),S(iY,8))},e.\u0275dir=ye({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&ct("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Wt([nY]),Ye]});let t=e;return t})();function as(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function rV(t){return t!=null&&typeof t.length=="number"}var hy=new x(""),fy=new x(""),sY=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,GL=class{static min(e){return oY(e)}static max(e){return aY(e)}static required(e){return cY(e)}static requiredTrue(e){return lY(e)}static email(e){return uY(e)}static minLength(e){return dY(e)}static maxLength(e){return hY(e)}static pattern(e){return fY(e)}static nullValidator(e){return iV(e)}static compose(e){return uV(e)}static composeAsync(e){return dV(e)}};function oY(t){return e=>{if(as(e.value)||as(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function aY(t){return e=>{if(as(e.value)||as(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function cY(t){return as(t.value)?{required:!0}:null}function lY(t){return t.value===!0?null:{required:!0}}function uY(t){return as(t.value)||sY.test(t.value)?null:{email:!0}}function dY(t){return e=>as(e.value)||!rV(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function hY(t){return e=>rV(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function fY(t){if(!t)return iV;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(as(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function iV(t){return null}function sV(t){return t!=null}function oV(t){return Ps(t)?Oe(t):t}function aV(t){let e={};return t.forEach(n=>{e=n!=null?I(I({},e),n):e}),Object.keys(e).length===0?null:e}function cV(t,e){return e.map(n=>n(t))}function pY(t){return!t.validate}function lV(t){return t.map(e=>pY(e)?e:n=>e.validate(n))}function uV(t){if(!t)return null;let e=t.filter(sV);return e.length==0?null:function(n){return aV(cV(n,e))}}function YC(t){return t!=null?uV(lV(t)):null}function dV(t){if(!t)return null;let e=t.filter(sV);return e.length==0?null:function(n){let r=cV(n,e).map(oV);return Fy(r).pipe(oe(aV))}}function ZC(t){return t!=null?dV(lV(t)):null}function WL(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function hV(t){return t._rawValidators}function fV(t){return t._rawAsyncValidators}function QC(t){return t?Array.isArray(t)?t:[t]:[]}function iy(t,e){return Array.isArray(t)?t.includes(e):t===e}function KL(t,e){let n=QC(e);return QC(t).forEach(i=>{iy(n,i)||n.push(i)}),n}function QL(t,e){return QC(e).filter(n=>!iy(t,n))}var sy=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=YC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ZC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},ni=class extends sy{get formDirective(){return null}get path(){return null}},Mo=class extends sy{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},oy=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},mY={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Jfe=he(I({},mY),{"[class.ng-submitted]":"isSubmitted"}),epe=(()=>{let e=class e extends oy{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(S(Mo,2))},e.\u0275dir=ye({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Br("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ye]});let t=e;return t})(),tpe=(()=>{let e=class e extends oy{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(S(ni,10))},e.\u0275dir=ye({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Br("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Ye]});let t=e;return t})();var Fd="VALID",ry="INVALID",Sc="PENDING",Ld="DISABLED";function pV(t){return(py(t)?t.validators:t)||null}function gY(t){return Array.isArray(t)?YC(t):t||null}function mV(t,e){return(py(e)?e.asyncValidators:t)||null}function yY(t){return Array.isArray(t)?ZC(t):t||null}function py(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function _Y(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new T(1e3,"");if(!r[n])throw new T(1001,"")}function vY(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new T(1002,"")})}var ay=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Fd}get invalid(){return this.status===ry}get pending(){return this.status==Sc}get disabled(){return this.status===Ld}get enabled(){return this.status!==Ld}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(KL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(KL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(QL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(QL(e,this._rawAsyncValidators))}hasValidator(e){return iy(this._rawValidators,e)}hasAsyncValidator(e){return iy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Sc,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ld,this.errors=null,this._forEachChild(r=>{r.disable(he(I({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(he(I({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Fd,this._forEachChild(r=>{r.enable(he(I({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(he(I({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fd||this.status===Sc)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ld:Fd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Sc,this._hasOwnPendingAsyncValidator=!0;let n=oV(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ce,this.statusChanges=new Ce}_calculateStatus(){return this._allControlsDisabled()?Ld:this.errors?ry:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sc)?Sc:this._anyControlsHaveStatus(ry)?ry:Fd}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){py(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=gY(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=yY(this._rawAsyncValidators)}},cy=class extends ay{constructor(e,n,r){super(pV(n),mV(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){vY(this,!0,e),Object.keys(e).forEach(r=>{_Y(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Bd=new x("CallSetDisabledState",{providedIn:"root",factory:()=>my}),my="always";function gV(t,e){return[...e.path,t]}function ly(t,e,n=my){XC(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),EY(t,e),bY(t,e),IY(t,e),wY(t,e)}function YL(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),dy(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function uy(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function wY(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function XC(t,e){let n=hV(t);e.validator!==null?t.setValidators(WL(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=fV(t);e.asyncValidator!==null?t.setAsyncValidators(WL(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();uy(e._rawValidators,i),uy(e._rawAsyncValidators,i)}function dy(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=hV(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=fV(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return uy(e._rawValidators,r),uy(e._rawAsyncValidators,r),n}function EY(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&yV(t,e)})}function IY(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&yV(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function yV(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function bY(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function _V(t,e){t==null,XC(t,e)}function DY(t,e){return dy(t,e)}function vV(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function CY(t){return Object.getPrototypeOf(t.constructor)===jd}function wV(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function EV(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===nV?n=s:CY(s)?r=s:i=s}),i||r||n||null}function TY(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var SY={provide:ni,useExisting:gn(()=>AY)},Vd=Promise.resolve(),AY=(()=>{let e=class e extends ni{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ce,this.form=new cy({},YC(r),ZC(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Vd.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),ly(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Vd.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Vd.then(()=>{let i=this._findContainer(r.path),s=new cy({});_V(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Vd.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Vd.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,wV(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(S(hy,10),S(fy,10),S(Bd,8))},e.\u0275dir=ye({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&ct("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[pe.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Wt([SY]),Ye]});let t=e;return t})();function ZL(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function XL(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var IV=class extends ay{constructor(e=null,n,r){super(pV(n),mV(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),py(n)&&(n.nonNullable||n.initialValueIsDefault)&&(XL(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ZL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ZL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){XL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var RY=t=>t instanceof IV;var MY={provide:Mo,useExisting:gn(()=>xY)},JL=Promise.resolve(),xY=(()=>{let e=class e extends Mo{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new IV,this._registered=!1,this.name="",this.update=new Ce,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=EV(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),vV(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ly(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){JL.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&En(i);JL.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?gV(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(S(ni,9),S(hy,10),S(fy,10),S(xo,10),S(wn,8),S(Bd,8))},e.\u0275dir=ye({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[pe.None,"disabled","isDisabled"],model:[pe.None,"ngModel","model"],options:[pe.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Wt([MY]),Ye,Lt]});let t=e;return t})();var NY={provide:xo,useExisting:gn(()=>PY),multi:!0},PY=(()=>{let e=class e extends jd{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=lr(e)))(s||e)}})(),e.\u0275dir=ye({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&ct("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[Wt([NY]),Ye]});let t=e;return t})();var bV=new x("");var OY={provide:ni,useExisting:gn(()=>kY)},kY=(()=>{let e=class e extends ni{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ce,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(dy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return ly(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){YL(r.control||null,r,!1),TY(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,wV(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(YL(i||null,r),RY(s)&&(ly(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);_V(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&DY(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){XC(this.form,this),this._oldForm&&dy(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(S(hy,10),S(fy,10),S(Bd,8))},e.\u0275dir=ye({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&ct("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[pe.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Wt([OY]),Ye,Lt]});let t=e;return t})();var FY={provide:Mo,useExisting:gn(()=>LY)},LY=(()=>{let e=class e extends Mo{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Ce,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=EV(this,o)}ngOnChanges(r){this._added||this._setUpControl(),vV(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return gV(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(S(ni,13),S(hy,10),S(fy,10),S(xo,10),S(bV,8))},e.\u0275dir=ye({type:e,selectors:[["","formControlName",""]],inputs:{name:[pe.None,"formControlName","name"],isDisabled:[pe.None,"disabled","isDisabled"],model:[pe.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Wt([FY]),Ye,Lt]});let t=e;return t})(),VY={provide:xo,useExisting:gn(()=>CV),multi:!0};function DV(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function jY(t){return t.split(":")[0]}var CV=(()=>{let e=class e extends jd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=DV(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=jY(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=lr(e)))(s||e)}})(),e.\u0275dir=ye({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&ct("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Wt([VY]),Ye]});let t=e;return t})(),rpe=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(DV(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(Bn),S(CV,9))},e.\u0275dir=ye({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),BY={provide:xo,useExisting:gn(()=>TV),multi:!0};function eV(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function UY(t){return t.split(":")[0]}var TV=(()=>{let e=class e extends jd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let l=a[c],u=this._getOptionValue(l.value);s.push(u)}}else{let a=i.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let u=this._getOptionValue(l.value);s.push(u)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=UY(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=lr(e)))(s||e)}})(),e.\u0275dir=ye({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&ct("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Wt([BY]),Ye]});let t=e;return t})(),ipe=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(eV(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(eV(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(S(ve),S(Bn),S(TV,9))},e.\u0275dir=ye({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var SV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({});let t=e;return t})();var JC=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Bd,useValue:r.callSetDisabledState??my}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({imports:[SV]});let t=e;return t})(),eT=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:bV,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Bd,useValue:r.callSetDisabledState??my}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({imports:[SV]});let t=e;return t})();var $Y=[Os,JC,eT,uE],upe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ce({type:e}),e.\u0275inj=ae({imports:[$Y,Os,JC,eT,uE]});let t=e;return t})();export{I as a,he as b,HY as c,zY as d,p as e,Ae as f,W as g,H as h,MT as i,Pt as j,zX as k,z as l,Uo as m,oe as n,Xn as o,ui as p,Pc as q,mj as r,Oc as s,gj as t,Fe as u,He as v,_j as w,Ej as x,eS as y,Pn as z,Zt as A,er as B,et as C,gn as D,C as E,ae as F,x as G,Mj as H,y as I,b as J,mt as K,cv as L,pe as M,ar as N,ce as O,ye as P,df as Q,uB as R,Lt as S,wv as T,Ev as U,UA as V,$A as W,lr as X,Rv as Y,Ne as Z,Mv as _,lse as $,ve as aa,Ce as ba,_n as ca,Gt as da,jn as ea,S as fa,NR as ga,Vn as ha,vn as ia,Qv as ja,fse as ka,Ye as la,jr as ma,Xt as na,L as oa,ur as pa,xs as qa,Zv as ra,Br as sa,dM as ta,Xv as ua,pse as va,mse as wa,gse as xa,yse as ya,Vt as za,Tt as Aa,bi as Ba,ew as Ca,Pf as Da,MH as Ea,ct as Fa,FH as Ga,da as Ha,vM as Ia,wM as Ja,jH as Ka,Of as La,ll as Ma,ul as Na,_se as Oa,vse as Pa,wse as Qa,ha as Ra,$H as Sa,Ns as Ta,HH as Ua,Ese as Va,zH as Wa,Wt as Xa,dr as Ya,IM as Za,Ise as _a,bse as $a,Dse as ab,Lf as bb,Di as cb,Cse as db,wn as eb,En as fb,vz as gb,Y as hb,jM as ib,Gse as jb,HM as kb,Wse as lb,zM as mb,Kse as nb,Os as ob,gw as pb,poe as qb,moe as rb,Ai as sb,Lq as tb,$n as ub,Poe as vb,Ooe as wb,uE as xb,Voe as yb,bae as zb,Dae as Ab,Cae as Bb,zs as Cb,mce as Db,II as Eb,cP as Fb,_ce as Gb,Xe as Hb,pd as Ib,Xle as Jb,Jle as Kb,eue as Lb,tue as Mb,nue as Nb,rue as Ob,iue as Pb,sue as Qb,oue as Rb,aue as Sb,cue as Tb,lue as Ub,uue as Vb,due as Wb,hue as Xb,fue as Yb,pue as Zb,mue as _b,BQ as $b,Id as ac,_c as bc,ei as cc,jue as dc,Ke as ec,Gue as fc,wc as gc,oL as hc,Ec as ic,Wn as jc,Td as kc,cL as lc,EC as mc,aL as nc,Ic as oc,bc as pc,Ad as qc,Qg as rc,Yg as sc,Rd as tc,RC as uc,Kn as vc,gL as wc,_L as xc,uhe as yc,PC as zc,OC as Ac,Nd as Bc,dhe as Cc,hhe as Dc,_ue as Ec,vue as Fc,$0 as Gc,wue as Hc,Eue as Ic,Iue as Jc,kue as Kc,AL as Lc,RL as Mc,ty as Nc,P7 as Oc,k7 as Pc,Jhe as Qc,efe as Rc,tfe as Sc,nfe as Tc,kfe as Uc,xo as Vc,tY as Wc,nV as Xc,hy as Yc,GL as Zc,ni as _c,Mo as $c,epe as ad,tpe as bd,cy as cd,AY as dd,IV as ed,xY as fd,PY as gd,kY as hd,LY as id,CV as jd,rpe as kd,ipe as ld,JC as md,upe as nd};
