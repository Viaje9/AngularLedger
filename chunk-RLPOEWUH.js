var eV=Object.create;var iy=Object.defineProperty,tV=Object.defineProperties,nV=Object.getOwnPropertyDescriptor,iV=Object.getOwnPropertyDescriptors,rV=Object.getOwnPropertyNames,kd=Object.getOwnPropertySymbols,HC=Object.getPrototypeOf,ry=Object.prototype.hasOwnProperty,zC=Object.prototype.propertyIsEnumerable,sV=Reflect.get;var $C=(t,e,n)=>e in t?iy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I=(t,e)=>{for(var n in e||={})ry.call(e,n)&&$C(t,n,e[n]);if(kd)for(var n of kd(e))zC.call(e,n)&&$C(t,n,e[n]);return t},ge=(t,e)=>tV(t,iV(e));var qC=(t,e)=>{var n={};for(var i in t)ry.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&kd)for(var i of kd(t))e.indexOf(i)<0&&zC.call(t,i)&&(n[i]=t[i]);return n};var iY=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var oV=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of rV(e))!ry.call(t,r)&&r!==n&&iy(t,r,{get:()=>e[r],enumerable:!(i=nV(e,r))||i.enumerable});return t};var rY=(t,e,n)=>(n=t!=null?eV(HC(t)):{},oV(e||!t||!t.__esModule?iy(n,"default",{value:t,enumerable:!0}):n,t));var Gn=(t,e,n)=>sV(HC(t),n,e);var m=(t,e,n)=>new Promise((i,r)=>{var s=c=>{try{a(n.next(c))}catch(l){r(l)}},o=c=>{try{a(n.throw(c))}catch(l){r(l)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});function aV(t,e){return Object.is(t,e)}var at=null,Fd=!1,Ld=1,Ro=Symbol("SIGNAL");function pt(t){let e=at;return at=t,e}var sy={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function GC(t){if(Fd)throw new Error("");if(at===null)return;at.consumerOnSignalRead(t);let e=at.nextProducerIndex++;if(Ao(at),e<at.producerNode.length&&at.producerNode[e]!==t&&bc(at)){let n=at.producerNode[e];Vd(n,at.producerIndexOfThis[e])}at.producerNode[e]!==t&&(at.producerNode[e]=t,at.producerIndexOfThis[e]=bc(at)?XC(t,at,e):0),at.producerLastReadVersion[e]=t.version}function cV(){Ld++}function lV(t){if(!(bc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Ld)){if(!t.producerMustRecompute(t)&&!oy(t)){t.dirty=!1,t.lastCleanEpoch=Ld;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Ld}}function WC(t){if(t.liveConsumerNode===void 0)return;let e=Fd;Fd=!0;try{for(let n of t.liveConsumerNode)n.dirty||uV(n)}finally{Fd=e}}function KC(){return at?.consumerAllowSignalWrites!==!1}function uV(t){t.dirty=!0,WC(t),t.consumerMarkedDirty?.(t)}function QC(t){return t&&(t.nextProducerIndex=0),pt(t)}function YC(t,e){if(pt(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(bc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Vd(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function oy(t){Ao(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(lV(n),i!==n.version))return!0}return!1}function ZC(t){if(Ao(t),bc(t))for(let e=0;e<t.producerNode.length;e++)Vd(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function XC(t,e,n){if(JC(t),Ao(t),t.liveConsumerNode.length===0)for(let i=0;i<t.producerNode.length;i++)t.producerIndexOfThis[i]=XC(t.producerNode[i],t,i);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Vd(t,e){if(JC(t),Ao(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)Vd(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];Ao(r),r.producerIndexOfThis[i]=e}}function bc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ao(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function JC(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function dV(){throw new Error}var eT=dV;function tT(){eT()}function nT(t){eT=t}var hV=null;function iT(t){let e=Object.create(sT);e.value=t;let n=()=>(GC(e),e.value);return n[Ro]=e,n}function ay(t,e){KC()||tT(),t.equal(t.value,e)||(t.value=e,fV(t))}function rT(t,e){KC()||tT(),ay(t,e(t.value))}var sT=ge(I({},sy),{equal:aV,value:void 0});function fV(t){t.version++,cV(),WC(t),hV?.()}function U(t){return typeof t=="function"}function xo(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var jd=xo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function cs(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ae=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(U(i))try{i()}catch(s){e=s instanceof jd?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{oT(s)}catch(o){e=e??[],o instanceof jd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new jd(e)}}add(e){var n;if(e&&e!==this)if(this.closed)oT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&cs(n,e)}remove(e){let{_finalizers:n}=this;n&&cs(n,e),e instanceof t&&e._removeParent(this)}};Ae.EMPTY=(()=>{let t=new Ae;return t.closed=!0,t})();var cy=Ae.EMPTY;function Bd(t){return t instanceof Ae||t&&"closed"in t&&U(t.remove)&&U(t.add)&&U(t.unsubscribe)}function oT(t){U(t)?t():t.unsubscribe()}var xn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Mo={setTimeout(t,e,...n){let{delegate:i}=Mo;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Mo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ud(t){Mo.setTimeout(()=>{let{onUnhandledError:e}=xn;if(e)e(t);else throw t})}function Ni(){}var aT=ly("C",void 0,void 0);function cT(t){return ly("E",void 0,t)}function lT(t){return ly("N",t,void 0)}function ly(t,e,n){return{kind:t,value:e,error:n}}var ls=null;function No(t){if(xn.useDeprecatedSynchronousErrorHandling){let e=!ls;if(e&&(ls={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=ls;if(ls=null,n)throw i}}else t()}function uT(t){xn.useDeprecatedSynchronousErrorHandling&&ls&&(ls.errorThrown=!0,ls.error=t)}var us=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Bd(e)&&e.add(this)):this.destination=gV}static create(e,n,i){return new Pi(e,n,i)}next(e){this.isStopped?dy(lT(e),this):this._next(e)}error(e){this.isStopped?dy(cT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?dy(aT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},pV=Function.prototype.bind;function uy(t,e){return pV.call(t,e)}var hy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){$d(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){$d(i)}else $d(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){$d(n)}}},Pi=class extends us{constructor(e,n,i){super();let r;if(U(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let s;this&&xn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&uy(e.next,s),error:e.error&&uy(e.error,s),complete:e.complete&&uy(e.complete,s)}):r=e}this.destination=new hy(r)}};function $d(t){xn.useDeprecatedSynchronousErrorHandling?uT(t):Ud(t)}function mV(t){throw t}function dy(t,e){let{onStoppedNotification:n}=xn;n&&Mo.setTimeout(()=>n(t,e))}var gV={closed:!0,next:Ni,error:mV,complete:Ni};var Po=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nt(t){return t}function Hd(...t){return fy(t)}function fy(t){return t.length===0?Nt:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var W=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let s=_V(n)?n:new Pi(n,i,r);return No(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=dT(i),new i((r,s)=>{let o=new Pi({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[Po](){return this}pipe(...n){return fy(n)(this)}toPromise(n){return n=dT(n),new n((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return t.create=e=>new t(e),t})();function dT(t){var e;return(e=t??xn.Promise)!==null&&e!==void 0?e:Promise}function yV(t){return t&&U(t.next)&&U(t.error)&&U(t.complete)}function _V(t){return t&&t instanceof us||yV(t)&&Bd(t)}function py(t){return U(t?.lift)}function Z(t){return e=>{if(py(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function J(t,e,n,i,r){return new my(t,e,n,i,r)}var my=class extends us{constructor(e,n,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Oo(){return Z((t,e)=>{let n=null;t._refCount++;let i=J(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,s=n;n=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var rr=class extends W{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,py(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ae;let n=this.getSubject();e.add(this.source.subscribe(J(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ae.EMPTY)}return e}refCount(){return Oo()(this)}};var ko={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame,{delegate:i}=ko;i&&(e=i.requestAnimationFrame,n=i.cancelAnimationFrame);let r=e(s=>{n=void 0,t(s)});return new Ae(()=>n?.(r))},requestAnimationFrame(...t){let{delegate:e}=ko;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){let{delegate:e}=ko;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};var hT=xo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var q=(()=>{class t extends W{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new zd(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new hT}next(n){No(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){No(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){No(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:s}=this;return i||r?cy:(this.currentObservers=null,s.push(n),new Ae(()=>{this.currentObservers=null,cs(s,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:s}=this;i?n.error(r):s&&n.complete()}asObservable(){let n=new W;return n.source=this,n}}return t.create=(e,n)=>new zd(e,n),t})(),zd=class extends q{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:cy}};var Ke=class extends q{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Dc={now(){return(Dc.delegate||Date).now()},delegate:void 0};var ds=class extends q{constructor(e=1/0,n=1/0,i=Dc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;n||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){let o=n.now(),a=0;for(let c=1;c<i.length&&i[c]<=o;c+=2)a=c;a&&i.splice(0,a+1)}}};var qd=class extends Ae{constructor(e,n){super()}schedule(e,n=0){return this}};var Cc={setInterval(t,e,...n){let{delegate:i}=Cc;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Cc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var sr=class extends qd{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,i=0){return Cc.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Cc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,cs(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Fo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};Fo.now=Dc.now;var or=class extends Fo{constructor(e,n=Fo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var un=new or(sr),gy=un;var Gd=class extends sr{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var Wd=class extends or{};var yy=new Wd(Gd);var Kd=class extends sr{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return i!==null&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=ko.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,i=0){var r;if(i!=null?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);let{actions:s}=e;n!=null&&((r=s[s.length-1])===null||r===void 0?void 0:r.id)!==n&&(ko.cancelAnimationFrame(n),e._scheduled=void 0)}};var Qd=class extends or{flush(e){this._active=!0;let n=this._scheduled;this._scheduled=void 0;let{actions:i}=this,r;e=e||i.shift();do if(r=e.execute(e.state,e.delay))break;while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}};var fT=new Qd(Kd);var $t=new W(t=>t.complete());function Yd(t){return t&&U(t.schedule)}function _y(t){return t[t.length-1]}function Zd(t){return U(_y(t))?t.pop():void 0}function Wn(t){return Yd(_y(t))?t.pop():void 0}function pT(t,e){return typeof _y(t)=="number"?t.pop():e}function Xd(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function rX(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function gT(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(d){o(d)}}function c(u){try{l(i.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):r(u.value).then(a,c)}l((i=i.apply(t,e||[])).next())})}function mT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hs(t){return this instanceof hs?(this.v=t,this):new hs(t)}function yT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(i[h](f))}catch(p){d(s[0][3],p)}}function c(h){h.value instanceof hs?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function _T(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof mT=="function"?mT(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),r(a,c,o.done,o.value)})}}function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Lo=t=>t&&typeof t.length=="number"&&typeof t!="function";function Jd(t){return U(t?.then)}function eh(t){return U(t[Po])}function th(t){return Symbol.asyncIterator&&U(t?.[Symbol.asyncIterator])}function nh(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function vV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ih=vV();function rh(t){return U(t?.[ih])}function sh(t){return yT(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield hs(n.read());if(r)return yield hs(void 0);yield yield hs(i)}}finally{n.releaseLock()}})}function oh(t){return U(t?.getReader)}function ve(t){if(t instanceof W)return t;if(t!=null){if(eh(t))return wV(t);if(Lo(t))return EV(t);if(Jd(t))return IV(t);if(th(t))return vT(t);if(rh(t))return bV(t);if(oh(t))return DV(t)}throw nh(t)}function wV(t){return new W(e=>{let n=t[Po]();if(U(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function EV(t){return new W(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function IV(t){return new W(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ud)})}function bV(t){return new W(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function vT(t){return new W(e=>{CV(t,e).catch(n=>e.error(n))})}function DV(t){return vT(sh(t))}function CV(t,e){var n,i,r,s;return gT(this,void 0,void 0,function*(){try{for(n=_T(t);i=yield n.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}e.complete()})}function Ht(t,e,n,i=0,r=!1){let s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function ar(t,e=0){return Z((n,i)=>{n.subscribe(J(i,r=>Ht(i,t,()=>i.next(r),e),()=>Ht(i,t,()=>i.complete(),e),r=>Ht(i,t,()=>i.error(r),e)))})}function cr(t,e=0){return Z((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function wT(t,e){return ve(t).pipe(cr(e),ar(e))}function ET(t,e){return ve(t).pipe(cr(e),ar(e))}function IT(t,e){return new W(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function bT(t,e){return new W(n=>{let i;return Ht(n,e,()=>{i=t[ih](),Ht(n,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){n.error(o);return}s?n.complete():n.next(r)},0,!0)}),()=>U(i?.return)&&i.return()})}function ah(t,e){if(!t)throw new Error("Iterable cannot be null");return new W(n=>{Ht(n,e,()=>{let i=t[Symbol.asyncIterator]();Ht(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function DT(t,e){return ah(sh(t),e)}function CT(t,e){if(t!=null){if(eh(t))return wT(t,e);if(Lo(t))return IT(t,e);if(Jd(t))return ET(t,e);if(th(t))return ah(t,e);if(rh(t))return bT(t,e);if(oh(t))return DT(t,e)}throw nh(t)}function Pe(t,e){return e?CT(t,e):ve(t)}function H(...t){let e=Wn(t);return Pe(t,e)}function Vo(t,e){let n=U(t)?t:()=>t,i=r=>r.error(n());return new W(e?r=>e.schedule(i,0,r):i)}function ch(t){return!!t&&(t instanceof W||U(t.lift)&&U(t.subscribe))}var Oi=xo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function TT(t){return t instanceof Date&&!isNaN(t)}function ee(t,e){return Z((n,i)=>{let r=0;n.subscribe(J(i,s=>{i.next(t.call(e,s,r++))}))})}var{isArray:TV}=Array;function SV(t,e){return TV(e)?t(...e):t(e)}function jo(t){return ee(e=>SV(t,e))}var{isArray:AV}=Array,{getPrototypeOf:RV,prototype:xV,keys:MV}=Object;function lh(t){if(t.length===1){let e=t[0];if(AV(e))return{args:e,keys:null};if(NV(e)){let n=MV(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function NV(t){return t&&typeof t=="object"&&RV(t)===xV}function uh(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function fs(...t){let e=Wn(t),n=Zd(t),{args:i,keys:r}=lh(t);if(i.length===0)return Pe([],e);let s=new W(PV(i,e,r?o=>uh(r,o):Nt));return n?s.pipe(jo(n)):s}function PV(t,e,n=Nt){return i=>{ST(e,()=>{let{length:r}=t,s=new Array(r),o=r,a=r;for(let c=0;c<r;c++)ST(e,()=>{let l=Pe(t[c],e),u=!1;l.subscribe(J(i,d=>{s[c]=d,u||(u=!0,a--),a||i.next(n(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function ST(t,e,n){t?Ht(n,t,e):e()}function AT(t,e,n,i,r,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=g=>l<i?p(g):c.push(g),p=g=>{s&&e.next(g),l++;let v=!1;ve(n(g,u++)).subscribe(J(e,E=>{r?.(E),s?f(E):e.next(E)},()=>{v=!0},void 0,()=>{if(v)try{for(l--;c.length&&l<i;){let E=c.shift();o?Ht(e,o,()=>p(E)):p(E)}h()}catch(E){e.error(E)}}))};return t.subscribe(J(e,f,()=>{d=!0,h()})),()=>{a?.()}}function ke(t,e,n=1/0){return U(e)?ke((i,r)=>ee((s,o)=>e(i,s,r,o))(ve(t(i,r))),n):(typeof e=="number"&&(n=e),Z((i,r)=>AT(i,r,t,n)))}function lr(t=1/0){return ke(Nt,t)}function RT(){return lr(1)}function Kn(...t){return RT()(Pe(t,Wn(t)))}function ur(t){return new W(e=>{ve(t()).subscribe(e)})}function vy(...t){let e=Zd(t),{args:n,keys:i}=lh(t),r=new W(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;ve(n[u]).subscribe(J(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(i?uh(i,a):a),s.complete())}))}});return e?r.pipe(jo(e)):r}var OV=["addListener","removeListener"],kV=["addEventListener","removeEventListener"],FV=["on","off"];function Tc(t,e,n,i){if(U(n)&&(i=n,n=void 0),i)return Tc(t,e,n).pipe(jo(i));let[r,s]=jV(t)?kV.map(o=>a=>t[o](e,a,n)):LV(t)?OV.map(xT(t,e)):VV(t)?FV.map(xT(t,e)):[];if(!r&&Lo(t))return ke(o=>Tc(o,e,n))(ve(t));if(!r)throw new TypeError("Invalid event target");return new W(o=>{let a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function xT(t,e){return n=>i=>t[n](e,i)}function LV(t){return U(t.addListener)&&U(t.removeListener)}function VV(t){return U(t.on)&&U(t.off)}function jV(t){return U(t.addEventListener)&&U(t.removeEventListener)}function Bo(t=0,e,n=gy){let i=-1;return e!=null&&(Yd(e)?n=e:i=e),new W(r=>{let s=TT(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function BV(t=0,e=un){return t<0&&(t=0),Bo(t,t,e)}function Sc(...t){let e=Wn(t),n=pT(t,1/0),i=t;return i.length?i.length===1?ve(i[0]):lr(n)(Pe(i,e)):$t}var UV=new W(Ni);function Fe(t,e){return Z((n,i)=>{let r=0;n.subscribe(J(i,s=>t.call(e,s,r++)&&i.next(s)))})}function MT(t){return Z((e,n)=>{let i=!1,r=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;let l=r;r=null,n.next(l)}o&&n.complete()},c=()=>{s=null,o&&n.complete()};e.subscribe(J(n,l=>{i=!0,r=l,s||ve(t(l)).subscribe(s=J(n,a,c))},()=>{o=!0,(!i||!s||s.closed)&&n.complete()}))})}function dh(t,e=un){return MT(()=>Bo(t,e))}function dr(t){return Z((e,n)=>{let i=null,r=!1,s;i=e.subscribe(J(n,void 0,void 0,o=>{s=ve(t(o,dr(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(n))})}function NT(t,e,n,i,r){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(J(o,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}function ps(t,e){return U(e)?ke(t,e,1):ke(t,1)}function PT(t){return new W(e=>t.subscribe(e))}var $V={connector:()=>new q};function hh(t,e=$V){let{connector:n}=e;return Z((i,r)=>{let s=n();ve(t(PT(s))).subscribe(r),r.add(i.subscribe(s))})}function fh(t,e=un){return Z((n,i)=>{let r=null,s=null,o=null,a=()=>{if(r){r.unsubscribe(),r=null;let l=s;s=null,i.next(l)}};function c(){let l=o+t,u=e.now();if(u<l){r=this.schedule(void 0,l-u),i.add(r);return}a()}n.subscribe(J(i,l=>{s=l,o=e.now(),r||(r=e.schedule(c,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function hr(t){return Z((e,n)=>{let i=!1;e.subscribe(J(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function Be(t){return t<=0?()=>$t:Z((e,n)=>{let i=0;e.subscribe(J(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function OT(){return Z((t,e)=>{t.subscribe(J(e,Ni))})}function Ac(t){return ee(()=>t)}function wy(t,e){return e?n=>Kn(e.pipe(Be(1),OT()),n.pipe(wy(t))):ke((n,i)=>ve(t(n,i)).pipe(Be(1),Ac(n)))}function HV(t,e=un){let n=Bo(t,e);return wy(()=>n)}function Rc(t,e=Nt){return t=t??zV,Z((n,i)=>{let r,s=!0;n.subscribe(J(i,o=>{let a=e(o);(s||!t(r,a))&&(s=!1,r=a,i.next(o))}))})}function zV(t,e){return t===e}function ph(t=qV){return Z((e,n)=>{let i=!1;e.subscribe(J(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function qV(){return new Oi}function xc(t){return Z((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Qn(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Fe((r,s)=>t(r,s,i)):Nt,Be(1),n?hr(e):ph(()=>new Oi))}function Uo(t){return t<=0?()=>$t:Z((e,n)=>{let i=[];e.subscribe(J(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function Ey(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Fe((r,s)=>t(r,s,i)):Nt,Uo(1),n?hr(e):ph(()=>new Oi))}function kT(t,e){let n=U(t)?t:()=>t;return U(e)?hh(e,{connector:n}):i=>new rr(i,n)}function GV(t){return t?e=>hh(t)(e):e=>kT(new q)(e)}function mh(t,e){return Z(NT(t,e,arguments.length>=2,!0))}function FT(t={}){let{connector:e=()=>new q,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return s=>{let o,a,c,l=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=c=void 0,u=d=!1},p=()=>{let g=o;f(),g?.unsubscribe()};return Z((g,v)=>{l++,!d&&!u&&h();let E=c=c??e();v.add(()=>{l--,l===0&&!d&&!u&&(a=Iy(p,r))}),E.subscribe(v),!o&&l>0&&(o=new Pi({next:S=>E.next(S),error:S=>{d=!0,h(),a=Iy(f,n,S),E.error(S)},complete:()=>{u=!0,h(),a=Iy(f,i),E.complete()}}),ve(g).subscribe(o))})(s)}}function Iy(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new Pi({next:()=>{i.unsubscribe(),t()}});return ve(e(...n)).subscribe(i)}function LT(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,FT({connector:()=>new ds(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Mc(t){return Fe((e,n)=>t<=n)}function Mn(...t){let e=Wn(t);return Z((n,i)=>{(e?Kn(t,n,e):Kn(t,n)).subscribe(i)})}function Kt(t,e){return Z((n,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();n.subscribe(J(i,c=>{r?.unsubscribe();let l=0,u=s++;ve(t(c,u)).subscribe(r=J(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Nn(t){return Z((e,n)=>{ve(t).subscribe(J(n,()=>n.complete(),Ni)),!n.closed&&e.subscribe(n)})}function Qe(t,e,n){let i=U(t)||e||n?{next:t,error:e,complete:n}:t;return i?Z((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(J(s,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),s.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),s.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),s.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):Nt}var DS="https://g.co/ng/security#xss",T=class extends Error{constructor(e,n){super(z_(e,n)),this.code=e}};function z_(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function xe(t){for(let e in t)if(t[e]===xe)return e;throw Error("Could not find renamed property on target object.")}function WV(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function kt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(kt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Uy(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var KV=xe({__forward_ref__:xe});function si(t){return t.__forward_ref__=si,t.toString=function(){return kt(this())},t}function Pt(t){return CS(t)?t():t}function CS(t){return typeof t=="function"&&t.hasOwnProperty(KV)&&t.__forward_ref__===si}function TS(t){return t&&!!t.\u0275providers}var QV=xe({\u0275cmp:xe}),YV=xe({\u0275dir:xe}),ZV=xe({\u0275pipe:xe}),XV=xe({\u0275mod:xe}),Ah=xe({\u0275fac:xe}),Nc=xe({__NG_ELEMENT_ID__:xe}),VT=xe({__NG_ENV_ID__:xe});function qc(t){return typeof t=="string"?t:t==null?"":String(t)}function JV(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():qc(t)}function ej(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new T(-200,`Circular dependency in DI detected for ${t}${n}`)}function q_(t,e){throw new T(-201,!1)}function tj(t,e){t==null&&nj(e,t,null,"!=")}function nj(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(i==null?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}function D(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ie(t){return{providers:t.providers||[],imports:t.imports||[]}}function Qh(t){return jT(t,AS)||jT(t,RS)}function SS(t){return Qh(t)!==null}function jT(t,e){return t.hasOwnProperty(e)?t[e]:null}function ij(t){let e=t&&(t[AS]||t[RS]);return e||null}function BT(t){return t&&(t.hasOwnProperty(UT)||t.hasOwnProperty(rj))?t[UT]:null}var AS=xe({\u0275prov:xe}),UT=xe({\u0275inj:xe}),RS=xe({ngInjectableDef:xe}),rj=xe({ngInjectorDef:xe}),he=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(he||{}),$y;function xS(){return $y}function zt(t){let e=$y;return $y=t,e}function MS(t,e,n){let i=Qh(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&he.Optional)return null;if(e!==void 0)return e;q_(t,"Injector")}var Je=globalThis;var x=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=D({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var sj={},Pc=sj,Hy="__NG_DI_FLAG__",Rh="ngTempTokenPath",oj="ngTokenPath",aj=/\n/gm,cj="\u0275",$T="__source",Go;function lj(){return Go}function fr(t){let e=Go;return Go=t,e}function uj(t,e=he.Default){if(Go===void 0)throw new T(-203,!1);return Go===null?MS(t,void 0,e):Go.get(t,e&he.Optional?null:void 0,e)}function y(t,e=he.Default){return(xS()||uj)(Pt(t),e)}function C(t,e=he.Default){return y(t,Yh(e))}function Yh(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function zy(t){let e=[];for(let n=0;n<t.length;n++){let i=Pt(t[n]);if(Array.isArray(i)){if(i.length===0)throw new T(900,!1);let r,s=he.Default;for(let o=0;o<i.length;o++){let a=i[o],c=dj(a);typeof c=="number"?c===-1?r=a.token:s|=c:r=a}e.push(y(r,s))}else e.push(y(i))}return e}function NS(t,e){return t[Hy]=e,t.prototype[Hy]=e,t}function dj(t){return t[Hy]}function hj(t,e,n,i){let r=t[Rh];throw e[$T]&&r.unshift(e[$T]),t.message=fj(`
`+t.message,r,n,i),t[oj]=r,t[Rh]=null,t}function fj(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==cj?t.slice(2):t;let r=kt(e);if(Array.isArray(e))r=e.map(kt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):kt(a)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(aj,`
  `)}`}function Gc(t){return{toString:t}.toString()}var PS=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(PS||{}),Jn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Jn||{}),Ko={},Ot=[],fe=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(fe||{});function OS(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}n=r+1}}function qy(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let s=n[i++],o=n[i++],a=n[i++];t.setAttribute(e,o,a,s)}else{let s=r,o=n[++i];pj(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),i++}}return i}function kS(t){return t===3||t===4||t===6}function pj(t){return t.charCodeAt(0)===64}function Oc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?HT(t,n,r,null,e[++i]):HT(t,n,r,null,null))}}return t}function HT(t,e,n,i,r){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(t[s+1]=r);return}else if(i===t[s+1]){t[s+2]=r;return}}s++,i!==null&&s++,r!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),i!==null&&t.splice(s++,0,i),r!==null&&t.splice(s++,0,r)}var FS="ng-template";function mj(t,e,n){let i=0,r=!0;for(;i<t.length;){let s=t[i++];if(typeof s=="string"&&r){let o=t[i++];if(n&&s==="class"&&OS(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;i<t.length&&typeof(s=t[i++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(r=!1)}return!1}function LS(t){return t.type===4&&t.value!==FS}function gj(t,e,n){let i=t.type===4&&!n?FS:t.value;return e===i}function yj(t,e,n){let i=4,r=t.attrs||[],s=wj(r),o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Pn(i)&&!Pn(c))return!1;if(o&&Pn(c))continue;o=!1,i=c|i&1;continue}if(!o)if(i&4){if(i=2|i&1,c!==""&&!gj(t,c,n)||c===""&&e.length===1){if(Pn(i))return!1;o=!0}}else{let l=i&8?c:e[++a];if(i&8&&t.attrs!==null){if(!mj(t.attrs,l,n)){if(Pn(i))return!1;o=!0}continue}let u=i&8?"class":c,d=_j(u,r,LS(t),n);if(d===-1){if(Pn(i))return!1;o=!0;continue}if(l!==""){let h;d>s?h="":h=r[d+1].toLowerCase();let f=i&8?h:null;if(f&&OS(f,l,0)!==-1||i&2&&l!==h){if(Pn(i))return!1;o=!0}}}}return Pn(i)||o}function Pn(t){return(t&1)===0}function _j(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let s=!1;for(;r<e.length;){let o=e[r];if(o===t)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return Ej(e,t)}function VS(t,e,n=!1){for(let i=0;i<e.length;i++)if(yj(t,e[i],n))return!0;return!1}function vj(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function wj(t){for(let e=0;e<t.length;e++){let n=t[e];if(kS(n))return e}return t.length}function Ej(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function Ij(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function zT(t,e){return t?":not("+e.trim()+")":e}function bj(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(i&2){let a=t[++n];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!Pn(o)&&(e+=zT(s,r),r=""),i=o,s=s||!Pn(i);n++}return r!==""&&(e+=zT(s,r)),e}function Dj(t){return t.map(bj).join(",")}function Cj(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let s=t[i];if(typeof s=="string")r===2?s!==""&&e.push(s,t[++i]):r===8&&n.push(s);else{if(!Pn(r))break;r=s}i++}return{attrs:e,classes:n}}function oi(t){return Gc(()=>{let e=zS(t),n=ge(I({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===PS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Jn.Emulated,styles:t.styles||Ot,_:null,schemas:t.schemas||null,tView:null,id:""});qS(n);let i=t.dependencies;return n.directiveDefs=GT(i,!1),n.pipeDefs=GT(i,!0),n.id=Aj(n),n})}function Tj(t){return gr(t)||BS(t)}function Sj(t){return t!==null}function re(t){return Gc(()=>({type:t.type,bootstrap:t.bootstrap||Ot,declarations:t.declarations||Ot,imports:t.imports||Ot,exports:t.exports||Ot,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function qT(t,e){if(t==null)return Ko;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],s,o,a=fe.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(n[s]=a!==fe.None?[i,a]:i,e[s]=o):n[s]=i}return n}function Ie(t){return Gc(()=>{let e=zS(t);return qS(e),e})}function jS(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function gr(t){return t[QV]||null}function BS(t){return t[YV]||null}function US(t){return t[ZV]||null}function $S(t){let e=gr(t)||BS(t)||US(t);return e!==null?e.standalone:!1}function HS(t,e){let n=t[XV]||null;if(!n&&e===!0)throw new Error(`Type ${kt(t)} does not have '\u0275mod' property.`);return n}function zS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ko,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ot,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:qT(t.inputs,e),outputs:qT(t.outputs),debugInfo:null}}function qS(t){t.features?.forEach(e=>e(t))}function GT(t,e){if(!t)return null;let n=e?US:Tj;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(Sj)}function Aj(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var ai=0,Q=1,te=2,mt=3,kn=4,Xt=5,Qo=6,kc=7,ct=8,Yo=9,ei=10,$e=11,Fc=12,WT=13,ia=14,hn=15,Wc=16,$o=17,Xn=18,Kc=19,GS=20,pr=21,by=22,ys=23,nt=25,G_=1;var _s=7,xh=8,Zo=9,bt=10,W_=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(W_||{});function mr(t){return Array.isArray(t)&&typeof t[G_]=="object"}function Fi(t){return Array.isArray(t)&&t[G_]===!0}function K_(t){return(t.flags&4)!==0}function Zh(t){return t.componentOffset>-1}function Xh(t){return(t.flags&1)===1}function ki(t){return!!t.template}function Rj(t){return(t[te]&512)!==0}function vs(t,e){let n=t.hasOwnProperty(Ah);return n?t[Ah]:null}var Gy=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function WS(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function Ft(){return KS}function KS(t){return t.type.prototype.ngOnChanges&&(t.setInput=Mj),xj}Ft.ngInherit=!0;function xj(){let t=YS(this),e=t?.current;if(e){let n=t.previous;if(n===Ko)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function Mj(t,e,n,i,r){let s=this.declaredInputs[i],o=YS(t)||Nj(t,{previous:Ko,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Gy(l&&l.currentValue,n,c===Ko),WS(t,e,r,n)}var QS="__ngSimpleChanges__";function YS(t){return t[QS]||null}function Nj(t,e){return t[QS]=e}var KT=null;var Yn=function(t,e,n){KT?.(t,e,n)},ZS="svg",Pj="math",Oj=!1;function kj(){return Oj}function Qt(t){for(;Array.isArray(t);)t=t[ai];return t}function Fj(t){for(;Array.isArray(t);){if(typeof t[G_]=="object")return t;t=t[ai]}return null}function XS(t,e){return Qt(e[t])}function fn(t,e){return Qt(e[t.index])}function Q_(t,e){return t.data[e]}function JS(t,e){return t[e]}function ti(t,e){let n=e[t];return mr(n)?n:n[ai]}function Lj(t){return(t[te]&4)===4}function Y_(t){return(t[te]&128)===128}function Vj(t){return Fi(t[mt])}function Xo(t,e){return e==null?null:t[e]}function eA(t){t[$o]=0}function jj(t){t[te]&1024||(t[te]|=1024,Y_(t)&&Lc(t))}function Bj(t,e){for(;t>0;)e=e[ia],t--;return e}function tA(t){return t[te]&9216||t[ys]?.dirty}function Wy(t){tA(t)?Lc(t):t[te]&64&&(kj()?(t[te]|=1024,Lc(t)):t[ei].changeDetectionScheduler?.notify())}function Lc(t){t[ei].changeDetectionScheduler?.notify();let e=Vc(t);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!Y_(e)));)e=Vc(e)}function nA(t,e){if((t[te]&256)===256)throw new T(911,!1);t[pr]===null&&(t[pr]=[]),t[pr].push(e)}function Uj(t,e){if(t[pr]===null)return;let n=t[pr].indexOf(e);n!==-1&&t[pr].splice(n,1)}function Vc(t){let e=t[mt];return Fi(e)?e[mt]:e}var ce={lFrame:dA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function $j(){return ce.lFrame.elementDepthCount}function Hj(){ce.lFrame.elementDepthCount++}function zj(){ce.lFrame.elementDepthCount--}function iA(){return ce.bindingsEnabled}function rA(){return ce.skipHydrationRootTNode!==null}function qj(t){return ce.skipHydrationRootTNode===t}function Gj(){ce.skipHydrationRootTNode=null}function ue(){return ce.lFrame.lView}function He(){return ce.lFrame.tView}function Z_(t){return ce.lFrame.contextLView=t,t[ct]}function X_(t){return ce.lFrame.contextLView=null,t}function Dt(){let t=sA();for(;t!==null&&t.type===64;)t=t.parent;return t}function sA(){return ce.lFrame.currentTNode}function Wj(){let t=ce.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ts(t,e){let n=ce.lFrame;n.currentTNode=t,n.isParent=e}function J_(){return ce.lFrame.isParent}function ev(){ce.lFrame.isParent=!1}function Kj(){return ce.lFrame.contextLView}function oA(){let t=ce.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Qj(t){return ce.lFrame.bindingIndex=t}function Ss(){return ce.lFrame.bindingIndex++}function aA(t){let e=ce.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Yj(){return ce.lFrame.inI18n}function Zj(t,e){let n=ce.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ky(e)}function Xj(){return ce.lFrame.currentDirectiveIndex}function Ky(t){ce.lFrame.currentDirectiveIndex=t}function tv(t){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function cA(){return ce.lFrame.currentQueryIndex}function nv(t){ce.lFrame.currentQueryIndex=t}function Jj(t){let e=t[Q];return e.type===2?e.declTNode:e.type===1?t[Xt]:null}function lA(t,e,n){if(n&he.SkipSelf){let r=e,s=t;for(;r=r.parent,r===null&&!(n&he.Host);)if(r=Jj(s),r===null||(s=s[ia],r.type&10))break;if(r===null)return!1;e=r,t=s}let i=ce.lFrame=uA();return i.currentTNode=e,i.lView=t,!0}function iv(t){let e=uA(),n=t[Q];ce.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function uA(){let t=ce.lFrame,e=t===null?null:t.child;return e===null?dA(t):e}function dA(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function hA(){let t=ce.lFrame;return ce.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var fA=hA;function rv(){let t=hA();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function eB(t){return(ce.lFrame.contextLView=Bj(t,ce.lFrame.contextLView))[ct]}function _r(){return ce.lFrame.selectedIndex}function ws(t){ce.lFrame.selectedIndex=t}function Jh(){let t=ce.lFrame;return Q_(t.tView,t.selectedIndex)}function pA(){ce.lFrame.currentNamespace=ZS}function mA(){tB()}function tB(){ce.lFrame.currentNamespace=null}function nB(){return ce.lFrame.currentNamespace}var gA=!0;function ef(){return gA}function tf(t){gA=t}function iB(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=KS(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}r&&(n.preOrderHooks??=[]).push(0-t,r),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function nf(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Ih(t,e,n){yA(t,e,3,n)}function bh(t,e,n,i){(t[te]&3)===n&&yA(t,e,n,i)}function Dy(t,e){let n=t[te];(n&3)===e&&(n&=16383,n+=1,t[te]=n)}function yA(t,e,n,i){let r=i!==void 0?t[$o]&65535:0,s=i??-1,o=e.length-1,a=0;for(let c=r;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(t[$o]+=65536),(a<s||s==-1)&&(rB(t,n,e,c),t[$o]=(t[$o]&4294901760)+c+2),c++}function QT(t,e){Yn(4,t,e);let n=pt(null);try{e.call(t)}finally{pt(n),Yn(5,t,e)}}function rB(t,e,n,i){let r=n[i]<0,s=n[i+1],o=r?-n[i]:n[i],a=t[o];r?t[te]>>14<t[$o]>>16&&(t[te]&3)===e&&(t[te]+=16384,QT(a,s)):QT(a,s)}var Wo=-1,Es=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function sB(t){return t instanceof Es}function oB(t){return(t.flags&8)!==0}function aB(t){return(t.flags&16)!==0}function _A(t){return t!==Wo}function Mh(t){return t&32767}function cB(t){return t>>16}function Nh(t,e){let n=cB(t),i=e;for(;n>0;)i=i[ia],n--;return i}var Qy=!0;function Ph(t){let e=Qy;return Qy=t,e}var lB=256,vA=lB-1,wA=5,uB=0,Zn={};function dB(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Nc)&&(i=n[Nc]),i==null&&(i=n[Nc]=uB++);let r=i&vA,s=1<<r;e.data[t+(r>>wA)]|=s}function Oh(t,e){let n=EA(t,e);if(n!==-1)return n;let i=e[Q];i.firstCreatePass&&(t.injectorIndex=e.length,Cy(i.data,t),Cy(e,null),Cy(i.blueprint,null));let r=sv(t,e),s=t.injectorIndex;if(_A(r)){let o=Mh(r),a=Nh(r,e),c=a[Q].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function Cy(t,e){t.push(0,0,0,0,0,0,0,0,e)}function EA(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function sv(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=TA(r),i===null)return Wo;if(n++,r=r[ia],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return Wo}function Yy(t,e,n){dB(t,e,n)}function hB(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let i=n.length,r=0;for(;r<i;){let s=n[r];if(kS(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<i&&typeof n[r]=="string";)r++;else{if(s===e)return n[r+1];r=r+2}}}return null}function IA(t,e,n){if(n&he.Optional||t!==void 0)return t;q_(e,"NodeInjector")}function bA(t,e,n,i){if(n&he.Optional&&i===void 0&&(i=null),!(n&(he.Self|he.Host))){let r=t[Yo],s=zt(void 0);try{return r?r.get(e,i,n&he.Optional):MS(e,i,n&he.Optional)}finally{zt(s)}}return IA(i,e,n)}function DA(t,e,n,i=he.Default,r){if(t!==null){if(e[te]&2048&&!(i&he.Self)){let o=gB(t,e,n,i,Zn);if(o!==Zn)return o}let s=CA(t,e,n,i,Zn);if(s!==Zn)return s}return bA(e,n,i,r)}function CA(t,e,n,i,r){let s=pB(n);if(typeof s=="function"){if(!lA(e,t,i))return i&he.Host?IA(r,n,i):bA(e,n,i,r);try{let o;if(o=s(i),o==null&&!(i&he.Optional))q_(n);else return o}finally{fA()}}else if(typeof s=="number"){let o=null,a=EA(t,e),c=Wo,l=i&he.Host?e[hn][Xt]:null;for((a===-1||i&he.SkipSelf)&&(c=a===-1?sv(t,e):e[a+8],c===Wo||!ZT(i,!1)?a=-1:(o=e[Q],a=Mh(c),e=Nh(c,e)));a!==-1;){let u=e[Q];if(YT(s,a,u.data)){let d=fB(a,e,n,o,i,l);if(d!==Zn)return d}c=e[a+8],c!==Wo&&ZT(i,e[Q].data[a+8]===l)&&YT(s,a,e)?(o=u,a=Mh(c),e=Nh(c,e)):a=-1}}return r}function fB(t,e,n,i,r,s){let o=e[Q],a=o.data[t+8],c=i==null?Zh(a)&&Qy:i!=o&&(a.type&3)!==0,l=r&he.Host&&s===a,u=Dh(a,o,n,c,l);return u!==null?Is(e,o,u,a):Zn}function Dh(t,e,n,i,r){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:l;for(let f=d;f<h;f++){let p=o[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(r){let f=o[c];if(f&&ki(f)&&f.type===n)return c}return null}function Is(t,e,n,i){let r=t[n],s=e.data;if(sB(r)){let o=r;o.resolving&&ej(JV(s[n]));let a=Ph(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?zt(o.injectImpl):null,u=lA(t,i,he.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&iB(n,s[n],e)}finally{l!==null&&zt(l),Ph(a),o.resolving=!1,fA()}}return r}function pB(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Nc)?t[Nc]:void 0;return typeof e=="number"?e>=0?e&vA:mB:e}function YT(t,e,n){let i=1<<t;return!!(n[e+(t>>wA)]&i)}function ZT(t,e){return!(t&he.Self)&&!(t&he.Host&&e)}var gs=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return DA(this._tNode,this._lView,e,Yh(i),n)}};function mB(){return new gs(Dt(),ue())}function vr(t){return Gc(()=>{let e=t.prototype.constructor,n=e[Ah]||Zy(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let s=r[Ah]||Zy(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Zy(t){return CS(t)?()=>{let e=Zy(Pt(t));return e&&e()}:vs(t)}function gB(t,e,n,i,r){let s=t,o=e;for(;s!==null&&o!==null&&o[te]&2048&&!(o[te]&512);){let a=CA(s,o,n,i|he.Self,Zn);if(a!==Zn)return a;let c=s.parent;if(!c){let l=o[GS];if(l){let u=l.get(n,Zn,i);if(u!==Zn)return u}c=TA(o),o=o[ia]}s=c}return r}function TA(t){let e=t[Q],n=e.type;return n===2?e.declTNode:n===1?t[Xt]:null}function ov(t){return hB(Dt(),t)}var gh="__parameters__";function yB(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function SA(t,e,n){return Gc(()=>{let i=yB(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(gh)?c[gh]:Object.defineProperty(c,gh,{value:[]})[gh];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function _B(t){return typeof t=="function"}function vB(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}function wB(t){return t.flat(Number.POSITIVE_INFINITY)}function av(t,e){t.forEach(n=>Array.isArray(n)?av(n,e):e(n))}function AA(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function kh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function EB(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function IB(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let s=r-2;t[r]=t[s],r--}t[e]=n,t[e+1]=i}}function cv(t,e,n){let i=Qc(t,e);return i>=0?t[i|1]=n:(i=~i,IB(t,i,e,n)),i}function Ty(t,e){let n=Qc(t,e);if(n>=0)return t[n|1]}function Qc(t,e){return bB(t,e,1)}function bB(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let s=i+(r-i>>1),o=t[s<<n];if(e===o)return s<<n;o>e?r=s:i=s+1}return~(r<<n)}var gt=NS(SA("Optional"),8);var lv=NS(SA("SkipSelf"),4);var Jo=new x("ENVIRONMENT_INITIALIZER"),RA=new x("INJECTOR",-1),xA=new x("INJECTOR_DEF_TYPES"),Fh=class{get(e,n=Pc){if(n===Pc){let i=new Error(`NullInjectorError: No provider for ${kt(e)}!`);throw i.name="NullInjectorError",i}return n}};function rf(t){return{\u0275providers:t}}function DB(...t){return{\u0275providers:MA(!0,t),\u0275fromNgModule:!0}}function MA(t,...e){let n=[],i=new Set,r,s=o=>{n.push(o)};return av(e,o=>{let a=o;Xy(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&NA(r,s),n}function NA(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];uv(r,s=>{e(s,i)})}}function Xy(t,e,n,i){if(t=Pt(t),!t)return!1;let r=null,s=BT(t),o=!s&&gr(t);if(!s&&!o){let c=t.ngModule;if(s=BT(c),s)r=c;else return!1}else{if(o&&!o.standalone)return!1;r=t}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Xy(l,e,n,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let l;try{av(s.imports,u=>{Xy(u,e,n,i)&&(l||=[],l.push(u))})}finally{}l!==void 0&&NA(l,e)}if(!a){let l=vs(r)||(()=>new r);e({provide:r,useFactory:l,deps:Ot},r),e({provide:xA,useValue:r,multi:!0},r),e({provide:Jo,useValue:()=>y(r),multi:!0},r)}let c=s.providers;if(c!=null&&!a){let l=t;uv(c,u=>{e(u,l)})}}else return!1;return r!==t&&t.providers!==void 0}function uv(t,e){for(let n of t)TS(n)&&(n=n.\u0275providers),Array.isArray(n)?uv(n,e):e(n)}var CB=xe({provide:String,useValue:xe});function PA(t){return t!==null&&typeof t=="object"&&CB in t}function TB(t){return!!(t&&t.useExisting)}function SB(t){return!!(t&&t.useFactory)}function ea(t){return typeof t=="function"}function AB(t){return!!t.useClass}var sf=new x("Set Injector scope."),Ch={},RB={},Sy;function dv(){return Sy===void 0&&(Sy=new Fh),Sy}var Yt=class{},jc=class extends Yt{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,e_(e,o=>this.processProvider(o)),this.records.set(RA,Ho(void 0,this)),r.has("environment")&&this.records.set(Yt,Ho(void 0,this));let s=this.records.get(sf);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(xA,Ot,he.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=fr(this),i=zt(void 0),r;try{return e()}finally{fr(n),zt(i)}}get(e,n=Pc,i=he.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(VT))return e[VT](this);i=Yh(i);let r,s=fr(this),o=zt(void 0);try{if(!(i&he.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=OB(e)&&Qh(e);l&&this.injectableDefInScope(l)?c=Ho(Jy(e),Ch):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=i&he.Self?dv():this.parent;return n=i&he.Optional&&n===Pc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Rh]=a[Rh]||[]).unshift(kt(e)),s)throw a;return hj(a,e,"R3InjectorError",this.source)}else throw a}finally{zt(o),fr(s)}}resolveInjectorInitializers(){let e=fr(this),n=zt(void 0),i;try{let r=this.get(Jo,Ot,he.Self);for(let s of r)s()}finally{fr(e),zt(n)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(kt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new T(205,!1)}processProvider(e){e=Pt(e);let n=ea(e)?e:Pt(e&&e.provide),i=MB(e);if(!ea(e)&&e.multi===!0){let r=this.records.get(n);r||(r=Ho(void 0,Ch,!0),r.factory=()=>zy(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){return n.value===Ch&&(n.value=RB,n.value=n.factory()),typeof n.value=="object"&&n.value&&PB(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Pt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Jy(t){let e=Qh(t),n=e!==null?e.factory:vs(t);if(n!==null)return n;if(t instanceof x)throw new T(204,!1);if(t instanceof Function)return xB(t);throw new T(204,!1)}function xB(t){if(t.length>0)throw new T(204,!1);let n=ij(t);return n!==null?()=>n.factory(t):()=>new t}function MB(t){if(PA(t))return Ho(void 0,t.useValue);{let e=OA(t);return Ho(e,Ch)}}function OA(t,e,n){let i;if(ea(t)){let r=Pt(t);return vs(r)||Jy(r)}else if(PA(t))i=()=>Pt(t.useValue);else if(SB(t))i=()=>t.useFactory(...zy(t.deps||[]));else if(TB(t))i=()=>y(Pt(t.useExisting));else{let r=Pt(t&&(t.useClass||t.provide));if(NB(t))i=()=>new r(...zy(t.deps));else return vs(r)||Jy(r)}return i}function Ho(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function NB(t){return!!t.deps}function PB(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function OB(t){return typeof t=="function"||typeof t=="object"&&t instanceof x}function e_(t,e){for(let n of t)Array.isArray(n)?e_(n,e):n&&TS(n)?e_(n.\u0275providers,e):e(n)}function wr(t,e){t instanceof jc&&t.assertNotDestroyed();let n,i=fr(t),r=zt(void 0);try{return e()}finally{fr(i),zt(r)}}function kB(t){if(!xS()&&!lj())throw new T(-203,!1)}function XT(t,e=null,n=null,i){let r=kA(t,e,n,i);return r.resolveInjectorInitializers(),r}function kA(t,e=null,n=null,i,r=new Set){let s=[n||Ot,DB(t)];return i=i||(typeof t=="object"?void 0:kt(t)),new jc(s,e||dv(),i||null,r)}var Me=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return XT({name:""},r,i,"");{let s=i.name??"";return XT({name:s},i.parent,i.providers,s)}}};e.THROW_IF_NOT_FOUND=Pc,e.NULL=new Fh,e.\u0275prov=D({token:e,providedIn:"any",factory:()=>y(RA)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var t_;function FA(t){t_=t}function LA(){if(t_!==void 0)return t_;if(typeof document<"u")return document;throw new T(210,!1)}var Yc=new x("AppId",{providedIn:"root",factory:()=>FB}),FB="ng",hv=new x("Platform Initializer"),pn=new x("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var qt=new x("AnimationModuleType"),Zc=new x("CSP nonce",{providedIn:"root",factory:()=>LA().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function VA(t){return t instanceof Function?t():t}function LB(t){return(t??C(Me)).get(pn)==="browser"}function jA(t){return(t.flags&128)===128}var ni=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ni||{}),VB=/^>|^->|<!--|-->|--!>|<!-$/g,jB=/(<|>)/g,BB="\u200B$1\u200B";function UB(t){return t.replace(VB,e=>e.replace(jB,BB))}var fv=new Map,$B=0;function HB(){return $B++}function zB(t){fv.set(t[Kc],t)}function BA(t){return fv.get(t)||null}function qB(t){fv.delete(t[Kc])}var n_=class{get lView(){return BA(this.lViewId)}constructor(e,n,i){this.lViewId=e,this.nodeIndex=n,this.native=i}};function Are(t){let e=Ay(t);if(e){if(mr(e)){let n=e,i,r,s;if(UA(t)){if(i=KB(n,t),i==-1)throw new Error("The provided component was not found in the application");r=t}else if(GB(t)){if(i=QB(n,t),i==-1)throw new Error("The provided directive was not found in the application");s=YB(i,n)}else if(i=eS(n,t),i==-1)return null;let o=Qt(n[i]),a=Ay(o),c=a&&!Array.isArray(a)?a:JT(n,i,o);if(r&&c.component===void 0&&(c.component=r,dn(c.component,c)),s&&c.directives===void 0){c.directives=s;for(let l=0;l<s.length;l++)dn(s[l],c)}dn(c.native,c),e=c}}else{let n=t,i=n;for(;i=i.parentNode;){let r=Ay(i);if(r){let s=Array.isArray(r)?r:r.lView;if(!s)return null;let o=eS(s,n);if(o>=0){let a=Qt(s[o]),c=JT(s,o,a);dn(a,c),e=c;break}}}}return e||null}function JT(t,e,n){return new n_(t[Kc],e,n)}var i_="__ngContext__";function dn(t,e){mr(e)?(t[i_]=e[Kc],zB(e)):t[i_]=e}function Ay(t){let e=t[i_];return typeof e=="number"?BA(e):e||null}function UA(t){return t&&t.constructor&&t.constructor.\u0275cmp}function GB(t){return t&&t.constructor&&t.constructor.\u0275dir}function eS(t,e){let n=t[Q];for(let i=nt;i<n.bindingStartIndex;i++)if(Qt(t[i])===e)return i;return-1}function WB(t){if(t.child)return t.child;if(t.next)return t.next;for(;t.parent&&!t.parent.next;)t=t.parent;return t.parent&&t.parent.next}function KB(t,e){let n=t[Q].components;if(n)for(let i=0;i<n.length;i++){let r=n[i];if(ti(r,t)[ct]===e)return r}else if(ti(nt,t)[ct]===e)return nt;return-1}function QB(t,e){let n=t[Q].firstChild;for(;n;){let i=n.directiveStart,r=n.directiveEnd;for(let s=i;s<r;s++)if(t[s]===e)return n.index;n=WB(n)}return-1}function YB(t,e){let n=e[Q].data[t];if(n.directiveStart===0)return Ot;let i=[];for(let r=n.directiveStart;r<n.directiveEnd;r++){let s=e[r];UA(s)||i.push(s)}return i}var ZB;function pv(t,e){return ZB(t,e)}function zo(t,e,n,i,r){if(i!=null){let s,o=!1;Fi(i)?s=i:mr(i)&&(o=!0,i=i[ai]);let a=Qt(i);t===0&&n!==null?r==null?GA(e,n,a):Lh(e,n,a,r||null,!0):t===1&&n!==null?Lh(e,n,a,r||null,!0):t===2?fU(e,a,o):t===3&&e.destroyNode(a),s!=null&&mU(e,t,s,n,r)}}function XB(t,e){return t.createText(e)}function JB(t,e,n){t.setValue(e,n)}function eU(t,e){return t.createComment(UB(e))}function $A(t,e,n){return t.createElement(e,n)}function tU(t,e){HA(t,e),e[ai]=null,e[Xt]=null}function nU(t,e,n,i,r,s){i[ai]=r,i[Xt]=e,cf(t,i,n,1,r,s)}function HA(t,e){e[ei].changeDetectionScheduler?.notify(),cf(t,e,e[$e],2,null,null)}function iU(t){let e=t[Fc];if(!e)return Ry(t[Q],t);for(;e;){let n=null;if(mr(e))n=e[Fc];else{let i=e[bt];i&&(n=i)}if(!n){for(;e&&!e[kn]&&e!==t;)mr(e)&&Ry(e[Q],e),e=e[mt];e===null&&(e=t),mr(e)&&Ry(e[Q],e),n=e&&e[kn]}e=n}}function rU(t,e,n,i){let r=bt+i,s=n.length;i>0&&(n[r-1][kn]=e),i<s-bt?(e[kn]=n[r],AA(n,bt+i,e)):(n.push(e),e[kn]=null),e[mt]=n;let o=e[Wc];o!==null&&n!==o&&sU(o,e);let a=e[Xn];a!==null&&a.insertView(t),Wy(e),e[te]|=128}function sU(t,e){let n=t[Zo],r=e[mt][mt][hn];e[hn]!==r&&(t[te]|=W_.HasTransplantedViews),n===null?t[Zo]=[e]:n.push(e)}function zA(t,e){let n=t[Zo],i=n.indexOf(e);n.splice(i,1)}function Bc(t,e){if(t.length<=bt)return;let n=bt+e,i=t[n];if(i){let r=i[Wc];r!==null&&r!==t&&zA(r,i),e>0&&(t[n-1][kn]=i[kn]);let s=kh(t,bt+e);tU(i[Q],i);let o=s[Xn];o!==null&&o.detachView(s[Q]),i[mt]=null,i[kn]=null,i[te]&=-129}return i}function of(t,e){if(!(e[te]&256)){let n=e[$e];n.destroyNode&&cf(t,e,n,3,null,null),iU(e)}}function Ry(t,e){if(!(e[te]&256)){e[te]&=-129,e[te]|=256,e[ys]&&ZC(e[ys]),aU(t,e),oU(t,e),e[Q].type===1&&e[$e].destroy();let n=e[Wc];if(n!==null&&Fi(e[mt])){n!==e[mt]&&zA(n,e);let i=e[Xn];i!==null&&i.detachView(t)}qB(e)}}function oU(t,e){let n=t.cleanup,i=e[kc];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else{let o=i[n[s+1]];n[s].call(o)}i!==null&&(e[kc]=null);let r=e[pr];if(r!==null){e[pr]=null;for(let s=0;s<r.length;s++){let o=r[s];o()}}}function aU(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof Es)){let s=n[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],c=s[o+1];Yn(4,a,c);try{c.call(a)}finally{Yn(5,a,c)}}else{Yn(4,r,s);try{s.call(r)}finally{Yn(5,r,s)}}}}}function qA(t,e,n){return cU(t,e.parent,n)}function cU(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[ai];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:s}=t.data[i.directiveStart+r];if(s===Jn.None||s===Jn.Emulated)return null}return fn(i,n)}}function Lh(t,e,n,i,r){t.insertBefore(e,n,i,r)}function GA(t,e,n){t.appendChild(e,n)}function tS(t,e,n,i,r){i!==null?Lh(t,e,n,i,r):GA(t,e,n)}function lU(t,e,n,i){t.removeChild(e,n,i)}function mv(t,e){return t.parentNode(e)}function uU(t,e){return t.nextSibling(e)}function WA(t,e,n){return hU(t,e,n)}function dU(t,e,n){return t.type&40?fn(t,n):null}var hU=dU,nS;function af(t,e,n,i){let r=qA(t,i,e),s=e[$e],o=i.parent||e[Xt],a=WA(o,i,e);if(r!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)tS(s,r,n[c],a,!1);else tS(s,r,n,a,!1);nS!==void 0&&nS(s,i,e,n,r)}function Th(t,e){if(e!==null){let n=e.type;if(n&3)return fn(e,t);if(n&4)return r_(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return Th(t,i);{let r=t[e.index];return Fi(r)?r_(-1,r):Qt(r)}}else{if(n&32)return pv(e,t)()||Qt(t[e.index]);{let i=KA(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Vc(t[hn]);return Th(r,i)}else return Th(t,e.next)}}}return null}function KA(t,e){if(e!==null){let i=t[hn][Xt],r=e.projection;return i.projection[r]}return null}function r_(t,e){let n=bt+t+1;if(n<e.length){let i=e[n],r=i[Q].firstChild;if(r!==null)return Th(i,r)}return e[_s]}function fU(t,e,n){let i=mv(t,e);i&&lU(t,i,e,n)}function gv(t,e,n,i,r,s,o){for(;n!=null;){let a=i[n.index],c=n.type;if(o&&e===0&&(a&&dn(Qt(a),i),n.flags|=2),(n.flags&32)!==32)if(c&8)gv(t,e,n.child,i,r,s,!1),zo(e,t,r,a,s);else if(c&32){let l=pv(n,i),u;for(;u=l();)zo(e,t,r,u,s);zo(e,t,r,a,s)}else c&16?QA(t,e,i,n,r,s):zo(e,t,r,a,s);n=o?n.projectionNext:n.next}}function cf(t,e,n,i,r,s){gv(n,i,t.firstChild,e,r,s,!1)}function pU(t,e,n){let i=e[$e],r=qA(t,n,e),s=n.parent||e[Xt],o=WA(s,n,e);QA(i,0,e,n,r,o)}function QA(t,e,n,i,r,s){let o=n[hn],c=o[Xt].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];zo(e,t,r,u,s)}else{let l=c,u=o[mt];jA(i)&&(l.flags|=128),gv(t,e,l,u,r,s,!0)}}function mU(t,e,n,i,r){let s=n[_s],o=Qt(n);s!==o&&zo(e,t,i,s,r);for(let a=bt;a<n.length;a++){let c=n[a];cf(c[Q],c,t,e,i,s)}}function gU(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let s=i.indexOf("-")===-1?void 0:ni.DashCase;r==null?t.removeStyle(n,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=ni.Important),t.setStyle(n,i,r,s))}}function yU(t,e,n){t.setAttribute(e,"style",n)}function YA(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ZA(t,e,n){let{mergedAttrs:i,classes:r,styles:s}=n;i!==null&&qy(t,e,i),r!==null&&YA(t,e,r),s!==null&&yU(t,e,s)}var yh;function _U(){if(yh===void 0&&(yh=null,Je.trustedTypes))try{yh=Je.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return yh}function lf(t){return _U()?.createHTML(t)||t}var _h;function XA(){if(_h===void 0&&(_h=null,Je.trustedTypes))try{_h=Je.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return _h}function iS(t){return XA()?.createHTML(t)||t}function rS(t){return XA()?.createScriptURL(t)||t}var Vh=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${DS})`}};function As(t){return t instanceof Vh?t.changingThisBreaksApplicationSecurity:t}function uf(t,e){let n=vU(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${DS})`)}return n===e}function vU(t){return t instanceof Vh&&t.getTypeName()||null}function wU(t){let e=new o_(t);return EU()?new s_(e):e}var s_=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(lf(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},o_=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=lf(e),n}};function EU(){try{return!!new window.DOMParser().parseFromString(lf(""),"text/html")}catch{return!1}}var IU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yv(t){return t=String(t),t.match(IU)?t:"unsafe:"+t}function Li(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function Xc(...t){let e={};for(let n of t)for(let i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}var JA=Li("area,br,col,hr,img,wbr"),eR=Li("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),tR=Li("rp,rt"),bU=Xc(tR,eR),DU=Xc(eR,Li("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),CU=Xc(tR,Li("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),sS=Xc(JA,DU,CU,bU),nR=Li("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),TU=Li("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),SU=Li("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),AU=Xc(nR,TU,SU),RU=Li("script,style,template"),a_=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,i=!0;for(;n;){if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild){n=n.firstChild;continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}}return this.buf.join("")}startElement(e){let n=e.nodeName.toLowerCase();if(!sS.hasOwnProperty(n))return this.sanitizedSomething=!0,!RU.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let i=e.attributes;for(let r=0;r<i.length;r++){let s=i.item(r),o=s.name,a=o.toLowerCase();if(!AU.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;nR[a]&&(c=yv(c)),this.buf.push(" ",o,'="',oS(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=e.nodeName.toLowerCase();sS.hasOwnProperty(n)&&!JA.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(oS(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}},xU=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,MU=/([^\#-~ |!])/g;function oS(t){return t.replace(/&/g,"&amp;").replace(xU,function(e){let n=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((n-55296)*1024+(i-56320)+65536)+";"}).replace(MU,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var vh;function iR(t,e){let n=null;try{vh=vh||wU(t);let i=e?String(e):"";n=vh.getInertBodyElement(i);let r=5,s=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=vh.getInertBodyElement(i)}while(i!==s);let a=new a_().sanitizeChildren(aS(n)||n);return lf(a)}finally{if(n){let i=aS(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function aS(t){return"content"in t&&NU(t)?t.content:null}function NU(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Jc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Jc||{});function rR(t){let e=_v();return e?iS(e.sanitize(Jc.HTML,t)||""):uf(t,"HTML")?iS(As(t)):iR(LA(),qc(t))}function PU(t){let e=_v();return e?e.sanitize(Jc.URL,t)||"":uf(t,"URL")?As(t):yv(qc(t))}function OU(t){let e=_v();if(e)return rS(e.sanitize(Jc.RESOURCE_URL,t)||"");if(uf(t,"ResourceURL"))return rS(As(t));throw new T(904,!1)}function kU(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?OU:PU}function sR(t,e,n){return kU(e,n)(t)}function _v(){let t=ue();return t&&t[ei].sanitizer}var c_=class{};var FU="h",LU="b";var VU=()=>null;function vv(t,e,n=!1){return VU(t,e,n)}var l_=class{},jh=class{};function jU(t){let e=Error(`No component factory found for ${kt(t)}.`);return e[BU]=t,e}var BU="ngComponent";var u_=class{resolveComponentFactory(e){throw jU(e)}},Er=(()=>{let e=class e{};e.NULL=new u_;let t=e;return t})();function UU(){return ra(Dt(),ue())}function ra(t,e){return new we(fn(t,e))}var we=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=UU;let t=e;return t})();function $U(t){return t instanceof we?t.nativeElement:t}var bs=class{},Vi=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>HU();let t=e;return t})();function HU(){let t=ue(),e=Dt(),n=ti(e.index,t);return(mr(n)?n:t)[$e]}var zU=(()=>{let e=class e{};e.\u0275prov=D({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),xy={};function oR(t,e){let n=iT(t),i=n[Ro];return e?.equal&&(i.equal=e.equal),n.set=r=>ay(i,r),n.update=r=>rT(i,r),n.asReadonly=qU.bind(n),n}function qU(){let t=this[Ro];if(t.readonlyFn===void 0){let e=()=>this();e[Ro]=t,t.readonlyFn=e}return t.readonlyFn}function aR(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var d_=class{constructor(){}supports(e){return e instanceof Map||aR(e)}create(){return new h_}},h_=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||aR(e)))throw new T(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{let s=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let i=e._prev;return n._next=e,n._prev=i,e._prev=n,i&&(i._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let r=this._records.get(e);this._maybeAddToChanges(r,n);let s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}let i=new f_(e);return this._records.set(e,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(i=>n(e[i],i))}},f_=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function cS(){return new wv([new d_])}var wv=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r){let s=r.factories.slice();i=i.concat(s)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||cS()),deps:[[e,new lv,new gt]]}}find(i){let r=this.factories.find(s=>s.supports(i));if(r)return r;throw new T(901,!1)}};e.\u0275prov=D({token:e,providedIn:"root",factory:cS});let t=e;return t})();function Bh(t,e,n,i,r=!1){for(;n!==null;){let s=e[n.index];s!==null&&i.push(Qt(s)),Fi(s)&&GU(s,i);let o=n.type;if(o&8)Bh(t,e,n.child,i);else if(o&32){let a=pv(n,e),c;for(;c=a();)i.push(c)}else if(o&16){let a=KA(e,n);if(Array.isArray(a))i.push(...a);else{let c=Vc(e[hn]);Bh(c[Q],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function GU(t,e){for(let n=bt;n<t.length;n++){let i=t[n],r=i[Q].firstChild;r!==null&&Bh(i[Q],i,r,e)}t[_s]!==t[ai]&&e.push(t[_s])}var cR=[];function WU(t){return t[ys]??KU(t)}function KU(t){let e=cR.pop()??Object.create(YU);return e.lView=t,e}function QU(t){t.lView[ys]!==t&&(t.lView=null,cR.push(t))}var YU=ge(I({},sy),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Lc(t.lView)},consumerOnSignalRead(){this.lView[ys]=this}});function lR(t){return dR(t[Fc])}function uR(t){return dR(t[kn])}function dR(t){for(;t!==null&&!Fi(t);)t=t[kn];return t}var ZU="ngOriginalError";function My(t){return t[ZU]}var ii=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&My(e);for(;n&&My(n);)n=My(n);return n||null}},hR=new x("",{providedIn:"root",factory:()=>C(ii).handleError.bind(void 0)});var fR=!1,XU=new x("",{providedIn:"root",factory:()=>fR});var ji={};function Ln(t=1){pR(He(),ue(),_r()+t,!1)}function pR(t,e,n,i){if(!i)if((e[te]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Ih(e,s,n)}else{let s=t.preOrderHooks;s!==null&&bh(e,s,0,n)}ws(n)}function R(t,e=he.Default){let n=ue();if(n===null)return y(t,e);let i=Dt();return DA(i,n,Pt(t),e)}function mR(){let t="invalid";throw new Error(t)}function gR(t,e,n,i,r,s){let o=pt(null);try{let a=null;r&fe.SignalBased&&(a=e[i][Ro]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),r&fe.HasDecoratorInputTransform&&(s=t.inputTransforms[i].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,i):WS(e,a,i,s)}finally{pt(o)}}function JU(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)ws(~r);else{let s=r,o=n[++i],a=n[++i];Zj(o,s);let c=e[s];a(2,c)}}}finally{ws(-1)}}function df(t,e,n,i,r,s,o,a,c,l,u){let d=e.blueprint.slice();return d[ai]=r,d[te]=i|4|128|8|64,(l!==null||t&&t[te]&2048)&&(d[te]|=2048),eA(d),d[mt]=d[ia]=t,d[ct]=n,d[ei]=o||t&&t[ei],d[$e]=a||t&&t[$e],d[Yo]=c||t&&t[Yo]||null,d[Xt]=s,d[Kc]=HB(),d[Qo]=u,d[GS]=l,d[hn]=e.type==2?t[hn]:d,d}function sa(t,e,n,i,r){let s=t.data[e];if(s===null)s=e2(t,e,n,i,r),Yj()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=i,s.attrs=r;let o=Wj();s.injectorIndex=o===null?-1:o.injectorIndex}return Ts(s,!0),s}function e2(t,e,n,i,r){let s=sA(),o=J_(),a=o?s:s&&s.parent,c=t.data[e]=o2(t,a,n,e,i,r);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function yR(t,e,n,i){if(n===0)return-1;let r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function _R(t,e,n,i,r){let s=_r(),o=i&2;try{ws(-1),o&&e.length>nt&&pR(t,e,nt,!1),Yn(o?2:0,r),n(i,r)}finally{ws(s),Yn(o?3:1,r)}}function Ev(t,e,n){if(K_(e)){let i=pt(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{pt(i)}}}function Iv(t,e,n){iA()&&(h2(t,e,n,fn(n,e)),(n.flags&64)===64&&ER(t,e,n))}function bv(t,e,n=fn){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?n(e,t):t[o];t[r++]=a}}}function vR(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Dv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Dv(t,e,n,i,r,s,o,a,c,l,u){let d=nt+i,h=d+r,f=t2(d,h),p=typeof l=="function"?l():l;return f[Q]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function t2(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:ji);return n}function n2(t,e,n,i){let s=i.get(XU,fR)||n===Jn.ShadowDom,o=t.selectRootElement(e,s);return i2(o),o}function i2(t){r2(t)}var r2=()=>null;function s2(t,e,n,i){let r=DR(e);r.push(n),t.firstCreatePass&&CR(t).push(i,r.length-1)}function o2(t,e,n,i,r,s){let o=e?e.injectorIndex:-1,a=0;return rA()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function lS(t,e,n,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;i??={};let a,c=fe.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(r!==null){if(!r.hasOwnProperty(s))continue;l=r[s]}t===0?uS(i,n,l,a,c):uS(i,n,l,a)}return i}function uS(t,e,n,i,r){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,i):s=t[n]=[e,i],r!==void 0&&s.push(r)}function a2(t,e,n){let i=e.directiveStart,r=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let u=i;u<r;u++){let d=s[u],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;c=lS(0,d.inputs,u,c,f),l=lS(1,d.outputs,u,l,p);let g=c!==null&&o!==null&&!LS(e)?b2(c,u,o):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function c2(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Cv(t,e,n,i,r,s,o,a){let c=fn(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[i])?(Sv(t,n,u,i,r),Zh(e)&&l2(n,e.index)):e.type&3?(i=c2(i),r=o!=null?o(r,e.value||"",i):r,s.setProperty(c,i,r)):e.type&12}function l2(t,e){let n=ti(e,t);n[te]&16||(n[te]|=64)}function Tv(t,e,n,i){if(iA()){let r=i===null?null:{"":-1},s=p2(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&wR(t,e,n,o,r,a),r&&m2(n,i,r)}n.mergedAttrs=Oc(n.mergedAttrs,n.attrs)}function wR(t,e,n,i,r,s){for(let l=0;l<i.length;l++)Yy(Oh(n,e),t,i[l].type);y2(n,t.data.length,i.length);for(let l=0;l<i.length;l++){let u=i[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=yR(t,e,i.length,null);for(let l=0;l<i.length;l++){let u=i[l];n.mergedAttrs=Oc(n.mergedAttrs,u.hostAttrs),_2(t,n,e,c,u),g2(c,u,r),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}a2(t,n,s)}function u2(t,e,n,i,r){let s=r.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;d2(o)!=a&&o.push(a),o.push(n,i,s)}}function d2(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function h2(t,e,n,i){let r=n.directiveStart,s=n.directiveEnd;Zh(n)&&v2(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Oh(n,e),dn(i,e);let o=n.initialInputs;for(let a=r;a<s;a++){let c=t.data[a],l=Is(e,t,a,n);if(dn(l,e),o!==null&&I2(e,a-r,l,c,n,o),ki(c)){let u=ti(n.index,e);u[ct]=Is(e,t,a,n)}}}function ER(t,e,n){let i=n.directiveStart,r=n.directiveEnd,s=n.index,o=Xj();try{ws(s);for(let a=i;a<r;a++){let c=t.data[a],l=e[a];Ky(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&f2(c,l)}}finally{ws(-1),Ky(o)}}function f2(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function p2(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(VS(e,o.selectors,!1))if(i||(i=[]),ki(o))if(o.findHostDirectiveDefs!==null){let a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o);let c=a.length;p_(t,e,c)}else i.unshift(o),p_(t,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return i===null?null:[i,r]}function p_(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function m2(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let s=n[e[r+1]];if(s==null)throw new T(-301,!1);i.push(e[r],s)}}}function g2(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;ki(e)&&(n[""]=t)}}function y2(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function _2(t,e,n,i,r){t.data[i]=r;let s=r.factory||(r.factory=vs(r.type,!0)),o=new Es(s,ki(r),R);t.blueprint[i]=o,n[i]=o,u2(t,e,i,yR(t,n,r.hostVars,ji),r)}function v2(t,e,n){let i=fn(e,t),r=vR(n),s=t[ei].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=hf(t,df(t,r,null,o,i,e,null,s.createRenderer(i,n),null,null,null));t[e.index]=a}function w2(t,e,n,i,r,s){let o=fn(t,e);E2(e[$e],o,s,t.value,n,i,r)}function E2(t,e,n,i,r,s,o){if(s==null)t.removeAttribute(e,r,n);else{let a=o==null?qc(s):o(s,i||"",r);t.setAttribute(e,r,a,n)}}function I2(t,e,n,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];gR(i,n,c,l,u,d)}}function b2(t,e,n){let i=null,r=0;for(;r<n.length;){let s=n[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){i===null&&(i=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],n[r+1]);break}}r+=2}return i}function IR(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function bR(t,e){let n=t.contentQueries;if(n!==null){let i=pt(null);try{for(let r=0;r<n.length;r+=2){let s=n[r],o=n[r+1];if(o!==-1){let a=t.data[o];nv(s),a.contentQueries(2,e[o],o)}}}finally{pt(i)}}}function hf(t,e){return t[Fc]?t[WT][kn]=e:t[Fc]=e,t[WT]=e,e}function m_(t,e,n){nv(0);let i=pt(null);try{e(t,n)}finally{pt(i)}}function DR(t){return t[kc]||(t[kc]=[])}function CR(t){return t.cleanup||(t.cleanup=[])}function TR(t,e,n){return(t===null||ki(t))&&(n=Fj(n[e.index])),n[$e]}function SR(t,e){let n=t[Yo],i=n?n.get(ii,null):null;i&&i.handleError(e)}function Sv(t,e,n,i,r){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],u=t.data[o];gR(u,l,i,a,c,r)}}function D2(t,e,n){let i=XS(e,t);JB(t[$e],i,n)}var C2=100;function T2(t,e=!0){let n=t[ei],i=n.rendererFactory,r=!1;r||i.begin?.();try{S2(t)}catch(s){throw e&&SR(t,s),s}finally{r||(i.end?.(),n.inlineEffectRunner?.flush())}}function S2(t){g_(t,0);let e=0;for(;tA(t);){if(e===C2)throw new T(103,!1);e++,g_(t,1)}}function A2(t,e,n,i){let r=e[te];if((r&256)===256)return;let s=!1;!s&&e[ei].inlineEffectRunner?.flush(),iv(e);let o=null,a=null;!s&&R2(t)&&(a=WU(e),o=QC(a));try{eA(e),Qj(t.bindingStartIndex),n!==null&&_R(t,e,n,2,i);let c=(r&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&Ih(e,d,null)}else{let d=t.preOrderHooks;d!==null&&bh(e,d,0,null),Dy(e,0)}if(x2(e),AR(e,0),t.contentQueries!==null&&bR(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&Ih(e,d)}else{let d=t.contentHooks;d!==null&&bh(e,d,1),Dy(e,1)}JU(t,e);let l=t.components;l!==null&&xR(e,l,0);let u=t.viewQuery;if(u!==null&&m_(2,u,i),!s)if(c){let d=t.viewCheckHooks;d!==null&&Ih(e,d)}else{let d=t.viewHooks;d!==null&&bh(e,d,2),Dy(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[by]){for(let d of e[by])d();e[by]=null}s||(e[te]&=-73)}catch(c){throw Lc(e),c}finally{a!==null&&(YC(a,o),QU(a)),rv()}}function R2(t){return t.type!==2}function AR(t,e){for(let n=lR(t);n!==null;n=uR(n))for(let i=bt;i<n.length;i++){let r=n[i];RR(r,e)}}function x2(t){for(let e=lR(t);e!==null;e=uR(e)){if(!(e[te]&W_.HasTransplantedViews))continue;let n=e[Zo];for(let i=0;i<n.length;i++){let r=n[i],s=r[mt];jj(r)}}}function M2(t,e,n){let i=ti(e,t);RR(i,n)}function RR(t,e){Y_(t)&&g_(t,e)}function g_(t,e){let i=t[Q],r=t[te],s=t[ys],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&oy(s)),s&&(s.dirty=!1),t[te]&=-9217,o)A2(i,t,i.template,t[ct]);else if(r&8192){AR(t,1);let a=i.components;a!==null&&xR(t,a,1)}}function xR(t,e,n){for(let i=0;i<e.length;i++)M2(t,e[i],n)}function Av(t){for(t[ei].changeDetectionScheduler?.notify();t;){t[te]|=64;let e=Vc(t);if(Rj(t)&&!e)return t;t=e}return null}var Ds=class{get rootNodes(){let e=this._lView,n=e[Q];return Bh(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ct]}set context(e){this._lView[ct]=e}get destroyed(){return(this._lView[te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[mt];if(Fi(e)){let n=e[xh],i=n?n.indexOf(this):-1;i>-1&&(Bc(e,i),kh(n,i))}this._attachedToViewContainer=!1}of(this._lView[Q],this._lView)}onDestroy(e){nA(this._lView,e)}markForCheck(){Av(this._cdRefInjectingView||this._lView)}detach(){this._lView[te]&=-129}reattach(){Wy(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,T2(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new T(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,HA(this._lView[Q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new T(902,!1);this._appRef=e,Wy(this._lView)}},ci=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=N2;let t=e;return t})();function N2(t){return P2(Dt(),ue(),(t&16)===16)}function P2(t,e,n){if(Zh(t)&&!n){let i=ti(t.index,e);return new Ds(i,i)}else if(t.type&47){let i=e[hn];return new Ds(i,e)}return null}var MR=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=O2,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),y_=class extends MR{constructor(e){super(),this._lView=e}onDestroy(e){return nA(this._lView,e),()=>Uj(this._lView,e)}};function O2(){return new y_(ue())}var dS=new Set;function el(t){dS.has(t)||(dS.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var __=class extends q{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,i){let r=e,s=n||(()=>null),o=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Ny(s),r&&(r=Ny(r)),o&&(o=Ny(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof Ae&&e.add(a),a}};function Ny(t){return e=>{setTimeout(t,void 0,e)}}var Ee=__;function hS(...t){}function k2(){let t=typeof Je.requestAnimationFrame=="function",e=Je[t?"requestAnimationFrame":"setTimeout"],n=Je[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var L=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ee(!1),this.onMicrotaskEmpty=new Ee(!1),this.onStable=new Ee(!1),this.onError=new Ee(!1),typeof Zone>"u")throw new T(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=k2().nativeRequestAnimationFrame,V2(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new T(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new T(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,F2,hS,hS);try{return s.runTask(o,n,i)}finally{s.cancelTask(o)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},F2={};function Rv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function L2(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Je,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,v_(t),t.isCheckStableRunning=!0,Rv(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),v_(t))}function V2(t){let e=()=>{L2(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{if(j2(a))return n.invokeTask(r,s,o,a);try{return fS(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),pS(t)}},onInvoke:(n,i,r,s,o,a,c)=>{try{return fS(t),n.invoke(r,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),pS(t)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,v_(t),Rv(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function v_(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function fS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function pS(t){t._nesting--,Rv(t)}function j2(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var qo=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(qo||{}),B2={destroy(){}};function xv(t,e){!e&&kB(xv);let n=e?.injector??C(Me);if(!LB(n))return B2;el("NgAfterNextRender");let i=n.get(Mv),r=i.handler??=new E_,s=e?.phase??qo.MixedReadWrite,o=()=>{r.unregister(c),a()},a=n.get(MR).onDestroy(o),c=new w_(n,s,()=>{o(),t()});return r.register(c),{destroy:o}}var w_=class{constructor(e,n,i){this.phase=n,this.callbackFn=i,this.zone=e.get(L),this.errorHandler=e.get(ii,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},E_=class{constructor(){this.executingCallbacks=!1,this.buckets={[qo.EarlyRead]:new Set,[qo.Write]:new Set,[qo.MixedReadWrite]:new Set,[qo.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){let e=!1;this.executingCallbacks=!0;for(let n of Object.values(this.buckets))for(let i of n)e=!0,i.invoke();this.executingCallbacks=!1;for(let n of this.deferredCallbacks)this.buckets[n.phase].add(n);return this.deferredCallbacks.clear(),e}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Mv=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let s of i)s();return!!this.handler?.execute()||i.length>0}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=D({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function U2(t,e){let n=ti(e,t),i=n[Q];$2(i,n);let r=n[ai];r!==null&&n[Qo]===null&&(n[Qo]=vv(r,n[Yo])),Nv(i,n,n[ct])}function $2(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Nv(t,e,n){iv(e);try{let i=t.viewQuery;i!==null&&m_(1,i,n);let r=t.template;r!==null&&_R(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&bR(t,e),t.staticViewQueries&&m_(2,t.viewQuery,n);let s=t.components;s!==null&&H2(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[te]&=-5,rv()}}function H2(t,e){for(let n=0;n<e.length;n++)U2(t,e[n])}function Uh(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=Uy(r,a);else if(s==2){let c=a,l=e[++o];i=Uy(i,c+": "+l+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var $h=class extends Er{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=gr(e);return new ta(n,this.ngModule)}};function mS(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function z2(t){let e=t.toLowerCase();return e==="svg"?ZS:e==="math"?Pj:null}var I_=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Yh(i);let r=this.injector.get(e,xy,i);return r!==xy||n===xy?r:this.parentInjector.get(e,n,i)}},ta=class extends jh{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=mS(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return mS(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Dj(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){r=r||this.ngModule;let s=r instanceof Yt?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let o=s?new I_(e,s):e,a=o.get(bs,null);if(a===null)throw new T(407,!1);let c=o.get(zU,null),l=o.get(Mv,null),u=o.get(c_,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:u},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=i?n2(h,i,this.componentDef.encapsulation,o):$A(h,f,z2(f)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let v=null;p!==null&&(v=vv(p,o,!0));let E=Dv(0,null,null,1,0,null,null,null,null,null,null),S=df(null,E,null,g,null,null,d,h,o,null,v);iv(S);let N,O;try{let K=this.componentDef,j,ae=null;K.findHostDirectiveDefs?(j=[],ae=new Map,K.findHostDirectiveDefs(K,j,ae),j.push(K)):j=[K];let De=q2(S,p),Mt=G2(De,p,K,j,S,d,h);O=Q_(E,nt),p&&Q2(h,K,p,i),n!==void 0&&Y2(O,this.ngContentSelectors,n),N=K2(Mt,K,j,ae,S,[Z2]),Nv(E,S,null)}finally{rv()}return new b_(this.componentType,N,ra(O,S),S,O)}},b_=class extends l_{constructor(e,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ds(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Sv(s[Q],s,r,e,n),this.previousInputValues.set(e,n);let o=ti(this._tNode.index,s);Av(o)}}get injector(){return new gs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function q2(t,e){let n=t[Q],i=nt;return t[i]=e,sa(n,i,2,"#host",null)}function G2(t,e,n,i,r,s,o){let a=r[Q];W2(i,t,e,o);let c=null;e!==null&&(c=vv(e,r[Yo]));let l=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=df(r,vR(n),null,u,r[t.index],t,s,l,null,null,c);return a.firstCreatePass&&p_(a,t,i.length-1),hf(r,d),r[t.index]=d}function W2(t,e,n,i){for(let r of t)e.mergedAttrs=Oc(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(Uh(e,e.mergedAttrs,!0),n!==null&&ZA(i,n,e))}function K2(t,e,n,i,r,s){let o=Dt(),a=r[Q],c=fn(o,r);wR(a,r,o,n,null,i);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,h=Is(r,a,d,o);dn(h,r)}ER(a,r,o),c&&dn(c,r);let l=Is(r,a,o.directiveStart+o.componentOffset,o);if(t[ct]=r[ct]=l,s!==null)for(let u of s)u(l,e);return Ev(a,o,t),l}function Q2(t,e,n,i){if(i)qy(t,n,["ng-version","17.1.0"]);else{let{attrs:r,classes:s}=Cj(e.selectors[0]);r&&qy(t,n,r),s&&s.length>0&&YA(t,n,s.join(" "))}}function Y2(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let s=n[r];i.push(s!=null?Array.from(s):null)}}function Z2(){let t=Dt();nf(ue()[Q],t)}function X2(t){return Object.getPrototypeOf(t.prototype).constructor}function it(t){let e=X2(t.type),n=!0,i=[t];for(;e;){let r;if(ki(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new T(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let o=t;o.inputs=wh(t.inputs),o.inputTransforms=wh(t.inputTransforms),o.declaredInputs=wh(t.declaredInputs),o.outputs=wh(t.outputs);let a=r.hostBindings;a&&i$(t,a);let c=r.viewQuery,l=r.contentQueries;if(c&&t$(t,c),l&&n$(t,l),J2(t,r),WV(t.outputs,r.outputs),ki(r)&&r.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===it&&(n=!1)}}e=Object.getPrototypeOf(e)}e$(i)}function J2(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function e$(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Oc(r.hostAttrs,n=Oc(n,r.hostAttrs))}}function wh(t){return t===Ko?{}:t===Ot?[]:t}function t$(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function n$(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,s)=>{e(i,r,s),n(i,r,s)}:t.contentQueries=e}function i$(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function Bi(t){let e=t.inputConfig,n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(n[i]=r[3])}t.inputTransforms=n}var Rre=new RegExp(`^(\\d+)*(${LU}|${FU})*(.*)`);var r$=()=>null;function Uc(t,e){return r$(t,e)}function ff(t,e,n,i){let r=e.tView,o=t[te]&4096?4096:16,a=df(t,r,n,o,null,e,null,null,null,i?.injector??null,i?.dehydratedView??null),c=t[e.index];a[Wc]=c;let l=t[Xn];return l!==null&&(a[Xn]=l.createEmbeddedView(r)),Nv(r,a,n),a}function NR(t,e){let n=bt+e;if(n<t.length)return t[n]}function $c(t,e){return!e||e.firstChild===null||jA(t)}function pf(t,e,n,i=!0){let r=e[Q];if(rU(r,e,t,n),i){let o=r_(n,t),a=e[$e],c=mv(a,t[_s]);c!==null&&nU(r,t[Xt],a,e,c,o)}let s=e[Qo];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function PR(t,e){let n=Bc(t,e);return n!==void 0&&of(n[Q],n),n}var mn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=s$;let t=e;return t})();function s$(){let t=Dt();return kR(t,ue())}var o$=mn,OR=class extends o${constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return ra(this._hostTNode,this._hostLView)}get injector(){return new gs(this._hostTNode,this._hostLView)}get parentInjector(){let e=sv(this._hostTNode,this._hostLView);if(_A(e)){let n=Nh(e,this._hostLView),i=Mh(e),r=n[Q].data[i+8];return new gs(r,n)}else return new gs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=gS(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-bt}createEmbeddedView(e,n,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=Uc(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,r,$c(this._hostTNode,o)),a}createComponent(e,n,i,r,s){let o=e&&!_B(e),a;if(o)a=n;else{let p=n||{};a=p.index,i=p.injector,r=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new ta(gr(e)),l=i||this.parentInjector;if(!s&&c.ngModule==null){let g=(o?l:this.parentInjector).get(Yt,null);g&&(s=g)}let u=gr(c.componentType??{}),d=Uc(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,r,h,s);return this.insertImpl(f.hostView,a,$c(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(Vj(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[mt],l=new OR(c,c[Xt],c[mt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return pf(o,r,s,i),e.attachToViewContainerRef(),AA(Py(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=gS(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=Bc(this._lContainer,n);i&&(kh(Py(this._lContainer),n),of(i[Q],i))}detach(e){let n=this._adjustIndex(e,-1),i=Bc(this._lContainer,n);return i&&kh(Py(this._lContainer),n)!=null?new Ds(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function gS(t){return t[xh]}function Py(t){return t[xh]||(t[xh]=[])}function kR(t,e){let n,i=e[t.index];return Fi(i)?n=i:(n=IR(i,e,null,t),e[t.index]=n,hf(e,n)),c$(n,e,t,i),new OR(n,t,e)}function a$(t,e){let n=t[$e],i=n.createComment(""),r=fn(e,t),s=mv(n,r);return Lh(n,s,i,uU(n,r),!1),i}var c$=d$,l$=()=>!1;function u$(t,e,n){return l$(t,e,n)}function d$(t,e,n,i){if(t[_s])return;let r;n.type&8?r=Qt(i):r=a$(e,n),t[_s]=r}function h$(t,e,n){return t[e]=n}function li(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function f$(t,e,n,i,r,s,o,a,c){let l=e.consts,u=sa(e,t,4,o||null,Xo(l,a));Tv(e,n,u,Xo(l,c)),nf(e,u);let d=u.tView=Dv(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Zt(t,e,n,i,r,s,o,a){let c=ue(),l=He(),u=t+nt,d=l.firstCreatePass?f$(u,l,c,e,n,i,r,s,o):l.data[u];Ts(d,!1);let h=p$(l,c,d,t);ef()&&af(l,c,h,d),dn(h,c);let f=IR(h,c,h,d);return c[u]=f,hf(c,f),u$(f,d,c),Xh(d)&&Iv(l,c,d),o!=null&&bv(c,d,a),Zt}var p$=m$;function m$(t,e,n,i){return tf(!0),e[$e].createComment("")}function ui(t,e,n,i){let r=ue(),s=Ss();if(li(r,s,e)){let o=He(),a=Jh();w2(a,r,t,e,n,i)}return ui}function g$(t,e,n,i){return li(t,Ss(),n)?e+qc(n)+i:ji}function Eh(t,e){return t<<17|e<<2}function Cs(t){return t>>17&32767}function y$(t){return(t&2)==2}function _$(t,e){return t&131071|e<<17}function D_(t){return t|2}function na(t){return(t&131068)>>2}function Oy(t,e){return t&-131069|e<<2}function v$(t){return(t&1)===1}function C_(t){return t|1}function w$(t,e,n,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Cs(o),c=na(o);t[i]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Qc(d,u)>0)&&(l=!0)}else u=n;if(r)if(c!==0){let h=Cs(t[a+1]);t[i+1]=Eh(h,a),h!==0&&(t[h+1]=Oy(t[h+1],i)),t[a+1]=_$(t[a+1],i)}else t[i+1]=Eh(a,0),a!==0&&(t[a+1]=Oy(t[a+1],i)),a=i;else t[i+1]=Eh(c,0),a===0?a=i:t[c+1]=Oy(t[c+1],i),c=i;l&&(t[i+1]=D_(t[i+1])),yS(t,u,i,!0),yS(t,u,i,!1),E$(e,u,t,i,s),o=Eh(a,c),s?e.classBindings=o:e.styleBindings=o}function E$(t,e,n,i,r){let s=r?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Qc(s,e)>=0&&(n[i+1]=C_(n[i+1]))}function yS(t,e,n,i){let r=t[n+1],s=e===null,o=i?Cs(r):na(r),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];I$(c,e)&&(a=!0,t[o+1]=i?C_(l):D_(l)),o=i?Cs(l):na(l)}a&&(t[n+1]=i?D_(r):C_(r))}function I$(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Qc(t,e)>=0:!1}var On={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function b$(t){return t.substring(On.key,On.keyEnd)}function D$(t){return C$(t),FR(t,LR(t,0,On.textEnd))}function FR(t,e){let n=On.textEnd;return n===e?-1:(e=On.keyEnd=T$(t,On.key=e,n),LR(t,e,n))}function C$(t){On.key=0,On.keyEnd=0,On.value=0,On.valueEnd=0,On.textEnd=t.length}function LR(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function T$(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Rs(t,e,n){let i=ue(),r=Ss();if(li(i,r,e)){let s=He(),o=Jh();Cv(s,o,i,t,e,i[$e],n,!1)}return Rs}function T_(t,e,n,i,r){let s=e.inputs,o=r?"class":"style";Sv(t,n,s[o],o,i)}function Pv(t,e,n){return jR(t,e,n,!1),Pv}function Ui(t,e){return jR(t,e,null,!0),Ui}function VR(t){A$(O$,S$,t,!0)}function S$(t,e){for(let n=D$(e);n>=0;n=FR(e,n))cv(t,b$(e),!0)}function jR(t,e,n,i){let r=ue(),s=He(),o=aA(2);if(s.firstUpdatePass&&UR(s,t,o,i),e!==ji&&li(r,o,e)){let a=s.data[_r()];$R(s,a,r,r[$e],t,r[o+1]=F$(e,n),i,o)}}function A$(t,e,n,i){let r=He(),s=aA(2);r.firstUpdatePass&&UR(r,null,s,i);let o=ue();if(n!==ji&&li(o,s,n)){let a=r.data[_r()];if(HR(a,i)&&!BR(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Uy(c,n||"")),T_(r,a,o,n,i)}else k$(r,a,o,o[$e],o[s+1],o[s+1]=P$(t,e,n),i,s)}}function BR(t,e){return e>=t.expandoStartIndex}function UR(t,e,n,i){let r=t.data;if(r[n+1]===null){let s=r[_r()],o=BR(t,n);HR(s,i)&&e===null&&!o&&(e=!1),e=R$(r,s,e,i),w$(r,s,e,n,o,i)}}function R$(t,e,n,i){let r=tv(t),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=ky(null,t,e,n,i),n=Hc(n,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==r)if(n=ky(r,t,e,n,i),s===null){let c=x$(t,e,i);c!==void 0&&Array.isArray(c)&&(c=ky(null,t,e,c[1],i),c=Hc(c,e.attrs,i),M$(t,e,i,c))}else s=N$(t,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),n}function x$(t,e,n){let i=n?e.classBindings:e.styleBindings;if(na(i)!==0)return t[Cs(i)]}function M$(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[Cs(r)]=i}function N$(t,e,n){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=t[s].hostAttrs;i=Hc(i,o,n)}return Hc(i,e.attrs,n)}function ky(t,e,n,i,r){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],i=Hc(i,s.hostAttrs,r),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function Hc(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),cv(t,o,n?!0:e[++s]))}return t===void 0?null:t}function P$(t,e,n){if(n==null||n==="")return Ot;let i=[],r=As(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else typeof r=="string"&&e(i,r);return i}function O$(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&cv(t,i,n)}function k$(t,e,n,i,r,s,o,a){r===ji&&(r=Ot);let c=0,l=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let h=c<r.length?r[c+1]:void 0,f=l<s.length?s[l+1]:void 0,p=null,g;u===d?(c+=2,l+=2,h!==f&&(p=d,g=f)):d===null||u!==null&&u<d?(c+=2,p=u):(l+=2,p=d,g=f),p!==null&&$R(t,e,n,i,p,g,o,a),u=c<r.length?r[c]:null,d=l<s.length?s[l]:null}}function $R(t,e,n,i,r,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=v$(l)?_S(c,e,n,r,na(l),o):void 0;if(!Hh(u)){Hh(s)||y$(l)&&(s=_S(c,null,n,r,a,o));let d=XS(_r(),n);gU(i,o,d,r,s)}}function _S(t,e,n,i,r,s){let o=e===null,a;for(;r>0;){let c=t[r],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[r+1];h===ji&&(h=d?Ot:void 0);let f=d?Ty(h,i):u===i?h:void 0;if(l&&!Hh(f)&&(f=Ty(c,i)),Hh(f)&&(a=f,o))return a;let p=t[r+1];r=o?Cs(p):na(p)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Ty(c,i))}return a}function Hh(t){return t!==void 0}function F$(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=kt(As(t)))),t}function HR(t,e){return(t.flags&(e?8:16))!==0}var S_=class{destroy(e){}updateValue(e,n){}swap(e,n){let i=Math.min(e,n),r=Math.max(e,n),s=this.detach(r);if(r-i>1){let o=this.detach(i);this.attach(i,s),this.attach(r,o)}else this.attach(i,s)}move(e,n){this.attach(n,this.detach(e))}};function Fy(t,e,n,i,r){return t===n&&Object.is(e,i)?1:Object.is(r(t,e),r(n,i))?-1:0}function L$(t,e,n){let i,r,s=0,o=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;s<=o&&s<=a;){let c=t.at(s),l=e[s],u=Fy(s,c,s,l,n);if(u!==0){u<0&&t.updateValue(s,l),s++;continue}let d=t.at(o),h=e[a],f=Fy(o,d,a,h,n);if(f!==0){f<0&&t.updateValue(o,h),o--,a--;continue}let p=n(s,c),g=n(o,d),v=n(s,l);if(Object.is(v,g)){let E=n(a,h);Object.is(E,p)?(t.swap(s,o),t.updateValue(o,h),a--,o--):t.move(o,s),t.updateValue(s,l),s++;continue}if(i??=new zh,r??=wS(t,s,o,n),A_(t,i,s,v))t.updateValue(s,l),s++,o++;else if(r.has(v))i.set(p,t.detach(s)),o--;else{let E=t.create(s,e[s]);t.attach(s,E),s++,o++}}for(;s<=a;)vS(t,i,n,s,e[s]),s++}else if(e!=null){let a=e[Symbol.iterator](),c=a.next();for(;!c.done&&s<=o;){let l=t.at(s),u=c.value,d=Fy(s,l,s,u,n);if(d!==0)d<0&&t.updateValue(s,u),s++,c=a.next();else{i??=new zh,r??=wS(t,s,o,n);let h=n(s,u);if(A_(t,i,s,h))t.updateValue(s,u),s++,o++,c=a.next();else if(!r.has(h))t.attach(s,t.create(s,u)),s++,o++,c=a.next();else{let f=n(s,l);i.set(f,t.detach(s)),o--}}}for(;!c.done;)vS(t,i,n,t.length,c.value),c=a.next()}for(;s<=o;)t.destroy(t.detach(o--));i?.forEach(a=>{t.destroy(a)})}function A_(t,e,n,i){return e!==void 0&&e.has(i)?(t.attach(n,e.get(i)),e.delete(i),!0):!1}function vS(t,e,n,i,r){if(A_(t,e,i,n(i,r)))t.updateValue(i,r);else{let s=t.create(i,r);t.attach(i,s)}}function wS(t,e,n,i){let r=new Set;for(let s=e;s<=n;s++)r.add(i(s,t.at(s)));return r}var zh=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,i]of this.kvMap)if(e(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,n)}}};function Ov(t,e,n){el("NgControlFlow");let i=ue(),r=Ss(),s=N_(i,nt+t),o=0;if(li(i,r,e)){let a=pt(null);try{if(PR(s,o),e!==-1){let c=P_(i[Q],nt+e),l=Uc(s,c.tView.ssrId),u=ff(i,c,n,{dehydratedView:l});pf(s,u,o,$c(c,l))}}finally{pt(a)}}else{let a=NR(s,o);a!==void 0&&(a[ct]=n)}}var R_=class{constructor(e,n,i){this.lContainer=e,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-bt}};function Mre(t){return t}function Nre(t,e){return e}var x_=class{constructor(e,n,i){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=i}};function Pre(t,e,n,i,r,s,o,a,c,l,u,d,h){el("NgControlFlow");let f=c!==void 0,p=ue(),g=a?o.bind(p[hn][ct]):o,v=new x_(f,g);p[nt+t]=v,Zt(t+1,e,n,i,r,s),f&&Zt(t+2,c,l,u,d,h)}var M_=class extends S_{constructor(e,n,i){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=i,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-bt}at(e){return this.getLView(e)[ct].$implicit}attach(e,n){let i=n[Qo];this.needsIndexUpdate||=e!==this.length,pf(this.lContainer,n,e,$c(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,V$(this.lContainer,e)}create(e,n){let i=Uc(this.lContainer,this.templateTNode.tView.ssrId);return ff(this.hostLView,this.templateTNode,new R_(this.lContainer,n,e),{dehydratedView:i})}destroy(e){of(e[Q],e)}updateValue(e,n){this.getLView(e)[ct].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ct].$index=e}getLView(e){return j$(this.lContainer,e)}};function Ore(t){let e=pt(null),n=_r();try{let i=ue(),r=i[Q],s=i[n];if(s.liveCollection===void 0){let a=n+1,c=N_(i,a),l=P_(r,a);s.liveCollection=new M_(c,i,l)}else s.liveCollection.reset();let o=s.liveCollection;if(L$(o,t,s.trackByFn),o.updateIndexes(),s.hasEmptyBlock){let a=Ss(),c=o.length===0;if(li(i,a,c)){let l=n+2,u=N_(i,l);if(c){let d=P_(r,l),h=Uc(u,d.tView.ssrId),f=ff(i,d,void 0,{dehydratedView:h});pf(u,f,0,$c(d,h))}else PR(u,0)}}}finally{pt(e)}}function N_(t,e){return t[e]}function V$(t,e){return Bc(t,e)}function j$(t,e){return NR(t,e)}function P_(t,e){return Q_(t,e)}function B$(t,e,n,i,r,s){let o=e.consts,a=Xo(o,r),c=sa(e,t,2,i,a);return Tv(e,n,c,Xo(o,s)),c.attrs!==null&&Uh(c,c.attrs,!1),c.mergedAttrs!==null&&Uh(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Lt(t,e,n,i){let r=ue(),s=He(),o=nt+t,a=r[$e],c=s.firstCreatePass?B$(o,s,r,e,n,i):s.data[o],l=U$(s,r,c,a,e,t);r[o]=l;let u=Xh(c);return Ts(c,!0),ZA(a,l,c),(c.flags&32)!==32&&ef()&&af(s,r,l,c),$j()===0&&dn(l,r),Hj(),u&&(Iv(s,r,c),Ev(s,c,r)),i!==null&&bv(r,c),Lt}function Ct(){let t=Dt();J_()?ev():(t=t.parent,Ts(t,!1));let e=t;qj(e)&&Gj(),zj();let n=He();return n.firstCreatePass&&(nf(n,t),K_(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&oB(e)&&T_(n,e,ue(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&aB(e)&&T_(n,e,ue(),e.stylesWithoutHost,!1),Ct}function Ir(t,e,n,i){return Lt(t,e,n,i),Ct(),Ir}var U$=(t,e,n,i,r,s)=>(tf(!0),$A(i,r,nB()));function $$(t,e,n,i,r){let s=e.consts,o=Xo(s,i),a=sa(e,t,8,"ng-container",o);o!==null&&Uh(a,o,!0);let c=Xo(s,r);return Tv(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function zR(t,e,n){let i=ue(),r=He(),s=t+nt,o=r.firstCreatePass?$$(s,r,i,e,n):r.data[s];Ts(o,!0);let a=H$(r,i,o,t);return i[s]=a,ef()&&af(r,i,a,o),dn(a,i),Xh(o)&&(Iv(r,i,o),Ev(r,o,i)),n!=null&&bv(i,o),zR}function qR(){let t=Dt(),e=He();return J_()?ev():(t=t.parent,Ts(t,!1)),e.firstCreatePass&&(nf(e,t),K_(t)&&e.queries.elementEnd(t)),qR}function kv(t,e,n){return zR(t,e,n),qR(),kv}var H$=(t,e,n,i)=>(tf(!0),eU(e[$e],""));function Fv(){return ue()}function mf(t,e,n){let i=ue(),r=Ss();if(li(i,r,e)){let s=He(),o=Jh();Cv(s,o,i,t,e,i[$e],n,!0)}return mf}function z$(t,e,n){let i=ue(),r=Ss();if(li(i,r,e)){let s=He(),o=Jh(),a=tv(s.data),c=TR(a,o,i);Cv(s,o,i,t,e,c,n,!0)}return z$}var ms=void 0;function q$(t){let e=t,n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&i===0?1:5}var G$=["en",[["a","p"],["AM","PM"],ms],[["AM","PM"],ms,ms],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ms,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ms,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ms,"{1} 'at' {0}",ms],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",q$],Ly={};function Lv(t){let e=W$(t),n=ES(e);if(n)return n;let i=e.split("-")[0];if(n=ES(i),n)return n;if(i==="en")return G$;throw new T(701,!1)}function ES(t){return t in Ly||(Ly[t]=Je.ng&&Je.ng.common&&Je.ng.common.locales&&Je.ng.common.locales[t]),Ly[t]}var oa=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(oa||{});function W$(t){return t.toLowerCase().replace(/_/g,"-")}var qh="en-US";var K$=qh;function Q$(t){tj(t,"Expected localeId to be defined"),typeof t=="string"&&(K$=t.toLowerCase().replace(/_/g,"-"))}function xs(t){return!!t&&typeof t.then=="function"}function GR(t){return!!t&&typeof t.subscribe=="function"}function Tt(t,e,n,i){let r=ue(),s=He(),o=Dt();return WR(s,r,r[$e],o,t,e,i),Tt}function Y$(t,e){let n=Dt(),i=ue(),r=He(),s=tv(r.data),o=TR(s,n,i);return WR(r,i,o,n,t,e),Y$}function Z$(t,e,n,i){let r=t.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===n&&r[s+1]===i){let a=e[kc],c=r[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function WR(t,e,n,i,r,s,o){let a=Xh(i),l=t.firstCreatePass&&CR(t),u=e[ct],d=DR(e),h=!0;if(i.type&3||o){let g=fn(i,e),v=o?o(g):g,E=d.length,S=o?O=>o(Qt(O[i.index])):i.index,N=null;if(!o&&a&&(N=Z$(t,e,r,i.index)),N!==null){let O=N.__ngLastListenerFn__||N;O.__ngNextListenerFn__=s,N.__ngLastListenerFn__=s,h=!1}else{s=bS(i,e,u,s,!1);let O=n.listen(v,r,s);d.push(s,O),l&&l.push(r,S,E,E+1)}}else s=bS(i,e,u,s,!1);let f=i.outputs,p;if(h&&f!==null&&(p=f[r])){let g=p.length;if(g)for(let v=0;v<g;v+=2){let E=p[v],S=p[v+1],K=e[E][S].subscribe(s),j=d.length;d.push(s,K),l&&l.push(r,i.index,j,-(j+1))}}}function IS(t,e,n,i){try{return Yn(6,e,n),n(i)!==!1}catch(r){return SR(t,r),!1}finally{Yn(7,e,n)}}function bS(t,e,n,i,r){return function s(o){if(o===Function)return i;let a=t.componentOffset>-1?ti(t.index,e):e;Av(a);let c=IS(e,n,i,o),l=s.__ngNextListenerFn__;for(;l;)c=IS(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return r&&c===!1&&o.preventDefault(),c}}function aa(t=1){return eB(t)}function X$(t,e){let n=null,i=vj(t);for(let r=0;r<e.length;r++){let s=e[r];if(s==="*"){n=r;continue}if(i===null?VS(t,s,!0):Ij(i,s))return r}return n}function KR(t){let e=ue()[hn][Xt];if(!e.projection){let n=t?t.length:1,i=e.projection=EB(n,null),r=i.slice(),s=e.child;for(;s!==null;){let o=t?X$(s,t):0;o!==null&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function QR(t,e=0,n){let i=ue(),r=He(),s=sa(r,nt+t,16,null,n||null);s.projection===null&&(s.projection=e),ev(),(!i[Qo]||rA())&&(s.flags&32)!==32&&pU(r,i,s)}function J$(){return this._results[Symbol.iterator]()}var Gh=class t{get changes(){return this._changes??=new Ee}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=J$)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=wB(e);(this._changesDetected=!vB(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},Fn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=nH;let t=e;return t})(),eH=Fn,tH=class extends eH{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=ff(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:i});return new Ds(r)}};function nH(){return gf(Dt(),ue())}function gf(t,e){return t.type&4?new tH(e,t,ra(t,e)):null}var O_=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},k_=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)JR(e,n).matches!==null&&this.queries[n].setDirty()}},Wh=class{constructor(e,n,i=null){this.predicate=e,this.flags=n,this.read=i}},F_=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},L_=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(e,n,iH(n,s)),this.matchTNodeWithReadOption(e,n,Dh(n,e,s,!1,!1))}else i===Fn?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Dh(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===we||r===mn||r===Fn&&n.type&4)this.addMatch(n.index,-2);else{let s=Dh(n,e,r,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function iH(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function rH(t,e){return t.type&11?ra(t,e):t.type&4?gf(t,e):null}function sH(t,e,n,i){return n===-1?rH(e,t):n===-2?oH(t,e,i):Is(t,t[Q],n,e)}function oH(t,e,n){if(n===we)return ra(e,t);if(n===Fn)return gf(e,t);if(n===mn)return kR(e,t)}function YR(t,e,n,i){let r=e[Xn].queries[i];if(r.matches===null){let s=t.data,o=n.matches,a=[];for(let c=0;c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(sH(e,u,o[c+1],n.metadata.read))}}r.matches=a}return r.matches}function V_(t,e,n,i){let r=t.queries.getByIndex(n),s=r.matches;if(s!==null){let o=YR(t,e,r,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)i.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let d=bt;d<u.length;d++){let h=u[d];h[Wc]===h[mt]&&V_(h[Q],h,l,i)}if(u[Zo]!==null){let d=u[Zo];for(let h=0;h<d.length;h++){let f=d[h];V_(f[Q],f,l,i)}}}}}return i}function aH(t,e){return t[Xn].queries[e].queryList}function ZR(t,e,n){let i=new Gh((n&4)===4);s2(t,e,i,i.destroy),e[Xn]===null&&(e[Xn]=new k_),e[Xn].queries.push(new O_(i))}function XR(t,e,n){t.queries===null&&(t.queries=new F_),t.queries.track(new L_(e,n))}function cH(t,e){let n=t.contentQueries||(t.contentQueries=[]),i=n.length?n[n.length-1]:-1;e!==i&&n.push(t.queries.length-1,e)}function JR(t,e){return t.queries.getByIndex(e)}function lH(t,e,n,i){let r=He();if(r.firstCreatePass){let s=Dt();XR(r,new Wh(e,n,i),s.index),cH(r,t),(n&2)===2&&(r.staticContentQueries=!0)}ZR(r,ue(),n)}function yf(t,e,n){let i=He();i.firstCreatePass&&(XR(i,new Wh(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),ZR(i,ue(),e)}function tl(t){let e=ue(),n=He(),i=cA();nv(i+1);let r=JR(n,i);if(t.dirty&&Lj(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let s=r.crossesNgTemplate?V_(n,e,i,[]):YR(n,e,r,i);t.reset(s,$U),t.notifyOnChanges()}return!0}return!1}function nl(){return aH(ue(),cA())}function uH(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}function Fre(t){let e=Kj();return JS(e,nt+t)}function ca(t,e=""){let n=ue(),i=He(),r=t+nt,s=i.firstCreatePass?sa(i,r,1,e,null):i.data[r],o=dH(i,n,s,e,t);n[r]=o,ef()&&af(i,n,o,s),Ts(s,!1)}var dH=(t,e,n,i,r)=>(tf(!0),XB(e[$e],i));function hH(t){return Ms("",t,""),hH}function Ms(t,e,n){let i=ue(),r=g$(i,t,e,n);return r!==ji&&D2(i,_r(),r),Ms}function fH(t,e,n){let i=He();if(i.firstCreatePass){let r=ki(t);j_(n,i.data,i.blueprint,r,!0),j_(e,i.data,i.blueprint,r,!1)}}function j_(t,e,n,i,r){if(t=Pt(t),Array.isArray(t))for(let s=0;s<t.length;s++)j_(t[s],e,n,i,r);else{let s=He(),o=ue(),a=Dt(),c=ea(t)?t:Pt(t.provide),l=OA(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(ea(t)||!t.multi){let f=new Es(l,r,R),p=jy(c,e,r?u:u+h,d);p===-1?(Yy(Oh(a,o),s,c),Vy(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{let f=jy(c,e,u+h,d),p=jy(c,e,u,u+h),g=f>=0&&n[f],v=p>=0&&n[p];if(r&&!v||!r&&!g){Yy(Oh(a,o),s,c);let E=gH(r?mH:pH,n.length,r,i,l);!r&&v&&(n[p].providerFactory=E),Vy(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(E),o.push(E)}else{let E=ex(n[r?p:f],l,!r&&i);Vy(s,t,f>-1?f:p,E)}!r&&i&&v&&n[p].componentProviders++}}}function Vy(t,e,n,i){let r=ea(e),s=AB(e);if(r||s){let c=(s?Pt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[i,c]):l[u+1].push(i,c)}else l.push(n,c)}}}function ex(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function jy(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function pH(t,e,n,i){return B_(this.multi,[])}function mH(t,e,n,i){let r=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Is(n,n[Q],this.providerFactory.index,i);s=a.slice(0,o),B_(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],B_(r,s);return s}function B_(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function gH(t,e,n,i,r){let s=new Es(t,n,R);return s.multi=[],s.index=e,s.componentProviders=0,ex(s,r,i&&!n),s}function gn(t,e=[]){return n=>{n.providersResolver=(i,r)=>fH(i,r?r(t):t,e)}}var yr=class{},zc=class{};var U_=class extends yr{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $h(this);let r=HS(e);this._bootstrapComponents=VA(r.bootstrap),this._r3Injector=kA(e,n,[{provide:yr,useValue:this},{provide:Er,useValue:this.componentFactoryResolver},...i],kt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},$_=class extends zc{constructor(e){super(),this.moduleType=e}create(e){return new U_(this.moduleType,e,[])}};var Kh=class extends yr{constructor(e){super(),this.componentFactoryResolver=new $h(this),this.instance=null;let n=new jc([...e.providers,{provide:yr,useValue:this},{provide:Er,useValue:this.componentFactoryResolver}],e.parent||dv(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function _f(t,e,n=null){return new Kh({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var yH=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=MA(!1,i.type),s=r.length>0?_f([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,s)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=D({token:e,providedIn:"environment",factory:()=>new e(y(Yt))});let t=e;return t})();function di(t){el("NgStandalone"),t.getStandaloneInjector=e=>e.get(yH).getOrCreateStandaloneInjector(t)}function tx(t,e,n,i){return nx(ue(),oA(),t,e,n,i)}function _H(t,e){let n=t[e];return n===ji?void 0:n}function nx(t,e,n,i,r,s){let o=e+n;return li(t,o,r)?h$(t,o+1,s?i.call(s,r):i(r)):_H(t,o+1)}function Lre(t,e){let n=He(),i,r=t+nt;n.firstCreatePass?(i=vH(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];let s=i.factory||(i.factory=vs(i.type,!0)),o,a=zt(R);try{let c=Ph(!1),l=s();return Ph(c),uH(n,ue(),r,l),l}finally{zt(a)}}function vH(t,e){if(e)for(let n=e.length-1;n>=0;n--){let i=e[n];if(t===i.name)return i}}function Vre(t,e,n){let i=t+nt,r=ue(),s=JS(r,i);return wH(r,i)?nx(r,oA(),e,s.transform,n,s):s.transform(n)}function wH(t,e){return t[Q].data[e].pure}function jre(t,e){return gf(t,e)}var ri=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},ix=new ri("17.1.0");var la=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),H_=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},vf=(()=>{let e=class e{compileModuleSync(i){return new $_(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),s=HS(i),o=VA(s.declarations).reduce((a,c)=>{let l=gr(c);return l&&a.push(new ta(l)),a},[]);return new H_(r,o)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var wf=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ke(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Vv=new x(""),il=new x(""),Ef=(()=>{let e=class e{constructor(i,r,s){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,jv||(EH(s),s.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{L.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb()}});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(i)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,s){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),i()},r)),this._callbacks.push({doneCb:i,timeoutId:o,updateCb:s})}whenStable(i,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,s){return[]}};e.\u0275fac=function(r){return new(r||e)(y(L),y(If),y(il))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),If=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return jv?.findTestabilityInTree(this,i,r)??null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function EH(t){jv=t}var jv,bf=new x("Application Initializer"),rx=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=C(bf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let s of this.appInits){let o=s();if(xs(o))i.push(o);else if(GR(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(s=>{this.reject(s)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Df=new x("appBootstrapListener");function IH(){nT(()=>{throw new T(600,!1)})}function bH(t){return t.isBoundToModule}function DH(t,e,n){try{let i=n();return xs(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var hi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=C(hR),this.afterRenderEffectManager=C(Mv),this.componentTypes=[],this.components=[],this.isStable=C(wf).hasPendingTasks.pipe(ee(i=>!i)),this._injector=C(Yt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let s=i instanceof jh;if(!this._injector.get(rx).done){let f=!s&&$S(i),p=!1;throw new T(405,p)}let a;s?a=i:a=this._injector.get(Er).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let c=bH(a)?void 0:this._injector.get(yr),l=r||a.selector,u=a.create(Me.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get(Vv,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),By(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new T(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{try{let i=this.afterRenderEffectManager.execute()}catch(i){this.internalErrorHandler(i)}this._runningTick=!1}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;By(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(Df,[]);[...this._bootstrapListeners,...r].forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>By(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new T(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function By(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var CH=(()=>{let e=class e{constructor(){this.zone=C(L),this.applicationRef=C(hi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function TH(t){return[{provide:L,useFactory:t},{provide:Jo,multi:!0,useFactory:()=>{let e=C(CH,{optional:!0});return()=>e.initialize()}},{provide:Jo,multi:!0,useFactory:()=>{let e=C(xH);return()=>{e.initialize()}}},{provide:hR,useFactory:SH}]}function SH(){let t=C(L),e=C(ii);return n=>t.runOutsideAngular(()=>e.handleError(n))}function AH(t){let e=TH(()=>new L(RH(t)));return rf([[],e])}function RH(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var xH=(()=>{let e=class e{constructor(){this.subscription=new Ae,this.initialized=!1,this.zone=C(L),this.pendingTasks=C(wf)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{L.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{L.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function MH(){return typeof $localize<"u"&&$localize.locale||qh}var ua=new x("LocaleId",{providedIn:"root",factory:()=>C(ua,he.Optional|he.SkipSelf)||MH()});var sx=new x("PlatformDestroyListeners");var Sh=null;function NH(t=[],e){return Me.create({name:e,providers:[{provide:sf,useValue:"platform"},{provide:sx,useValue:new Set([()=>Sh=null])},...t]})}function PH(t=[]){if(Sh)return Sh;let e=NH(t);return Sh=e,IH(),OH(e),e}function OH(t){t.get(hv,null)?.forEach(n=>n())}function Bre(){return!1}var ox=(()=>{let e=class e{constructor(i){}};e.\u0275fac=function(r){return new(r||e)(y(hi))},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})();function ax(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=PH(i),s=[AH(),...n||[]],a=new Kh({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(L);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(ii,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:f=>{l.handleError(f)}})});let d=()=>a.destroy(),h=r.get(sx);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),DH(l,c,()=>{let f=a.get(rx);return f.runInitializers(),f.donePromise.then(()=>{let p=a.get(ua,qh);Q$(p||qh);let g=a.get(hi);return e!==void 0&&g.bootstrap(e),g})})})}catch(e){return Promise.reject(e)}}function yn(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function cx(t){let e=gr(t);if(!e)return null;let n=new ta(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Hv=null;function pi(){return Hv}function px(t){Hv||(Hv=t)}var Cf=class{},Y=new x("DocumentToken"),Wv=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(FH),providedIn:"platform"});let t=e;return t})(),mx=new x("Location Initialized"),FH=(()=>{let e=class e extends Wv{constructor(){super(),this._doc=C(Y),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return pi().getBaseHref(this._doc)}onPopState(i){let r=pi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=pi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,s){this._history.pushState(i,r,s)}replaceState(i,r,s){this._history.replaceState(i,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Kv(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function lx(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function $i(t){return t&&t[0]!=="?"?"?"+t:t}var Hi=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(Qv),providedIn:"root"});let t=e;return t})(),gx=new x("appBaseHref"),Qv=(()=>{let e=class e extends Hi{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??C(Y).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return Kv(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+$i(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${r}${s}`:r}pushState(i,r,s,o){let a=this.prepareExternalUrl(s+$i(o));this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){let a=this.prepareExternalUrl(s+$i(o));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(y(Wv),y(gx,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yx=(()=>{let e=class e extends Hi{constructor(i,r){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let r=this._platformLocation.hash;return r==null&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(i){let r=Kv(this._baseHref,i);return r.length>0?"#"+r:r}pushState(i,r,s,o){let a=this.prepareExternalUrl(s+$i(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){let a=this.prepareExternalUrl(s+$i(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(y(Wv),y(gx,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),mi=(()=>{let e=class e{constructor(i){this._subject=new Ee,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=jH(lx(ux(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+$i(r))}normalize(i){return e.stripTrailingSlash(VH(this._basePath,ux(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",s=null){this._locationStrategy.pushState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+$i(r)),s)}replaceState(i,r="",s=null){this._locationStrategy.replaceState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+$i(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(s=>s(i,r))}subscribe(i,r,s){return this._subject.subscribe({next:i,error:r,complete:s})}};e.normalizeQueryParams=$i,e.joinWithSlash=Kv,e.stripTrailingSlash=lx,e.\u0275fac=function(r){return new(r||e)(y(Hi))},e.\u0275prov=D({token:e,factory:()=>LH(),providedIn:"root"});let t=e;return t})();function LH(){return new mi(y(Hi))}function VH(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function ux(t){return t.replace(/\/index.html$/,"")}function jH(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var _x=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(_x||{});var fi=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t.Infinity=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}(fi||{});function rl(t,e){let n=Lv(t),i=n[oa.NumberSymbols][e];if(typeof i>"u"){if(e===fi.CurrencyDecimal)return n[oa.NumberSymbols][fi.Decimal];if(e===fi.CurrencyGroup)return n[oa.NumberSymbols][fi.Group]}return i}function BH(t,e){return Lv(t)[oa.NumberFormats][e]}var UH=/^(\d+)?\.((\d+)(-(\d+))?)?$/,dx=22,Tf=".",sl="0",$H=";",HH=",",Bv="#";function zH(t,e,n,i,r,s,o=!1){let a="",c=!1;if(!isFinite(t))a=rl(n,fi.Infinity);else{let l=KH(t);o&&(l=WH(l));let u=e.minInt,d=e.minFrac,h=e.maxFrac;if(s){let S=s.match(UH);if(S===null)throw new Error(`${s} is not a valid digit info`);let N=S[1],O=S[3],K=S[5];N!=null&&(u=Uv(N)),O!=null&&(d=Uv(O)),K!=null?h=Uv(K):O!=null&&d>h&&(h=d)}QH(l,d,h);let f=l.digits,p=l.integerLen,g=l.exponent,v=[];for(c=f.every(S=>!S);p<u;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?v=f.splice(p,f.length):(v=f,f=[0]);let E=[];for(f.length>=e.lgSize&&E.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)E.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&E.unshift(f.join("")),a=E.join(rl(n,i)),v.length&&(a+=rl(n,r)+v.join("")),g&&(a+=rl(n,fi.Exponential)+"+"+g)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function qH(t,e,n){let i=BH(e,_x.Decimal),r=GH(i,rl(e,fi.MinusSign));return zH(t,r,e,fi.Group,fi.Decimal,n)}function GH(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split($H),r=i[0],s=i[1],o=r.indexOf(Tf)!==-1?r.split(Tf):[r.substring(0,r.lastIndexOf(sl)+1),r.substring(r.lastIndexOf(sl)+1)],a=o[0],c=o[1]||"";n.posPre=a.substring(0,a.indexOf(Bv));for(let u=0;u<c.length;u++){let d=c.charAt(u);d===sl?n.minFrac=n.maxFrac=u+1:d===Bv?n.maxFrac=u+1:n.posSuf+=d}let l=a.split(HH);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let u=r.length-n.posPre.length-n.posSuf.length,d=s.indexOf(Bv);n.negPre=s.substring(0,d).replace(/'/g,""),n.negSuf=s.slice(d+u).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function WH(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function KH(t){let e=Math.abs(t)+"",n=0,i,r,s,o,a;for((r=e.indexOf(Tf))>-1&&(e=e.replace(Tf,"")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),s=0;e.charAt(s)===sl;s++);if(s===(a=e.length))i=[0],r=1;else{for(a--;e.charAt(a)===sl;)a--;for(r-=s,i=[],o=0;s<=a;s++,o++)i[o]=Number(e.charAt(s))}return r>dx&&(i=i.splice(0,dx-1),n=r-1,r=1),{digits:i,exponent:n,integerLen:r}}function QH(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let i=t.digits,r=i.length-t.integerLen,s=Math.min(Math.max(e,r),n),o=s+t.integerLen,a=i[o];if(o>0){i.splice(Math.max(t.integerLen,o));for(let d=o;d<i.length;d++)i[d]=0}else{r=Math.max(0,r),t.integerLen=1,i.length=Math.max(1,o=s+1),i[0]=0;for(let d=1;d<o;d++)i[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[o-1]++;for(;r<Math.max(0,s);r++)i.push(0);let c=s!==0,l=e+t.integerLen,u=i.reduceRight(function(d,h,f,p){return h=h+d,p[f]=h<10?h:h-10,c&&(p[f]===0&&f>=l?p.pop():c=!1),h>=10?1:0},0);u&&(i.unshift(u),t.integerLen++)}function Uv(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function vx(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,s]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var $v=/\s+/,hx=[],ase=(()=>{let e=class e{constructor(i,r){this._ngEl=i,this._renderer=r,this.initialClasses=hx,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split($v):hx}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split($v):i}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let r of i)this._updateState(r,!0);else if(i!=null)for(let r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){let s=this.stateMap.get(i);s!==void 0?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let r=i[0],s=i[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(i,r){i=i.trim(),i.length>0&&i.split($v).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(r){return new(r||e)(R(we),R(Vi))},e.\u0275dir=Ie({type:e,selectors:[["","ngClass",""]],inputs:{klass:[fe.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var wx=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new zv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){fx("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){fx("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(R(mn),R(Fn))},e.\u0275dir=Ie({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),zv=class{constructor(){this.$implicit=null,this.ngIf=null}};function fx(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${kt(e)}'.`)}var cse=(()=>{let e=class e{constructor(i,r,s){this._ngEl=i,this._differs=r,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(i){this._ngStyle=i,!this._differ&&i&&(this._differ=this._differs.find(i).create())}ngDoCheck(){if(this._differ){let i=this._differ.diff(this._ngStyle);i&&this._applyChanges(i)}}_setStyle(i,r){let[s,o]=i.split("."),a=s.indexOf("-")===-1?void 0:ni.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${r}${o}`:r,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(i){i.forEachRemovedItem(r=>this._setStyle(r.key,null)),i.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),i.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}};e.\u0275fac=function(r){return new(r||e)(R(we),R(wv),R(Vi))},e.\u0275dir=Ie({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let t=e;return t})(),Ex=(()=>{let e=class e{constructor(i){this._viewContainerRef=i,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(i){if(this._shouldRecreateView(i)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let s=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(i){return!!i.ngTemplateOutlet||!!i.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(i,r,s)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,s):!1,get:(i,r,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,s)}})}};e.\u0275fac=function(r){return new(r||e)(R(mn))},e.\u0275dir=Ie({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Ft]});let t=e;return t})();function YH(t,e){return new T(2100,!1)}var lse=(()=>{let e=class e{constructor(i){this._locale=i}transform(i,r,s){if(!ZH(i))return null;s=s||this._locale;try{let o=XH(i);return qH(o,s,r)}catch(o){throw YH(e,o.message)}}};e.\u0275fac=function(r){return new(r||e)(R(ua,16))},e.\u0275pipe=jS({name:"number",type:e,pure:!0,standalone:!0});let t=e;return t})();function ZH(t){return!(t==null||t===""||t!==t)}function XH(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var Ns=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})(),Yv="browser",JH="server";function Zv(t){return t===Yv}function Xv(t){return t===JH}var Ix=(()=>{let e=class e{};e.\u0275prov=D({token:e,providedIn:"root",factory:()=>Zv(C(pn))?new qv(C(Y),window):new Gv});let t=e;return t})(),qv=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=ez(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}};function ez(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let s=r.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}var Gv=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Sf=class{};var tw=class extends Cf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},nw=class t extends tw{static makeCurrent(){px(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=tz();return n==null?null:nz(n)}resetBaseElement(){ol=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return vx(document.cookie,e)}},ol=null;function tz(){return ol=ol||document.querySelector("base"),ol?ol.getAttribute("href"):null}function nz(t){return new URL(t,document.baseURI).pathname}var iw=class{addToWindow(e){Je.getAngularTestability=(i,r=!0)=>{let s=e.findTestabilityInTree(i,r);if(s==null)throw new T(5103,!1);return s},Je.getAllAngularTestabilities=()=>e.getAllTestabilities(),Je.getAllAngularRootElements=()=>e.getAllRootElements();let n=i=>{let r=Je.getAllAngularTestabilities(),s=r.length,o=function(){s--,s==0&&i()};r.forEach(a=>{a.whenStable(o)})};Je.frameworkStabilizers||(Je.frameworkStabilizers=[]),Je.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,i){if(n==null)return null;let r=e.getTestability(n);return r??(i?pi().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},iz=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),Rf=new x("EventManagerPlugins"),Cx=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new T(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(y(Rf),y(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),al=class{constructor(e){this._doc=e}},Jv="ng-app-id",Tx=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Xv(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Jv}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(Jv),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Jv,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(y(Y),y(Yc),y(Zc,8),y(pn))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),ew={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ow=/%COMP%/g,Sx="%COMP%",rz=`_nghost-${Sx}`,sz=`_ngcontent-${Sx}`,oz=!0,az=new x("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>oz});function cz(t){return sz.replace(ow,t)}function lz(t){return rz.replace(ow,t)}function Ax(t,e){return e.map(n=>n.replace(ow,t))}var xf=(()=>{let e=class e{constructor(i,r,s,o,a,c,l,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Xv(c),this.defaultRenderer=new cl(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Jn.ShadowDom&&(r=ge(I({},r),{encapsulation:Jn.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof Mf?s.applyToHost(i):s instanceof ll&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Jn.Emulated:o=new Mf(l,u,r,this.appId,d,a,c,h);break;case Jn.ShadowDom:return new rw(l,u,i,r,a,c,this.nonce,h);default:o=new ll(l,u,r,d,a,c,h);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(y(Cx),y(Tx),y(Yc),y(az),y(Y),y(pn),y(L),y(Zc))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),cl=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(ew[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(bx(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(bx(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new T(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let s=ew[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=ew[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(ni.DashCase|ni.Important)?e.style.setProperty(n,i,r&ni.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&ni.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=pi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function bx(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var rw=class extends cl{constructor(e,n,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Ax(r.id,r.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ll=class extends cl{constructor(e,n,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?Ax(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Mf=class extends ll{constructor(e,n,i,r,s,o,a,c){let l=r+"-"+i.id;super(e,n,i,s,o,a,c,l),this.contentAttr=cz(l),this.hostAttr=lz(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},uz=(()=>{let e=class e extends al{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(y(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),Dx=["alt","control","meta","shift"],dz={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hz={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},fz=(()=>{let e=class e extends al{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>pi().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),Dx.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let s=dz[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Dx.forEach(a=>{if(a!==s){let c=hz[a];c(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(y(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function Rse(t,e){return ax(I({rootComponent:t},pz(e)))}function pz(t){return{appProviders:[...Rx,...t?.providers??[]],platformProviders:_z}}function mz(){nw.makeCurrent()}function gz(){return new ii}function yz(){return FA(document),document}var _z=[{provide:pn,useValue:Yv},{provide:hv,useValue:mz,multi:!0},{provide:Y,useFactory:yz,deps:[]}];var vz=new x(""),wz=[{provide:il,useClass:iw,deps:[]},{provide:Vv,useClass:Ef,deps:[L,If,il]},{provide:Ef,useClass:Ef,deps:[L,If,il]}],Rx=[{provide:sf,useValue:"root"},{provide:ii,useFactory:gz,deps:[]},{provide:Rf,useClass:uz,multi:!0,deps:[Y,L,pn]},{provide:Rf,useClass:fz,multi:!0,deps:[Y]},xf,Tx,Cx,{provide:bs,useExisting:xf},{provide:Sf,useClass:iz,deps:[]},[]],xx=(()=>{let e=class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:Yc,useValue:i.appId}]}}};e.\u0275fac=function(r){return new(r||e)(y(vz,12))},e.\u0275mod=re({type:e}),e.\u0275inj=ie({providers:[...Rx,...wz],imports:[Ns,ox]});let t=e;return t})();function Ez(){return new aw(y(Y))}var aw=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(y(Y))},e.\u0275prov=D({token:e,factory:function(r){let s=null;return r?s=new r:s=Ez(),s},providedIn:"root"});let t=e;return t})();var Iz={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},sw=new x("HammerGestureConfig"),Mx=new x("HammerLoader"),bz=(()=>{let e=class e{constructor(){this.events=[],this.overrides={}}buildHammer(i){let r=new Hammer(i,this.options);r.get("pinch").set({enable:!0}),r.get("rotate").set({enable:!0});for(let s in this.overrides)r.get(s).set(this.overrides[s]);return r}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),Dz=(()=>{let e=class e extends al{constructor(i,r,s,o){super(i),this._config=r,this.console=s,this.loader=o,this._loaderPromise=null}supports(i){return!(!Iz.hasOwnProperty(i.toLowerCase())&&!this.isCustomEvent(i)||!window.Hammer&&!this.loader)}addEventListener(i,r,s){let o=this.manager.getZone();if(r=r.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||o.runOutsideAngular(()=>this.loader());let a=!1,c=()=>{a=!0};return o.runOutsideAngular(()=>this._loaderPromise.then(()=>{if(!window.Hammer){c=()=>{};return}a||(c=this.addEventListener(i,r,s))}).catch(()=>{c=()=>{}})),()=>{c()}}return o.runOutsideAngular(()=>{let a=this._config.buildHammer(i),c=function(l){o.runGuarded(function(){s(l)})};return a.on(r,c),()=>{a.off(r,c),typeof a.destroy=="function"&&a.destroy()}})}isCustomEvent(i){return this._config.events.indexOf(i)>-1}};e.\u0275fac=function(r){return new(r||e)(y(Y),y(sw),y(la),y(Mx,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),xse=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({providers:[{provide:Rf,useClass:Dz,multi:!0,deps:[Y,sw,la,[new gt,Mx]]},{provide:sw,useClass:bz,deps:[]}]});let t=e;return t})();var le="primary",Cl=Symbol("RouteTitle"),hw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ma(t){return new hw(t)}function Tz(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=t[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Sz(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!gi(t[n],e[n]))return!1;return!0}function gi(t,e){let n=t?fw(t):void 0,i=e?fw(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!Bx(t[r],e[r]))return!1;return!0}function fw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Bx(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,s)=>i[s]===r)}else return t===e}function Sr(t){return ch(t)?t:xs(t)?Pe(Promise.resolve(t)):H(t)}var Az={exact:$x,subset:Hx},Ux={exact:Rz,subset:xz,ignored:()=>!0};function Nx(t,e,n){return Az[n.paths](t.root,e.root,n.matrixParams)&&Ux[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Rz(t,e){return gi(t,e)}function $x(t,e,n){if(!Os(t.segments,e.segments)||!Of(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!$x(t.children[i],e.children[i],n))return!1;return!0}function xz(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Bx(t[n],e[n]))}function Hx(t,e,n){return zx(t,e,e.segments,n)}function zx(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!Os(r,n)||e.hasChildren()||!Of(r,n,i))}else if(t.segments.length===n.length){if(!Os(t.segments,n)||!Of(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!Hx(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Os(t.segments,r)||!Of(t.segments,r,i)||!t.children[le]?!1:zx(t.children[le],e,s,i)}}function Of(t,e,n){return e.every((i,r)=>Ux[n](t[r].parameters,i.parameters))}var br=class{constructor(e=new be([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=ma(this.queryParams),this._queryParamMap}toString(){return Pz.serialize(this)}},be=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kf(this)}},Ps=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ma(this.parameters),this._parameterMap}toString(){return Gx(this)}};function Mz(t,e){return Os(t,e)&&t.every((n,i)=>gi(n.parameters,e[i].parameters))}function Os(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function Nz(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===le&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==le&&(n=n.concat(e(r,i)))}),n}var Tl=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>new gl,providedIn:"root"});let t=e;return t})(),gl=class{parse(e){let n=new mw(e);return new br(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ul(e.root,!0)}`,i=Fz(e.queryParams),r=typeof e.fragment=="string"?`#${Oz(e.fragment)}`:"";return`${n}${i}${r}`}},Pz=new gl;function kf(t){return t.segments.map(e=>Gx(e)).join("/")}function ul(t,e){if(!t.hasChildren())return kf(t);if(e){let n=t.children[le]?ul(t.children[le],!1):"",i=[];return Object.entries(t.children).forEach(([r,s])=>{r!==le&&i.push(`${r}:${ul(s,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=Nz(t,(i,r)=>r===le?[ul(t.children[le],!1)]:[`${r}:${ul(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[le]!=null?`${kf(t)}/${n[0]}`:`${kf(t)}/(${n.join("//")})`}}function qx(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nf(t){return qx(t).replace(/%3B/gi,";")}function Oz(t){return encodeURI(t)}function pw(t){return qx(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ff(t){return decodeURIComponent(t)}function Px(t){return Ff(t.replace(/\+/g,"%20"))}function Gx(t){return`${pw(t.path)}${kz(t.parameters)}`}function kz(t){return Object.entries(t).map(([e,n])=>`;${pw(e)}=${pw(n)}`).join("")}function Fz(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${Nf(n)}=${Nf(r)}`).join("&"):`${Nf(n)}=${Nf(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Lz=/^[^\/()?;#]+/;function cw(t){let e=t.match(Lz);return e?e[0]:""}var Vz=/^[^\/()?;=#]+/;function jz(t){let e=t.match(Vz);return e?e[0]:""}var Bz=/^[^=?&#]+/;function Uz(t){let e=t.match(Bz);return e?e[0]:""}var $z=/^[^&#]+/;function Hz(t){let e=t.match($z);return e?e[0]:""}var mw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new be([],{}):new be([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[le]=new be(e,n)),i}parseSegment(){let e=cw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new T(4009,!1);return this.capture(e),new Ps(Ff(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=jz(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=cw(this.remaining);r&&(i=r,this.capture(i))}e[Ff(n)]=Ff(i)}parseQueryParam(e){let n=Uz(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=Hz(this.remaining);o&&(i=o,this.capture(i))}let r=Px(n),s=Px(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=cw(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new T(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=le);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[le]:new be([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new T(4011,!1)}};function Wx(t){return t.segments.length>0?new be([],{[le]:t}):t}function Kx(t){let e={};for(let[i,r]of Object.entries(t.children)){let s=Kx(r);if(i===le&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let n=new be(t.segments,e);return zz(n)}function zz(t){if(t.numberOfChildren===1&&t.children[le]){let e=t.children[le];return new be(t.segments.concat(e.segments),e.children)}return t}function ga(t){return t instanceof br}function qz(t,e,n=null,i=null){let r=Qx(t);return Yx(r,e,n,i)}function Qx(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new be(s.url,o);return s===t&&(e=a),a}let i=n(t.root),r=Wx(i);return e??r}function Yx(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return lw(r,r,r,n,i);let s=Gz(e);if(s.toRoot())return lw(r,r,new be([],{}),n,i);let o=Wz(s,r,t),a=o.processChildren?fl(o.segmentGroup,o.index,s.commands):Xx(o.segmentGroup,o.index,s.commands);return lw(r,o.segmentGroup,a,n,i)}function Lf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function yl(t){return typeof t=="object"&&t!=null&&t.outlets}function lw(t,e,n,i,r){let s={};i&&Object.entries(i).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;t===e?o=n:o=Zx(t,e,n);let a=Wx(Kx(o));return new br(a,s,r)}function Zx(t,e,n){let i={};return Object.entries(t.children).forEach(([r,s])=>{s===e?i[r]=n:i[r]=Zx(s,e,n)}),new be(t.segments,i)}var Vf=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&Lf(i[0]))throw new T(4003,!1);let r=i.find(yl);if(r&&r!==i.at(-1))throw new T(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Gz(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Vf(!0,0,t);let e=0,n=!1,i=t.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new Vf(n,e,i)}var fa=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function Wz(t,e,n){if(t.isAbsolute)return new fa(e,!0,0);if(!n)return new fa(e,!1,NaN);if(n.parent===null)return new fa(n,!0,0);let i=Lf(t.commands[0])?0:1,r=n.segments.length-1+i;return Kz(n,r,t.numberOfDoubleDots)}function Kz(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new T(4005,!1);r=i.segments.length}return new fa(i,!1,r-s)}function Qz(t){return yl(t[0])?t[0].outlets:{[le]:t}}function Xx(t,e,n){if(t??=new be([],{}),t.segments.length===0&&t.hasChildren())return fl(t,e,n);let i=Yz(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let s=new be(t.segments.slice(0,i.pathIndex),{});return s.children[le]=new be(t.segments.slice(i.pathIndex),t.children),fl(s,0,r)}else return i.match&&r.length===0?new be(t.segments,{}):i.match&&!t.hasChildren()?gw(t,e,n):i.match?fl(t,0,r):gw(t,e,n)}function fl(t,e,n){if(n.length===0)return new be(t.segments,{});{let i=Qz(n),r={};if(Object.keys(i).some(s=>s!==le)&&t.children[le]&&t.numberOfChildren===1&&t.children[le].segments.length===0){let s=fl(t.children[le],e,n);return new be(t.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=Xx(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new be(t.segments,r)}}function Yz(t,e,n){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;let o=t.segments[r],a=n[i];if(yl(a))break;let c=`${a}`,l=i<n.length-1?n[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!kx(c,l,o))return s;i+=2}else{if(!kx(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function gw(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let s=n[r];if(yl(s)){let c=Zz(s.outlets);return new be(i,c)}if(r===0&&Lf(n[0])){let c=t.segments[e];i.push(new Ps(c.path,Ox(n[0]))),r++;continue}let o=yl(s)?s.outlets[le]:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&Lf(a)?(i.push(new Ps(o,Ox(a))),r+=2):(i.push(new Ps(o,{})),r++)}return new be(i,{})}function Zz(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=gw(new be([],{}),0,i))}),e}function Ox(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function kx(t,e,n){return t==n.path&&gi(e,n.parameters)}var pl="imperative",lt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(lt||{}),vn=class{constructor(e,n){this.id=e,this.url=n}},ya=class extends vn{constructor(e,n,i="imperative",r=null){super(e,n),this.type=lt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},yi=class extends vn{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=lt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},_n=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(_n||{}),jf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(jf||{}),Dr=class extends vn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=lt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Cr=class extends vn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=lt.NavigationSkipped}},_l=class extends vn{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=lt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Bf=class extends vn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=lt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yw=class extends vn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=lt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_w=class extends vn{constructor(e,n,i,r,s){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=lt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},vw=class extends vn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=lt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ww=class extends vn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=lt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ew=class{constructor(e){this.route=e,this.type=lt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Iw=class{constructor(e){this.route=e,this.type=lt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},bw=class{constructor(e){this.snapshot=e,this.type=lt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dw=class{constructor(e){this.snapshot=e,this.type=lt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cw=class{constructor(e){this.snapshot=e,this.type=lt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tw=class{constructor(e){this.snapshot=e,this.type=lt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uf=class{constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i,this.type=lt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},vl=class{},wl=class{constructor(e){this.url=e}};var Sw=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Sl,this.attachRef=null}},Sl=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new Sw,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$f=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Aw(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=Aw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Rw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Rw(e,this._root).map(n=>n.value)}};function Aw(t,e){if(t===e.value)return e;for(let n of e.children){let i=Aw(t,n);if(i)return i}return null}function Rw(t,e){if(t===e.value)return[e];for(let n of e.children){let i=Rw(t,n);if(i.length)return i.unshift(e),i}return[]}var Jt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ha(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Hf=class extends $f{constructor(e,n){super(e),this.snapshot=n,jw(this,e)}toString(){return this.snapshot.toString()}};function Jx(t){let e=Xz(t),n=new Ke([new Ps("",{})]),i=new Ke({}),r=new Ke({}),s=new Ke({}),o=new Ke(""),a=new Tr(n,i,s,o,r,le,t,e.root);return a.snapshot=e.root,new Hf(new Jt(a,[]),e)}function Xz(t){let e={},n={},i={},r="",s=new El([],e,i,r,n,le,t,null,{});return new zf("",new Jt(s,[]))}var Tr=class{constructor(e,n,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ee(l=>l[Cl]))??H(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>ma(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>ma(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Vw(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:I(I({},e.params),t.params),data:I(I({},e.data),t.data),resolve:I(I(I(I({},t.data),e.data),r?.data),t._resolvedData)}:i={params:I({},t.params),data:I({},t.data),resolve:I(I({},t.data),t._resolvedData??{})},r&&tM(r)&&(i.resolve[Cl]=r.title),i}var El=class{get title(){return this.data?.[Cl]}constructor(e,n,i,r,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ma(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ma(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},zf=class extends $f{constructor(e,n){super(n),this.url=e,jw(this,n)}toString(){return eM(this._root)}};function jw(t,e){e.value._routerState=t,e.children.forEach(n=>jw(t,n))}function eM(t){let e=t.children.length>0?` { ${t.children.map(eM).join(", ")} } `:"";return`${t.value}${e}`}function uw(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,gi(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),gi(e.params,n.params)||t.paramsSubject.next(n.params),Sz(e.url,n.url)||t.urlSubject.next(n.url),gi(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function xw(t,e){let n=gi(t.params,e.params)&&Mz(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||xw(t.parent,e.parent))}function tM(t){return typeof t.title=="string"||t.title===null}var Jz=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=le,this.activateEvents=new Ee,this.deactivateEvents=new Ee,this.attachEvents=new Ee,this.detachEvents=new Ee,this.parentContexts=C(Sl),this.location=C(mn),this.changeDetector=C(ci),this.environmentInjector=C(Yt),this.inputBinder=C(Kf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new T(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new T(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new T(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new T(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Mw(i,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ie({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ft]});let t=e;return t})(),Mw=class{constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===Tr?this.route:e===Sl?this.childContexts:this.parent.get(e,n)}},Kf=new x(""),Fx=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,s=fs([r.queryParams,r.params,r.data]).pipe(Kt(([o,a,c],l)=>(c=I(I(I({},o),a),c),l===0?H(c):Promise.resolve(c)))).subscribe(o=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let a=cx(r.component);if(!a){this.unsubscribeFromRouteData(i);return}for(let{templateName:c}of a.inputs)i.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(i,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function eq(t,e,n){let i=Il(t,e._root,n?n._root:void 0);return new Hf(i,e)}function Il(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=tq(t,e,n);return new Jt(i,r)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Il(t,a)),o}}let i=nq(e.value),r=e.children.map(s=>Il(t,s));return new Jt(i,r)}}function tq(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Il(t,i,r);return Il(t,i)})}function nq(t){return new Tr(new Ke(t.url),new Ke(t.params),new Ke(t.queryParams),new Ke(t.fragment),new Ke(t.data),t.outlet,t.component,t)}var nM="ngNavigationCancelingError";function iM(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=ga(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=rM(!1,_n.Redirect,e);return r.url=n,r.navigationBehaviorOptions=i,r}function rM(t,e,n){let i=new Error("NavigationCancelingError: "+(t||""));return i[nM]=!0,i.cancellationCode=e,n&&(i.url=n),i}function iq(t){return sM(t)&&ga(t.url)}function sM(t){return t&&t[nM]}var rq=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=oi({type:e,selectors:[["ng-component"]],standalone:!0,features:[di],decls:1,vars:0,template:function(r,s){r&1&&Ir(0,"router-outlet")},dependencies:[Jz],encapsulation:2});let t=e;return t})();function sq(t,e){return t.providers&&!t._injector&&(t._injector=_f(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Bw(t){let e=t.children&&t.children.map(Bw),n=e?ge(I({},t),{children:e}):I({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==le&&(n.component=rq),n}function _i(t){return t.outlet||le}function oq(t,e){let n=t.filter(i=>_i(i)===e);return n.push(...t.filter(i=>_i(i)!==e)),n}function Al(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var aq=(t,e,n,i)=>ee(r=>(new Nw(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),Nw=class{constructor(e,n,i,r,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),uw(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=ha(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=ha(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=ha(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=ha(n);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Tw(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Dw(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(uw(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),uw(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Al(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}},qf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},pa=class{constructor(e,n){this.component=e,this.route=n}};function cq(t,e,n){let i=t._root,r=e?e._root:null;return dl(i,r,n,[i.value])}function lq(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function va(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!SS(t)?t:e.get(t):i}function dl(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=ha(e);return t.children.forEach(o=>{uq(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ml(a,n.getContext(o),r)),r}function uq(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=dq(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new qf(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?dl(t,e,a?a.children:null,i,r):dl(t,e,n,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new pa(a.outlet.component,o))}else o&&ml(e,a,r),r.canActivateChecks.push(new qf(i)),s.component?dl(t,null,a?a.children:null,i,r):dl(t,null,n,i,r);return r}function dq(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Os(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Os(t.url,e.url)||!gi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xw(t,e)||!gi(t.queryParams,e.queryParams);case"paramsChange":default:return!xw(t,e)}}function ml(t,e,n){let i=ha(t),r=t.value;Object.entries(i).forEach(([s,o])=>{r.component?e?ml(o,e.children.getContext(s),n):ml(o,null,n):ml(o,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new pa(e.outlet.component,r)):n.canDeactivateChecks.push(new pa(null,r)):n.canDeactivateChecks.push(new pa(null,r))}function Rl(t){return typeof t=="function"}function hq(t){return typeof t=="boolean"}function fq(t){return t&&Rl(t.canLoad)}function pq(t){return t&&Rl(t.canActivate)}function mq(t){return t&&Rl(t.canActivateChild)}function gq(t){return t&&Rl(t.canDeactivate)}function yq(t){return t&&Rl(t.canMatch)}function oM(t){return t instanceof Oi||t?.name==="EmptyError"}var Pf=Symbol("INITIAL_VALUE");function _a(){return Kt(t=>fs(t.map(e=>e.pipe(Be(1),Mn(Pf)))).pipe(ee(e=>{for(let n of e)if(n!==!0){if(n===Pf)return Pf;if(n===!1||n instanceof br)return n}return!0}),Fe(e=>e!==Pf),Be(1)))}function _q(t,e){return ke(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?H(ge(I({},n),{guardsResult:!0})):vq(o,i,r,t).pipe(ke(a=>a&&hq(a)?wq(i,s,t,e):H(a)),ee(a=>ge(I({},n),{guardsResult:a})))})}function vq(t,e,n,i){return Pe(t).pipe(ke(r=>Cq(r.component,r.route,n,e,i)),Qn(r=>r!==!0,!0))}function wq(t,e,n,i){return Pe(e).pipe(ps(r=>Kn(Iq(r.route.parent,i),Eq(r.route,i),Dq(t,r.path,n),bq(t,r.route,n))),Qn(r=>r!==!0,!0))}function Eq(t,e){return t!==null&&e&&e(new Cw(t)),H(!0)}function Iq(t,e){return t!==null&&e&&e(new bw(t)),H(!0)}function bq(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return H(!0);let r=i.map(s=>ur(()=>{let o=Al(e)??n,a=va(s,o),c=pq(a)?a.canActivate(e,t):wr(o,()=>a(e,t));return Sr(c).pipe(Qn())}));return H(r).pipe(_a())}function Dq(t,e,n){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>lq(o)).filter(o=>o!==null).map(o=>ur(()=>{let a=o.guards.map(c=>{let l=Al(o.node)??n,u=va(c,l),d=mq(u)?u.canActivateChild(i,t):wr(l,()=>u(i,t));return Sr(d).pipe(Qn())});return H(a).pipe(_a())}));return H(s).pipe(_a())}function Cq(t,e,n,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return H(!0);let o=s.map(a=>{let c=Al(e)??r,l=va(a,c),u=gq(l)?l.canDeactivate(t,e,n,i):wr(c,()=>l(t,e,n,i));return Sr(u).pipe(Qn())});return H(o).pipe(_a())}function Tq(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return H(!0);let s=r.map(o=>{let a=va(o,t),c=fq(a)?a.canLoad(e,n):wr(t,()=>a(e,n));return Sr(c)});return H(s).pipe(_a(),aM(i))}function aM(t){return Hd(Qe(e=>{if(ga(e))throw iM(t,e)}),ee(e=>e===!0))}function Sq(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return H(!0);let s=r.map(o=>{let a=va(o,t),c=yq(a)?a.canMatch(e,n):wr(t,()=>a(e,n));return Sr(c)});return H(s).pipe(_a(),aM(i))}var bl=class{constructor(e){this.segmentGroup=e||null}},Gf=class extends Error{constructor(e){super(),this.urlTree=e}};function da(t){return Vo(new bl(t))}function Aq(t){return Vo(new T(4e3,!1))}function Rq(t){return Vo(rM(!1,_n.GuardRejected))}var Pw=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return H(i);if(r.numberOfChildren>1||!r.children[le])return Aq(e.redirectTo);r=r.children[le]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new Gf(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let s=this.createSegmentGroup(e,n.root,i,r);return new br(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[r]=n[a]}else i[r]=s}),i}createSegmentGroup(e,n,i,r){let s=this.createSegments(e,n.segments,i,r),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new be(s,o)}createSegments(e,n,i,r){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new T(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},Ow={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function xq(t,e,n,i,r){let s=Uw(t,e,n);return s.matched?(i=sq(e,i),Sq(i,e,n,r).pipe(ee(o=>o===!0?s:I({},Ow)))):H(s)}function Uw(t,e,n){if(e.path==="**")return Mq(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?I({},Ow):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||Tz)(n,t,e);if(!r)return I({},Ow);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?I(I({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function Mq(t){return{matched:!0,parameters:t.at(-1)?.parameters??{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Lx(t,e,n,i){return n.length>0&&Oq(t,n,i)?{segmentGroup:new be(e,Pq(i,new be(n,t.children))),slicedSegments:[]}:n.length===0&&kq(t,n,i)?{segmentGroup:new be(t.segments,Nq(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new be(t.segments,t.children),slicedSegments:n}}function Nq(t,e,n,i){let r={};for(let s of n)if(Qf(t,e,s)&&!i[_i(s)]){let o=new be([],{});r[_i(s)]=o}return I(I({},i),r)}function Pq(t,e){let n={};n[le]=e;for(let i of t)if(i.path===""&&_i(i)!==le){let r=new be([],{});n[_i(i)]=r}return n}function Oq(t,e,n){return n.some(i=>Qf(t,e,i)&&_i(i)!==le)}function kq(t,e,n){return n.some(i=>Qf(t,e,i))}function Qf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Fq(t,e,n,i){return _i(t)!==i&&(i===le||!Qf(e,n,t))?!1:Uw(e,t,n).matched}function Lq(t,e,n){return e.length===0&&!t.children[n]}var kw=class{};function Vq(t,e,n,i,r,s,o="emptyOnly"){return new Fw(t,e,n,i,r,o,s).recognize()}var jq=31,Fw=class{constructor(e,n,i,r,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Pw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new T(4002,`'${e.segmentGroup}'`)}recognize(){let e=Lx(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(n=>{let i=new El([],Object.freeze({}),Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,{},le,this.rootComponentType,null,{}),r=new Jt(i,n),s=new zf("",r),o=qz(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,le).pipe(dr(i=>{if(i instanceof Gf)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof bl?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=Vw(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(ee(s=>s instanceof Jt?[s]:[]))}processChildren(e,n,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return Pe(r).pipe(ps(s=>{let o=i.children[s],a=oq(n,s);return this.processSegmentGroup(e,a,o,s)}),mh((s,o)=>(s.push(...o),s)),hr(null),Ey(),ke(s=>{if(s===null)return da(i);let o=cM(s);return Bq(o),H(o)}))}processSegment(e,n,i,r,s,o){return Pe(n).pipe(ps(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,i,r,s,o).pipe(dr(c=>{if(c instanceof bl)return H(null);throw c}))),Qn(a=>!!a),dr(a=>{if(oM(a))return Lq(i,r,s)?H(new kw):da(i);throw a}))}processSegmentAgainstRoute(e,n,i,r,s,o,a){return Fq(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,s,o):da(r):da(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=Uw(n,r,s);if(!a)return da(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>jq&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,d).pipe(ke(h=>this.processSegment(e,i,n,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,i,r,s){let o=xq(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),o.pipe(Kt(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Kt(({routes:c})=>{let l=i._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new El(u,h,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,$q(i),_i(i),i.component??i._loadedComponent??null,i,Hq(i)),{segmentGroup:p,slicedSegments:g}=Lx(n,u,d,c);if(g.length===0&&p.hasChildren())return this.processChildren(l,c,p).pipe(ee(E=>E===null?null:new Jt(f,E)));if(c.length===0&&g.length===0)return H(new Jt(f,[]));let v=_i(i)===s;return this.processSegment(l,c,p,g,v?le:s,!0).pipe(ee(E=>new Jt(f,E instanceof Jt?[E]:[])))}))):da(n)))}getChildConfig(e,n,i){return n.children?H({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?H({routes:n._loadedRoutes,injector:n._loadedInjector}):Tq(e,n,i,this.urlSerializer).pipe(ke(r=>r?this.configLoader.loadChildren(e,n).pipe(Qe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):Rq(n))):H({routes:[],injector:e})}};function Bq(t){t.sort((e,n)=>e.value.outlet===le?-1:n.value.outlet===le?1:e.value.outlet.localeCompare(n.value.outlet))}function Uq(t){let e=t.value.routeConfig;return e&&e.path===""}function cM(t){let e=[],n=new Set;for(let i of t){if(!Uq(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=cM(i.children);e.push(new Jt(i.value,r))}return e.filter(i=>!n.has(i))}function $q(t){return t.data||{}}function Hq(t){return t.resolve||{}}function zq(t,e,n,i,r,s){return ke(o=>Vq(t,e,n,i,o.extractedUrl,r,s).pipe(ee(({state:a,tree:c})=>ge(I({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function qq(t,e){return ke(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return H(n);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of lM(c))o.add(l);let a=0;return Pe(o).pipe(ps(c=>s.has(c)?Gq(c,i,t,e):(c.data=Vw(c,c.parent,t).resolve,H(void 0))),Qe(()=>a++),Uo(1),ke(c=>a===o.size?H(n):$t))})}function lM(t){let e=t.children.map(n=>lM(n)).flat();return[t,...e]}function Gq(t,e,n,i){let r=t.routeConfig,s=t._resolve;return r?.title!==void 0&&!tM(r)&&(s[Cl]=r.title),Wq(s,t,e,i).pipe(ee(o=>(t._resolvedData=o,t.data=Vw(t,t.parent,n).resolve,null)))}function Wq(t,e,n,i){let r=fw(t);if(r.length===0)return H({});let s={};return Pe(r).pipe(ke(o=>Kq(t[o],e,n,i).pipe(Qn(),Qe(a=>{s[o]=a}))),Uo(1),Ac(s),dr(o=>oM(o)?$t:Vo(o)))}function Kq(t,e,n,i){let r=Al(e)??i,s=va(t,r),o=s.resolve?s.resolve(e,n):wr(r,()=>s(e,n));return Sr(o)}function dw(t){return Kt(e=>{let n=t(e);return n?Pe(n).pipe(ee(()=>e)):H(e)})}var uM=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===le);return r}getResolvedTitleForRoute(i){return i.data[Cl]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(Qq),providedIn:"root"});let t=e;return t})(),Qq=(()=>{let e=class e extends uM{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(y(aw))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xl=new x("",{providedIn:"root",factory:()=>({})}),Dl=new x("ROUTES"),$w=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=C(vf)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return H(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Sr(i.loadComponent()).pipe(ee(dM),Qe(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),xc(()=>{this.componentLoaders.delete(i)})),s=new rr(r,()=>new q).pipe(Oo());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return H({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Yq(r,this.compiler,i,this.onLoadEndListener).pipe(xc(()=>{this.childrenLoaders.delete(r)})),a=new rr(o,()=>new q).pipe(Oo());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Yq(t,e,n,i){return Sr(t.loadChildren()).pipe(ee(dM),ke(r=>r instanceof zc||Array.isArray(r)?H(r):Pe(e.compileModuleAsync(r))),ee(r=>{i&&i(t);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(n).injector,o=s.get(Dl,[],{optional:!0,self:!0}).flat()),{routes:o.map(Bw),injector:s}}))}function Zq(t){return t&&typeof t=="object"&&"default"in t}function dM(t){return Zq(t)?t.default:t}var Hw=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(Xq),providedIn:"root"});let t=e;return t})(),Xq=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hM=new x(""),fM=new x("");function Jq(t,e,n){let i=t.get(fM),r=t.get(Y);return t.get(L).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(l=>{s=l}),a=r.startViewTransition(()=>(s(),eG(t))),{onViewTransitionCreated:c}=i;return c&&wr(t,()=>c({transition:a,from:e,to:n})),o})}function eG(t){return new Promise(e=>{xv(e,{injector:t})})}var zw=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new q,this.transitionAbortSubject=new q,this.configLoader=C($w),this.environmentInjector=C(Yt),this.urlSerializer=C(Tl),this.rootContexts=C(Sl),this.location=C(mi),this.inputBindingEnabled=C(Kf,{optional:!0})!==null,this.titleStrategy=C(uM),this.options=C(xl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=C(Hw),this.createViewTransition=C(hM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>H(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Ew(s)),r=s=>this.events.next(new Iw(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(ge(I(I({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new Ke({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:pl,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Fe(o=>o.id!==0),ee(o=>ge(I({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Kt(o=>{this.currentTransition=o;let a=!1,c=!1;return H(o).pipe(Qe(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ge(I({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Kt(l=>{let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Cr(l.id,this.urlSerializer.serialize(l.rawUrl),h,jf.IgnoredSameUrlNavigation)),l.resolve(null),$t}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return H(l).pipe(Kt(h=>{let f=this.transitions?.getValue();return this.events.next(new ya(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?$t:Promise.resolve(h)}),zq(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Qe(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ge(I({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Bf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:g,extras:v}=l,E=new ya(h,this.urlSerializer.serialize(f),p,g);this.events.next(E);let S=Jx(this.rootComponentType).snapshot;return this.currentTransition=o=ge(I({},l),{targetSnapshot:S,urlAfterRedirects:f,extras:ge(I({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,H(o)}else{let h="";return this.events.next(new Cr(l.id,this.urlSerializer.serialize(l.extractedUrl),h,jf.IgnoredByUrlHandlingStrategy)),l.resolve(null),$t}}),Qe(l=>{let u=new yw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ee(l=>(this.currentTransition=o=ge(I({},l),{guards:cq(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),_q(this.environmentInjector,l=>this.events.next(l)),Qe(l=>{if(o.guardsResult=l.guardsResult,ga(l.guardsResult))throw iM(this.urlSerializer,l.guardsResult);let u=new _w(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Fe(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",_n.GuardRejected),!1)),dw(l=>{if(l.guards.canActivateChecks.length)return H(l).pipe(Qe(u=>{let d=new vw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Kt(u=>{let d=!1;return H(u).pipe(qq(this.paramsInheritanceStrategy,this.environmentInjector),Qe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",_n.NoDataFromResolver)}}))}),Qe(u=>{let d=new ww(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),dw(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Qe(f=>{d.component=f}),ee(()=>{})));for(let f of d.children)h.push(...u(f));return h};return fs(u(l.targetSnapshot.root)).pipe(hr(null),Be(1))}),dw(()=>this.afterPreactivation()),Kt(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?Pe(d).pipe(ee(()=>o)):H(o)}),ee(l=>{let u=eq(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ge(I({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),Qe(()=>{this.events.next(new vl)}),aq(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Be(1),Qe({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new yi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Nn(this.transitionAbortSubject.pipe(Qe(l=>{throw l}))),xc(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",_n.SupersededByNewNavigation),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),dr(l=>{if(c=!0,sM(l))this.events.next(new Dr(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),iq(l)?this.events.next(new wl(l.url)):o.resolve(!1);else{this.events.next(new _l(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return $t}))}))}cancelNavigationTransition(i,r,s){let o=new Dr(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function tG(t){return t!==pl}var nG=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(iG),providedIn:"root"});let t=e;return t})(),Lw=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},iG=(()=>{let e=class e extends Lw{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=vr(e)))(s||e)}})(),e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pM=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>C(rG),providedIn:"root"});let t=e;return t})(),rG=(()=>{let e=class e extends pM{constructor(){super(...arguments),this.location=C(mi),this.urlSerializer=C(Tl),this.options=C(xl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=C(Hw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new br,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Jx(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof ya)this.stateMemento=this.createStateMemento();else if(i instanceof Cr)this.rawUrlTree=r.initialUrl;else if(i instanceof Bf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof vl?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Dr&&(i.code===_n.GuardRejected||i.code===_n.NoDataFromResolver)?this.restoreHistory(r):i instanceof _l?this.restoreHistory(r,!0):i instanceof yi&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=I(I({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=I(I({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=vr(e)))(s||e)}})(),e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hl=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(hl||{});function mM(t,e){t.events.pipe(Fe(n=>n instanceof yi||n instanceof Dr||n instanceof _l||n instanceof Cr),ee(n=>n instanceof yi||n instanceof Cr?hl.COMPLETE:(n instanceof Dr?n.code===_n.Redirect||n.code===_n.SupersededByNewNavigation:!1)?hl.REDIRECTING:hl.FAILED),Fe(n=>n!==hl.REDIRECTING),Be(1)).subscribe(()=>{e()})}function sG(t){throw t}var oG={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Vn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=C(la),this.stateManager=C(pM),this.options=C(xl,{optional:!0})||{},this.pendingTasks=C(wf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=C(zw),this.urlSerializer=C(Tl),this.location=C(mi),this.urlHandlingStrategy=C(Hw),this._events=new q,this.errorHandler=this.options.errorHandler||sG,this.navigated=!1,this.routeReuseStrategy=C(nG),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=C(Dl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!C(Kf,{optional:!0}),this.eventsSubscription=new Ae,this.isNgZoneEnabled=C(L)instanceof L&&L.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Dr&&r.code!==_n.Redirect&&r.code!==_n.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof yi)this.navigated=!0;else if(r instanceof wl){let a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||tG(s.source)};this.scheduleNavigation(a,pl,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}lG(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=I({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Bw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=I(I({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=Qx(f)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),h=this.currentUrlTree.root}return Yx(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=ga(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,pl,null,r)}navigate(i,r={skipLocationChange:!1}){return cG(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=I({},oG):r===!1?s=I({},aG):s=r,ga(i))return Nx(this.currentUrlTree,i,s);let o=this.parseUrl(i);return Nx(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return mM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cG(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new T(4008,!1)}function lG(t){return!(t instanceof vl)&&!(t instanceof wl)}var Kse=(()=>{let e=class e{constructor(i,r,s,o,a,c){this.router=i,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new q,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=i.events.subscribe(u=>{u instanceof yi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i!=null?(this.commands=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(i,r,s,o,a){if(this.urlTree===null||this.isAnchorElement&&(i!==0||r||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(this.urlTree,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=this.urlTree!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let i=this.href===null?null:sR(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(i,r){let s=this.renderer,o=this.el.nativeElement;r!==null?s.setAttribute(o,i,r):s.removeAttribute(o,i)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(R(Vn),R(Tr),ov("tabindex"),R(Vi),R(we),R(Hi))},e.\u0275dir=Ie({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&Tt("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&ui("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[fe.HasDecoratorInputTransform,"preserveFragment","preserveFragment",yn],skipLocationChange:[fe.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",yn],replaceUrl:[fe.HasDecoratorInputTransform,"replaceUrl","replaceUrl",yn],routerLink:"routerLink"},standalone:!0,features:[Bi,Ft]});let t=e;return t})();var Wf=class{};var uG=(()=>{let e=class e{constructor(i,r,s,o,a){this.router=i,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Fe(i=>i instanceof yi),ps(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let s=[];for(let o of r){o.providers&&!o._injector&&(o._injector=_f(o.providers,i,`Route: ${o.path}`));let a=o._injector??i,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Pe(s).pipe(lr())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(i,r):s=H(null);let o=s.pipe(ke(a=>a===null?H(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return Pe([o,a]).pipe(lr())}else return o})}};e.\u0275fac=function(r){return new(r||e)(y(Vn),y(vf),y(Yt),y(Wf),y($w))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),gM=new x(""),dG=(()=>{let e=class e{constructor(i,r,s,o,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof ya?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof yi?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Cr&&i.code===jf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof Uf&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Uf(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){mR()},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function Qse(t,...e){return rf([{provide:Dl,multi:!0,useValue:t},[],{provide:Tr,useFactory:yM,deps:[Vn]},{provide:Df,multi:!0,useFactory:_M},e.map(n=>n.\u0275providers)])}function yM(t){return t.routerState.root}function Ml(t,e){return{\u0275kind:t,\u0275providers:e}}function _M(){let t=C(Me);return e=>{let n=t.get(hi);if(e!==n.components[0])return;let i=t.get(Vn),r=t.get(vM);t.get(qw)===1&&i.initialNavigation(),t.get(wM,null,he.Optional)?.setUpPreloading(),t.get(gM,null,he.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var vM=new x("",{factory:()=>new q}),qw=new x("",{providedIn:"root",factory:()=>1});function hG(){return Ml(2,[{provide:qw,useValue:0},{provide:bf,multi:!0,deps:[Me],useFactory:e=>{let n=e.get(mx,Promise.resolve());return()=>n.then(()=>new Promise(i=>{let r=e.get(Vn),s=e.get(vM);mM(r,()=>{i(!0)}),e.get(zw).afterPreactivation=()=>(i(!0),s.closed?H(void 0):s),r.initialNavigation()}))}}])}function fG(){return Ml(3,[{provide:bf,multi:!0,useFactory:()=>{let e=C(Vn);return()=>{e.setUpLocationChangeListener()}}},{provide:qw,useValue:2}])}var wM=new x("");function pG(t){return Ml(0,[{provide:wM,useExisting:uG},{provide:Wf,useExisting:t}])}function mG(){return Ml(8,[Fx,{provide:Kf,useExisting:Fx}])}function gG(t){let e=[{provide:hM,useValue:Jq},{provide:fM,useValue:I({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ml(9,e)}var Vx=new x("ROUTER_FORROOT_GUARD"),yG=[mi,{provide:Tl,useClass:gl},Vn,Sl,{provide:Tr,useFactory:yM,deps:[Vn]},$w,[]],Gw=(()=>{let e=class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[yG,[],{provide:Dl,multi:!0,useValue:i},{provide:Vx,useFactory:EG,deps:[[Vn,new gt,new lv]]},{provide:xl,useValue:r||{}},r?.useHash?vG():wG(),_G(),r?.preloadingStrategy?pG(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?IG(r):[],r?.bindToComponentInputs?mG().\u0275providers:[],r?.enableViewTransitions?gG().\u0275providers:[],bG()]}}static forChild(i){return{ngModule:e,providers:[{provide:Dl,multi:!0,useValue:i}]}}};e.\u0275fac=function(r){return new(r||e)(y(Vx,8))},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})();function _G(){return{provide:gM,useFactory:()=>{let t=C(Ix),e=C(L),n=C(xl),i=C(zw),r=C(Tl);return n.scrollOffset&&t.setOffset(n.scrollOffset),new dG(r,i,t,e,n)}}}function vG(){return{provide:Hi,useClass:yx}}function wG(){return{provide:Hi,useClass:Qv}}function EG(t){return"guarded"}function IG(t){return[t.initialNavigation==="disabled"?fG().\u0275providers:[],t.initialNavigation==="enabledBlocking"?hG().\u0275providers:[]]}var jx=new x("");function bG(){return[{provide:jx,useFactory:_M},{provide:Df,multi:!0,useExisting:jx}]}var Jse=(()=>{let e=class e{constructor(){this.executingCounter=oR(0),this.loadingStatus$=new Ke(!1)}get loading$(){return this.loadingStatus$.asObservable()}start(){this.executingCounter.update(i=>i+1),this.executingCounter()>0&&this.loadingStatus$.next(!0)}stop(){this.executingCounter()>0&&this.executingCounter.update(i=>i-1),this.executingCounter()<=0&&this.loadingStatus$.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var IM=function(t){let e=[],n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},CG=function(t){let e=[],n=0,i=0;for(;n<t.length;){let r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=t[n++],o=t[n++],a=t[n++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){let s=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,l=c?t[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),i.push(n[u],n[d],n[h],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(IM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):CG(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){let s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;let l=r<t.length?n[t.charAt(r)]:64;++r;let d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||l==null||d==null)throw new Kw;let h=s<<2|a>>4;if(i.push(h),l!==64){let f=a<<4&240|l>>2;if(i.push(f),d!==64){let p=l<<6&192|d;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Kw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},TG=function(t){let e=IM(t);return bM.encodeByteArray(e,!0)},Yw=function(t){return TG(t).replace(/\./g,"")},Zw=function(t){try{return bM.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function SG(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var AG=()=>SG().__FIREBASE_DEFAULTS__,RG=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xG=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Zw(t[1]);return e&&JSON.parse(e)},Zf=()=>{try{return AG()||RG()||xG()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},DM=t=>{var e,n;return(n=(e=Zf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]};var Xw=()=>{var t;return(t=Zf())===null||t===void 0?void 0:t.config},Jw=t=>{var e;return(e=Zf())===null||e===void 0?void 0:e[`_${t}`]};var Yf=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}};function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function MG(){var t;let e=(t=Zf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TM(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function SM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AM(){let t=ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function eE(){return!MG()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xf(){try{return typeof indexedDB=="object"}catch{return!1}}function RM(){return new Promise((t,e)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var NG="FirebaseError",en=class t extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=NG,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zi.prototype.create)}},zi=class{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){let i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?PG(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new en(r,a,i)}};function PG(t,e){return t.replace(OG,(n,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var OG=/\{\$([^}]+)}/g;function xM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ar(t,e){if(t===e)return!0;let n=Object.keys(t),i=Object.keys(e);for(let r of n){if(!i.includes(r))return!1;let s=t[r],o=e[r];if(EM(s)&&EM(o)){if(!Ar(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!n.includes(r))return!1;return!0}function EM(t){return t!==null&&typeof t=="object"}function wa(t){let e=[];for(let[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ea(t){let e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Ia(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function MM(t,e){let n=new Qw(t,e);return n.subscribe.bind(n)}var Qw=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");kG(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Ww),r.error===void 0&&(r.error=Ww),r.complete===void 0&&(r.complete=Ww);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function kG(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ww(){}var toe=4*60*60*1e3;function Ue(t){return t&&t._delegate?t._delegate:t}var wn=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ks="[DEFAULT]";var tE=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let i=new Yf;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LG(e))try{this.getOrInitializeService({instanceIdentifier:ks})}catch{}for(let[n,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return m(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ks){return this.instances.has(e)}getOptions(e=ks){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;let r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let i=this.onInitCallbacks.get(n);if(i)for(let r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:FG(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ks){return this.component?this.component.multipleInstances?e:ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function FG(t){return t===ks?void 0:t}function LG(t){return t.instantiationMode==="EAGER"}var Jf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new tE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var VG=[],pe=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(pe||{}),jG={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},BG=pe.INFO,UG={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},$G=(t,e,...n)=>{if(e<t.logLevel)return;let i=new Date().toISOString(),r=UG[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Rr=class{constructor(e){this.name=e,this._logLevel=BG,this._logHandler=$G,this._userLogHandler=null,VG.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jG[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};var HG=(t,e)=>e.some(n=>t instanceof n),NM,PM;function zG(){return NM||(NM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qG(){return PM||(PM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var OM=new WeakMap,iE=new WeakMap,kM=new WeakMap,nE=new WeakMap,sE=new WeakMap;function GG(t){let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(vi(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&OM.set(n,t)}).catch(()=>{}),sE.set(e,t),e}function WG(t){if(iE.has(t))return;let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});iE.set(t,e)}var rE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return iE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FM(t){rE=t(rE)}function KG(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let i=t.call(ep(this),e,...n);return kM.set(i,e.sort?e.sort():[e]),vi(i)}:qG().includes(t)?function(...e){return t.apply(ep(this),e),vi(OM.get(this))}:function(...e){return vi(t.apply(ep(this),e))}}function QG(t){return typeof t=="function"?KG(t):(t instanceof IDBTransaction&&WG(t),HG(t,zG())?new Proxy(t,rE):t)}function vi(t){if(t instanceof IDBRequest)return GG(t);if(nE.has(t))return nE.get(t);let e=QG(t);return e!==t&&(nE.set(t,e),sE.set(e,t)),e}var ep=t=>sE.get(t);function VM(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(t,e),a=vi(o);return i&&o.addEventListener("upgradeneeded",c=>{i(vi(o.result),c.oldVersion,c.newVersion,vi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var YG=["get","getKey","getAll","getAllKeys","count"],ZG=["put","add","delete","clear"],oE=new Map;function LM(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(oE.get(e))return oE.get(e);let n=e.replace(/FromIndex$/,""),i=e!==n,r=ZG.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||YG.includes(n)))return;let s=function(o,...a){return m(this,null,function*(){let c=this.transaction(o,r?"readwrite":"readonly"),l=c.store;return i&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),r&&c.done]))[0]})};return oE.set(e,s),s}FM(t=>ge(I({},t),{get:(e,n,i)=>LM(e,n)||t.get(e,n,i),has:(e,n)=>!!LM(e,n)||t.has(e,n)}));var cE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XG(n)){let i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}};function XG(t){let e=t.getComponent();return e?.type==="VERSION"}var lE="@firebase/app",jM="0.9.26";var Fs=new Rr("@firebase/app"),JG="@firebase/app-compat",eW="@firebase/analytics-compat",tW="@firebase/analytics",nW="@firebase/app-check-compat",iW="@firebase/app-check",rW="@firebase/auth",sW="@firebase/auth-compat",oW="@firebase/database",aW="@firebase/database-compat",cW="@firebase/functions",lW="@firebase/functions-compat",uW="@firebase/installations",dW="@firebase/installations-compat",hW="@firebase/messaging",fW="@firebase/messaging-compat",pW="@firebase/performance",mW="@firebase/performance-compat",gW="@firebase/remote-config",yW="@firebase/remote-config-compat",_W="@firebase/storage",vW="@firebase/storage-compat",wW="@firebase/firestore",EW="@firebase/firestore-compat",IW="firebase",bW="10.7.2";var uE="[DEFAULT]",DW={[lE]:"fire-core",[JG]:"fire-core-compat",[tW]:"fire-analytics",[eW]:"fire-analytics-compat",[iW]:"fire-app-check",[nW]:"fire-app-check-compat",[rW]:"fire-auth",[sW]:"fire-auth-compat",[oW]:"fire-rtdb",[aW]:"fire-rtdb-compat",[cW]:"fire-fn",[lW]:"fire-fn-compat",[uW]:"fire-iid",[dW]:"fire-iid-compat",[hW]:"fire-fcm",[fW]:"fire-fcm-compat",[pW]:"fire-perf",[mW]:"fire-perf-compat",[gW]:"fire-rc",[yW]:"fire-rc-compat",[_W]:"fire-gcs",[vW]:"fire-gcs-compat",[wW]:"fire-fst",[EW]:"fire-fst-compat","fire-js":"fire-js",[IW]:"fire-js-all"};var Nl=new Map,dE=new Map;function CW(t,e){try{t.container.addComponent(e)}catch(n){Fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mr(t){let e=t.name;if(dE.has(e))return Fs.debug(`There were multiple attempts to register component ${e}.`),!1;dE.set(e,t);for(let n of Nl.values())CW(n,t);return!0}function Ol(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var TW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},xr=new zi("app","Firebase",TW);var hE=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}};var Nr=bW;function mE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let i=Object.assign({name:uE,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw xr.create("bad-app-name",{appName:String(r)});if(n||(n=Xw()),!n)throw xr.create("no-options");let s=Nl.get(r);if(s){if(Ar(n,s.options)&&Ar(i,s.config))return s;throw xr.create("duplicate-app",{appName:r})}let o=new Jf(r);for(let c of dE.values())o.addComponent(c);let a=new hE(n,i,o);return Nl.set(r,a),a}function ba(t=uE){let e=Nl.get(t);if(!e&&t===uE&&Xw())return mE();if(!e)throw xr.create("no-app",{appName:t});return e}function tp(){return Array.from(Nl.values())}function rt(t,e,n){var i;let r=(i=DW[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fs.warn(a.join(" "));return}Mr(new wn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var SW="firebase-heartbeat-database",AW=1,Pl="firebase-heartbeat-store",aE=null;function HM(){return aE||(aE=VM(SW,AW,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pl)}catch(n){console.warn(n)}}}}).catch(t=>{throw xr.create("idb-open",{originalErrorMessage:t.message})})),aE}function RW(t){return m(this,null,function*(){try{return yield(yield HM()).transaction(Pl).objectStore(Pl).get(zM(t))}catch(e){if(e instanceof en)Fs.warn(e.message);else{let n=xr.create("idb-get",{originalErrorMessage:e?.message});Fs.warn(n.message)}}})}function BM(t,e){return m(this,null,function*(){try{let i=(yield HM()).transaction(Pl,"readwrite");yield i.objectStore(Pl).put(e,zM(t)),yield i.done}catch(n){if(n instanceof en)Fs.warn(n.message);else{let i=xr.create("idb-set",{originalErrorMessage:n?.message});Fs.warn(i.message)}}})}function zM(t){return`${t.name}!${t.options.appId}`}var xW=1024,MW=30*24*60*60*1e3,fE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new pE(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return m(this,null,function*(){var e,n;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=UM();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=MW}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return m(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=UM(),{heartbeatsToSend:i,unsentEntries:r}=NW(this._heartbeatsCache.heartbeats),s=Yw(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function UM(){return new Date().toISOString().substring(0,10)}function NW(t,e=xW){let n=[],i=t.slice();for(let r of t){let s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),$M(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),$M(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}var pE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return Xf()?RM().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield RW(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return BM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return BM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function $M(t){return Yw(JSON.stringify({version:2,heartbeats:t})).length}function PW(t){Mr(new wn("platform-logger",e=>new cE(e),"PRIVATE")),Mr(new wn("heartbeat",e=>new fE(e),"PRIVATE")),rt(lE,jM,t),rt(lE,jM,"esm2017"),rt("fire-js","")}PW("");var OW="firebase",kW="10.7.2";rt(OW,kW,"app");var Vs=new ri("ANGULARFIRE2_VERSION");function ip(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var kl=(t,e)=>{let n=e?[e]:tp(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Ca=class{constructor(){return kl(FW)}},FW="app-check";function Da(){}var np=class{zone;delegate;constructor(e,n=yy){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,i)}},gE=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Da,{},Da,Da)),n.pipe(Qe({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ta=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new np(Zone.current)),this.insideAngular=n.run(()=>new np(Zone.current,un)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(y(L))};static \u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function rp(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function LW(t){return rp().ngZone.runOutsideAngular(()=>t())}function Ls(t){return rp().ngZone.run(()=>t())}function VW(t){return jW(rp())(t)}function jW(t){return function(n){return n=n.lift(new gE(t.ngZone)),n.pipe(cr(t.outsideAngular),ar(t.insideAngular))}}var BW=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ls(()=>t.apply(void 0,i))},Ce=(t,e)=>function(){let n,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(n||=Ls(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Da,{},Da,Da))),i[s]=BW(i[s],n));let r=LW(()=>t.apply(this,i));if(!e)if(r instanceof W){let s=rp();return r.pipe(cr(s.outsideAngular),ar(s.insideAngular))}else return Ls(()=>r);return r instanceof W?r.pipe(VW):r instanceof Promise?Ls(()=>new Promise((s,o)=>r.then(a=>Ls(()=>s(a)),a=>Ls(()=>o(a))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:Ls(()=>r)};var qi=class{constructor(e){return e}},js=class{constructor(){return tp()}};function UW(t){return t&&t.length===1?t[0]:new qi(ba())}var yE=new x("angularfire2._apps"),$W={provide:qi,useFactory:UW,deps:[[new gt,yE]]},HW={provide:js,deps:[[new gt,yE]]};function zW(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new qi(i)}}var qW=(()=>{class t{constructor(n){rt("angularfire",Vs.full,"core"),rt("angularfire",Vs.full,"app"),rt("angular",ix.full,n.toString())}static \u0275fac=function(i){return new(i||t)(y(pn))};static \u0275mod=re({type:t});static \u0275inj=ie({providers:[$W,HW]})}return t})();function Voe(t,...e){return{ngModule:qW,providers:[{provide:yE,useFactory:zW(t),multi:!0,deps:[L,Me,Ta,...e]}]}}var joe=Ce(ba,!0);var Boe=Ce(mE,!0);function oN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var aN=oN,cN=new zi("auth","Firebase",oN());var up=new Rr("@firebase/auth");function GW(t,...e){up.logLevel<=pe.WARN&&up.warn(`Auth (${Nr}): ${t}`,...e)}function op(t,...e){up.logLevel<=pe.ERROR&&up.error(`Auth (${Nr}): ${t}`,...e)}function En(t,...e){throw LE(t,...e)}function wi(t,...e){return LE(t,...e)}function lN(t,e,n){let i=Object.assign(Object.assign({},aN()),{[e]:n});return new zi("auth","Firebase",i).create(e,{appName:t.name})}function WW(t,e,n){let i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&En(t,"argument-error"),lN(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function LE(t,...e){if(typeof t!="string"){let n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return cN.create(t,...e)}function X(t,e,...n){if(!t)throw LE(e,...n)}function Gi(t){let e="INTERNAL ASSERTION FAILED: "+t;throw op(e),new Error(e)}function Ki(t,e){t||Gi(e)}function wE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function KW(){return qM()==="http:"||qM()==="https:"}function qM(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function QW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KW()||TM()||"connection"in navigator)?navigator.onLine:!0}function YW(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Bs=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ki(n>e,"Short delay should be less than long delay!"),this.isMobile=CM()||SM()}get(){return QW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function VE(t,e){Ki(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var dp=class{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var ZW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var XW=new Bs(3e4,6e4);function Or(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function kr(s,o,a,c){return m(this,arguments,function*(t,e,n,i,r={}){return uN(t,r,()=>m(this,null,function*(){let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});let d=wa(Object.assign({key:t.config.apiKey},u)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),dp.fetch()(dN(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},l))}))})}function uN(t,e,n){return m(this,null,function*(){t._canInitEmulator=!1;let i=Object.assign(Object.assign({},ZW),e);try{let r=new EE(t),s=yield Promise.race([n(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw sp(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw sp(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw sp(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw sp(t,"user-disabled",o);let u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw lN(t,u,l);En(t,u)}}catch(r){if(r instanceof en)throw r;En(t,"network-request-failed",{message:String(r)})}})}function $l(s,o,a,c){return m(this,arguments,function*(t,e,n,i,r={}){let l=yield kr(t,e,n,i,r);return"mfaPendingCredential"in l&&En(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function dN(t,e,n,i){let r=`${e}${n}?${i}`;return t.config.emulator?VE(t.config,r):`${t.config.apiScheme}://${r}`}function JW(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var EE=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(wi(this.auth,"network-request-failed")),XW.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function sp(t,e,n){let i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let r=wi(t,e,i);return r.customData._tokenResponse=n,r}function GM(t){return t!==void 0&&t.enterprise!==void 0}var IE=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return JW(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function e4(t,e){return m(this,null,function*(){return kr(t,"GET","/v2/recaptchaConfig",Or(t,e))})}function t4(t,e){return m(this,null,function*(){return kr(t,"POST","/v1/accounts:delete",e)})}function n4(t,e){return m(this,null,function*(){return kr(t,"POST","/v1/accounts:lookup",e)})}function Fl(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function jE(t,e=!1){return m(this,null,function*(){let n=Ue(t),i=yield n.getIdToken(e),r=BE(i);X(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Fl(_E(r.auth_time)),issuedAtTime:Fl(_E(r.iat)),expirationTime:Fl(_E(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function _E(t){return Number(t)*1e3}function BE(t){let[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return op("JWT malformed, contained fewer than 3 sections"),null;try{let r=Zw(n);return r?JSON.parse(r):(op("Failed to decode base64 JWT payload"),null)}catch(r){return op("Caught error parsing JWT payload as JSON",r?.toString()),null}}function i4(t){let e=BE(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ll(t,e,n=!1){return m(this,null,function*(){if(n)return e;try{return yield e}catch(i){throw i instanceof en&&r4(i)&&t.auth.currentUser===t&&(yield t.auth.signOut()),i}})}function r4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var bE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),n)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var hp=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fl(this.lastLoginAt),this.creationTime=Fl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function fp(t){return m(this,null,function*(){var e;let n=t.auth,i=yield t.getIdToken(),r=yield Ll(t,n4(n,{idToken:i}));X(r?.users.length,n,"internal-error");let s=r.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?o4(s.providerUserInfo):[],a=s4(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new hp(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function UE(t){return m(this,null,function*(){let e=Ue(t);yield fp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function s4(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function o4(t){return t.map(e=>{var{providerId:n}=e,i=Xd(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function a4(t,e){return m(this,null,function*(){let n=yield uN(t,{},()=>m(this,null,function*(){let i=wa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=dN(t,r,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",dp.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function c4(t,e){return m(this,null,function*(){return kr(t,"POST","/v2/accounts:revokeToken",Or(t,e))})}var pp=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):i4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return m(this,null,function*(){return X(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return m(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield a4(e,n);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){let{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new t;return i&&(X(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(X(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(X(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Gi("not implemented")}};function Pr(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Vl=class t{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Xd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hp(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let n=yield Ll(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return jE(this,e)}reload(){return UE(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return m(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield fp(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){let e=yield this.getIdToken();return yield Ll(this,t4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,c,l,u;let d=(i=n.displayName)!==null&&i!==void 0?i:void 0,h=(r=n.email)!==null&&r!==void 0?r:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(l=n.createdAt)!==null&&l!==void 0?l:void 0,S=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:N,emailVerified:O,isAnonymous:K,providerData:j,stsTokenManager:ae}=n;X(N&&ae,e,"internal-error");let De=pp.fromJSON(this.name,ae);X(typeof N=="string",e,"internal-error"),Pr(d,e.name),Pr(h,e.name),X(typeof O=="boolean",e,"internal-error"),X(typeof K=="boolean",e,"internal-error"),Pr(f,e.name),Pr(p,e.name),Pr(g,e.name),Pr(v,e.name),Pr(E,e.name),Pr(S,e.name);let Mt=new t({uid:N,auth:e,email:h,emailVerified:O,displayName:d,isAnonymous:K,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:De,createdAt:E,lastLoginAt:S});return j&&Array.isArray(j)&&(Mt.providerData=j.map(Rn=>Object.assign({},Rn))),v&&(Mt._redirectEventId=v),Mt}static _fromIdTokenResponse(e,n,i=!1){return m(this,null,function*(){let r=new pp;r.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield fp(s),s})}};var WM=new Map;function Wi(t){Ki(t instanceof Function,"Expected a class definition");let e=WM.get(t);return e?(Ki(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,WM.set(t,e),e)}var l4=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(n,i){return m(this,null,function*(){this.storage[n]=i})}_get(n){return m(this,null,function*(){let i=this.storage[n];return i===void 0?null:i})}_remove(n){return m(this,null,function*(){delete this.storage[n]})}_addListener(n,i){}_removeListener(n,i){}}return t.type="NONE",t})(),DE=l4;function ap(t,e,n){return`firebase:${t}:${e}:${n}`}var mp=class t{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=ap(this.userKey,r.apiKey,s),this.fullPersistenceKey=ap("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Vl._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,i="authUser"){return m(this,null,function*(){if(!n.length)return new t(Wi(DE),e,i);let r=(yield Promise.all(n.map(l=>m(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=r[0]||Wi(DE),o=ap(i,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(o);if(u){let d=Vl._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,i):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>m(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,i))})}};function KM(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gN(e))return"Blackberry";if(yN(e))return"Webos";if($E(e))return"Safari";if((e.includes("chrome/")||fN(e))&&!e.includes("edge/"))return"Chrome";if(mN(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function hN(t=ze()){return/firefox\//i.test(t)}function $E(t=ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fN(t=ze()){return/crios\//i.test(t)}function pN(t=ze()){return/iemobile/i.test(t)}function mN(t=ze()){return/android/i.test(t)}function gN(t=ze()){return/blackberry/i.test(t)}function yN(t=ze()){return/webos/i.test(t)}function Cp(t=ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function u4(t=ze()){var e;return Cp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function d4(){return AM()&&document.documentMode===10}function _N(t=ze()){return Cp(t)||mN(t)||yN(t)||gN(t)||/windows phone/i.test(t)||pN(t)}function h4(){try{return!!(window&&window!==window.top)}catch{return!1}}function vN(t,e=[]){let n;switch(t){case"Browser":n=KM(ze());break;case"Worker":n=`${KM(ze())}-${t}`;break;default:n=t}let i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Nr}/${i}`}var CE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let i=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});i.onAbort=n,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let i of this.queue)yield i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(let r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function f4(n){return m(this,arguments,function*(t,e={}){return kr(t,"GET","/v2/passwordPolicy",Or(t,e))})}var p4=6,TE=class{constructor(e){var n,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:p4,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var SE=class{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gp(this),this.idTokenSubscription=new gp(this),this.beforeStateQueue=new CE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wi(n)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield mp.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return m(this,null,function*(){var n;let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return m(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield fp(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=YW()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){let n=e?Ue(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return m(this,null,function*(){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(Wi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield f4(this),n=new TE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zi("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},n)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),yield c4(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return m(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Wi(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=yield mp.create(this,[Wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var n,i;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,i,r);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(n["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n})}_getAppCheckToken(){return m(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&GW(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Fr(t){return Ue(t)}var gp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=MM(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};function m4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function wN(t){return new Promise((e,n)=>{let i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{let s=wi("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",m4().appendChild(i)})}function EN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var g4="https://www.google.com/recaptcha/enterprise.js?render=",y4="recaptcha-enterprise",_4="NO_RECAPTCHA",AE=class{constructor(e){this.type=y4,this.auth=Fr(e)}verify(e="verify",n=!1){return m(this,null,function*(){function i(s){return m(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>m(this,null,function*(){e4(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new IE(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function r(s,o,a){let c=window.grecaptcha;GM(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(_4)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&GM(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}wN(g4+a).then(()=>{r(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})})}};function QM(t,e,n,i=!1){return m(this,null,function*(){let r=new AE(t),s;try{s=yield r.verify(n)}catch{s=yield r.verify(n,!0)}let o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function RE(t,e,n,i){return m(this,null,function*(){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield QM(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(s=>m(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield QM(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)}))})}function HE(t,e){let n=Ol(t,"auth");if(n.isInitialized()){let r=n.getImmediate(),s=n.getOptions();if(Ar(s,e??{}))return r;En(r,"already-initialized")}return n.initialize({options:e})}function v4(t,e){let n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Wi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function zE(t,e,n){let i=Fr(t);X(i._canInitEmulator,i,"emulator-config-failed"),X(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!n?.disableWarnings,s=IN(e),{host:o,port:a}=w4(e),c=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||E4()}function IN(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function w4(t){let e=IN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:YM(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:YM(o)}}}function YM(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function E4(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Aa=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Gi("not implemented")}_getIdTokenResponse(e){return Gi("not implemented")}_linkToIdToken(e,n){return Gi("not implemented")}_getReauthenticationResolver(e){return Gi("not implemented")}};function I4(t,e){return m(this,null,function*(){return kr(t,"POST","/v1/accounts:signUp",e)})}function b4(t,e){return m(this,null,function*(){return $l(t,"POST","/v1/accounts:signInWithPassword",Or(t,e))})}function D4(t,e){return m(this,null,function*(){return $l(t,"POST","/v1/accounts:signInWithEmailLink",Or(t,e))})}function C4(t,e){return m(this,null,function*(){return $l(t,"POST","/v1/accounts:signInWithEmailLink",Or(t,e))})}var jl=class t extends Aa{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new t(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return m(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return RE(e,n,"signInWithPassword",b4);case"emailLink":return D4(e,{email:this._email,oobCode:this._password});default:En(e,"internal-error")}})}_linkToIdToken(e,n){return m(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return RE(e,i,"signUpPassword",I4);case"emailLink":return C4(e,{idToken:n,email:this._email,oobCode:this._password});default:En(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Sa(t,e){return m(this,null,function*(){return $l(t,"POST","/v1/accounts:signInWithIdp",Or(t,e))})}var T4="http://localhost",yp=class t extends Aa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):En("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Xd(n,["providerId","signInMethod"]);if(!i||!r)return null;let o=new t(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let n=this.buildRequest();return Sa(e,n)}_linkToIdToken(e,n){let i=this.buildRequest();return i.idToken=n,Sa(e,i)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Sa(e,n)}buildRequest(){let e={requestUri:T4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wa(n)}return e}};function S4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function A4(t){let e=Ea(Ia(t)).link,n=e?Ea(Ia(e)).deep_link_id:null,i=Ea(Ia(t)).deep_link_id;return(i?Ea(Ia(i)).link:null)||i||n||e||t}var _p=class t{constructor(e){var n,i,r,s,o,a;let c=Ea(Ia(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,u=(i=c.oobCode)!==null&&i!==void 0?i:null,d=S4((r=c.mode)!==null&&r!==void 0?r:null);X(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=A4(e);try{return new t(n)}catch{return null}}};var bN=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,i){return jl._fromEmailAndPassword(n,i)}static credentialWithLink(n,i){let r=_p.parseLink(i);return X(r,"argument-error"),jl._fromEmailAndCode(n,r.code,r.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Bl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var vp=class extends Bl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var qE=(()=>{class t extends vp{constructor(){super("google.com"),this.addScope("profile")}static credential(n,i){return yp._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:i})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:i,oauthAccessToken:r}=n;if(!i&&!r)return null;try{return t.credential(i,r)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();function R4(t,e){return m(this,null,function*(){return $l(t,"POST","/v1/accounts:signUp",Or(t,e))})}var Ra=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,i,r=!1){return m(this,null,function*(){let s=yield Vl._fromIdTokenResponse(e,i,r),o=ZM(i);return new t({user:s,providerId:o,_tokenResponse:i,operationType:n})})}static _forOperation(e,n,i){return m(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=ZM(i);return new t({user:e,providerId:r,_tokenResponse:i,operationType:n})})}};function ZM(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var xE=class t extends en{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new t(e,n,i,r)}};function DN(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?xE._fromErrorAndOperation(t,s,e,i):s})}function x4(t,e,n=!1){return m(this,null,function*(){let i=yield Ll(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Ra._forOperation(t,"link",i)})}function M4(t,e,n=!1){return m(this,null,function*(){let{auth:i}=t,r="reauthenticate";try{let s=yield Ll(t,DN(i,r,e,t),n);X(s.idToken,i,"internal-error");let o=BE(s.idToken);X(o,i,"internal-error");let{sub:a}=o;return X(t.uid===a,i,"user-mismatch"),Ra._forOperation(t,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&En(i,"user-mismatch"),s}})}function CN(t,e,n=!1){return m(this,null,function*(){let i="signIn",r=yield DN(t,i,e),s=yield Ra._fromIdTokenResponse(t,i,r);return n||(yield t._updateCurrentUser(s.user)),s})}function GE(t,e){return m(this,null,function*(){return CN(Fr(t),e)})}function TN(t){return m(this,null,function*(){let e=Fr(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function WE(t,e,n){return m(this,null,function*(){let i=Fr(t),o=yield RE(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",R4).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&TN(t),c}),a=yield Ra._fromIdTokenResponse(i,"signIn",o);return yield i._updateCurrentUser(a.user),a})}function KE(t,e,n){return GE(Ue(t),bN.credential(e,n)).catch(i=>m(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&TN(t),i}))}function QE(t,e,n,i){return Ue(t).onIdTokenChanged(e,n,i)}function YE(t,e,n){return Ue(t).beforeAuthStateChanged(e,n)}function ZE(t,e,n,i){return Ue(t).onAuthStateChanged(e,n,i)}function XE(t){return Ue(t).signOut()}var wp="__sak";var Ep=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wp,"1"),this.storage.removeItem(wp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function N4(){let t=ze();return $E(t)||Cp(t)}var P4=1e3,O4=10,k4=(()=>{class t extends Ep{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,i)=>this.onStorageEvent(n,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=N4()&&h4(),this.fallbackToPolling=_N(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&n(i,s,r)}}onStorageEvent(n,i=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let r=n.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(r);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(r,n.newValue):this.storage.removeItem(r);else if(this.localCache[r]===n.newValue&&!i)return}let s=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);d4()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,O4):s()}notifyListeners(n,i){this.localCache[n]=i;let r=this.listeners[n];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:i,newValue:r}),!0)})},P4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,i){return m(this,null,function*(){yield Gn(t.prototype,this,"_set").call(this,n,i),this.localCache[n]=JSON.stringify(i)})}_get(n){return m(this,null,function*(){let i=yield Gn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(i),i})}_remove(n){return m(this,null,function*(){yield Gn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),SN=k4;var F4=(()=>{class t extends Ep{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,i){}_removeListener(n,i){}}return t.type="SESSION",t})(),JE=F4;function L4(t){return Promise.all(t.map(e=>m(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var V4=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let i=this.receivers.find(s=>s.isListeningto(n));if(i)return i;let r=new t(n);return this.receivers.push(r),r}isListeningto(n){return this.eventTarget===n}handleEvent(n){return m(this,null,function*(){let i=n,{eventId:r,eventType:s,data:o}=i.data,a=this.handlersMap[s];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let c=Array.from(a).map(u=>m(this,null,function*(){return u(i.origin,o)})),l=yield L4(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})})}_subscribe(n,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(i)}_unsubscribe(n,i){this.handlersMap[n]&&i&&this.handlersMap[n].delete(i),(!i||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function eI(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}var ME=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,i=50){return m(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=eI("",20);r.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Ei(){return window}function j4(t){Ei().location.href=t}function AN(){return typeof Ei().WorkerGlobalScope<"u"&&typeof Ei().importScripts=="function"}function B4(){return m(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function U4(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $4(){return AN()?self:null}var RN="firebaseLocalStorageDb",H4=1,Ip="firebaseLocalStorage",xN="fbase_key",Us=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Tp(t,e){return t.transaction([Ip],e?"readwrite":"readonly").objectStore(Ip)}function z4(){let t=indexedDB.deleteDatabase(RN);return new Us(t).toPromise()}function NE(){let t=indexedDB.open(RN,H4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let i=t.result;try{i.createObjectStore(Ip,{keyPath:xN})}catch(r){n(r)}}),t.addEventListener("success",()=>m(this,null,function*(){let i=t.result;i.objectStoreNames.contains(Ip)?e(i):(i.close(),yield z4(),e(yield NE()))}))})}function XM(t,e,n){return m(this,null,function*(){let i=Tp(t,!0).put({[xN]:e,value:n});return new Us(i).toPromise()})}function q4(t,e){return m(this,null,function*(){let n=Tp(t,!1).get(e),i=yield new Us(n).toPromise();return i===void 0?null:i.value})}function JM(t,e){let n=Tp(t,!0).delete(e);return new Us(n).toPromise()}var G4=800,W4=3,K4=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return m(this,null,function*(){return this.db?this.db:(this.db=yield NE(),this.db)})}_withRetries(n){return m(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield n(r)}catch(r){if(i++>W4)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return m(this,null,function*(){return AN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return m(this,null,function*(){this.receiver=V4._getInstance($4()),this.receiver._subscribe("keyChanged",(n,i)=>m(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(n,i)=>m(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return m(this,null,function*(){var n,i;if(this.activeServiceWorker=yield B4(),!this.activeServiceWorker)return;this.sender=new ME(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((n=r[0])===null||n===void 0)&&n.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return m(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||U4()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return m(this,null,function*(){try{if(!indexedDB)return!1;let n=yield NE();return yield XM(n,wp,"1"),yield JM(n,wp),!0}catch{}return!1})}_withPendingWrite(n){return m(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,i){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(r=>XM(r,n,i)),this.localCache[n]=i,this.notifyServiceWorker(n)}))})}_get(n){return m(this,null,function*(){let i=yield this._withRetries(r=>q4(r,n));return this.localCache[n]=i,i})}_remove(n){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(i=>JM(i,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return m(this,null,function*(){let n=yield this._withRetries(s=>{let o=Tp(s,!1).getAll();return new Us(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(n,i){this.localCache[n]=i;let r=this.listeners[n];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>m(this,null,function*(){return this._poll()}),G4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),MN=K4;var Koe=EN("rcb"),Qoe=new Bs(3e4,6e4);function NN(t,e){return e?Wi(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Ul=class extends Aa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Sa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Sa(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function Q4(t){return CN(t.auth,new Ul(t),t.bypassAuthState)}function Y4(t){let{auth:e,user:n}=t;return X(n,e,"internal-error"),M4(n,new Ul(t),t.bypassAuthState)}function Z4(t){return m(this,null,function*(){let{auth:e,user:n}=t;return X(n,e,"internal-error"),x4(n,new Ul(t),t.bypassAuthState)})}var bp=class{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Q4;case"linkViaPopup":case"linkViaRedirect":return Z4;case"reauthViaPopup":case"reauthViaRedirect":return Y4;default:En(this.auth,"internal-error")}}resolve(e){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var X4=new Bs(2e3,1e4);function tI(t,e,n){return m(this,null,function*(){let i=Fr(t);WW(t,e,Bl);let r=NN(i,n);return new J4(i,"signInViaPopup",e,r).executeNotNull()})}var J4=(()=>{class t extends bp{constructor(n,i,r,s,o){super(n,i,s,o),this.provider=r,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return m(this,null,function*(){let n=yield this.execute();return X(n,this.auth,"internal-error"),n})}onExecution(){return m(this,null,function*(){Ki(this.filter.length===1,"Popup operations only handle one event");let n=eI();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(wi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(wi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,X4.get())};n()}}t.currentPopupAction=null;return t})(),e3="pendingRedirect",cp=new Map,PE=class t extends bp{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}execute(){return m(this,null,function*(){let e=cp.get(this.auth._key());if(!e){try{let i=(yield t3(this.resolver,this.auth))?yield Gn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}cp.set(this.auth._key(),e)}return this.bypassAuthState||cp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return m(this,null,function*(){if(e.type==="signInViaRedirect")return Gn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Gn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return m(this,null,function*(){})}cleanUp(){}};function t3(t,e){return m(this,null,function*(){let n=r3(e),i=i3(t);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(n))==="true";return yield i._remove(n),r})}function n3(t,e){cp.set(t._key(),e)}function i3(t){return Wi(t._redirectPersistence)}function r3(t){return ap(e3,t.config.apiKey,t.name)}function s3(t,e,n=!1){return m(this,null,function*(){let i=Fr(t),r=NN(i,e),o=yield new PE(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var o3=10*60*1e3,OE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!a3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!PN(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(wi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=o3&&this.cachedEventUids.clear(),this.cachedEventUids.has(eN(e))}saveEventToCache(e){this.cachedEventUids.add(eN(e)),this.lastProcessedEventTime=Date.now()}};function eN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function PN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function a3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PN(t);default:return!1}}function c3(n){return m(this,arguments,function*(t,e={}){return kr(t,"GET","/v1/projects",e)})}var l3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,u3=/^https?/;function d3(t){return m(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield c3(t);for(let n of e)try{if(h3(n))return}catch{}En(t,"unauthorized-domain")})}function h3(t){let e=wE(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!u3.test(n))return!1;if(l3.test(t))return i===t;let r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var f3=new Bs(3e4,6e4);function tN(){let t=Ei().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function p3(t){return new Promise((e,n)=>{var i,r,s;function o(){tN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tN(),n(wi(t,"network-request-failed"))},timeout:f3.get()})}if(!((r=(i=Ei().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Ei().gapi)===null||s===void 0)&&s.load)o();else{let a=EN("iframefcb");return Ei()[a]=()=>{gapi.load?o():n(wi(t,"network-request-failed"))},wN(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw lp=null,e})}var lp=null;function m3(t){return lp=lp||p3(t),lp}var g3=new Bs(5e3,15e3),y3="__/auth/iframe",_3="emulator/auth/iframe",v3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function E3(t){let e=t.config;X(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?VE(e,_3):`https://${t.config.authDomain}/${y3}`,i={apiKey:e.apiKey,appName:t.name,v:Nr},r=w3.get(t.config.apiHost);r&&(i.eid=r);let s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${wa(i).slice(1)}`}function I3(t){return m(this,null,function*(){let e=yield m3(t),n=Ei().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:E3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:v3,dontclear:!0},i=>new Promise((r,s)=>m(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=wi(t,"network-request-failed"),a=Ei().setTimeout(()=>{s(o)},g3.get());function c(){Ei().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})})))})}var b3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},D3=500,C3=600,T3="_blank",S3="http://localhost",Dp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function A3(t,e,n,i=D3,r=C3){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",c=Object.assign(Object.assign({},b3),{width:i.toString(),height:r.toString(),top:s,left:o}),l=ze().toLowerCase();n&&(a=fN(l)?T3:n),hN(l)&&(e=e||S3,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(u4(l)&&a!=="_self")return R3(e||"",a),new Dp(null);let d=window.open(e||"",a,u);X(d,t,"popup-blocked");try{d.focus()}catch{}return new Dp(d)}function R3(t,e){let n=document.createElement("a");n.href=t,n.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}var x3="__/auth/handler",M3="emulator/auth/handler",N3=encodeURIComponent("fac");function nN(t,e,n,i,r,s){return m(this,null,function*(){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Nr,eventId:r};if(e instanceof Bl){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",xM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof vp){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield t._getAppCheckToken(),l=c?`#${N3}=${encodeURIComponent(c)}`:"";return`${P3(t)}?${wa(a).slice(1)}${l}`})}function P3({config:t}){return t.emulator?VE(t,M3):`https://${t.authDomain}/${x3}`}var vE="webStorageSupport",kE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JE,this._completeRedirectFn=s3,this._overrideRedirectResult=n3}_openPopup(e,n,i,r){return m(this,null,function*(){var s;Ki((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield nN(e,n,i,wE(),r);return A3(e,o,eI())})}_openRedirect(e,n,i,r){return m(this,null,function*(){yield this._originValidation(e);let s=yield nN(e,n,i,wE(),r);return j4(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ki(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}initAndGetManager(e){return m(this,null,function*(){let n=yield I3(e),i=new OE(e);return n.register("authEvent",r=>(X(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vE,{type:vE},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[vE];o!==void 0&&n(!!o),En(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=d3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _N()||$E()||Cp()}},ON=kE;var iN="@firebase/auth",rN="1.5.1";var FE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function O3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function k3(t){Mr(new wn("auth",(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vN(t)},l=new SE(i,r,s,c);return v4(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Mr(new wn("auth-internal",e=>{let n=Fr(e.getProvider("auth").getImmediate());return(i=>new FE(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rt(iN,rN,O3(t)),rt(iN,rN,"esm2017")}var F3=5*60,L3=Jw("authIdTokenMaxAge")||F3,sN=null,V3=t=>e=>m(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>L3)return;let r=n?.token;sN!==r&&(sN=r,yield fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function nI(t=ba()){let e=Ol(t,"auth");if(e.isInitialized())return e.getImmediate();let n=HE(t,{popupRedirectResolver:ON,persistence:[MN,SN,JE]}),i=Jw("authTokenSyncURL");if(i){let s=V3(i);YE(n,s,()=>s(n.currentUser)),QE(n,o=>s(o))}let r=DM("auth");return r&&zE(n,`http://${r}`),n}k3("Browser");var kN="auth",$s=class{constructor(e){return e}},Hl=class{constructor(){return kl(kN)}};var iI=new x("angularfire2.auth-instances");function T9(t,e){let n=ip(kN,t,e);return n&&new $s(n)}function S9(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new $s(i)}}var A9={provide:Hl,deps:[[new gt,iI]]},R9={provide:$s,useFactory:T9,deps:[[new gt,iI],qi]},x9=(()=>{class t{constructor(){rt("angularfire",Vs.full,"auth")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=re({type:t});static \u0275inj=ie({providers:[R9,A9]})}return t})();function xae(t,...e){return{ngModule:x9,providers:[{provide:iI,useFactory:S9(t),multi:!0,deps:[L,Me,Ta,js,[new gt,Ca],...e]}]}}var FN=Ce(WE,!0);var rI=Ce(nI,!0);var LN=Ce(ZE,!0);var VN=Ce(KE,!0);var jN=Ce(tI,!0);var BN=Ce(XE,!0);var Pae=(()=>{let e=class e{constructor(i,r,s){this.auth=i,this.ngZone=r,this.router=s,LN(this.auth,o=>{o&&(this.UserData=o)})}get userUid(){return rI().currentUser?.uid||""}getAuthFire(){return this.auth.currentUser}Register(i,r){return FN(this.auth,i,r).then(s=>{this.UserData=s.user,this.ngZone.run(()=>{this.sendEmailVerification(),this.router.navigate(["/signIn"])})}).catch(s=>{window.alert(s.message)})}sendEmailVerification(){throw new Error("Method not implemented.")}Login(i,r){return VN(this.auth,i,r).then(s=>{this.UserData=s.user,this.ngZone.run(()=>{this.router.navigate(["/"])})}).catch(s=>{window.alert(s.message)})}googleSignIn(){return this.loginWithPopup(new qE)}loginWithPopup(i){return jN(this.auth,i).then(r=>(console.log("logged in",r),r)).catch(r=>{console.log(r)})}logout(){BN(this.auth).then(()=>this.router.navigate(["/signIn"]))}isSignedIn(){return rI().currentUser!==null}};e.\u0275fac=function(r){return new(r||e)(y($s),y(L),y(Vn))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var N9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bn={},M,TI=TI||{},ne=N9||self;function Bp(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function iu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function P9(t){return Object.prototype.hasOwnProperty.call(t,sI)&&t[sI]||(t[sI]=++O9)}var sI="closure_uid_"+(1e9*Math.random()>>>0),O9=0;function k9(t,e,n){return t.call.apply(t.bind,arguments)}function F9(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function St(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?St=k9:St=F9,St.apply(null,arguments)}function Sp(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function dt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Lr(){this.s=this.s,this.o=this.o}var L9=0;Lr.prototype.s=!1;Lr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),L9!=0)&&P9(this)};Lr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var JN=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function SI(t){let e=t.length;if(0<e){let n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function UN(t,e){for(let n=1;n<arguments.length;n++){let i=arguments[n];if(Bp(i)){let r=t.length||0,s=i.length||0;t.length=r+s;for(let o=0;o<s;o++)t[r+o]=i[o]}else t.push(i)}}function At(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var V9=function(){if(!ne.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};ne.addEventListener("test",n,e),ne.removeEventListener("test",n,e)}catch{}return t}();function Ql(t){return/^[\s\xa0]*$/.test(t)}function Up(){var t=ne.navigator;return t&&(t=t.userAgent)?t:""}function Ii(t){return Up().indexOf(t)!=-1}function AI(t){return AI[" "](t),t}AI[" "]=function(){};function j9(t,e){var n=S6;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var B9=Ii("Opera"),Pa=Ii("Trident")||Ii("MSIE"),eP=Ii("Edge"),uI=eP||Pa,tP=Ii("Gecko")&&!(Up().toLowerCase().indexOf("webkit")!=-1&&!Ii("Edge"))&&!(Ii("Trident")||Ii("MSIE"))&&!Ii("Edge"),U9=Up().toLowerCase().indexOf("webkit")!=-1&&!Ii("Edge");function nP(){var t=ne.document;return t?t.documentMode:void 0}var dI;e:{if(Ap="",Rp=function(){var t=Up();if(tP)return/rv:([^\);]+)(\)|;)/.exec(t);if(eP)return/Edge\/([\d\.]+)/.exec(t);if(Pa)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(U9)return/WebKit\/(\S+)/.exec(t);if(B9)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Rp&&(Ap=Rp?Rp[1]:""),Pa&&(xp=nP(),xp!=null&&xp>parseFloat(Ap))){dI=String(xp);break e}dI=Ap}var Ap,Rp,xp,hI;ne.document&&Pa?(oI=nP(),hI=oI||parseInt(dI,10)||void 0):hI=void 0;var oI,$9=hI;function Yl(t,e){if(At.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(tP){e:{try{AI(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:H9[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Yl.$.h.call(this)}}dt(Yl,At);var H9={2:"touch",3:"pen",4:"mouse"};Yl.prototype.h=function(){Yl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ru="closure_listenable_"+(1e6*Math.random()|0),z9=0;function q9(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++z9,this.fa=this.ia=!1}function $p(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function RI(t,e,n){for(let i in t)e.call(n,t[i],i,t)}function G9(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function iP(t){let e={};for(let n in t)e[n]=t[n];return e}var $N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rP(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<$N.length;s++)n=$N[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Hp(t){this.src=t,this.g={},this.h=0}Hp.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=pI(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new q9(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};function fI(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=JN(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&($p(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function pI(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}var xI="closure_lm_"+(1e6*Math.random()|0),aI={};function sP(t,e,n,i,r){if(i&&i.once)return aP(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)sP(t,e[s],n,i,r);return null}return n=PI(n),t&&t[ru]?t.O(e,n,iu(i)?!!i.capture:!!i,r):oP(t,e,n,!1,i,r)}function oP(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=iu(r)?!!r.capture:!!r,a=NI(t);if(a||(t[xI]=a=new Hp(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=W9(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)V9||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(lP(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function W9(){function t(n){return e.call(t.src,t.listener,n)}let e=K9;return t}function aP(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)aP(t,e[s],n,i,r);return null}return n=PI(n),t&&t[ru]?t.P(e,n,iu(i)?!!i.capture:!!i,r):oP(t,e,n,!0,i,r)}function cP(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)cP(t,e[s],n,i,r);else i=iu(i)?!!i.capture:!!i,n=PI(n),t&&t[ru]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=pI(s,n,i,r),-1<n&&($p(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=NI(t))&&(e=t.g[e.toString()],t=-1,e&&(t=pI(e,n,i,r)),(n=-1<t?e[t]:null)&&MI(n))}function MI(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ru])fI(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(lP(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=NI(e))?(fI(n,t),n.h==0&&(n.src=null,e[xI]=null)):$p(t)}}}function lP(t){return t in aI?aI[t]:aI[t]="on"+t}function K9(t,e){if(t.fa)t=!0;else{e=new Yl(e,this);var n=t.listener,i=t.la||t.src;t.ia&&MI(t),t=n.call(i,e)}return t}function NI(t){return t=t[xI],t instanceof Hp?t:null}var cI="__closure_events_fn_"+(1e9*Math.random()>>>0);function PI(t){return typeof t=="function"?t:(t[cI]||(t[cI]=function(e){return t.handleEvent(e)}),t[cI])}function ut(){Lr.call(this),this.i=new Hp(this),this.S=this,this.J=null}dt(ut,Lr);ut.prototype[ru]=!0;ut.prototype.removeEventListener=function(t,e,n,i){cP(this,t,e,n,i)};function _t(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new At(e,t);else if(e instanceof At)e.target=e.target||t;else{var r=e;e=new At(i,t),rP(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=Mp(o,i,!0,e)&&r}if(o=e.g=t,r=Mp(o,i,!0,e)&&r,r=Mp(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=Mp(o,i,!1,e)&&r}ut.prototype.N=function(){if(ut.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)$p(n[i]);delete t.g[e],t.h--}}this.J=null};ut.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};ut.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function Mp(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&fI(t.i,o),r=a.call(c,i)!==!1&&r}}return r&&!i.defaultPrevented}var OI=ne.JSON.stringify,mI=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function Q9(){var t=kI;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var gI=class{constructor(){this.h=this.g=null}add(e,n){let i=uP.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}},uP=new mI(()=>new yI,t=>t.reset()),yI=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function Y9(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Z9(t){ne.setTimeout(()=>{throw t},0)}var Zl,Xl=!1,kI=new gI,dP=()=>{let t=ne.Promise.resolve(void 0);Zl=()=>{t.then(X9)}},X9=()=>{for(var t;t=Q9();){try{t.h.call(t.g)}catch(n){Z9(n)}var e=uP;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Xl=!1};function zp(t,e){ut.call(this),this.h=t||1,this.g=e||ne,this.j=St(this.qb,this),this.l=Date.now()}dt(zp,ut);M=zp.prototype;M.ga=!1;M.T=null;M.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),_t(this,"tick"),this.ga&&(FI(this),this.start()))}};M.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function FI(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}M.N=function(){zp.$.N.call(this),FI(this),delete this.g};function LI(t,e,n){if(typeof t=="function")n&&(t=St(t,n));else if(t&&typeof t.handleEvent=="function")t=St(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ne.setTimeout(t,e||0)}function hP(t){t.g=LI(()=>{t.g=null,t.i&&(t.i=!1,hP(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var _I=class extends Lr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:hP(this)}N(){super.N(),this.g&&(ne.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Jl(t){Lr.call(this),this.h=t,this.g={}}dt(Jl,Lr);var HN=[];function fP(t,e,n,i){Array.isArray(n)||(n&&(HN[0]=n.toString()),n=HN);for(var r=0;r<n.length;r++){var s=sP(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function pP(t){RI(t.g,function(e,n){this.g.hasOwnProperty(n)&&MI(e)},t),t.g={}}Jl.prototype.N=function(){Jl.$.N.call(this),pP(this)};Jl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function qp(){this.g=!0}qp.prototype.Ea=function(){this.g=!1};function J9(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function e6(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+o})}function Ma(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+n6(t,n)+(i?" "+i:"")})}function t6(t,e){t.info(function(){return"TIMEOUT: "+e})}qp.prototype.info=function(){};function n6(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return OI(n)}catch{return e}}var Gs={},zN=null;function Gp(){return zN=zN||new ut}Gs.Ta="serverreachability";function mP(t){At.call(this,Gs.Ta,t)}dt(mP,At);function eu(t){let e=Gp();_t(e,new mP(e))}Gs.STAT_EVENT="statevent";function gP(t,e){At.call(this,Gs.STAT_EVENT,t),this.stat=e}dt(gP,At);function Vt(t){let e=Gp();_t(e,new gP(e,t))}Gs.Ua="timingevent";function yP(t,e){At.call(this,Gs.Ua,t),this.size=e}dt(yP,At);function su(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ne.setTimeout(function(){t()},e)}var Wp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},_P={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function VI(){}VI.prototype.h=null;function qN(t){return t.h||(t.h=t.i())}function vP(){}var ou={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function jI(){At.call(this,"d")}dt(jI,At);function BI(){At.call(this,"c")}dt(BI,At);var vI;function Kp(){}dt(Kp,VI);Kp.prototype.g=function(){return new XMLHttpRequest};Kp.prototype.i=function(){return{}};vI=new Kp;function au(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Jl(this),this.P=i6,t=uI?125:void 0,this.V=new zp(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new wP}function wP(){this.i=null,this.g="",this.h=!1}var i6=45e3,EP={},wI={};M=au.prototype;M.setTimeout=function(t){this.P=t};function EI(t,e,n){t.L=1,t.A=Yp(Yi(e)),t.u=n,t.S=!0,IP(t,null)}function IP(t,e){t.G=Date.now(),cu(t),t.B=Yi(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),xP(n.i,"t",i),t.o=0,n=t.l.J,t.h=new wP,t.g=ZP(t.l,n?e:null,!t.u),0<t.O&&(t.M=new _I(St(t.Pa,t,t.g),t.O)),fP(t.U,t.g,"readystatechange",t.nb),e=t.I?iP(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),eu(),J9(t.j,t.v,t.B,t.m,t.W,t.u)}M.nb=function(t){t=t.target;let e=this.M;e&&bi(t)==3?e.l():this.Pa(t)};M.Pa=function(t){try{if(t==this.g)e:{let u=bi(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||uI||this.g&&(this.h.h||this.g.ja()||QN(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?eu(3):eu(2)),Qp(this);var n=this.g.da();this.ca=n;t:if(bP(this)){var i=QN(this.g);t="";var r=i.length,s=bi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hs(this),Kl(this);var o="";break t}this.h.i=new ne.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,e6(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ql(a)){var l=a;break t}}l=null}if(n=l)Ma(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,II(this,n);else{this.i=!1,this.s=3,Vt(12),Hs(this),Kl(this);break e}}this.S?(DP(this,u,o),uI&&this.i&&u==3&&(fP(this.U,this.V,"tick",this.mb),this.V.start())):(Ma(this.j,this.m,o,null),II(this,o)),u==4&&Hs(this),this.i&&!this.J&&(u==4?WP(this.l,this):(this.i=!1,cu(this)))}else D6(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),Hs(this),Kl(this)}}}catch{}finally{}};function bP(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function DP(t,e,n){let i=!0,r;for(;!t.J&&t.o<n.length;)if(r=r6(t,n),r==wI){e==4&&(t.s=4,Vt(14),i=!1),Ma(t.j,t.m,null,"[Incomplete Response]");break}else if(r==EP){t.s=4,Vt(15),Ma(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Ma(t.j,t.m,r,null),II(t,r);bP(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Vt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),GI(e),e.M=!0,Vt(11))):(Ma(t.j,t.m,n,"[Invalid Chunked Response]"),Hs(t),Kl(t))}M.mb=function(){if(this.g){var t=bi(this.g),e=this.g.ja();this.o<e.length&&(Qp(this),DP(this,t,e),this.i&&t!=4&&cu(this))}};function r6(t,e){var n=t.o,i=e.indexOf(`
`,n);return i==-1?wI:(n=Number(e.substring(n,i)),isNaN(n)?EP:(i+=1,i+n>e.length?wI:(e=e.slice(i,i+n),t.o=i+n,e)))}M.cancel=function(){this.J=!0,Hs(this)};function cu(t){t.Y=Date.now()+t.P,CP(t,t.P)}function CP(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=su(St(t.lb,t),e)}function Qp(t){t.C&&(ne.clearTimeout(t.C),t.C=null)}M.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(t6(this.j,this.B),this.L!=2&&(eu(),Vt(17)),Hs(this),this.s=2,Kl(this)):CP(this,this.Y-t)};function Kl(t){t.l.H==0||t.J||WP(t.l,t)}function Hs(t){Qp(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,FI(t.V),pP(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function II(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||bI(n.i,t))){if(!t.K&&bI(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Fp(n),Jp(n);else break e;qI(n),Vt(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=su(St(n.ib,n),6e3));if(1>=PP(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else zs(n,11)}else if((t.K||n.g==t)&&Fp(n),!Ql(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(i=1.5*h,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;let f=t.g;if(f){let p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=i.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(UI(s,s.h),s.h=null))}if(i.F){let g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(i.Da=g,Le(i.I,i.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=YP(i,i.J?i.pa:null,i.Y),o.K){OP(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.C&&(Qp(a),cu(a)),i.g=o}else qP(i);0<n.j.length&&em(n)}else l[0]!="stop"&&l[0]!="close"||zs(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?zs(n,7):zI(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}eu(4)}catch{}}function s6(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Bp(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function o6(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Bp(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let i in t)e[n++]=i;return e}}}function TP(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Bp(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=o6(t),i=s6(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}var SP=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function a6(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function qs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof qs){this.h=t.h,Op(this,t.j),this.s=t.s,this.g=t.g,kp(this,t.m),this.l=t.l;var e=t.i,n=new tu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),GN(this,n),this.o=t.o}else t&&(e=String(t).match(SP))?(this.h=!1,Op(this,e[1]||"",!0),this.s=Gl(e[2]||""),this.g=Gl(e[3]||"",!0),kp(this,e[4]),this.l=Gl(e[5]||"",!0),GN(this,e[6]||"",!0),this.o=Gl(e[7]||"")):(this.h=!1,this.i=new tu(null,this.h))}qs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Wl(e,WN,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Wl(e,WN,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Wl(n,n.charAt(0)=="/"?u6:l6,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Wl(n,h6)),t.join("")};function Yi(t){return new qs(t)}function Op(t,e,n){t.j=n?Gl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function kp(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function GN(t,e,n){e instanceof tu?(t.i=e,f6(t.i,t.h)):(n||(e=Wl(e,d6)),t.i=new tu(e,t.h))}function Le(t,e,n){t.i.set(e,n)}function Yp(t){return Le(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Gl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Wl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,c6),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function c6(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var WN=/[#\/\?@]/g,l6=/[#\?:]/g,u6=/[#\?]/g,d6=/[#\?@]/g,h6=/#/g;function tu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Vr(t){t.g||(t.g=new Map,t.h=0,t.i&&a6(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}M=tu.prototype;M.add=function(t,e){Vr(this),this.i=null,t=Oa(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function AP(t,e){Vr(t),e=Oa(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function RP(t,e){return Vr(t),e=Oa(t,e),t.g.has(e)}M.forEach=function(t,e){Vr(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};M.ta=function(){Vr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){let r=t[i];for(let s=0;s<r.length;s++)n.push(e[i])}return n};M.Z=function(t){Vr(this);let e=[];if(typeof t=="string")RP(this,t)&&(e=e.concat(this.g.get(Oa(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};M.set=function(t,e){return Vr(this),this.i=null,t=Oa(this,t),RP(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};M.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function xP(t,e,n){AP(t,e),0<n.length&&(t.i=null,t.g.set(Oa(t,e),SI(n)),t.h+=n.length)}M.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];let s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};function Oa(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function f6(t,e){e&&!t.j&&(Vr(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(AP(this,i),xP(this,r,n))},t)),t.j=e}var p6=class{constructor(t,e){this.g=t,this.map=e}};function MP(t){this.l=t||m6,ne.PerformanceNavigationTiming?(t=ne.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ne.g&&ne.g.Ka&&ne.g.Ka()&&ne.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var m6=10;function NP(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function PP(t){return t.h?1:t.g?t.g.size:0}function bI(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function UI(t,e){t.g?t.g.add(e):t.h=e}function OP(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}MP.prototype.cancel=function(){if(this.i=kP(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function kP(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return SI(t.i)}var g6=class{stringify(t){return ne.JSON.stringify(t,void 0)}parse(t){return ne.JSON.parse(t,void 0)}};function y6(){this.g=new g6}function _6(t,e,n){let i=n||"";try{TP(t,function(r,s){let o=r;iu(r)&&(o=OI(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function v6(t,e){let n=new qp;if(ne.Image){let i=new Image;i.onload=Sp(Np,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Sp(Np,n,i,"TestLoadImage: error",!1,e),i.onabort=Sp(Np,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Sp(Np,n,i,"TestLoadImage: timeout",!1,e),ne.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function Np(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function lu(t){this.l=t.ec||null,this.j=t.ob||!1}dt(lu,VI);lu.prototype.g=function(){return new Zp(this.l,this.j)};lu.prototype.i=function(t){return function(){return t}}({});function Zp(t,e){ut.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=$I,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dt(Zp,ut);var $I=0;M=Zp.prototype;M.open=function(t,e){if(this.readyState!=$I)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,nu(this)};M.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ne).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};M.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,uu(this)),this.readyState=$I};M.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,nu(this)),this.g&&(this.readyState=3,nu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ne.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;FP(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function FP(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}M.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?uu(this):nu(this),this.readyState==3&&FP(this)}};M.Za=function(t){this.g&&(this.response=this.responseText=t,uu(this))};M.Ya=function(t){this.g&&(this.response=t,uu(this))};M.ka=function(){this.g&&uu(this)};function uu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,nu(t)}M.setRequestHeader=function(t,e){this.v.append(t,e)};M.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};M.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function nu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Zp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var w6=ne.JSON.parse;function qe(t){ut.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=LP,this.L=this.M=!1}dt(qe,ut);var LP="",E6=/^https?$/i,I6=["POST","PUT"];M=qe.prototype;M.Oa=function(t){this.M=t};M.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():vI.g(),this.C=this.u?qN(this.u):qN(vI),this.g.onreadystatechange=St(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){KN(this,s);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(let s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=ne.FormData&&t instanceof ne.FormData,!(0<=JN(I6,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{BP(this),0<this.B&&((this.L=b6(this.g))?(this.g.timeout=this.B,this.g.ontimeout=St(this.ua,this)):this.A=LI(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){KN(this,s)}};function b6(t){return Pa&&typeof t.timeout=="number"&&t.ontimeout!==void 0}M.ua=function(){typeof TI<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_t(this,"timeout"),this.abort(8))};function KN(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,VP(t),Xp(t)}function VP(t){t.F||(t.F=!0,_t(t,"complete"),_t(t,"error"))}M.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,_t(this,"complete"),_t(this,"abort"),Xp(this))};M.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xp(this,!0)),qe.$.N.call(this)};M.La=function(){this.s||(this.G||this.v||this.l?jP(this):this.kb())};M.kb=function(){jP(this)};function jP(t){if(t.h&&typeof TI<"u"&&(!t.C[1]||bi(t)!=4||t.da()!=2)){if(t.v&&bi(t)==4)LI(t.La,0,t);else if(_t(t,"readystatechange"),bi(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=o===0){var r=String(t.I).match(SP)[1]||null;!r&&ne.self&&ne.self.location&&(r=ne.self.location.protocol.slice(0,-1)),i=!E6.test(r?r.toLowerCase():"")}n=i}if(n)_t(t,"complete"),_t(t,"success");else{t.m=6;try{var s=2<bi(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",VP(t)}}finally{Xp(t)}}}}function Xp(t,e){if(t.g){BP(t);let n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||_t(t,"ready");try{n.onreadystatechange=i}catch{}}}function BP(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ne.clearTimeout(t.A),t.A=null)}M.isActive=function(){return!!this.g};function bi(t){return t.g?t.g.readyState:0}M.da=function(){try{return 2<bi(this)?this.g.status:-1}catch{return-1}};M.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};M.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),w6(e)}};function QN(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case LP:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function D6(t){let e={};t=(t.g&&2<=bi(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(Ql(t[i]))continue;var n=Y9(t[i]);let r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[r]||[];e[r]=s,s.push(n)}G9(e,function(i){return i.join(", ")})}M.Ia=function(){return this.m};M.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function UP(t){let e="";return RI(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function HI(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=UP(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Le(t,e,n))}function zl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function $P(t){this.Ga=0,this.j=[],this.l=new qp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=zl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=zl("baseRetryDelayMs",5e3,t),this.hb=zl("retryDelaySeedMs",1e4,t),this.eb=zl("forwardChannelMaxRetries",2,t),this.xa=zl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new MP(t&&t.concurrentRequestLimit),this.Ja=new y6,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}M=$P.prototype;M.ra=8;M.H=1;function zI(t){if(HP(t),t.H==3){var e=t.W++,n=Yi(t.I);if(Le(n,"SID",t.K),Le(n,"RID",e),Le(n,"TYPE","terminate"),du(t,n),e=new au(t,t.l,e),e.L=2,e.A=Yp(Yi(n)),n=!1,ne.navigator&&ne.navigator.sendBeacon)try{n=ne.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&ne.Image&&(new Image().src=e.A,n=!0),n||(e.g=ZP(e.l,null),e.g.ha(e.A)),e.G=Date.now(),cu(e)}QP(t)}function Jp(t){t.g&&(GI(t),t.g.cancel(),t.g=null)}function HP(t){Jp(t),t.u&&(ne.clearTimeout(t.u),t.u=null),Fp(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ne.clearTimeout(t.m),t.m=null)}function em(t){if(!NP(t.i)&&!t.m){t.m=!0;var e=t.Na;Zl||dP(),Xl||(Zl(),Xl=!0),kI.add(e,t),t.C=0}}function C6(t,e){return PP(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=su(St(t.Na,t,e),KP(t,t.C)),t.C++,!0)}M.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let r=new au(this,this.l,t),s=this.s;if(this.U&&(s?(s=iP(s),rP(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=zP(this,r,e),n=Yi(this.I),Le(n,"RID",t),Le(n,"CVER",22),this.F&&Le(n,"X-HTTP-Session-Id",this.F),du(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(UP(s)))+"&"+e:this.o&&HI(n,this.o,s)),UI(this.i,r),this.bb&&Le(n,"TYPE","init"),this.P?(Le(n,"$req",e),Le(n,"SID","null"),r.aa=!0,EI(r,n,null)):EI(r,n,e),this.H=2}}else this.H==3&&(t?YN(this,t):this.j.length==0||NP(this.i)||YN(this))};function YN(t,e){var n;e?n=e.m:n=t.W++;let i=Yi(t.I);Le(i,"SID",t.K),Le(i,"RID",n),Le(i,"AID",t.V),du(t,i),t.o&&t.s&&HI(i,t.o,t.s),n=new au(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=zP(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),UI(t.i,n),EI(n,i,e)}function du(t,e){t.na&&RI(t.na,function(n,i){Le(e,i,n)}),t.h&&TP({},function(n,i){Le(e,i,n)})}function zP(t,e,n){n=Math.min(t.j.length,n);var i=t.h?St(t.h.Va,t.h,t):null;e:{var r=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let l=r[c].g,u=r[c].map;if(l-=s,0>l)s=Math.max(0,r[c].g-100),a=!1;else try{_6(u,o,"req"+l+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function qP(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Zl||dP(),Xl||(Zl(),Xl=!0),kI.add(e,t),t.A=0}}function qI(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=su(St(t.Ma,t),KP(t,t.A)),t.A++,!0)}M.Ma=function(){if(this.u=null,GP(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=su(St(this.jb,this),t)}};M.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Vt(10),Jp(this),GP(this))};function GI(t){t.B!=null&&(ne.clearTimeout(t.B),t.B=null)}function GP(t){t.g=new au(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Yi(t.wa);Le(e,"RID","rpc"),Le(e,"SID",t.K),Le(e,"AID",t.V),Le(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Le(e,"TO",t.qa),Le(e,"TYPE","xmlhttp"),du(t,e),t.o&&t.s&&HI(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Yp(Yi(e)),n.u=null,n.S=!0,IP(n,t)}M.ib=function(){this.v!=null&&(this.v=null,Jp(this),qI(this),Vt(19))};function Fp(t){t.v!=null&&(ne.clearTimeout(t.v),t.v=null)}function WP(t,e){var n=null;if(t.g==e){Fp(t),GI(t),t.g=null;var i=2}else if(bI(t.i,e))n=e.F,OP(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;i=Gp(),_t(i,new yP(i,n)),em(t)}else qP(t);else if(r=e.s,r==3||r==0&&0<e.ca||!(i==1&&C6(t,e)||i==2&&qI(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:zs(t,5);break;case 4:zs(t,10);break;case 3:zs(t,6);break;default:zs(t,2)}}}function KP(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function zs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=St(t.pb,t);n||(n=new qs("//www.google.com/images/cleardot.gif"),ne.location&&ne.location.protocol=="http"||Op(n,"https"),Yp(n)),v6(n.toString(),i)}else Vt(2);t.H=0,t.h&&t.h.za(e),QP(t),HP(t)}M.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Vt(2)):(this.l.info("Failed to ping google.com"),Vt(1))};function QP(t){if(t.H=0,t.ma=[],t.h){let e=kP(t.i);(e.length!=0||t.j.length!=0)&&(UN(t.ma,e),UN(t.ma,t.j),t.i.i.length=0,SI(t.j),t.j.length=0),t.h.ya()}}function YP(t,e,n){var i=n instanceof qs?Yi(n):new qs(n);if(i.g!="")e&&(i.g=e+"."+i.g),kp(i,i.m);else{var r=ne.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new qs(null);i&&Op(s,i),e&&(s.g=e),r&&kp(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&Le(i,n,e),Le(i,"VER",t.ra),du(t,i),i}function ZP(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new qe(new lu({ob:n})):new qe(t.va),e.Oa(t.J),e}M.isActive=function(){return!!this.h&&this.h.isActive(this)};function XP(){}M=XP.prototype;M.Ba=function(){};M.Aa=function(){};M.za=function(){};M.ya=function(){};M.isActive=function(){return!0};M.Va=function(){};function Lp(){if(Pa&&!(10<=Number($9)))throw Error("Environmental error: no available transport.")}Lp.prototype.g=function(t,e){return new tn(t,e)};function tn(t,e){ut.call(this),this.g=new $P(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ql(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ql(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ka(this)}dt(tn,ut);tn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Vt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=YP(t,null,t.Y),em(t)};tn.prototype.close=function(){zI(this.g)};tn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=OI(t),t=n);e.j.push(new p6(e.fb++,t)),e.H==3&&em(e)};tn.prototype.N=function(){this.g.h=null,delete this.j,zI(this.g),delete this.g,tn.$.N.call(this)};function JP(t){jI.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}dt(JP,jI);function eO(){BI.call(this),this.status=1}dt(eO,BI);function ka(t){this.g=t}dt(ka,XP);ka.prototype.Ba=function(){_t(this.g,"a")};ka.prototype.Aa=function(t){_t(this.g,new JP(t))};ka.prototype.za=function(t){_t(this.g,new eO)};ka.prototype.ya=function(){_t(this.g,"b")};function T6(){this.blockSize=-1}function jn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}dt(jn,T6);jn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function lI(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}jn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=n;)lI(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){lI(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){lI(this,i),r=0;break}}this.h=r,this.i+=e};jn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function Te(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=t[r]|0;i&&s==e||(n[r]=s,i=!1)}this.g=n}var S6={};function WI(t){return-128<=t&&128>t?j9(t,function(e){return new Te([e|0],0>e?-1:0)}):new Te([t|0],0>t?-1:0)}function Di(t){if(isNaN(t)||!isFinite(t))return Na;if(0>t)return yt(Di(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=DI;return new Te(e,0)}function tO(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return yt(tO(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Di(Math.pow(e,8)),i=Na,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+s),e);8>s?(s=Di(Math.pow(e,s)),i=i.R(s).add(Di(o))):(i=i.R(n),i=i.add(Di(o)))}return i}var DI=4294967296,Na=WI(0),CI=WI(1),ZN=WI(16777216);M=Te.prototype;M.ea=function(){if(In(this))return-yt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:DI+i)*e,e*=DI}return t};M.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Qi(this))return"0";if(In(this))return"-"+yt(this).toString(t);for(var e=Di(Math.pow(t,6)),n=this,i="";;){var r=jp(n,e).g;n=Vp(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Qi(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};M.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Qi(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function In(t){return t.h==-1}M.X=function(t){return t=Vp(this,t),In(t)?-1:Qi(t)?0:1};function yt(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Te(n,~t.h).add(CI)}M.abs=function(){return In(this)?yt(this):this};M.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(t.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new Te(n,n[n.length-1]&-2147483648?-1:0)};function Vp(t,e){return t.add(yt(e))}M.R=function(t){if(Qi(this)||Qi(t))return Na;if(In(this))return In(t)?yt(this).R(yt(t)):yt(yt(this).R(t));if(In(t))return yt(this.R(yt(t)));if(0>this.X(ZN)&&0>t.X(ZN))return Di(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=t.D(r)>>>16,c=t.D(r)&65535;n[2*i+2*r]+=o*c,Pp(n,2*i+2*r),n[2*i+2*r+1]+=s*c,Pp(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,Pp(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,Pp(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Te(n,0)};function Pp(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ql(t,e){this.g=t,this.h=e}function jp(t,e){if(Qi(e))throw Error("division by zero");if(Qi(t))return new ql(Na,Na);if(In(t))return e=jp(yt(t),e),new ql(yt(e.g),yt(e.h));if(In(e))return e=jp(t,yt(e)),new ql(yt(e.g),e.h);if(30<t.g.length){if(In(t)||In(e))throw Error("slowDivide_ only works with positive integers.");for(var n=CI,i=e;0>=i.X(t);)n=XN(n),i=XN(i);var r=xa(n,1),s=xa(i,1);for(i=xa(i,2),n=xa(n,2);!Qi(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=xa(i,1),n=xa(n,1)}return e=Vp(t,r.R(e)),new ql(r,e)}for(r=Na;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=Di(n),o=s.R(e);In(o)||0<o.X(t);)n-=i,s=Di(n),o=s.R(e);Qi(s)&&(s=CI),r=r.add(s),t=Vp(t,o)}return new ql(r,t)}M.gb=function(t){return jp(this,t).h};M.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Te(n,this.h&t.h)};M.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Te(n,this.h|t.h)};M.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Te(n,this.h^t.h)};function XN(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Te(n,t.h)}function xa(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Te(r,t.h)}Lp.prototype.createWebChannel=Lp.prototype.g;tn.prototype.send=tn.prototype.u;tn.prototype.open=tn.prototype.m;tn.prototype.close=tn.prototype.close;Wp.NO_ERROR=0;Wp.TIMEOUT=8;Wp.HTTP_ERROR=6;_P.COMPLETE="complete";vP.EventType=ou;ou.OPEN="a";ou.CLOSE="b";ou.ERROR="c";ou.MESSAGE="d";ut.prototype.listen=ut.prototype.O;qe.prototype.listenOnce=qe.prototype.P;qe.prototype.getLastError=qe.prototype.Sa;qe.prototype.getLastErrorCode=qe.prototype.Ia;qe.prototype.getStatus=qe.prototype.da;qe.prototype.getResponseJson=qe.prototype.Wa;qe.prototype.getResponseText=qe.prototype.ja;qe.prototype.send=qe.prototype.ha;qe.prototype.setWithCredentials=qe.prototype.Oa;jn.prototype.digest=jn.prototype.l;jn.prototype.reset=jn.prototype.reset;jn.prototype.update=jn.prototype.j;Te.prototype.add=Te.prototype.add;Te.prototype.multiply=Te.prototype.R;Te.prototype.modulo=Te.prototype.gb;Te.prototype.compare=Te.prototype.X;Te.prototype.toNumber=Te.prototype.ea;Te.prototype.toString=Te.prototype.toString;Te.prototype.getBits=Te.prototype.D;Te.fromNumber=Di;Te.fromString=tO;var nO=Bn.createWebChannelTransport=function(){return new Lp},iO=Bn.getStatEventTarget=function(){return Gp()},tm=Bn.ErrorCode=Wp,rO=Bn.EventType=_P,sO=Bn.Event=Gs,KI=Bn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},kae=Bn.FetchXmlHttpFactory=lu,hu=Bn.WebChannel=vP,oO=Bn.XhrIo=qe,aO=Bn.Md5=jn,Ws=Bn.Integer=Te;var cO="@firebase/firestore";var ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");var cc="10.7.2";var ro=new Rr("@firebase/firestore");function Ba(){return ro.logLevel}function b(t,...e){if(ro.logLevel<=pe.DEBUG){let n=e.map(KD);ro.debug(`Firestore (${cc}): ${t}`,...n)}}function Ye(t,...e){if(ro.logLevel<=pe.ERROR){let n=e.map(KD);ro.error(`Firestore (${cc}): ${t}`,...n)}}function Cu(t,...e){if(ro.logLevel<=pe.WARN){let n=e.map(KD);ro.warn(`Firestore (${cc}): ${t}`,...n)}}function KD(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function k(t="Unexpected state"){let e=`FIRESTORE (${cc}) INTERNAL ASSERTION FAILED: `+t;throw Ye(e),new Error(e)}function B(t,e){t||k()}function V(t,e){return t}var w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},A=class extends en{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Dn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var tb=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},nb=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}};var ib=class{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve(),s=new Dn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Dn,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>m(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{b("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(b("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Dn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(b("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(B(typeof i.accessToken=="string"),new tb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return B(e===null||typeof e=="string"),new ht(e)}},rb=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},sb=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new rb(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ob=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ab=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=s=>{s.error!=null&&b("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,b("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{b("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):b("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(B(typeof n.token=="string"),this.R=n.token,new ob(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function A6(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var dm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=A6(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}};function se(t,e){return t<e?-1:t>e?1:0}function Qa(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function ck(t){return t+"\0"}var Ze=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new A(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new A(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new A(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new A(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var z=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ze(0,0))}static max(){return new t(new Ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var hm=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&k(),i===void 0?i=e.length-n:i>e.length-n&&k(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Re=class t extends hm{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new A(w.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},R6=/^[_a-zA-Z][_a-zA-Z0-9]*$/,st=class t extends hm{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return R6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,s=()=>{if(i.length===0)throw new A(w.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new A(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new A(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new A(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var P=class t{constructor(e){this.path=e}static fromPath(e){return new t(Re.fromString(e))}static fromName(e){return new t(Re.fromString(e).popFirst(5))}static empty(){return new t(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Re(e.slice()))}};var Ya=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function cb(t){return t.fields.find(e=>e.kind===2)}function Qs(t){return t.fields.filter(e=>e.kind!==2)}Ya.UNKNOWN_ID=-1;var Ga=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Tu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Cn.min())}};function lk(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=z.fromTimestamp(i===1e9?new Ze(n+1,0):new Ze(n,i));return new Cn(r,P.empty(),e)}function uk(t){return new Cn(t.readTime,t.key,-1)}var Cn=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(z.min(),P.empty(),-1)}static max(){return new t(z.max(),P.empty(),-1)}};function QD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=P.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}var dk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",fm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Jr(t){return m(this,null,function*(){if(t.code!==w.FAILED_PRECONDITION||t.message!==dk)throw t;b("LocalStore","Unexpectedly lost primary lease")})}var _=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&k(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},c=>i(c))}),o=!0,s===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(u=>{o[l]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,n){return new t((i,r)=>{let s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}};var pm=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Dn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new no(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=YD(i.target.error);this.V.reject(new no(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(s){throw new no(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(b("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new ub(n)}},so=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(ze())===12.2&&Ye("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return b("SimpleDb","Removing database:",e),Ys(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Xf())return!1;if(t.C())return!0;let e=ze(),n=t.S(e),i=0<n&&n<10,r=t.v(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){let n=e.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}O(e){return m(this,null,function*(){return this.db||(b("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{let o=s.target.result;n(o)},r.onblocked=()=>{i(new no(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{let o=s.target.error;o.name==="VersionError"?i(new A(w.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new A(w.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new no(e,o))},r.onupgradeneeded=s=>{b("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,r.transaction,s.oldVersion,this.version).next(()=>{b("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return m(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=pm.open(this.db,e,s?"readonly":"readwrite",i),c=r(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),_.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(b("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},lb=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ys(this.k.delete())}},no=class extends A{constructor(e,n){super(w.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function es(t){return t.name==="IndexedDbTransactionError"}var ub=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(b("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(b("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Ys(i)}add(e){return b("SimpleDb","ADD",this.store.name,e,e),Ys(this.store.add(e))}get(e){return Ys(this.store.get(e)).next(n=>(n===void 0&&(n=null),b("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return b("SimpleDb","DELETE",this.store.name,e),Ys(this.store.delete(e))}count(){return b("SimpleDb","COUNT",this.store.name),Ys(this.store.count())}W(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let s=r.getAll(i.range);return new _((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(i),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new _((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}H(e,n){b("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.J=!1;let r=this.cursor(i);return this.G(r,(s,o,a)=>a.delete())}Y(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.G(r,n)}Z(e){let n=this.cursor({});return new _((i,r)=>{n.onerror=s=>{let o=YD(s.target.error);r(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}G(e,n){let i=[];return new _((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void r();let c=new lb(a),l=n(a.primaryKey,a.value,c);if(l instanceof _){let u=l.catch(d=>(c.done(),_.reject(d)));i.push(u)}c.isDone?r():c.$===null?a.continue():a.continue(c.$)}}).next(()=>_.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Ys(t){return new _((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=YD(i.target.error);n(r)}})}var lO=!1;function YD(t){let e=so.S(ze());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new A("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lO||(lO=!0,setTimeout(()=>{throw i},0)),i}}return t}var db=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){b("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>m(this,null,function*(){this.task=null;try{b("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){es(n)?b("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Jr(n)}yield this.ee(6e4)}))}},hb=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return m(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let i=new Set,r=n,s=!0;return _.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!i.has(o))return b("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>n-r)}re(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(r,s)).next(a=>(b("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let i=e;return n.changes.forEach((r,s)=>{let o=uk(s);QD(o,i)>0&&(i=o)}),new Cn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var nn=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.se(r),this.oe=r=>i.writeSequenceNumber(r))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function cg(t){return t==null}function Su(t){return t===0&&1/t==-1/0}function hk(t){return typeof t=="number"&&Number.isInteger(t)&&!Su(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Bt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=uO(e)),e=x6(t.get(n),e);return uO(e)}function x6(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let s=t.charAt(r);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function uO(t){return t+""}function Ci(t){let e=t.length;if(B(e>=2),e===2)return B(t.charAt(0)===""&&t.charAt(1)===""),Re.emptyPath();let n=e-2,i=[],r="";for(let s=0;s<e;){let o=t.indexOf("",s);switch((o<0||o>n)&&k(),t.charAt(o+1)){case"":let a=t.substring(s,o),c;r.length===0?c=a:(r+=a,c=r,r=""),i.push(c);break;case"":r+=t.substring(s,o),r+="\0";break;case"":r+=t.substring(s,o+1);break;default:k()}s=o+2}return new Re(i)}var dO=["userId","batchId"];function om(t,e){return[t,Bt(e)]}function fk(t,e,n){return[t,Bt(e),n]}var M6={},N6=["prefixPath","collectionGroup","readTime","documentId"],P6=["prefixPath","collectionGroup","documentId"],O6=["collectionGroup","readTime","prefixPath","documentId"],k6=["canonicalId","targetId"],F6=["targetId","path"],L6=["path","targetId"],V6=["collectionId","parent"],j6=["indexId","uid"],B6=["uid","sequenceNumber"],U6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$6=["indexId","uid","orderedDocumentKey"],H6=["userId","collectionPath","documentId"],z6=["userId","collectionPath","largestBatchId"],q6=["userId","collectionGroup","largestBatchId"],pk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],G6=[...pk,"documentOverlays"],mk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gk=mk,W6=[...gk,"indexConfiguration","indexState","indexEntries"];var Au=class extends fm{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function ft(t,e){let n=V(t);return so.M(n.ae,e)}function hO(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function go(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yk(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ve=class t{constructor(e,n){this.comparator=e,this.root=n||Si.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Si.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Si.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qa(this.root,e,this.comparator,!1)}getReverseIterator(){return new qa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qa(this.root,e,this.comparator,!0)}},qa=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Si=class t{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new t(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw k();let e=this.left.check();if(e!==this.right.check())throw k();return e+(this.isRed()?0:1)}};Si.EMPTY=null,Si.RED=!0,Si.BLACK=!1;Si.EMPTY=new class{constructor(){this.size=0}get key(){throw k()}get value(){throw k()}get color(){throw k()}get left(){throw k()}get right(){throw k()}copy(e,n,i,r,s){return this}insert(e,n,i){return new Si(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ne=class t{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mm(this.data.getIterator())}getIteratorFrom(e){return new mm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},mm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Fa(t){return t.hasNext()?t.getNext():void 0}var rn=class t{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ne(st.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qa(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var gm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Et=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new gm("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Et.EMPTY_BYTE_STRING=new Et("");var K6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(t){if(B(!!t),typeof t=="string"){let e=0,n=K6.exec(t);if(B(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qr(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}function ZD(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function XD(t){let e=t.mapValue.fields.__previous_value__;return ZD(e)?XD(e):e}function Ru(t){let e=zr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ze(e.seconds,e.nanos)}var fb=class{constructor(e,n,i,r,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Za=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var $r={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},am={nullValue:"NULL_VALUE"};function oo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ZD(t)?4:_k(t)?9007199254740991:10:k()}function Ai(t,e){if(t===e)return!0;let n=oo(t);if(n!==oo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ru(t).isEqual(Ru(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=zr(r.timestampValue),a=zr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return qr(r.bytesValue).isEqual(qr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Ge(r.geoPointValue.latitude)===Ge(s.geoPointValue.latitude)&&Ge(r.geoPointValue.longitude)===Ge(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ge(r.integerValue)===Ge(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Ge(r.doubleValue),a=Ge(s.doubleValue);return o===a?Su(o)===Su(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Qa(t.arrayValue.values||[],e.arrayValue.values||[],Ai);case 10:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(hO(o)!==hO(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Ai(o[c],a[c])))return!1;return!0}(t,e);default:return k()}}function xu(t,e){return(t.values||[]).find(n=>Ai(n,e))!==void 0}function Gr(t,e){if(t===e)return 0;let n=oo(t),i=oo(e);if(n!==i)return se(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ge(s.integerValue||s.doubleValue),c=Ge(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return fO(t.timestampValue,e.timestampValue);case 4:return fO(Ru(t),Ru(e));case 5:return se(t.stringValue,e.stringValue);case 6:return function(s,o){let a=qr(s),c=qr(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=se(a[l],c[l]);if(u!==0)return u}return se(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=se(Ge(s.latitude),Ge(o.latitude));return a!==0?a:se(Ge(s.longitude),Ge(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=Gr(a[l],c[l]);if(u)return u}return se(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===$r.mapValue&&o===$r.mapValue)return 0;if(s===$r.mapValue)return 1;if(o===$r.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=se(c[d],u[d]);if(h!==0)return h;let f=Gr(a[c[d]],l[u[d]]);if(f!==0)return f}return se(c.length,u.length)}(t.mapValue,e.mapValue);default:throw k()}}function fO(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);let n=zr(t),i=zr(e),r=se(n.seconds,i.seconds);return r!==0?r:se(n.nanos,i.nanos)}function Xa(t){return pb(t)}function pb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=zr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return P.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let s of n.values||[])r?r=!1:i+=",",i+=pb(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${pb(n.fields[o])}`;return r+"}"}(t.mapValue):k()}function Mu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mb(t){return!!t&&"integerValue"in t}function Nu(t){return!!t&&"arrayValue"in t}function pO(t){return!!t&&"nullValue"in t}function mO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cm(t){return!!t&&"mapValue"in t}function vu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return go(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=vu(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _k(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function Q6(t){return"nullValue"in t?am:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Mu(Za.empty(),P.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:k()}function Y6(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Mu(Za.empty(),P.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?$r:k()}function gO(t,e){let n=Gr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function yO(t,e){let n=Gr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var jt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!cm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vu(n)}setAll(e){let n=st.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=vu(o):r.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){let n=this.field(e.popLast());cm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ai(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];cm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){go(n,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new t(vu(this.value))}};function vk(t){let e=[];return go(t.fields,(n,i)=>{let r=new st([n]);if(cm(i)){let s=vk(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new rn(e)}var wt=class t{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,z.min(),z.min(),z.min(),jt.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,z.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,z.min(),z.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,z.min(),z.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Wr=class{constructor(e,n){this.position=e,this.inclusive=n}};function _O(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let s=e[r],o=t.position[r];if(s.field.isKeyField()?i=P.comparator(P.fromName(o.referenceValue),n.key):i=Gr(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function vO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ai(t.position[n],e.position[n]))return!1;return!0}var ao=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Z6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var ym=class{},me=class t extends ym{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new _b(e,n,i):n==="array-contains"?new Eb(e,i):n==="in"?new _m(e,i):n==="not-in"?new Ib(e,i):n==="array-contains-any"?new bb(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new vb(e,i):new wb(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Gr(n,this.value)):n!==null&&oo(this.value)===oo(n)&&this.matchesComparison(Gr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return k()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Se=class t extends ym{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return Ja(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Ja(t){return t.op==="and"}function gb(t){return t.op==="or"}function JD(t){return wk(t)&&Ja(t)}function wk(t){for(let e of t.filters)if(e instanceof Se)return!1;return!0}function yb(t){if(t instanceof me)return t.field.canonicalString()+t.op.toString()+Xa(t.value);if(JD(t))return t.filters.map(e=>yb(e)).join(",");{let e=t.filters.map(n=>yb(n)).join(",");return`${t.op}(${e})`}}function Ek(t,e){return t instanceof me?function(i,r){return r instanceof me&&i.op===r.op&&i.field.isEqual(r.field)&&Ai(i.value,r.value)}(t,e):t instanceof Se?function(i,r){return r instanceof Se&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&Ek(o,r.filters[a]),!0):!1}(t,e):void k()}function Ik(t,e){let n=t.filters.concat(e);return Se.create(n,t.op)}function bk(t){return t instanceof me?function(n){return`${n.field.canonicalString()} ${n.op} ${Xa(n.value)}`}(t):t instanceof Se?function(n){return n.op.toString()+" {"+n.getFilters().map(bk).join(" ,")+"}"}(t):"Filter"}var _b=class extends me{constructor(e,n,i){super(e,n,i),this.key=P.fromName(i.referenceValue)}matches(e){let n=P.comparator(e.key,this.key);return this.matchesComparison(n)}},vb=class extends me{constructor(e,n){super(e,"in",n),this.keys=Dk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},wb=class extends me{constructor(e,n){super(e,"not-in",n),this.keys=Dk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Dk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>P.fromName(i.referenceValue))}var Eb=class extends me{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Nu(n)&&xu(n.arrayValue,this.value)}},_m=class extends me{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&xu(this.value.arrayValue,n)}},Ib=class extends me{constructor(e,n){super(e,"not-in",n)}matches(e){if(xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!xu(this.value.arrayValue,n)}},bb=class extends me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Nu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>xu(this.value.arrayValue,i))}};var Db=class{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function Cb(t,e=null,n=[],i=[],r=null,s=null,o=null){return new Db(t,e,n,i,r,s,o)}function co(t){let e=V(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>yb(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),cg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Xa(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Xa(i)).join(",")),e.ce=n}return e.ce}function Xu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Z6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ek(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vO(t.startAt,e.startAt)&&vO(t.endAt,e.endAt)}function vm(t){return P.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function wm(t,e){return t.filters.filter(n=>n instanceof me&&n.field.isEqual(e))}function wO(t,e,n){let i=am,r=!0;for(let s of wm(t,e)){let o=am,a=!0;switch(s.op){case"<":case"<=":o=Q6(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=am}gO({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];gO({value:i,inclusive:r},{value:o,inclusive:n.inclusive})<0&&(i=o,r=n.inclusive);break}}return{value:i,inclusive:r}}function EO(t,e,n){let i=$r,r=!0;for(let s of wm(t,e)){let o=$r,a=!0;switch(s.op){case">=":case">":o=Y6(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=$r}yO({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];yO({value:i,inclusive:r},{value:o,inclusive:n.inclusive})>0&&(i=o,r=n.inclusive);break}}return{value:i,inclusive:r}}var Kr=class{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function Ck(t,e,n,i,r,s,o,a){return new Kr(t,e,n,i,r,s,o,a)}function Ju(t){return new Kr(t)}function IO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Tk(t){return t.collectionGroup!==null}function wu(t){let e=V(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ne(st.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new ao(s,i))}),n.has(st.keyField().canonicalString())||e.le.push(new ao(st.keyField(),i))}return e.le}function on(t){let e=V(t);return e.he||(e.he=X6(e,wu(t))),e.he}function X6(t,e){if(t.limitType==="F")return Cb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new ao(r.field,s)});let n=t.endAt?new Wr(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Wr(t.startAt.position,t.startAt.inclusive):null;return Cb(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Tb(t,e){let n=t.filters.concat([e]);return new Kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Em(t,e,n){return new Kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lg(t,e){return Xu(on(t),on(e))&&t.limitType===e.limitType}function Sk(t){return`${co(on(t))}|lt:${t.limitType}`}function Ua(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>bk(r)).join(", ")}]`),cg(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Xa(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Xa(r)).join(",")),`Target(${i})`}(on(t))}; limitType=${t.limitType})`}function ed(t,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):P.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(let s of wu(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,c){let l=_O(o,a,c);return o.inclusive?l<=0:l<0}(i.startAt,wu(i),r)||i.endAt&&!function(o,a,c){let l=_O(o,a,c);return o.inclusive?l>=0:l>0}(i.endAt,wu(i),r))}(t,e)}function Ak(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Rk(t){return(e,n)=>{let i=!1;for(let r of wu(t)){let s=J6(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function J6(t,e,n){let i=t.field.isKeyField()?P.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Gr(c,l):k()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return k()}}var Ri=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,(n,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return yk(this.inner)}size(){return this.innerSize}};var e5=new Ve(P.comparator);function sn(){return e5}var xk=new Ve(P.comparator);function yu(...t){let e=xk;for(let n of t)e=e.insert(n.key,n);return e}function Mk(t){let e=xk;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Ti(){return Eu()}function Nk(){return Eu()}function Eu(){return new Ri(t=>t.toString(),(t,e)=>t.isEqual(e))}var t5=new Ve(P.comparator),n5=new Ne(P.comparator);function de(...t){let e=n5;for(let n of t)e=e.add(n);return e}var i5=new Ne(se);function e0(){return i5}function Pk(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Su(e)?"-0":e}}function Ok(t){return{integerValue:""+t}}function r5(t,e){return hk(e)?Ok(e):Pk(t,e)}var ec=class{constructor(){this._=void 0}};function s5(t,e,n){return t instanceof lo?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&ZD(s)&&(s=XD(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Qr?Fk(t,e):t instanceof Yr?Lk(t,e):function(r,s){let o=kk(r,s),a=bO(o)+bO(r.Ie);return mb(o)&&mb(r.Ie)?Ok(a):Pk(r.serializer,a)}(t,e)}function o5(t,e,n){return t instanceof Qr?Fk(t,e):t instanceof Yr?Lk(t,e):n}function kk(t,e){return t instanceof uo?function(i){return mb(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var lo=class extends ec{},Qr=class extends ec{constructor(e){super(),this.elements=e}};function Fk(t,e){let n=Vk(e);for(let i of t.elements)n.some(r=>Ai(r,i))||n.push(i);return{arrayValue:{values:n}}}var Yr=class extends ec{constructor(e){super(),this.elements=e}};function Lk(t,e){let n=Vk(e);for(let i of t.elements)n=n.filter(r=>!Ai(r,i));return{arrayValue:{values:n}}}var uo=class extends ec{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function bO(t){return Ge(t.integerValue||t.doubleValue)}function Vk(t){return Nu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Sb=class{constructor(e,n){this.field=e,this.transform=n}};function a5(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Qr&&r instanceof Qr||i instanceof Yr&&r instanceof Yr?Qa(i.elements,r.elements,Ai):i instanceof uo&&r instanceof uo?Ai(i.Ie,r.Ie):i instanceof lo&&r instanceof lo}(t.transform,e.transform)}var Ab=class{constructor(e,n){this.version=e,this.transformResults=n}},vt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function lm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var tc=class{};function jk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ho(t.key,vt.none()):new Zr(t.key,t.data,vt.none());{let n=t.data,i=jt.empty(),r=new Ne(st.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Un(t.key,i,new rn(r.toArray()),vt.none())}}function c5(t,e,n){t instanceof Zr?function(r,s,o){let a=r.value.clone(),c=CO(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Un?function(r,s,o){if(!lm(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=CO(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Bk(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Iu(t,e,n,i){return t instanceof Zr?function(s,o,a,c){if(!lm(s.precondition,o))return a;let l=s.value.clone(),u=TO(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,i):t instanceof Un?function(s,o,a,c){if(!lm(s.precondition,o))return a;let l=TO(s.fieldTransforms,c,o),u=o.data;return u.setAll(Bk(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return lm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function l5(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),s=kk(i.transform,r||null);s!=null&&(n===null&&(n=jt.empty()),n.set(i.field,s))}return n||null}function DO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Qa(i,r,(s,o)=>a5(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Zr=class extends tc{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Un=class extends tc{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Bk(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function CO(t,e,n){let i=new Map;B(t.length===n.length);for(let r=0;r<n.length;r++){let s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,o5(o,a,n[r]))}return i}function TO(t,e,n){let i=new Map;for(let r of t){let s=r.transform,o=n.data.field(r.field);i.set(r.field,s5(s,o,e))}return i}var ho=class extends tc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Im=class extends tc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Pu=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&c5(s,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=Iu(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=Iu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=Nk();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;let c=jk(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(z.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&Qa(this.mutations,e.mutations,(n,i)=>DO(n,i))&&Qa(this.baseMutations,e.baseMutations,(n,i)=>DO(n,i))}},Rb=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){B(e.mutations.length===i.length);let r=function(){return t5}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new t(e,n,i,r)}};var Ou=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var xb=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var et,ye;function u5(t){switch(t){default:return k();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}function Uk(t){if(t===void 0)return Ye("GRPC error has no .code"),w.UNKNOWN;switch(t){case et.OK:return w.OK;case et.CANCELLED:return w.CANCELLED;case et.UNKNOWN:return w.UNKNOWN;case et.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case et.INTERNAL:return w.INTERNAL;case et.UNAVAILABLE:return w.UNAVAILABLE;case et.UNAUTHENTICATED:return w.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case et.NOT_FOUND:return w.NOT_FOUND;case et.ALREADY_EXISTS:return w.ALREADY_EXISTS;case et.PERMISSION_DENIED:return w.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case et.ABORTED:return w.ABORTED;case et.OUT_OF_RANGE:return w.OUT_OF_RANGE;case et.UNIMPLEMENTED:return w.UNIMPLEMENTED;case et.DATA_LOSS:return w.DATA_LOSS;default:return k()}}(ye=et||(et={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var SO=null;function d5(){return new TextEncoder}var h5=new Ws([4294967295,4294967295],0);function AO(t){let e=d5().encode(t),n=new aO;return n.update(e),new Uint8Array(n.digest())}function RO(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ws([n,i],0),new Ws([r,s],0)]}var Mb=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new eo(`Invalid padding: ${n}`);if(i<0)throw new eo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new eo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new eo(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Ws.fromNumber(this.Te)}de(e,n,i){let r=e.add(n.multiply(Ws.fromNumber(i)));return r.compare(h5)===1&&(r=new Ws([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=AO(e),[i,r]=RO(n);for(let s=0;s<this.hashCount;s++){let o=this.de(i,r,s);if(!this.Ae(o))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=AO(e),[i,r]=RO(n);for(let s=0;s<this.hashCount;s++){let o=this.de(i,r,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},eo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ku=class t{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,Fu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(z.min(),r,new Ve(se),sn(),de())}},Fu=class t{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,de(),de(),de())}};var Wa=class{constructor(e,n,i,r){this.Ve=e,this.removedTargetIds=n,this.key=i,this.me=r}},bm=class{constructor(e,n){this.targetId=e,this.fe=n}},Dm=class{constructor(e,n,i=Et.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},Cm=class{constructor(){this.ge=0,this.pe=MO(),this.ye=Et.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=de(),n=de(),i=de();return this.pe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:k()}}),new Fu(this.ye,this.we,e,n,i)}Fe(){this.Se=!1,this.pe=MO()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,B(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},Nb=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=sn(),this.Qe=xO(),this.Ke=new Ve(se)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let i=this.ze(n);switch(e.state){case 0:this.je(n)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(n);break;case 3:this.je(n)&&(i.Be(),i.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),i.Ce(e.resumeToken));break;default:k()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((i,r)=>{this.je(r)&&n(r)})}Je(e){let n=e.targetId,i=e.fe.count,r=this.Ye(n);if(r){let s=r.target;if(vm(s))if(i===0){let o=new P(s.path);this.We(n,o,wt.newNoDocument(o,z.min()))}else B(i===1);else{let o=this.Ze(n);if(o!==i){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}SO?.tt(function(u,d,h,f,p){var g,v,E,S,N,O;let K={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},j=d.unchangedNames;return j&&(K.bloomFilter={applied:p===0,hashCount:(g=j?.hashCount)!==null&&g!==void 0?g:0,bitmapLength:(S=(E=(v=j?.bits)===null||v===void 0?void 0:v.bitmap)===null||E===void 0?void 0:E.length)!==null&&S!==void 0?S:0,padding:(O=(N=j?.bits)===null||N===void 0?void 0:N.padding)!==null&&O!==void 0?O:0,mightContain:ae=>{var De;return(De=f?.mightContain(ae))!==null&&De!==void 0&&De}}),K}(o,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n,o,a;try{o=qr(i).toUint8Array()}catch(c){if(c instanceof gm)return Cu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Mb(o,r,s)}catch(c){return Cu(c instanceof eo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,i){return n.fe.count===i-this.rt(e,n.targetId)?0:2}rt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(s=>{let o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),r++)}),r}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&vm(a.target)){let c=new P(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,wt.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let i=de();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let r=new ku(e,n,this.Ke,this.qe,i);return this.qe=sn(),this.Qe=xO(),this.Ke=new Ve(se),r}Ue(e,n){if(!this.je(e))return;let i=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,i),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,i){if(!this.je(e))return;let r=this.ze(e);this.st(e,n)?r.Me(n,1):r.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),i&&(this.qe=this.qe.insert(n,i))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Cm,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ne(se),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||b("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Cm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function xO(){return new Ve(P.comparator)}function MO(){return new Ve(P.comparator)}var f5={asc:"ASCENDING",desc:"DESCENDING"},p5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},m5={and:"AND",or:"OR"},Pb=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Ob(t,e){return t.useProto3Json||cg(e)?e:{value:e}}function nc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $k(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function g5(t,e){return nc(t,e.toTimestamp())}function Ut(t){return B(!!t),z.fromTimestamp(function(n){let i=zr(n);return new Ze(i.seconds,i.nanos)}(t))}function t0(t,e){return kb(t,e).canonicalString()}function kb(t,e){let n=function(r){return new Re(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Hk(t){let e=Re.fromString(t);return B(Xk(e)),e}function Tm(t,e){return t0(t.databaseId,e.path)}function io(t,e){let n=Hk(e);if(n.get(1)!==t.databaseId.projectId)throw new A(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new A(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new P(Gk(n))}function zk(t,e){return t0(t.databaseId,e)}function qk(t){let e=Hk(t);return e.length===4?Re.emptyPath():Gk(e)}function Fb(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Gk(t){return B(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function NO(t,e,n){return{name:Tm(t,e),fields:n.value.mapValue.fields}}function y5(t,e,n){let i=io(t,e.name),r=Ut(e.updateTime),s=e.createTime?Ut(e.createTime):z.min(),o=new jt({mapValue:{fields:e.fields}}),a=wt.newFoundDocument(i,r,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function _5(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:k()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(B(u===void 0||typeof u=="string"),Et.fromBase64String(u||"")):(B(u===void 0||u instanceof Uint8Array),Et.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let u=l.code===void 0?w.UNKNOWN:Uk(l.code);return new A(u,l.message||"")}(o);n=new Dm(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=io(t,i.document.name),s=Ut(i.document.updateTime),o=i.document.createTime?Ut(i.document.createTime):z.min(),a=new jt({mapValue:{fields:i.document.fields}}),c=wt.newFoundDocument(r,s,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];n=new Wa(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=io(t,i.document),s=i.readTime?Ut(i.readTime):z.min(),o=wt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Wa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=io(t,i.document),s=i.removedTargetIds||[];n=new Wa([],s,r,null)}else{if(!("filter"in e))return k();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new xb(r,s),a=i.targetId;n=new bm(a,o)}}return n}function Sm(t,e){let n;if(e instanceof Zr)n={update:NO(t,e.key,e.value)};else if(e instanceof ho)n={delete:Tm(t,e.key)};else if(e instanceof Un)n={update:NO(t,e.key,e.data),updateMask:D5(e.fieldMask)};else{if(!(e instanceof Im))return k();n={verify:Tm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let a=o.transform;if(a instanceof lo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Yr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof uo)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw k()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:g5(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:k()}(t,e.precondition)),n}function Lb(t,e){let n=e.currentDocument?function(s){return s.updateTime!==void 0?vt.updateTime(Ut(s.updateTime)):s.exists!==void 0?vt.exists(s.exists):vt.none()}(e.currentDocument):vt.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let c=null;if("setToServerValue"in a)B(a.setToServerValue==="REQUEST_TIME"),c=new lo;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new Qr(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new Yr(u)}else"increment"in a?c=new uo(o,a.increment):k();let l=st.fromServerFormat(a.fieldPath);return new Sb(l,c)}(t,r)):[];if(e.update){e.update.name;let r=io(t,e.update.name),s=new jt({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new rn(l.map(u=>st.fromServerFormat(u)))}(e.updateMask);return new Un(r,s,o,n,i)}return new Zr(r,s,n,i)}if(e.delete){let r=io(t,e.delete);return new ho(r,n)}if(e.verify){let r=io(t,e.verify);return new Im(r,n)}return k()}function v5(t,e){return t&&t.length>0?(B(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?Ut(r.updateTime):Ut(s);return o.isEqual(z.min())&&(o=Ut(s)),new Ab(o,r.transformResults||[])}(n,e))):[]}function Wk(t,e){return{documents:[zk(t,e.path)]}}function Kk(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=zk(t,r);let s=function(l){if(l.length!==0)return Zk(Se.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:$a(h.field),direction:E5(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Ob(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:n,parent:r}}function Qk(t){let e=qk(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){B(i===1);let u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){let h=Yk(d);return h instanceof Se&&JD(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(p){return new ao(Ha(p.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,cg(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Wr(f,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){let h=!d.before,f=d.values||[];return new Wr(f,h)}(n.endAt)),Ck(e,r,o,s,a,"F",c,l)}function w5(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return k()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Yk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=Ha(n.unaryFilter.field);return me.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Ha(n.unaryFilter.field);return me.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ha(n.unaryFilter.field);return me.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ha(n.unaryFilter.field);return me.create(o,"!=",{nullValue:"NULL_VALUE"});default:return k()}}(t):t.fieldFilter!==void 0?function(n){return me.create(Ha(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return k()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Se.create(n.compositeFilter.filters.map(i=>Yk(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return k()}}(n.compositeFilter.op))}(t):k()}function E5(t){return f5[t]}function I5(t){return p5[t]}function b5(t){return m5[t]}function $a(t){return{fieldPath:t.canonicalString()}}function Ha(t){return st.fromServerFormat(t.fieldPath)}function Zk(t){return t instanceof me?function(n){if(n.op==="=="){if(mO(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NAN"}};if(pO(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mO(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NAN"}};if(pO(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(n.field),op:I5(n.op),value:n.value}}}(t):t instanceof Se?function(n){let i=n.getFilters().map(r=>Zk(r));return i.length===1?i[0]:{compositeFilter:{op:b5(n.op),filters:i}}}(t):k()}function D5(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Xk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ic=class t{constructor(e,n,i,r,s=z.min(),o=z.min(),a=Et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Am=class{constructor(e){this.ct=e}};function C5(t,e){let n;if(e.document)n=y5(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=P.fromSegments(e.noDocument.path),r=po(e.noDocument.readTime);n=wt.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return k();{let i=P.fromSegments(e.unknownDocument.path),r=po(e.unknownDocument.version);n=wt.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let s=new Ze(r[0],r[1]);return z.fromTimestamp(s)}(e.readTime)),n}function PO(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Rm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,o){return{name:Tm(s,o.key),fields:o.data.value.mapValue.fields,updateTime:nc(s,o.version.toTimestamp()),createTime:nc(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:fo(e.version)};else{if(!e.isUnknownDocument())return k();i.unknownDocument={path:n.path.toArray(),version:fo(e.version)}}return i}function Rm(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function fo(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function po(t){let e=new Ze(t.seconds,t.nanoseconds);return z.fromTimestamp(e)}function Zs(t,e){let n=(e.baseMutations||[]).map(s=>Lb(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let i=e.mutations.map(s=>Lb(t.ct,s)),r=Ze.fromMillis(e.localWriteTimeMs);return new Pu(e.batchId,r,n,i)}function _u(t){let e=po(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?po(t.lastLimboFreeSnapshotVersion):z.min(),i;return i=function(s){return s.documents!==void 0}(t.query)?function(s){return B(s.documents.length===1),on(Ju(qk(s.documents[0])))}(t.query):function(s){return on(Qk(s))}(t.query),new ic(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Et.fromBase64String(t.resumeToken))}function Jk(t,e){let n=fo(e.snapshotVersion),i=fo(e.lastLimboFreeSnapshotVersion),r;r=vm(e.target)?Wk(t.ct,e.target):Kk(t.ct,e.target).ut;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:co(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function eF(t){let e=Qk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Em(e,e.limit,"L"):e}function QI(t,e){return new Ou(e.largestBatchId,Lb(t.ct,e.overlayMutation))}function OO(t,e){let n=e.path.lastSegment();return[t,Bt(e.path.popLast()),n]}function kO(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:fo(i.readTime),documentKey:Bt(i.documentKey.path),largestBatchId:i.largestBatchId}}var Vb=class{getBundleMetadata(e,n){return FO(e).get(n).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:po(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,n){return FO(e).put(function(r){return{bundleId:r.id,createTime:fo(Ut(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return LO(e).get(n).next(i=>{if(i)return function(s){return{name:s.name,query:eF(s.bundledQuery),readTime:po(s.readTime)}}(i)})}saveNamedQuery(e,n){return LO(e).put(function(r){return{name:r.name,readTime:fo(Ut(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function FO(t){return ft(t,"bundles")}function LO(t){return ft(t,"namedQueries")}var xm=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return fu(e).get(OO(this.userId,n)).next(i=>i?QI(this.serializer,i):null)}getOverlays(e,n){let i=Ti();return _.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((s,o)=>{let a=new Ou(n,o);r.push(this.ht(e,a))}),_.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(o=>r.add(Bt(o.getCollectionPath())));let s=[];return r.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(fu(e).H("collectionPathOverlayIndex",a))}),_.waitFor(s)}getOverlaysForCollection(e,n,i){let r=Ti(),s=Bt(n),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return fu(e).W("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=QI(this.serializer,c);r.set(l.getKey(),l)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let s=Ti(),o,a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return fu(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,l,u)=>{let d=QI(this.serializer,l);s.size()<r||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ht(e,n){return fu(e).put(function(r,s,o){let[a,c,l]=OO(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Sm(r.ct,o.mutation)}}(this.serializer,this.userId,n))}};function fu(t){return ft(t,"documentOverlays")}var Zi=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ge(e.integerValue));else if("doubleValue"in e){let i=Ge(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),Su(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"?n.At(i):(n.At(`${i.seconds||""}`),n.dt(i.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(qr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?_k(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):k()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let i=e.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){let i=e.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(e,n){this.Et(n,37),P.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Zi.bt=new Zi;function T5(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function VO(t){let e=64-function(i){let r=0;for(let s=0;s<8;++s){let o=T5(255&i[s]);if(r+=o,o!==8)break}return r}(t);return Math.ceil(e/8)}var jb=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ct(i.value),i=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Mt(i.value),i=n.next();this.xt()}Ot(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{let r=n.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{let r=n.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Bt(e){let n=this.Lt(e),i=VO(n);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}qt(e){let n=this.Lt(e),i=VO(n);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){let n=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},Bb=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}},Ub=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Xs=class{constructor(){this.Gt=new jb,this.zt=new Bb(this.Gt),this.jt=new Ub(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Js=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function jr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=jO(t.arrayValue,e.arrayValue),n!==0?n:(n=jO(t.directionalValue,e.directionalValue),n!==0?n:P.comparator(t.documentKey,e.documentKey)))}function jO(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var Mm=class{constructor(e){this.Yt=new Ne((n,i)=>st.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let i=n;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(e){if(B(e.collectionGroup===this.collectionId),this.en)return!1;let n=cb(e);if(n!==void 0&&!this.nn(n))return!1;let i=Qs(e),r=new Set,s=0,o=0;for(;s<i.length&&this.nn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let c=i[s];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++s}for(;s<i.length;++s){let a=i[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new Ne(st.comparator),n=[];for(let i of this.Xt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new Ga(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new Ga(i.field,0))}for(let i of this.Zt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new Ga(i.field,i.dir==="asc"?0:1)));return new Ya(Ya.UNKNOWN_ID,this.collectionId,n,Tu.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function tF(t){var e,n;if(B(t instanceof me||t instanceof Se),t instanceof me){if(t instanceof _m){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>me.create(t.field,"==",s)))||[];return Se.create(r,"or")}return t}let i=t.filters.map(r=>tF(r));return Se.create(i,t.op)}function S5(t){if(t.getFilters().length===0)return[];let e=zb(tF(t));return B(nF(e)),$b(e)||Hb(e)?[e]:e.getFilters()}function $b(t){return t instanceof me}function Hb(t){return t instanceof Se&&JD(t)}function nF(t){return $b(t)||Hb(t)||function(n){if(n instanceof Se&&gb(n)){for(let i of n.getFilters())if(!$b(i)&&!Hb(i))return!1;return!0}return!1}(t)}function zb(t){if(B(t instanceof me||t instanceof Se),t instanceof me)return t;if(t.filters.length===1)return zb(t.filters[0]);let e=t.filters.map(i=>zb(i)),n=Se.create(e,t.op);return n=Nm(n),nF(n)?n:(B(n instanceof Se),B(Ja(n)),B(n.filters.length>1),n.filters.reduce((i,r)=>n0(i,r)))}function n0(t,e){let n;return B(t instanceof me||t instanceof Se),B(e instanceof me||e instanceof Se),n=t instanceof me?e instanceof me?function(r,s){return Se.create([r,s],"and")}(t,e):BO(t,e):e instanceof me?BO(e,t):function(r,s){if(B(r.filters.length>0&&s.filters.length>0),Ja(r)&&Ja(s))return Ik(r,s.getFilters());let o=gb(r)?r:s,a=gb(r)?s:r,c=o.filters.map(l=>n0(l,a));return Se.create(c,"or")}(t,e),Nm(n)}function BO(t,e){if(Ja(e))return Ik(e,t.getFilters());{let n=e.filters.map(i=>n0(t,i));return Se.create(n,"or")}}function Nm(t){if(B(t instanceof me||t instanceof Se),t instanceof me)return t;let e=t.getFilters();if(e.length===1)return Nm(e[0]);if(wk(t))return t;let n=e.map(r=>Nm(r)),i=[];return n.forEach(r=>{r instanceof me?i.push(r):r instanceof Se&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Se.create(i,t.op)}var qb=class{constructor(){this._n=new Lu}addToCollectionParentIndex(e,n){return this._n.add(n),_.resolve()}getCollectionParents(e,n){return _.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return _.resolve()}deleteFieldIndex(e,n){return _.resolve()}deleteAllFieldIndexes(e){return _.resolve()}createTargetIndexes(e,n){return _.resolve()}getDocumentsMatchingTarget(e,n){return _.resolve(null)}getIndexType(e,n){return _.resolve(0)}getFieldIndexes(e,n){return _.resolve([])}getNextCollectionGroupToUpdate(e){return _.resolve(null)}getMinOffset(e,n){return _.resolve(Cn.min())}getMinOffsetFromCollectionGroup(e,n){return _.resolve(Cn.min())}updateCollectionGroup(e,n,i){return _.resolve()}updateIndexEntries(e,n){return _.resolve()}},Lu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ne(Re.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ne(Re.comparator)).toArray()}};var nm=new Uint8Array(0),Gb=class{constructor(e,n){this.databaseId=n,this.an=new Lu,this.un=new Ri(i=>co(i),(i,r)=>Xu(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let s={collectionId:i,parent:Bt(r)};return UO(e).put(s)}return _.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[ck(n),""],!1,!0);return UO(e).W(r).next(s=>{for(let o of s){if(o.collectionId!==n)break;i.push(Ci(o.parent))}return i})}addFieldIndex(e,n){let i=pu(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;let s=i.add(r);if(n.indexState){let o=Va(e);return s.next(a=>{o.put(kO(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){let i=pu(e),r=Va(e),s=La(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=pu(e),i=La(e),r=Va(e);return n.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(e,n){return _.forEach(this.cn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let s=new Mm(i).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){let i=La(e),r=!0,s=new Map;return _.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=de(),a=[];return _.forEach(s,(c,l)=>{b("IndexedDbIndexManager",`Using index ${function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(O=>`${O.fieldPath}:${O.kind}`).join(",")}`}(c)} to execute ${co(n)}`);let u=function(N,O){let K=cb(O);if(K===void 0)return null;for(let j of wm(N,K.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(l,c),d=function(N,O){let K=new Map;for(let j of Qs(O))for(let ae of wm(N,j.fieldPath))switch(ae.op){case"==":case"in":K.set(j.fieldPath.canonicalString(),ae.value);break;case"not-in":case"!=":return K.set(j.fieldPath.canonicalString(),ae.value),Array.from(K.values())}return null}(l,c),h=function(N,O){let K=[],j=!0;for(let ae of Qs(O)){let De=ae.kind===0?wO(N,ae.fieldPath,N.startAt):EO(N,ae.fieldPath,N.startAt);K.push(De.value),j&&(j=De.inclusive)}return new Wr(K,j)}(l,c),f=function(N,O){let K=[],j=!0;for(let ae of Qs(O)){let De=ae.kind===0?EO(N,ae.fieldPath,N.endAt):wO(N,ae.fieldPath,N.endAt);K.push(De.value),j&&(j=De.inclusive)}return new Wr(K,j)}(l,c),p=this.hn(c,l,h),g=this.hn(c,l,f),v=this.Pn(c,l,d),E=this.In(c.indexId,u,p,h.inclusive,g,f.inclusive,v);return _.forEach(E,S=>i.j(S,n.limit).next(N=>{N.forEach(O=>{let K=P.fromSegments(O.documentKey);o.has(K)||(o=o.add(K),a.push(K))})}))}).next(()=>a)}return _.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=S5(Se.create(e.filters,"and")).map(i=>Cb(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,i,r,s,o,a){let c=(n!=null?n.length:1)*Math.max(i.length,s.length),l=c/(n!=null?n.length:1),u=[];for(let d=0;d<c;++d){let h=n?this.Tn(n[d/l]):nm,f=this.En(e,h,i[d%l],r),p=this.dn(e,h,s[d%l],o),g=a.map(v=>this.En(e,h,v,!0));u.push(...this.createRange(f,p,g))}return u}En(e,n,i,r){let s=new Js(e,P.empty(),n,i);return r?s:s.Jt()}dn(e,n,i,r){let s=new Js(e,P.empty(),n,i);return r?s.Jt():s}ln(e,n){let i=new Mm(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(let a of s)i.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let i=2,r=this.cn(n);return _.forEach(r,s=>this.ln(e,s).next(o=>{o?i!==0&&o.fields.length<function(c){let l=new Ne(st.comparator),u=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:l=l.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(l=l.add(d.field));return l.size+(u?1:0)}(s)&&(i=1):i=0})).next(()=>function(o){return o.limit!==null}(n)&&r.length>1&&i===2?1:i)}An(e,n){let i=new Xs;for(let r of Qs(e)){let s=n.data.field(r.fieldPath);if(s==null)return null;let o=i.Ht(r.kind);Zi.bt.Pt(s,o)}return i.Wt()}Tn(e){let n=new Xs;return Zi.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let i=new Xs;return Zi.bt.Pt(Mu(this.databaseId,n),i.Ht(function(s){let o=Qs(s);return o.length===0?0:o[o.length-1].kind}(e))),i.Wt()}Pn(e,n,i){if(i===null)return[];let r=[];r.push(new Xs);let s=0;for(let o of Qs(e)){let a=i[s++];for(let c of r)if(this.Vn(n,o.fieldPath)&&Nu(a))r=this.mn(r,o,a);else{let l=c.Ht(o.kind);Zi.bt.Pt(a,l)}}return this.fn(r)}hn(e,n,i){return this.Pn(e,n,i.position)}fn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Wt();return n}mn(e,n,i){let r=[...e],s=[];for(let o of i.arrayValue.values||[])for(let a of r){let c=new Xs;c.seed(a.Wt()),Zi.bt.Pt(o,c.Ht(n.kind)),s.push(c)}return s}Vn(e,n){return!!e.filters.find(i=>i instanceof me&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=pu(e),r=Va(e);return(n?i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.W()).next(s=>{let o=[];return _.forEach(s,a=>r.get([a.indexId,this.uid]).next(c=>{o.push(function(u,d){let h=d?new Tu(d.sequenceNumber,new Cn(po(d.readTime),new P(Ci(d.documentKey)),d.largestBatchId)):Tu.empty(),f=u.fields.map(([p,g])=>new Ga(st.fromServerFormat(p),g));return new Ya(u.indexId,u.collectionGroup,f,h)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:se(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=pu(e),s=Va(e);return this.gn(e).next(o=>r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>_.forEach(a,c=>s.put(kO(c.indexId,this.uid,o,i)))))}updateIndexEntries(e,n){let i=new Map;return _.forEach(n,(r,s)=>{let o=i.get(r.collectionGroup);return(o?_.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),_.forEach(a,c=>this.pn(e,r,c).next(l=>{let u=this.yn(s,c);return l.isEqual(u)?_.resolve():this.wn(e,s,c,l,u)}))))})}Sn(e,n,i,r){return La(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,n.key),documentKey:n.key.path.toArray()})}bn(e,n,i,r){return La(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,n.key),n.key.path.toArray()])}pn(e,n,i){let r=La(e),s=new Ne(jr);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,n)])},(o,a)=>{s=s.add(new Js(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let i=new Ne(jr),r=this.An(n,e);if(r==null)return i;let s=cb(n);if(s!=null){let o=e.data.field(s.fieldPath);if(Nu(o))for(let a of o.arrayValue.values||[])i=i.add(new Js(n.indexId,e.key,this.Tn(a),r))}else i=i.add(new Js(n.indexId,e.key,nm,r));return i}wn(e,n,i,r,s){b("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let o=[];return function(c,l,u,d,h){let f=c.getIterator(),p=l.getIterator(),g=Fa(f),v=Fa(p);for(;g||v;){let E=!1,S=!1;if(g&&v){let N=u(g,v);N<0?S=!0:N>0&&(E=!0)}else g!=null?S=!0:E=!0;E?(d(v),v=Fa(p)):S?(h(g),g=Fa(f)):(g=Fa(f),v=Fa(p))}}(r,s,jr,a=>{o.push(this.Sn(e,n,i,a))},a=>{o.push(this.bn(e,n,i,a))}),_.waitFor(o)}gn(e){let n=1;return Va(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((o,a)=>jr(o,a)).filter((o,a,c)=>!a||jr(o,c[a-1])!==0);let r=[];r.push(e);for(let o of i){let a=jr(o,e),c=jr(o,n);if(a===0)r[0]=e.Jt();else if(a>0&&c<0)r.push(o),r.push(o.Jt());else if(c>0)break}r.push(n);let s=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];let a=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,nm,[]],c=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,nm,[]];s.push(IDBKeyRange.bound(a,c))}return s}Dn(e,n){return jr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next($O)}getMinOffset(e,n){return _.mapArray(this.cn(n),i=>this.ln(e,i).next(r=>r||k())).next($O)}};function UO(t){return ft(t,"collectionParents")}function La(t){return ft(t,"indexEntries")}function pu(t){return ft(t,"indexConfiguration")}function Va(t){return ft(t,"indexState")}function $O(t){B(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;QD(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Cn(e.readTime,e.documentKey,n)}var HO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bn=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function iF(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId),a=0,c=i.Y({range:o},(u,d,h)=>(a++,h.delete()));s.push(c.next(()=>{B(a===1)}));let l=[];for(let u of n.mutations){let d=fk(e,u.key.path,n.batchId);s.push(r.delete(d)),l.push(u.key)}return _.waitFor(s).next(()=>l)}function Pm(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw k();e=t.noDocument}return JSON.stringify(e).length}bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(41943040,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);var Om=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(e,n,i,r){B(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new t(s,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Br(e).Y({index:"userMutationsIndex",range:i},(r,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let s=za(e),o=Br(e);return o.add({}).next(a=>{B(typeof a=="number");let c=new Pu(a,n,i,r),l=function(f,p,g){let v=g.baseMutations.map(S=>Sm(f.ct,S)),E=g.mutations.map(S=>Sm(f.ct,S));return{userId:p,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:v,mutations:E}}(this.serializer,this.userId,c),u=[],d=new Ne((h,f)=>se(h.canonicalString(),f.canonicalString()));for(let h of r){let f=fk(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(l)),u.push(s.put(f,M6))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),_.waitFor(u).next(()=>c)})}lookupMutationBatch(e,n){return Br(e).get(n).next(i=>i?(B(i.userId===this.userId),Zs(this.serializer,i)):null)}vn(e,n){return this.Cn[n]?_.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.Cn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),s=null;return Br(e).Y({index:"userMutationsIndex",range:r},(o,a,c)=>{a.userId===this.userId&&(B(a.batchId>=i),s=Zs(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Br(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Br(e).W("userMutationsIndex",n).next(i=>i.map(r=>Zs(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=om(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return za(e).Y({range:r},(o,a,c)=>{let[l,u,d]=o,h=Ci(u);if(l===this.userId&&n.path.isEqual(h))return Br(e).get(d).next(f=>{if(!f)throw k();B(f.userId===this.userId),s.push(Zs(this.serializer,f))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ne(se),r=[];return n.forEach(s=>{let o=om(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=za(e).Y({range:a},(l,u,d)=>{let[h,f,p]=l,g=Ci(f);h===this.userId&&s.path.isEqual(g)?i=i.add(p):d.done()});r.push(c)}),_.waitFor(r).next(()=>this.Fn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,s=om(this.userId,i),o=IDBKeyRange.lowerBound(s),a=new Ne(se);return za(e).Y({range:o},(c,l,u)=>{let[d,h,f]=c,p=Ci(h);d===this.userId&&i.isPrefixOf(p)?p.length===r&&(a=a.add(f)):u.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let i=[],r=[];return n.forEach(s=>{r.push(Br(e).get(s).next(o=>{if(o===null)throw k();B(o.userId===this.userId),i.push(Zs(this.serializer,o))}))}),_.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return iF(e.ae,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),_.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return _.resolve();let i=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return za(e).Y({range:i},(s,o,a)=>{if(s[0]===this.userId){let c=Ci(s[1]);r.push(c)}else a.done()}).next(()=>{B(r.length===0)})})}containsKey(e,n){return rF(e,this.userId,n)}xn(e){return sF(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function rF(t,e,n){let i=om(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i),o=!1;return za(t).Y({range:s,J:!0},(a,c,l)=>{let[u,d,h]=a;u===e&&d===r&&(o=!0),l.done()}).next(()=>o)}function Br(t){return ft(t,"mutations")}function za(t){return ft(t,"documentMutations")}function sF(t){return ft(t,"mutationQueues")}var rc=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};var Wb=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{let i=new rc(n.highestTargetId);return n.highestTargetId=i.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>z.fromTimestamp(new Ze(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Ln(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.kn(e,r)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(i=>(i.targetCount+=1,this.Qn(n,i),this.kn(e,i))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ja(e).delete(n.targetId)).next(()=>this.Ln(e)).next(i=>(B(i.targetCount>0),i.targetCount-=1,this.kn(e,i)))}removeTargets(e,n,i){let r=0,s=[];return ja(e).Y((o,a)=>{let c=_u(a);c.sequenceNumber<=n&&i.get(c.targetId)===null&&(r++,s.push(this.removeTargetData(e,c)))}).next(()=>_.waitFor(s)).next(()=>r)}forEachTarget(e,n){return ja(e).Y((i,r)=>{let s=_u(r);n(s)})}Ln(e){return zO(e).get("targetGlobalKey").next(n=>(B(n!==null),n))}kn(e,n){return zO(e).put("targetGlobalKey",n)}qn(e,n){return ja(e).put(Jk(this.serializer,n))}Qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){let i=co(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),s=null;return ja(e).Y({range:r,index:"queryTargetsIndex"},(o,a,c)=>{let l=_u(a);Xu(n,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,n,i){let r=[],s=Ur(e);return n.forEach(o=>{let a=Bt(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),_.waitFor(r)}removeMatchingKeys(e,n,i){let r=Ur(e);return _.forEach(n,s=>{let o=Bt(s.path);return _.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){let i=Ur(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Ur(e),s=de();return r.Y({range:i,J:!0},(o,a,c)=>{let l=Ci(o[1]),u=new P(l);s=s.add(u)}).next(()=>s)}containsKey(e,n){let i=Bt(n.path),r=IDBKeyRange.bound([i],[ck(i)],!1,!0),s=0;return Ur(e).Y({index:"documentTargetsIndex",J:!0,range:r},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}_t(e,n){return ja(e).get(n).next(i=>i?_u(i):null)}};function ja(t){return ft(t,"targets")}function zO(t){return ft(t,"targetGlobal")}function Ur(t){return ft(t,"targetDocuments")}function qO([t,e],[n,i]){let r=se(t,n);return r===0?se(e,i):r}var Kb=class{constructor(e){this.Kn=e,this.buffer=new Ne(qO),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();qO(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},Qb=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){b("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>m(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){es(n)?b("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Jr(n)}yield this.zn(3e5)}))}},Yb=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return _.resolve(nn._e);let i=new Kb(n);return this.jn.forEachTarget(e,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(e,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(b("LruGarbageCollector","Garbage collection skipped; disabled"),_.resolve(HO)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(b("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HO):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let i,r,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(b("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,n))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(l=Date.now(),Ba()<=pe.DEBUG&&b("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),_.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}};function A5(t,e){return new Yb(t,e)}var Zb=class{constructor(e,n){this.db=e,this.garbageCollector=A5(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Zn(e){let n=0;return this.Jn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(i,r)=>n(r))}addReference(e,n,i){return im(e,i)}removeReference(e,n,i){return im(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return im(e,n)}er(e,n){return function(r,s){let o=!1;return sF(r).Z(a=>rF(r,a,s).next(c=>(c&&(o=!0),_.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],s=0;return this.Xn(e,(o,a)=>{if(a<=n){let c=this.er(e,o).next(l=>{if(!l)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,z.min()),Ur(e).delete(function(d){return[0,Bt(d.path)]}(o))))});r.push(c)}}).next(()=>_.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return im(e,n)}Xn(e,n){let i=Ur(e),r,s=nn._e;return i.Y({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==nn._e&&n(new P(Ci(r)),s),s=l,r=c):s=nn._e}).next(()=>{s!==nn._e&&n(new P(Ci(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function im(t,e){return Ur(t).put(function(i,r){return{targetId:0,path:Bt(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var km=class{constructor(){this.changes=new Ri(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?_.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Xb=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return Ks(e).put(i)}removeEntry(e,n,i){return Ks(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Rm(o),a[a.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.tr(e,i)))}getEntry(e,n){let i=wt.newInvalidDocument(n);return Ks(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(mu(n))},(r,s)=>{i=this.nr(n,s)}).next(()=>i)}rr(e,n){let i={size:0,document:wt.newInvalidDocument(n)};return Ks(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(mu(n))},(r,s)=>{i={document:this.nr(n,s),size:Pm(s)}}).next(()=>i)}getEntries(e,n){let i=sn();return this.ir(e,n,(r,s)=>{let o=this.nr(r,s);i=i.insert(r,o)}).next(()=>i)}sr(e,n){let i=sn(),r=new Ve(P.comparator);return this.ir(e,n,(s,o)=>{let a=this.nr(s,o);i=i.insert(s,a),r=r.insert(s,Pm(o))}).next(()=>({documents:i,_r:r}))}ir(e,n,i){if(n.isEmpty())return _.resolve();let r=new Ne(KO);n.forEach(c=>r=r.add(c));let s=IDBKeyRange.bound(mu(r.first()),mu(r.last())),o=r.getIterator(),a=o.getNext();return Ks(e).Y({index:"documentKeyIndex",range:s},(c,l,u)=>{let d=P.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&KO(a,d)<0;)i(a,null),a=o.getNext();a&&a.isEqual(d)&&(i(a,l),a=o.hasNext()?o.getNext():null),a?u.U(mu(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,s){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Rm(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ks(e).W(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let u=sn();for(let d of l){let h=this.nr(P.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(ed(n,h)||r.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,n,i,r){let s=sn(),o=WO(n,i),a=WO(n,Cn.max());return Ks(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,u)=>{let d=this.nr(P.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(d.key,d),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(e){return new Jb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return GO(e).get("remoteDocumentGlobalKey").next(n=>(B(!!n),n))}tr(e,n){return GO(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let i=C5(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(z.min())))return i}return wt.newInvalidDocument(e)}};function oF(t){return new Xb(t)}var Jb=class extends km{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Ri(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new Ne((s,o)=>se(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=PO(this.ar.serializer,o);r=r.add(s.path.popLast());let l=Pm(c);i+=l-a.size,n.push(this.ar.addEntry(e,s,c))}else if(i-=a.size,this.trackRemovals){let c=PO(this.ar.serializer,o.convertToNoDocument(z.min()));n.push(this.ar.addEntry(e,s,c))}}),r.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,i)),_.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(i=>(this.ur.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:i,_r:r})=>(r.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:i.get(s).readTime})}),i))}};function GO(t){return ft(t,"remoteDocumentGlobal")}function Ks(t){return ft(t,"remoteDocumentsV14")}function mu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function WO(t,e){let n=e.documentKey.path.toArray();return[t,Rm(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function KO(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=se(n[s],i[s]),r)return r;return r=se(n.length,i.length),r||(r=se(n[n.length-2],i[i.length-2]),r||se(n[n.length-1],i[i.length-1]))}var eD=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Fm=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Iu(i.mutation,r,rn.empty(),Ze.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,de()).next(()=>i))}getLocalViewOfDocuments(e,n,i=de()){let r=Ti();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=yu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let i=Ti();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,de()))}populateOverlays(e,n,i){let r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=sn(),o=Eu(),a=function(){return Eu()}();return n.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof Un)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Iu(u.mutation,l,u.mutation.getFieldMask(),Ze.now())):o.set(l.key,rn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var d;return a.set(l,new eD(u,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let i=Eu(),r=new Ve((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=i.get(c)||rn.empty();u=a.applyToLocalView(l,u),i.set(c,u);let d=(r.get(a.batchId)||de()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=Nk();u.forEach(h=>{if(!s.has(h)){let f=jk(n.get(h),i.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return _.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return P.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Tk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):_.resolve(Ti()),a=-1,c=s;return o.next(l=>_.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?_.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,de())).next(u=>({batchId:a,changes:Mk(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new P(n)).next(i=>{let r=yu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let s=n.collectionGroup,o=yu();return this.indexManager.getCollectionParents(e,s).next(a=>_.forEach(a,c=>{let l=function(d,h){return new Kr(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,wt.newInvalidDocument(u)))});let a=yu();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&Iu(u.mutation,l,rn.empty(),Ze.now()),ed(n,l)&&(a=a.insert(c,l))}),a})}};var tD=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return _.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ut(r.createTime)}}(n)),_.resolve()}getNamedQuery(e,n){return _.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:eF(r.bundledQuery),readTime:Ut(r.readTime)}}(n)),_.resolve()}};var nD=class{constructor(){this.overlays=new Ve(P.comparator),this.hr=new Map}getOverlay(e,n){return _.resolve(this.overlays.get(n))}getOverlays(e,n){let i=Ti();return _.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),_.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),_.resolve()}getOverlaysForCollection(e,n,i){let r=Ti(),s=n.length+1,o=new P(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return _.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Ve((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>i){let u=s.get(l.largestBatchId);u===null&&(u=Ti(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Ti(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return _.resolve(a)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Ou(n,i));let s=this.hr.get(n);s===void 0&&(s=de(),this.hr.set(n,s)),this.hr.set(n,s.add(i.key))}};var Vu=class{constructor(){this.Pr=new Ne(tt.Ir),this.Tr=new Ne(tt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let i=new tt(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new tt(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){let n=new P(new Re([])),i=new tt(n,e),r=new tt(n,e+1),s=[];return this.Tr.forEachInRange([i,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new P(new Re([])),i=new tt(n,e),r=new tt(n,e+1),s=de();return this.Tr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new tt(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},tt=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return P.comparator(e.key,n.key)||se(e.pr,n.pr)}static Er(e,n){return se(e.pr,n.pr)||P.comparator(e.key,n.key)}};var iD=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ne(tt.Ir)}checkEmpty(e){return _.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Pu(s,n,i,r);this.mutationQueue.push(o);for(let a of r)this.wr=this.wr.add(new tt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return _.resolve(o)}lookupMutationBatch(e,n){return _.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.br(i),s=r<0?0:r;return _.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return _.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return _.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new tt(n,0),r=new tt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],o=>{let a=this.Sr(o.pr);s.push(a)}),_.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ne(se);return n.forEach(r=>{let s=new tt(r,0),o=new tt(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{i=i.add(a.pr)})}),_.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,s=i;P.isDocumentKey(s)||(s=s.child(""));let o=new tt(new P(s),0),a=new Ne(se);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.pr)),!0)},o),_.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){B(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return _.forEach(n.mutations,r=>{let s=new tt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){let i=new tt(n,0),r=this.wr.firstAfterOrEqual(i);return _.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,_.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var rD=class{constructor(e){this.vr=e,this.docs=function(){return new Ve(P.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return _.resolve(i?i.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let i=sn();return n.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():wt.newInvalidDocument(r))}),_.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=sn(),o=n.path,a=new P(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||QD(uk(u),i)<=0||(r.has(u.key)||ed(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return _.resolve(s)}getAllFromCollectionGroup(e,n,i,r){k()}Fr(e,n){return _.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new sD(this)}getSize(e){return _.resolve(this.size)}},sD=class extends km{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),_.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var oD=class{constructor(e){this.persistence=e,this.Mr=new Ri(n=>co(n),Xu),this.lastRemoteSnapshotVersion=z.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Vu,this.targetCount=0,this.Br=rc.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),_.resolve()}getLastRemoteSnapshotVersion(e){return _.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),_.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),_.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new rc(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,_.resolve()}updateTargetData(e,n){return this.qn(n),_.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,_.resolve()}removeTargets(e,n,i){let r=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),_.waitFor(s).next(()=>r)}getTargetCount(e){return _.resolve(this.targetCount)}getTargetData(e,n){let i=this.Mr.get(n)||null;return _.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),_.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),_.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),_.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Nr.gr(n);return _.resolve(i)}containsKey(e,n){return _.resolve(this.Nr.containsKey(n))}};var Lm=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new nn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new oD(this),this.indexManager=new qb,this.remoteDocumentCache=function(r){return new rD(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new Am(n),this.$r=new tD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Lr[e.toKey()];return i||(i=new iD(n,this.referenceDelegate),this.Lr[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){b("MemoryPersistence","Starting transaction:",e);let r=new aD(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(e,n){return _.or(Object.values(this.Lr).map(i=>()=>i.containsKey(e,n)))}},aD=class extends fm{constructor(e){super(),this.currentSequenceNumber=e}},Vm=class t{constructor(e){this.persistence=e,this.zr=new Vu,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw k()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),_.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),_.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),_.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _.forEach(this.Jr,i=>{let r=P.fromPath(i);return this.Yr(e,r).next(s=>{s||n.removeEntry(r,z.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return _.or([()=>_.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var cD=class{constructor(e){this.serializer=e}N(e,n,i,r){let s=new pm("createOrUpgrade",n);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dO,{unique:!0}),c.createObjectStore("documentMutations")}(e),QO(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=_.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),QO(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:z.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(s))),i<4&&r>=4&&(i!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").W().next(u=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dO,{unique:!0});let d=l.store("mutations"),h=u.map(f=>d.put(f));return _.waitFor(h)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(o=o.next(()=>this.Xr(s))),i<6&&r>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),i<7&&r>=7&&(o=o.next(()=>this.ti(s))),i<8&&r>=8&&(o=o.next(()=>this.ni(e,s))),i<9&&r>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(o=o.next(()=>this.ri(s))),i<11&&r>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:H6});l.createIndex("collectionPathOverlayIndex",z6,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",q6,{unique:!1})})(e)})),i<13&&r>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:N6});l.createIndex("documentKeyIndex",P6),l.createIndex("collectionGroupIndex",O6)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.si(e,s))),i<15&&r>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:j6}).createIndex("sequenceNumberIndex",B6,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:U6}).createIndex("documentKeyIndex",$6,{unique:!1})}(e))),o}ei(e){let n=0;return e.store("remoteDocuments").Y((i,r)=>{n+=Pm(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.W().next(r=>_.forEach(r,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",o).next(a=>_.forEach(a,c=>{B(c.userId===s.userId);let l=Zs(this.serializer,c);return iF(e,s.userId,l).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let s=[];return i.Y((o,a)=>{let c=new Re(o),l=function(d){return[0,Bt(d)]}(c);s.push(n.get(l).next(u=>u?_.resolve():(d=>n.put({targetId:0,path:Bt(d),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>_.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:V6});let i=n.store("collectionParents"),r=new Lu,s=o=>{if(r.add(o)){let a=o.lastSegment(),c=o.popLast();return i.put({collectionId:a,parent:Bt(c)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{let c=new Re(o);return s(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,c],l)=>{let u=Ci(a);return s(u.popLast())}))}ri(e){let n=e.store("targets");return n.Y((i,r)=>{let s=_u(r),o=Jk(this.serializer,s);return n.put(o)})}ii(e,n){let i=n.store("remoteDocuments"),r=[];return i.Y((s,o)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new P(Re.fromString(d.document.name).popFirst(5)):d.noDocument?P.fromSegments(d.noDocument.path):d.unknownDocument?P.fromSegments(d.unknownDocument.path):k()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(l))}).next(()=>_.waitFor(r))}si(e,n){let i=n.store("mutations"),r=oF(this.serializer),s=new Lm(Vm.Hr,this.serializer.ct);return i.W().next(o=>{let a=new Map;return o.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:de();Zs(this.serializer,c).keys().forEach(d=>u=u.add(d)),a.set(c.userId,u)}),_.forEach(a,(c,l)=>{let u=new ht(l),d=xm.lt(this.serializer,u),h=s.getIndexManager(u),f=Om.lt(u,this.serializer,h,s.referenceDelegate);return new Fm(r,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new Au(n,nn._e),c).next()})})}};function QO(t){t.createObjectStore("targetDocuments",{keyPath:F6}).createIndex("documentTargetsIndex",L6,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",k6,{unique:!0}),t.createObjectStore("targetGlobal")}var YI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",lD=class t{constructor(e,n,i,r,s,o,a,c,l,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.oi=s,this.window=o,this.document=a,this._i=l,this.ai=u,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!t.D())throw new A(w.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Zb(this,r),this.Ti=n+"main",this.serializer=new Am(c),this.Ei=new so(this.Ti,this.ui,new cD(this.serializer)),this.Qr=new Wb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=oF(this.serializer),this.$r=new Vb,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,u===!1&&Ye("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new A(w.FAILED_PRECONDITION,YI);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new nn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>m(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>m(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>m(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(es(e))return b("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return b("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return gu(e).get("owner").next(n=>_.resolve(this.Si(n)))}bi(e){return rm(e).delete(this.clientId)}Di(){return m(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=ft(n,"clientMetadata");return i.W().next(r=>{let s=this.vi(r,18e5),o=r.filter(a=>s.indexOf(a)===-1);return _.forEach(o,a=>i.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?_.resolve(!0):gu(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new A(w.FAILED_PRECONDITION,YI);return!1}}return!(!this.networkEnabled||!this.inForeground)||rm(e).W().next(i=>this.vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let s=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&b("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return m(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Au(e,nn._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Bi()})}vi(e,n){return e.filter(i=>this.Ci(i.updateTimeMs,n)&&!this.Mi(i.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>rm(e).W().next(n=>this.vi(n,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Om.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Gb(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return xm.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,i){b("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",s=function(c){return c===15?W6:c===14?gk:c===13?mk:c===12?G6:c===11?pk:void k()}(this.ui),o;return this.Ei.runTransaction(e,r,s,a=>(o=new Au(a,this.kr?this.kr.next():nn._e),n==="readwrite-primary"?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw Ye(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new A(w.FAILED_PRECONDITION,dk);return i(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return gu(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new A(w.FAILED_PRECONDITION,YI)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gu(e).put("owner",n)}static D(){return so.D()}yi(e){let n=gu(e);return n.get("owner").next(i=>this.Si(i)?(b("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):_.resolve())}Ci(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(Ye(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;eE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let i=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return b("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ye("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Ye("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function gu(t){return ft(t,"owner")}function rm(t){return ft(t,"clientMetadata")}function aF(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var uD=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=de(),r=de();for(let s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new t(e,n.fromCache,i,r)}};var dD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var jm=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return eE()?8:so.v(ze())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new dD;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(Ba()<=pe.DEBUG&&b("QueryEngine","SDK will not create cache indexes for query:",Ua(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),_.resolve()):(Ba()<=pe.DEBUG&&b("QueryEngine","Query:",Ua(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(Ba()<=pe.DEBUG&&b("QueryEngine","The SDK decides to create cache indexes for query:",Ua(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,on(n))):_.resolve())}ji(e,n){if(IO(n))return _.resolve(null);let i=on(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Em(n,null,"F"),i=on(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=de(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,Em(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,i,r){return IO(n)||r.isEqual(z.min())?_.resolve(null):this.zi.getDocuments(e,i).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,i,r)?_.resolve(null):(Ba()<=pe.DEBUG&&b("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ua(n)),this.es(e,o,n,lk(r,-1)).next(a=>a))})}Zi(e,n){let i=new Ne(Rk(e));return n.forEach((r,s)=>{ed(e,s)&&(i=i.add(s))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(e,n,i){return Ba()<=pe.DEBUG&&b("QueryEngine","Using full collection scan to execute query:",Ua(n)),this.zi.getDocumentsMatchingQuery(e,n,Cn.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var hD=class{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new Ve(se),this.rs=new Ri(s=>co(s),Xu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function cF(t,e,n,i){return new hD(t,e,n,i)}function lF(t,e){return m(this,null,function*(){let n=V(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=de();for(let l of r){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(i,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function R5(t,e){let n=V(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,h=d.keys(),f=_.resolve();return h.forEach(p=>{f=f.next(()=>u.getEntry(c,p)).next(g=>{let v=l.docVersions.get(p);B(v!==null),g.version.compareTo(v)<0&&(d.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),u.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function uF(t){let e=V(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function x5(t,e){let n=V(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let a=[];e.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Et.EMPTY_BYTE_STRING,z.min()).withLastLimboFreeSnapshotVersion(z.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(d,f),function(g,v,E){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(h,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let c=sn(),l=de();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(M5(s,o,e.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!i.isEqual(z.min())){let u=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return _.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.ns=r,s))}function M5(t,e,n){let i=de(),r=de();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=sn();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(z.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):b("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:r}})}function N5(t,e){let n=V(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Bm(t,e){let n=V(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(s=>s?(r=s,_.resolve(r)):n.Qr.allocateTargetId(i).next(o=>(r=new ic(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}function sc(t,e,n){return m(this,null,function*(){let i=V(t),r=i.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!es(o))throw o;b("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function fD(t,e,n){let i=V(t),r=z.min(),s=de();return i.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){let d=V(c),h=d.rs.get(u);return h!==void 0?_.resolve(d.ns.get(h)):d.Qr.getTargetData(l,u)}(i,o,on(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.ts.getDocumentsMatchingQuery(o,e,n?r:z.min(),n?s:de())).next(a=>(fF(i,Ak(e),a),{documents:a,hs:s})))}function dF(t,e){let n=V(t),i=V(n.Qr),r=n.ns.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i._t(s,e).next(o=>o?o.target:null))}function hF(t,e){let n=V(t),i=n.ss.get(e)||z.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.os.getAllFromCollectionGroup(r,e,lk(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(fF(n,e,r),r))}function fF(t,e,n){let i=t.ss.get(e)||z.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.ss.set(e,i)}function YO(t,e){return`firestore_clients_${t}_${e}`}function ZO(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function ZI(t,e){return`firestore_targets_${t}_${e}`}var Um=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Es(e,n,i){let r=JSON.parse(i),s,o=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new A(r.error.code,r.error.message))),o?new t(e,n,r.state,s):(Ye("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},bu=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Es(e,n){let i=JSON.parse(n),r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new A(i.error.code,i.error.message))),s?new t(e,i.state,r):(Ye("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},$m=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=e0();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=hk(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new t(e,s):(Ye("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},pD=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Ye("SharedClientState",`Failed to parse online state: ${e}`),null)}},ju=class{constructor(){this.activeTargetIds=e0()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Du=class{constructor(e,n,i,r,s){this.window=e,this.oi=n,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Ve(se),this.started=!1,this.ys=[];let o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=YO(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new ju),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return m(this,null,function*(){let e=yield this.syncEngine.Li();for(let i of e){if(i===this.Vs)continue;let r=this.getItem(YO(this.persistenceKey,i));if(r){let s=$m.Es(i,r);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let i=this.xs(n);i&&this.Os(i)}for(let i of this.ys)this.gs(i);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,i){this.Bs(e,n,i),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(ZI(this.persistenceKey,e));if(i){let r=bu.Es(e,i);r&&(n=r.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ZI(this.persistenceKey,e))}updateQueryState(e,n,i){this.qs(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Ls(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return b("SharedClientState","READ",e,n),n}setItem(e,n){b("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){b("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(b("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Ye("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>m(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let i=this.$s(n.key);return this.Us(i,null)}{let i=this.Ws(n.key,n.newValue);if(i)return this.Us(i.clientId,i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let i=this.Gs(n.key,n.newValue);if(i)return this.zs(i)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let i=this.js(n.key,n.newValue);if(i)return this.Hs(i)}}else if(n.key===this.vs){if(n.newValue!==null){let i=this.xs(n.newValue);if(i)return this.Os(i)}}else if(n.key===this.Ss){let i=function(s){let o=nn._e;if(s!=null)try{let a=JSON.parse(s);B(typeof a=="number"),o=a}catch(a){Ye("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);i!==nn._e&&this.sequenceNumberHandler(i)}else if(n.key===this.Fs){let i=this.Js(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,i){let r=new Um(this.currentUser,e,n,i),s=ZO(this.persistenceKey,this.currentUser,e);this.setItem(s,r.ds())}Ls(e){let n=ZO(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,i){let r=ZI(this.persistenceKey,e),s=new bu(e,n,i);this.setItem(r,s.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let i=this.$s(e);return $m.Es(i,n)}Gs(e,n){let i=this.Ds.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return Um.Es(new ht(s),r,n)}js(e,n){let i=this.Cs.exec(e),r=Number(i[1]);return bu.Es(r,n)}xs(e){return pD.Es(e)}Js(e){return JSON.parse(e)}zs(e){return m(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);b("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let i=n?this.ps.insert(e,n):this.ps.remove(e),r=this.Ns(this.ps),s=this.Ns(i),o=[],a=[];return s.forEach(c=>{r.has(c)||o.push(c)}),r.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=i})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=e0();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},Hm=class{constructor(){this.no=new ju,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new ju,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var mD=class{io(e){}shutdown(){}};var zm=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){b("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){b("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var sm=null;function XI(){return sm===null?sm=function(){return 268435456+Math.round(2147483648*Math.random())}():sm++,"0x"+sm.toString(16)}var P5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var gD=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var Rt="WebChannelConnection",yD=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=i+"://"+n.host,this.po=`projects/${r}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get wo(){return!1}So(n,i,r,s,o){let a=XI(),c=this.bo(n,i.toUriEncodedString());b("RestConnection",`Sending RPC '${n}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,s,o),this.Co(n,c,l,r).then(u=>(b("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Cu("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",r),u})}vo(n,i,r,s,o,a){return this.So(n,i,r,s,o)}Do(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}bo(n,i){let r=P5[n];return`${this.fo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,i,r){let s=XI();return new Promise((o,a)=>{let c=new oO;c.setWithCredentials(!0),c.listenOnce(rO.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case tm.NO_ERROR:let u=c.getResponseJson();b(Rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case tm.TIMEOUT:b(Rt,`RPC '${e}' ${s} timed out`),a(new A(w.DEADLINE_EXCEEDED,"Request time out"));break;case tm.HTTP_ERROR:let d=c.getStatus();if(b(Rt,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let p=function(v){let E=v.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(E)>=0?E:w.UNKNOWN}(f.status);a(new A(p,f.message))}else a(new A(w.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new A(w.UNAVAILABLE,"Connection failed."));break;default:k()}}finally{b(Rt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(r);b(Rt,`RPC '${e}' ${s} sending request:`,r),c.send(n,"POST",l,i,15)})}Fo(e,n,i){let r=XI(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=nO(),a=iO(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;let u=s.join("");b(Rt,`Creating RPC '${e}' stream ${r}: ${u}`,c);let d=o.createWebChannel(u,c),h=!1,f=!1,p=new gD({lo:v=>{f?b(Rt,`Not sending because RPC '${e}' stream ${r} is closed:`,v):(h||(b(Rt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),b(Rt,`RPC '${e}' stream ${r} sending:`,v),d.send(v))},ho:()=>d.close()}),g=(v,E,S)=>{v.listen(E,N=>{try{S(N)}catch(O){setTimeout(()=>{throw O},0)}})};return g(d,hu.EventType.OPEN,()=>{f||b(Rt,`RPC '${e}' stream ${r} transport opened.`)}),g(d,hu.EventType.CLOSE,()=>{f||(f=!0,b(Rt,`RPC '${e}' stream ${r} transport closed`),p.Vo())}),g(d,hu.EventType.ERROR,v=>{f||(f=!0,Cu(Rt,`RPC '${e}' stream ${r} transport errored:`,v),p.Vo(new A(w.UNAVAILABLE,"The operation could not be completed")))}),g(d,hu.EventType.MESSAGE,v=>{var E;if(!f){let S=v.data[0];B(!!S);let N=S,O=N.error||((E=N[0])===null||E===void 0?void 0:E.error);if(O){b(Rt,`RPC '${e}' stream ${r} received error:`,O);let K=O.status,j=function(Mt){let Rn=et[Mt];if(Rn!==void 0)return Uk(Rn)}(K),ae=O.message;j===void 0&&(j=w.INTERNAL,ae="Unknown error status: "+K+" with message "+O.message),f=!0,p.Vo(new A(j,ae)),d.close()}else b(Rt,`RPC '${e}' stream ${r} received:`,S),p.mo(S)}}),g(a,sO.STAT_EVENT,v=>{v.stat===KI.PROXY?b(Rt,`RPC '${e}' stream ${r} detected buffering proxy`):v.stat===KI.NOPROXY&&b(Rt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}};function pF(){return typeof window<"u"?window:null}function um(){return typeof document<"u"?document:null}function ug(t){return new Pb(t,!0)}var qm=class{constructor(e,n,i=1e3,r=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=i,this.xo=r,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),i=Math.max(0,Date.now()-this.Lo),r=Math.max(0,n-i);r>0&&b("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var Gm=class{constructor(e,n,i,r,s,o,a,c){this.oi=e,this.$o=i,this.Uo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new qm(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return m(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return m(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return m(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(Ye(n.toString()),Ye("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===w.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Wo===n&&this.o_(i,r)},i=>{e(()=>{let r=new A(w.UNKNOWN,"Fetching auth token failed: "+i.message);return this.__(r)})})}o_(e,n){let i=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{i(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(r=>{i(()=>this.__(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Yo(){this.state=5,this.jo.qo(()=>m(this,null,function*(){this.state=0,this.start()}))}__(e){return b("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(b("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},_D=class extends Gm{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=_5(this.serializer,e),i=function(s){if(!("targetChange"in s))return z.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?z.min():o.readTime?Ut(o.readTime):z.min()}(e);return this.listener.u_(n,i)}c_(e){let n={};n.database=Fb(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=vm(c)?{documents:Wk(s,c)}:{query:Kk(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$k(s,o.resumeToken);let l=Ob(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(z.min())>0){a.readTime=nc(s,o.snapshotVersion.toTimestamp());let l=Ob(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let i=w5(this.serializer,e);i&&(n.labels=i),this.t_(n)}l_(e){let n={};n.database=Fb(this.serializer),n.removeTarget=e,this.t_(n)}},vD=class extends Gm{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(B(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=v5(e.writeResults,e.commitTime),i=Ut(e.commitTime);return this.listener.T_(i,n)}return B(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=Fb(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>Sm(this.serializer,i))};this.t_(n)}};var wD=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new A(w.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,kb(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new A(w.UNKNOWN,s.toString())})}vo(e,n,i,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,kb(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new A(w.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var ED=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ye(n),this.g_=!1):b("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var ID=class{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{i.enqueueAndForget(()=>m(this,null,function*(){yo(this)&&(b("RemoteStore","Restarting streams for network reachability change."),yield function(c){return m(this,null,function*(){let l=V(c);l.v_.add(4),yield td(l),l.x_.set("Unknown"),l.v_.delete(4),yield dg(l)})}(this))}))}),this.x_=new ED(i,r)}};function dg(t){return m(this,null,function*(){if(yo(t))for(let e of t.F_)yield e(!0)})}function td(t){return m(this,null,function*(){for(let e of t.F_)yield e(!1)})}function hg(t,e){let n=V(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),s0(n)?r0(n):uc(n).Jo()&&i0(n,e))}function Bu(t,e){let n=V(t),i=uc(n);n.C_.delete(e),i.Jo()&&mF(n,e),n.C_.size===0&&(i.Jo()?i.Xo():yo(n)&&n.x_.set("Unknown"))}function i0(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(z.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uc(t).c_(e)}function mF(t,e){t.O_.Oe(e),uc(t).l_(e)}function r0(t){t.O_=new Nb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),uc(t).start(),t.x_.p_()}function s0(t){return yo(t)&&!uc(t).Ho()&&t.C_.size>0}function yo(t){return V(t).v_.size===0}function gF(t){t.O_=void 0}function O5(t){return m(this,null,function*(){t.C_.forEach((e,n)=>{i0(t,e)})})}function k5(t,e){return m(this,null,function*(){gF(t),s0(t)?(t.x_.S_(e),r0(t)):t.x_.set("Unknown")})}function F5(t,e,n){return m(this,null,function*(){if(t.x_.set("Online"),e instanceof Dm&&e.state===2&&e.cause)try{yield function(r,s){return m(this,null,function*(){let o=s.cause;for(let a of s.targetIds)r.C_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.C_.delete(a),r.O_.removeTarget(a))})}(t,e)}catch(i){b("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Wm(t,i)}else if(e instanceof Wa?t.O_.$e(e):e instanceof bm?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(z.min()))try{let i=yield uF(t.localStore);n.compareTo(i)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.C_.get(l);u&&s.C_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.C_.get(c);if(!u)return;s.C_.set(c,u.withResumeToken(Et.EMPTY_BYTE_STRING,u.snapshotVersion)),mF(s,c);let d=new ic(u.target,c,l,u.sequenceNumber);i0(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(i){b("RemoteStore","Failed to raise snapshot:",i),yield Wm(t,i)}})}function Wm(t,e,n){return m(this,null,function*(){if(!es(e))throw e;t.v_.add(1),yield td(t),t.x_.set("Offline"),n||(n=()=>uF(t.localStore)),t.asyncQueue.enqueueRetryable(()=>m(this,null,function*(){b("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield dg(t)}))})}function yF(t,e){return e().catch(n=>Wm(t,n,e))}function lc(t){return m(this,null,function*(){let e=V(t),n=Xr(e),i=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;L5(e);)try{let r=yield N5(e.localStore,i);if(r===null){e.D_.length===0&&n.Xo();break}i=r.batchId,V5(e,r)}catch(r){yield Wm(e,r)}_F(e)&&vF(e)})}function L5(t){return yo(t)&&t.D_.length<10}function V5(t,e){t.D_.push(e);let n=Xr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function _F(t){return yo(t)&&!Xr(t).Ho()&&t.D_.length>0}function vF(t){Xr(t).start()}function j5(t){return m(this,null,function*(){Xr(t).d_()})}function B5(t){return m(this,null,function*(){let e=Xr(t);for(let n of t.D_)e.I_(n.mutations)})}function U5(t,e,n){return m(this,null,function*(){let i=t.D_.shift(),r=Rb.from(i,e,n);yield yF(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield lc(t)})}function $5(t,e){return m(this,null,function*(){e&&Xr(t).P_&&(yield function(i,r){return m(this,null,function*(){if(function(o){return u5(o)&&o!==w.ABORTED}(r.code)){let s=i.D_.shift();Xr(i).Zo(),yield yF(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield lc(i)}})}(t,e)),_F(t)&&vF(t)})}function XO(t,e){return m(this,null,function*(){let n=V(t);n.asyncQueue.verifyOperationInProgress(),b("RemoteStore","RemoteStore received new credentials");let i=yo(n);n.v_.add(3),yield td(n),i&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield dg(n)})}function bD(t,e){return m(this,null,function*(){let n=V(t);e?(n.v_.delete(2),yield dg(n)):e||(n.v_.add(2),yield td(n),n.x_.set("Unknown"))})}function uc(t){return t.N_||(t.N_=function(n,i,r){let s=V(n);return s.R_(),new _D(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:O5.bind(null,t),To:k5.bind(null,t),u_:F5.bind(null,t)}),t.F_.push(e=>m(this,null,function*(){e?(t.N_.Zo(),s0(t)?r0(t):t.x_.set("Unknown")):(yield t.N_.stop(),gF(t))}))),t.N_}function Xr(t){return t.B_||(t.B_=function(n,i,r){let s=V(n);return s.R_(),new vD(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:j5.bind(null,t),To:$5.bind(null,t),E_:B5.bind(null,t),T_:U5.bind(null,t)}),t.F_.push(e=>m(this,null,function*(){e?(t.B_.Zo(),yield lc(t)):(yield t.B_.stop(),t.D_.length>0&&(b("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}var DD=class t{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){let o=Date.now()+i,a=new t(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new A(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function o0(t,e){if(Ye("AsyncQueue",`${e}: ${t}`),es(t))return new A(w.UNAVAILABLE,`${e}: ${t}`);throw t}var Km=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||P.comparator(n.key,i.key):(n,i)=>P.comparator(n.key,i.key),this.keyedMap=yu(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var Qm=class{constructor(){this.L_=new Ve(P.comparator)}track(e){let n=e.doc.key,i=this.L_.get(n);i?e.type!==0&&i.type===3?this.L_=this.L_.insert(n,e):e.type===3&&i.type!==1?this.L_=this.L_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.L_=this.L_.remove(n):e.type===1&&i.type===2?this.L_=this.L_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):k():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,i)=>{e.push(i)}),e}},oc=class t{constructor(e,n,i,r,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,i,r,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Km.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var CD=class{constructor(){this.q_=void 0,this.Q_=[]}},TD=class{constructor(){this.queries=new Ri(e=>Sk(e),lg),this.onlineState="Unknown",this.K_=new Set}};function a0(t,e){return m(this,null,function*(){let n=V(t),i=e.query,r=!1,s=n.queries.get(i);if(s||(r=!0,s=new CD),r)try{s.q_=yield n.onListen(i)}catch(o){let a=o0(o,`Initialization of query '${Ua(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&l0(n)})}function c0(t,e){return m(this,null,function*(){let n=V(t),i=e.query,r=!1,s=n.queries.get(i);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),r=s.Q_.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)})}function H5(t,e){let n=V(t),i=!1;for(let r of e){let s=r.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.W_(r)&&(i=!0);o.q_=r}}i&&l0(n)}function z5(t,e,n){let i=V(t),r=i.queries.get(e);if(r)for(let s of r.Q_)s.onError(n);i.queries.delete(e)}function l0(t){t.K_.forEach(e=>{e.next()})}var Uu=class{constructor(e,n,i){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=i||{}}W_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new oc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let i=n!=="Offline";return(!this.options.Z_||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=oc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var Ym=class{constructor(e){this.key=e}},Zm=class{constructor(e){this.key=e}},SD=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=de(),this.mutatedKeys=de(),this.ua=Rk(e),this.ca=new Km(this.ua)}get la(){return this.oa}ha(e,n){let i=n?n.Pa:new Qm,r=n?n.ca:this.ca,s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{let h=r.get(u),f=ed(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(i.track({type:3,doc:f}),v=!0):this.Ia(h,f)||(i.track({type:2,doc:f}),v=!0,(c&&this.ua(f,c)>0||l&&this.ua(f,l)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),v=!0):h&&!f&&(i.track({type:1,doc:h}),v=!0,(c||l)&&(a=!0)),v&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{ca:o,Pa:i,Xi:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let o=e.Pa.k_();o.sort((u,d)=>function(f,p){let g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return k()}};return g(f)-g(p)}(u.type,d.type)||this.ua(u.doc,d.doc)),this.Ta(i),r=r!=null&&r;let a=n&&!r?this.Ea():[],c=this.aa.size===0&&this.current&&!r?1:0,l=c!==this._a;return this._a=c,o.length!==0||l?{snapshot:new oc(this.query,e.ca,s,o,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Qm,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=de(),this.ca.forEach(i=>{this.Aa(i.key)&&(this.aa=this.aa.add(i.key))});let n=[];return e.forEach(i=>{this.aa.has(i)||n.push(new Zm(i))}),this.aa.forEach(i=>{e.has(i)||n.push(new Ym(i))}),n}Ra(e){this.oa=e.hs,this.aa=de();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return oc.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},AD=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},RD=class{constructor(e){this.key=e,this.ma=!1}},xD=class{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Ri(a=>Sk(a),lg),this.pa=new Map,this.ya=new Set,this.wa=new Ve(P.comparator),this.Sa=new Map,this.ba=new Vu,this.Da={},this.Ca=new Map,this.va=rc.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function q5(t,e){return m(this,null,function*(){let n=p0(t),i,r,s=n.ga.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.Va();else{let o=yield Bm(n.localStore,on(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=yield u0(n,e,i,a==="current",o.resumeToken),n.isPrimaryClient&&hg(n.remoteStore,o)}return r})}function u0(t,e,n,i,r){return m(this,null,function*(){t.Ma=(d,h,f)=>function(g,v,E,S){return m(this,null,function*(){let N=v.view.ha(E);N.Xi&&(N=yield fD(g.localStore,v.query,!1).then(({documents:ae})=>v.view.ha(ae,N)));let O=S&&S.targetChanges.get(v.targetId),K=S&&S.targetMismatches.get(v.targetId)!=null,j=v.view.applyChanges(N,g.isPrimaryClient,O,K);return MD(g,v.targetId,j.da),j.snapshot})}(t,d,h,f);let s=yield fD(t.localStore,e,!0),o=new SD(e,s.hs),a=o.ha(s.documents),c=Fu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),l=o.applyChanges(a,t.isPrimaryClient,c);MD(t,n,l.da);let u=new AD(e,n,o);return t.ga.set(e,u),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),l.snapshot})}function G5(t,e){return m(this,null,function*(){let n=V(t),i=n.ga.get(e),r=n.pa.get(i.targetId);if(r.length>1)return n.pa.set(i.targetId,r.filter(s=>!lg(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||(yield sc(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),Bu(n.remoteStore,i.targetId),ac(n,i.targetId)}).catch(Jr))):(ac(n,i.targetId),yield sc(n.localStore,i.targetId,!0))})}function W5(t,e,n){return m(this,null,function*(){let i=m0(t);try{let r=yield function(o,a){let c=V(o),l=Ze.now(),u=a.reduce((f,p)=>f.add(p.key),de()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=sn(),g=de();return c.os.getEntries(f,u).next(v=>{p=v,p.forEach((E,S)=>{S.isValidDocument()||(g=g.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,p)).next(v=>{d=v;let E=[];for(let S of a){let N=l5(S,d.get(S.key).overlayedDocument);N!=null&&E.push(new Un(S.key,N,vk(N.value.mapValue),vt.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,E,a)}).next(v=>{h=v;let E=v.applyToLocalDocumentSet(d,g);return c.documentOverlayCache.saveOverlays(f,v.batchId,E)})}).then(()=>({batchId:h.batchId,changes:Mk(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let l=o.Da[o.currentUser.toKey()];l||(l=new Ve(se)),l=l.insert(a,c),o.Da[o.currentUser.toKey()]=l}(i,r.batchId,n),yield ts(i,r.changes),yield lc(i.remoteStore)}catch(r){let s=o0(r,"Failed to persist write");n.reject(s)}})}function wF(t,e){return m(this,null,function*(){let n=V(t);try{let i=yield x5(n.localStore,e);e.targetChanges.forEach((r,s)=>{let o=n.Sa.get(s);o&&(B(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.ma=!0:r.modifiedDocuments.size>0?B(o.ma):r.removedDocuments.size>0&&(B(o.ma),o.ma=!1))}),yield ts(n,i,e)}catch(i){yield Jr(i)}})}function JO(t,e,n){let i=V(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ga.forEach((s,o)=>{let a=o.view.U_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){let c=V(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.Q_)h.U_(a)&&(l=!0)}),l&&l0(c)}(i.eventManager,e),r.length&&i.fa.u_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function K5(t,e,n){return m(this,null,function*(){let i=V(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Sa.get(e),s=r&&r.key;if(s){let o=new Ve(P.comparator);o=o.insert(s,wt.newNoDocument(s,z.min()));let a=de().add(s),c=new ku(z.min(),new Map,new Ve(se),o,a);yield wF(i,c),i.wa=i.wa.remove(s),i.Sa.delete(e),f0(i)}else yield sc(i.localStore,e,!1).then(()=>ac(i,e,n)).catch(Jr)})}function Q5(t,e){return m(this,null,function*(){let n=V(t),i=e.batch.batchId;try{let r=yield R5(n.localStore,e);h0(n,i,null),d0(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield ts(n,r)}catch(r){yield Jr(r)}})}function Y5(t,e,n){return m(this,null,function*(){let i=V(t);try{let r=yield function(o,a){let c=V(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(B(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(i.localStore,e);h0(i,e,n),d0(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield ts(i,r)}catch(r){yield Jr(r)}})}function d0(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function h0(t,e,n){let i=V(t),r=i.Da[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Da[i.currentUser.toKey()]=r}}function ac(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.pa.get(e))t.ga.delete(i),n&&t.fa.xa(i,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(i=>{t.ba.containsKey(i)||EF(t,i)})}function EF(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(Bu(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),f0(t))}function MD(t,e,n){for(let i of n)i instanceof Ym?(t.ba.addReference(i.key,e),Z5(t,i)):i instanceof Zm?(b("SyncEngine","Document no longer in limbo: "+i.key),t.ba.removeReference(i.key,e),t.ba.containsKey(i.key)||EF(t,i.key)):k()}function Z5(t,e){let n=e.key,i=n.path.canonicalString();t.wa.get(n)||t.ya.has(i)||(b("SyncEngine","New document in limbo: "+n),t.ya.add(i),f0(t))}function f0(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new P(Re.fromString(e)),i=t.va.next();t.Sa.set(i,new RD(n)),t.wa=t.wa.insert(n,i),hg(t.remoteStore,new ic(on(Ju(n.path)),i,"TargetPurposeLimboResolution",nn._e))}}function ts(t,e,n){return m(this,null,function*(){let i=V(t),r=[],s=[],o=[];i.ga.isEmpty()||(i.ga.forEach((a,c)=>{o.push(i.Ma(c,e,n).then(l=>{if((l||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){r.push(l);let u=uD.Ki(c.targetId,l);s.push(u)}}))}),yield Promise.all(o),i.fa.u_(r),yield function(c,l){return m(this,null,function*(){let u=V(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>_.forEach(l,h=>_.forEach(h.qi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>_.forEach(h.Qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!es(d))throw d;b("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.ns.get(h),p=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(p);u.ns=u.ns.insert(h,g)}}})}(i.localStore,s))})}function X5(t,e){return m(this,null,function*(){let n=V(t);if(!n.currentUser.isEqual(e)){b("SyncEngine","User change. New user:",e.toKey());let i=yield lF(n.localStore,e);n.currentUser=e,function(s,o){s.Ca.forEach(a=>{a.forEach(c=>{c.reject(new A(w.CANCELLED,o))})}),s.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield ts(n,i.us)}})}function J5(t,e){let n=V(t),i=n.Sa.get(e);if(i&&i.ma)return de().add(i.key);{let r=de(),s=n.pa.get(e);if(!s)return r;for(let o of s){let a=n.ga.get(o);r=r.unionWith(a.view.la)}return r}}function e8(t,e){return m(this,null,function*(){let n=V(t),i=yield fD(n.localStore,e.query,!0),r=e.view.Ra(i);return n.isPrimaryClient&&MD(n,e.targetId,r.da),r})}function t8(t,e){return m(this,null,function*(){let n=V(t);return hF(n.localStore,e).then(i=>ts(n,i))})}function n8(t,e,n,i){return m(this,null,function*(){let r=V(t),s=yield function(a,c){let l=V(a),u=V(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.vn(d,c).next(h=>h?l.localDocuments.getDocuments(d,h):_.resolve(null)))}(r.localStore,e);s!==null?(n==="pending"?yield lc(r.remoteStore):n==="acknowledged"||n==="rejected"?(h0(r,e,i||null),d0(r,e),function(a,c){V(V(a).mutationQueue).Mn(c)}(r.localStore,e)):k(),yield ts(r,s)):b("SyncEngine","Cannot apply mutation batch with id: "+e)})}function i8(t,e){return m(this,null,function*(){let n=V(t);if(p0(n),m0(n),e===!0&&n.Fa!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield ek(n,i.toArray());n.Fa=!0,yield bD(n.remoteStore,!0);for(let s of r)hg(n.remoteStore,s)}else if(e===!1&&n.Fa!==!1){let i=[],r=Promise.resolve();n.pa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(ac(n,o),sc(n.localStore,o,!0))),Bu(n.remoteStore,o)}),yield r,yield ek(n,i),function(o){let a=V(o);a.Sa.forEach((c,l)=>{Bu(a.remoteStore,l)}),a.ba.mr(),a.Sa=new Map,a.wa=new Ve(P.comparator)}(n),n.Fa=!1,yield bD(n.remoteStore,!1)}})}function ek(t,e,n){return m(this,null,function*(){let i=V(t),r=[],s=[];for(let o of e){let a,c=i.pa.get(o);if(c&&c.length!==0){a=yield Bm(i.localStore,on(c[0]));for(let l of c){let u=i.ga.get(l),d=yield e8(i,u);d.snapshot&&s.push(d.snapshot)}}else{let l=yield dF(i.localStore,o);a=yield Bm(i.localStore,l),yield u0(i,IF(l),o,!1,a.resumeToken)}r.push(a)}return i.fa.u_(s),r})}function IF(t){return Ck(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function r8(t){return function(n){return V(V(n).persistence).Li()}(V(t).localStore)}function s8(t,e,n,i){return m(this,null,function*(){let r=V(t);if(r.Fa)return void b("SyncEngine","Ignoring unexpected query state notification.");let s=r.pa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{let o=yield hF(r.localStore,Ak(s[0])),a=ku.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Et.EMPTY_BYTE_STRING);yield ts(r,o,a);break}case"rejected":yield sc(r.localStore,e,!0),ac(r,e,i);break;default:k()}})}function o8(t,e,n){return m(this,null,function*(){let i=p0(t);if(i.Fa){for(let r of e){if(i.pa.has(r)){b("SyncEngine","Adding an already active target "+r);continue}let s=yield dF(i.localStore,r),o=yield Bm(i.localStore,s);yield u0(i,IF(s),o.targetId,!1,o.resumeToken),hg(i.remoteStore,o)}for(let r of n)i.pa.has(r)&&(yield sc(i.localStore,r,!1).then(()=>{Bu(i.remoteStore,r),ac(i,r)}).catch(Jr))}})}function p0(t){let e=V(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K5.bind(null,e),e.fa.u_=H5.bind(null,e.eventManager),e.fa.xa=z5.bind(null,e.eventManager),e}function m0(t){let e=V(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Y5.bind(null,e),e}var $u=class{constructor(){this.synchronizeTabs=!1}initialize(e){return m(this,null,function*(){this.serializer=ug(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return cF(this.persistence,new jm,e.initialUser,this.serializer)}createPersistence(e){return new Lm(Vm.Hr,this.serializer)}createSharedClientState(e){return new Hm}terminate(){return m(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Xm=class t extends $u{constructor(e,n,i){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return m(this,null,function*(){yield Gn(t.prototype,this,"initialize").call(this,e),yield this.Na.initialize(this,e),yield m0(this.Na.syncEngine),yield lc(this.Na.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return cF(this.persistence,new jm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new Qb(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new hb(n,this.persistence);return new db(e.asyncQueue,i)}createPersistence(e){let n=aF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new lD(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,pF(),um(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Hm}},ND=class t extends Xm{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return m(this,null,function*(){yield Gn(t.prototype,this,"initialize").call(this,e);let n=this.Na.syncEngine;this.sharedClientState instanceof Du&&(this.sharedClientState.syncEngine={Zs:n8.bind(null,n),Xs:s8.bind(null,n),eo:o8.bind(null,n),Li:r8.bind(null,n),Ys:t8.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(i=>m(this,null,function*(){yield i8(this.Na.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=pF();if(!Du.D(n))throw new A(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=aF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Du(n,e.asyncQueue,i,e.clientId,e.initialUser)}},Hu=class{initialize(e,n){return m(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>JO(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=X5.bind(null,this.syncEngine),yield bD(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new TD}()}createDatastore(e){let n=ug(e.databaseInfo.databaseId),i=function(s){return new yD(s)}(e.databaseInfo);return function(s,o,a,c){return new wD(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new ID(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>JO(this.syncEngine,n,0),function(){return zm.D()?new zm:new mD}())}createSyncEngine(e,n){return function(r,s,o,a,c,l,u){let d=new xD(r,s,o,a,c,l);return u&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return m(this,null,function*(){var e;yield function(i){return m(this,null,function*(){let r=V(i);b("RemoteStore","RemoteStore shutting down."),r.v_.add(5),yield td(r),r.M_.shutdown(),r.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var zu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Ye("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var PD=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=ht.UNAUTHENTICATED,this.clientId=dm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>m(this,null,function*(){b("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(b("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new A(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Dn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=o0(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function JI(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),b("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>m(this,null,function*(){i.isEqual(r)||(yield lF(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function tk(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield c8(t);b("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>XO(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>XO(e.remoteStore,r)),t._onlineComponents=e})}function a8(t){return t.name==="FirebaseError"?t.code===w.FAILED_PRECONDITION||t.code===w.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function c8(t){return m(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){b("FirestoreClient","Using user provided OfflineComponentProvider");try{yield JI(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!a8(n))throw n;Cu("Error using user provided cache. Falling back to memory cache: "+n),yield JI(t,new $u)}}else b("FirestoreClient","Using default OfflineComponentProvider"),yield JI(t,new $u);return t._offlineComponents})}function bF(t){return m(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(b("FirestoreClient","Using user provided OnlineComponentProvider"),yield tk(t,t._uninitializedComponentsProvider._online)):(b("FirestoreClient","Using default OnlineComponentProvider"),yield tk(t,new Hu))),t._onlineComponents})}function l8(t){return bF(t).then(e=>e.syncEngine)}function Jm(t){return m(this,null,function*(){let e=yield bF(t),n=e.eventManager;return n.onListen=q5.bind(null,e.syncEngine),n.onUnlisten=G5.bind(null,e.syncEngine),n})}function u8(t,e,n={}){let i=new Dn;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(s,o,a,c,l){let u=new zu({next:h=>{o.enqueueAndForget(()=>c0(s,d));let f=h.docs.has(a);!f&&h.fromCache?l.reject(new A(w.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?l.reject(new A(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new Uu(Ju(a.path),u,{includeMetadataChanges:!0,Z_:!0});return a0(s,d)}(yield Jm(t),t.asyncQueue,e,n,i)})),i.promise}function d8(t,e,n={}){let i=new Dn;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(s,o,a,c,l){let u=new zu({next:h=>{o.enqueueAndForget(()=>c0(s,d)),h.fromCache&&c.source==="server"?l.reject(new A(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new Uu(a,u,{includeMetadataChanges:!0,Z_:!0});return a0(s,d)}(yield Jm(t),t.asyncQueue,e,n,i)})),i.promise}function DF(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var nk=new Map;function CF(t,e,n){if(!n)throw new A(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function h8(t,e,n,i){if(e===!0&&i===!0)throw new A(w.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ik(t){if(!P.isDocumentKey(t))throw new A(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rk(t){if(P.isDocumentKey(t))throw new A(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":k()}function Gt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new A(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=fg(t);throw new A(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function f8(t,e){if(e<=0)throw new A(w.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var eg=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new A(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new A(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}h8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DF((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new A(w.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new A(w.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new A(w.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qu=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new A(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new A(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eg(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new nb;switch(i.type){case"firstParty":return new sb(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new A(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=nk.get(n);i&&(b("ComponentProvider","Removing Datastore"),nk.delete(n),i.terminate())}(this),Promise.resolve()}};var Xi=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},xt=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Hr=class t extends Xi{constructor(e,n,i){super(e,n,Ju(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new P(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function TF(t,e,...n){if(t=Ue(t),CF("collection","path",e),t instanceof qu){let i=Re.fromString(e,...n);return rk(i),new Hr(t,null,i)}{if(!(t instanceof xt||t instanceof Hr))throw new A(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Re.fromString(e,...n));return rk(i),new Hr(t.firestore,null,i)}}function g0(t,e,...n){if(t=Ue(t),arguments.length===1&&(e=dm.newId()),CF("doc","path",e),t instanceof qu){let i=Re.fromString(e,...n);return ik(i),new xt(t,null,new P(i))}{if(!(t instanceof xt||t instanceof Hr))throw new A(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Re.fromString(e,...n));return ik(i),new xt(t.firestore,t instanceof Hr?t.converter:null,new P(i))}}var OD=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new qm(this,"async_queue_retry"),this._u=()=>{let n=um();n&&b("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=um();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=um();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new Dn;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return m(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!es(e))throw e;b("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(i=>{this.ru=i,this.iu=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Ye("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.iu=!1,i))));return this.Xa=n,n}enqueueAfterDelay(e,n,i){this.au(),this.ou.indexOf(e)>-1&&(n=0);let r=DD.createAndSchedule(this,e,n,i,s=>this.lu(s));return this.nu.push(r),r}au(){this.ru&&k()}verifyOperationInProgress(){}hu(){return m(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};function sk(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Tn=class extends qu{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new OD}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||AF(this),this._firestoreClient.terminate()}};function SF(t,e,n){n||(n="(default)");let i=Ol(t,"firestore");if(i.isInitialized(n)){let r=i.getImmediate({identifier:n}),s=i.getOptions(n);if(Ar(s,e))return r;throw new A(w.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new A(w.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new A(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return i.initialize({options:e,instanceIdentifier:n})}function nd(t){return t._firestoreClient||AF(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function AF(t){var e,n,i;let r=t._freezeSettings(),s=function(a,c,l,u){return new fb(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,DF(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new PD(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var Gu=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Et.fromBase64String(e))}catch(n){throw new A(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var mo=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new A(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wu=class{constructor(e){this._methodName=e}};var Ku=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new A(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new A(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}};var p8=/^__.*__$/,kD=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Un(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zr(e,this.data,n,this.fieldTransforms)}},tg=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Un(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function RF(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw k()}}var FD=class t{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Au({path:i,Vu:!1});return r.mu(e),r}fu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Au({path:i,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return ig(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(RF(this.du)&&p8.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},LD=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||ug(e)}Su(e,n,i,r=!1){return new FD({du:e,methodName:n,wu:i,path:st.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function id(t){let e=t._freezeSettings(),n=ug(t._databaseId);return new LD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function y0(t,e,n,i,r,s={}){let o=t.Su(s.merge||s.mergeFields?2:0,e,n,r);_0("Data must be an object, but it was:",o,i);let a=NF(i,o),c,l;if(s.merge)c=new rn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let h=VD(e,d,n);if(!o.contains(h))throw new A(w.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);OF(u,h)||u.push(h)}c=new rn(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new kD(new jt(a),c,l)}var ng=class t extends Wu{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function xF(t,e,n,i){let r=t.Su(1,e,n);_0("Data must be an object, but it was:",r,i);let s=[],o=jt.empty();go(i,(c,l)=>{let u=v0(e,c,n);l=Ue(l);let d=r.fu(u);if(l instanceof ng)s.push(u);else{let h=rd(l,d);h!=null&&(s.push(u),o.set(u,h))}});let a=new rn(s);return new tg(o,a,r.fieldTransforms)}function MF(t,e,n,i,r,s){let o=t.Su(1,e,n),a=[VD(e,i,n)],c=[r];if(s.length%2!=0)throw new A(w.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(VD(e,s[h])),c.push(s[h+1]);let l=[],u=jt.empty();for(let h=a.length-1;h>=0;--h)if(!OF(l,a[h])){let f=a[h],p=c[h];p=Ue(p);let g=o.fu(f);if(p instanceof ng)l.push(f);else{let v=rd(p,g);v!=null&&(l.push(f),u.set(f,v))}}let d=new rn(l);return new tg(u,d,o.fieldTransforms)}function m8(t,e,n,i=!1){return rd(n,t.Su(i?4:3,e))}function rd(t,e){if(PF(t=Ue(t)))return _0("Unsupported field value:",e,t),NF(t,e);if(t instanceof Wu)return function(i,r){if(!RF(r.du))throw r.pu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.pu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let a of i){let c=rd(a,r.gu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Ue(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return r5(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=Ze.fromDate(i);return{timestampValue:nc(r.serializer,s)}}if(i instanceof Ze){let s=new Ze(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:nc(r.serializer,s)}}if(i instanceof Ku)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Gu)return{bytesValue:$k(r.serializer,i._byteString)};if(i instanceof xt){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:t0(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.pu(`Unsupported field value: ${fg(i)}`)}(t,e)}function NF(t,e){let n={};return yk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(t,(i,r)=>{let s=rd(r,e.Ru(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function PF(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ze||t instanceof Ku||t instanceof Gu||t instanceof xt||t instanceof Wu)}function _0(t,e,n){if(!PF(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=fg(n);throw i==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+i)}}function VD(t,e,n){if((e=Ue(e))instanceof mo)return e._internalPath;if(typeof e=="string")return v0(t,e);throw ig("Field path arguments must be of type string or ",t,!1,void 0,n)}var g8=new RegExp("[~\\*/\\[\\]]");function v0(t,e,n){if(e.search(g8)>=0)throw ig(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mo(...e.split("."))._internalPath}catch{throw ig(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ig(t,e,n,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new A(w.INVALID_ARGUMENT,a+t+c)}function OF(t,e){return t.some(n=>n.isEqual(e))}var rg=class{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new jD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(pg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},jD=class extends rg{data(){return super.data()}};function pg(t,e){return typeof e=="string"?v0(t,e):e instanceof mo?e._internalPath:e._delegate._internalPath}function kF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new A(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qu=class{},Yu=class extends Qu{};function FF(t,e,...n){let i=[];e instanceof Qu&&i.push(e),i=i.concat(n),function(s){let o=s.filter(c=>c instanceof BD).length,a=s.filter(c=>c instanceof sg).length;if(o>1||o>0&&a>0)throw new A(w.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var sg=class t extends Yu{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return BF(e._query,n),new Xi(e.firestore,e.converter,Tb(e._query,n))}_parse(e){let n=id(e.firestore);return function(s,o,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new A(w.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){ak(d,u);let f=[];for(let p of d)f.push(ok(c,s,p));h={arrayValue:{values:f}}}else h=ok(c,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||ak(d,u),h=m8(a,o,d,u==="in"||u==="not-in");return me.create(l,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function LF(t,e,n){let i=e,r=pg("where",t);return sg._create(r,i,n)}var BD=class t extends Qu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Se.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r,a=s.getFlattenedFilters();for(let c of a)BF(o,c),o=Tb(o,c)}(e._query,n),new Xi(e.firestore,e.converter,Tb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var UD=class t extends Yu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,s,o){if(r.startAt!==null)throw new A(w.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new A(w.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ao(s,o)}(e._query,this._field,this._direction);return new Xi(e.firestore,e.converter,function(r,s){let o=r.explicitOrderBy.concat([s]);return new Kr(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function VF(t,e="asc"){let n=e,i=pg("orderBy",t);return UD._create(i,n)}var $D=class t extends Yu{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new Xi(e.firestore,e.converter,Em(e._query,this._limit,this._limitType))}};function jF(t){return f8("limit",t),$D._create("limit",t,"F")}function ok(t,e,n){if(typeof(n=Ue(n))=="string"){if(n==="")throw new A(w.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tk(e)&&n.indexOf("/")!==-1)throw new A(w.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(Re.fromString(n));if(!P.isDocumentKey(i))throw new A(w.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Mu(t,new P(i))}if(n instanceof xt)return Mu(t,n._key);throw new A(w.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fg(n)}.`)}function ak(t,e){if(!Array.isArray(t)||t.length===0)throw new A(w.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BF(t,e){let n=function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new A(w.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new A(w.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var HD=class{convertValue(e,n="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw k()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return go(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new Ku(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=XD(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ru(e));default:return null}}convertTimestamp(e){let n=zr(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=Re.fromString(e);B(Xk(i));let r=new Za(i.get(1),i.get(3)),s=new P(i.popFirst(5));return r.isEqual(n)||Ye(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function w0(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var to=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},og=class extends rg{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ka(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(pg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Ka=class extends og{data(e={}){return super.data(e)}},ag=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new to(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Ka(this._firestore,this._userDataWriter,i.key,i,new to(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new A(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new Ka(r._firestore,r._userDataWriter,a.doc.key,a.doc,new to(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Ka(r._firestore,r._userDataWriter,a.doc.key,a.doc,new to(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:y8(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function y8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return k()}}function UF(t){t=Gt(t,xt);let e=Gt(t.firestore,Tn);return u8(nd(e),t._key).then(n=>WF(e,t,n))}var Zu=class extends HD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gu(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}};function $F(t){t=Gt(t,Xi);let e=Gt(t.firestore,Tn),n=nd(e),i=new Zu(e);return kF(t._query),d8(n,t._query).then(r=>new ag(e,i,t,r))}function HF(t,e,n){t=Gt(t,xt);let i=Gt(t.firestore,Tn),r=w0(t.converter,e,n);return sd(i,[y0(id(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,vt.none())])}function zF(t,e,n,...i){t=Gt(t,xt);let r=Gt(t.firestore,Tn),s=id(r),o;return o=typeof(e=Ue(e))=="string"||e instanceof mo?MF(s,"updateDoc",t._key,e,n,i):xF(s,"updateDoc",t._key,e),sd(r,[o.toMutation(t._key,vt.exists(!0))])}function qF(t){return sd(Gt(t.firestore,Tn),[new ho(t._key,vt.none())])}function GF(t,e){let n=Gt(t.firestore,Tn),i=g0(t),r=w0(t.converter,e);return sd(n,[y0(id(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,vt.exists(!1))]).then(()=>i)}function E0(t,...e){var n,i,r;t=Ue(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||sk(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges};if(sk(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let c,l,u;if(t instanceof xt)l=Gt(t.firestore,Tn),u=Ju(t._key.path),c={next:d=>{e[o]&&e[o](WF(l,t,d))},error:e[o+1],complete:e[o+2]};else{let d=Gt(t,Xi);l=Gt(d.firestore,Tn),u=d._query;let h=new Zu(l);c={next:f=>{e[o]&&e[o](new ag(l,h,d,f))},error:e[o+1],complete:e[o+2]},kF(t._query)}return function(h,f,p,g){let v=new zu(g),E=new Uu(f,v,p);return h.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return a0(yield Jm(h),E)})),()=>{v.La(),h.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return c0(yield Jm(h),E)}))}}(nd(l),u,a,c)}function sd(t,e){return function(i,r){let s=new Dn;return i.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return W5(yield l8(i),r,s)})),s.promise}(nd(t),e)}function WF(t,e,n){let i=n.docs.get(e._key),r=new Zu(t);return new og(t,r,e._key,i,new to(n.hasPendingWrites,n.fromCache),e.converter)}var zD=class{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=QF(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}};function KF(t){return new zD(t)}var qD=class{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new Hu,this._offlineComponentProvider=new Xm(this._onlineComponentProvider,e?.cacheSizeBytes,this.forceOwnership)}},GD=class{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new Hu,this._offlineComponentProvider=new ND(this._onlineComponentProvider,e?.cacheSizeBytes)}};function QF(t){return new qD(t?.forceOwnership)}function YF(){return new GD}var WD=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=id(e)}set(e,n,i){this._verifyNotCommitted();let r=eb(e,this._firestore),s=w0(r.converter,n,i),o=y0(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,vt.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let s=eb(e,this._firestore),o;return o=typeof(n=Ue(n))=="string"||n instanceof mo?MF(this._dataReader,"WriteBatch.update",s._key,n,i,r):xF(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,vt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=eb(e,this._firestore);return this._mutations=this._mutations.concat(new ho(n._key,vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new A(w.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function eb(t,e){if((t=Ue(t)).firestore!==e)throw new A(w.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function ZF(t){return nd(t=Gt(t,Tn)),new WD(t,e=>sd(t,e))}(function(e,n=!0){(function(r){cc=r})(Nr),Mr(new wn("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new Tn(new ib(i.getProvider("auth-internal")),new ab(i.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new A(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(l.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),rt(cO,"4.4.1",e),rt(cO,"4.4.1","esm2017")})();var mg=function(){return mg=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},mg.apply(this,arguments)};var E8={includeMetadataChanges:!1};function I0(t,e){return e===void 0&&(e=E8),new W(function(n){var i=E0(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:i}})}function XF(t){return I0(t,{includeMetadataChanges:!0})}function JF(t,e){return e===void 0&&(e={}),XF(t).pipe(ee(function(n){return b0(n,e)}))}function b0(t,e){var n;e===void 0&&(e={});var i=t.data(e);return!t.exists()||typeof i!="object"||i===null||!e.idField?i:mg(mg({},i),(n={},n[e.idField]=t.id,n))}function e1(t){return I0(t,{includeMetadataChanges:!0}).pipe(ee(function(e){return e.docs}))}function t1(t,e){return e===void 0&&(e={}),e1(t).pipe(ee(function(n){return n.map(function(i){return b0(i,e)})}))}var od=class{constructor(e){return e}},n1="firestore",D0=class{constructor(){return kl(n1)}};var C0=new x("angularfire2.firestore-instances");function I8(t,e){let n=ip(n1,t,e);return n&&new od(n)}function b8(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new od(i)}}var D8={provide:D0,deps:[[new gt,C0]]},C8={provide:od,useFactory:I8,deps:[[new gt,C0],qi]},T8=(()=>{class t{constructor(){rt("angularfire",Vs.full,"fst")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=re({type:t});static \u0275inj=ie({providers:[C8,D8]})}return t})();function dle(t,...e){return{ngModule:T8,providers:[{provide:C0,useFactory:b8(t),multi:!0,deps:[L,Me,Ta,js,[new gt,Hl],[new gt,Ca],...e]}]}}var hle=Ce(t1,!0);var fle=Ce(JF,!0);var ple=Ce(GF,!0);var mle=Ce(TF,!0);var gle=Ce(qF,!0);var yle=Ce(g0,!0);var _le=Ce(UF,!0);var vle=Ce($F,!0);var wle=Ce(SF,!0),Ele=Ce(jF,!0);var Ile=Ce(VF,!0),ble=Ce(KF,!0),Dle=Ce(YF,!0);var Cle=Ce(FF,!0);var Tle=Ce(HF,!0);var Sle=Ce(zF,!0);var Ale=Ce(LF,!0),Rle=Ce(ZF,!0);var oe=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(oe||{}),xi="*";function Nle(t,e){return{type:oe.Trigger,name:t,definitions:e,options:{}}}function Ple(t,e=null){return{type:oe.Animate,styles:e,timings:t}}function i1(t,e=null){return{type:oe.Sequence,steps:t,options:e}}function T0(t){return{type:oe.Style,styles:t,offset:null}}function Ole(t,e,n){return{type:oe.State,name:t,styles:e,options:n}}function kle(t){return{type:oe.Keyframes,steps:t}}function Fle(t,e,n=null){return{type:oe.Transition,expr:t,animation:e,options:n}}var ns=class{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},ad=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,i=0,r=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,n/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((n,i)=>n===null||i.totalTime>n.totalTime?i:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},gg="!";function r1(t){return new T(3e3,!1)}function S8(){return new T(3100,!1)}function A8(){return new T(3101,!1)}function R8(t){return new T(3001,!1)}function x8(t){return new T(3003,!1)}function M8(t){return new T(3004,!1)}function N8(t,e){return new T(3005,!1)}function P8(){return new T(3006,!1)}function O8(){return new T(3007,!1)}function k8(t,e){return new T(3008,!1)}function F8(t){return new T(3002,!1)}function L8(t,e,n,i,r){return new T(3010,!1)}function V8(){return new T(3011,!1)}function j8(){return new T(3012,!1)}function B8(){return new T(3200,!1)}function U8(){return new T(3202,!1)}function $8(){return new T(3013,!1)}function H8(t){return new T(3014,!1)}function z8(t){return new T(3015,!1)}function q8(t){return new T(3016,!1)}function G8(t,e){return new T(3404,!1)}function W8(t){return new T(3502,!1)}function K8(t){return new T(3503,!1)}function Q8(){return new T(3300,!1)}function Y8(t){return new T(3504,!1)}function Z8(t){return new T(3301,!1)}function X8(t,e){return new T(3302,!1)}function J8(t){return new T(3303,!1)}function eK(t,e){return new T(3400,!1)}function tK(t){return new T(3401,!1)}function nK(t){return new T(3402,!1)}function iK(t,e){return new T(3505,!1)}function is(t){switch(t.length){case 0:return new ns;case 1:return t[0];default:return new ad(t)}}function _1(t,e,n=new Map,i=new Map){let r=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==o,d=u&&a||new Map;c.forEach((h,f)=>{let p=f,g=h;if(f!=="offset")switch(p=t.normalizePropertyName(p,r),g){case gg:g=n.get(f);break;case xi:g=i.get(f);break;default:g=t.normalizeStyleValue(f,p,g,r);break}d.set(p,g)}),u||s.push(d),a=d,o=l}),r.length)throw W8(r);return s}function K0(t,e,n,i){switch(e){case"start":t.onStart(()=>i(n&&S0(n,"start",t)));break;case"done":t.onDone(()=>i(n&&S0(n,"done",t)));break;case"destroy":t.onDestroy(()=>i(n&&S0(n,"destroy",t)));break}}function S0(t,e,n){let i=n.totalTime,r=!!n.disabled,s=Q0(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,i??t.totalTime,r),o=t._data;return o!=null&&(s._data=o),s}function Q0(t,e,n,i,r="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function cn(t,e,n){let i=t.get(e);return i||t.set(e,i=n),i}function s1(t){let e=t.indexOf(":"),n=t.substring(1,e),i=t.slice(e+1);return[n,i]}var rK=typeof document>"u"?null:document.documentElement;function Y0(t){let e=t.parentNode||t.host||null;return e===rK?null:e}function sK(t){return t.substring(1,6)=="ebkit"}var _o=null,o1=!1;function oK(t){_o||(_o=aK()||{},o1=_o.style?"WebkitAppearance"in _o.style:!1);let e=!0;return _o.style&&!sK(t)&&(e=t in _o.style,!e&&o1&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in _o.style)),e}function aK(){return typeof document<"u"?document.body:null}function v1(t,e){for(;e;){if(e===t)return!0;e=Y0(e)}return!1}function w1(t,e,n){if(n)return Array.from(t.querySelectorAll(e));let i=t.querySelector(e);return i?[i]:[]}var Z0=(()=>{let e=class e{validateStyleProperty(i){return oK(i)}matchesElement(i,r){return!1}containsElement(i,r){return v1(i,r)}getParentElement(i){return Y0(i)}query(i,r,s){return w1(i,r,s)}computeStyle(i,r,s){return s||""}animate(i,r,s,o,a,c=[],l){return new ns(s,o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),pd=(()=>{let e=class e{};e.NOOP=new Z0;let t=e;return t})(),Eo=class{};var cK=1e3,E1="{{",lK="}}",I1="ng-enter",P0="ng-leave",yg="ng-trigger",Ig=".ng-trigger",a1="ng-animating",O0=".ng-animating";function Ji(t){if(typeof t=="number")return t;let e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:k0(parseFloat(e[1]),e[2])}function k0(t,e){switch(e){case"s":return t*cK;default:return t}}function bg(t,e,n){return t.hasOwnProperty("duration")?t:uK(t,e,n)}function uK(t,e,n){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,s=0,o="";if(typeof t=="string"){let a=t.match(i);if(a===null)return e.push(r1(t)),{duration:0,delay:0,easing:""};r=k0(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(s=k0(parseFloat(c),a[4]));let l=a[5];l&&(o=l)}else r=t;if(!n){let a=!1,c=e.length;r<0&&(e.push(S8()),a=!0),s<0&&(e.push(A8()),a=!0),a&&e.splice(c,0,r1(t))}return{duration:r,delay:s,easing:o}}function dK(t){return t.length?t[0]instanceof Map?t:t.map(e=>new Map(Object.entries(e))):[]}function Mi(t,e,n){e.forEach((i,r)=>{let s=X0(r);n&&!n.has(r)&&n.set(r,t.style[s]),t.style[s]=i})}function wo(t,e){e.forEach((n,i)=>{let r=X0(i);t.style[r]=""})}function cd(t){return Array.isArray(t)?t.length==1?t[0]:i1(t):t}function hK(t,e,n){let i=e.params||{},r=b1(t);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||n.push(R8(s))})}var F0=new RegExp(`${E1}\\s*(.+?)\\s*${lK}`,"g");function b1(t){let e=[];if(typeof t=="string"){let n;for(;n=F0.exec(t);)e.push(n[1]);F0.lastIndex=0}return e}function ud(t,e,n){let i=`${t}`,r=i.replace(F0,(s,o)=>{let a=e[o];return a==null&&(n.push(x8(o)),a=""),a.toString()});return r==i?t:r}var fK=/-+([a-z0-9])/g;function X0(t){return t.replace(fK,(...e)=>e[1].toUpperCase())}function pK(t,e){return t===0||e===0}function mK(t,e,n){if(n.size&&e.length){let i=e[0],r=[];if(n.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,J0(t,a)))}}return e}function an(t,e,n){switch(e.type){case oe.Trigger:return t.visitTrigger(e,n);case oe.State:return t.visitState(e,n);case oe.Transition:return t.visitTransition(e,n);case oe.Sequence:return t.visitSequence(e,n);case oe.Group:return t.visitGroup(e,n);case oe.Animate:return t.visitAnimate(e,n);case oe.Keyframes:return t.visitKeyframes(e,n);case oe.Style:return t.visitStyle(e,n);case oe.Reference:return t.visitReference(e,n);case oe.AnimateChild:return t.visitAnimateChild(e,n);case oe.AnimateRef:return t.visitAnimateRef(e,n);case oe.Query:return t.visitQuery(e,n);case oe.Stagger:return t.visitStagger(e,n);default:throw M8(e.type)}}function J0(t,e){return window.getComputedStyle(t)[e]}var gK=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Dg=class extends Eo{normalizePropertyName(e,n){return X0(e)}normalizeStyleValue(e,n,i,r){let s="",o=i.toString().trim();if(gK.has(n)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(N8(e,i))}return o+s}};var Cg="*";function yK(t,e){let n=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(i=>_K(i,n,e)):n.push(t),n}function _K(t,e,n){if(t[0]==":"){let c=vK(t,n);if(typeof c=="function"){e.push(c);return}t=c}let i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return n.push(z8(t)),e;let r=i[1],s=i[2],o=i[3];e.push(c1(r,o));let a=r==Cg&&o==Cg;s[0]=="<"&&!a&&e.push(c1(o,r))}function vK(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,i)=>parseFloat(i)>parseFloat(n);case":decrement":return(n,i)=>parseFloat(i)<parseFloat(n);default:return e.push(q8(t)),"* => *"}}var _g=new Set(["true","1"]),vg=new Set(["false","0"]);function c1(t,e){let n=_g.has(t)||vg.has(t),i=_g.has(e)||vg.has(e);return(r,s)=>{let o=t==Cg||t==r,a=e==Cg||e==s;return!o&&n&&typeof r=="boolean"&&(o=r?_g.has(t):vg.has(t)),!a&&i&&typeof s=="boolean"&&(a=s?_g.has(e):vg.has(e)),o&&a}}var D1=":self",wK=new RegExp(`s*${D1}s*,?`,"g");function C1(t,e,n,i){return new L0(t).build(e,n,i)}var l1="",L0=class{constructor(e){this._driver=e}build(e,n,i){let r=new V0(n);return this._resetContextStyleTimingState(r),an(this,cd(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=l1,e.collectedStyles=new Map,e.collectedStyles.set(l1,new Map),e.currentTime=0}visitTrigger(e,n){let i=n.queryCount=0,r=n.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&n.errors.push(P8()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),a.type==oe.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,n))}),c.name=l}else if(a.type==oe.Transition){let c=this.visitTransition(a,n);i+=c.queryCount,r+=c.depCount,o.push(c)}else n.errors.push(O8())}),{type:oe.Trigger,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,n){let i=this.visitStyle(e.styles,n),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{b1(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&n.errors.push(k8(e.name,[...s.values()]))}return{type:oe.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;let i=an(this,cd(e.animation),n),r=yK(e.expr,n.errors);return{type:oe.Transition,matchers:r,animation:i,queryCount:n.queryCount,depCount:n.depCount,options:vo(e.options)}}visitSequence(e,n){return{type:oe.Sequence,steps:e.steps.map(i=>an(this,i,n)),options:vo(e.options)}}visitGroup(e,n){let i=n.currentTime,r=0,s=e.steps.map(o=>{n.currentTime=i;let a=an(this,o,n);return r=Math.max(r,n.currentTime),a});return n.currentTime=r,{type:oe.Group,steps:s,options:vo(e.options)}}visitAnimate(e,n){let i=DK(e.timings,n.errors);n.currentAnimateTimings=i;let r,s=e.styles?e.styles:T0({});if(s.type==oe.Keyframes)r=this.visitKeyframes(s,n);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};i.easing&&(l.easing=i.easing),o=T0(l)}n.currentTime+=i.duration+i.delay;let c=this.visitStyle(o,n);c.isEmptyStep=a,r=c}return n.currentAnimateTimings=null,{type:oe.Animate,timings:i,style:r,options:null}}visitStyle(e,n){let i=this._makeStyleAst(e,n);return this._validateStyleAst(i,n),i}_makeStyleAst(e,n){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===xi?i.push(a):n.errors.push(F8(a)):i.push(new Map(Object.entries(a)));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(E1)>=0){s=!0;break}}}),{type:oe.Style,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,n){let i=n.currentAnimateTimings,r=n.currentTime,s=n.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=n.collectedStyles.get(n.currentQuerySelector),u=l.get(c),d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(n.errors.push(L8(c,u.startTime,u.endTime,s,r)),d=!1),s=u.startTime),d&&l.set(c,{startTime:s,endTime:r}),n.options&&hK(a,n.options,n.errors)})})}visitKeyframes(e,n){let i={type:oe.Keyframes,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(V8()),i;let r=1,s=0,o=[],a=!1,c=!1,l=0,u=e.steps.map(E=>{let S=this._makeStyleAst(E,n),N=S.offset!=null?S.offset:bK(S.styles),O=0;return N!=null&&(s++,O=S.offset=N),c=c||O<0||O>1,a=a||O<l,l=O,o.push(O),S});c&&n.errors.push(j8()),a&&n.errors.push(B8());let d=e.steps.length,h=0;s>0&&s<d?n.errors.push(U8()):s==0&&(h=r/(d-1));let f=d-1,p=n.currentTime,g=n.currentAnimateTimings,v=g.duration;return u.forEach((E,S)=>{let N=h>0?S==f?1:h*S:o[S],O=N*v;n.currentTime=p+g.delay+O,g.duration=O,this._validateStyleAst(E,n),E.offset=N,i.styles.push(E)}),i}visitReference(e,n){return{type:oe.Reference,animation:an(this,cd(e.animation),n),options:vo(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:oe.AnimateChild,options:vo(e.options)}}visitAnimateRef(e,n){return{type:oe.AnimateRef,animation:this.visitReference(e.animation,n),options:vo(e.options)}}visitQuery(e,n){let i=n.currentQuerySelector,r=e.options||{};n.queryCount++,n.currentQuery=e;let[s,o]=EK(e.selector);n.currentQuerySelector=i.length?i+" "+s:s,cn(n.collectedStyles,n.currentQuerySelector,new Map);let a=an(this,cd(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=i,{type:oe.Query,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:vo(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push($8());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:bg(e.timings,n.errors,!0);return{type:oe.Stagger,animation:an(this,cd(e.animation),n),timings:i,options:null}}};function EK(t){let e=!!t.split(/\s*,\s*/).find(n=>n==D1);return e&&(t=t.replace(wK,"")),t=t.replace(/@\*/g,Ig).replace(/@\w+/g,n=>Ig+"-"+n.slice(1)).replace(/:animating/g,O0),[t,e]}function IK(t){return t?I({},t):null}var V0=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function bK(t){if(typeof t=="string")return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){let i=n;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}function DK(t,e){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let s=bg(t,e).duration;return A0(s,0,"")}let n=t;if(n.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=A0(0,0,"");return s.dynamic=!0,s.strValue=n,s}let r=bg(n,e);return A0(r.duration,r.delay,r.easing)}function vo(t){return t?(t=I({},t),t.params&&(t.params=IK(t.params))):t={},t}function A0(t,e,n){return{duration:t,delay:e,easing:n}}function eC(t,e,n,i,r,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}var dd=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}},CK=1,TK=":enter",SK=new RegExp(TK,"g"),AK=":leave",RK=new RegExp(AK,"g");function T1(t,e,n,i,r,s=new Map,o=new Map,a,c,l=[]){return new j0().buildKeyframes(t,e,n,i,r,s,o,a,c,l)}var j0=class{buildKeyframes(e,n,i,r,s,o,a,c,l,u=[]){l=l||new dd;let d=new B0(e,n,l,r,s,u,[]);d.options=c;let h=c.delay?Ji(c.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,c),an(this,i,d);let f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let g=f.length-1;g>=0;g--){let v=f[g];if(v.element===n){p=v;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,c)}return f.length?f.map(p=>p.buildKeyframes()):[eC(n,[],[],[],0,h,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){let i=n.subInstructions.get(n.element);if(i){let r=n.createSubContext(e.options),s=n.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&n.transformIntoNewTimeline(o)}n.previousNode=e}visitAnimateRef(e,n){let i=n.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,i),this.visitReference(e.animation,i),n.transformIntoNewTimeline(i.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,i){for(let r of e){let s=r?.delay;if(s){let o=typeof s=="number"?s:Ji(ud(s,r?.params??{},n.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,n,i){let s=n.currentTimeline.currentTime,o=i.duration!=null?Ji(i.duration):null,a=i.delay!=null?Ji(i.delay):null;return o!==0&&e.forEach(c=>{let l=n.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,n){n.updateOptions(e.options,!0),an(this,e.animation,n),n.previousNode=e}visitSequence(e,n){let i=n.subContextCount,r=n,s=e.options;if(s&&(s.params||s.delay)&&(r=n.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==oe.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Tg);let o=Ji(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>an(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){let i=[],r=n.currentTimeline.currentTime,s=e.options&&e.options.delay?Ji(e.options.delay):0;e.steps.forEach(o=>{let a=n.createSubContext(e.options);s&&a.delayNextStep(s),an(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>n.currentTimeline.mergeTimelineCollectedStyles(o)),n.transformIntoNewTimeline(r),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){let i=e.strValue,r=n.params?ud(i,n.params,n.errors):i;return bg(r,n.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){let i=n.currentAnimateTimings=this._visitTiming(e.timings,n),r=n.currentTimeline;i.delay&&(n.incrementTime(i.delay),r.snapshotCurrentStyles());let s=e.style;s.type==oe.Keyframes?this.visitKeyframes(s,n):(n.incrementTime(i.duration),this.visitStyle(s,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){let i=n.currentTimeline,r=n.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){let i=n.currentAnimateTimings,r=n.currentTimeline.duration,s=i.duration,a=n.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(r+s),n.previousNode=e}visitQuery(e,n){let i=n.currentTimeline.currentTime,r=e.options||{},s=r.delay?Ji(r.delay):0;s&&(n.previousNode.type===oe.Style||i==0&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Tg);let o=i,a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{n.currentQueryIndex=u;let d=n.createSubContext(e.options,l);s&&d.delayNextStep(s),l===n.element&&(c=d.currentTimeline),an(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let h=d.currentTimeline.currentTime;o=Math.max(o,h)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),c&&(n.currentTimeline.mergeTimelineCollectedStyles(c),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){let i=n.parentContext,r=n.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(n.currentQueryTotal-1),c=o*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime;break}let u=n.currentTimeline;c&&u.delayNextStep(c);let d=u.currentTime;an(this,e.animation,n),n.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}},Tg={},B0=class t{constructor(e,n,i,r,s,o,a,c){this._driver=e,this.element=n,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Tg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Sg(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=Ji(i.duration)),i.delay!=null&&(r.delay=Ji(i.delay));let s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!n||!o.hasOwnProperty(a))&&(o[a]=ud(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let n=this.options.params;if(n){let i=e.params={};Object.keys(n).forEach(r=>{i[r]=n[r]})}}return e}createSubContext(e=null,n,i){let r=n||this.element,s=new t(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Tg,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,i){let r={duration:n??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new U0(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(SK,"."+this._enterClassName),e=e.replace(RK,"."+this._leaveClassName);let c=i!=1,l=this._driver.query(this.element,e,c);i!==0&&(l=i<0?l.slice(l.length+i,l.length):l.slice(0,i)),a.push(...l)}return!s&&a.length==0&&o.push(H8(n)),a}},Sg=class t{constructor(e,n,i,r){this._driver=e,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let n=this._keyframes.size===1&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=CK,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,i]of this._globalTimelineStyles)this._backFill.set(n,i||xi),this._currentKeyframe.set(n,xi);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,i,r){n&&this._previousKeyframe.set("easing",n);let s=r&&r.params||{},o=xK(e,this._globalTimelineStyles);for(let[a,c]of o){let l=ud(c,s,i);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??xi),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,i)=>{let r=this._styleSummary.get(i);(!r||n.time>r.time)&&this._updateStyle(i,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,n=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((u,d)=>{u===gg?e.add(d):u===xi&&n.add(d)}),i||l.set("offset",c/this.duration),r.push(l)});let s=[...e.values()],o=[...n.values()];if(i){let a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return eC(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}},U0=class extends Sg{constructor(e,n,i,r,s,o,a=!1){super(e,n,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&n){let s=[],o=i+n,a=n/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",u1(a)),s.push(l);let u=e.length-1;for(let d=1;d<=u;d++){let h=new Map(e[d]),f=h.get("offset"),p=n+f*i;h.set("offset",u1(p/o)),s.push(h)}i=o,n=0,r="",e=s}return eC(this.element,e,this.preStyleProps,this.postStyleProps,i,n,r,!0)}};function u1(t,e=3){let n=Math.pow(10,e-1);return Math.round(t*n)/n}function xK(t,e){let n=new Map,i;return t.forEach(r=>{if(r==="*"){i??=e.keys();for(let s of i)n.set(s,xi)}else for(let[s,o]of r)n.set(s,o)}),n}function d1(t,e,n,i,r,s,o,a,c,l,u,d,h){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:h}}var R0={},Ag=class{constructor(e,n,i){this._triggerName=e,this.ast=n,this._stateStyles=i}match(e,n,i,r){return MK(this.ast.matchers,e,n,i,r)}buildStyles(e,n,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(n,i):new Map}build(e,n,i,r,s,o,a,c,l,u){let d=[],h=this.ast.options&&this.ast.options.params||R0,f=a&&a.params||R0,p=this.buildStyles(i,f,d),g=c&&c.params||R0,v=this.buildStyles(r,g,d),E=new Set,S=new Map,N=new Map,O=r==="void",K={params:S1(g,h),delay:this.ast.options?.delay},j=u?[]:T1(e,n,this.ast.animation,s,o,p,v,K,l,d),ae=0;return j.forEach(De=>{ae=Math.max(De.duration+De.delay,ae)}),d.length?d1(n,this._triggerName,i,r,O,p,v,[],[],S,N,ae,d):(j.forEach(De=>{let Mt=De.element,Rn=cn(S,Mt,new Set);De.preStyleProps.forEach(os=>Rn.add(os));let VC=cn(N,Mt,new Set);De.postStyleProps.forEach(os=>VC.add(os)),Mt!==n&&E.add(Mt)}),d1(n,this._triggerName,i,r,O,p,v,j,[...E.values()],S,N,ae))}};function MK(t,e,n,i,r){return t.some(s=>s(e,n,i,r))}function S1(t,e){let n=I({},e);return Object.entries(t).forEach(([i,r])=>{r!=null&&(n[i]=r)}),n}var $0=class{constructor(e,n,i){this.styles=e,this.defaultParams=n,this.normalizer=i}buildStyles(e,n){let i=new Map,r=S1(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=ud(o,r,n));let c=this.normalizer.normalizePropertyName(a,n);o=this.normalizer.normalizeStyleValue(a,c,o,n),i.set(a,o)})}),i}};function NK(t,e,n){return new H0(t,e,n)}var H0=class{constructor(e,n,i){this.name=e,this.ast=n,this._normalizer=i,this.transitionFactories=[],this.states=new Map,n.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new $0(r.style,s,i))}),h1(this.states,"true","1"),h1(this.states,"false","0"),n.transitions.forEach(r=>{this.transitionFactories.push(new Ag(e,r,this.states))}),this.fallbackTransition=PK(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,i,r){return this.transitionFactories.find(o=>o.match(e,n,i,r))||null}matchStyles(e,n,i){return this.fallbackTransition.buildStyles(e,n,i)}};function PK(t,e,n){let i=[(o,a)=>!0],r={type:oe.Sequence,steps:[],options:null},s={type:oe.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new Ag(t,s,e)}function h1(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}var OK=new dd,z0=class{constructor(e,n,i){this.bodyNode=e,this._driver=n,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){let i=[],r=[],s=C1(this._driver,n,i,r);if(i.length)throw K8(i);r.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,n,i){let r=e.element,s=_1(this._normalizer,e.keyframes,n,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,n,i={}){let r=[],s=this._animations.get(e),o,a=new Map;if(s?(o=T1(this._driver,n,s,I1,P0,new Map,new Map,i,OK,r),o.forEach(u=>{let d=cn(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(Q8()),o=[]),r.length)throw Y8(r);a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,xi))})});let c=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),l=is(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);let i=this.players.indexOf(n);i>=0&&this.players.splice(i,1)}_getPlayer(e){let n=this._playersById.get(e);if(!n)throw Z8(e);return n}listen(e,n,i,r){let s=Q0(n,"","","");return K0(this._getPlayer(e),i,s,r),()=>{}}command(e,n,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let o=r[0]||{};this.create(e,n,o);return}let s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},f1="ng-animate-queued",kK=".ng-animate-queued",x0="ng-animate-disabled",FK=".ng-animate-disabled",LK="ng-star-inserted",VK=".ng-star-inserted",jK=[],A1={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},BK={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},$n="__ng_removed",hd=class{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=$K(r),i){let s=e,{value:o}=s,a=qC(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let n=e.params;if(n){let i=this.options.params;Object.keys(n).forEach(r=>{i[r]==null&&(i[r]=n[r])})}}},ld="void",M0=new hd(ld),q0=class{constructor(e,n,i){this.id=e,this.hostElement=n,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Sn(n,this._hostClassName)}listen(e,n,i,r){if(!this._triggers.has(n))throw X8(i,n);if(i==null||i.length==0)throw J8(n);if(!HK(i))throw eK(i,n);let s=cn(this._elementListeners,e,[]),o={name:n,phase:i,callback:r};s.push(o);let a=cn(this._engine.statesByElement,e,new Map);return a.has(n)||(Sn(e,yg),Sn(e,yg+"-"+n),a.set(n,M0)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return this._triggers.has(e)?!1:(this._triggers.set(e,n),!0)}_getTrigger(e){let n=this._triggers.get(e);if(!n)throw tK(e);return n}trigger(e,n,i,r=!0){let s=this._getTrigger(n),o=new fd(this.id,n,e),a=this._engine.statesByElement.get(e);a||(Sn(e,yg),Sn(e,yg+"-"+n),this._engine.statesByElement.set(e,a=new Map));let c=a.get(n),l=new hd(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(n,l),c||(c=M0),!(l.value===ld)&&c.value===l.value){if(!GK(c.params,l.params)){let g=[],v=s.matchStyles(c.value,c.params,g),E=s.matchStyles(l.value,l.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{wo(e,v),Mi(e,E)})}return}let h=cn(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==n&&g.queued&&g.destroy()});let f=s.matchTransition(c.value,l.value,e,l.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:f,fromState:c,toState:l,player:o,isFallbackTransition:p}),p||(Sn(e,f1),o.onStart(()=>{dc(e,f1)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);let v=this._engine.playersByElement.get(e);if(v){let E=v.indexOf(o);E>=0&&v.splice(E,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,i)=>{this._elementListeners.set(i,n.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let n=this._engine.playersByElement.get(e);n&&(n.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){let i=this._engine.driver.query(e,Ig,!0);i.forEach(r=>{if(r[$n])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,n,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,n,i,r){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,ld,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,o),i&&is(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let n=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(n&&i){let r=new Set;n.forEach(s=>{let o=s.name;if(r.has(o))return;r.add(o);let c=this._triggers.get(o).fallbackTransition,l=i.get(o)||M0,u=new hd(ld),d=new fd(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,n){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let r=!1;if(i.totalAnimations){let s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,n);else{let s=e[$n];(!s||s===A1)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,n))}}insertNode(e,n){Sn(e,this._hostClassName)}drainQueuedTransitions(e){let n=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){let c=Q0(s,i.triggerName,i.fromState.value,i.toState.value);c._data=e,K0(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):n.push(i)}),this._queue=[],n.sort((i,r)=>{let s=i.transition.ast.depCount,o=r.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},G0=class{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,i){this.bodyNode=e,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(n=>{n.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,n){let i=new q0(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(i,n):(this.newHostElements.set(n,i),this.collectEnterElement(n)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,n){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(n);for(;a;){let c=r.get(a);if(c){let l=i.indexOf(c);i.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(n,e),e}register(e,n){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,n)),i}registerTrigger(e,n,i){let r=this._namespaceLookup[e];r&&r.register(n,i)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let n=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&n.add(s)}}return n}trigger(e,n,i,r){if(wg(n)){let s=this._fetchNamespace(e);if(s)return s.trigger(n,i,r),!0}return!1}insertNode(e,n,i,r){if(!wg(n))return;let s=n[$n];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(n);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(n,i)}r&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Sn(e,x0)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),dc(e,x0))}removeNode(e,n,i){if(wg(n)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(n,i):this.markElementAsRemoved(e,n,!1,i);let s=this.namespacesByHostElement.get(n);s&&s.id!==e&&s.removeNode(n,i)}else this._onRemovalComplete(n,i)}markElementAsRemoved(e,n,i,r,s){this.collectedLeaveElements.push(n),n[$n]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,n,i,r,s){return wg(n)?this._fetchNamespace(e).listen(n,i,r,s):()=>{}}_buildInstruction(e,n,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,n,s)}destroyInnerAnimations(e){let n=this.driver.query(e,Ig,!0);n.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(n=this.driver.query(e,O0,!0),n.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let n=this.playersByElement.get(e);n&&n.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let n=this.playersByQueriedElement.get(e);n&&n.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return is(this.players).onDone(()=>e());e()})}processLeaveNode(e){let n=e[$n];if(n&&n.setForRemoval){if(e[$n]=A1,n.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(x0)&&this.markElementAsDisabled(e,!1),this.driver.query(e,FK,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Sn(r,LK)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{n=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],n.length?is(n).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw nK(e)}_flushAnimations(e,n){let i=new dd,r=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(F=>{u.add(F);let $=this.driver.query(F,kK,!0);for(let G=0;G<$.length;G++)u.add($[G])});let d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=g1(h,this.collectedEnterElements),p=new Map,g=0;f.forEach((F,$)=>{let G=I1+g++;p.set($,G),F.forEach(_e=>Sn(_e,G))});let v=[],E=new Set,S=new Set;for(let F=0;F<this.collectedLeaveElements.length;F++){let $=this.collectedLeaveElements[F],G=$[$n];G&&G.setForRemoval&&(v.push($),E.add($),G.hasAnimation?this.driver.query($,VK,!0).forEach(_e=>E.add(_e)):S.add($))}let N=new Map,O=g1(h,Array.from(E));O.forEach((F,$)=>{let G=P0+g++;N.set($,G),F.forEach(_e=>Sn(_e,G))}),e.push(()=>{f.forEach((F,$)=>{let G=p.get($);F.forEach(_e=>dc(_e,G))}),O.forEach((F,$)=>{let G=N.get($);F.forEach(_e=>dc(_e,G))}),v.forEach(F=>{this.processLeaveNode(F)})});let K=[],j=[];for(let F=this._namespaceList.length-1;F>=0;F--)this._namespaceList[F].drainQueuedTransitions(n).forEach(G=>{let _e=G.player,ot=G.element;if(K.push(_e),this.collectedEnterElements.length){let It=ot[$n];if(It&&It.setForMove){if(It.previousTriggersValues&&It.previousTriggersValues.has(G.triggerName)){let as=It.previousTriggersValues.get(G.triggerName),ln=this.statesByElement.get(G.element);if(ln&&ln.has(G.triggerName)){let Od=ln.get(G.triggerName);Od.value=as,ln.set(G.triggerName,Od)}}_e.destroy();return}}let qn=!d||!this.driver.containsElement(d,ot),Wt=N.get(ot),ir=p.get(ot),je=this._buildInstruction(G,i,ir,Wt,qn);if(je.errors&&je.errors.length){j.push(je);return}if(qn){_e.onStart(()=>wo(ot,je.fromStyles)),_e.onDestroy(()=>Mi(ot,je.toStyles)),r.push(_e);return}if(G.isFallbackTransition){_e.onStart(()=>wo(ot,je.fromStyles)),_e.onDestroy(()=>Mi(ot,je.toStyles)),r.push(_e);return}let UC=[];je.timelines.forEach(It=>{It.stretchStartingKeyframe=!0,this.disabledNodes.has(It.element)||UC.push(It)}),je.timelines=UC,i.append(ot,je.timelines);let JL={instruction:je,player:_e,element:ot};o.push(JL),je.queriedElements.forEach(It=>cn(a,It,[]).push(_e)),je.preStyleProps.forEach((It,as)=>{if(It.size){let ln=c.get(as);ln||c.set(as,ln=new Set),It.forEach((Od,ny)=>ln.add(ny))}}),je.postStyleProps.forEach((It,as)=>{let ln=l.get(as);ln||l.set(as,ln=new Set),It.forEach((Od,ny)=>ln.add(ny))})});if(j.length){let F=[];j.forEach($=>{F.push(iK($.triggerName,$.errors))}),K.forEach($=>$.destroy()),this.reportError(F)}let ae=new Map,De=new Map;o.forEach(F=>{let $=F.element;i.has($)&&(De.set($,$),this._beforeAnimationBuild(F.player.namespaceId,F.instruction,ae))}),r.forEach(F=>{let $=F.element;this._getPreviousPlayers($,!1,F.namespaceId,F.triggerName,null).forEach(_e=>{cn(ae,$,[]).push(_e),_e.destroy()})});let Mt=v.filter(F=>y1(F,c,l)),Rn=new Map;m1(Rn,this.driver,S,l,xi).forEach(F=>{y1(F,c,l)&&Mt.push(F)});let os=new Map;f.forEach((F,$)=>{m1(os,this.driver,new Set(F),c,gg)}),Mt.forEach(F=>{let $=Rn.get(F),G=os.get(F);Rn.set(F,new Map([...$?.entries()??[],...G?.entries()??[]]))});let ty=[],jC=[],BC={};o.forEach(F=>{let{element:$,player:G,instruction:_e}=F;if(i.has($)){if(u.has($)){G.onDestroy(()=>Mi($,_e.toStyles)),G.disabled=!0,G.overrideTotalTime(_e.totalTime),r.push(G);return}let ot=BC;if(De.size>1){let Wt=$,ir=[];for(;Wt=Wt.parentNode;){let je=De.get(Wt);if(je){ot=je;break}ir.push(Wt)}ir.forEach(je=>De.set(je,ot))}let qn=this._buildAnimation(G.namespaceId,_e,ae,s,os,Rn);if(G.setRealPlayer(qn),ot===BC)ty.push(G);else{let Wt=this.playersByElement.get(ot);Wt&&Wt.length&&(G.parentPlayer=is(Wt)),r.push(G)}}else wo($,_e.fromStyles),G.onDestroy(()=>Mi($,_e.toStyles)),jC.push(G),u.has($)&&r.push(G)}),jC.forEach(F=>{let $=s.get(F.element);if($&&$.length){let G=is($);F.setRealPlayer(G)}}),r.forEach(F=>{F.parentPlayer?F.syncPlayerEvents(F.parentPlayer):F.destroy()});for(let F=0;F<v.length;F++){let $=v[F],G=$[$n];if(dc($,P0),G&&G.hasAnimation)continue;let _e=[];if(a.size){let qn=a.get($);qn&&qn.length&&_e.push(...qn);let Wt=this.driver.query($,O0,!0);for(let ir=0;ir<Wt.length;ir++){let je=a.get(Wt[ir]);je&&je.length&&_e.push(...je)}}let ot=_e.filter(qn=>!qn.destroyed);ot.length?zK(this,$,ot):this.processLeaveNode($)}return v.length=0,ty.forEach(F=>{this.players.push(F),F.onDone(()=>{F.destroy();let $=this.players.indexOf(F);this.players.splice($,1)}),F.play()}),ty}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,i,r,s){let o=[];if(n){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==ld;a.forEach(l=>{l.queued||!c&&l.triggerName!=r||o.push(l)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,n,i){let r=n.triggerName,s=n.element,o=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:r;for(let c of n.timelines){let l=c.element,u=l!==s,d=cn(i,l,[]);this._getPreviousPlayers(l,u,o,a,n.toState).forEach(f=>{let p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}wo(s,n.fromStyles)}_buildAnimation(e,n,i,r,s,o){let a=n.triggerName,c=n.element,l=[],u=new Set,d=new Set,h=n.timelines.map(p=>{let g=p.element;u.add(g);let v=g[$n];if(v&&v.removedBeforeQueried)return new ns(p.duration,p.delay);let E=g!==c,S=qK((i.get(g)||jK).map(ae=>ae.getRealPlayer())).filter(ae=>{let De=ae;return De.element?De.element===g:!1}),N=s.get(g),O=o.get(g),K=_1(this._normalizer,p.keyframes,N,O),j=this._buildPlayer(p,K,S);if(p.subTimeline&&r&&d.add(g),E){let ae=new fd(e,a,g);ae.setRealPlayer(j),l.push(ae)}return j});l.forEach(p=>{cn(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>UK(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Sn(p,a1));let f=is(h);return f.onDestroy(()=>{u.forEach(p=>dc(p,a1)),Mi(c,n.toStyles)}),d.forEach(p=>{cn(r,p,[]).push(f)}),f}_buildPlayer(e,n,i){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,i):new ns(e.duration,e.delay)}},fd=class{constructor(e,n,i){this.namespaceId=e,this.triggerName=n,this.element=i,this._player=new ns,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,i)=>{n.forEach(r=>K0(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){cn(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let n=this._player;n.triggerCallback&&n.triggerCallback(e)}};function UK(t,e,n){let i=t.get(e);if(i){if(i.length){let r=i.indexOf(n);i.splice(r,1)}i.length==0&&t.delete(e)}return i}function $K(t){return t??null}function wg(t){return t&&t.nodeType===1}function HK(t){return t=="start"||t=="done"}function p1(t,e){let n=t.style.display;return t.style.display=e??"none",n}function m1(t,e,n,i,r){let s=[];n.forEach(c=>s.push(p1(c)));let o=[];i.forEach((c,l)=>{let u=new Map;c.forEach(d=>{let h=e.computeStyle(l,d,r);u.set(d,h),(!h||h.length==0)&&(l[$n]=BK,o.push(l))}),t.set(l,u)});let a=0;return n.forEach(c=>p1(c,s[a++])),o}function g1(t,e){let n=new Map;if(t.forEach(a=>n.set(a,[])),e.length==0)return n;let i=1,r=new Set(e),s=new Map;function o(a){if(!a)return i;let c=s.get(a);if(c)return c;let l=a.parentNode;return n.has(l)?c=l:r.has(l)?c=i:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==i&&n.get(c).push(a)}),n}function Sn(t,e){t.classList?.add(e)}function dc(t,e){t.classList?.remove(e)}function zK(t,e,n){is(n).onDone(()=>t.processLeaveNode(e))}function qK(t){let e=[];return R1(t,e),e}function R1(t,e){for(let n=0;n<t.length;n++){let i=t[n];i instanceof ad?R1(i.players,e):e.push(i)}}function GK(t,e){let n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){let s=n[r];if(!e.hasOwnProperty(s)||t[s]!==e[s])return!1}return!0}function y1(t,e,n){let i=n.get(t);if(!i)return!1;let r=e.get(t);return r?i.forEach(s=>r.add(s)):e.set(t,i),n.delete(t),!0}var hc=class{constructor(e,n,i){this._driver=n,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new G0(e.body,n,i),this._timelineEngine=new z0(e.body,n,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,n,i,r,s){let o=e+"-"+r,a=this._triggerCache[o];if(!a){let c=[],l=[],u=C1(this._driver,s,c,l);if(c.length)throw G8(r,c);l.length&&void 0,a=NK(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(n,r,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,i,r){this._transitionEngine.insertNode(e,n,i,r)}onRemove(e,n,i){this._transitionEngine.removeNode(e,n,i)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,i,r){if(i.charAt(0)=="@"){let[s,o]=s1(i),a=r;this._timelineEngine.command(s,n,o,a)}else this._transitionEngine.trigger(e,n,i,r)}listen(e,n,i,r,s){if(i.charAt(0)=="@"){let[o,a]=s1(i);return this._timelineEngine.listen(o,n,a,s)}return this._transitionEngine.listen(e,n,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function WK(t,e){let n=null,i=null;return Array.isArray(e)&&e.length?(n=N0(e[0]),e.length>1&&(i=N0(e[e.length-1]))):e instanceof Map&&(n=N0(e)),n||i?new KK(t,n,i):null}var KK=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._startStyles=r,this._endStyles=s,this._state=0;let o=e.initialStylesByElement.get(i);o||e.initialStylesByElement.set(i,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Mi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Mi(this._element,this._initialStyles),this._endStyles&&(Mi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(wo(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wo(this._element,this._endStyles),this._endStyles=null),Mi(this._element,this._initialStyles),this._state=3)}};e.initialStylesByElement=new WeakMap;let t=e;return t})();function N0(t){let e=null;return t.forEach((n,i)=>{QK(i)&&(e=e||new Map,e.set(i,n))}),e}function QK(t){return t==="display"||t==="position"}var Rg=class{constructor(e,n,i,r){this.element=e,this.keyframes=n,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let n=()=>this._onFinish();this.domPlayer.addEventListener("finish",n),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",n)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let n=[];return e.forEach(i=>{n.push(Object.fromEntries(i))}),n}_triggerWebAnimation(e,n,i){return e.animate(this._convertKeyframesToObject(n),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:J0(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let n=e==="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},xg=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return v1(e,n)}getParentElement(e){return Y0(e)}query(e,n,i){return w1(e,n,i)}computeStyle(e,n,i){return J0(e,n)}animate(e,n,i,r,s,o=[]){let a=r==0?"both":"forwards",c={duration:i,delay:r,fill:a};s&&(c.easing=s);let l=new Map,u=o.filter(f=>f instanceof Rg);pK(i,r)&&u.forEach(f=>{f.currentSnapshot.forEach((p,g)=>l.set(g,p))});let d=dK(n).map(f=>new Map(f));d=mK(e,d,l);let h=WK(e,d);return new Rg(e,d,c,h)}};var Eg="@",x1="@.disabled",Mg=class{constructor(e,n,i,r){this.namespaceId=e,this.delegate=n,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,i,r=!0){this.delegate.insertBefore(e,n,i),this.engine.onInsert(this.namespaceId,n,e,r)}removeChild(e,n,i){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,i,r){this.delegate.setAttribute(e,n,i,r)}removeAttribute(e,n,i){this.delegate.removeAttribute(e,n,i)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,i,r){this.delegate.setStyle(e,n,i,r)}removeStyle(e,n,i){this.delegate.removeStyle(e,n,i)}setProperty(e,n,i){n.charAt(0)==Eg&&n==x1?this.disableAnimations(e,!!i):this.delegate.setProperty(e,n,i)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,i){return this.delegate.listen(e,n,i)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}},W0=class extends Mg{constructor(e,n,i,r,s){super(n,i,r,s),this.factory=e,this.namespaceId=n}setProperty(e,n,i){n.charAt(0)==Eg?n.charAt(1)=="."&&n==x1?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,n.slice(1),i):this.delegate.setProperty(e,n,i)}listen(e,n,i){if(n.charAt(0)==Eg){let r=YK(e),s=n.slice(1),o="";return s.charAt(0)!=Eg&&([s,o]=ZK(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,i,a)})}return this.delegate.listen(e,n,i)}};function YK(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function ZK(t){let e=t.indexOf("."),n=t.substring(0,e),i=t.slice(e+1);return[n,i]}var Ng=class{constructor(e,n,i){this.delegate=e,this.engine=n,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,n.onRemovalComplete=(r,s)=>{let o=s?.parentNode(r);o&&s.removeChild(o,r)}}createRenderer(e,n){let i="",r=this.delegate.createRenderer(e,n);if(!e||!n?.data?.animation){let l=this._rendererCache,u=l.get(r);if(!u){let d=()=>l.delete(r);u=new Mg(i,r,this.engine,d),l.set(r,u)}return u}let s=n.id,o=n.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return n.data.animation.forEach(a),new W0(this,o,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>n(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),r.push([n,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var JK=(()=>{let e=class e extends hc{constructor(i,r,s,o){super(i,r,s)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(y(Y),y(pd),y(Eo),y(hi))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function eQ(){return new Dg}function tQ(t,e,n){return new Ng(t,e,n)}var N1=[{provide:Eo,useFactory:eQ},{provide:hc,useClass:JK},{provide:bs,useFactory:tQ,deps:[xf,hc,L]}],M1=[{provide:pd,useFactory:()=>new xg},{provide:qt,useValue:"BrowserAnimations"},...N1],nQ=[{provide:pd,useClass:Z0},{provide:qt,useValue:"NoopAnimations"},...N1],Qle=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:i.disableAnimations?nQ:M1}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({providers:M1,imports:[xx]});let t=e;return t})();function iQ(t){return t!=null&&`${t}`!="false"}function md(t,e=0){return rQ(t)?Number(t):e}function rQ(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function fc(t){return Array.isArray(t)?t:[t]}function Xe(t){return t==null?"":typeof t=="string"?t:`${t}px`}function er(t){return t instanceof we?t.nativeElement:t}function Jle(t,e=/\s+/){let n=[];if(t!=null){let i=Array.isArray(t)?t:`${t}`.split(e);for(let r of i){let s=`${r}`.trim();s&&n.push(s)}}return n}var nC;try{nC=typeof Intl<"u"&&Intl.v8BreakIterator}catch{nC=!1}var We=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?Zv(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||nC)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(y(pn))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var pc,P1=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function oue(){if(pc)return pc;if(typeof document!="object"||!document)return pc=new Set(P1),pc;let t=document.createElement("input");return pc=new Set(P1.filter(e=>(t.setAttribute("type",e),t.type===e))),pc}var gd;function sQ(){if(gd==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>gd=!0}))}finally{gd=gd||!1}return gd}function mc(t){return sQ()?t:!!t.capture}var Io;function O1(){if(Io==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Io=!1,Io;if("scrollBehavior"in document.documentElement.style)Io=!0;else{let t=Element.prototype.scrollTo;t?Io=!/\{\s*\[native code\]\s*\}/.test(t.toString()):Io=!1}}return Io}var tC;function oQ(){if(tC==null){let t=typeof document<"u"?document.head:null;tC=!!(t&&(t.createShadowRoot||t.attachShadow))}return tC}function k1(t){if(oQ()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function gc(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function Hn(t){return t.composedPath?t.composedPath()[0]:t.target}function yd(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var aQ=new x("cdk-dir-doc",{providedIn:"root",factory:cQ});function cQ(){return C(Y)}var lQ=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function uQ(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?lQ.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var vd=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new Ee,i){let r=i.body?i.body.dir:null,s=i.documentElement?i.documentElement.dir:null;this.value=uQ(r||s||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(y(aQ,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var rs=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})();var hQ=20,L1=(()=>{let e=class e{constructor(i,r,s){this._ngZone=i,this._platform=r,this._scrolled=new q,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=hQ){return this._platform.isBrowser?new W(r=>{this._globalSubscription||this._addGlobalListener();let s=i>0?this._scrolled.pipe(dh(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):H()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let s=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(Fe(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,i)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let s=er(r),o=i.getElementRef().nativeElement;do if(s==o)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return Tc(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(y(L),y(We),y(Y,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var fQ=20,iC=(()=>{let e=class e{constructor(i,r,s){this._platform=i,this._change=new q,this._changeListener=o=>{this._change.next(o)},this._document=s,r.runOutsideAngular(()=>{if(i.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+s,right:i.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),s=i.documentElement,o=s.getBoundingClientRect(),a=-o.top||i.body.scrollTop||r.scrollY||s.scrollTop||0,c=-o.left||i.body.scrollLeft||r.scrollX||s.scrollLeft||0;return{top:a,left:c}}change(i=fQ){return i>0?this._change.pipe(dh(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(y(We),y(L),y(Y,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var F1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})(),rC=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[rs,F1,rs,F1]});let t=e;return t})();var wd=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},yc=class extends wd{constructor(e,n,i,r,s){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}},_c=class extends wd{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},sC=class extends wd{constructor(e){super(),this.element=e instanceof we?e.nativeElement:e}},vc=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof yc)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof _c)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof sC)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Pg=class extends vc{constructor(e,n,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Me.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Ed=(()=>{let e=class e extends vc{constructor(i,r,s){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Ee,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,o=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(o,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};e.\u0275fac=function(r){return new(r||e)(R(Er),R(mn),R(Y))},e.\u0275dir=Ie({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[fe.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[it]});let t=e;return t})();var Og=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})();function kg(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var V1=O1(),oC=class{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Xe(-this._previousScrollPosition.left),e.style.top=Xe(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,i=e.style,r=n.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),V1&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),V1&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};var aC=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Fe(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Fg=class{enable(){}disable(){}attach(){}};function cC(t,e){return e.some(n=>{let i=t.bottom<n.top,r=t.top>n.bottom,s=t.right<n.left,o=t.left>n.right;return i||r||s||o})}function j1(t,e){return e.some(n=>{let i=t.top<n.top,r=t.bottom>n.bottom,s=t.left<n.left,o=t.right>n.right;return i||r||s||o})}var lC=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();cC(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},mQ=(()=>{let e=class e{constructor(i,r,s,o){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new Fg,this.close=a=>new aC(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new oC(this._viewportRuler,this._document),this.reposition=a=>new lC(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}};e.\u0275fac=function(r){return new(r||e)(y(L1),y(iC),y(L),y(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Id=class{constructor(e){if(this.scrollStrategy=new Fg,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let n=Object.keys(e);for(let i of n)e[i]!==void 0&&(this[i]=e[i])}}};var uC=class{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var z1=(()=>{let e=class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(y(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),gQ=(()=>{let e=class e extends z1{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=s=>{let o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){let c=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(s)):c.next(s);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(y(Y),y(L,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yQ=(()=>{let e=class e extends z1{constructor(i,r,s){super(i),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Hn(o)},this._clickListener=o=>{let a=Hn(o),c=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let u=l.length-1;u>-1;u--){let d=l[u];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(a)||d.overlayElement.contains(c))break;let h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(o)):h.next(o)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(y(Y),y(We),y(L,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wc=(()=>{let e=class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||yd()){let s=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}let r=this._document.createElement("div");r.classList.add(i),yd()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(y(Y),y(We))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tr=class{constructor(e,n,i,r,s,o,a,c,l,u=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new q,this._attachments=new q,this._detachments=new q,this._locationChanges=Ae.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new q,this._outsidePointerEvents=new q,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Be(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=I(I({},this._config),e),this._updateElementSize()}setDirection(e){this._config=ge(I({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Xe(this._config.width),e.height=Xe(this._config.height),e.minWidth=Xe(this._config.minWidth),e.minHeight=Xe(this._config.minHeight),e.maxWidth=Xe(this._config.maxWidth),e.maxHeight=Xe(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){let r=fc(n||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let e=this._ngZone.onStable.pipe(Nn(Sc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},B1="cdk-overlay-connected-position-bounding-box",_Q=/([A-Za-z%]+)$/,dC=class{get positions(){return this._preferredPositions}constructor(e,n,i,r,s){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new q,this._resizeSubscription=Ae.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(B1),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,n,a),u=this._getOverlayFit(l,n,i,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(u,l,i)){s.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(s.length){let a=null,c=-1;for(let l of s){let u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&bo(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(B1),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=i.originX=="start"?o:a}n.left<0&&(r-=n.left);let s;return i.originY=="center"?s=e.top+e.height/2:s=i.originY=="top"?e.top:e.bottom,n.top<0&&(s-=n.top),{x:r,y:s}}_getOverlayPoint(e,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let s;return i.overlayY=="center"?s=-n.height/2:s=i.overlayY=="top"?0:-n.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,n,i,r){let s=$1(n),{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let u=0-o,d=o+s.width-i.width,h=0-a,f=a+s.height-i.height,p=this._subtractOverflows(s.width,u,d),g=this._subtractOverflows(s.height,h,f),v=p*g;return{visibleArea:v,isCompletelyWithinViewport:s.width*s.height===v,fitsInViewportVertically:g===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,s=i.right-n.x,o=U1(this._overlayRef.getConfig().minHeight),a=U1(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportVertically||o!=null&&o<=r,l=e.fitsInViewportHorizontally||a!=null&&a<=s;return c&&l}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=$1(n),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0),u=0,d=0;return r.width<=s.width?u=l||-o:u=e.x<this._viewportMargin?s.left-i.left-e.x:0,r.height<=s.height?d=c||-a:d=e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){let i=this._getScrollVisibility(),r=new uC(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){let i=this._viewportRect,r=this._isRtl(),s,o,a;if(n.overlayY==="top")o=e.y,s=i.height-o+this._viewportMargin;else if(n.overlayY==="bottom")a=i.height-e.y+this._viewportMargin*2,s=i.height-a+this._viewportMargin;else{let f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;s=f*2,o=e.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}let c=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,l=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,u,d,h;if(l)h=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if(c)d=e.x,u=i.right-e.x;else{let f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;u=f*2,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,n){let i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Xe(i.height),r.top=Xe(i.top),r.bottom=Xe(i.bottom),r.width=Xe(i.width),r.left=Xe(i.left),r.right=Xe(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=Xe(s)),o&&(r.maxWidth=Xe(o))}this._lastBoundingBoxSize=i,bo(this._boundingBox.style,r)}_resetBoundingBoxStyles(){bo(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){bo(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let u=this._viewportRuler.getViewportScrollPosition();bo(i,this._getExactOverlayY(n,e,u)),bo(i,this._getExactOverlayX(n,e,u))}else i.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Xe(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Xe(o.maxWidth):s&&(i.maxWidth="")),bo(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=Xe(s.y);return r}_getExactOverlayX(e,n,i){let r={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(s.x+this._overlayRect.width)}px`}else r.left=Xe(s.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:j1(e,i),isOriginOutsideView:cC(e,i),isOverlayClipped:j1(n,i),isOverlayOutsideView:cC(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&fc(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof we)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}};function bo(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function U1(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(_Q);return!n||n==="px"?parseFloat(e):null}return t||null}function $1(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}var H1="cdk-global-overlay-wrapper",hC=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(H1),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),l=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",p="",g="";c?g="flex-start":u==="center"?(g="center",h?p=d:f=d):h?u==="left"||u==="end"?(g="flex-end",f=d):(u==="right"||u==="start")&&(g="flex-start",p=d):u==="left"||u==="start"?(g="flex-start",f=d):(u==="right"||u==="end")&&(g="flex-end",p=d),e.position=this._cssPosition,e.marginLeft=c?"0":f,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":p,n.justifyContent=g,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(H1),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},vQ=(()=>{let e=class e{constructor(i,r,s,o){this._viewportRuler=i,this._document=r,this._platform=s,this._overlayContainer=o}global(){return new hC}flexibleConnectedTo(i){return new dC(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(y(iC),y(Y),y(We),y(wc))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wQ=0,zn=(()=>{let e=class e{constructor(i,r,s,o,a,c,l,u,d,h,f,p){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=u,this._directionality=d,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=p}create(i){let r=this._createHostElement(),s=this._createPaneElement(r),o=this._createPortalOutlet(s),a=new Id(i);return a.direction=a.direction||this._directionality.value,new tr(o,r,s,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${wQ++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(hi)),new Pg(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(y(mQ),y(wc),y(Er),y(vQ),y(gQ),y(Me),y(L),y(Y),y(vd),y(mi),y(yQ),y(qt,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var EQ=new x("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=C(zn);return()=>t.scrollStrategies.reposition()}});function IQ(t){return()=>t.scrollStrategies.reposition()}var bQ={provide:EQ,deps:[zn],useFactory:IQ},q1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({providers:[zn,bQ],imports:[rs,Og,rC,rC]});let t=e;return t})();var DQ=(()=>{let e=class e{create(i){return typeof MutationObserver>"u"?null:new MutationObserver(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var W1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({providers:[DQ]});let t=e;return t})();var K1=new Set,Do,CQ=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):SQ}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&TQ(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(y(We),y(Zc,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function TQ(t,e){if(!K1.has(t))try{Do||(Do=document.createElement("style"),e&&(Do.nonce=e),Do.setAttribute("type","text/css"),document.head.appendChild(Do)),Do.sheet&&(Do.sheet.insertRule(`@media ${t} {body{ }}`,0),K1.add(t))}catch(n){console.error(n)}}function SQ(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var Y1=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new q}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return Q1(fc(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=Q1(fc(i)).map(a=>this._registerQuery(a).observable),o=fs(s);return o=Kn(o.pipe(Be(1)),o.pipe(Mc(1),fh(0))),o.pipe(ee(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new W(a=>{let c=l=>this._zone.run(()=>a.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(Mn(r),ee(({matches:a})=>({query:i,matches:a})),Nn(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};e.\u0275fac=function(r){return new(r||e)(y(CQ),y(L))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Q1(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var bd=(()=>{let e=class e{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return RQ(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let r=AQ(LQ(i));if(r&&(Z1(r)===-1||!this.isVisible(r)))return!1;let s=i.nodeName.toLowerCase(),o=Z1(i);return i.hasAttribute("contenteditable")?o!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!kQ(i)?!1:s==="audio"?i.hasAttribute("controls")?o!==-1:!1:s==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,r){return FQ(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}};e.\u0275fac=function(r){return new(r||e)(y(We))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function AQ(t){try{return t.frameElement}catch{return null}}function RQ(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function xQ(t){let e=t.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function MQ(t){return PQ(t)&&t.type=="hidden"}function NQ(t){return OQ(t)&&t.hasAttribute("href")}function PQ(t){return t.nodeName.toLowerCase()=="input"}function OQ(t){return t.nodeName.toLowerCase()=="a"}function eL(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let e=t.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function Z1(t){if(!eL(t))return null;let e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function kQ(t){let e=t.nodeName.toLowerCase(),n=e==="input"&&t.type;return n==="text"||n==="password"||e==="select"||e==="textarea"}function FQ(t){return MQ(t)?!1:xQ(t)||NQ(t)||t.hasAttribute("contenteditable")||eL(t)}function LQ(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var pC=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,s=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){let n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=0;i<n.length;i++){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=n.length-1;i>=0;i--){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Be(1)).subscribe(e)}},Dd=(()=>{let e=class e{constructor(i,r,s){this._checker=i,this._ngZone=r,this._document=s}create(i,r=!1){return new pC(i,this._checker,this._ngZone,this._document,r)}};e.\u0275fac=function(r){return new(r||e)(y(bd),y(L),y(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Dde=(()=>{let e=class e{get enabled(){return this.focusTrap?.enabled||!1}set enabled(i){this.focusTrap&&(this.focusTrap.enabled=i)}constructor(i,r,s){this._elementRef=i,this._focusTrapFactory=r,this._previouslyFocusedElement=null,C(We).isBrowser&&(this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0))}ngOnDestroy(){this.focusTrap?.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap?.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap&&!this.focusTrap.hasAttached()&&this.focusTrap.attachAnchors()}ngOnChanges(i){let r=i.autoCapture;r&&!r.firstChange&&this.autoCapture&&this.focusTrap?.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=gc(),this.focusTrap?.focusInitialElementWhenReady()}};e.\u0275fac=function(r){return new(r||e)(R(we),R(Dd),R(Y))},e.\u0275dir=Ie({type:e,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:[fe.HasDecoratorInputTransform,"cdkTrapFocus","enabled",yn],autoCapture:[fe.HasDecoratorInputTransform,"cdkTrapFocusAutoCapture","autoCapture",yn]},exportAs:["cdkTrapFocus"],standalone:!0,features:[Bi,Ft]});let t=e;return t})();function mC(t){return t.buttons===0||t.detail===0}function gC(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var VQ=new x("cdk-input-modality-detector-options"),jQ={ignoreKeys:[18,17,224,91,16]},tL=650,Ec=mc({passive:!0,capture:!0}),BQ=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,s,o){this._platform=i,this._mostRecentTarget=null,this._modality=new Ke(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Hn(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<tL||(this._modality.next(mC(a)?"keyboard":"mouse"),this._mostRecentTarget=Hn(a))},this._onTouchstart=a=>{if(gC(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Hn(a)},this._options=I(I({},jQ),o),this.modalityDetected=this._modality.pipe(Mc(1)),this.modalityChanged=this.modalityDetected.pipe(Rc()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Ec),s.addEventListener("mousedown",this._onMousedown,Ec),s.addEventListener("touchstart",this._onTouchstart,Ec)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ec),document.removeEventListener("mousedown",this._onMousedown,Ec),document.removeEventListener("touchstart",this._onTouchstart,Ec))}};e.\u0275fac=function(r){return new(r||e)(y(We),y(L),y(Y),y(VQ,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Vg=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(Vg||{}),UQ=new x("cdk-focus-monitor-default-options"),Lg=mc({passive:!0,capture:!0}),Cd=(()=>{let e=class e{constructor(i,r,s,o,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new q,this._rootNodeFocusAndBlurListener=c=>{let l=Hn(c);for(let u=l;u;u=u.parentElement)c.type==="focus"?this._onFocus(c,u):this._onBlur(c,u)},this._document=o,this._detectionMode=a?.detectionMode||Vg.IMMEDIATE}monitor(i,r=!1){let s=er(i);if(!this._platform.isBrowser||s.nodeType!==1)return H();let o=k1(s)||this._getDocument(),a=this._elementInfo.get(s);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new q,rootNode:o};return this._elementInfo.set(s,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){let r=er(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){let o=er(i),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===Vg.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===Vg.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?tL:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(i,r){let s=this._elementInfo.get(r),o=Hn(i);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(i,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Lg),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Lg)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Nn(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Lg),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Lg),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((s,o)=>{(o===i||s.checkChildren&&o.contains(i))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let o=i.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(y(L),y(We),y(BQ),y(Y,8),y(UQ,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Cde=(()=>{let e=class e{constructor(i,r){this._elementRef=i,this._focusMonitor=r,this._focusOrigin=null,this.cdkFocusChange=new Ee}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let i=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(i,i.nodeType===1&&i.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(r=>{this._focusOrigin=r,this.cdkFocusChange.emit(r)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(R(we),R(Cd))},e.\u0275dir=Ie({type:e,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"],standalone:!0});let t=e;return t})(),Co=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(Co||{}),X1="cdk-high-contrast-black-on-white",J1="cdk-high-contrast-white-on-black",fC="cdk-high-contrast-active",yC=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=C(Y1).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Co.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Co.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Co.BLACK_ON_WHITE}return Co.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(fC,X1,J1),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Co.BLACK_ON_WHITE?i.add(fC,X1):r===Co.WHITE_ON_BLACK&&i.add(fC,J1)}}};e.\u0275fac=function(r){return new(r||e)(y(We),y(Y))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Tde=(()=>{let e=class e{constructor(i){i._applyBodyHighContrastModeCssClasses()}};e.\u0275fac=function(r){return new(r||e)(y(yC))},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[W1]});let t=e;return t})();function $Q(t,e){}var To=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var EC=(()=>{let e=class e extends vc{constructor(i,r,s,o,a,c,l,u){super(),this._elementRef=i,this._focusTrapFactory=r,this._config=o,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=l,this._focusMonitor=u,this._platform=C(We),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=C(ci),this.attachDomPortal=d=>{this._portalOutlet.hasAttached();let h=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),h},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(i){this._ariaLabelledByQueue.push(i),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(i){let r=this._ariaLabelledByQueue.indexOf(i);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{i.removeEventListener("blur",s),i.removeEventListener("mousedown",s),i.removeAttribute("tabindex")};i.addEventListener("blur",s),i.addEventListener("mousedown",s)})),i.focus(r)}_focusByCssSelector(i,r){let s=this._elementRef.nativeElement.querySelector(i);s&&this._forceFocus(s,r)}_trapFocus(){let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}}_restoreFocus(){let i=this._config.restoreFocus,r=null;if(typeof i=="string"?r=this._document.querySelector(i):typeof i=="boolean"?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&typeof r.focus=="function"){let s=gc(),o=this._elementRef.nativeElement;(!s||s===this._document.body||s===o||o.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let i=this._elementRef.nativeElement,r=gc();return i===r||i.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=gc()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};e.\u0275fac=function(r){return new(r||e)(R(we),R(Dd),R(Y,8),R(To),R(bd),R(L),R(tr),R(Cd))},e.\u0275cmp=oi({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(r,s){if(r&1&&yf(Ed,7),r&2){let o;tl(o=nl())&&(s._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,s){r&2&&ui("id",s._config.id||null)("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null)},standalone:!0,features:[it,di],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,s){r&1&&Zt(0,$Q,0,0,"ng-template",0)},dependencies:[Ed],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2});let t=e;return t})(),Td=class{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new q,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!kg(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(e,n){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},HQ=new x("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=C(zn);return()=>t.scrollStrategies.block()}}),zQ=new x("DialogData"),qQ=new x("DefaultDialogConfig");var GQ=0,nL=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,r,s,o,a,c){this._overlay=i,this._injector=r,this._defaultOptions=s,this._parentDialog=o,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new q,this._afterOpenedAtThisLevel=new q,this._ariaHiddenElements=new Map,this.afterAllClosed=ur(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Mn(void 0))),this._scrollStrategy=c}open(i,r){let s=this._defaultOptions||new To;r=I(I({},s),r),r.id=r.id||`cdk-dialog-${GQ++}`,r.id&&this.getDialogById(r.id);let o=this._getOverlayConfig(r),a=this._overlay.create(o),c=new Td(a,r),l=this._attachContainer(a,c,r);return c.containerInstance=l,this._attachDialogContent(i,c,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){vC(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){vC(this._openDialogsAtThisLevel,i=>{i.config.closeOnDestroy===!1&&this._removeOpenDialog(i,!1)}),vC(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){let r=new Id({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,s){let o=s.injector||s.viewContainerRef?.injector,a=[{provide:To,useValue:s},{provide:Td,useValue:r},{provide:tr,useValue:i}],c;s.container?typeof s.container=="function"?c=s.container:(c=s.container.type,a.push(...s.container.providers(s))):c=EC;let l=new yc(c,s.viewContainerRef,Me.create({parent:o||this._injector,providers:a}),s.componentFactoryResolver);return i.attach(l).instance}_attachDialogContent(i,r,s,o){if(i instanceof Fn){let a=this._createInjector(o,r,s,void 0),c={$implicit:o.data,dialogRef:r};o.templateContext&&(c=I(I({},c),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),s.attachTemplatePortal(new _c(i,null,c,a))}else{let a=this._createInjector(o,r,s,this._injector),c=s.attachComponentPortal(new yc(i,o.viewContainerRef,a,o.componentFactoryResolver));r.componentRef=c,r.componentInstance=c.instance}}_createInjector(i,r,s,o){let a=i.injector||i.viewContainerRef?.injector,c=[{provide:zQ,useValue:i.data},{provide:Td,useValue:r}];return i.providers&&(typeof i.providers=="function"?c.push(...i.providers(r,i,s)):c.push(...i.providers)),i.direction&&(!a||!a.get(vd,null,{optional:!0}))&&c.push({provide:vd,useValue:{value:i.direction,change:H()}}),Me.create({parent:a||o,providers:c})}_removeOpenDialog(i,r){let s=this.openDialogs.indexOf(i);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let i=this._overlayContainer.getContainerElement();if(i.parentElement){let r=i.parentElement.children;for(let s=r.length-1;s>-1;s--){let o=r[s];o!==i&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}};e.\u0275fac=function(r){return new(r||e)(y(zn),y(Me),y(qQ,8),y(e,12),y(wc),y(HQ))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vC(t,e){let n=t.length;for(;n--;)e(t[n])}function WQ(){return!0}var KQ=new x("mat-sanity-checks",{providedIn:"root",factory:WQ}),iL=(()=>{let e=class e{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return yd()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(y(yC),y(KQ,8),y(Y))},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[rs,rs]});let t=e;return t})();var rL=class{constructor(e,n,i,r,s){this._defaultMatcher=e,this.ngControl=n,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=s,this.errorState=!1}updateErrorState(){let e=this.errorState,n=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=typeof i?.isErrorState=="function"?i.isErrorState(r,n):!1;s!==e&&(this.errorState=s,this._stateChanges.next())}};var sL=new x("MAT_DATE_LOCALE",{providedIn:"root",factory:QQ});function QQ(){return C(ua)}var Bg=class{constructor(){this._localeChanges=new q,this.localeChanges=this._localeChanges}getValidDateOrNull(e){return this.isDateInstance(e)&&this.isValid(e)?e:null}deserialize(e){return e==null||this.isDateInstance(e)&&this.isValid(e)?e:this.invalid()}setLocale(e){this.locale=e,this._localeChanges.next()}compareDate(e,n){return this.getYear(e)-this.getYear(n)||this.getMonth(e)-this.getMonth(n)||this.getDate(e)-this.getDate(n)}sameDate(e,n){if(e&&n){let i=this.isValid(e),r=this.isValid(n);return i&&r?!this.compareDate(e,n):i==r}return e==n}clampDate(e,n,i){return n&&this.compareDate(e,n)<0?n:i&&this.compareDate(e,i)>0?i:e}},YQ=new x("mat-date-formats"),ZQ=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function IC(t,e){let n=Array(t);for(let i=0;i<t;i++)n[i]=e(i);return n}var XQ=(()=>{let e=class e extends Bg{constructor(i){super(),this.useUtcForDisplay=!1,this._matDateLocale=C(sL,{optional:!0}),i!==void 0&&(this._matDateLocale=i),super.setLocale(this._matDateLocale)}getYear(i){return i.getFullYear()}getMonth(i){return i.getMonth()}getDate(i){return i.getDate()}getDayOfWeek(i){return i.getDay()}getMonthNames(i){let r=new Intl.DateTimeFormat(this.locale,{month:i,timeZone:"utc"});return IC(12,s=>this._format(r,new Date(2017,s,1)))}getDateNames(){let i=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return IC(31,r=>this._format(i,new Date(2017,0,r+1)))}getDayOfWeekNames(i){let r=new Intl.DateTimeFormat(this.locale,{weekday:i,timeZone:"utc"});return IC(7,s=>this._format(r,new Date(2017,0,s+1)))}getYearName(i){let r=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(r,i)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(i){return this.getDate(this._createDateWithOverflow(this.getYear(i),this.getMonth(i)+1,0))}clone(i){return new Date(i.getTime())}createDate(i,r,s){let o=this._createDateWithOverflow(i,r,s);return o.getMonth()!=r,o}today(){return new Date}parse(i,r){return typeof i=="number"?new Date(i):i?new Date(Date.parse(i)):null}format(i,r){if(!this.isValid(i))throw Error("NativeDateAdapter: Cannot format invalid date.");let s=new Intl.DateTimeFormat(this.locale,ge(I({},r),{timeZone:"utc"}));return this._format(s,i)}addCalendarYears(i,r){return this.addCalendarMonths(i,r*12)}addCalendarMonths(i,r){let s=this._createDateWithOverflow(this.getYear(i),this.getMonth(i)+r,this.getDate(i));return this.getMonth(s)!=((this.getMonth(i)+r)%12+12)%12&&(s=this._createDateWithOverflow(this.getYear(s),this.getMonth(s),0)),s}addCalendarDays(i,r){return this._createDateWithOverflow(this.getYear(i),this.getMonth(i),this.getDate(i)+r)}toIso8601(i){return[i.getUTCFullYear(),this._2digit(i.getUTCMonth()+1),this._2digit(i.getUTCDate())].join("-")}deserialize(i){if(typeof i=="string"){if(!i)return null;if(ZQ.test(i)){let r=new Date(i);if(this.isValid(r))return r}}return super.deserialize(i)}isDateInstance(i){return i instanceof Date}isValid(i){return!isNaN(i.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(i,r,s){let o=new Date;return o.setFullYear(i,r,s),o.setHours(0,0,0,0),o}_2digit(i){return("00"+i).slice(-2)}_format(i,r){let s=new Date;return s.setUTCFullYear(r.getFullYear(),r.getMonth(),r.getDate()),s.setUTCHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),i.format(s)}};e.\u0275fac=function(r){return new(r||e)(y(sL,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),JQ={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};function fhe(t=JQ){return[{provide:Bg,useClass:XQ},{provide:YQ,useValue:t}]}var phe=(()=>{let e=class e{isErrorState(i,r){return!!(i&&i.invalid&&(i.touched||r&&r.submitted))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var An=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(An||{}),CC=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=An.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},oL=mc({passive:!0,capture:!0}),TC=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=Hn(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,i,r){let s=this._events.get(n);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,oL)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let s=r.get(n);s&&(s.delete(i),s.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,oL)))}},aL={enterDuration:225,exitDuration:150},e7=800,cL=mc({passive:!0,capture:!0}),lL=["mousedown","touchstart"],uL=["mouseup","mouseleave","touchend","touchcancel"],Sd=class Sd{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=er(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=I(I({},aL),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let o=i.radius||t7(e,n,r),a=e-r.left,c=n-r.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-o}px`,u.style.top=`${c-o}px`,u.style.height=`${o*2}px`,u.style.width=`${o*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,f=d.transitionDuration,p=h==="none"||f==="0s"||f==="0s, 0s"||r.width===0&&r.height===0,g=new CC(this,u,i,p);u.style.transform="scale3d(1, 1, 1)",g.state=An.FADING_IN,i.persistent||(this._mostRecentTransientRipple=g);let v=null;return!p&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let E=()=>this._finishRippleTransition(g),S=()=>this._destroyRipple(g);u.addEventListener("transitionend",E),u.addEventListener("transitioncancel",S),v={onTransitionEnd:E,onTransitionCancel:S}}),this._activeRipples.set(g,v),(p||!l)&&this._finishRippleTransition(g),g}fadeOutRipple(e){if(e.state===An.FADING_OUT||e.state===An.HIDDEN)return;let n=e.element,i=I(I({},aL),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=An.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=er(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,lL.forEach(i=>{Sd._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{uL.forEach(n=>{this._triggerElement.addEventListener(n,this,cL)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===An.FADING_IN?this._startFadeOutTransition(e):e.state===An.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=An.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=An.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=mC(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+e7;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!gC(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===An.VISIBLE||e.config.terminateOnPointerUp&&e.state===An.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(lL.forEach(n=>Sd._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&uL.forEach(n=>e.removeEventListener(n,this,cL)))}};Sd._eventManager=new TC;var SC=Sd;function t7(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}var pL=new x("mat-ripple-global-options"),n7=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,s,o,a){this._elementRef=i,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new SC(this,r,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:I(I(I({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,s){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,I(I({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,I(I({},this.rippleConfig),i))}};e.\u0275fac=function(r){return new(r||e)(R(we),R(L),R(We),R(pL,8),R(qt,8))},e.\u0275dir=Ie({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){r&2&&Ui("mat-ripple-unbounded",s.unbounded)},inputs:{color:[fe.None,"matRippleColor","color"],unbounded:[fe.None,"matRippleUnbounded","unbounded"],centered:[fe.None,"matRippleCentered","centered"],radius:[fe.None,"matRippleRadius","radius"],animation:[fe.None,"matRippleAnimation","animation"],disabled:[fe.None,"matRippleDisabled","disabled"],trigger:[fe.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=e;return t})(),mhe=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[iL,iL]});let t=e;return t})();var dL={capture:!0},hL=["focus","click","mouseenter","touchstart"],bC="mat-ripple-loader-uninitialized",DC="mat-ripple-loader-class-name",fL="mat-ripple-loader-centered",jg="mat-ripple-loader-disabled",ghe=(()=>{let e=class e{constructor(){this._document=C(Y,{optional:!0}),this._animationMode=C(qt,{optional:!0}),this._globalRippleOptions=C(pL,{optional:!0}),this._platform=C(We),this._ngZone=C(L),this._hosts=new Map,this._onInteraction=i=>{if(!(i.target instanceof HTMLElement))return;let s=i.target.closest(`[${bC}]`);s&&this._createRipple(s)},this._ngZone.runOutsideAngular(()=>{for(let i of hL)this._document?.addEventListener(i,this._onInteraction,dL)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of hL)this._document?.removeEventListener(r,this._onInteraction,dL)}configureRipple(i,r){i.setAttribute(bC,""),(r.className||!i.hasAttribute(DC))&&i.setAttribute(DC,r.className||""),r.centered&&i.setAttribute(fL,""),r.disabled&&i.setAttribute(jg,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let s=this._hosts.get(i);if(s){s.disabled=r;return}r?i.setAttribute(jg,""):i.removeAttribute(jg)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",i.getAttribute(DC)),i.append(s);let o=new n7(new we(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=i,o.centered=i.hasAttribute(fL),o.disabled=i.hasAttribute(jg),this.attachRipple(i,o),o}attachRipple(i,r){i.removeAttribute(bC),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function i7(t,e){}var Ad=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},AC="mdc-dialog--open",mL="mdc-dialog--opening",gL="mdc-dialog--closing",r7=150,s7=75,o7=(()=>{let e=class e extends EC{constructor(i,r,s,o,a,c,l,u,d){super(i,r,s,o,a,c,l,d),this._animationMode=u,this._animationStateChanged=new Ee,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?_L(this._config.enterAnimationDuration)??r7:0,this._exitAnimationDuration=this._animationsEnabled?_L(this._config.exitAnimationDuration)??s7:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(yL,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(mL,AC)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(AC),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(AC),this._animationsEnabled?(this._hostElement.style.setProperty(yL,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(gL)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(mL,gL)}_waitForAnimationToComplete(i,r){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(i):i()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(i){let r=super.attachComponentPortal(i);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}};e.\u0275fac=function(r){return new(r||e)(R(we),R(Dd),R(Y,8),R(Ad),R(bd),R(L),R(tr),R(qt,8),R(Cd))},e.\u0275cmp=oi({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(r,s){r&2&&(mf("id",s._config.id),ui("aria-modal",s._config.ariaModal)("role",s._config.role)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null),Ui("_mat-animation-noopable",!s._animationsEnabled))},standalone:!0,features:[it,di],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,s){r&1&&(Lt(0,"div",0)(1,"div",1),Zt(2,i7,0,0,"ng-template",2),Ct()())},dependencies:[Ed],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2});let t=e;return t})(),yL="--mat-dialog-transition-duration";function _L(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?md(t.substring(0,t.length-2)):t.endsWith("s")?md(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var Ug=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(Ug||{}),RC=class{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new q,this._beforeClosed=new q,this._state=Ug.OPEN,this.disableClose=n.disableClose,this.id=e.id,i._animationStateChanged.pipe(Fe(r=>r.state==="opened"),Be(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Fe(r=>r.state==="closed"),Be(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Sc(this.backdropClick(),this.keydownEvents().pipe(Fe(r=>r.keyCode===27&&!this.disableClose&&!kg(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),a7(this,r.type==="keydown"?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Fe(n=>n.state==="closing"),Be(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=Ug.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=Ug.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function a7(t,e,n){return t._closeInteractionType=e,t.close(n)}var xC=new x("MatMdcDialogData"),c7=new x("mat-mdc-dialog-default-options"),l7=new x("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=C(zn);return()=>t.scrollStrategies.block()}});var u7=0,vL=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(i,r,s,o,a,c,l,u){this._overlay=i,this._defaultOptions=o,this._scrollStrategy=a,this._parentDialog=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new q,this._afterOpenedAtThisLevel=new q,this.dialogConfigClass=Ad,this.afterAllClosed=ur(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Mn(void 0))),this._dialog=r.get(nL),this._dialogRefConstructor=RC,this._dialogContainerType=o7,this._dialogDataToken=xC}open(i,r){let s;r=I(I({},this._defaultOptions||new Ad),r),r.id=r.id||`mat-mdc-dialog-${u7++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(i,ge(I({},r),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:To,useValue:r}]},templateContext:()=>({dialogRef:s}),providers:(a,c,l)=>(s=new this._dialogRefConstructor(a,r,l),s.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:s}])}));return s.componentRef=o.componentRef,s.componentInstance=o.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(s);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let r=i.length;for(;r--;)i[r].close()}};e.\u0275fac=function(r){return new(r||e)(y(zn),y(Me),y(mi,8),y(c7,8),y(l7),y(e,12),y(wc),y(qt,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function h7(t,e){if(t&1){let n=Fv();Lt(0,"button",12),Tt("click",function(){Z_(n);let r=aa();return X_(r.cancel())}),pA(),Lt(1,"svg",13),Ir(2,"path",14),Ct(),mA(),Lt(3,"span",15),ca(4,"Close modal"),Ct()()}}function f7(t,e){t&1&&kv(0)}function p7(t,e){if(t&1&&Zt(0,f7,1,0,"ng-container",16),t&2){let n=aa();Rs("ngTemplateOutlet",n.templateRef)}}function m7(t,e){if(t&1){let n=Fv();Lt(0,"button",17),Tt("click",function(){Z_(n);let r=aa();return X_(r.cancel())}),ca(1),Ct()}if(t&2){let n=aa();Ln(),Ms(" ",n.cancelText," ")}}var g7=t=>({"pb-10":t}),wL=(()=>{let e=class e{constructor(i){if(this.data=i,this.doConfirm=new Ee,this.doCancel=new Ee,this.title="\u901A\u77E5",this.content="",this.okText="\u78BA\u8A8D",this.cancelText="\u53D6\u6D88",this.showCrossBtn=!0,this.outsideClose=!1,this.showCancelBtn=!0,this.btnCenter=!0,this.fullScreen=!1,this.data){let{title:r,content:s,okText:o,cancelText:a,showCrossBtn:c,outsideClose:l,showCancelBtn:u,contentTemplateRef:d,btnCenter:h,fullScreen:f,afterViewInit:p}=i;this.title=r,this.content=s,this.okText=o,this.cancelText=a,this.showCrossBtn=c,this.outsideClose=l,this.showCancelBtn=u,this.btnCenter=h,this.templateRef=d,this.fullScreen=f,this.afterViewInitEvent=p||(()=>{})}}ngOnInit(){}ngAfterViewInit(){this.afterViewInitEvent()}clickOutsideClose(){this.outsideClose&&this.cancel()}cancel(){this.doCancel.emit()}ok(){this.doConfirm.emit()}};e.\u0275fac=function(r){return new(r||e)(R(xC))},e.\u0275cmp=oi({type:e,selectors:[["app-modal"]],outputs:{doConfirm:"doConfirm",doCancel:"doCancel"},standalone:!0,features:[di],decls:15,vars:10,consts:[[1,"bg-white","dark:bg-gray-700","min-w-72","min-h-48","flex","overflow-y-auto","overflow-x-hidden","justify-center","items-center","w-full","md:inset-0","h-[calc(100%-1rem)]","max-h-full"],[1,"relative","w-full","max-w-2xl","max-h-screen","overflow-scroll"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button","class","text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide","default-modal",3,"click",4,"ngIf"],[1,"p-4","md:p-5","space-y-4","text-gray-900","dark:text-white","min-h-20"],[3,"innerHTML"],[1,"flex","justify-center","items-center","p-4","md:p-5","border-t","border-gray-200","rounded-b","dark:border-gray-600"],["type","button",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],["type","button","class","ms-3 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600",3,"click",4,"ngIf"],[1,"fixed","h-full","w-full","top-0","left-0","-z-10",3,"click"],["type","button","data-modal-hide","default-modal",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","ms-auto","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[4,"ngTemplateOutlet"],["type","button",1,"ms-3","text-gray-500","bg-white","hover:bg-gray-100","focus:ring-4","focus:outline-none","focus:ring-blue-300","rounded-lg","border","border-gray-200","text-sm","font-medium","px-5","py-2.5","hover:text-gray-900","focus:z-10","dark:bg-gray-700","dark:text-gray-300","dark:border-gray-500","dark:hover:text-white","dark:hover:bg-gray-600","dark:focus:ring-gray-600",3,"click"]],template:function(r,s){r&1&&(Lt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),ca(5),Ct(),Zt(6,h7,5,0,"button",5),Ct(),Lt(7,"div",6),Ir(8,"p",7),Zt(9,p7,1,1,"ng-container"),Ct(),Lt(10,"div",8)(11,"button",9),Tt("click",function(){return s.ok()}),ca(12),Ct(),Zt(13,m7,2,1,"button",10),Ct()()()(),Lt(14,"div",11),Tt("click",function(){return s.clickOutsideClose()}),Ct()),r&2&&(Ln(5),Ms(" ",s.title," "),Ln(),Rs("ngIf",s.showCrossBtn&&s.showCancelBtn),Ln(2),Rs("innerHTML",s.content,rR),Ln(),Ov(9,s.templateRef?9:-1),Ln(),VR(tx(8,g7,s.fullScreen)),Ln(2),Ms(" ",s.okText," "),Ln(),Rs("ngIf",s.showCancelBtn))},dependencies:[Ns,wx,Ex]});let t=e;return t})();var Yhe=(()=>{let e=class e{constructor(i){this.dialog=i,this.modalQueue=[],this.currentModal$=new ds,this.executeStatus$=new q,this.executeModal()}executeModal(){this.executeStatus$.subscribe(()=>{this.modalQueue.length>0&&this.currentModal$.next(this.modalQueue[0])})}openConfirm(i){let r=Date.now();this.pushModalConfig(r);let s=({title:o="\u901A\u77E5",content:a,okText:c="\u78BA\u8A8D",cancelText:l="\u53D6\u6D88",outsideClose:u=!1,showCrossBtn:d=!0,showCancelBtn:h=!0,btnCenter:f=!0,fullScreen:p=!1,contentTemplateRef:g,afterViewInit:v})=>{let E={data:{content:a,title:o,okText:c,cancelText:l,outsideClose:u,showCrossBtn:d,showCancelBtn:h,btnCenter:f,fullScreen:p,contentTemplateRef:g,afterViewInit:v}};return p?I({maxWidth:"100vw",width:"100%"},E):E};return this.modalQueue.length===1&&this.executeStatus$.next(!0),new Promise(o=>{this.currentModal$.subscribe(a=>{if(a===r){let c=this.dialog.open(wL,s(i));o(c),c.componentInstance.doConfirm.subscribe(()=>{i.onOk&&i.onOk(),this.modalQueue.shift(),c.close(),this.executeStatus$.next(!0)}),c.componentInstance.doCancel.subscribe(()=>{i.onCancel&&i.onCancel(),this.modalQueue.shift(),c.close(),this.executeStatus$.next(!0)})}})})}pushModalConfig(i){this.modalQueue.push(i)}cleanQueue(){let i=this.modalQueue[0];this.modalQueue=[i]}};e.\u0275fac=function(r){return new(r||e)(y(vL))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var RL=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(R(Vi),R(we))},e.\u0275dir=Ie({type:e});let t=e;return t})(),NC=(()=>{let e=class e extends RL{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=vr(e)))(s||e)}})(),e.\u0275dir=Ie({type:e,features:[it]});let t=e;return t})(),Nd=new x("NgValueAccessor"),y7={provide:Nd,useExisting:si(()=>_7),multi:!0},_7=(()=>{let e=class e extends NC{writeValue(i){this.setProperty("checked",i)}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=vr(e)))(s||e)}})(),e.\u0275dir=Ie({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,s){r&1&&Tt("change",function(a){return s.onChange(a.target.checked)})("blur",function(){return s.onTouched()})},features:[gn([y7]),it]});let t=e;return t})(),v7={provide:Nd,useExisting:si(()=>xL),multi:!0};function w7(){let t=pi()?pi().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var E7=new x("CompositionEventMode"),xL=(()=>{let e=class e extends RL{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!w7())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(R(Vi),R(we),R(E7,8))},e.\u0275dir=Ie({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&Tt("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[gn([v7]),it]});let t=e;return t})();function ss(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function ML(t){return t!=null&&typeof t.length=="number"}var Zg=new x("NgValidators"),Xg=new x("NgAsyncValidators"),I7=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,EL=class{static min(e){return b7(e)}static max(e){return D7(e)}static required(e){return C7(e)}static requiredTrue(e){return T7(e)}static email(e){return S7(e)}static minLength(e){return A7(e)}static maxLength(e){return R7(e)}static pattern(e){return x7(e)}static nullValidator(e){return NL(e)}static compose(e){return VL(e)}static composeAsync(e){return jL(e)}};function b7(t){return e=>{if(ss(e.value)||ss(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function D7(t){return e=>{if(ss(e.value)||ss(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function C7(t){return ss(t.value)?{required:!0}:null}function T7(t){return t.value===!0?null:{required:!0}}function S7(t){return ss(t.value)||I7.test(t.value)?null:{email:!0}}function A7(t){return e=>ss(e.value)||!ML(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function R7(t){return e=>ML(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function x7(t){if(!t)return NL;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(ss(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function NL(t){return null}function PL(t){return t!=null}function OL(t){return xs(t)?Pe(t):t}function kL(t){let e={};return t.forEach(n=>{e=n!=null?I(I({},e),n):e}),Object.keys(e).length===0?null:e}function FL(t,e){return e.map(n=>n(t))}function M7(t){return!t.validate}function LL(t){return t.map(e=>M7(e)?e:n=>e.validate(n))}function VL(t){if(!t)return null;let e=t.filter(PL);return e.length==0?null:function(n){return kL(FL(n,e))}}function PC(t){return t!=null?VL(LL(t)):null}function jL(t){if(!t)return null;let e=t.filter(PL);return e.length==0?null:function(n){let i=FL(n,e).map(OL);return vy(i).pipe(ee(kL))}}function OC(t){return t!=null?jL(LL(t)):null}function IL(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function BL(t){return t._rawValidators}function UL(t){return t._rawAsyncValidators}function MC(t){return t?Array.isArray(t)?t:[t]:[]}function Hg(t,e){return Array.isArray(t)?t.includes(e):t===e}function bL(t,e){let n=MC(e);return MC(t).forEach(r=>{Hg(n,r)||n.push(r)}),n}function DL(t,e){return MC(e).filter(n=>!Hg(t,n))}var zg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=PC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=OC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},nr=class extends zg{get formDirective(){return null}get path(){return null}},So=class extends zg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},qg=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},N7={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},pfe=ge(I({},N7),{"[class.ng-submitted]":"isSubmitted"}),mfe=(()=>{let e=class e extends qg{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(R(So,2))},e.\u0275dir=Ie({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&Ui("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[it]});let t=e;return t})(),gfe=(()=>{let e=class e extends qg{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(R(nr,10))},e.\u0275dir=Ie({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&Ui("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[it]});let t=e;return t})();var Rd="VALID",$g="INVALID",Ic="PENDING",xd="DISABLED";function $L(t){return(Jg(t)?t.validators:t)||null}function P7(t){return Array.isArray(t)?PC(t):t||null}function HL(t,e){return(Jg(e)?e.asyncValidators:t)||null}function O7(t){return Array.isArray(t)?OC(t):t||null}function Jg(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function k7(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new T(1e3,"");if(!i[n])throw new T(1001,"")}function F7(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new T(1002,"")})}var Gg=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Rd}get invalid(){return this.status===$g}get pending(){return this.status==Ic}get disabled(){return this.status===xd}get enabled(){return this.status!==xd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(bL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(bL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(DL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(DL(e,this._rawAsyncValidators))}hasValidator(e){return Hg(this._rawValidators,e)}hasAsyncValidator(e){return Hg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ic,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=xd,this.errors=null,this._forEachChild(i=>{i.disable(ge(I({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ge(I({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Rd,this._forEachChild(i=>{i.enable(ge(I({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ge(I({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rd||this.status===Ic)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xd:Rd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ic,this._hasOwnPendingAsyncValidator=!0;let n=OL(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ee,this.statusChanges=new Ee}_calculateStatus(){return this._allControlsDisabled()?xd:this.errors?$g:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ic)?Ic:this._anyControlsHaveStatus($g)?$g:Rd}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Jg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=P7(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=O7(this._rawAsyncValidators)}},Wg=class extends Gg{constructor(e,n,i){super($L(n),HL(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){F7(this,!0,e),Object.keys(e).forEach(i=>{k7(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Pd=new x("CallSetDisabledState",{providedIn:"root",factory:()=>ey}),ey="always";function zL(t,e){return[...e.path,t]}function Kg(t,e,n=ey){kC(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),V7(t,e),B7(t,e),j7(t,e),L7(t,e)}function CL(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Yg(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Qg(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function L7(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function kC(t,e){let n=BL(t);e.validator!==null?t.setValidators(IL(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=UL(t);e.asyncValidator!==null?t.setAsyncValidators(IL(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();Qg(e._rawValidators,r),Qg(e._rawAsyncValidators,r)}function Yg(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=BL(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let r=UL(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}let i=()=>{};return Qg(e._rawValidators,i),Qg(e._rawAsyncValidators,i),n}function V7(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&qL(t,e)})}function j7(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&qL(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function qL(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function B7(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function GL(t,e){t==null,kC(t,e)}function U7(t,e){return Yg(t,e)}function WL(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function $7(t){return Object.getPrototypeOf(t.constructor)===NC}function KL(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function QL(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(s=>{s.constructor===xL?n=s:$7(s)?i=s:r=s}),r||i||n||null}function H7(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var z7={provide:nr,useExisting:si(()=>q7)},Md=Promise.resolve(),q7=(()=>{let e=class e extends nr{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ee,this.form=new Wg({},PC(i),OC(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){Md.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),Kg(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){Md.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){Md.then(()=>{let r=this._findContainer(i.path),s=new Wg({});GL(s,i),r.registerControl(i.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){Md.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){Md.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,KL(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(R(Zg,10),R(Xg,10),R(Pd,8))},e.\u0275dir=Ie({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){r&1&&Tt("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[fe.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[gn([z7]),it]});let t=e;return t})();function TL(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function SL(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var YL=class extends Gg{constructor(e=null,n,i){super($L(n),HL(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(SL(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){TL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){TL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){SL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var G7=t=>t instanceof YL;var W7={provide:So,useExisting:si(()=>K7)},AL=Promise.resolve(),K7=(()=>{let e=class e extends So{constructor(i,r,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new YL,this._registered=!1,this.name="",this.update=new Ee,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=QL(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),WL(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Kg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){AL.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&yn(r);AL.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?zL(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(R(nr,9),R(Zg,10),R(Xg,10),R(Nd,10),R(ci,8),R(Pd,8))},e.\u0275dir=Ie({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[fe.None,"disabled","isDisabled"],model:[fe.None,"ngModel","model"],options:[fe.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[gn([W7]),it,Ft]});let t=e;return t})();var Q7={provide:Nd,useExisting:si(()=>Y7),multi:!0},Y7=(()=>{let e=class e extends NC{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=vr(e)))(s||e)}})(),e.\u0275dir=Ie({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){r&1&&Tt("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[gn([Q7]),it]});let t=e;return t})();var Z7=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})();var ZL=new x("NgModelWithFormControlWarning");var X7={provide:nr,useExisting:si(()=>J7)},J7=(()=>{let e=class e extends nr{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ee,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Yg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return Kg(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){CL(i.control||null,i,!1),H7(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,KL(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,s=this.form.get(i.path);r!==s&&(CL(r||null,i),G7(s)&&(Kg(s,i,this.callSetDisabledState),i.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);GL(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&U7(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){kC(this.form,this),this._oldForm&&Yg(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(R(Zg,10),R(Xg,10),R(Pd,8))},e.\u0275dir=Ie({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,s){r&1&&Tt("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[fe.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[gn([X7]),it,Ft]});let t=e;return t})();var eY={provide:So,useExisting:si(()=>tY)},tY=(()=>{let e=class e extends So{set isDisabled(i){}constructor(i,r,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Ee,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=QL(this,o)}ngOnChanges(i){this._added||this._setUpControl(),WL(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return zL(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(R(nr,13),R(Zg,10),R(Xg,10),R(Nd,10),R(ZL,8))},e.\u0275dir=Ie({type:e,selectors:[["","formControlName",""]],inputs:{name:[fe.None,"formControlName","name"],isDisabled:[fe.None,"disabled","isDisabled"],model:[fe.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[gn([eY]),it,Ft]});let t=e;return t})();var XL=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[Z7]});let t=e;return t})();var FC=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Pd,useValue:i.callSetDisabledState??ey}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[XL]});let t=e;return t})(),LC=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:ZL,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:Pd,useValue:i.callSetDisabledState??ey}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[XL]});let t=e;return t})();var nY=[Ns,FC,LC,Gw],bfe=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[nY,Ns,FC,LC,Gw]});let t=e;return t})();export{I as a,ge as b,iY as c,rY as d,m as e,Ae as f,W as g,q as h,fT as i,$t as j,rX as k,Pe as l,H as m,Vo as n,ee as o,ke as p,Kn as q,ur as r,Tc as s,BV as t,Sc as u,UV as v,Fe as w,Be as x,HV as y,GV as z,LT as A,Mn as B,Kt as C,Nn as D,Qe as E,si as F,ZV as G,D as H,ie as I,Je as J,x as K,y as L,C as M,fe as N,oi as O,re as P,Ie as Q,Ft as R,Z_ as S,X_ as T,pA as U,mA as V,vr as W,ov as X,gt as Y,lv as Z,rf as _,DB as $,Me as aa,pn as ba,qt as ca,Are as da,we as ea,oR as fa,Ln as ga,R as ha,mR as ia,ci as ja,Ee as ka,L as la,it as ma,Bi as na,mn as oa,Zt as pa,ui as qa,Rs as ra,Pv as sa,Ui as ta,VR as ua,Ov as va,Mre as wa,Nre as xa,Pre as ya,Ore as za,Lt as Aa,Ct as Ba,Ir as Ca,Fv as Da,mf as Ea,z$ as Fa,Tt as Ga,Y$ as Ha,aa as Ia,KR as Ja,QR as Ka,Fn as La,lH as Ma,yf as Na,tl as Oa,nl as Pa,Fre as Qa,ca as Ra,hH as Sa,Ms as Ta,gn as Ua,di as Va,tx as Wa,Lre as Xa,Vre as Ya,jre as Za,bf as _a,hi as $a,Bre as ab,yn as bb,Y as cb,gx as db,ase as eb,wx as fb,cse as gb,Ex as hb,lse as ib,Ns as jb,Zv as kb,Rse as lb,xse as mb,Tr as nb,Jz as ob,Vn as pb,Kse as qb,Qse as rb,Gw as sb,Jse as tb,Voe as ub,joe as vb,Boe as wb,$s as xb,xae as yb,rI as zb,LN as Ab,Pae as Bb,Ze as Cb,od as Db,dle as Eb,hle as Fb,fle as Gb,ple as Hb,mle as Ib,gle as Jb,yle as Kb,_le as Lb,vle as Mb,wle as Nb,Ele as Ob,Ile as Pb,ble as Qb,Dle as Rb,Cle as Sb,Tle as Tb,Sle as Ub,Ale as Vb,Rle as Wb,iQ as Xb,md as Yb,fc as Zb,er as _b,Jle as $b,We as ac,oue as bc,mc as cc,k1 as dc,gc as ec,Hn as fc,vd as gc,L1 as hc,iC as ic,F1 as jc,yc as kc,_c as lc,Ed as mc,Og as nc,kg as oc,Id as pc,dC as qc,zn as rc,q1 as sc,W1 as tc,Dde as uc,mC as vc,gC as wc,Cd as xc,Cde as yc,Tde as zc,Nle as Ac,Ple as Bc,T0 as Cc,Ole as Dc,kle as Ec,Fle as Fc,Qle as Gc,iL as Hc,rL as Ic,Bg as Jc,YQ as Kc,XQ as Lc,fhe as Mc,phe as Nc,mhe as Oc,ghe as Pc,Yhe as Qc,Nd as Rc,_7 as Sc,xL as Tc,Zg as Uc,EL as Vc,nr as Wc,So as Xc,mfe as Yc,gfe as Zc,Wg as _c,q7 as $c,YL as ad,K7 as bd,Y7 as cd,J7 as dd,tY as ed,FC as fd,bfe as gd};
